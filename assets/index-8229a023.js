function XR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var vU={exports:{}},J_={},bU={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=Symbol.for("react.element"),U7=Symbol.for("react.portal"),$7=Symbol.for("react.fragment"),j7=Symbol.for("react.strict_mode"),V7=Symbol.for("react.profiler"),G7=Symbol.for("react.provider"),H7=Symbol.for("react.context"),W7=Symbol.for("react.forward_ref"),X7=Symbol.for("react.suspense"),Y7=Symbol.for("react.memo"),q7=Symbol.for("react.lazy"),Ck=Symbol.iterator;function K7(t){return t===null||typeof t!="object"?null:(t=Ck&&t[Ck]||t["@@iterator"],typeof t=="function"?t:null)}var _U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xU=Object.assign,wU={};function ap(t,e,n){this.props=t,this.context=e,this.refs=wU,this.updater=n||_U}ap.prototype.isReactComponent={};ap.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ap.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EU(){}EU.prototype=ap.prototype;function YR(t,e,n){this.props=t,this.context=e,this.refs=wU,this.updater=n||_U}var qR=YR.prototype=new EU;qR.constructor=YR;xU(qR,ap.prototype);qR.isPureReactComponent=!0;var Ak=Array.isArray,SU=Object.prototype.hasOwnProperty,KR={current:null},TU={key:!0,ref:!0,__self:!0,__source:!0};function PU(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)SU.call(e,r)&&!TU.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:S0,type:t,key:s,ref:o,props:i,_owner:KR.current}}function Z7(t,e){return{$$typeof:S0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ZR(t){return typeof t=="object"&&t!==null&&t.$$typeof===S0}function Q7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rk=/\/+/g;function rS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Q7(""+t.key):e.toString(36)}function O1(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case S0:case U7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rS(o,0):r,Ak(i)?(n="",t!=null&&(n=t.replace(Rk,"$&/")+"/"),O1(i,e,n,"",function(c){return c})):i!=null&&(ZR(i)&&(i=Z7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rk,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ak(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+rS(s,a);o+=O1(s,e,n,l,i)}else if(l=K7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+rS(s,a++),o+=O1(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rv(t,e,n){if(t==null)return t;var r=[],i=0;return O1(t,r,"","",function(s){return e.call(n,s,i++)}),r}function J7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ji={current:null},L1={transition:null},eX={ReactCurrentDispatcher:ji,ReactCurrentBatchConfig:L1,ReactCurrentOwner:KR};Kt.Children={map:rv,forEach:function(t,e,n){rv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rv(t,function(){e++}),e},toArray:function(t){return rv(t,function(e){return e})||[]},only:function(t){if(!ZR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kt.Component=ap;Kt.Fragment=$7;Kt.Profiler=V7;Kt.PureComponent=YR;Kt.StrictMode=j7;Kt.Suspense=X7;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eX;Kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xU({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=KR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)SU.call(e,l)&&!TU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:S0,type:t.type,key:i,ref:s,props:r,_owner:o}};Kt.createContext=function(t){return t={$$typeof:H7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G7,_context:t},t.Consumer=t};Kt.createElement=PU;Kt.createFactory=function(t){var e=PU.bind(null,t);return e.type=t,e};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(t){return{$$typeof:W7,render:t}};Kt.isValidElement=ZR;Kt.lazy=function(t){return{$$typeof:q7,_payload:{_status:-1,_result:t},_init:J7}};Kt.memo=function(t,e){return{$$typeof:Y7,type:t,compare:e===void 0?null:e}};Kt.startTransition=function(t){var e=L1.transition;L1.transition={};try{t()}finally{L1.transition=e}};Kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Kt.useCallback=function(t,e){return ji.current.useCallback(t,e)};Kt.useContext=function(t){return ji.current.useContext(t)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(t){return ji.current.useDeferredValue(t)};Kt.useEffect=function(t,e){return ji.current.useEffect(t,e)};Kt.useId=function(){return ji.current.useId()};Kt.useImperativeHandle=function(t,e,n){return ji.current.useImperativeHandle(t,e,n)};Kt.useInsertionEffect=function(t,e){return ji.current.useInsertionEffect(t,e)};Kt.useLayoutEffect=function(t,e){return ji.current.useLayoutEffect(t,e)};Kt.useMemo=function(t,e){return ji.current.useMemo(t,e)};Kt.useReducer=function(t,e,n){return ji.current.useReducer(t,e,n)};Kt.useRef=function(t){return ji.current.useRef(t)};Kt.useState=function(t){return ji.current.useState(t)};Kt.useSyncExternalStore=function(t,e,n){return ji.current.useSyncExternalStore(t,e,n)};Kt.useTransition=function(){return ji.current.useTransition()};Kt.version="18.2.0";bU.exports=Kt;var C=bU.exports;const An=Rh(C),vb=XR({__proto__:null,default:An},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tX=C,nX=Symbol.for("react.element"),rX=Symbol.for("react.fragment"),iX=Object.prototype.hasOwnProperty,sX=tX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oX={key:!0,ref:!0,__self:!0,__source:!0};function CU(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iX.call(e,r)&&!oX.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nX,type:t,key:s,ref:o,props:i,_owner:sX.current}}J_.Fragment=rX;J_.jsx=CU;J_.jsxs=CU;vU.exports=J_;var Q=vU.exports;function aX(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function lX(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var cX=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lX(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=aX(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),bi="-ms-",bb="-moz-",un="-webkit-",AU="comm",QR="rule",JR="decl",uX="@import",RU="@keyframes",hX="@layer",dX=Math.abs,ex=String.fromCharCode,fX=Object.assign;function pX(t,e){return ai(t,0)^45?(((e<<2^ai(t,0))<<2^ai(t,1))<<2^ai(t,2))<<2^ai(t,3):0}function IU(t){return t.trim()}function gX(t,e){return(t=e.exec(t))?t[0]:t}function hn(t,e,n){return t.replace(e,n)}function AP(t,e){return t.indexOf(e)}function ai(t,e){return t.charCodeAt(e)|0}function Em(t,e,n){return t.slice(e,n)}function Ba(t){return t.length}function e2(t){return t.length}function iv(t,e){return e.push(t),t}function mX(t,e){return t.map(e).join("")}var tx=1,xf=1,MU=0,as=0,Er=0,lp="";function nx(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:tx,column:xf,length:o,return:""}}function zp(t,e){return fX(nx("",null,null,"",null,null,0),t,{length:-t.length},e)}function yX(){return Er}function vX(){return Er=as>0?ai(lp,--as):0,xf--,Er===10&&(xf=1,tx--),Er}function Ms(){return Er=as<MU?ai(lp,as++):0,xf++,Er===10&&(xf=1,tx++),Er}function Ha(){return ai(lp,as)}function k1(){return as}function T0(t,e){return Em(lp,t,e)}function Sm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OU(t){return tx=xf=1,MU=Ba(lp=t),as=0,[]}function LU(t){return lp="",t}function D1(t){return IU(T0(as-1,RP(t===91?t+2:t===40?t+1:t)))}function bX(t){for(;(Er=Ha())&&Er<33;)Ms();return Sm(t)>2||Sm(Er)>3?"":" "}function _X(t,e){for(;--e&&Ms()&&!(Er<48||Er>102||Er>57&&Er<65||Er>70&&Er<97););return T0(t,k1()+(e<6&&Ha()==32&&Ms()==32))}function RP(t){for(;Ms();)switch(Er){case t:return as;case 34:case 39:t!==34&&t!==39&&RP(Er);break;case 40:t===41&&RP(t);break;case 92:Ms();break}return as}function xX(t,e){for(;Ms()&&t+Er!==47+10;)if(t+Er===42+42&&Ha()===47)break;return"/*"+T0(e,as-1)+"*"+ex(t===47?t:Ms())}function wX(t){for(;!Sm(Ha());)Ms();return T0(t,as)}function EX(t){return LU(N1("",null,null,null,[""],t=OU(t),0,[0],t))}function N1(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,f=0,g=0,m=0,y=1,x=1,b=1,w=0,v="",E=i,T=s,P=r,R=v;x;)switch(m=w,w=Ms()){case 40:if(m!=108&&ai(R,h-1)==58){AP(R+=hn(D1(w),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:R+=D1(w);break;case 9:case 10:case 13:case 32:R+=bX(m);break;case 92:R+=_X(k1()-1,7);continue;case 47:switch(Ha()){case 42:case 47:iv(SX(xX(Ms(),k1()),e,n),l);break;default:R+="/"}break;case 123*y:a[c++]=Ba(R)*b;case 125*y:case 59:case 0:switch(w){case 0:case 125:x=0;case 59+u:b==-1&&(R=hn(R,/\f/g,"")),g>0&&Ba(R)-h&&iv(g>32?Mk(R+";",r,n,h-1):Mk(hn(R," ","")+";",r,n,h-2),l);break;case 59:R+=";";default:if(iv(P=Ik(R,e,n,c,u,i,a,v,E=[],T=[],h),s),w===123)if(u===0)N1(R,e,P,P,E,s,h,a,T);else switch(f===99&&ai(R,3)===110?100:f){case 100:case 108:case 109:case 115:N1(t,P,P,r&&iv(Ik(t,P,P,0,0,i,a,v,i,E=[],h),T),i,T,h,a,r?E:T);break;default:N1(R,P,P,P,[""],T,0,a,T)}}c=u=g=0,y=b=1,v=R="",h=o;break;case 58:h=1+Ba(R),g=m;default:if(y<1){if(w==123)--y;else if(w==125&&y++==0&&vX()==125)continue}switch(R+=ex(w),w*y){case 38:b=u>0?1:(R+="\f",-1);break;case 44:a[c++]=(Ba(R)-1)*b,b=1;break;case 64:Ha()===45&&(R+=D1(Ms())),f=Ha(),u=h=Ba(v=R+=wX(k1())),w++;break;case 45:m===45&&Ba(R)==2&&(y=0)}}return s}function Ik(t,e,n,r,i,s,o,a,l,c,u){for(var h=i-1,f=i===0?s:[""],g=e2(f),m=0,y=0,x=0;m<r;++m)for(var b=0,w=Em(t,h+1,h=dX(y=o[m])),v=t;b<g;++b)(v=IU(y>0?f[b]+" "+w:hn(w,/&\f/g,f[b])))&&(l[x++]=v);return nx(t,e,n,i===0?QR:a,l,c,u)}function SX(t,e,n){return nx(t,e,n,AU,ex(yX()),Em(t,2,-2),0)}function Mk(t,e,n,r){return nx(t,e,n,JR,Em(t,0,r),Em(t,r+1,-1),r)}function sf(t,e){for(var n="",r=e2(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function TX(t,e,n,r){switch(t.type){case hX:if(t.children.length)break;case uX:case JR:return t.return=t.return||t.value;case AU:return"";case RU:return t.return=t.value+"{"+sf(t.children,r)+"}";case QR:t.value=t.props.join(",")}return Ba(n=sf(t.children,r))?t.return=t.value+"{"+n+"}":""}function PX(t){var e=e2(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function CX(t){return function(e){e.root||(e=e.return)&&t(e)}}function kU(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var AX=function(e,n,r){for(var i=0,s=0;i=s,s=Ha(),i===38&&s===12&&(n[r]=1),!Sm(s);)Ms();return T0(e,as)},RX=function(e,n){var r=-1,i=44;do switch(Sm(i)){case 0:i===38&&Ha()===12&&(n[r]=1),e[r]+=AX(as-1,n,r);break;case 2:e[r]+=D1(i);break;case 4:if(i===44){e[++r]=Ha()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=ex(i)}while(i=Ms());return e},IX=function(e,n){return LU(RX(OU(e),n))},Ok=new WeakMap,MX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Ok.get(r))&&!i){Ok.set(e,!0);for(var s=[],o=IX(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},OX=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function DU(t,e){switch(pX(t,e)){case 5103:return un+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return un+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return un+t+bb+t+bi+t+t;case 6828:case 4268:return un+t+bi+t+t;case 6165:return un+t+bi+"flex-"+t+t;case 5187:return un+t+hn(t,/(\w+).+(:[^]+)/,un+"box-$1$2"+bi+"flex-$1$2")+t;case 5443:return un+t+bi+"flex-item-"+hn(t,/flex-|-self/,"")+t;case 4675:return un+t+bi+"flex-line-pack"+hn(t,/align-content|flex-|-self/,"")+t;case 5548:return un+t+bi+hn(t,"shrink","negative")+t;case 5292:return un+t+bi+hn(t,"basis","preferred-size")+t;case 6060:return un+"box-"+hn(t,"-grow","")+un+t+bi+hn(t,"grow","positive")+t;case 4554:return un+hn(t,/([^-])(transform)/g,"$1"+un+"$2")+t;case 6187:return hn(hn(hn(t,/(zoom-|grab)/,un+"$1"),/(image-set)/,un+"$1"),t,"")+t;case 5495:case 3959:return hn(t,/(image-set\([^]*)/,un+"$1$`$1");case 4968:return hn(hn(t,/(.+:)(flex-)?(.*)/,un+"box-pack:$3"+bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+un+t+t;case 4095:case 3583:case 4068:case 2532:return hn(t,/(.+)-inline(.+)/,un+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ba(t)-1-e>6)switch(ai(t,e+1)){case 109:if(ai(t,e+4)!==45)break;case 102:return hn(t,/(.+:)(.+)-([^]+)/,"$1"+un+"$2-$3$1"+bb+(ai(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~AP(t,"stretch")?DU(hn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ai(t,e+1)!==115)break;case 6444:switch(ai(t,Ba(t)-3-(~AP(t,"!important")&&10))){case 107:return hn(t,":",":"+un)+t;case 101:return hn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+un+(ai(t,14)===45?"inline-":"")+"box$3$1"+un+"$2$3$1"+bi+"$2box$3")+t}break;case 5936:switch(ai(t,e+11)){case 114:return un+t+bi+hn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return un+t+bi+hn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return un+t+bi+hn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return un+t+bi+t+t}return t}var LX=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case JR:e.return=DU(e.value,e.length);break;case RU:return sf([zp(e,{value:hn(e.value,"@","@"+un)})],i);case QR:if(e.length)return mX(e.props,function(s){switch(gX(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sf([zp(e,{props:[hn(s,/:(read-\w+)/,":"+bb+"$1")]})],i);case"::placeholder":return sf([zp(e,{props:[hn(s,/:(plac\w+)/,":"+un+"input-$1")]}),zp(e,{props:[hn(s,/:(plac\w+)/,":"+bb+"$1")]}),zp(e,{props:[hn(s,/:(plac\w+)/,bi+"input-$1")]})],i)}return""})}},kX=[LX],DX=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var x=y.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||kX,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var x=y.getAttribute("data-emotion").split(" "),b=1;b<x.length;b++)s[x[b]]=!0;a.push(y)});var l,c=[MX,OX];{var u,h=[TX,CX(function(y){u.insert(y)})],f=PX(c.concat(i,h)),g=function(x){return sf(EX(x),f)};l=function(x,b,w,v){u=w,g(x?x+"{"+b.styles+"}":b.styles),v&&(m.inserted[b.name]=!0)}}var m={key:n,sheet:new cX({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(a),m};function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$.apply(this,arguments)}var NU={exports:{}},vn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=typeof Symbol=="function"&&Symbol.for,t2=qr?Symbol.for("react.element"):60103,n2=qr?Symbol.for("react.portal"):60106,rx=qr?Symbol.for("react.fragment"):60107,ix=qr?Symbol.for("react.strict_mode"):60108,sx=qr?Symbol.for("react.profiler"):60114,ox=qr?Symbol.for("react.provider"):60109,ax=qr?Symbol.for("react.context"):60110,r2=qr?Symbol.for("react.async_mode"):60111,lx=qr?Symbol.for("react.concurrent_mode"):60111,cx=qr?Symbol.for("react.forward_ref"):60112,ux=qr?Symbol.for("react.suspense"):60113,NX=qr?Symbol.for("react.suspense_list"):60120,hx=qr?Symbol.for("react.memo"):60115,dx=qr?Symbol.for("react.lazy"):60116,BX=qr?Symbol.for("react.block"):60121,FX=qr?Symbol.for("react.fundamental"):60117,zX=qr?Symbol.for("react.responder"):60118,UX=qr?Symbol.for("react.scope"):60119;function Vs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t2:switch(t=t.type,t){case r2:case lx:case rx:case sx:case ix:case ux:return t;default:switch(t=t&&t.$$typeof,t){case ax:case cx:case dx:case hx:case ox:return t;default:return e}}case n2:return e}}}function BU(t){return Vs(t)===lx}vn.AsyncMode=r2;vn.ConcurrentMode=lx;vn.ContextConsumer=ax;vn.ContextProvider=ox;vn.Element=t2;vn.ForwardRef=cx;vn.Fragment=rx;vn.Lazy=dx;vn.Memo=hx;vn.Portal=n2;vn.Profiler=sx;vn.StrictMode=ix;vn.Suspense=ux;vn.isAsyncMode=function(t){return BU(t)||Vs(t)===r2};vn.isConcurrentMode=BU;vn.isContextConsumer=function(t){return Vs(t)===ax};vn.isContextProvider=function(t){return Vs(t)===ox};vn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t2};vn.isForwardRef=function(t){return Vs(t)===cx};vn.isFragment=function(t){return Vs(t)===rx};vn.isLazy=function(t){return Vs(t)===dx};vn.isMemo=function(t){return Vs(t)===hx};vn.isPortal=function(t){return Vs(t)===n2};vn.isProfiler=function(t){return Vs(t)===sx};vn.isStrictMode=function(t){return Vs(t)===ix};vn.isSuspense=function(t){return Vs(t)===ux};vn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===rx||t===lx||t===sx||t===ix||t===ux||t===NX||typeof t=="object"&&t!==null&&(t.$$typeof===dx||t.$$typeof===hx||t.$$typeof===ox||t.$$typeof===ax||t.$$typeof===cx||t.$$typeof===FX||t.$$typeof===zX||t.$$typeof===UX||t.$$typeof===BX)};vn.typeOf=Vs;NU.exports=vn;var $X=NU.exports,FU=$X,jX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VX={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zU={};zU[FU.ForwardRef]=jX;zU[FU.Memo]=VX;var GX=!0;function UU(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var i2=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||GX===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},s2=function(e,n,r){i2(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function HX(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var WX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},XX=/[A-Z]|^ms/g,YX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$U=function(e){return e.charCodeAt(1)===45},Lk=function(e){return e!=null&&typeof e!="boolean"},iS=kU(function(t){return $U(t)?t:t.replace(XX,"-$&").toLowerCase()}),kk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(YX,function(r,i,s){return Fa={name:i,styles:s,next:Fa},i})}return WX[e]!==1&&!$U(e)&&typeof n=="number"&&n!==0?n+"px":n};function Tm(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Fa={name:n.name,styles:n.styles,next:Fa},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Fa={name:r.name,styles:r.styles,next:Fa},r=r.next;var i=n.styles+";";return i}return qX(t,e,n)}case"function":{if(t!==void 0){var s=Fa,o=n(t);return Fa=s,Tm(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function qX(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Tm(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":Lk(o)&&(r+=iS(s)+":"+kk(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)Lk(o[a])&&(r+=iS(s)+":"+kk(s,o[a])+";");else{var l=Tm(t,e,o);switch(s){case"animation":case"animationName":{r+=iS(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var Dk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Fa,fx=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Fa=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Tm(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Tm(r,n,e[a]),i&&(s+=o[a]);Dk.lastIndex=0;for(var l="",c;(c=Dk.exec(s))!==null;)l+="-"+c[1];var u=HX(s)+l;return{name:u,styles:s,next:Fa}},KX=function(e){return e()},jU=vb["useInsertionEffect"]?vb["useInsertionEffect"]:!1,VU=jU||KX,Nk=jU||C.useLayoutEffect,px={}.hasOwnProperty,GU=C.createContext(typeof HTMLElement<"u"?DX({key:"css"}):null);GU.Provider;var o2=function(e){return C.forwardRef(function(n,r){var i=C.useContext(GU);return e(n,i,r)})},gx=C.createContext({}),IP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",HU=function(e,n){var r={};for(var i in n)px.call(n,i)&&(r[i]=n[i]);return r[IP]=e,r},ZX=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return i2(n,r,i),VU(function(){return s2(n,r,i)}),null},QX=o2(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[IP],s=[r],o="";typeof t.className=="string"?o=UU(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=fx(s,void 0,C.useContext(gx));o+=e.key+"-"+a.name;var l={};for(var c in t)px.call(t,c)&&c!=="css"&&c!==IP&&(l[c]=t[c]);return l.ref=n,l.className=o,C.createElement(C.Fragment,null,C.createElement(ZX,{cache:e,serialized:a,isStringTag:typeof i=="string"}),C.createElement(i,l))}),WU=QX,MP=Q.Fragment;function K(t,e,n){return px.call(e,"css")?Q.jsx(WU,HU(t,e),n):Q.jsx(t,e,n)}function Bt(t,e,n){return px.call(e,"css")?Q.jsxs(WU,HU(t,e),n):Q.jsxs(t,e,n)}var XU={exports:{}},Gs={},YU={exports:{}},qU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var Z=Y-1>>>1,se=U[Z];if(0<i(se,X))U[Z]=X,U[Y]=se,Y=Z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var Z=0,se=U.length,xe=se>>>1;Z<xe;){var de=2*(Z+1)-1,Me=U[de],he=de+1,Te=U[he];if(0>i(Me,Y))he<se&&0>i(Te,Me)?(U[Z]=Te,U[he]=Y,Z=he):(U[Z]=Me,U[de]=Y,Z=de);else if(he<se&&0>i(Te,Y))U[Z]=Te,U[he]=Y,Z=he;else break e}}return X}function i(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(U){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=U)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function E(U){if(y=!1,v(U),!m)if(n(l)!==null)m=!0,W(T);else{var X=n(c);X!==null&&H(E,X.startTime-U)}}function T(U,X){m=!1,y&&(y=!1,b(M),M=-1),g=!0;var Y=f;try{for(v(X),h=n(l);h!==null&&(!(h.expirationTime>X)||U&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var se=Z(h.expirationTime<=X);X=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),v(X)}else r(l);h=n(l)}if(h!==null)var xe=!0;else{var de=n(c);de!==null&&H(E,de.startTime-X),xe=!1}return xe}finally{h=null,f=Y,g=!1}}var P=!1,R=null,M=-1,k=5,O=-1;function F(){return!(t.unstable_now()-O<k)}function I(){if(R!==null){var U=t.unstable_now();O=U;var X=!0;try{X=R(!0,U)}finally{X?D():(P=!1,R=null)}}else P=!1}var D;if(typeof w=="function")D=function(){w(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=I,D=function(){j.postMessage(null)}}else D=function(){x(I,0)};function W(U){R=U,P||(P=!0,D())}function H(U,X){M=x(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,W(T))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var Y=f;f=X;try{return U()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=f;f=U;try{return X()}finally{f=Y}},t.unstable_scheduleCallback=function(U,X,Y){var Z=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:se,sortIndex:-1},Y>Z?(U.sortIndex=Y,e(c,U),n(l)===null&&U===n(c)&&(y?(b(M),M=-1):y=!0,H(E,Y-Z))):(U.sortIndex=se,e(l,U),m||g||(m=!0,W(T))),U},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(U){var X=f;return function(){var Y=f;f=X;try{return U.apply(this,arguments)}finally{f=Y}}}})(qU);YU.exports=qU;var JX=YU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU=C,Bs=JX;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZU=new Set,Pm={};function Ih(t,e){wf(t,e),wf(t+"Capture",e)}function wf(t,e){for(Pm[t]=e,t=0;t<e.length;t++)ZU.add(e[t])}var Ml=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OP=Object.prototype.hasOwnProperty,eY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bk={},Fk={};function tY(t){return OP.call(Fk,t)?!0:OP.call(Bk,t)?!1:eY.test(t)?Fk[t]=!0:(Bk[t]=!0,!1)}function nY(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rY(t,e,n,r){if(e===null||typeof e>"u"||nY(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ui[t]=new Vi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ui[e]=new Vi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ui[t]=new Vi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ui[t]=new Vi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ui[t]=new Vi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ui[t]=new Vi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ui[t]=new Vi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ui[t]=new Vi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ui[t]=new Vi(t,5,!1,t.toLowerCase(),null,!1,!1)});var a2=/[\-:]([a-z])/g;function l2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(a2,l2);ui[e]=new Vi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(a2,l2);ui[e]=new Vi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(a2,l2);ui[e]=new Vi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ui[t]=new Vi(t,1,!1,t.toLowerCase(),null,!1,!1)});ui.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ui[t]=new Vi(t,1,!1,t.toLowerCase(),null,!0,!0)});function c2(t,e,n,r){var i=ui.hasOwnProperty(e)?ui[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rY(e,n,i,r)&&(n=null),r||i===null?tY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vl=KU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sv=Symbol.for("react.element"),Fd=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),u2=Symbol.for("react.strict_mode"),LP=Symbol.for("react.profiler"),QU=Symbol.for("react.provider"),JU=Symbol.for("react.context"),h2=Symbol.for("react.forward_ref"),kP=Symbol.for("react.suspense"),DP=Symbol.for("react.suspense_list"),d2=Symbol.for("react.memo"),bc=Symbol.for("react.lazy"),e5=Symbol.for("react.offscreen"),zk=Symbol.iterator;function Up(t){return t===null||typeof t!="object"?null:(t=zk&&t[zk]||t["@@iterator"],typeof t=="function"?t:null)}var Qn=Object.assign,sS;function Sg(t){if(sS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sS=e&&e[1]||""}return`
`+sS+t}var oS=!1;function aS(t,e){if(!t||oS)return"";oS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{oS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sg(t):""}function iY(t){switch(t.tag){case 5:return Sg(t.type);case 16:return Sg("Lazy");case 13:return Sg("Suspense");case 19:return Sg("SuspenseList");case 0:case 2:case 15:return t=aS(t.type,!1),t;case 11:return t=aS(t.type.render,!1),t;case 1:return t=aS(t.type,!0),t;default:return""}}function NP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zd:return"Fragment";case Fd:return"Portal";case LP:return"Profiler";case u2:return"StrictMode";case kP:return"Suspense";case DP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JU:return(t.displayName||"Context")+".Consumer";case QU:return(t._context.displayName||"Context")+".Provider";case h2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d2:return e=t.displayName||null,e!==null?e:NP(t.type)||"Memo";case bc:e=t._payload,t=t._init;try{return NP(t(e))}catch{}}return null}function sY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return NP(e);case 8:return e===u2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function t5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oY(t){var e=t5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ov(t){t._valueTracker||(t._valueTracker=oY(t))}function n5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=t5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _b(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function BP(t,e){var n=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Uk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function r5(t,e){e=e.checked,e!=null&&c2(t,"checked",e,!1)}function FP(t,e){r5(t,e);var n=Zc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zP(t,e.type,n):e.hasOwnProperty("defaultValue")&&zP(t,e.type,Zc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $k(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zP(t,e,n){(e!=="number"||_b(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tg=Array.isArray;function of(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function UP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Tg(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zc(n)}}function i5(t,e){var n=Zc(e.value),r=Zc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $P(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var av,o5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(av=av||document.createElement("div"),av.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=av.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aY=["Webkit","ms","Moz","O"];Object.keys(Yg).forEach(function(t){aY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yg[e]=Yg[t]})});function a5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yg.hasOwnProperty(t)&&Yg[t]?(""+e).trim():e+"px"}function l5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=a5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lY=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jP(t,e){if(e){if(lY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function VP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GP=null;function f2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var HP=null,af=null,lf=null;function Gk(t){if(t=A0(t)){if(typeof HP!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=_x(e),HP(t.stateNode,t.type,e))}}function c5(t){af?lf?lf.push(t):lf=[t]:af=t}function u5(){if(af){var t=af,e=lf;if(lf=af=null,Gk(t),e)for(t=0;t<e.length;t++)Gk(e[t])}}function h5(t,e){return t(e)}function d5(){}var lS=!1;function f5(t,e,n){if(lS)return t(e,n);lS=!0;try{return h5(t,e,n)}finally{lS=!1,(af!==null||lf!==null)&&(d5(),u5())}}function Am(t,e){var n=t.stateNode;if(n===null)return null;var r=_x(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var WP=!1;if(Ml)try{var $p={};Object.defineProperty($p,"passive",{get:function(){WP=!0}}),window.addEventListener("test",$p,$p),window.removeEventListener("test",$p,$p)}catch{WP=!1}function cY(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var qg=!1,xb=null,wb=!1,XP=null,uY={onError:function(t){qg=!0,xb=t}};function hY(t,e,n,r,i,s,o,a,l){qg=!1,xb=null,cY.apply(uY,arguments)}function dY(t,e,n,r,i,s,o,a,l){if(hY.apply(this,arguments),qg){if(qg){var c=xb;qg=!1,xb=null}else throw Error(Ae(198));wb||(wb=!0,XP=c)}}function Mh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function p5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hk(t){if(Mh(t)!==t)throw Error(Ae(188))}function fY(t){var e=t.alternate;if(!e){if(e=Mh(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Hk(i),t;if(s===r)return Hk(i),e;s=s.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function g5(t){return t=fY(t),t!==null?m5(t):null}function m5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m5(t);if(e!==null)return e;t=t.sibling}return null}var y5=Bs.unstable_scheduleCallback,Wk=Bs.unstable_cancelCallback,pY=Bs.unstable_shouldYield,gY=Bs.unstable_requestPaint,mr=Bs.unstable_now,mY=Bs.unstable_getCurrentPriorityLevel,p2=Bs.unstable_ImmediatePriority,v5=Bs.unstable_UserBlockingPriority,Eb=Bs.unstable_NormalPriority,yY=Bs.unstable_LowPriority,b5=Bs.unstable_IdlePriority,mx=null,Wa=null;function vY(t){if(Wa&&typeof Wa.onCommitFiberRoot=="function")try{Wa.onCommitFiberRoot(mx,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:xY,bY=Math.log,_Y=Math.LN2;function xY(t){return t>>>=0,t===0?32:31-(bY(t)/_Y|0)|0}var lv=64,cv=4194304;function Pg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pg(a):(s&=o,s!==0&&(r=Pg(s)))}else o=n&~i,o!==0?r=Pg(o):s!==0&&(r=Pg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ra(e),i=1<<n,r|=t[n],e&=~i;return r}function wY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EY(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ra(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=wY(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function YP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _5(){var t=lv;return lv<<=1,!(lv&4194240)&&(lv=64),t}function cS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function P0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=n}function SY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ra(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function g2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ra(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yn=0;function x5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var w5,m2,E5,S5,T5,qP=!1,uv=[],Dc=null,Nc=null,Bc=null,Rm=new Map,Im=new Map,Sc=[],TY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xk(t,e){switch(t){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":Nc=null;break;case"mouseover":case"mouseout":Bc=null;break;case"pointerover":case"pointerout":Rm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Im.delete(e.pointerId)}}function jp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=A0(e),e!==null&&m2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PY(t,e,n,r,i){switch(e){case"focusin":return Dc=jp(Dc,t,e,n,r,i),!0;case"dragenter":return Nc=jp(Nc,t,e,n,r,i),!0;case"mouseover":return Bc=jp(Bc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rm.set(s,jp(Rm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Im.set(s,jp(Im.get(s)||null,t,e,n,r,i)),!0}return!1}function P5(t){var e=Hu(t.target);if(e!==null){var n=Mh(e);if(n!==null){if(e=n.tag,e===13){if(e=p5(n),e!==null){t.blockedOn=e,T5(t.priority,function(){E5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function B1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=KP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);GP=r,n.target.dispatchEvent(r),GP=null}else return e=A0(n),e!==null&&m2(e),t.blockedOn=n,!1;e.shift()}return!0}function Yk(t,e,n){B1(t)&&n.delete(e)}function CY(){qP=!1,Dc!==null&&B1(Dc)&&(Dc=null),Nc!==null&&B1(Nc)&&(Nc=null),Bc!==null&&B1(Bc)&&(Bc=null),Rm.forEach(Yk),Im.forEach(Yk)}function Vp(t,e){t.blockedOn===e&&(t.blockedOn=null,qP||(qP=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,CY)))}function Mm(t){function e(i){return Vp(i,t)}if(0<uv.length){Vp(uv[0],t);for(var n=1;n<uv.length;n++){var r=uv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dc!==null&&Vp(Dc,t),Nc!==null&&Vp(Nc,t),Bc!==null&&Vp(Bc,t),Rm.forEach(e),Im.forEach(e),n=0;n<Sc.length;n++)r=Sc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sc.length&&(n=Sc[0],n.blockedOn===null);)P5(n),n.blockedOn===null&&Sc.shift()}var cf=Vl.ReactCurrentBatchConfig,Tb=!0;function AY(t,e,n,r){var i=yn,s=cf.transition;cf.transition=null;try{yn=1,y2(t,e,n,r)}finally{yn=i,cf.transition=s}}function RY(t,e,n,r){var i=yn,s=cf.transition;cf.transition=null;try{yn=4,y2(t,e,n,r)}finally{yn=i,cf.transition=s}}function y2(t,e,n,r){if(Tb){var i=KP(t,e,n,r);if(i===null)bS(t,e,r,Pb,n),Xk(t,r);else if(PY(i,t,e,n,r))r.stopPropagation();else if(Xk(t,r),e&4&&-1<TY.indexOf(t)){for(;i!==null;){var s=A0(i);if(s!==null&&w5(s),s=KP(t,e,n,r),s===null&&bS(t,e,r,Pb,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bS(t,e,r,null,n)}}var Pb=null;function KP(t,e,n,r){if(Pb=null,t=f2(r),t=Hu(t),t!==null)if(e=Mh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=p5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pb=t,null}function C5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mY()){case p2:return 1;case v5:return 4;case Eb:case yY:return 16;case b5:return 536870912;default:return 16}default:return 16}}var Ac=null,v2=null,F1=null;function A5(){if(F1)return F1;var t,e=v2,n=e.length,r,i="value"in Ac?Ac.value:Ac.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return F1=i.slice(t,1<r?1-r:void 0)}function z1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hv(){return!0}function qk(){return!1}function Hs(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hv:qk,this.isPropagationStopped=qk,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hv)},persist:function(){},isPersistent:hv}),e}var cp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b2=Hs(cp),C0=Qn({},cp,{view:0,detail:0}),IY=Hs(C0),uS,hS,Gp,yx=Qn({},C0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gp&&(Gp&&t.type==="mousemove"?(uS=t.screenX-Gp.screenX,hS=t.screenY-Gp.screenY):hS=uS=0,Gp=t),uS)},movementY:function(t){return"movementY"in t?t.movementY:hS}}),Kk=Hs(yx),MY=Qn({},yx,{dataTransfer:0}),OY=Hs(MY),LY=Qn({},C0,{relatedTarget:0}),dS=Hs(LY),kY=Qn({},cp,{animationName:0,elapsedTime:0,pseudoElement:0}),DY=Hs(kY),NY=Qn({},cp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BY=Hs(NY),FY=Qn({},cp,{data:0}),Zk=Hs(FY),zY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jY(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$Y[t])?!!e[t]:!1}function _2(){return jY}var VY=Qn({},C0,{key:function(t){if(t.key){var e=zY[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=z1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UY[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_2,charCode:function(t){return t.type==="keypress"?z1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?z1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GY=Hs(VY),HY=Qn({},yx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qk=Hs(HY),WY=Qn({},C0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_2}),XY=Hs(WY),YY=Qn({},cp,{propertyName:0,elapsedTime:0,pseudoElement:0}),qY=Hs(YY),KY=Qn({},yx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZY=Hs(KY),QY=[9,13,27,32],x2=Ml&&"CompositionEvent"in window,Kg=null;Ml&&"documentMode"in document&&(Kg=document.documentMode);var JY=Ml&&"TextEvent"in window&&!Kg,R5=Ml&&(!x2||Kg&&8<Kg&&11>=Kg),Jk=String.fromCharCode(32),e3=!1;function I5(t,e){switch(t){case"keyup":return QY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ud=!1;function eq(t,e){switch(t){case"compositionend":return M5(e);case"keypress":return e.which!==32?null:(e3=!0,Jk);case"textInput":return t=e.data,t===Jk&&e3?null:t;default:return null}}function tq(t,e){if(Ud)return t==="compositionend"||!x2&&I5(t,e)?(t=A5(),F1=v2=Ac=null,Ud=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R5&&e.locale!=="ko"?null:e.data;default:return null}}var nq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nq[t.type]:e==="textarea"}function O5(t,e,n,r){c5(r),e=Cb(e,"onChange"),0<e.length&&(n=new b2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zg=null,Om=null;function rq(t){V5(t,0)}function vx(t){var e=Vd(t);if(n5(e))return t}function iq(t,e){if(t==="change")return e}var L5=!1;if(Ml){var fS;if(Ml){var pS="oninput"in document;if(!pS){var n3=document.createElement("div");n3.setAttribute("oninput","return;"),pS=typeof n3.oninput=="function"}fS=pS}else fS=!1;L5=fS&&(!document.documentMode||9<document.documentMode)}function r3(){Zg&&(Zg.detachEvent("onpropertychange",k5),Om=Zg=null)}function k5(t){if(t.propertyName==="value"&&vx(Om)){var e=[];O5(e,Om,t,f2(t)),f5(rq,e)}}function sq(t,e,n){t==="focusin"?(r3(),Zg=e,Om=n,Zg.attachEvent("onpropertychange",k5)):t==="focusout"&&r3()}function oq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vx(Om)}function aq(t,e){if(t==="click")return vx(e)}function lq(t,e){if(t==="input"||t==="change")return vx(e)}function cq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var la=typeof Object.is=="function"?Object.is:cq;function Lm(t,e){if(la(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!OP.call(e,i)||!la(t[i],e[i]))return!1}return!0}function i3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s3(t,e){var n=i3(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i3(n)}}function D5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N5(){for(var t=window,e=_b();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_b(t.document)}return e}function w2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uq(t){var e=N5(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D5(n.ownerDocument.documentElement,n)){if(r!==null&&w2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=s3(n,s);var o=s3(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hq=Ml&&"documentMode"in document&&11>=document.documentMode,$d=null,ZP=null,Qg=null,QP=!1;function o3(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;QP||$d==null||$d!==_b(r)||(r=$d,"selectionStart"in r&&w2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qg&&Lm(Qg,r)||(Qg=r,r=Cb(ZP,"onSelect"),0<r.length&&(e=new b2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$d)))}function dv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jd={animationend:dv("Animation","AnimationEnd"),animationiteration:dv("Animation","AnimationIteration"),animationstart:dv("Animation","AnimationStart"),transitionend:dv("Transition","TransitionEnd")},gS={},B5={};Ml&&(B5=document.createElement("div").style,"AnimationEvent"in window||(delete jd.animationend.animation,delete jd.animationiteration.animation,delete jd.animationstart.animation),"TransitionEvent"in window||delete jd.transitionend.transition);function bx(t){if(gS[t])return gS[t];if(!jd[t])return t;var e=jd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B5)return gS[t]=e[n];return t}var F5=bx("animationend"),z5=bx("animationiteration"),U5=bx("animationstart"),$5=bx("transitionend"),j5=new Map,a3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ou(t,e){j5.set(t,e),Ih(e,[t])}for(var mS=0;mS<a3.length;mS++){var yS=a3[mS],dq=yS.toLowerCase(),fq=yS[0].toUpperCase()+yS.slice(1);ou(dq,"on"+fq)}ou(F5,"onAnimationEnd");ou(z5,"onAnimationIteration");ou(U5,"onAnimationStart");ou("dblclick","onDoubleClick");ou("focusin","onFocus");ou("focusout","onBlur");ou($5,"onTransitionEnd");wf("onMouseEnter",["mouseout","mouseover"]);wf("onMouseLeave",["mouseout","mouseover"]);wf("onPointerEnter",["pointerout","pointerover"]);wf("onPointerLeave",["pointerout","pointerover"]);Ih("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ih("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ih("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ih("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ih("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ih("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cg));function l3(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dY(r,e,void 0,t),t.currentTarget=null}function V5(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;l3(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;l3(i,a,c),s=l}}}if(wb)throw t=XP,wb=!1,XP=null,t}function On(t,e){var n=e[rC];n===void 0&&(n=e[rC]=new Set);var r=t+"__bubble";n.has(r)||(G5(e,t,2,!1),n.add(r))}function vS(t,e,n){var r=0;e&&(r|=4),G5(n,t,r,e)}var fv="_reactListening"+Math.random().toString(36).slice(2);function km(t){if(!t[fv]){t[fv]=!0,ZU.forEach(function(n){n!=="selectionchange"&&(pq.has(n)||vS(n,!1,t),vS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fv]||(e[fv]=!0,vS("selectionchange",!1,e))}}function G5(t,e,n,r){switch(C5(e)){case 1:var i=AY;break;case 4:i=RY;break;default:i=y2}n=i.bind(null,e,n,t),i=void 0,!WP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}f5(function(){var c=s,u=f2(n),h=[];e:{var f=j5.get(t);if(f!==void 0){var g=b2,m=t;switch(t){case"keypress":if(z1(n)===0)break e;case"keydown":case"keyup":g=GY;break;case"focusin":m="focus",g=dS;break;case"focusout":m="blur",g=dS;break;case"beforeblur":case"afterblur":g=dS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=XY;break;case F5:case z5:case U5:g=DY;break;case $5:g=qY;break;case"scroll":g=IY;break;case"wheel":g=ZY;break;case"copy":case"cut":case"paste":g=BY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Qk}var y=(e&4)!==0,x=!y&&t==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,v;w!==null;){v=w;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,b!==null&&(E=Am(w,b),E!=null&&y.push(Dm(w,E,v)))),x)break;w=w.return}0<y.length&&(f=new g(f,m,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==GP&&(m=n.relatedTarget||n.fromElement)&&(Hu(m)||m[Ol]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?Hu(m):null,m!==null&&(x=Mh(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(y=Kk,E="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Qk,E="onPointerLeave",b="onPointerEnter",w="pointer"),x=g==null?f:Vd(g),v=m==null?f:Vd(m),f=new y(E,w+"leave",g,n,u),f.target=x,f.relatedTarget=v,E=null,Hu(u)===c&&(y=new y(b,w+"enter",m,n,u),y.target=v,y.relatedTarget=x,E=y),x=E,g&&m)t:{for(y=g,b=m,w=0,v=y;v;v=nd(v))w++;for(v=0,E=b;E;E=nd(E))v++;for(;0<w-v;)y=nd(y),w--;for(;0<v-w;)b=nd(b),v--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=nd(y),b=nd(b)}y=null}else y=null;g!==null&&c3(h,f,g,y,!1),m!==null&&x!==null&&c3(h,x,m,y,!0)}}e:{if(f=c?Vd(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var T=iq;else if(t3(f))if(L5)T=lq;else{T=oq;var P=sq}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=aq);if(T&&(T=T(t,c))){O5(h,T,n,u);break e}P&&P(t,f,c),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&zP(f,"number",f.value)}switch(P=c?Vd(c):window,t){case"focusin":(t3(P)||P.contentEditable==="true")&&($d=P,ZP=c,Qg=null);break;case"focusout":Qg=ZP=$d=null;break;case"mousedown":QP=!0;break;case"contextmenu":case"mouseup":case"dragend":QP=!1,o3(h,n,u);break;case"selectionchange":if(hq)break;case"keydown":case"keyup":o3(h,n,u)}var R;if(x2)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ud?I5(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(R5&&n.locale!=="ko"&&(Ud||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ud&&(R=A5()):(Ac=u,v2="value"in Ac?Ac.value:Ac.textContent,Ud=!0)),P=Cb(c,M),0<P.length&&(M=new Zk(M,t,null,n,u),h.push({event:M,listeners:P}),R?M.data=R:(R=M5(n),R!==null&&(M.data=R)))),(R=JY?eq(t,n):tq(t,n))&&(c=Cb(c,"onBeforeInput"),0<c.length&&(u=new Zk("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=R))}V5(h,e)})}function Dm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cb(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Am(t,n),s!=null&&r.unshift(Dm(t,s,i)),s=Am(t,e),s!=null&&r.push(Dm(t,s,i))),t=t.return}return r}function nd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c3(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Am(n,s),l!=null&&o.unshift(Dm(n,l,a))):i||(l=Am(n,s),l!=null&&o.push(Dm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gq=/\r\n?/g,mq=/\u0000|\uFFFD/g;function u3(t){return(typeof t=="string"?t:""+t).replace(gq,`
`).replace(mq,"")}function pv(t,e,n){if(e=u3(e),u3(t)!==e&&n)throw Error(Ae(425))}function Ab(){}var JP=null,eC=null;function tC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nC=typeof setTimeout=="function"?setTimeout:void 0,yq=typeof clearTimeout=="function"?clearTimeout:void 0,h3=typeof Promise=="function"?Promise:void 0,vq=typeof queueMicrotask=="function"?queueMicrotask:typeof h3<"u"?function(t){return h3.resolve(null).then(t).catch(bq)}:nC;function bq(t){setTimeout(function(){throw t})}function _S(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Mm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mm(e)}function Fc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var up=Math.random().toString(36).slice(2),Ua="__reactFiber$"+up,Nm="__reactProps$"+up,Ol="__reactContainer$"+up,rC="__reactEvents$"+up,_q="__reactListeners$"+up,xq="__reactHandles$"+up;function Hu(t){var e=t[Ua];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ol]||n[Ua]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d3(t);t!==null;){if(n=t[Ua])return n;t=d3(t)}return e}t=n,n=t.parentNode}return null}function A0(t){return t=t[Ua]||t[Ol],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function _x(t){return t[Nm]||null}var iC=[],Gd=-1;function au(t){return{current:t}}function Dn(t){0>Gd||(t.current=iC[Gd],iC[Gd]=null,Gd--)}function Cn(t,e){Gd++,iC[Gd]=t.current,t.current=e}var Qc={},Ai=au(Qc),ts=au(!1),gh=Qc;function Ef(t,e){var n=t.type.contextTypes;if(!n)return Qc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ns(t){return t=t.childContextTypes,t!=null}function Rb(){Dn(ts),Dn(Ai)}function f3(t,e,n){if(Ai.current!==Qc)throw Error(Ae(168));Cn(Ai,e),Cn(ts,n)}function H5(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,sY(t)||"Unknown",i));return Qn({},n,r)}function Ib(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qc,gh=Ai.current,Cn(Ai,t),Cn(ts,ts.current),!0}function p3(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=H5(t,e,gh),r.__reactInternalMemoizedMergedChildContext=t,Dn(ts),Dn(Ai),Cn(Ai,t)):Dn(ts),Cn(ts,n)}var bl=null,xx=!1,xS=!1;function W5(t){bl===null?bl=[t]:bl.push(t)}function wq(t){xx=!0,W5(t)}function lu(){if(!xS&&bl!==null){xS=!0;var t=0,e=yn;try{var n=bl;for(yn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bl=null,xx=!1}catch(i){throw bl!==null&&(bl=bl.slice(t+1)),y5(p2,lu),i}finally{yn=e,xS=!1}}return null}var Hd=[],Wd=0,Mb=null,Ob=0,uo=[],ho=0,mh=null,Tl=1,Pl="";function ku(t,e){Hd[Wd++]=Ob,Hd[Wd++]=Mb,Mb=t,Ob=e}function X5(t,e,n){uo[ho++]=Tl,uo[ho++]=Pl,uo[ho++]=mh,mh=t;var r=Tl;t=Pl;var i=32-ra(r)-1;r&=~(1<<i),n+=1;var s=32-ra(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tl=1<<32-ra(e)+i|n<<i|r,Pl=s+t}else Tl=1<<s|n<<i|r,Pl=t}function E2(t){t.return!==null&&(ku(t,1),X5(t,1,0))}function S2(t){for(;t===Mb;)Mb=Hd[--Wd],Hd[Wd]=null,Ob=Hd[--Wd],Hd[Wd]=null;for(;t===mh;)mh=uo[--ho],uo[ho]=null,Pl=uo[--ho],uo[ho]=null,Tl=uo[--ho],uo[ho]=null}var Os=null,As=null,Gn=!1,Wo=null;function Y5(t,e){var n=go(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Os=t,As=Fc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Os=t,As=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mh!==null?{id:Tl,overflow:Pl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=go(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Os=t,As=null,!0):!1;default:return!1}}function sC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oC(t){if(Gn){var e=As;if(e){var n=e;if(!g3(t,e)){if(sC(t))throw Error(Ae(418));e=Fc(n.nextSibling);var r=Os;e&&g3(t,e)?Y5(r,n):(t.flags=t.flags&-4097|2,Gn=!1,Os=t)}}else{if(sC(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Gn=!1,Os=t}}}function m3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Os=t}function gv(t){if(t!==Os)return!1;if(!Gn)return m3(t),Gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tC(t.type,t.memoizedProps)),e&&(e=As)){if(sC(t))throw q5(),Error(Ae(418));for(;e;)Y5(t,e),e=Fc(e.nextSibling)}if(m3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){As=Fc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}As=null}}else As=Os?Fc(t.stateNode.nextSibling):null;return!0}function q5(){for(var t=As;t;)t=Fc(t.nextSibling)}function Sf(){As=Os=null,Gn=!1}function T2(t){Wo===null?Wo=[t]:Wo.push(t)}var Eq=Vl.ReactCurrentBatchConfig;function Vo(t,e){if(t&&t.defaultProps){e=Qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Lb=au(null),kb=null,Xd=null,P2=null;function C2(){P2=Xd=kb=null}function A2(t){var e=Lb.current;Dn(Lb),t._currentValue=e}function aC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uf(t,e){kb=t,P2=Xd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qi=!0),t.firstContext=null)}function wo(t){var e=t._currentValue;if(P2!==t)if(t={context:t,memoizedValue:e,next:null},Xd===null){if(kb===null)throw Error(Ae(308));Xd=t,kb.dependencies={lanes:0,firstContext:t}}else Xd=Xd.next=t;return e}var Wu=null;function R2(t){Wu===null?Wu=[t]:Wu.push(t)}function K5(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,R2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ll(t,r)}function Ll(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _c=!1;function I2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Al(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ll(t,n)}return i=r.interleaved,i===null?(e.next=e,R2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ll(t,n)}function U1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g2(t,n)}}function y3(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Db(t,e,n,r){var i=t.updateQueue;_c=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,g=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(g,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,h,f):m,f==null)break e;h=Qn({},h,f);break e;case 2:_c=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=h):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vh|=o,t.lanes=o,t.memoizedState=h}}function v3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var Q5=new KU.Component().refs;function lC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wx={isMounted:function(t){return(t=t._reactInternals)?Mh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$i(),i=$c(t),s=Al(r,i);s.payload=e,n!=null&&(s.callback=n),e=zc(t,s,i),e!==null&&(ia(e,t,i,r),U1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$i(),i=$c(t),s=Al(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zc(t,s,i),e!==null&&(ia(e,t,i,r),U1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$i(),r=$c(t),i=Al(n,r);i.tag=2,e!=null&&(i.callback=e),e=zc(t,i,r),e!==null&&(ia(e,t,r,n),U1(e,t,r))}};function b3(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Lm(n,r)||!Lm(i,s):!0}function J5(t,e,n){var r=!1,i=Qc,s=e.contextType;return typeof s=="object"&&s!==null?s=wo(s):(i=ns(e)?gh:Ai.current,r=e.contextTypes,s=(r=r!=null)?Ef(t,i):Qc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _3(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wx.enqueueReplaceState(e,e.state,null)}function cC(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Q5,I2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wo(s):(s=ns(e)?gh:Ai.current,i.context=Ef(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lC(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wx.enqueueReplaceState(i,i.state,null),Db(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Q5&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function mv(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x3(t){var e=t._init;return e(t._payload)}function e6(t){function e(b,w){if(t){var v=b.deletions;v===null?(b.deletions=[w],b.flags|=16):v.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=jc(b,w),b.index=0,b.sibling=null,b}function s(b,w,v){return b.index=v,t?(v=b.alternate,v!==null?(v=v.index,v<w?(b.flags|=2,w):v):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,w,v,E){return w===null||w.tag!==6?(w=AS(v,b.mode,E),w.return=b,w):(w=i(w,v),w.return=b,w)}function l(b,w,v,E){var T=v.type;return T===zd?u(b,w,v.props.children,E,v.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bc&&x3(T)===w.type)?(E=i(w,v.props),E.ref=Hp(b,w,v),E.return=b,E):(E=W1(v.type,v.key,v.props,null,b.mode,E),E.ref=Hp(b,w,v),E.return=b,E)}function c(b,w,v,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=RS(v,b.mode,E),w.return=b,w):(w=i(w,v.children||[]),w.return=b,w)}function u(b,w,v,E,T){return w===null||w.tag!==7?(w=nh(v,b.mode,E,T),w.return=b,w):(w=i(w,v),w.return=b,w)}function h(b,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=AS(""+w,b.mode,v),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sv:return v=W1(w.type,w.key,w.props,null,b.mode,v),v.ref=Hp(b,null,w),v.return=b,v;case Fd:return w=RS(w,b.mode,v),w.return=b,w;case bc:var E=w._init;return h(b,E(w._payload),v)}if(Tg(w)||Up(w))return w=nh(w,b.mode,v,null),w.return=b,w;mv(b,w)}return null}function f(b,w,v,E){var T=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(b,w,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sv:return v.key===T?l(b,w,v,E):null;case Fd:return v.key===T?c(b,w,v,E):null;case bc:return T=v._init,f(b,w,T(v._payload),E)}if(Tg(v)||Up(v))return T!==null?null:u(b,w,v,E,null);mv(b,v)}return null}function g(b,w,v,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return b=b.get(v)||null,a(w,b,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sv:return b=b.get(E.key===null?v:E.key)||null,l(w,b,E,T);case Fd:return b=b.get(E.key===null?v:E.key)||null,c(w,b,E,T);case bc:var P=E._init;return g(b,w,v,P(E._payload),T)}if(Tg(E)||Up(E))return b=b.get(v)||null,u(w,b,E,T,null);mv(w,E)}return null}function m(b,w,v,E){for(var T=null,P=null,R=w,M=w=0,k=null;R!==null&&M<v.length;M++){R.index>M?(k=R,R=null):k=R.sibling;var O=f(b,R,v[M],E);if(O===null){R===null&&(R=k);break}t&&R&&O.alternate===null&&e(b,R),w=s(O,w,M),P===null?T=O:P.sibling=O,P=O,R=k}if(M===v.length)return n(b,R),Gn&&ku(b,M),T;if(R===null){for(;M<v.length;M++)R=h(b,v[M],E),R!==null&&(w=s(R,w,M),P===null?T=R:P.sibling=R,P=R);return Gn&&ku(b,M),T}for(R=r(b,R);M<v.length;M++)k=g(R,b,M,v[M],E),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?M:k.key),w=s(k,w,M),P===null?T=k:P.sibling=k,P=k);return t&&R.forEach(function(F){return e(b,F)}),Gn&&ku(b,M),T}function y(b,w,v,E){var T=Up(v);if(typeof T!="function")throw Error(Ae(150));if(v=T.call(v),v==null)throw Error(Ae(151));for(var P=T=null,R=w,M=w=0,k=null,O=v.next();R!==null&&!O.done;M++,O=v.next()){R.index>M?(k=R,R=null):k=R.sibling;var F=f(b,R,O.value,E);if(F===null){R===null&&(R=k);break}t&&R&&F.alternate===null&&e(b,R),w=s(F,w,M),P===null?T=F:P.sibling=F,P=F,R=k}if(O.done)return n(b,R),Gn&&ku(b,M),T;if(R===null){for(;!O.done;M++,O=v.next())O=h(b,O.value,E),O!==null&&(w=s(O,w,M),P===null?T=O:P.sibling=O,P=O);return Gn&&ku(b,M),T}for(R=r(b,R);!O.done;M++,O=v.next())O=g(R,b,M,O.value,E),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?M:O.key),w=s(O,w,M),P===null?T=O:P.sibling=O,P=O);return t&&R.forEach(function(I){return e(b,I)}),Gn&&ku(b,M),T}function x(b,w,v,E){if(typeof v=="object"&&v!==null&&v.type===zd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case sv:e:{for(var T=v.key,P=w;P!==null;){if(P.key===T){if(T=v.type,T===zd){if(P.tag===7){n(b,P.sibling),w=i(P,v.props.children),w.return=b,b=w;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bc&&x3(T)===P.type){n(b,P.sibling),w=i(P,v.props),w.ref=Hp(b,P,v),w.return=b,b=w;break e}n(b,P);break}else e(b,P);P=P.sibling}v.type===zd?(w=nh(v.props.children,b.mode,E,v.key),w.return=b,b=w):(E=W1(v.type,v.key,v.props,null,b.mode,E),E.ref=Hp(b,w,v),E.return=b,b=E)}return o(b);case Fd:e:{for(P=v.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(b,w.sibling),w=i(w,v.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=RS(v,b.mode,E),w.return=b,b=w}return o(b);case bc:return P=v._init,x(b,w,P(v._payload),E)}if(Tg(v))return m(b,w,v,E);if(Up(v))return y(b,w,v,E);mv(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,v),w.return=b,b=w):(n(b,w),w=AS(v,b.mode,E),w.return=b,b=w),o(b)):n(b,w)}return x}var Tf=e6(!0),t6=e6(!1),R0={},Xa=au(R0),Bm=au(R0),Fm=au(R0);function Xu(t){if(t===R0)throw Error(Ae(174));return t}function M2(t,e){switch(Cn(Fm,e),Cn(Bm,t),Cn(Xa,R0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$P(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$P(e,t)}Dn(Xa),Cn(Xa,e)}function Pf(){Dn(Xa),Dn(Bm),Dn(Fm)}function n6(t){Xu(Fm.current);var e=Xu(Xa.current),n=$P(e,t.type);e!==n&&(Cn(Bm,t),Cn(Xa,n))}function O2(t){Bm.current===t&&(Dn(Xa),Dn(Bm))}var qn=au(0);function Nb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wS=[];function L2(){for(var t=0;t<wS.length;t++)wS[t]._workInProgressVersionPrimary=null;wS.length=0}var $1=Vl.ReactCurrentDispatcher,ES=Vl.ReactCurrentBatchConfig,yh=0,Zn=null,Or=null,Gr=null,Bb=!1,Jg=!1,zm=0,Sq=0;function gi(){throw Error(Ae(321))}function k2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!la(t[n],e[n]))return!1;return!0}function D2(t,e,n,r,i,s){if(yh=s,Zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$1.current=t===null||t.memoizedState===null?Aq:Rq,t=n(r,i),Jg){s=0;do{if(Jg=!1,zm=0,25<=s)throw Error(Ae(301));s+=1,Gr=Or=null,e.updateQueue=null,$1.current=Iq,t=n(r,i)}while(Jg)}if($1.current=Fb,e=Or!==null&&Or.next!==null,yh=0,Gr=Or=Zn=null,Bb=!1,e)throw Error(Ae(300));return t}function N2(){var t=zm!==0;return zm=0,t}function Da(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Zn.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function Eo(){if(Or===null){var t=Zn.alternate;t=t!==null?t.memoizedState:null}else t=Or.next;var e=Gr===null?Zn.memoizedState:Gr.next;if(e!==null)Gr=e,Or=t;else{if(t===null)throw Error(Ae(310));Or=t,t={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Gr===null?Zn.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function Um(t,e){return typeof e=="function"?e(t):e}function SS(t){var e=Eo(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Or,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((yh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zn.lanes|=u,vh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,la(r,e.memoizedState)||(Qi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zn.lanes|=s,vh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function TS(t){var e=Eo(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);la(s,e.memoizedState)||(Qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function r6(){}function i6(t,e){var n=Zn,r=Eo(),i=e(),s=!la(r.memoizedState,i);if(s&&(r.memoizedState=i,Qi=!0),r=r.queue,B2(a6.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Gr!==null&&Gr.memoizedState.tag&1){if(n.flags|=2048,$m(9,o6.bind(null,n,r,i,e),void 0,null),Yr===null)throw Error(Ae(349));yh&30||s6(n,e,i)}return i}function s6(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o6(t,e,n,r){e.value=n,e.getSnapshot=r,l6(e)&&c6(t)}function a6(t,e,n){return n(function(){l6(e)&&c6(t)})}function l6(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!la(t,n)}catch{return!0}}function c6(t){var e=Ll(t,1);e!==null&&ia(e,t,1,-1)}function w3(t){var e=Da();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Um,lastRenderedState:t},e.queue=t,t=t.dispatch=Cq.bind(null,Zn,t),[e.memoizedState,t]}function $m(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u6(){return Eo().memoizedState}function j1(t,e,n,r){var i=Da();Zn.flags|=t,i.memoizedState=$m(1|e,n,void 0,r===void 0?null:r)}function Ex(t,e,n,r){var i=Eo();r=r===void 0?null:r;var s=void 0;if(Or!==null){var o=Or.memoizedState;if(s=o.destroy,r!==null&&k2(r,o.deps)){i.memoizedState=$m(e,n,s,r);return}}Zn.flags|=t,i.memoizedState=$m(1|e,n,s,r)}function E3(t,e){return j1(8390656,8,t,e)}function B2(t,e){return Ex(2048,8,t,e)}function h6(t,e){return Ex(4,2,t,e)}function d6(t,e){return Ex(4,4,t,e)}function f6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p6(t,e,n){return n=n!=null?n.concat([t]):null,Ex(4,4,f6.bind(null,e,t),n)}function F2(){}function g6(t,e){var n=Eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function m6(t,e){var n=Eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y6(t,e,n){return yh&21?(la(n,e)||(n=_5(),Zn.lanes|=n,vh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qi=!0),t.memoizedState=n)}function Tq(t,e){var n=yn;yn=n!==0&&4>n?n:4,t(!0);var r=ES.transition;ES.transition={};try{t(!1),e()}finally{yn=n,ES.transition=r}}function v6(){return Eo().memoizedState}function Pq(t,e,n){var r=$c(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b6(t))_6(e,n);else if(n=K5(t,e,n,r),n!==null){var i=$i();ia(n,t,r,i),x6(n,e,r)}}function Cq(t,e,n){var r=$c(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b6(t))_6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,la(a,o)){var l=e.interleaved;l===null?(i.next=i,R2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=K5(t,e,i,r),n!==null&&(i=$i(),ia(n,t,r,i),x6(n,e,r))}}function b6(t){var e=t.alternate;return t===Zn||e!==null&&e===Zn}function _6(t,e){Jg=Bb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function x6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g2(t,n)}}var Fb={readContext:wo,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},Aq={readContext:wo,useCallback:function(t,e){return Da().memoizedState=[t,e===void 0?null:e],t},useContext:wo,useEffect:E3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,j1(4194308,4,f6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return j1(4194308,4,t,e)},useInsertionEffect:function(t,e){return j1(4,2,t,e)},useMemo:function(t,e){var n=Da();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Da();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Pq.bind(null,Zn,t),[r.memoizedState,t]},useRef:function(t){var e=Da();return t={current:t},e.memoizedState=t},useState:w3,useDebugValue:F2,useDeferredValue:function(t){return Da().memoizedState=t},useTransition:function(){var t=w3(!1),e=t[0];return t=Tq.bind(null,t[1]),Da().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zn,i=Da();if(Gn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Yr===null)throw Error(Ae(349));yh&30||s6(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,E3(a6.bind(null,r,s,t),[t]),r.flags|=2048,$m(9,o6.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Da(),e=Yr.identifierPrefix;if(Gn){var n=Pl,r=Tl;n=(r&~(1<<32-ra(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rq={readContext:wo,useCallback:g6,useContext:wo,useEffect:B2,useImperativeHandle:p6,useInsertionEffect:h6,useLayoutEffect:d6,useMemo:m6,useReducer:SS,useRef:u6,useState:function(){return SS(Um)},useDebugValue:F2,useDeferredValue:function(t){var e=Eo();return y6(e,Or.memoizedState,t)},useTransition:function(){var t=SS(Um)[0],e=Eo().memoizedState;return[t,e]},useMutableSource:r6,useSyncExternalStore:i6,useId:v6,unstable_isNewReconciler:!1},Iq={readContext:wo,useCallback:g6,useContext:wo,useEffect:B2,useImperativeHandle:p6,useInsertionEffect:h6,useLayoutEffect:d6,useMemo:m6,useReducer:TS,useRef:u6,useState:function(){return TS(Um)},useDebugValue:F2,useDeferredValue:function(t){var e=Eo();return Or===null?e.memoizedState=t:y6(e,Or.memoizedState,t)},useTransition:function(){var t=TS(Um)[0],e=Eo().memoizedState;return[t,e]},useMutableSource:r6,useSyncExternalStore:i6,useId:v6,unstable_isNewReconciler:!1};function Cf(t,e){try{var n="",r=e;do n+=iY(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function PS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mq=typeof WeakMap=="function"?WeakMap:Map;function w6(t,e,n){n=Al(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ub||(Ub=!0,_C=r),uC(t,e)},n}function E6(t,e,n){n=Al(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uC(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uC(t,e),typeof r!="function"&&(Uc===null?Uc=new Set([this]):Uc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S3(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Hq.bind(null,t,e,n),e.then(t,t))}function T3(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P3(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Al(-1,1),e.tag=2,zc(n,e,1))),n.lanes|=1),t)}var Oq=Vl.ReactCurrentOwner,Qi=!1;function Di(t,e,n,r){e.child=t===null?t6(e,null,n,r):Tf(e,t.child,n,r)}function C3(t,e,n,r,i){n=n.render;var s=e.ref;return uf(e,i),r=D2(t,e,n,r,s,i),n=N2(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kl(t,e,i)):(Gn&&n&&E2(e),e.flags|=1,Di(t,e,r,i),e.child)}function A3(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!W2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,S6(t,e,s,r,i)):(t=W1(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lm,n(o,r)&&t.ref===e.ref)return kl(t,e,i)}return e.flags|=1,t=jc(s,r),t.ref=e.ref,t.return=e,e.child=t}function S6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Lm(s,r)&&t.ref===e.ref)if(Qi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qi=!0);else return e.lanes=t.lanes,kl(t,e,i)}return hC(t,e,n,r,i)}function T6(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(qd,Es),Es|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cn(qd,Es),Es|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Cn(qd,Es),Es|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Cn(qd,Es),Es|=r;return Di(t,e,i,n),e.child}function P6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hC(t,e,n,r,i){var s=ns(n)?gh:Ai.current;return s=Ef(e,s),uf(e,i),n=D2(t,e,n,r,s,i),r=N2(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kl(t,e,i)):(Gn&&r&&E2(e),e.flags|=1,Di(t,e,n,i),e.child)}function R3(t,e,n,r,i){if(ns(n)){var s=!0;Ib(e)}else s=!1;if(uf(e,i),e.stateNode===null)V1(t,e),J5(e,n,r),cC(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=wo(c):(c=ns(n)?gh:Ai.current,c=Ef(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&_3(e,o,r,c),_c=!1;var f=e.memoizedState;o.state=f,Db(e,r,o,i),l=e.memoizedState,a!==r||f!==l||ts.current||_c?(typeof u=="function"&&(lC(e,n,u,r),l=e.memoizedState),(a=_c||b3(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Z5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vo(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wo(l):(l=ns(n)?gh:Ai.current,l=Ef(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&_3(e,o,r,l),_c=!1,f=e.memoizedState,o.state=f,Db(e,r,o,i);var m=e.memoizedState;a!==h||f!==m||ts.current||_c?(typeof g=="function"&&(lC(e,n,g,r),m=e.memoizedState),(c=_c||b3(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return dC(t,e,n,r,s,i)}function dC(t,e,n,r,i,s){P6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&p3(e,n,!1),kl(t,e,s);r=e.stateNode,Oq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tf(e,t.child,null,s),e.child=Tf(e,null,a,s)):Di(t,e,a,s),e.memoizedState=r.state,i&&p3(e,n,!0),e.child}function C6(t){var e=t.stateNode;e.pendingContext?f3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f3(t,e.context,!1),M2(t,e.containerInfo)}function I3(t,e,n,r,i){return Sf(),T2(i),e.flags|=256,Di(t,e,n,r),e.child}var fC={dehydrated:null,treeContext:null,retryLane:0};function pC(t){return{baseLanes:t,cachePool:null,transitions:null}}function A6(t,e,n){var r=e.pendingProps,i=qn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Cn(qn,i&1),t===null)return oC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Px(o,r,0,null),t=nh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pC(n),e.memoizedState=fC,t):z2(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Lq(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=jc(a,s):(s=nh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fC,r}return s=t.child,t=s.sibling,r=jc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function z2(t,e){return e=Px({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yv(t,e,n,r){return r!==null&&T2(r),Tf(e,t.child,null,n),t=z2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lq(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=PS(Error(Ae(422))),yv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Px({mode:"visible",children:r.children},i,0,null),s=nh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tf(e,t.child,null,o),e.child.memoizedState=pC(o),e.memoizedState=fC,s);if(!(e.mode&1))return yv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ae(419)),r=PS(s,r,void 0),yv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qi||a){if(r=Yr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ll(t,i),ia(r,t,i,-1))}return H2(),r=PS(Error(Ae(421))),yv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Wq.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,As=Fc(i.nextSibling),Os=e,Gn=!0,Wo=null,t!==null&&(uo[ho++]=Tl,uo[ho++]=Pl,uo[ho++]=mh,Tl=t.id,Pl=t.overflow,mh=e),e=z2(e,r.children),e.flags|=4096,e)}function M3(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),aC(t.return,e,n)}function CS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function R6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Di(t,e,r.children,n),r=qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M3(t,n,e);else if(t.tag===19)M3(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Cn(qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nb(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),CS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nb(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}CS(e,!0,n,null,s);break;case"together":CS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function V1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=jc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kq(t,e,n){switch(e.tag){case 3:C6(e),Sf();break;case 5:n6(e);break;case 1:ns(e.type)&&Ib(e);break;case 4:M2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Cn(Lb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Cn(qn,qn.current&1),e.flags|=128,null):n&e.child.childLanes?A6(t,e,n):(Cn(qn,qn.current&1),t=kl(t,e,n),t!==null?t.sibling:null);Cn(qn,qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cn(qn,qn.current),r)break;return null;case 22:case 23:return e.lanes=0,T6(t,e,n)}return kl(t,e,n)}var I6,gC,M6,O6;I6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gC=function(){};M6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xu(Xa.current);var s=null;switch(n){case"input":i=BP(t,i),r=BP(t,r),s=[];break;case"select":i=Qn({},i,{value:void 0}),r=Qn({},r,{value:void 0}),s=[];break;case"textarea":i=UP(t,i),r=UP(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ab)}jP(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&On("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};O6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wp(t,e){if(!Gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Dq(t,e,n){var r=e.pendingProps;switch(S2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(e),null;case 1:return ns(e.type)&&Rb(),mi(e),null;case 3:return r=e.stateNode,Pf(),Dn(ts),Dn(Ai),L2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wo!==null&&(EC(Wo),Wo=null))),gC(t,e),mi(e),null;case 5:O2(e);var i=Xu(Fm.current);if(n=e.type,t!==null&&e.stateNode!=null)M6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return mi(e),null}if(t=Xu(Xa.current),gv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ua]=e,r[Nm]=s,t=(e.mode&1)!==0,n){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(i=0;i<Cg.length;i++)On(Cg[i],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":Uk(r,s),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},On("invalid",r);break;case"textarea":jk(r,s),On("invalid",r)}jP(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&pv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&pv(r.textContent,a,t),i=["children",""+a]):Pm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",r)}switch(n){case"input":ov(r),$k(r,s,!0);break;case"textarea":ov(r),Vk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ab)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ua]=e,t[Nm]=r,I6(t,e,!1,!1),e.stateNode=t;e:{switch(o=VP(n,r),n){case"dialog":On("cancel",t),On("close",t),i=r;break;case"iframe":case"object":case"embed":On("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cg.length;i++)On(Cg[i],t);i=r;break;case"source":On("error",t),i=r;break;case"img":case"image":case"link":On("error",t),On("load",t),i=r;break;case"details":On("toggle",t),i=r;break;case"input":Uk(t,r),i=BP(t,r),On("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qn({},r,{value:void 0}),On("invalid",t);break;case"textarea":jk(t,r),i=UP(t,r),On("invalid",t);break;default:i=r}jP(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?l5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&o5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cm(t,l):typeof l=="number"&&Cm(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&On("scroll",t):l!=null&&c2(t,s,l,o))}switch(n){case"input":ov(t),$k(t,r,!1);break;case"textarea":ov(t),Vk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?of(t,!!r.multiple,s,!1):r.defaultValue!=null&&of(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ab)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mi(e),null;case 6:if(t&&e.stateNode!=null)O6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Xu(Fm.current),Xu(Xa.current),gv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ua]=e,(s=r.nodeValue!==n)&&(t=Os,t!==null))switch(t.tag){case 3:pv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ua]=e,e.stateNode=r}return mi(e),null;case 13:if(Dn(qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gn&&As!==null&&e.mode&1&&!(e.flags&128))q5(),Sf(),e.flags|=98560,s=!1;else if(s=gv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[Ua]=e}else Sf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mi(e),s=!1}else Wo!==null&&(EC(Wo),Wo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qn.current&1?Lr===0&&(Lr=3):H2())),e.updateQueue!==null&&(e.flags|=4),mi(e),null);case 4:return Pf(),gC(t,e),t===null&&km(e.stateNode.containerInfo),mi(e),null;case 10:return A2(e.type._context),mi(e),null;case 17:return ns(e.type)&&Rb(),mi(e),null;case 19:if(Dn(qn),s=e.memoizedState,s===null)return mi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wp(s,!1);else{if(Lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nb(t),o!==null){for(e.flags|=128,Wp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Cn(qn,qn.current&1|2),e.child}t=t.sibling}s.tail!==null&&mr()>Af&&(e.flags|=128,r=!0,Wp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Gn)return mi(e),null}else 2*mr()-s.renderingStartTime>Af&&n!==1073741824&&(e.flags|=128,r=!0,Wp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mr(),e.sibling=null,n=qn.current,Cn(qn,r?n&1|2:n&1),e):(mi(e),null);case 22:case 23:return G2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Es&1073741824&&(mi(e),e.subtreeFlags&6&&(e.flags|=8192)):mi(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function Nq(t,e){switch(S2(e),e.tag){case 1:return ns(e.type)&&Rb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pf(),Dn(ts),Dn(Ai),L2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O2(e),null;case 13:if(Dn(qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Sf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dn(qn),null;case 4:return Pf(),null;case 10:return A2(e.type._context),null;case 22:case 23:return G2(),null;case 24:return null;default:return null}}var vv=!1,Si=!1,Bq=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Yd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ir(t,e,r)}else n.current=null}function mC(t,e,n){try{n()}catch(r){ir(t,e,r)}}var O3=!1;function Fq(t,e){if(JP=Tb,t=N5(),w2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eC={focusedElem:t,selectionRange:n},Tb=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Vo(e.type,y),x);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(E){ir(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return m=O3,O3=!1,m}function em(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mC(e,n,s)}i=i.next}while(i!==r)}}function Sx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L6(t){var e=t.alternate;e!==null&&(t.alternate=null,L6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ua],delete e[Nm],delete e[rC],delete e[_q],delete e[xq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k6(t){return t.tag===5||t.tag===3||t.tag===4}function L3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ab));else if(r!==4&&(t=t.child,t!==null))for(vC(t,e,n),t=t.sibling;t!==null;)vC(t,e,n),t=t.sibling}function bC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bC(t,e,n),t=t.sibling;t!==null;)bC(t,e,n),t=t.sibling}var si=null,Go=!1;function oc(t,e,n){for(n=n.child;n!==null;)D6(t,e,n),n=n.sibling}function D6(t,e,n){if(Wa&&typeof Wa.onCommitFiberUnmount=="function")try{Wa.onCommitFiberUnmount(mx,n)}catch{}switch(n.tag){case 5:Si||Yd(n,e);case 6:var r=si,i=Go;si=null,oc(t,e,n),si=r,Go=i,si!==null&&(Go?(t=si,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):si.removeChild(n.stateNode));break;case 18:si!==null&&(Go?(t=si,n=n.stateNode,t.nodeType===8?_S(t.parentNode,n):t.nodeType===1&&_S(t,n),Mm(t)):_S(si,n.stateNode));break;case 4:r=si,i=Go,si=n.stateNode.containerInfo,Go=!0,oc(t,e,n),si=r,Go=i;break;case 0:case 11:case 14:case 15:if(!Si&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mC(n,e,o),i=i.next}while(i!==r)}oc(t,e,n);break;case 1:if(!Si&&(Yd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ir(n,e,a)}oc(t,e,n);break;case 21:oc(t,e,n);break;case 22:n.mode&1?(Si=(r=Si)||n.memoizedState!==null,oc(t,e,n),Si=r):oc(t,e,n);break;default:oc(t,e,n)}}function k3(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bq),e.forEach(function(r){var i=Xq.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:si=a.stateNode,Go=!1;break e;case 3:si=a.stateNode.containerInfo,Go=!0;break e;case 4:si=a.stateNode.containerInfo,Go=!0;break e}a=a.return}if(si===null)throw Error(Ae(160));D6(s,o,i),si=null,Go=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N6(e,t),e=e.sibling}function N6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bo(e,t),Ta(t),r&4){try{em(3,t,t.return),Sx(3,t)}catch(y){ir(t,t.return,y)}try{em(5,t,t.return)}catch(y){ir(t,t.return,y)}}break;case 1:Bo(e,t),Ta(t),r&512&&n!==null&&Yd(n,n.return);break;case 5:if(Bo(e,t),Ta(t),r&512&&n!==null&&Yd(n,n.return),t.flags&32){var i=t.stateNode;try{Cm(i,"")}catch(y){ir(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&r5(i,s),VP(a,o);var c=VP(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?l5(i,h):u==="dangerouslySetInnerHTML"?o5(i,h):u==="children"?Cm(i,h):c2(i,u,h,c)}switch(a){case"input":FP(i,s);break;case"textarea":i5(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?of(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?of(i,!!s.multiple,s.defaultValue,!0):of(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nm]=s}catch(y){ir(t,t.return,y)}}break;case 6:if(Bo(e,t),Ta(t),r&4){if(t.stateNode===null)throw Error(Ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ir(t,t.return,y)}}break;case 3:if(Bo(e,t),Ta(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mm(e.containerInfo)}catch(y){ir(t,t.return,y)}break;case 4:Bo(e,t),Ta(t);break;case 13:Bo(e,t),Ta(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(j2=mr())),r&4&&k3(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Si=(c=Si)||u,Bo(e,t),Si=c):Bo(e,t),Ta(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(tt=t,u=t.child;u!==null;){for(h=tt=u;tt!==null;){switch(f=tt,g=f.child,f.tag){case 0:case 11:case 14:case 15:em(4,f,f.return);break;case 1:Yd(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ir(r,n,y)}}break;case 5:Yd(f,f.return);break;case 22:if(f.memoizedState!==null){N3(h);continue}}g!==null?(g.return=f,tt=g):N3(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=a5("display",o))}catch(y){ir(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){ir(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bo(e,t),Ta(t),r&4&&k3(t);break;case 21:break;default:Bo(e,t),Ta(t)}}function Ta(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k6(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cm(i,""),r.flags&=-33);var s=L3(t);bC(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=L3(t);vC(t,a,o);break;default:throw Error(Ae(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zq(t,e,n){tt=t,B6(t)}function B6(t,e,n){for(var r=(t.mode&1)!==0;tt!==null;){var i=tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||vv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Si;a=vv;var c=Si;if(vv=o,(Si=l)&&!c)for(tt=i;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?B3(i):l!==null?(l.return=o,tt=l):B3(i);for(;s!==null;)tt=s,B6(s),s=s.sibling;tt=i,vv=a,Si=c}D3(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,tt=s):D3(t)}}function D3(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Si||Sx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Si)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&v3(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Mm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Si||e.flags&512&&yC(e)}catch(f){ir(e,e.return,f)}}if(e===t){tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}}function N3(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,tt=n;break}tt=e.return}}function B3(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sx(4,e)}catch(l){ir(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{yC(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{yC(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var Uq=Math.ceil,zb=Vl.ReactCurrentDispatcher,U2=Vl.ReactCurrentOwner,vo=Vl.ReactCurrentBatchConfig,en=0,Yr=null,Sr=null,ci=0,Es=0,qd=au(0),Lr=0,jm=null,vh=0,Tx=0,$2=0,tm=null,Zi=null,j2=0,Af=1/0,yl=null,Ub=!1,_C=null,Uc=null,bv=!1,Rc=null,$b=0,nm=0,xC=null,G1=-1,H1=0;function $i(){return en&6?mr():G1!==-1?G1:G1=mr()}function $c(t){return t.mode&1?en&2&&ci!==0?ci&-ci:Eq.transition!==null?(H1===0&&(H1=_5()),H1):(t=yn,t!==0||(t=window.event,t=t===void 0?16:C5(t.type)),t):1}function ia(t,e,n,r){if(50<nm)throw nm=0,xC=null,Error(Ae(185));P0(t,n,r),(!(en&2)||t!==Yr)&&(t===Yr&&(!(en&2)&&(Tx|=n),Lr===4&&Tc(t,ci)),rs(t,r),n===1&&en===0&&!(e.mode&1)&&(Af=mr()+500,xx&&lu()))}function rs(t,e){var n=t.callbackNode;EY(t,e);var r=Sb(t,t===Yr?ci:0);if(r===0)n!==null&&Wk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wk(n),e===1)t.tag===0?wq(F3.bind(null,t)):W5(F3.bind(null,t)),vq(function(){!(en&6)&&lu()}),n=null;else{switch(x5(r)){case 1:n=p2;break;case 4:n=v5;break;case 16:n=Eb;break;case 536870912:n=b5;break;default:n=Eb}n=H6(n,F6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F6(t,e){if(G1=-1,H1=0,en&6)throw Error(Ae(327));var n=t.callbackNode;if(hf()&&t.callbackNode!==n)return null;var r=Sb(t,t===Yr?ci:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jb(t,r);else{e=r;var i=en;en|=2;var s=U6();(Yr!==t||ci!==e)&&(yl=null,Af=mr()+500,th(t,e));do try{Vq();break}catch(a){z6(t,a)}while(1);C2(),zb.current=s,en=i,Sr!==null?e=0:(Yr=null,ci=0,e=Lr)}if(e!==0){if(e===2&&(i=YP(t),i!==0&&(r=i,e=wC(t,i))),e===1)throw n=jm,th(t,0),Tc(t,r),rs(t,mr()),n;if(e===6)Tc(t,r);else{if(i=t.current.alternate,!(r&30)&&!$q(i)&&(e=jb(t,r),e===2&&(s=YP(t),s!==0&&(r=s,e=wC(t,s))),e===1))throw n=jm,th(t,0),Tc(t,r),rs(t,mr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Du(t,Zi,yl);break;case 3:if(Tc(t,r),(r&130023424)===r&&(e=j2+500-mr(),10<e)){if(Sb(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$i(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nC(Du.bind(null,t,Zi,yl),e);break}Du(t,Zi,yl);break;case 4:if(Tc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ra(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uq(r/1960))-r,10<r){t.timeoutHandle=nC(Du.bind(null,t,Zi,yl),r);break}Du(t,Zi,yl);break;case 5:Du(t,Zi,yl);break;default:throw Error(Ae(329))}}}return rs(t,mr()),t.callbackNode===n?F6.bind(null,t):null}function wC(t,e){var n=tm;return t.current.memoizedState.isDehydrated&&(th(t,e).flags|=256),t=jb(t,e),t!==2&&(e=Zi,Zi=n,e!==null&&EC(e)),t}function EC(t){Zi===null?Zi=t:Zi.push.apply(Zi,t)}function $q(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!la(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tc(t,e){for(e&=~$2,e&=~Tx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ra(e),r=1<<n;t[n]=-1,e&=~r}}function F3(t){if(en&6)throw Error(Ae(327));hf();var e=Sb(t,0);if(!(e&1))return rs(t,mr()),null;var n=jb(t,e);if(t.tag!==0&&n===2){var r=YP(t);r!==0&&(e=r,n=wC(t,r))}if(n===1)throw n=jm,th(t,0),Tc(t,e),rs(t,mr()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Du(t,Zi,yl),rs(t,mr()),null}function V2(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(Af=mr()+500,xx&&lu())}}function bh(t){Rc!==null&&Rc.tag===0&&!(en&6)&&hf();var e=en;en|=1;var n=vo.transition,r=yn;try{if(vo.transition=null,yn=1,t)return t()}finally{yn=r,vo.transition=n,en=e,!(en&6)&&lu()}}function G2(){Es=qd.current,Dn(qd)}function th(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yq(n)),Sr!==null)for(n=Sr.return;n!==null;){var r=n;switch(S2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rb();break;case 3:Pf(),Dn(ts),Dn(Ai),L2();break;case 5:O2(r);break;case 4:Pf();break;case 13:Dn(qn);break;case 19:Dn(qn);break;case 10:A2(r.type._context);break;case 22:case 23:G2()}n=n.return}if(Yr=t,Sr=t=jc(t.current,null),ci=Es=e,Lr=0,jm=null,$2=Tx=vh=0,Zi=tm=null,Wu!==null){for(e=0;e<Wu.length;e++)if(n=Wu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wu=null}return t}function z6(t,e){do{var n=Sr;try{if(C2(),$1.current=Fb,Bb){for(var r=Zn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bb=!1}if(yh=0,Gr=Or=Zn=null,Jg=!1,zm=0,U2.current=null,n===null||n.return===null){Lr=1,jm=e,Sr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ci,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=T3(o);if(g!==null){g.flags&=-257,P3(g,o,a,s,e),g.mode&1&&S3(s,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){S3(s,c,e),H2();break e}l=Error(Ae(426))}}else if(Gn&&a.mode&1){var x=T3(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),P3(x,o,a,s,e),T2(Cf(l,a));break e}}s=l=Cf(l,a),Lr!==4&&(Lr=2),tm===null?tm=[s]:tm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=w6(s,l,e);y3(s,b);break e;case 1:a=l;var w=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Uc===null||!Uc.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=E6(s,a,e);y3(s,E);break e}}s=s.return}while(s!==null)}j6(n)}catch(T){e=T,Sr===n&&n!==null&&(Sr=n=n.return);continue}break}while(1)}function U6(){var t=zb.current;return zb.current=Fb,t===null?Fb:t}function H2(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Yr===null||!(vh&268435455)&&!(Tx&268435455)||Tc(Yr,ci)}function jb(t,e){var n=en;en|=2;var r=U6();(Yr!==t||ci!==e)&&(yl=null,th(t,e));do try{jq();break}catch(i){z6(t,i)}while(1);if(C2(),en=n,zb.current=r,Sr!==null)throw Error(Ae(261));return Yr=null,ci=0,Lr}function jq(){for(;Sr!==null;)$6(Sr)}function Vq(){for(;Sr!==null&&!pY();)$6(Sr)}function $6(t){var e=G6(t.alternate,t,Es);t.memoizedProps=t.pendingProps,e===null?j6(t):Sr=e,U2.current=null}function j6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nq(n,e),n!==null){n.flags&=32767,Sr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lr=6,Sr=null;return}}else if(n=Dq(n,e,Es),n!==null){Sr=n;return}if(e=e.sibling,e!==null){Sr=e;return}Sr=e=t}while(e!==null);Lr===0&&(Lr=5)}function Du(t,e,n){var r=yn,i=vo.transition;try{vo.transition=null,yn=1,Gq(t,e,n,r)}finally{vo.transition=i,yn=r}return null}function Gq(t,e,n,r){do hf();while(Rc!==null);if(en&6)throw Error(Ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SY(t,s),t===Yr&&(Sr=Yr=null,ci=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bv||(bv=!0,H6(Eb,function(){return hf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vo.transition,vo.transition=null;var o=yn;yn=1;var a=en;en|=4,U2.current=null,Fq(t,n),N6(n,t),uq(eC),Tb=!!JP,eC=JP=null,t.current=n,zq(n),gY(),en=a,yn=o,vo.transition=s}else t.current=n;if(bv&&(bv=!1,Rc=t,$b=i),s=t.pendingLanes,s===0&&(Uc=null),vY(n.stateNode),rs(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ub)throw Ub=!1,t=_C,_C=null,t;return $b&1&&t.tag!==0&&hf(),s=t.pendingLanes,s&1?t===xC?nm++:(nm=0,xC=t):nm=0,lu(),null}function hf(){if(Rc!==null){var t=x5($b),e=vo.transition,n=yn;try{if(vo.transition=null,yn=16>t?16:t,Rc===null)var r=!1;else{if(t=Rc,Rc=null,$b=0,en&6)throw Error(Ae(331));var i=en;for(en|=4,tt=t.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(tt=c;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:em(8,u,s)}var h=u.child;if(h!==null)h.return=u,tt=h;else for(;tt!==null;){u=tt;var f=u.sibling,g=u.return;if(L6(u),u===c){tt=null;break}if(f!==null){f.return=g,tt=f;break}tt=g}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:em(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,tt=b;break e}tt=s.return}}var w=t.current;for(tt=w;tt!==null;){o=tt;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,tt=v;else e:for(o=w;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sx(9,a)}}catch(T){ir(a,a.return,T)}if(a===o){tt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,tt=E;break e}tt=a.return}}if(en=i,lu(),Wa&&typeof Wa.onPostCommitFiberRoot=="function")try{Wa.onPostCommitFiberRoot(mx,t)}catch{}r=!0}return r}finally{yn=n,vo.transition=e}}return!1}function z3(t,e,n){e=Cf(n,e),e=w6(t,e,1),t=zc(t,e,1),e=$i(),t!==null&&(P0(t,1,e),rs(t,e))}function ir(t,e,n){if(t.tag===3)z3(t,t,n);else for(;e!==null;){if(e.tag===3){z3(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Uc===null||!Uc.has(r))){t=Cf(n,t),t=E6(e,t,1),e=zc(e,t,1),t=$i(),e!==null&&(P0(e,1,t),rs(e,t));break}}e=e.return}}function Hq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$i(),t.pingedLanes|=t.suspendedLanes&n,Yr===t&&(ci&n)===n&&(Lr===4||Lr===3&&(ci&130023424)===ci&&500>mr()-j2?th(t,0):$2|=n),rs(t,e)}function V6(t,e){e===0&&(t.mode&1?(e=cv,cv<<=1,!(cv&130023424)&&(cv=4194304)):e=1);var n=$i();t=Ll(t,e),t!==null&&(P0(t,e,n),rs(t,n))}function Wq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V6(t,n)}function Xq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),V6(t,n)}var G6;G6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ts.current)Qi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qi=!1,kq(t,e,n);Qi=!!(t.flags&131072)}else Qi=!1,Gn&&e.flags&1048576&&X5(e,Ob,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;V1(t,e),t=e.pendingProps;var i=Ef(e,Ai.current);uf(e,n),i=D2(null,e,r,t,i,n);var s=N2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ns(r)?(s=!0,Ib(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I2(e),i.updater=wx,e.stateNode=i,i._reactInternals=e,cC(e,r,t,n),e=dC(null,e,r,!0,s,n)):(e.tag=0,Gn&&s&&E2(e),Di(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(V1(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qq(r),t=Vo(r,t),i){case 0:e=hC(null,e,r,t,n);break e;case 1:e=R3(null,e,r,t,n);break e;case 11:e=C3(null,e,r,t,n);break e;case 14:e=A3(null,e,r,Vo(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vo(r,i),hC(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vo(r,i),R3(t,e,r,i,n);case 3:e:{if(C6(e),t===null)throw Error(Ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Z5(t,e),Db(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cf(Error(Ae(423)),e),e=I3(t,e,r,n,i);break e}else if(r!==i){i=Cf(Error(Ae(424)),e),e=I3(t,e,r,n,i);break e}else for(As=Fc(e.stateNode.containerInfo.firstChild),Os=e,Gn=!0,Wo=null,n=t6(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sf(),r===i){e=kl(t,e,n);break e}Di(t,e,r,n)}e=e.child}return e;case 5:return n6(e),t===null&&oC(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tC(r,i)?o=null:s!==null&&tC(r,s)&&(e.flags|=32),P6(t,e),Di(t,e,o,n),e.child;case 6:return t===null&&oC(e),null;case 13:return A6(t,e,n);case 4:return M2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tf(e,null,r,n):Di(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vo(r,i),C3(t,e,r,i,n);case 7:return Di(t,e,e.pendingProps,n),e.child;case 8:return Di(t,e,e.pendingProps.children,n),e.child;case 12:return Di(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Cn(Lb,r._currentValue),r._currentValue=o,s!==null)if(la(s.value,o)){if(s.children===i.children&&!ts.current){e=kl(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Al(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),aC(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),aC(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Di(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,uf(e,n),i=wo(i),r=r(i),e.flags|=1,Di(t,e,r,n),e.child;case 14:return r=e.type,i=Vo(r,e.pendingProps),i=Vo(r.type,i),A3(t,e,r,i,n);case 15:return S6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vo(r,i),V1(t,e),e.tag=1,ns(r)?(t=!0,Ib(e)):t=!1,uf(e,n),J5(e,r,i),cC(e,r,i,n),dC(null,e,r,!0,t,n);case 19:return R6(t,e,n);case 22:return T6(t,e,n)}throw Error(Ae(156,e.tag))};function H6(t,e){return y5(t,e)}function Yq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function go(t,e,n,r){return new Yq(t,e,n,r)}function W2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qq(t){if(typeof t=="function")return W2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===h2)return 11;if(t===d2)return 14}return 2}function jc(t,e){var n=t.alternate;return n===null?(n=go(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function W1(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")W2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zd:return nh(n.children,i,s,e);case u2:o=8,i|=8;break;case LP:return t=go(12,n,e,i|2),t.elementType=LP,t.lanes=s,t;case kP:return t=go(13,n,e,i),t.elementType=kP,t.lanes=s,t;case DP:return t=go(19,n,e,i),t.elementType=DP,t.lanes=s,t;case e5:return Px(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QU:o=10;break e;case JU:o=9;break e;case h2:o=11;break e;case d2:o=14;break e;case bc:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=go(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function nh(t,e,n,r){return t=go(7,t,r,e),t.lanes=n,t}function Px(t,e,n,r){return t=go(22,t,r,e),t.elementType=e5,t.lanes=n,t.stateNode={isHidden:!1},t}function AS(t,e,n){return t=go(6,t,null,e),t.lanes=n,t}function RS(t,e,n){return e=go(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kq(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cS(0),this.expirationTimes=cS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function X2(t,e,n,r,i,s,o,a,l){return t=new Kq(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=go(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I2(s),t}function Zq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function W6(t){if(!t)return Qc;t=t._reactInternals;e:{if(Mh(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ns(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(ns(n))return H5(t,n,e)}return e}function X6(t,e,n,r,i,s,o,a,l){return t=X2(n,r,!0,t,i,s,o,a,l),t.context=W6(null),n=t.current,r=$i(),i=$c(n),s=Al(r,i),s.callback=e??null,zc(n,s,i),t.current.lanes=i,P0(t,i,r),rs(t,r),t}function Cx(t,e,n,r){var i=e.current,s=$i(),o=$c(i);return n=W6(n),e.context===null?e.context=n:e.pendingContext=n,e=Al(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zc(i,e,o),t!==null&&(ia(t,i,o,s),U1(t,i,o)),o}function Vb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function U3(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Y2(t,e){U3(t,e),(t=t.alternate)&&U3(t,e)}function Qq(){return null}var Y6=typeof reportError=="function"?reportError:function(t){console.error(t)};function q2(t){this._internalRoot=t}Ax.prototype.render=q2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Cx(t,e,null,null)};Ax.prototype.unmount=q2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bh(function(){Cx(null,t,null,null)}),e[Ol]=null}};function Ax(t){this._internalRoot=t}Ax.prototype.unstable_scheduleHydration=function(t){if(t){var e=S5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sc.length&&e!==0&&e<Sc[n].priority;n++);Sc.splice(n,0,t),n===0&&P5(t)}};function K2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $3(){}function Jq(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Vb(o);s.call(c)}}var o=X6(e,r,t,0,null,!1,!1,"",$3);return t._reactRootContainer=o,t[Ol]=o.current,km(t.nodeType===8?t.parentNode:t),bh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Vb(l);a.call(c)}}var l=X2(t,0,!1,null,null,!1,!1,"",$3);return t._reactRootContainer=l,t[Ol]=l.current,km(t.nodeType===8?t.parentNode:t),bh(function(){Cx(e,l,n,r)}),l}function Ix(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Vb(o);a.call(l)}}Cx(e,o,t,i)}else o=Jq(n,e,t,i,r);return Vb(o)}w5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pg(e.pendingLanes);n!==0&&(g2(e,n|1),rs(e,mr()),!(en&6)&&(Af=mr()+500,lu()))}break;case 13:bh(function(){var r=Ll(t,1);if(r!==null){var i=$i();ia(r,t,1,i)}}),Y2(t,1)}};m2=function(t){if(t.tag===13){var e=Ll(t,134217728);if(e!==null){var n=$i();ia(e,t,134217728,n)}Y2(t,134217728)}};E5=function(t){if(t.tag===13){var e=$c(t),n=Ll(t,e);if(n!==null){var r=$i();ia(n,t,e,r)}Y2(t,e)}};S5=function(){return yn};T5=function(t,e){var n=yn;try{return yn=t,e()}finally{yn=n}};HP=function(t,e,n){switch(e){case"input":if(FP(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_x(r);if(!i)throw Error(Ae(90));n5(r),FP(r,i)}}}break;case"textarea":i5(t,n);break;case"select":e=n.value,e!=null&&of(t,!!n.multiple,e,!1)}};h5=V2;d5=bh;var eK={usingClientEntryPoint:!1,Events:[A0,Vd,_x,c5,u5,V2]},Xp={findFiberByHostInstance:Hu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},tK={bundleType:Xp.bundleType,version:Xp.version,rendererPackageName:Xp.rendererPackageName,rendererConfig:Xp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g5(t),t===null?null:t.stateNode},findFiberByHostInstance:Xp.findFiberByHostInstance||Qq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_v.isDisabled&&_v.supportsFiber)try{mx=_v.inject(tK),Wa=_v}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eK;Gs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K2(e))throw Error(Ae(200));return Zq(t,e,null,n)};Gs.createRoot=function(t,e){if(!K2(t))throw Error(Ae(299));var n=!1,r="",i=Y6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=X2(t,1,!1,null,null,n,!1,r,i),t[Ol]=e.current,km(t.nodeType===8?t.parentNode:t),new q2(e)};Gs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=g5(e),t=t===null?null:t.stateNode,t};Gs.flushSync=function(t){return bh(t)};Gs.hydrate=function(t,e,n){if(!Rx(e))throw Error(Ae(200));return Ix(null,t,e,!0,n)};Gs.hydrateRoot=function(t,e,n){if(!K2(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Y6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=X6(e,null,t,1,n??null,i,!1,s,o),t[Ol]=e.current,km(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ax(e)};Gs.render=function(t,e,n){if(!Rx(e))throw Error(Ae(200));return Ix(null,t,e,!1,n)};Gs.unmountComponentAtNode=function(t){if(!Rx(t))throw Error(Ae(40));return t._reactRootContainer?(bh(function(){Ix(null,null,t,!1,function(){t._reactRootContainer=null,t[Ol]=null})}),!0):!1};Gs.unstable_batchedUpdates=V2;Gs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rx(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return Ix(t,e,n,!1,r)};Gs.version="18.2.0-next-9e3b772b8-20220608";function q6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q6)}catch(t){console.error(t)}}q6(),XU.exports=Gs;var Gl=XU.exports;const Ag=Rh(Gl),nK=XR({__proto__:null,default:Ag},[Gl]);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sr.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const j3="popstate";function rK(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=rl(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Vm("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:I0(s))}function r(i,s){Jc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return sK(e,n,r,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iK(){return Math.random().toString(36).substr(2,8)}function V3(t,e){return{usr:t.state,key:t.key,idx:e}}function Vm(t,e,n,r){return n===void 0&&(n=null),sr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?rl(e):e,{state:n,key:e&&e.key||r||iK()})}function I0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sK(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=fr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(sr({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=fr.Pop;let x=u(),b=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:b})}function f(x,b){a=fr.Push;let w=Vm(y.location,x,b);n&&n(w,x),c=u()+1;let v=V3(w,c),E=y.createHref(w);try{o.pushState(v,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&l&&l({action:a,location:y.location,delta:1})}function g(x,b){a=fr.Replace;let w=Vm(y.location,x,b);n&&n(w,x),c=u();let v=V3(w,c),E=y.createHref(w);o.replaceState(v,"",E),s&&l&&l({action:a,location:y.location,delta:0})}function m(x){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:I0(x);return Yt(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(j3,h),l=x,()=>{i.removeEventListener(j3,h),l=null}},createHref(x){return e(i,x)},createURL:m,encodeLocation(x){let b=m(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:g,go(x){return o.go(x)}};return y}var rr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rr||(rr={}));const oK=new Set(["lazy","caseSensitive","path","id","index","children"]);function aK(t){return t.index===!0}function SC(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Yt(i.index!==!0||!i.children,"Cannot specify children on an index route"),Yt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),aK(i)){let l=sr({},i,e(i),{id:a});return r[a]=l,l}else{let l=sr({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=SC(i.children,e,o,r)),l}})}function Kd(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?rl(e):e,i=M0(r.pathname||"/",n);if(i==null)return null;let s=K6(t);cK(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=vK(s[a],xK(i));return o}function lK(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function K6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vc([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),K6(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mK(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Z6(s.path))i(s,o,l)}),e}function Z6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Z6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function cK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uK=/^:[\w-]+$/,hK=3,dK=2,fK=1,pK=10,gK=-2,G3=t=>t==="*";function mK(t,e){let n=t.split("/"),r=n.length;return n.some(G3)&&(r+=gK),e&&(r+=dK),n.filter(i=>!G3(i)).reduce((i,s)=>i+(uK.test(s)?hK:s===""?fK:pK),r)}function yK(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vK(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=bK({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let h=a.route;s.push({params:r,pathname:Vc([i,u.pathname]),pathnameBase:TK(Vc([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=Vc([i,u.pathnameBase]))}return s}function bK(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_K(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[h];return g&&!m?c[f]=void 0:c[f]=wK(m||"",f),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _K(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xK(t){try{return decodeURI(t)}catch(e){return Jc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wK(t,e){try{return decodeURIComponent(t)}catch(n){return Jc(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function M0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?rl(t):t;return{pathname:n?n.startsWith("/")?n:SK(n,e):e,search:PK(r),hash:CK(i)}}function SK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function IS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Q6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function J6(t,e){let n=Q6(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function e$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=rl(t):(i=sr({},t),Yt(!i.pathname||!i.pathname.includes("?"),IS("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),IS("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),IS("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=EK(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Vc=t=>t.join("/").replace(/\/\/+/g,"/"),TK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Z2{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function t$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n$=["post","put","patch","delete"],AK=new Set(n$),RK=["get",...n$],IK=new Set(RK),MK=new Set([301,302,303,307,308]),OK=new Set([307,308]),MS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},LK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},r$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kK=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),i$="remix-router-transitions";function DK(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Yt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let ee=t.detectErrorBoundary;i=ne=>({hasErrorBoundary:ee(ne)})}else i=kK;let s={},o=SC(t.routes,i,void 0,s),a,l=t.basename||"/",c=sr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,h=new Set,f=null,g=null,m=null,y=t.hydrationData!=null,x=Kd(o,t.history.location,l),b=null;if(x==null){let ee=so(404,{pathname:t.history.location.pathname}),{matches:ne,route:ce}=Q3(o);x=ne,b={[ce.id]:ee}}let w,v=x.some(ee=>ee.route.lazy),E=x.some(ee=>ee.route.loader);if(v)w=!1;else if(!E)w=!0;else if(c.v7_partialHydration){let ee=t.hydrationData?t.hydrationData.loaderData:null,ne=t.hydrationData?t.hydrationData.errors:null;w=x.every(ce=>ce.route.loader&&ce.route.loader.hydrate!==!0&&(ee&&ee[ce.route.id]!==void 0||ne&&ne[ce.route.id]!==void 0))}else w=t.hydrationData!=null;let T,P={historyAction:t.history.action,location:t.history.location,matches:x,initialized:w,navigation:MS,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},R=fr.Pop,M=!1,k,O=!1,F=new Map,I=null,D=!1,N=!1,j=[],W=[],H=new Map,U=0,X=-1,Y=new Map,Z=new Set,se=new Map,xe=new Map,de=new Set,Me=new Map,he=new Map,Te=!1;function le(){if(u=t.history.listen(ee=>{let{action:ne,location:ce,delta:De}=ee;if(Te){Te=!1;return}Jc(he.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=on({currentLocation:P.location,nextLocation:ce,historyAction:ne});if(Ve&&De!=null){Te=!0,t.history.go(De*-1),Gt(Ve,{state:"blocked",location:ce,proceed(){Gt(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:ce}),t.history.go(De)},reset(){let vt=new Map(P.blockers);vt.set(Ve,Yp),oe({blockers:vt})}});return}return we(ne,ce)}),n){WK(e,F);let ee=()=>XK(e,F);e.addEventListener("pagehide",ee),I=()=>e.removeEventListener("pagehide",ee)}return P.initialized||we(fr.Pop,P.location,{initialHydration:!0}),T}function ae(){u&&u(),I&&I(),h.clear(),k&&k.abort(),P.fetchers.forEach((ee,ne)=>Ke(ne)),P.blockers.forEach((ee,ne)=>Tt(ne))}function me(ee){return h.add(ee),()=>h.delete(ee)}function oe(ee,ne){ne===void 0&&(ne={}),P=sr({},P,ee);let ce=[],De=[];c.v7_fetcherPersist&&P.fetchers.forEach((Ve,vt)=>{Ve.state==="idle"&&(de.has(vt)?De.push(vt):ce.push(vt))}),[...h].forEach(Ve=>Ve(P,{deletedFetchers:De,unstable_viewTransitionOpts:ne.viewTransitionOpts,unstable_flushSync:ne.flushSync===!0})),c.v7_fetcherPersist&&(ce.forEach(Ve=>P.fetchers.delete(Ve)),De.forEach(Ve=>Ke(Ve)))}function _e(ee,ne,ce){var De,Ve;let{flushSync:vt}=ce===void 0?{}:ce,ut=P.actionData!=null&&P.navigation.formMethod!=null&&Ho(P.navigation.formMethod)&&P.navigation.state==="loading"&&((De=ee.state)==null?void 0:De._isRedirect)!==!0,ht;ne.actionData?Object.keys(ne.actionData).length>0?ht=ne.actionData:ht=null:ut?ht=P.actionData:ht=null;let Je=ne.loaderData?Z3(P.loaderData,ne.loaderData,ne.matches||[],ne.errors):P.loaderData,Lt=P.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((Pt,ln)=>Lt.set(ln,Yp)));let an=M===!0||P.navigation.formMethod!=null&&Ho(P.navigation.formMethod)&&((Ve=ee.state)==null?void 0:Ve._isRedirect)!==!0;a&&(o=a,a=void 0),D||R===fr.Pop||(R===fr.Push?t.history.push(ee,ee.state):R===fr.Replace&&t.history.replace(ee,ee.state));let gt;if(R===fr.Pop){let Pt=F.get(P.location.pathname);Pt&&Pt.has(ee.pathname)?gt={currentLocation:P.location,nextLocation:ee}:F.has(ee.pathname)&&(gt={currentLocation:ee,nextLocation:P.location})}else if(O){let Pt=F.get(P.location.pathname);Pt?Pt.add(ee.pathname):(Pt=new Set([ee.pathname]),F.set(P.location.pathname,Pt)),gt={currentLocation:P.location,nextLocation:ee}}oe(sr({},ne,{actionData:ht,loaderData:Je,historyAction:R,location:ee,initialized:!0,navigation:MS,revalidation:"idle",restoreScrollPosition:Ws(ee,ne.matches||P.matches),preventScrollReset:an,blockers:Lt}),{viewTransitionOpts:gt,flushSync:vt===!0}),R=fr.Pop,M=!1,O=!1,D=!1,N=!1,j=[],W=[]}async function pe(ee,ne){if(typeof ee=="number"){t.history.go(ee);return}let ce=TC(P.location,P.matches,l,c.v7_prependBasename,ee,c.v7_relativeSplatPath,ne==null?void 0:ne.fromRouteId,ne==null?void 0:ne.relative),{path:De,submission:Ve,error:vt}=H3(c.v7_normalizeFormMethod,!1,ce,ne),ut=P.location,ht=Vm(P.location,De,ne&&ne.state);ht=sr({},ht,t.history.encodeLocation(ht));let Je=ne&&ne.replace!=null?ne.replace:void 0,Lt=fr.Push;Je===!0?Lt=fr.Replace:Je===!1||Ve!=null&&Ho(Ve.formMethod)&&Ve.formAction===P.location.pathname+P.location.search&&(Lt=fr.Replace);let an=ne&&"preventScrollReset"in ne?ne.preventScrollReset===!0:void 0,gt=(ne&&ne.unstable_flushSync)===!0,Pt=on({currentLocation:ut,nextLocation:ht,historyAction:Lt});if(Pt){Gt(Pt,{state:"blocked",location:ht,proceed(){Gt(Pt,{state:"proceeding",proceed:void 0,reset:void 0,location:ht}),pe(ee,ne)},reset(){let ln=new Map(P.blockers);ln.set(Pt,Yp),oe({blockers:ln})}});return}return await we(Lt,ht,{submission:Ve,pendingError:vt,preventScrollReset:an,replace:ne&&ne.replace,enableViewTransition:ne&&ne.unstable_viewTransition,flushSync:gt})}function Pe(){if(Mt(),oe({revalidation:"loading"}),P.navigation.state!=="submitting"){if(P.navigation.state==="idle"){we(P.historyAction,P.location,{startUninterruptedRevalidation:!0});return}we(R||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation})}}async function we(ee,ne,ce){k&&k.abort(),k=null,R=ee,D=(ce&&ce.startUninterruptedRevalidation)===!0,fa(P.location,P.matches),M=(ce&&ce.preventScrollReset)===!0,O=(ce&&ce.enableViewTransition)===!0;let De=a||o,Ve=ce&&ce.overrideNavigation,vt=Kd(De,ne,l),ut=(ce&&ce.flushSync)===!0;if(!vt){let ln=so(404,{pathname:ne.pathname}),{matches:Bn,route:tn}=Q3(De);Dr(),_e(ne,{matches:Bn,loaderData:{},errors:{[tn.id]:ln}},{flushSync:ut});return}if(P.initialized&&!N&&UK(P.location,ne)&&!(ce&&ce.submission&&Ho(ce.submission.formMethod))){_e(ne,{matches:vt},{flushSync:ut});return}k=new AbortController;let ht=Kp(t.history,ne,k.signal,ce&&ce.submission),Je,Lt;if(ce&&ce.pendingError)Lt={[rm(vt).route.id]:ce.pendingError};else if(ce&&ce.submission&&Ho(ce.submission.formMethod)){let ln=await Ye(ht,ne,ce.submission,vt,{replace:ce.replace,flushSync:ut});if(ln.shortCircuited)return;Je=ln.pendingActionData,Lt=ln.pendingActionError,Ve=OS(ne,ce.submission),ut=!1,ht=new Request(ht.url,{signal:ht.signal})}let{shortCircuited:an,loaderData:gt,errors:Pt}=await ke(ht,ne,vt,Ve,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,ut,Je,Lt);an||(k=null,_e(ne,sr({matches:vt},Je?{actionData:Je}:{},{loaderData:gt,errors:Pt})))}async function Ye(ee,ne,ce,De,Ve){Ve===void 0&&(Ve={}),Mt();let vt=GK(ne,ce);oe({navigation:vt},{flushSync:Ve.flushSync===!0});let ut,ht=CC(De,ne);if(!ht.route.action&&!ht.route.lazy)ut={type:rr.error,error:so(405,{method:ee.method,pathname:ne.pathname,routeId:ht.route.id})};else if(ut=await qp("action",ee,ht,De,s,i,l,c.v7_relativeSplatPath),ee.signal.aborted)return{shortCircuited:!0};if(qu(ut)){let Je;return Ve&&Ve.replace!=null?Je=Ve.replace:Je=ut.location===P.location.pathname+P.location.search,await Ge(P,ut,{submission:ce,replace:Je}),{shortCircuited:!0}}if(Zd(ut)){let Je=rm(De,ht.route.id);return(Ve&&Ve.replace)!==!0&&(R=fr.Push),{pendingActionData:{},pendingActionError:{[Je.route.id]:ut.error}}}if(Yu(ut))throw so(400,{type:"defer-action"});return{pendingActionData:{[ht.route.id]:ut.data}}}async function ke(ee,ne,ce,De,Ve,vt,ut,ht,Je,Lt,an){let gt=De||OS(ne,Ve),Pt=Ve||vt||tD(gt),ln=a||o,[Bn,tn]=W3(t.history,P,ce,Pt,ne,c.v7_partialHydration&&ht===!0,N,j,W,de,se,Z,ln,l,Lt,an);if(Dr(At=>!(ce&&ce.some(bn=>bn.route.id===At))||Bn&&Bn.some(bn=>bn.route.id===At)),X=++U,Bn.length===0&&tn.length===0){let At=wt();return _e(ne,sr({matches:ce,loaderData:{},errors:an||null},Lt?{actionData:Lt}:{},At?{fetchers:new Map(P.fetchers)}:{}),{flushSync:Je}),{shortCircuited:!0}}if(!D&&(!c.v7_partialHydration||!ht)){tn.forEach(bn=>{let Kr=P.fetchers.get(bn.key),Xn=Zp(void 0,Kr?Kr.data:void 0);P.fetchers.set(bn.key,Xn)});let At=Lt||P.actionData;oe(sr({navigation:gt},At?Object.keys(At).length===0?{actionData:null}:{actionData:At}:{},tn.length>0?{fetchers:new Map(P.fetchers)}:{}),{flushSync:Je})}tn.forEach(At=>{H.has(At.key)&&Le(At.key),At.controller&&H.set(At.key,At.controller)});let Cr=()=>tn.forEach(At=>Le(At.key));k&&k.signal.addEventListener("abort",Cr);let{results:hs,loaderResults:Zt,fetcherResults:Jt}=await fn(P.matches,ce,Bn,tn,ee);if(ee.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",Cr),tn.forEach(At=>H.delete(At.key));let vr=J3(hs);if(vr){if(vr.idx>=Bn.length){let At=tn[vr.idx-Bn.length].key;Z.add(At)}return await Ge(P,vr.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:br,errors:Wn}=K3(P,ce,Bn,Zt,an,tn,Jt,Me);Me.forEach((At,bn)=>{At.subscribe(Kr=>{(Kr||At.done)&&Me.delete(bn)})});let ds=wt(),Ii=Ot(X),Et=ds||Ii||tn.length>0;return sr({loaderData:br,errors:Wn},Et?{fetchers:new Map(P.fetchers)}:{})}function Oe(ee,ne,ce,De){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(ee)&&Le(ee);let Ve=(De&&De.unstable_flushSync)===!0,vt=a||o,ut=TC(P.location,P.matches,l,c.v7_prependBasename,ce,c.v7_relativeSplatPath,ne,De==null?void 0:De.relative),ht=Kd(vt,ut,l);if(!ht){Se(ee,ne,so(404,{pathname:ut}),{flushSync:Ve});return}let{path:Je,submission:Lt,error:an}=H3(c.v7_normalizeFormMethod,!0,ut,De);if(an){Se(ee,ne,an,{flushSync:Ve});return}let gt=CC(ht,Je);if(M=(De&&De.preventScrollReset)===!0,Lt&&Ho(Lt.formMethod)){rt(ee,ne,Je,gt,ht,Ve,Lt);return}se.set(ee,{routeId:ne,path:Je}),qe(ee,ne,Je,gt,ht,Ve,Lt)}async function rt(ee,ne,ce,De,Ve,vt,ut){if(Mt(),se.delete(ee),!De.route.action&&!De.route.lazy){let bn=so(405,{method:ut.formMethod,pathname:ce,routeId:ne});Se(ee,ne,bn,{flushSync:vt});return}let ht=P.fetchers.get(ee);pt(ee,HK(ut,ht),{flushSync:vt});let Je=new AbortController,Lt=Kp(t.history,ce,Je.signal,ut);H.set(ee,Je);let an=U,gt=await qp("action",Lt,De,Ve,s,i,l,c.v7_relativeSplatPath);if(Lt.signal.aborted){H.get(ee)===Je&&H.delete(ee);return}if(c.v7_fetcherPersist&&de.has(ee)){if(qu(gt)||Zd(gt)){pt(ee,yc(void 0));return}}else{if(qu(gt))if(H.delete(ee),X>an){pt(ee,yc(void 0));return}else return Z.add(ee),pt(ee,Zp(ut)),Ge(P,gt,{fetcherSubmission:ut});if(Zd(gt)){Se(ee,ne,gt.error);return}}if(Yu(gt))throw so(400,{type:"defer-action"});let Pt=P.navigation.location||P.location,ln=Kp(t.history,Pt,Je.signal),Bn=a||o,tn=P.navigation.state!=="idle"?Kd(Bn,P.navigation.location,l):P.matches;Yt(tn,"Didn't find any matches after fetcher action");let Cr=++U;Y.set(ee,Cr);let hs=Zp(ut,gt.data);P.fetchers.set(ee,hs);let[Zt,Jt]=W3(t.history,P,tn,ut,Pt,!1,N,j,W,de,se,Z,Bn,l,{[De.route.id]:gt.data},void 0);Jt.filter(bn=>bn.key!==ee).forEach(bn=>{let Kr=bn.key,Xn=P.fetchers.get(Kr),Xs=Zp(void 0,Xn?Xn.data:void 0);P.fetchers.set(Kr,Xs),H.has(Kr)&&Le(Kr),bn.controller&&H.set(Kr,bn.controller)}),oe({fetchers:new Map(P.fetchers)});let vr=()=>Jt.forEach(bn=>Le(bn.key));Je.signal.addEventListener("abort",vr);let{results:br,loaderResults:Wn,fetcherResults:ds}=await fn(P.matches,tn,Zt,Jt,ln);if(Je.signal.aborted)return;Je.signal.removeEventListener("abort",vr),Y.delete(ee),H.delete(ee),Jt.forEach(bn=>H.delete(bn.key));let Ii=J3(br);if(Ii){if(Ii.idx>=Zt.length){let bn=Jt[Ii.idx-Zt.length].key;Z.add(bn)}return Ge(P,Ii.result)}let{loaderData:Et,errors:At}=K3(P,P.matches,Zt,Wn,void 0,Jt,ds,Me);if(P.fetchers.has(ee)){let bn=yc(gt.data);P.fetchers.set(ee,bn)}Ot(Cr),P.navigation.state==="loading"&&Cr>X?(Yt(R,"Expected pending action"),k&&k.abort(),_e(P.navigation.location,{matches:tn,loaderData:Et,errors:At,fetchers:new Map(P.fetchers)})):(oe({errors:At,loaderData:Z3(P.loaderData,Et,tn,At),fetchers:new Map(P.fetchers)}),N=!1)}async function qe(ee,ne,ce,De,Ve,vt,ut){let ht=P.fetchers.get(ee);pt(ee,Zp(ut,ht?ht.data:void 0),{flushSync:vt});let Je=new AbortController,Lt=Kp(t.history,ce,Je.signal);H.set(ee,Je);let an=U,gt=await qp("loader",Lt,De,Ve,s,i,l,c.v7_relativeSplatPath);if(Yu(gt)&&(gt=await a$(gt,Lt.signal,!0)||gt),H.get(ee)===Je&&H.delete(ee),!Lt.signal.aborted){if(de.has(ee)){pt(ee,yc(void 0));return}if(qu(gt))if(X>an){pt(ee,yc(void 0));return}else{Z.add(ee),await Ge(P,gt);return}if(Zd(gt)){Se(ee,ne,gt.error);return}Yt(!Yu(gt),"Unhandled fetcher deferred data"),pt(ee,yc(gt.data))}}async function Ge(ee,ne,ce){let{submission:De,fetcherSubmission:Ve,replace:vt}=ce===void 0?{}:ce;ne.revalidate&&(N=!0);let ut=Vm(ee.location,ne.location,{_isRedirect:!0});if(Yt(ut,"Expected a location on the redirect navigation"),n){let Pt=!1;if(ne.reloadDocument)Pt=!0;else if(r$.test(ne.location)){const ln=t.history.createURL(ne.location);Pt=ln.origin!==e.location.origin||M0(ln.pathname,l)==null}if(Pt){vt?e.location.replace(ne.location):e.location.assign(ne.location);return}}k=null;let ht=vt===!0?fr.Replace:fr.Push,{formMethod:Je,formAction:Lt,formEncType:an}=ee.navigation;!De&&!Ve&&Je&&Lt&&an&&(De=tD(ee.navigation));let gt=De||Ve;if(OK.has(ne.status)&&gt&&Ho(gt.formMethod))await we(ht,ut,{submission:sr({},gt,{formAction:ne.location}),preventScrollReset:M});else{let Pt=OS(ut,De);await we(ht,ut,{overrideNavigation:Pt,fetcherSubmission:Ve,preventScrollReset:M})}}async function fn(ee,ne,ce,De,Ve){let vt=await Promise.all([...ce.map(Je=>qp("loader",Ve,Je,ne,s,i,l,c.v7_relativeSplatPath)),...De.map(Je=>Je.matches&&Je.match&&Je.controller?qp("loader",Kp(t.history,Je.path,Je.controller.signal),Je.match,Je.matches,s,i,l,c.v7_relativeSplatPath):{type:rr.error,error:so(404,{pathname:Je.path})})]),ut=vt.slice(0,ce.length),ht=vt.slice(ce.length);return await Promise.all([eD(ee,ce,ut,ut.map(()=>Ve.signal),!1,P.loaderData),eD(ee,De.map(Je=>Je.match),ht,De.map(Je=>Je.controller?Je.controller.signal:null),!0)]),{results:vt,loaderResults:ut,fetcherResults:ht}}function Mt(){N=!0,j.push(...Dr()),se.forEach((ee,ne)=>{H.has(ne)&&(W.push(ne),Le(ne))})}function pt(ee,ne,ce){ce===void 0&&(ce={}),P.fetchers.set(ee,ne),oe({fetchers:new Map(P.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Se(ee,ne,ce,De){De===void 0&&(De={});let Ve=rm(P.matches,ne);Ke(ee),oe({errors:{[Ve.route.id]:ce},fetchers:new Map(P.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function Ne(ee){return c.v7_fetcherPersist&&(xe.set(ee,(xe.get(ee)||0)+1),de.has(ee)&&de.delete(ee)),P.fetchers.get(ee)||LK}function Ke(ee){let ne=P.fetchers.get(ee);H.has(ee)&&!(ne&&ne.state==="loading"&&Y.has(ee))&&Le(ee),se.delete(ee),Y.delete(ee),Z.delete(ee),de.delete(ee),P.fetchers.delete(ee)}function je(ee){if(c.v7_fetcherPersist){let ne=(xe.get(ee)||0)-1;ne<=0?(xe.delete(ee),de.add(ee)):xe.set(ee,ne)}else Ke(ee);oe({fetchers:new Map(P.fetchers)})}function Le(ee){let ne=H.get(ee);Yt(ne,"Expected fetch controller: "+ee),ne.abort(),H.delete(ee)}function kt(ee){for(let ne of ee){let ce=Ne(ne),De=yc(ce.data);P.fetchers.set(ne,De)}}function wt(){let ee=[],ne=!1;for(let ce of Z){let De=P.fetchers.get(ce);Yt(De,"Expected fetcher: "+ce),De.state==="loading"&&(Z.delete(ce),ee.push(ce),ne=!0)}return kt(ee),ne}function Ot(ee){let ne=[];for(let[ce,De]of Y)if(De<ee){let Ve=P.fetchers.get(ce);Yt(Ve,"Expected fetcher: "+ce),Ve.state==="loading"&&(Le(ce),Y.delete(ce),ne.push(ce))}return kt(ne),ne.length>0}function Be(ee,ne){let ce=P.blockers.get(ee)||Yp;return he.get(ee)!==ne&&he.set(ee,ne),ce}function Tt(ee){P.blockers.delete(ee),he.delete(ee)}function Gt(ee,ne){let ce=P.blockers.get(ee)||Yp;Yt(ce.state==="unblocked"&&ne.state==="blocked"||ce.state==="blocked"&&ne.state==="blocked"||ce.state==="blocked"&&ne.state==="proceeding"||ce.state==="blocked"&&ne.state==="unblocked"||ce.state==="proceeding"&&ne.state==="unblocked","Invalid blocker state transition: "+ce.state+" -> "+ne.state);let De=new Map(P.blockers);De.set(ee,ne),oe({blockers:De})}function on(ee){let{currentLocation:ne,nextLocation:ce,historyAction:De}=ee;if(he.size===0)return;he.size>1&&Jc(!1,"A router only supports one blocker at a time");let Ve=Array.from(he.entries()),[vt,ut]=Ve[Ve.length-1],ht=P.blockers.get(vt);if(!(ht&&ht.state==="proceeding")&&ut({currentLocation:ne,nextLocation:ce,historyAction:De}))return vt}function Dr(ee){let ne=[];return Me.forEach((ce,De)=>{(!ee||ee(De))&&(ce.cancel(),ne.push(De),Me.delete(De))}),ne}function Gi(ee,ne,ce){if(f=ee,m=ne,g=ce||null,!y&&P.navigation===MS){y=!0;let De=Ws(P.location,P.matches);De!=null&&oe({restoreScrollPosition:De})}return()=>{f=null,m=null,g=null}}function Io(ee,ne){return g&&g(ee,ne.map(De=>lK(De,P.loaderData)))||ee.key}function fa(ee,ne){if(f&&m){let ce=Io(ee,ne);f[ce]=m()}}function Ws(ee,ne){if(f){let ce=Io(ee,ne),De=f[ce];if(typeof De=="number")return De}return null}function us(ee){s={},a=SC(ee,i,void 0,s)}return T={get basename(){return l},get future(){return c},get state(){return P},get routes(){return o},get window(){return e},initialize:le,subscribe:me,enableScrollRestoration:Gi,navigate:pe,fetch:Oe,revalidate:Pe,createHref:ee=>t.history.createHref(ee),encodeLocation:ee=>t.history.encodeLocation(ee),getFetcher:Ne,deleteFetcher:je,dispose:ae,getBlocker:Be,deleteBlocker:Tt,_internalFetchControllers:H,_internalActiveDeferreds:Me,_internalSetRoutes:us},T}function NK(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function TC(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let u=e$(i||".",J6(l,s),M0(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Q2(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Vc([n,u.pathname])),I0(u)}function H3(t,e,n,r){if(!r||!NK(r))return{path:n};if(r.formMethod&&!VK(r.formMethod))return{path:n,error:so(405,{method:r.formMethod})};let i=()=>({path:n,error:so(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=o$(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ho(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,m)=>{let[y,x]=m;return""+g+y+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Ho(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Yt(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=PC(r.formData),c=r.formData;else if(r.body instanceof FormData)l=PC(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=q3(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=q3(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ho(u.formMethod))return{path:n,submission:u};let h=rl(n);return e&&h.search&&Q2(h.search)&&l.append("index",""),h.search="?"+l,{path:I0(h),submission:u}}function BK(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function W3(t,e,n,r,i,s,o,a,l,c,u,h,f,g,m,y){let x=y?Object.values(y)[0]:m?Object.values(m)[0]:void 0,b=t.createURL(e.location),w=t.createURL(i),v=y?Object.keys(y)[0]:void 0,T=BK(n,v).filter((R,M)=>{let{route:k}=R;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(FK(e.loaderData,e.matches[M],R)||a.some(I=>I===R.route.id))return!0;let O=e.matches[M],F=R;return X3(R,sr({currentUrl:b,currentParams:O.params,nextUrl:w,nextParams:F.params},r,{actionResult:x,defaultShouldRevalidate:o||b.pathname+b.search===w.pathname+w.search||b.search!==w.search||s$(O,F)}))}),P=[];return u.forEach((R,M)=>{if(s||!n.some(D=>D.route.id===R.routeId)||c.has(M))return;let k=Kd(f,R.path,g);if(!k){P.push({key:M,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(M),F=CC(k,R.path),I=!1;h.has(M)?I=!1:l.includes(M)?I=!0:O&&O.state!=="idle"&&O.data===void 0?I=o:I=X3(F,sr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:x,defaultShouldRevalidate:o})),I&&P.push({key:M,routeId:R.routeId,path:R.path,matches:k,match:F,controller:new AbortController})}),[T,P]}function FK(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function s$(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function X3(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Y3(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Yt(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Jc(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!oK.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,sr({},e(i),{lazy:void 0}))}async function qp(t,e,n,r,i,s,o,a,l){l===void 0&&(l={});let c,u,h,f=y=>{let x,b=new Promise((w,v)=>x=v);return h=()=>x(),e.signal.addEventListener("abort",h),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let x,b=await Promise.all([f(y).catch(w=>{x=w}),Y3(n.route,s,i)]);if(x)throw x;u=b[0]}else if(await Y3(n.route,s,i),y=n.route[t],y)u=await f(y);else if(t==="action"){let x=new URL(e.url),b=x.pathname+x.search;throw so(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:rr.data,data:void 0};else if(y)u=await f(y);else{let x=new URL(e.url),b=x.pathname+x.search;throw so(404,{pathname:b})}Yt(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){c=rr.error,u=y}finally{h&&e.signal.removeEventListener("abort",h)}if(jK(u)){let y=u.status;if(MK.has(y)){let b=u.headers.get("Location");if(Yt(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!r$.test(b))b=TC(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,a);else if(!l.isStaticRequest){let w=new URL(e.url),v=b.startsWith("//")?new URL(w.protocol+b):new URL(b),E=M0(v.pathname,o)!=null;v.origin===w.origin&&E&&(b=v.pathname+v.search+v.hash)}if(l.isStaticRequest)throw u.headers.set("Location",b),u;return{type:rr.redirect,status:y,location:b,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===rr.error?rr.error:rr.data,response:u};let x;try{let b=u.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?u.body==null?x=null:x=await u.json():x=await u.text()}catch(b){return{type:rr.error,error:b}}return c===rr.error?{type:c,error:new Z2(y,u.statusText,x),headers:u.headers}:{type:rr.data,data:x,statusCode:u.status,headers:u.headers}}if(c===rr.error)return{type:c,error:u};if($K(u)){var g,m;return{type:rr.deferred,deferredData:u,statusCode:(g=u.init)==null?void 0:g.status,headers:((m=u.init)==null?void 0:m.headers)&&new Headers(u.init.headers)}}return{type:rr.data,data:u}}function Kp(t,e,n,r){let i=t.createURL(o$(e)).toString(),s={signal:n};if(r&&Ho(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=PC(r.formData):s.body=r.formData}return new Request(i,s)}function PC(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function q3(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function zK(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,h)=>{let f=e[h].route.id;if(Yt(!qu(u),"Cannot handle redirect results in processLoaderData"),Zd(u)){let g=rm(t,f),m=u.error;r&&(m=Object.values(r)[0],r=void 0),o=o||{},o[g.route.id]==null&&(o[g.route.id]=m),s[f]=void 0,l||(l=!0,a=t$(u.error)?u.error.status:500),u.headers&&(c[f]=u.headers)}else Yu(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function K3(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=zK(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:h,match:f,controller:g}=s[u];Yt(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let m=o[u];if(!(g&&g.signal.aborted))if(Zd(m)){let y=rm(t.matches,f==null?void 0:f.route.id);c&&c[y.route.id]||(c=sr({},c,{[y.route.id]:m.error})),t.fetchers.delete(h)}else if(qu(m))Yt(!1,"Unhandled fetcher revalidation redirect");else if(Yu(m))Yt(!1,"Unhandled fetcher deferred data");else{let y=yc(m.data);t.fetchers.set(h,y)}}return{loaderData:l,errors:c}}function Z3(t,e,n,r){let i=sr({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function rm(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Q3(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function so(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Z2(t||500,o,new Error(a),!0)}function J3(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(qu(n))return{result:n,idx:e}}}function o$(t){let e=typeof t=="string"?rl(t):t;return I0(sr({},e,{hash:""}))}function UK(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Yu(t){return t.type===rr.deferred}function Zd(t){return t.type===rr.error}function qu(t){return(t&&t.type)===rr.redirect}function $K(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function jK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function VK(t){return IK.has(t.toLowerCase())}function Ho(t){return AK.has(t.toLowerCase())}async function eD(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(h=>h.route.id===l.route.id),u=c!=null&&!s$(c,l)&&(s&&s[l.route.id])!==void 0;if(Yu(a)&&(i||u)){let h=r[o];Yt(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await a$(a,h,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function a$(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:rr.data,data:t.deferredData.unwrappedData}}catch(i){return{type:rr.error,error:i}}return{type:rr.data,data:t.deferredData.data}}}function Q2(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function CC(t,e){let n=typeof e=="string"?rl(e).search:e.search;if(t[t.length-1].route.index&&Q2(n||""))return t[t.length-1];let r=Q6(t);return r[r.length-1]}function tD(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function OS(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function GK(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Zp(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function HK(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function yc(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function WK(t,e){try{let n=t.sessionStorage.getItem(i$);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function XK(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(i$,JSON.stringify(n))}catch(r){Jc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gm.apply(this,arguments)}const Mx=C.createContext(null),l$=C.createContext(null),Ox=C.createContext(null),Lx=C.createContext(null),hp=C.createContext({outlet:null,matches:[],isDataRoute:!1}),c$=C.createContext(null);function kx(){return C.useContext(Lx)!=null}function u$(){return kx()||Yt(!1),C.useContext(Lx).location}function h$(t){C.useContext(Ox).static||C.useLayoutEffect(t)}function J2(){let{isDataRoute:t}=C.useContext(hp);return t?iZ():YK()}function YK(){kx()||Yt(!1);let t=C.useContext(Mx),{basename:e,future:n,navigator:r}=C.useContext(Ox),{matches:i}=C.useContext(hp),{pathname:s}=u$(),o=JSON.stringify(J6(i,n.v7_relativeSplatPath)),a=C.useRef(!1);return h$(()=>{a.current=!0}),C.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=e$(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Vc([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function qK(t,e,n,r){kx()||Yt(!1);let{navigator:i}=C.useContext(Ox),{matches:s}=C.useContext(hp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=u$(),u;if(e){var h;let x=typeof e=="string"?rl(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||Yt(!1),u=x}else u=c;let f=u.pathname||"/",g=l==="/"?f:f.slice(l.length)||"/",m=Kd(t,{pathname:g}),y=eZ(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Vc([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Vc([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&y?C.createElement(Lx.Provider,{value:{location:Gm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:fr.Pop}},y):y}function KK(){let t=rZ(),e=t$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,s)}const ZK=C.createElement(KK,null);class QK extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(hp.Provider,{value:this.props.routeContext},C.createElement(c$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JK(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(Mx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(hp.Provider,{value:e},r)}function eZ(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||Yt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:g}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let g,m=!1,y=null,x=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||ZK,l&&(c<0&&f===0?(sZ("route-fallback",!1),m=!0,x=null):c===f&&(m=!0,x=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),w=()=>{let v;return g?v=y:m?v=x:h.route.Component?v=C.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,C.createElement(JK,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(QK,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var d$=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(d$||{}),Rf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rf||{});function tZ(t){let e=C.useContext(Mx);return e||Yt(!1),e}function f$(t){let e=C.useContext(l$);return e||Yt(!1),e}function nZ(t){let e=C.useContext(hp);return e||Yt(!1),e}function eI(t){let e=nZ(),n=e.matches[e.matches.length-1];return n.route.id||Yt(!1),n.route.id}function O0(){let t=f$(Rf.UseLoaderData),e=eI(Rf.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function rZ(){var t;let e=C.useContext(c$),n=f$(Rf.UseRouteError),r=eI(Rf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iZ(){let{router:t}=tZ(d$.UseNavigateStable),e=eI(Rf.UseNavigateStable),n=C.useRef(!1);return h$(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Gm({fromRouteId:e},s)))},[t,e])}const nD={};function sZ(t,e,n){!e&&!nD[t]&&(nD[t]=!0)}function oZ(t){let{basename:e="/",children:n=null,location:r,navigationType:i=fr.Pop,navigator:s,static:o=!1,future:a}=t;kx()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:s,static:o,future:Gm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=rl(r));let{pathname:u="/",search:h="",hash:f="",state:g=null,key:m="default"}=r,y=C.useMemo(()=>{let x=M0(u,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:g,key:m},navigationType:i}},[l,u,h,f,g,m,i]);return y==null?null:C.createElement(Ox.Provider,{value:c},C.createElement(Lx.Provider,{children:n,value:y}))}new Promise(()=>{});function aZ(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:C.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:C.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:C.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gb(){return Gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gb.apply(this,arguments)}function lZ(t,e){return DK({basename:e==null?void 0:e.basename,future:Gb({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:rK({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||cZ(),routes:t,mapRouteProperties:aZ,window:e==null?void 0:e.window}).initialize()}function cZ(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Gb({},e,{errors:uZ(e.errors)})),e}function uZ(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Z2(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const hZ=C.createContext({isTransitioning:!1}),dZ=C.createContext(new Map),fZ="startTransition",rD=vb[fZ],pZ="flushSync",iD=nK[pZ];function gZ(t){rD?rD(t):t()}function Qp(t){iD?iD(t):t()}class mZ{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function yZ(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=C.useState(n.state),[o,a]=C.useState(),[l,c]=C.useState({isTransitioning:!1}),[u,h]=C.useState(),[f,g]=C.useState(),[m,y]=C.useState(),x=C.useRef(new Map),{v7_startTransition:b}=r||{},w=C.useCallback(R=>{b?gZ(R):R()},[b]),v=C.useCallback((R,M)=>{let{deletedFetchers:k,unstable_flushSync:O,unstable_viewTransitionOpts:F}=M;k.forEach(D=>x.current.delete(D)),R.fetchers.forEach((D,N)=>{D.data!==void 0&&x.current.set(N,D.data)});let I=n.window==null||typeof n.window.document.startViewTransition!="function";if(!F||I){O?Qp(()=>s(R)):w(()=>s(R));return}if(O){Qp(()=>{f&&(u&&u.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let D=n.window.document.startViewTransition(()=>{Qp(()=>s(R))});D.finished.finally(()=>{Qp(()=>{h(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),Qp(()=>g(D));return}f?(u&&u.resolve(),f.skipTransition(),y({state:R,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(a(R),c({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,f,u,x,w]);C.useLayoutEffect(()=>n.subscribe(v),[n,v]),C.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new mZ)},[l]),C.useEffect(()=>{if(u&&o&&n.window){let R=o,M=u.promise,k=n.window.document.startViewTransition(async()=>{w(()=>s(R)),await M});k.finished.finally(()=>{h(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(k)}},[w,o,u,n.window]),C.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),C.useEffect(()=>{!l.isTransitioning&&m&&(a(m.state),c({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),y(void 0))},[l.isTransitioning,m]),C.useEffect(()=>{},[]);let E=C.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,M,k)=>n.navigate(R,{state:M,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(R,M,k)=>n.navigate(R,{replace:!0,state:M,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),T=n.basename||"/",P=C.useMemo(()=>({router:n,navigator:E,static:!1,basename:T}),[n,E,T]);return C.createElement(C.Fragment,null,C.createElement(Mx.Provider,{value:P},C.createElement(l$.Provider,{value:i},C.createElement(dZ.Provider,{value:x.current},C.createElement(hZ.Provider,{value:l},C.createElement(oZ,{basename:T,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?C.createElement(vZ,{routes:n.routes,future:n.future,state:i}):e))))),null)}function vZ(t){let{routes:e,future:n,state:r}=t;return qK(e,void 0,r,n)}var sD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sD||(sD={}));var oD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oD||(oD={}));var p$,aD=Gl;p$=aD.createRoot,aD.hydrateRoot;let bZ=0;function L0(t,e){const n=`atom${++bZ}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=_Z,r.write=xZ),e&&(r.write=e),r}function _Z(t){return t(this)}function xZ(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const xv=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,lD=t=>"init"in t,cD=t=>!!t.write,Hb=new WeakMap,wZ=(t,e)=>{Hb.set(t,e),t.catch(()=>{}).finally(()=>Hb.delete(t))},uD=(t,e)=>{const n=Hb.get(t);n&&(Hb.delete(t),n(e))},hD=(t,e)=>{t.status="fulfilled",t.value=e},dD=(t,e)=>{t.status="rejected",t.reason=e},EZ=t=>typeof(t==null?void 0:t.then)=="function",Jp=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),fD=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),rd=t=>!!t&&"v"in t&&t.v instanceof Promise,SZ=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,wv=t=>{if("e"in t)throw t.e;return t.v},TZ=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;const s=M=>t.get(M),o=(M,k)=>{const O=t.get(M);if(t.set(M,k),n.has(M)||n.set(M,O),rd(O)){const F="v"in k?k.v instanceof Promise?k.v:Promise.resolve(k.v):Promise.reject(k.e);O.v!==F&&uD(O.v,F)}},a=(M,k,O,F)=>{const I=new Map(F?k.d:null);let D=!1;O.forEach((N,j)=>{!N&&xv(M,j)&&(N=k),N&&(I.set(j,N),k.d.get(j)!==N&&(D=!0))}),(D||k.d.size!==I.size)&&(k.d=I)},l=(M,k,O,F)=>{const I=s(M),D={d:(I==null?void 0:I.d)||new Map,v:k};if(O&&a(M,D,O,F),Jp(I,D)&&I.d===D.d)return I;if(rd(I)&&rd(D)&&SZ(I,D)){if(I.d===D.d)return I;D.v=I.v}return o(M,D),D},c=(M,k,O,F)=>{if(EZ(k)){let I;const D=()=>{const j=s(M);if(!rd(j)||j.v!==N)return;const W=l(M,N,O);e.has(M)&&j.d!==W.d&&T(M,W,j.d)},N=new Promise((j,W)=>{let H=!1;k.then(U=>{H||(H=!0,hD(N,U),j(U),D())},U=>{H||(H=!0,dD(N,U),W(U),D())}),I=U=>{H||(H=!0,U.then(X=>hD(N,X),X=>dD(N,X)),j(U))}});return N.orig=k,N.status="pending",wZ(N,j=>{j&&I(j),F==null||F()}),l(M,N,O,!0)}return l(M,k,O)},u=(M,k,O)=>{const F=s(M),I={d:(F==null?void 0:F.d)||new Map,e:k};return O&&a(M,I,O),fD(F,I)&&F.d===I.d?F:(o(M,I),I)},h=(M,k)=>{const O=s(M);if(!k&&O&&(e.has(M)||Array.from(O.d).every(([H,U])=>{if(xv(M,H))return!0;const X=h(H);return X===U||Jp(X,U)})))return O;const F=new Map;let I=!0;const D=H=>{if(xv(M,H)){const X=s(H);if(X)return F.set(H,X),wv(X);if(lD(H))return F.set(H,void 0),H.init;throw new Error("no atom init")}const U=h(H);return F.set(H,U),wv(U)};let N,j;const W={get signal(){return N||(N=new AbortController),N.signal},get setSelf(){return!j&&cD(M)&&(j=(...H)=>{if(!I)return w(M,...H)}),j}};try{const H=M.read(D,W);return c(M,H,F,()=>N==null?void 0:N.abort())}catch(H){return u(M,H,F)}finally{I=!1}},f=M=>wv(h(M)),g=M=>{let k=e.get(M);return k||(k=v(M)),k},m=(M,k)=>!k.l.size&&(!k.t.size||k.t.size===1&&k.t.has(M)),y=M=>{const k=e.get(M);k&&m(M,k)&&E(M)},x=M=>{const k=new Map,O=new WeakMap,F=N=>{var j;const W=new Set((j=e.get(N))==null?void 0:j.t);return n.forEach((H,U)=>{var X;(X=s(U))!=null&&X.d.has(N)&&W.add(U)}),W},I=N=>{F(N).forEach(j=>{j!==N&&(k.set(j,(k.get(j)||new Set).add(N)),O.set(j,(O.get(j)||0)+1),I(j))})};I(M);const D=N=>{F(N).forEach(j=>{var W;if(j!==N){let H=O.get(j);if(H&&O.set(j,--H),!H){let U=!!((W=k.get(j))!=null&&W.size);if(U){const X=s(j),Y=h(j,!0);U=!Jp(X,Y)}U||k.forEach(X=>X.delete(j))}D(j)}})};D(M)},b=(M,...k)=>{let O=!0;const F=N=>wv(h(N)),I=(N,...j)=>{let W;if(xv(M,N)){if(!lD(N))throw new Error("atom not writable");const H=s(N),U=c(N,j[0]);Jp(H,U)||x(N)}else W=b(N,...j);if(!O){const H=P()}return W},D=M.write(F,I,...k);return O=!1,D},w=(M,...k)=>{const O=b(M,...k),F=P();return O},v=(M,k,O)=>{var F;const I=O||[];(F=s(M))==null||F.d.forEach((N,j)=>{const W=e.get(j);W?W.t.add(M):j!==M&&v(j,M,I)}),h(M);const D={t:new Set(k&&[k]),l:new Set};if(e.set(M,D),cD(M)&&M.onMount){const{onMount:N}=M;I.push(()=>{const j=N((...W)=>w(M,...W));j&&(D.u=j)})}return O||I.forEach(N=>N()),D},E=M=>{var k;const O=(k=e.get(M))==null?void 0:k.u;O&&O(),e.delete(M);const F=s(M);F&&(rd(F)&&uD(F.v),F.d.forEach((I,D)=>{if(D!==M){const N=e.get(D);N&&(N.t.delete(M),m(D,N)&&E(D))}}))},T=(M,k,O)=>{const F=new Set(k.d.keys()),I=new Set;O==null||O.forEach((D,N)=>{if(F.has(N)){F.delete(N);return}I.add(N);const j=e.get(N);j&&j.t.delete(M)}),F.forEach(D=>{const N=e.get(D);N?N.t.add(M):e.has(M)&&v(D,M)}),I.forEach(D=>{const N=e.get(D);N&&m(D,N)&&E(D)})},P=()=>{let M;for(;n.size;){const k=Array.from(n);n.clear(),k.forEach(([O,F])=>{const I=s(O);if(I){const D=e.get(O);D&&I.d!==(F==null?void 0:F.d)&&T(O,I,F==null?void 0:F.d),D&&!(!rd(F)&&(Jp(F,I)||fD(F,I)))&&D.l.forEach(N=>N())}})}};return{get:f,set:w,sub:(M,k)=>{const O=g(M),F=P(),I=O.l;return I.add(k),()=>{I.delete(k),y(M)}}}};let LS;const PZ=()=>(LS||(LS=TZ()),LS),CZ=C.createContext(void 0),g$=t=>{const e=C.useContext(CZ);return(t==null?void 0:t.store)||e||PZ()},AZ=t=>typeof(t==null?void 0:t.then)=="function",RZ=An.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Dx(t,e){const n=g$(e),[[r,i,s],o]=C.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return C.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),C.useDebugValue(a),AZ(a)?RZ(a):a}function m$(t,e){const n=g$(e);return C.useCallback((...i)=>n.set(t,...i),[n,t])}function tI(t,e){return[Dx(t,e),m$(t,e)]}var nI=Symbol.for("immer-nothing"),im=Symbol.for("immer-draftable"),Fs=Symbol.for("immer-state");function Ti(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _h=Object.getPrototypeOf;function xh(t){return!!t&&!!t[Fs]}function eu(t){var e;return t?y$(t)||Array.isArray(t)||!!t[im]||!!((e=t.constructor)!=null&&e[im])||k0(t)||D0(t):!1}var IZ=Object.prototype.constructor.toString();function y$(t){if(!t||typeof t!="object")return!1;const e=_h(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===IZ}function If(t,e){wh(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function wh(t){const e=t[Fs];return e?e.type_:Array.isArray(t)?1:k0(t)?2:D0(t)?3:0}function Hm(t,e){return wh(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function kS(t,e){return wh(t)===2?t.get(e):t[e]}function v$(t,e,n){const r=wh(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function MZ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function k0(t){return t instanceof Map}function D0(t){return t instanceof Set}function Nu(t){return t.copy_||t.base_}function AC(t,e){if(k0(t))return new Map(t);if(D0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&y$(t))return _h(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[Fs];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(_h(t),n)}function rI(t,e=!1){return Nx(t)||xh(t)||!eu(t)||(wh(t)>1&&(t.set=t.add=t.clear=t.delete=OZ),Object.freeze(t),e&&If(t,(n,r)=>rI(r,!0))),t}function OZ(){Ti(2)}function Nx(t){return Object.isFrozen(t)}var RC={};function Eh(t){const e=RC[t];return e||Ti(0,t),e}function LZ(t,e){RC[t]||(RC[t]=e)}var Wm;function b$(){return Wm}function kZ(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pD(t,e){e&&(Eh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function IC(t){MC(t),t.drafts_.forEach(DZ),t.drafts_=null}function MC(t){t===Wm&&(Wm=t.parent_)}function gD(t){return Wm=kZ(Wm,t)}function DZ(t){const e=t[Fs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function mD(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Fs].modified_&&(IC(e),Ti(4)),eu(t)&&(t=Wb(e,t),e.parent_||Xb(e,t)),e.patches_&&Eh("Patches").generateReplacementPatches_(n[Fs].base_,t,e.patches_,e.inversePatches_)):t=Wb(e,n,[]),IC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==nI?t:void 0}function Wb(t,e,n){if(Nx(e))return e;const r=e[Fs];if(!r)return If(e,(i,s)=>yD(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Xb(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),If(s,(a,l)=>yD(t,r,i,a,l,n,o)),Xb(t,i,!1),n&&t.patches_&&Eh("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function yD(t,e,n,r,i,s,o){if(xh(i)){const a=s&&e&&e.type_!==3&&!Hm(e.assigned_,r)?s.concat(r):void 0,l=Wb(t,i,a);if(v$(n,r,l),xh(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(eu(i)&&!Nx(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Wb(t,i),(!e||!e.scope_.parent_)&&Xb(t,i)}}function Xb(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&rI(e,n)}function NZ(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:b$(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=iI;n&&(i=[r],s=Xm);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var iI={get(t,e){if(e===Fs)return t;const n=Nu(t);if(!Hm(n,e))return BZ(t,n,e);const r=n[e];return t.finalized_||!eu(r)?r:r===DS(t.base_,e)?(NS(t),t.copy_[e]=LC(r,t)):r},has(t,e){return e in Nu(t)},ownKeys(t){return Reflect.ownKeys(Nu(t))},set(t,e,n){const r=_$(Nu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=DS(Nu(t),e),s=i==null?void 0:i[Fs];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(MZ(n,i)&&(n!==void 0||Hm(t.base_,e)))return!0;NS(t),OC(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return DS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,NS(t),OC(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Nu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ti(11)},getPrototypeOf(t){return _h(t.base_)},setPrototypeOf(){Ti(12)}},Xm={};If(iI,(t,e)=>{Xm[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xm.deleteProperty=function(t,e){return Xm.set.call(this,t,e,void 0)};Xm.set=function(t,e,n){return iI.set.call(this,t[0],e,n,t[0])};function DS(t,e){const n=t[Fs];return(n?Nu(n):t)[e]}function BZ(t,e,n){var i;const r=_$(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function _$(t,e){if(!(e in t))return;let n=_h(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=_h(n)}}function OC(t){t.modified_||(t.modified_=!0,t.parent_&&OC(t.parent_))}function NS(t){t.copy_||(t.copy_=AC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var FZ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Ti(6),r!==void 0&&typeof r!="function"&&Ti(7);let i;if(eu(e)){const s=gD(this),o=LC(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?IC(s):MC(s)}return pD(s,r),mD(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===nI&&(i=void 0),this.autoFreeze_&&rI(i,!0),r){const s=[],o=[];Eh("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Ti(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){eu(t)||Ti(8),xh(t)&&(t=zZ(t));const e=gD(this),n=LC(t,void 0);return n[Fs].isManual_=!0,MC(e),n}finishDraft(t,e){const n=t&&t[Fs];(!n||!n.isManual_)&&Ti(9);const{scope_:r}=n;return pD(r,e),mD(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Eh("Patches").applyPatches_;return xh(t)?r(t,e):this.produce(t,i=>r(i,e))}};function LC(t,e){const n=k0(t)?Eh("MapSet").proxyMap_(t,e):D0(t)?Eh("MapSet").proxySet_(t,e):NZ(t,e);return(e?e.scope_:b$()).drafts_.push(n),n}function zZ(t){return xh(t)||Ti(10,t),x$(t)}function x$(t){if(!eu(t)||Nx(t))return t;const e=t[Fs];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=AC(t,e.scope_.immer_.useStrictShallowCopy_)}else n=AC(t,!0);return If(n,(r,i)=>{v$(n,r,x$(i))}),e&&(e.finalized_=!1),n}function w$(){const e="replace",n="add",r="remove";function i(f,g,m,y){switch(f.type_){case 0:case 2:return o(f,g,m,y);case 1:return s(f,g,m,y);case 3:return a(f,g,m,y)}}function s(f,g,m,y){let{base_:x,assigned_:b}=f,w=f.copy_;w.length<x.length&&([x,w]=[w,x],[m,y]=[y,m]);for(let v=0;v<x.length;v++)if(b[v]&&w[v]!==x[v]){const E=g.concat([v]);m.push({op:e,path:E,value:h(w[v])}),y.push({op:e,path:E,value:h(x[v])})}for(let v=x.length;v<w.length;v++){const E=g.concat([v]);m.push({op:n,path:E,value:h(w[v])})}for(let v=w.length-1;x.length<=v;--v){const E=g.concat([v]);y.push({op:r,path:E})}}function o(f,g,m,y){const{base_:x,copy_:b}=f;If(f.assigned_,(w,v)=>{const E=kS(x,w),T=kS(b,w),P=v?Hm(x,w)?e:n:r;if(E===T&&P===e)return;const R=g.concat(w);m.push(P===r?{op:P,path:R}:{op:P,path:R,value:T}),y.push(P===n?{op:r,path:R}:P===r?{op:n,path:R,value:h(E)}:{op:e,path:R,value:h(E)})})}function a(f,g,m,y){let{base_:x,copy_:b}=f,w=0;x.forEach(v=>{if(!b.has(v)){const E=g.concat([w]);m.push({op:r,path:E,value:v}),y.unshift({op:n,path:E,value:v})}w++}),w=0,b.forEach(v=>{if(!x.has(v)){const E=g.concat([w]);m.push({op:n,path:E,value:v}),y.unshift({op:r,path:E,value:v})}w++})}function l(f,g,m,y){m.push({op:e,path:[],value:g===nI?void 0:g}),y.push({op:e,path:[],value:f})}function c(f,g){return g.forEach(m=>{const{path:y,op:x}=m;let b=f;for(let T=0;T<y.length-1;T++){const P=wh(b);let R=y[T];typeof R!="string"&&typeof R!="number"&&(R=""+R),(P===0||P===1)&&(R==="__proto__"||R==="constructor")&&Ti(16+3),typeof b=="function"&&R==="prototype"&&Ti(16+3),b=kS(b,R),typeof b!="object"&&Ti(16+2,y.join("/"))}const w=wh(b),v=u(m.value),E=y[y.length-1];switch(x){case e:switch(w){case 2:return b.set(E,v);case 3:Ti(16);default:return b[E]=v}case n:switch(w){case 1:return E==="-"?b.push(v):b.splice(E,0,v);case 2:return b.set(E,v);case 3:return b.add(v);default:return b[E]=v}case r:switch(w){case 1:return b.splice(E,1);case 2:return b.delete(E);case 3:return b.delete(m.value);default:return delete b[E]}default:Ti(16+1,x)}}),f}function u(f){if(!eu(f))return f;if(Array.isArray(f))return f.map(u);if(k0(f))return new Map(Array.from(f.entries()).map(([m,y])=>[m,u(y)]));if(D0(f))return new Set(Array.from(f).map(u));const g=Object.create(_h(f));for(const m in f)g[m]=u(f[m]);return Hm(f,im)&&(g[im]=f[im]),g}function h(f){return xh(f)?u(f):f}LZ("Patches",{applyPatches_:c,generatePatches_:i,generateReplacementPatches_:l})}var zs=new FZ,E$=zs.produce,UZ=zs.produceWithPatches.bind(zs);zs.setAutoFreeze.bind(zs);zs.setUseStrictShallowCopy.bind(zs);var vD=zs.applyPatches.bind(zs);zs.createDraft.bind(zs);zs.finishDraft.bind(zs);const $Z=t=>({current:t,history:[],future:[],staging:[]});function jZ(t){const e=new Set,n=new Set,r=[],i=[];for(let s=t.length-1;s>=0;s--){const o=t[s];for(let a=t[s].patch.length-1;a>=0;a--){const l=o.patch[a],c=JSON.stringify(l.path);l.op==="replace"&&e.has(c)||(e.add(c),r.push(l))}}for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<t[s].patch.length;a++){const l=o.inversePatch[a],c=JSON.stringify(l.path);l.op==="replace"&&n.has(c)||(n.add(c),i.push(l))}}return r.length===0&&i.length===0?null:{patch:r.reverse(),inversePatch:i}}const Bx=(t,e=30)=>{const[{history:n,future:r,current:i,staging:s},o]=tI(t);return{set:(u,h=!0,f)=>{const[g,m,y]=UZ(i,u),x={patch:m,inversePatch:y,label:f};if(h){const b=jZ(s.length>0?s:[x]);if(b===null)return;o(w=>{const v=w.history.length>=e?[...w.history.slice(1),b]:[...w.history,b];return{current:g,history:v,future:[],staging:[]}})}else{const b=[...s,x];o(w=>({...w,current:g,staging:b}))}},undo:()=>{o(u=>{if(n.length===0||u.history.length===0)return u;const h=n[u.history.length-1];if(!h)return u;const f=vD(u.current,h.inversePatch);return{history:u.history.slice(0,-1),future:[h,...u.future],current:f,staging:[]}})},redo:()=>{o(u=>{if(r.length===0||u.future.length===0)return u;const h=u.future[0];if(!h)return u;const f=vD(u.current,h.patch);return{history:[...u.history,h],future:u.future.slice(1),current:f,staging:[]}})},history:n,future:r,staging:s,current:i}},Yo={ManufactureShare:"Share of Manufacturing",AgricultureShare:"Share of Agriculture",PriceIndex:"Price Index",NominalWage:"Nominal Wage",RealWage:"Real Wage"},VZ=[Yo.ManufactureShare,Yo.AgricultureShare,Yo.PriceIndex,Yo.NominalWage,Yo.RealWage];function GZ(t){const e=L0(t,(n,r,i)=>r(e,E$(n(e),typeof i=="function"?i:()=>i)));return e}function HZ(t,e){const n=m$(t,e);return C.useCallback(r=>n(E$(r)),[n])}function S$(t,e){return[Dx(t,e),HZ(t,e)]}function Ev(t,e){return t.toFixed(2).toString()}function Dl(t){return t===Number.POSITIVE_INFINITY||t>=1e9||isNaN(t)}const bD=(t,e,n)=>{const r=Math.log(t),i=Math.log(e),s=r+(1-n)*(i-r);return Math.exp(s)};var sI={exports:{}};sI.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),h=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&s(h,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(es,t,!1)})(sI);var WZ=sI.exports,oI={exports:{}};oI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(es,t,!1)})(oI);var XZ=oI.exports,aI={exports:{}};aI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(es,t,!1)})(aI);var YZ=aI.exports,lI={exports:{}};lI.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,h=l.i,f,g;return f=u[h],f^=f>>>7,g=f^f<<24,f=u[h+1&7],g^=f^f>>>10,f=u[h+3&7],g^=f^f>>>3,f=u[h+4&7],g^=f^f<<7,f=u[h+7&7],f=f^f<<13,g^=f^f<<9,u[h]=g,l.i=h+1&7,g};function c(u,h){var f,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,f=0;f<h.length;++f)g[f&7]=g[f&7]<<15^h.charCodeAt(f)+g[f+1&7]<<13;for(;g.length<8;)g.push(0);for(f=0;f<8&&g[f]===0;++f);for(f==8?g[7]=-1:g[f],u.x=g,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.x&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(es,t,!1)})(lI);var qZ=lI.exports,cI={exports:{}};cI.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,h=l.X,f=l.i,g,m;return l.w=u=u+1640531527|0,m=h[f+34&127],g=h[f=f+1&127],m^=m<<13,g^=g<<17,m^=m>>>15,g^=g>>>12,m=h[f]=m^g,l.i=f,m+(u^u>>>16)|0};function c(u,h){var f,g,m,y,x,b=[],w=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,w=Math.max(w,h.length)),m=0,y=-32;y<w;++y)h&&(g^=h.charCodeAt((y+32)%h.length)),y===0&&(x=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,y>=0&&(x=x+1640531527|0,f=b[y&127]^=g+x,m=f==0?m+1:0);for(m>=128&&(b[(h&&h.length||0)&127]=-1),m=127,y=4*128;y>0;--y)g=b[m+34&127],f=b[m=m+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,b[m]=g^f;u.w=x,u.X=b,u.i=m}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.X&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(es,t,!1)})(cI);var KZ=cI.exports,uI={exports:{}};uI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var h=l.b,f=l.c,g=l.d,m=l.a;return h=h<<25^h>>>7^f,f=f-g|0,g=g<<24^g>>>8^m,m=m-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-g|0,l.d=g<<16^f>>>16^m,l.a=m-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(es,t,!1)})(uI);var ZZ=uI.exports,T$={exports:{}};const QZ={},JZ=Object.freeze(Object.defineProperty({__proto__:null,default:QZ},Symbol.toStringTag,{value:"Module"})),P$=dn(JZ);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,h=i-1,f;function g(E,T,P){var R=[];T=T==!0?{entropy:!0}:T||{};var M=b(x(T.entropy?[E,v(n)]:E??w(),3),R),k=new m(R),O=function(){for(var F=k.g(s),I=l,D=0;F<c;)F=(F+D)*i,I*=i,D=k.g(1);for(;F>=u;)F/=2,I/=2,D>>>=1;return(F+D)/I};return O.int32=function(){return k.g(4)|0},O.quick=function(){return k.g(4)/4294967296},O.double=O,b(v(k.S),n),(T.pass||P||function(F,I,D,N){return N&&(N.S&&y(N,k),F.state=function(){return y(k,{})}),D?(r[a]=F,I):F})(O,M,"global"in T?T.global:this==r,T.state)}function m(E){var T,P=E.length,R=this,M=0,k=R.i=R.j=0,O=R.S=[];for(P||(E=[P++]);M<i;)O[M]=M++;for(M=0;M<i;M++)O[M]=O[k=h&k+E[M%P]+(T=O[M])],O[k]=T;(R.g=function(F){for(var I,D=0,N=R.i,j=R.j,W=R.S;F--;)I=W[N=h&N+1],D=D*i+W[h&(W[N]=W[j=h&j+I])+(W[j]=I)];return R.i=N,R.j=j,D})(i)}function y(E,T){return T.i=E.i,T.j=E.j,T.S=E.S.slice(),T}function x(E,T){var P=[],R=typeof E,M;if(T&&R=="object")for(M in E)try{P.push(x(E[M],T-1))}catch{}return P.length?P:R=="string"?E:E+"\0"}function b(E,T){for(var P=E+"",R,M=0;M<P.length;)T[h&M]=h&(R^=T[h&M]*19)+P.charCodeAt(M++);return v(T)}function w(){try{var E;return f&&(E=f.randomBytes)?E=E(i):(E=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(E)),v(E)}catch{var T=e.navigator,P=T&&T.plugins;return[+new Date,e,P,e.screen,v(n)]}}function v(E){return String.fromCharCode.apply(0,E)}if(b(r.random(),n),t.exports){t.exports=g;try{f=P$}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:es,[],Math)})(T$);var eQ=T$.exports,tQ=WZ,nQ=XZ,rQ=YZ,iQ=qZ,sQ=KZ,oQ=ZZ,Oh=eQ;Oh.alea=tQ;Oh.xor128=nQ;Oh.xorwow=rQ;Oh.xorshift7=iQ;Oh.xor4096=sQ;Oh.tychei=oQ;var aQ=Oh;const lQ=Rh(aQ);class C${constructor(e){e===void 0&&(e=Math.random().toString()),this.rng=lQ(e.toString())}random(){return this.rng.double()}}const cQ=new URLSearchParams(window.location.search).get("seed")||Math.random(),Yb=new C$(cQ),uQ=.05,qb=(t,e)=>e*(1+(t.random()-.5)*uQ),A$=({id:t,label:e,point:n,share:r,randomize:i})=>{const s=i?qb(Yb,r):r,o=i?qb(Yb,r):r;return{id:t,label:e,point:n,velocity:[0,0],manufactureShare:s,manufactureShare0:s,agricultureShare:o,priceIndex:1,priceIndex0:1,nominalWage:1,nominalWage0:1,realWage:1,income:1,income0:1}};function hQ(t,e){return t.priceIndex=1,t.priceIndex0=1,t.nominalWage=1,t.nominalWage0=1,t.realWage=1,t.income=1,t.income0=1,e&&0<e&&(t.manufactureShare=qb(Yb,1/e),t.agricultureShare=qb(Yb,1/e),t.manufactureShare0=t.manufactureShare),t}function dQ(t){t.income0=t.income,t.nominalWage0=t.nominalWage,t.priceIndex0=t.priceIndex,t.manufactureShare0=t.manufactureShare}function fQ(t,e){return t*e.manufactureShare*e.nominalWage+(1-t)*e.agricultureShare}function pQ(t,e,n,r,i){const s=t.map((o,a)=>{const l=n[i][a];return Dl(l)?0:o.manufactureShare*Math.pow(o.nominalWage0*l,1-e)}).reduce((o,a)=>o+a,0);return Math.pow(s,1/(1-e))}function gQ(t,e,n,r){const i=t.map((s,o)=>{const a=n[r][o];return Dl(a)?0:s.income0*Math.pow(a,1-e)*Math.pow(s.priceIndex0,e-1)}).reduce((s,o)=>s+o,0);return Math.pow(i,1/e)}function mQ(t,e){return e.nominalWage*Math.pow(e.priceIndex,-1*t)}function yQ(t,e,n,r){return r.manufactureShare>1/t/10?e*(r.realWage-n)*r.manufactureShare:1/t/10}let Sv;const vQ=new Uint8Array(16);function bQ(){if(!Sv&&(Sv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sv(vQ)}const ii=[];for(let t=0;t<256;++t)ii.push((t+256).toString(16).slice(1));function _Q(t,e=0){return ii[t[e+0]]+ii[t[e+1]]+ii[t[e+2]]+ii[t[e+3]]+"-"+ii[t[e+4]]+ii[t[e+5]]+"-"+ii[t[e+6]]+ii[t[e+7]]+"-"+ii[t[e+8]]+ii[t[e+9]]+"-"+ii[t[e+10]]+ii[t[e+11]]+ii[t[e+12]]+ii[t[e+13]]+ii[t[e+14]]+ii[t[e+15]]}const xQ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_D={randomUUID:xQ};function R$(t,e,n){if(_D.randomUUID&&!e&&!t)return _D.randomUUID();t=t||{};const r=t.random||(t.rng||bQ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return _Q(r)}const dp=(t,e)=>{const n=[];for(let r=0;r<t;r++){const i=[];for(let s=0;s<t;s++)i.push(e?e(r,s):0);n.push(i)}return n};function wQ(t,e){const n=new Set(e),r=new Set(t.concat(e)),i=new Set(t.filter(s=>n.has(s)));return Array.from(r).filter(s=>!i.has(s))}const sm=(t,e)=>{e||(e=t-1,t=0);const n=[];for(let r=t;r<=e;r++)n.push(r);return n};function kC(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return i}else t[i].id<e?n=i+1:r=i-1}return-1}function Mf(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return t[i]}else t[i].id<e?n=i+1:r=i-1}return null}function EQ(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function xD(t){const e={};return t.forEach(([n,r])=>{e[n]=r}),e}var Yi=63710088e-1,SQ={centimeters:Yi*100,centimetres:Yi*100,degrees:Yi/111325,feet:Yi*3.28084,inches:Yi*39.37,kilometers:Yi/1e3,kilometres:Yi/1e3,meters:Yi,metres:Yi,miles:Yi/1609.344,millimeters:Yi*1e3,millimetres:Yi*1e3,nauticalmiles:Yi/1852,radians:1,yards:Yi*1.0936};function TQ(t,e){e===void 0&&(e="kilometers");var n=SQ[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Tv(t){var e=t%360;return e*Math.PI/180}function wD(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function PQ(t,e,n){n===void 0&&(n={});var r=wD(t),i=wD(e),s=Tv(i[1]-r[1]),o=Tv(i[0]-r[0]),a=Tv(r[1]),l=Tv(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return TQ(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var hI={exports:{}};hI.exports=Fx;hI.exports.default=Fx;function Fx(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=I$(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,h,f,g;if(r&&(s=MQ(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var m=n;m<i;m+=n)h=t[m],f=t[m+1],h<a&&(a=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return Ym(s,o,n,a,l,g,0),o}function I$(t,e,n,r,i){var s,o;if(i===BC(t,e,n,r)>0)for(s=e;s<n;s+=r)o=ED(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=ED(s,t[s],t[s+1],o);return o&&zx(o,o.next)&&(Km(o),o=o.next),o}function Sh(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(zx(n,n.next)||Kn(n.prev,n,n.next)===0)){if(Km(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Ym(t,e,n,r,i,s,o){if(t){!o&&s&&NQ(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?AQ(t,r,i,s):CQ(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Km(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=RQ(Sh(t),e,n),Ym(t,e,n,r,i,s,2)):o===2&&IQ(t,e,n,r,i,s):Ym(Sh(t),e,n,r,i,s,1);break}}}}function CQ(t){var e=t.prev,n=t,r=t.next;if(Kn(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c,m=r.next;m!==e;){if(m.x>=u&&m.x<=f&&m.y>=h&&m.y<=g&&Qd(i,a,s,l,o,c,m.x,m.y)&&Kn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function AQ(t,e,n,r){var i=t.prev,s=t,o=t.next;if(Kn(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,f=o.y,g=a<l?a<c?a:c:l<c?l:c,m=u<h?u<f?u:f:h<f?h:f,y=a>l?a>c?a:c:l>c?l:c,x=u>h?u>f?u:f:h>f?h:f,b=DC(g,m,e,n,r),w=DC(y,x,e,n,r),v=t.prevZ,E=t.nextZ;v&&v.z>=b&&E&&E.z<=w;){if(v.x>=g&&v.x<=y&&v.y>=m&&v.y<=x&&v!==i&&v!==o&&Qd(a,u,l,h,c,f,v.x,v.y)&&Kn(v.prev,v,v.next)>=0||(v=v.prevZ,E.x>=g&&E.x<=y&&E.y>=m&&E.y<=x&&E!==i&&E!==o&&Qd(a,u,l,h,c,f,E.x,E.y)&&Kn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;v&&v.z>=b;){if(v.x>=g&&v.x<=y&&v.y>=m&&v.y<=x&&v!==i&&v!==o&&Qd(a,u,l,h,c,f,v.x,v.y)&&Kn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;E&&E.z<=w;){if(E.x>=g&&E.x<=y&&E.y>=m&&E.y<=x&&E!==i&&E!==o&&Qd(a,u,l,h,c,f,E.x,E.y)&&Kn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function RQ(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!zx(i,s)&&M$(i,r,r.next,s)&&qm(i,s)&&qm(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Km(r),Km(r.next),r=t=s),r=r.next}while(r!==t);return Sh(r)}function IQ(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&zQ(o,a)){var l=O$(o,a);o=Sh(o,o.next),l=Sh(l,l.next),Ym(o,e,n,r,i,s,0),Ym(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function MQ(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=I$(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(FQ(c));for(i.sort(OQ),s=0;s<i.length;s++)n=LQ(i[s],n);return n}function OQ(t,e){return t.x-e.x}function LQ(t,e){var n=kQ(t,e);if(!n)return e;var r=O$(n,t);return Sh(r,r.next),Sh(n,n.next)}function kQ(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,h=1/0,f;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&Qd(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),qm(n,t)&&(f<h||f===h&&(n.x>o.x||n.x===o.x&&DQ(o,n)))&&(o=n,h=f)),n=n.next;while(n!==l);return o}function DQ(t,e){return Kn(t.prev,t,e.prev)<0&&Kn(e.next,t,t.next)<0}function NQ(t,e,n,r){var i=t;do i.z===0&&(i.z=DC(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,BQ(i)}function BQ(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function DC(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function FQ(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Qd(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function zQ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!UQ(t,e)&&(qm(t,e)&&qm(e,t)&&$Q(t,e)&&(Kn(t.prev,t,e.prev)||Kn(t,e.prev,e))||zx(t,e)&&Kn(t.prev,t,t.next)>0&&Kn(e.prev,e,e.next)>0)}function Kn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zx(t,e){return t.x===e.x&&t.y===e.y}function M$(t,e,n,r){var i=Cv(Kn(t,e,n)),s=Cv(Kn(t,e,r)),o=Cv(Kn(n,r,t)),a=Cv(Kn(n,r,e));return!!(i!==s&&o!==a||i===0&&Pv(t,n,e)||s===0&&Pv(t,r,e)||o===0&&Pv(n,t,r)||a===0&&Pv(n,e,r))}function Pv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Cv(t){return t>0?1:t<0?-1:0}function UQ(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M$(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function qm(t,e){return Kn(t.prev,t,t.next)<0?Kn(t,e,t.next)>=0&&Kn(t,t.prev,e)>=0:Kn(t,e,t.prev)<0||Kn(t,t.next,e)<0}function $Q(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function O$(t,e){var n=new NC(t.i,t.x,t.y),r=new NC(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function ED(t,e,n,r){var i=new NC(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Km(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function NC(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Fx.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(BC(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(BC(t,c,u,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,m=r[a+2]*n;h+=Math.abs((t[f]-t[m])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[m+1]-t[f+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function BC(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Fx.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var jQ=hI.exports;const dI=Rh(jQ);var VQ=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},SD=typeof Symbol<"u"&&Symbol,GQ=VQ,HQ=function(){return typeof SD!="function"||typeof Symbol!="function"||typeof SD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:GQ()},TD={foo:{}},WQ=Object,XQ=function(){return{__proto__:TD}.foo===TD.foo&&!({__proto__:null}instanceof WQ)},YQ="Function.prototype.bind called on incompatible ",qQ=Object.prototype.toString,KQ=Math.max,ZQ="[object Function]",PD=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},QQ=function(e,n){for(var r=[],i=n||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},JQ=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},eJ=function(e){var n=this;if(typeof n!="function"||qQ.apply(n)!==ZQ)throw new TypeError(YQ+n);for(var r=QQ(arguments,1),i,s=function(){if(this instanceof i){var u=n.apply(this,PD(r,arguments));return Object(u)===u?u:this}return n.apply(e,PD(r,arguments))},o=KQ(0,n.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+JQ(a,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var c=function(){};c.prototype=n.prototype,i.prototype=new c,c.prototype=null}return i},tJ=eJ,fI=Function.prototype.bind||tJ,nJ=Function.prototype.call,rJ=Object.prototype.hasOwnProperty,iJ=fI,sJ=iJ.call(nJ,rJ),Wt,Of=SyntaxError,L$=Function,df=TypeError,BS=function(t){try{return L$('"use strict"; return ('+t+").constructor;")()}catch{}},rh=Object.getOwnPropertyDescriptor;if(rh)try{rh({},"")}catch{rh=null}var FS=function(){throw new df},oJ=rh?function(){try{return arguments.callee,FS}catch{try{return rh(arguments,"callee").get}catch{return FS}}}():FS,id=HQ(),aJ=XQ(),Vr=Object.getPrototypeOf||(aJ?function(t){return t.__proto__}:null),Ad={},lJ=typeof Uint8Array>"u"||!Vr?Wt:Vr(Uint8Array),ih={"%AggregateError%":typeof AggregateError>"u"?Wt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Wt:ArrayBuffer,"%ArrayIteratorPrototype%":id&&Vr?Vr([][Symbol.iterator]()):Wt,"%AsyncFromSyncIteratorPrototype%":Wt,"%AsyncFunction%":Ad,"%AsyncGenerator%":Ad,"%AsyncGeneratorFunction%":Ad,"%AsyncIteratorPrototype%":Ad,"%Atomics%":typeof Atomics>"u"?Wt:Atomics,"%BigInt%":typeof BigInt>"u"?Wt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Wt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Wt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Wt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Wt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Wt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Wt:FinalizationRegistry,"%Function%":L$,"%GeneratorFunction%":Ad,"%Int8Array%":typeof Int8Array>"u"?Wt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Wt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Wt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":id&&Vr?Vr(Vr([][Symbol.iterator]())):Wt,"%JSON%":typeof JSON=="object"?JSON:Wt,"%Map%":typeof Map>"u"?Wt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!id||!Vr?Wt:Vr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Wt:Promise,"%Proxy%":typeof Proxy>"u"?Wt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Wt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Wt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!id||!Vr?Wt:Vr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Wt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":id&&Vr?Vr(""[Symbol.iterator]()):Wt,"%Symbol%":id?Symbol:Wt,"%SyntaxError%":Of,"%ThrowTypeError%":oJ,"%TypedArray%":lJ,"%TypeError%":df,"%Uint8Array%":typeof Uint8Array>"u"?Wt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Wt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Wt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Wt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Wt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Wt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Wt:WeakSet};if(Vr)try{null.error}catch(t){var cJ=Vr(Vr(t));ih["%Error.prototype%"]=cJ}var uJ=function t(e){var n;if(e==="%AsyncFunction%")n=BS("async function () {}");else if(e==="%GeneratorFunction%")n=BS("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=BS("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Vr&&(n=Vr(i.prototype))}return ih[e]=n,n},CD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N0=fI,Kb=sJ,hJ=N0.call(Function.call,Array.prototype.concat),dJ=N0.call(Function.apply,Array.prototype.splice),AD=N0.call(Function.call,String.prototype.replace),Zb=N0.call(Function.call,String.prototype.slice),fJ=N0.call(Function.call,RegExp.prototype.exec),pJ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,gJ=/\\(\\)?/g,mJ=function(e){var n=Zb(e,0,1),r=Zb(e,-1);if(n==="%"&&r!=="%")throw new Of("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Of("invalid intrinsic syntax, expected opening `%`");var i=[];return AD(e,pJ,function(s,o,a,l){i[i.length]=a?AD(l,gJ,"$1"):o||s}),i},yJ=function(e,n){var r=e,i;if(Kb(CD,r)&&(i=CD[r],r="%"+i[0]+"%"),Kb(ih,r)){var s=ih[r];if(s===Ad&&(s=uJ(r)),typeof s>"u"&&!n)throw new df("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new Of("intrinsic "+e+" does not exist!")},Lh=function(e,n){if(typeof e!="string"||e.length===0)throw new df("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new df('"allowMissing" argument must be a boolean');if(fJ(/^%?[^%]*%?$/,e)===null)throw new Of("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=mJ(e),i=r.length>0?r[0]:"",s=yJ("%"+i+"%",n),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],dJ(r,hJ([0,1],c)));for(var u=1,h=!0;u<r.length;u+=1){var f=r[u],g=Zb(f,0,1),m=Zb(f,-1);if((g==='"'||g==="'"||g==="`"||m==='"'||m==="'"||m==="`")&&g!==m)throw new Of("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(l=!0),i+="."+f,o="%"+i+"%",Kb(ih,o))a=ih[o];else if(a!=null){if(!(f in a)){if(!n)throw new df("base intrinsic for "+e+" exists, but the property is not available.");return}if(rh&&u+1>=r.length){var y=rh(a,f);h=!!y,h&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[f]}else h=Kb(a,f),a=a[f];h&&!l&&(ih[o]=a)}}return a},k$={exports:{}},vJ=Lh,FC=vJ("%Object.defineProperty%",!0),zC=function(){if(FC)try{return FC({},"a",{value:1}),!0}catch{return!1}return!1};zC.hasArrayLengthDefineBug=function(){if(!zC())return null;try{return FC([],"length",{value:1}).length!==1}catch{return!0}};var D$=zC,bJ=Lh,X1=bJ("%Object.getOwnPropertyDescriptor%",!0);if(X1)try{X1([],"length")}catch{X1=null}var N$=X1,_J=D$(),pI=Lh,om=_J&&pI("%Object.defineProperty%",!0);if(om)try{om({},"a",{value:1})}catch{om=!1}var xJ=pI("%SyntaxError%"),sd=pI("%TypeError%"),RD=N$,wJ=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new sd("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new sd("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new sd("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new sd("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new sd("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new sd("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!RD&&RD(e,n);if(om)om(e,n,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[n]=r;else throw new xJ("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},B$=Lh,ID=wJ,EJ=D$(),MD=N$,OD=B$("%TypeError%"),SJ=B$("%Math.floor%"),TJ=function(e,n){if(typeof e!="function")throw new OD("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||SJ(n)!==n)throw new OD("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&MD){var o=MD(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(EJ?ID(e,"length",n,!0,!0):ID(e,"length",n)),e};(function(t){var e=fI,n=Lh,r=TJ,i=n("%TypeError%"),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(o,s),l=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new i("a function is required");var g=a(e,o,arguments);return r(g,1+c(0,f.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(k$);var PJ=k$.exports,F$=Lh,z$=PJ,CJ=z$(F$("String.prototype.indexOf")),AJ=function(e,n){var r=F$(e,!!n);return typeof r=="function"&&CJ(e,".prototype.")>-1?z$(r):r};const sh=.01;function Th(t,e,n){return t&&e?n?PQ(t,e,{units:"kilometers"}):Math.sqrt(((t[0]-e[0])*sh)**2+((t[1]-e[1])*sh)**2):Number.NaN}function RJ(t,e,n){const r=Mf(t,e),i=Mf(t,n);return Th(r==null?void 0:r.point,i==null?void 0:i.point,!1)}function U$(t,e){const n=t.locations.length/e;let r=t.locationSerialNumber;const i=sm(e).map(a=>{const l=1/sh/(2*Math.sin(Math.PI/e)),c=-1*(2*Math.PI*a)/e-Math.PI/2,u=l*Math.cos(c),h=l*Math.sin(c);if(a===0&&e===1)return{...t.locations[0],point:[0,0],manufactureShare:1,agricultureShare:1};if(a<t.locations.length){const f=t.locations[a];return{...f,point:[u,h],manufactureShare:n*f.manufactureShare,agricultureShare:n*f.agricultureShare}}else return A$({id:r++,label:R$(),point:[u,h],share:1/e,randomize:!0})}),s=t.parameterSet.units==="degrees",o=e===1?[]:sm(e).map(a=>{const[l,c]=a!==e-1?[i[a],i[a+1]]:[i[0],i[e-1]];return{source:l.id,target:c.id,distance:Th(l.point,c.point,s)}});return{locations:i,edges:o,locationSerialNumber:r,addedIndices:e>t.locations.length?sm(e-t.locations.length).map(a=>a+t.locations.length):[]}}function IJ(t,e,n,r){const i=t[t.length-1];return n.map(s=>({source:t[s].id,target:i.id,distance:Th(t[s].point,i.point,r)}))}const MJ=.5;function OJ(t,e,n){const r="_",i=new Set(e.map(c=>`${c.source}${r}${c.target}`)),s=[];for(let c=0;c<t.length;c++)for(let u=c+1;u<t.length;u++)i.has(`${c}${r}${u}`)||s.push(c+r+u);const o=new Set(t.map(c=>c.id)),a=EQ(s).filter((c,u)=>u<t.length*MJ).map(c=>{const[u,h]=c.split(r).map(g=>parseInt(g)),f=Th(t[u].point,t[h].point,n);return{source:t[u].id,target:t[h].id,distance:f}});a.forEach(c=>{o.delete(c.source),o.delete(c.target)}),o.size;const l=[...o].map(c=>{const u=t.filter(h=>h.id!==c).map(h=>({location:h,distance:Th(h.point,t[c].point,n)})).reduce((h,f)=>h===null||h.distance>f.distance?f:h,null);return u?c<(u==null?void 0:u.location.id)?{source:c,target:u==null?void 0:u.location.id,id:c,distance:u==null?void 0:u.distance}:{source:u==null?void 0:u.location.id,id:c,target:c,distance:u==null?void 0:u.distance}:null}).filter(c=>c!==null);return e.concat(a).concat(l)}function $$(t,e,n){const r=n!==void 0?n:t.locations.length+1,i=new C$(t.locations.length),s=t.locations.length/r,o=t.locations.map(x=>({...x,manufactureShare:x.manufactureShare*s,agricultureShare:x.agricultureShare*s}));let a=i.random()*2*Math.PI,l=0,c=1/sh;const u=[];let h=t.locationSerialNumber;for(let x=t.locations.length;x<r;x++){l=2*i.random()-.5,a+=2*Math.PI*(i.random()-.5)/2,c=Math.min(50,Math.max(400,c+l));const{x:b,y:w}=t.locations.length===0&&x===0?{x:0,y:0}:x<t.locations.length?{x:t.locations[x].point[0],y:t.locations[x].point[1]}:x==t.locations.length?{x:t.locations[t.locations.length-1].point[0]+c*Math.cos(a),y:t.locations[t.locations.length-1].point[1]+c*Math.sin(a)}:{x:u[x-t.locations.length-1].point[0]+c*Math.cos(a),y:u[x-t.locations.length-1].point[1]+c*Math.sin(a)},v=A$({id:h++,label:R$(),point:[b,w],share:1/r,randomize:!0});u.push(v)}const f=[...o,...u],g=t.parameterSet.units==="degrees",m=n===void 0?IJ(f,t.edges,e,g):OJ(f,t.edges,g),y=[...t.edges,...m];return{locations:f,edges:y,locationSerialNumber:h,addedIndices:sm(u.length).map(x=>x+o.length)}}const gI=(t,e,n)=>{switch(console.log(t),t.parameterSet.type){case"Racetrack":return U$(t,n);case"Graph":return $$(t,e,n);default:return{...t,addedIndices:[]}}};function LJ(t,e){const n=new Set(e.locations.filter((o,a)=>t<=a).map(o=>o.id)),r=e.locations.length/t,i=e.locations.filter((o,a)=>a<t).map(o=>({...o,manufactureShare:o.manufactureShare*r,agricultureShare:o.agricultureShare*r})),s=e.edges.filter(o=>!n.has(o.source)&&!n.has(o.target));return{locations:i,edges:s,locationSerialNumber:e.locationSerialNumber}}const kJ=(t,e)=>{switch(e.parameterSet.type){case"Racetrack":return U$(e,t);case"Graph":return LJ(t,e);default:throw new Error("invalid type: "+e.parameterSet.type)}},li={Racetrack:"Racetrack",Graph:"Graph",RealWorld:"RealWorld"},Lf={[li.Racetrack]:[{caseId:"Racetrack-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-1",title:"Case i",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Racetrack-2",title:"Case ii",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-3",title:"Case iii",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[li.Graph]:[{caseId:"Graph-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-1",title:"Case A",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Graph-2",title:"Case B",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Graph",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-3",title:"Case C",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[li.RealWorld]:[{caseId:"RealWorld-0",title:"IDE-GSM 0",description:"sample 0",type:"RealWorld",numLocations:4,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"},{caseId:"RealWorld-1",title:"IDE-GSM 1",description:"sample 1",type:"RealWorld",numLocations:10,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"}]},zS=window.location.hash,DJ=zS.startsWith("/"+li.Racetrack)?li.Racetrack:zS.startsWith("/"+li.Graph)?li.Graph:zS.startsWith("/"+li.RealWorld)?li.RealWorld:li.Racetrack,UC=Lf[DJ][0];w$();const US=gI({parameterSet:UC,locations:[],edges:[],locationSerialNumber:0},[],UC.numLocations),NJ={parameterSet:UC,locations:US.locations,edges:US.edges,locationSerialNumber:US.locationSerialNumber},BJ=$Z(NJ),oh=GZ(BJ),FJ=L0({adjacencyMatrix:[],distanceMatrix:[],predecessorMatrix:[],transportationCostMatrix:[]}),zJ=L0({viewportCenter:[3,0,0],focusedIndices:[],selectedIndices:[],draggingIndex:null,chartScale:1,chartType:Yo.ManufactureShare,autoLayoutFinished:!0}),UJ=async function(t){const e=t.params.projectType,n=t.params.uuid,r=parseFloat(t.params.zoom),i=parseFloat(t.params.y),s=parseFloat(t.params.x);return{uuid:n,type:e,y:i,x:s,zoom:r}};class j${constructor(e,n){this.numLocations=e,this.numEdges=n}getNumLocations(){return this.numLocations}getNumEdges(){return this.numEdges}getAdjacencyMatrix(e,n,r){return this.adjacencyMatrix?Promise.resolve(this.adjacencyMatrix):this.createAdjacencyMatrix(e,n,r)}async getDistanceMatrix(e,n,r){return this.distanceMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.distanceMatrix)}async getPredecessorMatrix(e,n,r){return this.predecessorMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.predecessorMatrix)}getTransportationCostMatrix(e,n,r){return this.transportationCostMatrix?Promise.resolve(this.transportationCostMatrix):this.createTransportationCostMatrix(e,n,r)}async updateAdjacencyMatrix(e,n,r){return this.adjacencyMatrix=void 0,this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r),adjacencyMatrix:await this.getAdjacencyMatrix(e,n,r)}}async updateDistanceAndPredecessorMatrix(e,n,r){return this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r)}}async updateTransportationCostMatrix(e,n,r){return this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r)}}}const $J=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let index = global_id.x;
    let totalSize = numVertices * numVertices;
    let items = max(1, totalSize / WORK_GROUP_SIZE);
    // 
    let start = index * items; // 
    let end = min((index + 1) * items, totalSize); // 

    for (var i: u32 = start; i < end; i++) {
        let rowIndex = i / numVertices;
        let colIndex = i % numVertices;
        if (rowIndex === colIndex) {
           adjacencyMatrix[i] = f32(0); // 0
        } else {
            adjacencyMatrix[i] = f32(1e10); // 1e10
        }
    }
}
`,jJ=()=>`
struct Vertex {
    x: f32,
    y: f32
};

struct Edge {
    start: u32,
    end: u32
};

fn distance(a: vec2<f32>, b:vec2<f32>) -> f32 {
    let dx: f32 = a.x - b.x;
    let dy: f32 = a.y - b.y;
    return sqrt(dx * dx + dy * dy) * ${sh};
}

fn distance4(ax: f32, ay: f32, bx: f32, by: f32) -> f32 {
    let dx: f32 = ax - bx;
    let dy: f32 = ay - by;
    return sqrt(dx * dx + dy * dy) * ${sh};
}

@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(1) var<uniform> numEdges: u32;
@group(0) @binding(2) var<storage, read> vertices: array<vec2<f32>>;
@group(0) @binding(3) var<storage, read> edges: array<u32>;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let edgeIndex: u32 = global_id.x;
    let edgeItems: u32 = max(1u, numEdges / WORK_GROUP_SIZE);
    let startEdgeIndex: u32 = edgeIndex * edgeItems; // 
    let endEdgeIndex: u32 = min((edgeIndex + 1u) * edgeItems, numEdges); // 

    for (var edgeIndex: u32 = startEdgeIndex; edgeIndex < endEdgeIndex; edgeIndex++) {
      //let edge = edges[edgeIndex * 2];
      //let startVertexIndex: u32 = edge.x;
      //let endVertexIndex: u32 = edge.y;
      //let edge = edges[edgeIndex * 2];
      let startVertexIndex: u32 = edges[edgeIndex * 2];
      let endVertexIndex: u32 = edges[edgeIndex * 2 + 1];
      
      let dx = vertices[startVertexIndex][0] - vertices[endVertexIndex][0];
      let dy = vertices[startVertexIndex][1] - vertices[endVertexIndex][1];
      let distance: f32 = sqrt(dx * dx + dy * dy) * ${sh};
      
      let matrixIndex1: u32 = (startVertexIndex * numVertices) + endVertexIndex;
      let matrixIndex2: u32 = (endVertexIndex * numVertices) + startVertexIndex;

      adjacencyMatrix[matrixIndex1] = distance;
      adjacencyMatrix[matrixIndex2] = distance;

/*
      adjacencyMatrix[edgeIndex*4+0u] = f32(startVertexIndex); 
      adjacencyMatrix[edgeIndex*4+1u] = f32(endVertexIndex);
      adjacencyMatrix[edgeIndex*4+2u] = f32(startVertexIndex * numVertices + endVertexIndex);
      adjacencyMatrix[edgeIndex*4+3u] = f32(endVertexIndex * numVertices + startVertexIndex);
      */
      //adjacencyMatrix[edgeIndex*4+3u] = distance;
    }
}
`,VJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(6) var<storage, read_write> predecessorMatrix: array<i32>;

const WORKGROUP_SIZE = 64u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let numElements = numVertices * numVertices;
    let numElementsPerThread: u32 = (numElements + WORKGROUP_SIZE - 1u) / WORKGROUP_SIZE;
    let startIndex: u32 = global_id.x * numElementsPerThread;
    let endIndex: u32 = min(startIndex + numElementsPerThread, numElements);

    // 
    for (var index: u32 = startIndex; index < endIndex; index++) {
        let i = index / numVertices;
        let j = index % numVertices;

        // distanceMatrixpredecessorMatrix
        if (i < numVertices && j < numVertices) {
            distanceMatrix[index] = adjacencyMatrix[index];
            predecessorMatrix[index] = i32(j);
        }
    }

    // Floyd-Warshall
    for (var k: u32 = 0; k < numVertices; k++) {
        workgroupBarrier(); // 

        for (var index: u32 = startIndex; index < endIndex; index++) {
            let i = index / numVertices;
            let j = index % numVertices;

            if (i < numVertices && j < numVertices) {
                let ik = i * numVertices + k;
                let kj = k * numVertices + j;
                let newDist = distanceMatrix[ik] + distanceMatrix[kj];

                if (newDist < distanceMatrix[index]) {
                    distanceMatrix[index] = newDist;
                    predecessorMatrix[index] = predecessorMatrix[ik];
                }
            }
        }
    }
}`,GJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer : array<f32>;

const WORKGROUP_SIZE = 1u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id : vec3<u32>, @builtin(local_invocation_id) local_id : vec3<u32>) {

    var max_value: f32 = -1e10;

    // 
    for (var i: u32 = 0; i < arrayLength(&distanceMatrix); i = i + 1) {
        let value = distanceMatrix[i];
        if (value !== 1e10 && value > max_value) {
            max_value = value;
        }
    }
    // 
    maxValueBuffer[0] = max_value;
}
`,HJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer: array<f32>;
@group(0) @binding(8) var<storage, read_write> transportationCostBuffer: array<f32>;
@group(0) @binding(9) var<storage, read_write> transportationCostMatrix: array<f32>;

@compute @workgroup_size(64)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {

  let i = global_id.x;
  if(distanceMatrix[i] != f32(1e10)) {
    let normalized = exp(transportationCostBuffer[0] * distanceMatrix[i] / maxValueBuffer[0]);
    transportationCostMatrix[i] = normalized;
  }else{
    transportationCostMatrix[i] = f32(1e10);
  }
}
 `,WJ=t=>t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:6,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:7,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:8,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage",minBindingSize:4}},{binding:9,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),XJ=async()=>{var e;const t=await((e=navigator.gpu)==null?void 0:e.requestAdapter());if(!t)throw new Error("GPU Adapter is not available");return await t.requestDevice()},LD=({device:t,vertexBuffer:e,edgeBuffer:n,transportationCostBuffer:r},i,s,o)=>{const a=new Map;i.forEach((u,h)=>{a.set(u.id,h)});const l=new Float32Array(i.length*2),c=new Uint32Array(s.length*2);if(l.set(i.flatMap(u=>u.point)),c.set(s.flatMap(u=>{const h=a.get(u.source),f=a.get(u.target);return[h!==void 0?h:-1,f!==void 0?f:-1]})),t.queue.writeBuffer(e,0,l),t.queue.writeBuffer(n,0,c),o!==void 0){const u=Math.log(o);t.queue.writeBuffer(r,0,new Float32Array([u]))}},YJ=async(t,e)=>{const n=await XJ(),r=WJ(n),i=n.createShaderModule({code:$J()}),s=n.createShaderModule({code:jJ()}),o=n.createShaderModule({code:VJ()}),a=n.createShaderModule({code:GJ()}),l=n.createShaderModule({code:HJ()}),c=t**2*4,u=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(u,0,new Uint32Array([t]));const h=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(h,0,new Uint32Array([e]));const f=n.createBuffer({size:t*2*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),g=n.createBuffer({size:Math.max(4,e*2*4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),m=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),y=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),x=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),b=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),w=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),v=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),E=new ArrayBuffer(t*4*2),T=new ArrayBuffer(Math.max(4,e*4*2)),P=n.createBindGroup({entries:[{binding:0,resource:{buffer:u}},{binding:1,resource:{buffer:h}},{binding:2,resource:{buffer:f}},{binding:3,resource:{buffer:g}},{binding:4,resource:{buffer:m}},{binding:5,resource:{buffer:y}},{binding:6,resource:{buffer:x}},{binding:7,resource:{buffer:b}},{binding:8,resource:{buffer:w}},{binding:9,resource:{buffer:v}}],layout:r}),R=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:i,entryPoint:"main"}}),M=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:s,entryPoint:"main"}}),k=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:o,entryPoint:"main"}}),O=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:a,entryPoint:"main"}}),F=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:l,entryPoint:"main"}});return{device:n,numVertices:t,numEdges:e,matrixSize:c,vertexData:E,edgeData:T,vertexBuffer:f,edgeBuffer:g,bindGroup:P,initializeAdjacencyMatrixShaderModule:i,createAdjacencyMatrixShaderModule:s,createDistanceAndPredecessorMatrixShaderModule:o,findMaxValueShaderModule:a,createTransportationCostMatrixShaderModule:l,adjacencyMatrixBuffer:m,distanceMatrixBuffer:y,predecessorMatrixBuffer:x,maxValueBuffer:b,transportationCostBuffer:w,transportationCostMatrixBuffer:v,initializeAdjacencyMatrixPipeline:R,createAdjacencyMatrixPipeline:M,createDistanceAndPredecessorMatrixPipeline:k,findMaxValuePipeline:O,createTransportationCostMatrixPipeline:F}},Zm=(t,e,n,r,i,s,o)=>{const a=t.createCommandEncoder(),l=a.beginComputePass();return l.setPipeline(r),l.setBindGroup(e,n),l.dispatchWorkgroups(i,s,o),l.end(),a},$S=t=>{const e=[Zm(t.device,0,t.bindGroup,t.initializeAdjacencyMatrixPipeline,Math.ceil(t.matrixSize/64)),Zm(t.device,0,t.bindGroup,t.createAdjacencyMatrixPipeline,Math.max(1,Math.ceil(t.numEdges/64)))],n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return e[1].copyBufferToBuffer(t.adjacencyMatrixBuffer,0,n,0,t.matrixSize),{adjacencyMatrixReadBuffer:n,gpuCommandBuffers:e.map(r=>r.finish())}},jS=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=dp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},kD=t=>{const e=Zm(t.device,0,t.bindGroup,t.createDistanceAndPredecessorMatrixPipeline,Math.ceil(t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.distanceMatrixBuffer,0,n,0,t.matrixSize),e.copyBufferToBuffer(t.predecessorMatrixBuffer,0,r,0,t.matrixSize);const i=e.finish();return{distanceMatrixReadBuffer:n,predecessorMatrixReadBuffer:r,gpuCommandBuffer:i}},DD=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=dp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},ND=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Int32Array(t.getMappedRange()),r=dp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},qJ=t=>{const e=Zm(t.device,0,t.bindGroup,t.findMaxValuePipeline,1),n=t.device.createBuffer({size:4,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.maxValueBuffer,0,n,0,4);const r=e.finish();return{maxValueReadBuffer:n,gpuCommandBuffer:r}},KJ=t=>{const e=Zm(t.device,0,t.bindGroup,t.createTransportationCostMatrixPipeline,Math.ceil(t.numVertices*t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.transportationCostMatrixBuffer,0,n,0,t.matrixSize);const r=e.finish();return{transportationCostMatrixReadBuffer:n,gpuCommandBuffer:r}},ZJ=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=dp(e,(i,s)=>n[i*e+s]);return t.unmap(),r};class QJ extends j${constructor(e,n){super(e,n)}async update(e,n,r){return(!this.resources||this.resources.numVertices!==e.length||this.resources.numEdges!==n.length)&&(this.resources=await YJ(e.length,n.length)),LD(this.resources,e,n,r),this.resources}async createAdjacencyMatrix(e,n,r){const i=await this.update(e,n,r),{gpuCommandBuffers:s,adjacencyMatrixReadBuffer:o}=$S(i);i.device.queue.submit(s);const a=await jS(o,i.numVertices);return this.adjacencyMatrix=a}async createDistanceAndPredecessorMatrix(e,n,r){const i=await this.update(e,n,r);LD(i,e,n,r);const{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=$S(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=kD(i);i.device.queue.submit(o.concat(c));const u=await jS(s,i.numVertices),h=await DD(a,i.numVertices),f=await ND(l,i.numVertices);return this.adjacencyMatrix=u,this.distanceMatrix=h,this.predecessorMatrix=f,Promise.resolve([h,f])}async createTransportationCostMatrix(e,n,r){const i=await this.update(e,n,r),{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=$S(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=kD(i),{maxValueReadBuffer:u,gpuCommandBuffer:h}=qJ(i),{transportationCostMatrixReadBuffer:f,gpuCommandBuffer:g}=KJ(i);i.device.queue.submit(o.concat(c).concat([h,g]));const m=await jS(s,i.numVertices),y=await DD(a,i.numVertices),x=await ND(l,i.numVertices),b=await ZJ(f,i.numVertices);return this.adjacencyMatrix=m,this.distanceMatrix=y,this.predecessorMatrix=x,this.transportationCostMatrix=b,Promise.resolve(b)}}const od=16;function BD(t){const e=t.length,n=new Array(e),r=new Array(e);for(let i=0;i<e;i++){n[i]=new Array(e),r[i]=new Array(e);for(let s=0;s<e;s++)n[i][s]=t[i][s],r[i][s]=s}for(let i=0;i<e;i+=od)for(let s=0;s<e;s+=od)for(let o=0;o<e;o+=od)for(let a=i;a<Math.min(e,i+od);a++)for(let l=s;l<Math.min(e,s+od);l++)for(let c=o;c<Math.min(e,o+od);c++)n[l][a]+n[a][c]<n[l][c]&&(n[l][c]=n[l][a]+n[a][c],r[l][c]=r[l][a]);for(let i=0;i<e;i++)for(let s=0;s<e;s++)for(let o=0;o<e;o++)n[s][i]+n[i][o]<n[s][o]&&(n[s][o]=n[s][i]+n[i][o],r[s][o]=r[s][i]);return[n,r]}function FD(t,e){const n=dp(t.length,(i,s)=>i!==s?Number.POSITIVE_INFINITY:0),r=new Map(t.map((i,s)=>[i.id,s]));return e.forEach(i=>{const s=i.distance||(i.distance=RJ(t,i.source,i.target)),o=r.get(i.source),a=r.get(i.target);o!==void 0&&a!==void 0&&(n[o][a]=s,n[a][o]=s)}),n}function zD(t,e){const n=t.length;let r=0;for(let o=0;o<n;o++)if(t&&o<t.length)for(let a=0;a<n;a++)a<t[o].length&&t[o][a]!==Number.POSITIVE_INFINITY&&(r=Math.max(t[o][a],r));const i=dp(n,(o,a)=>o!==a?Number.POSITIVE_INFINITY:0);if(r===0)return i;const s=Math.log(e);for(let o=0;o<n;o++)if(t&&o<t.length){for(let a=o;a<n;a++)if(a<t[o].length)if(t[o][a]!==Number.POSITIVE_INFINITY){const l=t[o][a]/r;i[a][o]=i[o][a]=Math.exp(s*l)}else i[a][o]=i[o][a]=Number.POSITIVE_INFINITY}return i}class UD extends j${createAdjacencyMatrix(e,n){return Promise.resolve(this.adjacencyMatrix=FD(e,n))}async createDistanceAndPredecessorMatrix(e,n,r){const[i,s]=BD(await this.getAdjacencyMatrix(e,n,r));return this.distanceMatrix=i,this.predecessorMatrix=s,Promise.resolve([this.distanceMatrix,this.predecessorMatrix])}async createTransportationCostMatrix(e,n,r){const i=zD(await this.getDistanceMatrix(e,n,r),r);return this.transportationCostMatrix=i,Promise.resolve(i)}async createMatrices(e,n,r){const i=FD(e,n),[s,o]=BD(i),a=zD(s,r);return this.adjacencyMatrix=i,this.distanceMatrix=s,this.predecessorMatrix=o,this.transportationCostMatrix=a,Promise.resolve({adjacencyMatrix:i,distanceMatrix:s,predecessorMatrix:o,transportationCostMatrix:a})}}const $C={GPUMatrixEngine:"GPUFloydWarshall",CPUMatrixEngine:"CPUFloydWarshall"},V$=$C.CPUMatrixEngine,JJ=new URLSearchParams(window.location.search),$D=JJ.get("engine")||V$,jD=(t,e)=>$D===$C.CPUMatrixEngine?new UD(t,e):$D===$C.GPUMatrixEngine?new QJ(t,e):new UD(t,e),eee={maxRowColLength:30,matrixEngineType:V$},tee=L0(eee);function nee(t){const e=t.map(n=>n.manufactureShare).reduce((n,r)=>n+r,0);t.forEach(n=>{n.manufactureShare=n.manufactureShare/e})}const ree=50;function iee(t,e){sm(ree).forEach(()=>{t.locations.forEach((r,i)=>{dQ(r)}),t.locations.forEach((r,i)=>{r.income=fQ(t.parameterSet.manufactureShare,r)}),t.locations.forEach((r,i)=>{r.priceIndex=pQ(t.locations,t.parameterSet.elasticitySubstitution,e,r,i)}),t.locations.forEach((r,i)=>{r.nominalWage=gQ(t.locations,t.parameterSet.elasticitySubstitution,e,i)}),t.locations.forEach((r,i)=>{r.realWage=mQ(t.parameterSet.manufactureShare,r)})});const n=t.locations.map(r=>r.realWage*r.manufactureShare).reduce((r,i)=>r+i,0);t.locations.forEach((r,i)=>{r.manufactureShare+=yQ(t.parameterSet.numLocations,t.parameterSet.elasticitySubstitution,n,r)}),nee(t.locations)}function see(t,e){const[n,r]=C.useState(jD(t,e));return C.useEffect(()=>{r(jD(t,e))},[t,e]),n}const oee={black:"#000",white:"#fff"},Qm=oee,aee={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ad=aee,lee={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ld=lee,cee={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},cd=cee,uee={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ud=uee,hee={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},hd=hee,dee={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},eg=dee,fee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pee=fee;function tu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const B0="$$material";function Qe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var gee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,mee=kU(function(t){return gee.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),yee=o2(function(t,e){var n=t.styles,r=fx([n],void 0,C.useContext(gx)),i=C.useRef();return Nk(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),Nk(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&s2(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function mI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return fx(e)}var F0=function(){var e=mI.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},vee=mee,bee=function(e){return e!=="theme"},VD=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?vee:bee},GD=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},_ee=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return i2(n,r,i),VU(function(){return s2(n,r,i)}),null},xee=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=GD(e,n,r),l=a||VD(i),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{h.push(u[0][0]);for(var f=u.length,g=1;g<f;g++)h.push(u[g],u[0][g])}var m=o2(function(y,x,b){var w=c&&y.as||i,v="",E=[],T=y;if(y.theme==null){T={};for(var P in y)T[P]=y[P];T.theme=C.useContext(gx)}typeof y.className=="string"?v=UU(x.registered,E,y.className):y.className!=null&&(v=y.className+" ");var R=fx(h.concat(E),x.registered,T);v+=x.key+"-"+R.name,o!==void 0&&(v+=" "+o);var M=c&&a===void 0?VD(w):l,k={};for(var O in y)c&&O==="as"||M(O)&&(k[O]=y[O]);return k.className=v,k.ref=b,C.createElement(C.Fragment,null,C.createElement(_ee,{cache:x,serialized:R,isStringTag:typeof w=="string"}),C.createElement(w,k))});return m.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=h,m.__emotion_forwardProp=a,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(y,x){return t(y,$({},n,x,{shouldForwardProp:GD(m,x,!0)})).apply(void 0,h)},m}},wee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],It=xee.bind();wee.forEach(function(t){It[t]=It(t)});var G$={exports:{}},Eee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",See=Eee,Tee=See;function H$(){}function W$(){}W$.resetWarningCache=H$;var Pee=function(){function t(r,i,s,o,a,l){if(l!==Tee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:W$,resetWarningCache:H$};return n.PropTypes=n,n};G$.exports=Pee();var Hl=G$.exports;const Ln=Rh(Hl);function Cee(t){return t==null||Object.keys(t).length===0}function Aee(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Cee(i)?n:i):e;return Q.jsx(yee,{styles:r})}/**
 * @mui/styled-engine v5.15.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function X$(t,e){return It(t,e)}const Ree=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function wl(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Y$(t){if(!wl(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Y$(t[n])}),e}function is(t,e,n={clone:!0}){const r=n.clone?$({},t):t;return wl(t)&&wl(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(wl(e[i])&&i in t&&wl(t[i])?r[i]=is(t[i],e[i],n):n.clone?r[i]=wl(e[i])?Y$(e[i]):e[i]:r[i]=e[i])}),r}var En={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI=Symbol.for("react.element"),vI=Symbol.for("react.portal"),Ux=Symbol.for("react.fragment"),$x=Symbol.for("react.strict_mode"),jx=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Gx=Symbol.for("react.context"),Iee=Symbol.for("react.server_context"),Hx=Symbol.for("react.forward_ref"),Wx=Symbol.for("react.suspense"),Xx=Symbol.for("react.suspense_list"),Yx=Symbol.for("react.memo"),qx=Symbol.for("react.lazy"),Mee=Symbol.for("react.offscreen"),q$;q$=Symbol.for("react.module.reference");function Po(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case yI:switch(t=t.type,t){case Ux:case jx:case $x:case Wx:case Xx:return t;default:switch(t=t&&t.$$typeof,t){case Iee:case Gx:case Hx:case qx:case Yx:case Vx:return t;default:return e}}case vI:return e}}}En.ContextConsumer=Gx;En.ContextProvider=Vx;En.Element=yI;En.ForwardRef=Hx;En.Fragment=Ux;En.Lazy=qx;En.Memo=Yx;En.Portal=vI;En.Profiler=jx;En.StrictMode=$x;En.Suspense=Wx;En.SuspenseList=Xx;En.isAsyncMode=function(){return!1};En.isConcurrentMode=function(){return!1};En.isContextConsumer=function(t){return Po(t)===Gx};En.isContextProvider=function(t){return Po(t)===Vx};En.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===yI};En.isForwardRef=function(t){return Po(t)===Hx};En.isFragment=function(t){return Po(t)===Ux};En.isLazy=function(t){return Po(t)===qx};En.isMemo=function(t){return Po(t)===Yx};En.isPortal=function(t){return Po(t)===vI};En.isProfiler=function(t){return Po(t)===jx};En.isStrictMode=function(t){return Po(t)===$x};En.isSuspense=function(t){return Po(t)===Wx};En.isSuspenseList=function(t){return Po(t)===Xx};En.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ux||t===jx||t===$x||t===Wx||t===Xx||t===Mee||typeof t=="object"&&t!==null&&(t.$$typeof===qx||t.$$typeof===Yx||t.$$typeof===Vx||t.$$typeof===Gx||t.$$typeof===Hx||t.$$typeof===q$||t.getModuleId!==void 0)};En.typeOf=Po;function $e(t){if(typeof t!="string")throw new Error(tu(7));return t.charAt(0).toUpperCase()+t.slice(1)}function jC(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function bI(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Oee(t,e){return()=>null}function Y1(t,e){var n,r;return C.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function or(t){return t&&t.ownerDocument||document}function nu(t){return or(t).defaultView||window}function Lee(t,e){return()=>null}function Qb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const kee=typeof window<"u"?C.useLayoutEffect:C.useEffect,Us=kee;let HD=0;function Dee(t){const[e,n]=C.useState(t),r=t||e;return C.useEffect(()=>{e==null&&(HD+=1,n(`mui-${HD}`))},[e]),r}const WD=vb["useId".toString()];function Kx(t){if(WD!==void 0){const e=WD();return t??e}return Dee(t)}function Nee(t,e,n,r,i){return null}function kf({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=C.useRef(t!==void 0),[s,o]=C.useState(e),a=i?t:s,l=C.useCallback(c=>{i||o(c)},[]);return[a,l]}function Pi(t){const e=C.useRef(t);return Us(()=>{e.current=t}),C.useRef((...n)=>(0,e.current)(...n)).current}function Hn(...t){return C.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Qb(n,e)})},t)}let Zx=!0,VC=!1,XD;const Bee={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Fee(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Bee[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function zee(t){t.metaKey||t.altKey||t.ctrlKey||(Zx=!0)}function VS(){Zx=!1}function Uee(){this.visibilityState==="hidden"&&VC&&(Zx=!0)}function $ee(t){t.addEventListener("keydown",zee,!0),t.addEventListener("mousedown",VS,!0),t.addEventListener("pointerdown",VS,!0),t.addEventListener("touchstart",VS,!0),t.addEventListener("visibilitychange",Uee,!0)}function jee(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Zx||Fee(e)}function Qx(){const t=C.useCallback(i=>{i!=null&&$ee(i.ownerDocument)},[]),e=C.useRef(!1);function n(){return e.current?(VC=!0,window.clearTimeout(XD),XD=window.setTimeout(()=>{VC=!1},100),e.current=!1,!0):!1}function r(i){return jee(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function K$(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function Z$(t){return C.Children.toArray(t).filter(e=>C.isValidElement(e))}const Vee={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Gee=Vee;function Jx(t,e){const n=$({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=$({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=$({},s),Object.keys(i).forEach(o=>{n[r][o]=Jx(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function $t(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const YD=t=>t,Hee=()=>{let t=YD;return{configure(e){t=e},generate(e){return t(e)},reset(){t=YD}}},Wee=Hee(),_I=Wee,Q$={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jt(t,e,n="Mui"){const r=Q$[e];return r?`${n}-${r}`:`${_I.generate(t)}-${e}`}function Ft(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=jt(t,i,n)}),r}function Rd(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Xee=["values","unit","step"],Yee=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>$({},n,{[r.key]:r.val}),{})};function qee(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Qe(t,Xee),s=Yee(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,g){const m=o.indexOf(g);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(m!==-1&&typeof e[o[m]]=="number"?e[o[m]]:g)-r/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function h(f){const g=o.indexOf(f);return g===0?a(o[1]):g===o.length-1?l(o[g]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return $({keys:o,values:s,up:a,down:l,between:c,only:u,not:h,unit:n},i)}const Kee={borderRadius:4},Zee=Kee;function am(t,e){return e?is(t,e,{clone:!1}):t}const xI={xs:0,sm:600,md:900,lg:1200,xl:1536},qD={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${xI[t]}px)`};function Nl(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||qD;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||qD;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||xI).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function Qee(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function Jee(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function ew(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Jb(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=ew(t,n)||r,e&&(i=e(i,r,t)),i}function yr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=ew(l,r)||{};return Nl(o,a,h=>{let f=Jb(c,i,h);return h===f&&typeof h=="string"&&(f=Jb(c,i,`${e}${h==="default"?"":$e(h)}`,h)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function ete(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const tte={m:"margin",p:"padding"},nte={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},KD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},rte=ete(t=>{if(t.length>2)if(KD[t])t=KD[t];else return[t];const[e,n]=t.split(""),r=tte[e],i=nte[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),wI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],EI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...wI,...EI];function z0(t,e,n,r){var i;const s=(i=ew(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function J$(t){return z0(t,"spacing",8)}function U0(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function ite(t,e){return n=>t.reduce((r,i)=>(r[i]=U0(e,n),r),{})}function ste(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=rte(n),s=ite(i,r),o=t[n];return Nl(t,o,s)}function ej(t,e){const n=J$(t.theme);return Object.keys(t).map(r=>ste(t,e,r,n)).reduce(am,{})}function tr(t){return ej(t,wI)}tr.propTypes={};tr.filterProps=wI;function nr(t){return ej(t,EI)}nr.propTypes={};nr.filterProps=EI;function ote(t=8){if(t.mui)return t;const e=J$({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function tw(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?am(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function fo(t){return typeof t!="number"?t:`${t}px solid`}function Co(t,e){return yr({prop:t,themeKey:"borders",transform:e})}const ate=Co("border",fo),lte=Co("borderTop",fo),cte=Co("borderRight",fo),ute=Co("borderBottom",fo),hte=Co("borderLeft",fo),dte=Co("borderColor"),fte=Co("borderTopColor"),pte=Co("borderRightColor"),gte=Co("borderBottomColor"),mte=Co("borderLeftColor"),yte=Co("outline",fo),vte=Co("outlineColor"),nw=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=z0(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:U0(e,r)});return Nl(t,t.borderRadius,n)}return null};nw.propTypes={};nw.filterProps=["borderRadius"];tw(ate,lte,cte,ute,hte,dte,fte,pte,gte,mte,nw,yte,vte);const rw=t=>{if(t.gap!==void 0&&t.gap!==null){const e=z0(t.theme,"spacing",8),n=r=>({gap:U0(e,r)});return Nl(t,t.gap,n)}return null};rw.propTypes={};rw.filterProps=["gap"];const iw=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=z0(t.theme,"spacing",8),n=r=>({columnGap:U0(e,r)});return Nl(t,t.columnGap,n)}return null};iw.propTypes={};iw.filterProps=["columnGap"];const sw=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=z0(t.theme,"spacing",8),n=r=>({rowGap:U0(e,r)});return Nl(t,t.rowGap,n)}return null};sw.propTypes={};sw.filterProps=["rowGap"];const bte=yr({prop:"gridColumn"}),_te=yr({prop:"gridRow"}),xte=yr({prop:"gridAutoFlow"}),wte=yr({prop:"gridAutoColumns"}),Ete=yr({prop:"gridAutoRows"}),Ste=yr({prop:"gridTemplateColumns"}),Tte=yr({prop:"gridTemplateRows"}),Pte=yr({prop:"gridTemplateAreas"}),Cte=yr({prop:"gridArea"});tw(rw,iw,sw,bte,_te,xte,wte,Ete,Ste,Tte,Pte,Cte);function ff(t,e){return e==="grey"?e:t}const Ate=yr({prop:"color",themeKey:"palette",transform:ff}),Rte=yr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ff}),Ite=yr({prop:"backgroundColor",themeKey:"palette",transform:ff});tw(Ate,Rte,Ite);function Cs(t){return t<=1&&t!==0?`${t*100}%`:t}const Mte=yr({prop:"width",transform:Cs}),SI=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||xI[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Cs(n)}};return Nl(t,t.maxWidth,e)}return null};SI.filterProps=["maxWidth"];const Ote=yr({prop:"minWidth",transform:Cs}),Lte=yr({prop:"height",transform:Cs}),kte=yr({prop:"maxHeight",transform:Cs}),Dte=yr({prop:"minHeight",transform:Cs});yr({prop:"size",cssProperty:"width",transform:Cs});yr({prop:"size",cssProperty:"height",transform:Cs});const Nte=yr({prop:"boxSizing"});tw(Mte,SI,Ote,Lte,kte,Dte,Nte);const Bte={border:{themeKey:"borders",transform:fo},borderTop:{themeKey:"borders",transform:fo},borderRight:{themeKey:"borders",transform:fo},borderBottom:{themeKey:"borders",transform:fo},borderLeft:{themeKey:"borders",transform:fo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:fo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:nw},color:{themeKey:"palette",transform:ff},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ff},backgroundColor:{themeKey:"palette",transform:ff},p:{style:nr},pt:{style:nr},pr:{style:nr},pb:{style:nr},pl:{style:nr},px:{style:nr},py:{style:nr},padding:{style:nr},paddingTop:{style:nr},paddingRight:{style:nr},paddingBottom:{style:nr},paddingLeft:{style:nr},paddingX:{style:nr},paddingY:{style:nr},paddingInline:{style:nr},paddingInlineStart:{style:nr},paddingInlineEnd:{style:nr},paddingBlock:{style:nr},paddingBlockStart:{style:nr},paddingBlockEnd:{style:nr},m:{style:tr},mt:{style:tr},mr:{style:tr},mb:{style:tr},ml:{style:tr},mx:{style:tr},my:{style:tr},margin:{style:tr},marginTop:{style:tr},marginRight:{style:tr},marginBottom:{style:tr},marginLeft:{style:tr},marginX:{style:tr},marginY:{style:tr},marginInline:{style:tr},marginInlineStart:{style:tr},marginInlineEnd:{style:tr},marginBlock:{style:tr},marginBlockStart:{style:tr},marginBlockEnd:{style:tr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:rw},rowGap:{style:sw},columnGap:{style:iw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Cs},maxWidth:{style:SI},minWidth:{transform:Cs},height:{transform:Cs},maxHeight:{transform:Cs},minHeight:{transform:Cs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},ow=Bte;function Fte(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function zte(t,e){return typeof t=="function"?t(e):t}function Ute(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=ew(i,c)||{};return h?h(o):Nl(o,r,m=>{let y=Jb(f,u,m);return m===y&&typeof m=="string"&&(y=Jb(f,u,`${n}${m==="default"?"":$e(m)}`,m)),l===!1?y:{[l]:y}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:ow;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=Qee(s.breakpoints),h=Object.keys(u);let f=u;return Object.keys(c).forEach(g=>{const m=zte(c[g],s);if(m!=null)if(typeof m=="object")if(o[g])f=am(f,t(g,m,s,o));else{const y=Nl({theme:s},m,x=>({[g]:x}));Fte(y,m)?f[g]=e({sx:m,theme:s}):f=am(f,y)}else f=am(f,t(g,m,s,o))}),Jee(h,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const tj=Ute();tj.filterProps=["sx"];const aw=tj,$te=["breakpoints","palette","spacing","shape"];function TI(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Qe(t,$te),a=qee(n),l=ote(i);let c=is({breakpoints:a,direction:"ltr",components:{},palette:$({mode:"light"},r),spacing:l,shape:$({},Zee,s)},o);return c=e.reduce((u,h)=>is(u,h),c),c.unstable_sxConfig=$({},ow,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return aw({sx:h,theme:this})},c}function jte(t){return Object.keys(t).length===0}function nj(t=null){const e=C.useContext(gx);return!e||jte(e)?t:e}const Vte=TI();function lw(t=Vte){return nj(t)}function Gte({styles:t,themeId:e,defaultTheme:n={}}){const r=lw(n),i=typeof t=="function"?t(e&&r[e]||r):t;return Q.jsx(Aee,{styles:i})}const Hte=["sx"],Wte=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:ow;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function rj(t){const{sx:e}=t,n=Qe(t,Hte),{systemProps:r,otherProps:i}=Wte(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return wl(a)?$({},r,a):r}:s=$({},r,e),$({},i,{sx:s})}function ij(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ij(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function at(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ij(t))&&(r&&(r+=" "),r+=e);return r}const Xte=["className","component"];function Yte(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=X$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(aw);return C.forwardRef(function(l,c){const u=lw(n),h=rj(l),{className:f,component:g="div"}=h,m=Qe(h,Xte);return Q.jsx(s,$({as:g,ref:c,className:at(f,i?i(r):r),theme:e&&u[e]||u},m))})}const qte=["variant"];function ZD(t){return t.length===0}function sj(t){const{variant:e}=t,n=Qe(t,qte);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=ZD(r)?t[i]:$e(t[i]):r+=`${ZD(r)?i:$e(i)}${$e(t[i].toString())}`}),r}const Kte=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Zte(t){return Object.keys(t).length===0}function Qte(t){return typeof t=="string"&&t.charCodeAt(0)>96}const Jte=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,e_=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=sj(r.props),n[i]=r.style}),n},ene=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),e_(n)},t_=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=$({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[sj(o.props)])),typeof o.props=="function"&&(s+=1)}),i},tne=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return t_(t,e,s)};function lm(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const nne=TI(),rne=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function q1({defaultTheme:t,theme:e,themeId:n}){return Zte(e)?t:e[n]||e}function ine(t){return t?(e,n)=>n[t]:null}const QD=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t($({},e,{theme:q1($({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=t_(e,e_(s),s);return[i,...o]}return i};function sne(t={}){const{themeId:e,defaultTheme:n=nne,rootShouldForwardProp:r=lm,slotShouldForwardProp:i=lm}=t,s=o=>aw($({},o,{theme:q1($({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Ree(o,E=>E.filter(T=>!(T!=null&&T.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:h,overridesResolver:f=ine(rne(c))}=a,g=Qe(a,Kte),m=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,y=h||!1;let x,b=lm;c==="Root"||c==="root"?b=r:c?b=i:Qte(o)&&(b=void 0);const w=X$(o,$({shouldForwardProp:b,label:x},g)),v=(E,...T)=>{const P=T?T.map(O=>{if(typeof O=="function"&&O.__emotion_real!==O)return F=>QD({styledArg:O,props:F,defaultTheme:n,themeId:e});if(wl(O)){let F=O,I;return O&&O.variants&&(I=O.variants,delete F.variants,F=D=>{let N=O;return t_(D,e_(I),I).forEach(W=>{N=is(N,W)}),N}),F}return O}):[];let R=E;if(wl(E)){let O;E&&E.variants&&(O=E.variants,delete R.variants,R=F=>{let I=E;return t_(F,e_(O),O).forEach(N=>{I=is(I,N)}),I})}else typeof E=="function"&&E.__emotion_real!==E&&(R=O=>QD({styledArg:E,props:O,defaultTheme:n,themeId:e}));l&&f&&P.push(O=>{const F=q1($({},O,{defaultTheme:n,themeId:e})),I=Jte(l,F);if(I){const D={};return Object.entries(I).forEach(([N,j])=>{D[N]=typeof j=="function"?j($({},O,{theme:F})):j}),f(O,D)}return null}),l&&!m&&P.push(O=>{const F=q1($({},O,{defaultTheme:n,themeId:e}));return tne(O,ene(l,F),F,l)}),y||P.push(s);const M=P.length-T.length;if(Array.isArray(E)&&M>0){const O=new Array(M).fill("");R=[...E,...O],R.raw=[...E.raw,...O]}const k=w(R,...P);return o.muiName&&(k.muiName=o.muiName),k};return w.withConfig&&(v.withConfig=w.withConfig),v}}function one(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Jx(e.components[n].defaultProps,r)}function ane({props:t,name:e,defaultTheme:n,themeId:r}){let i=lw(n);return r&&(i=i[r]||i),one({theme:i,name:e,props:t})}function PI(t,e=0,n=1){return Rd(t,e,n)}function lne(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ph(t){if(t.type)return t;if(t.charAt(0)==="#")return Ph(lne(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(tu(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(tu(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function cw(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function cne(t){t=Ph(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),cw({type:a,values:l})}function JD(t){t=Ph(t);let e=t.type==="hsl"||t.type==="hsla"?Ph(cne(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function une(t,e){const n=JD(t),r=JD(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Rn(t,e){return t=Ph(t),e=PI(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,cw(t)}function oj(t,e){if(t=Ph(t),e=PI(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return cw(t)}function aj(t,e){if(t=Ph(t),e=PI(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return cw(t)}function hne(t,e){return $({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const dne=["mode","contrastThreshold","tonalOffset"],eN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qm.white,default:Qm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},GS={text:{primary:Qm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function tN(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=aj(t.main,i):e==="dark"&&(t.dark=oj(t.main,s)))}function fne(t="light"){return t==="dark"?{main:cd[200],light:cd[50],dark:cd[400]}:{main:cd[700],light:cd[400],dark:cd[800]}}function pne(t="light"){return t==="dark"?{main:ld[200],light:ld[50],dark:ld[400]}:{main:ld[500],light:ld[300],dark:ld[700]}}function gne(t="light"){return t==="dark"?{main:ad[500],light:ad[300],dark:ad[700]}:{main:ad[700],light:ad[400],dark:ad[800]}}function mne(t="light"){return t==="dark"?{main:ud[400],light:ud[300],dark:ud[700]}:{main:ud[700],light:ud[500],dark:ud[900]}}function yne(t="light"){return t==="dark"?{main:hd[400],light:hd[300],dark:hd[700]}:{main:hd[800],light:hd[500],dark:hd[900]}}function vne(t="light"){return t==="dark"?{main:eg[400],light:eg[300],dark:eg[700]}:{main:"#ed6c02",light:eg[500],dark:eg[900]}}function bne(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Qe(t,dne),s=t.primary||fne(e),o=t.secondary||pne(e),a=t.error||gne(e),l=t.info||mne(e),c=t.success||yne(e),u=t.warning||vne(e);function h(y){return une(y,GS.text.primary)>=n?GS.text.primary:eN.text.primary}const f=({color:y,name:x,mainShade:b=500,lightShade:w=300,darkShade:v=700})=>{if(y=$({},y),!y.main&&y[b]&&(y.main=y[b]),!y.hasOwnProperty("main"))throw new Error(tu(11,x?` (${x})`:"",b));if(typeof y.main!="string")throw new Error(tu(12,x?` (${x})`:"",JSON.stringify(y.main)));return tN(y,"light",w,r),tN(y,"dark",v,r),y.contrastText||(y.contrastText=h(y.main)),y},g={dark:GS,light:eN};return is($({common:$({},Qm),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:pee,contrastThreshold:n,getContrastText:h,augmentColor:f,tonalOffset:r},g[e]),i)}const _ne=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function xne(t){return Math.round(t*1e5)/1e5}const nN={textTransform:"uppercase"},rN='"Roboto", "Helvetica", "Arial", sans-serif';function wne(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=rN,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,f=Qe(n,_ne),g=i/14,m=h||(b=>`${b/c*g}rem`),y=(b,w,v,E,T)=>$({fontFamily:r,fontWeight:b,fontSize:m(w),lineHeight:v},r===rN?{letterSpacing:`${xne(E/w)}em`}:{},T,u),x={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,nN),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,nN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return is($({htmlFontSize:c,pxToRem:m,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},x),f,{clone:!1})}const Ene=.2,Sne=.14,Tne=.12;function $n(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Ene})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Sne})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Tne})`].join(",")}const Pne=["none",$n(0,2,1,-1,0,1,1,0,0,1,3,0),$n(0,3,1,-2,0,2,2,0,0,1,5,0),$n(0,3,3,-2,0,3,4,0,0,1,8,0),$n(0,2,4,-1,0,4,5,0,0,1,10,0),$n(0,3,5,-1,0,5,8,0,0,1,14,0),$n(0,3,5,-1,0,6,10,0,0,1,18,0),$n(0,4,5,-2,0,7,10,1,0,2,16,1),$n(0,5,5,-3,0,8,10,1,0,3,14,2),$n(0,5,6,-3,0,9,12,1,0,3,16,2),$n(0,6,6,-3,0,10,14,1,0,4,18,3),$n(0,6,7,-4,0,11,15,1,0,4,20,3),$n(0,7,8,-4,0,12,17,2,0,5,22,4),$n(0,7,8,-4,0,13,19,2,0,5,24,4),$n(0,7,9,-4,0,14,21,2,0,5,26,4),$n(0,8,9,-5,0,15,22,2,0,6,28,5),$n(0,8,10,-5,0,16,24,2,0,6,30,5),$n(0,8,11,-5,0,17,26,2,0,6,32,5),$n(0,9,11,-5,0,18,28,2,0,7,34,6),$n(0,9,12,-6,0,19,29,2,0,7,36,6),$n(0,10,13,-6,0,20,31,3,0,8,38,7),$n(0,10,13,-6,0,21,33,3,0,8,40,7),$n(0,10,14,-6,0,22,35,3,0,8,42,7),$n(0,11,14,-7,0,23,36,3,0,9,44,8),$n(0,11,15,-7,0,24,38,3,0,9,46,8)],Cne=Pne,Ane=["duration","easing","delay"],Rne={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},lj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function iN(t){return`${Math.round(t)}ms`}function Ine(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Mne(t){const e=$({},Rne,t.easing),n=$({},lj,t.duration);return $({getAutoHeightDuration:Ine,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Qe(s,Ane),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:iN(o)} ${a} ${typeof l=="string"?l:iN(l)}`).join(",")}},t,{easing:e,duration:n})}const One={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Lne=One,kne=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function cj(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Qe(t,kne);if(t.vars)throw new Error(tu(18));const a=bne(r),l=TI(t);let c=is(l,{mixins:hne(l.breakpoints,n),palette:a,shadows:Cne.slice(),typography:wne(a,s),transitions:Mne(i),zIndex:$({},Lne),applyDarkStyles(u){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:u}:this.palette.mode==="dark"?u:{}}});return c=is(c,o),c=e.reduce((u,h)=>is(u,h),c),c.unstable_sxConfig=$({},ow,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return aw({sx:h,theme:this})},c}const Dne=cj(),uw=Dne;function cu(){const t=lw(uw);return t[B0]||t}function Ht({props:t,name:e}){return ane({props:t,name:e,defaultTheme:uw,themeId:B0})}const ls=t=>lm(t)&&t!=="classes",CI=lm,Nne=sne({themeId:B0,defaultTheme:uw,rootShouldForwardProp:ls}),Fe=Nne,Bne=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},sN=Bne;function Fne(t){return jt("MuiSvgIcon",t)}Ft("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const zne=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Une=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${$e(e)}`,`fontSize${$e(n)}`]};return $t(i,Fne,r)},$ne=Fe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${$e(n.color)}`],e[`fontSize${$e(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,h,f,g,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(h=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?h:{action:(g=(t.vars||t).palette)==null||(g=g.action)==null?void 0:g.active,disabled:(m=(t.vars||t).palette)==null||(m=m.action)==null?void 0:m.disabled,inherit:void 0}[e.color]}}),uj=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:f="0 0 24 24"}=r,g=Qe(r,zne),m=C.isValidElement(i)&&i.type==="svg",y=$({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:m}),x={};u||(x.viewBox=f);const b=Une(y);return Q.jsxs($ne,$({as:a,className:at(b.root,s),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n},x,g,m&&i.props,{ownerState:y,children:[m?i.props.children:i,h?Q.jsx("title",{children:h}):null]}))});uj.muiName="SvgIcon";const GC=uj;function St(t,e){function n(r,i){return Q.jsx(GC,$({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=GC.muiName,C.memo(C.forwardRef(n))}const jne={configure:t=>{_I.configure(t)}},Vne=Object.freeze(Object.defineProperty({__proto__:null,capitalize:$e,createChainedFunction:jC,createSvgIcon:St,debounce:bI,deprecatedPropType:Oee,isMuiElement:Y1,ownerDocument:or,ownerWindow:nu,requirePropFactory:Lee,setRef:Qb,unstable_ClassNameGenerator:jne,unstable_useEnhancedEffect:Us,unstable_useId:Kx,unsupportedProp:Nee,useControlled:kf,useEventCallback:Pi,useForkRef:Hn,useIsFocusVisible:Qx},Symbol.toStringTag,{value:"Module"}));function HC(t,e){return HC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HC(t,e)}function hj(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,HC(t,e)}const oN={disabled:!1},n_=An.createContext(null);var Gne=function(e){return e.scrollTop},Rg="unmounted",Bu="exited",Fu="entering",Id="entered",WC="exiting",Wl=function(t){hj(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Bu,s.appearStatus=Fu):l=Id:r.unmountOnExit||r.mountOnEnter?l=Rg:l=Bu,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Rg?{status:Bu}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Fu&&o!==Id&&(s=Fu):(o===Fu||o===Id)&&(s=WC)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Fu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Ag.findDOMNode(this);o&&Gne(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bu&&this.setState({status:Rg})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Ag.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),f=a?h.appear:h.enter;if(!i&&!o||oN.disabled){this.safeSetState({status:Id},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Fu},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:Id},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Ag.findDOMNode(this);if(!s||oN.disabled){this.safeSetState({status:Bu},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:WC},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Bu},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Ag.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Rg)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Qe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return An.createElement(n_.Provider,{value:null},typeof o=="function"?o(i,a):An.cloneElement(An.Children.only(o),a))},e}(An.Component);Wl.contextType=n_;Wl.propTypes={};function dd(){}Wl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dd,onEntering:dd,onEntered:dd,onExit:dd,onExiting:dd,onExited:dd};Wl.UNMOUNTED=Rg;Wl.EXITED=Bu;Wl.ENTERING=Fu;Wl.ENTERED=Id;Wl.EXITING=WC;const AI=Wl;function Hne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RI(t,e){var n=function(s){return e&&C.isValidElement(s)?e(s):s},r=Object.create(null);return t&&C.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Wne(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Ku(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Xne(t,e){return RI(t.children,function(n){return C.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ku(n,"appear",t),enter:Ku(n,"enter",t),exit:Ku(n,"exit",t)})})}function Yne(t,e,n){var r=RI(t.children),i=Wne(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(C.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=C.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=C.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ku(o,"exit",t),enter:Ku(o,"enter",t)}):!l&&a&&!u?i[s]=C.cloneElement(o,{in:!1}):l&&a&&C.isValidElement(c)&&(i[s]=C.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Ku(o,"exit",t),enter:Ku(o,"enter",t)}))}}),i}var qne=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Kne={component:"div",childFactory:function(e){return e}},II=function(t){hj(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Hne(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Xne(i,a):Yne(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=RI(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=$({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Qe(i,["component","childFactory"]),l=this.state.contextValue,c=qne(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?An.createElement(n_.Provider,{value:l},c):An.createElement(n_.Provider,{value:l},An.createElement(s,a,c))},e}(An.Component);II.propTypes={};II.defaultProps=Kne;const Zne=II,dj=t=>t.scrollTop;function Df(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function Qne(t){return jt("MuiCollapse",t)}Ft("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Jne=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],ere=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return $t(r,Qne,n)},tre=Fe("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>$({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&$({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),nre=Fe("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>$({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),rre=Fe("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>$({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),fj=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:h,onEntered:f,onEntering:g,onExit:m,onExited:y,onExiting:x,orientation:b="vertical",style:w,timeout:v=lj.standard,TransitionComponent:E=AI}=r,T=Qe(r,Jne),P=$({},r,{orientation:b,collapsedSize:a}),R=ere(P),M=cu(),k=C.useRef(),O=C.useRef(null),F=C.useRef(),I=typeof a=="number"?`${a}px`:a,D=b==="horizontal",N=D?"width":"height";C.useEffect(()=>()=>{clearTimeout(k.current)},[]);const j=C.useRef(null),W=Hn(n,j),H=he=>Te=>{if(he){const le=j.current;Te===void 0?he(le):he(le,Te)}},U=()=>O.current?O.current[D?"clientWidth":"clientHeight"]:0,X=H((he,Te)=>{O.current&&D&&(O.current.style.position="absolute"),he.style[N]=I,h&&h(he,Te)}),Y=H((he,Te)=>{const le=U();O.current&&D&&(O.current.style.position="");const{duration:ae,easing:me}=Df({style:w,timeout:v,easing:c},{mode:"enter"});if(v==="auto"){const oe=M.transitions.getAutoHeightDuration(le);he.style.transitionDuration=`${oe}ms`,F.current=oe}else he.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;he.style[N]=`${le}px`,he.style.transitionTimingFunction=me,g&&g(he,Te)}),Z=H((he,Te)=>{he.style[N]="auto",f&&f(he,Te)}),se=H(he=>{he.style[N]=`${U()}px`,m&&m(he)}),xe=H(y),de=H(he=>{const Te=U(),{duration:le,easing:ae}=Df({style:w,timeout:v,easing:c},{mode:"exit"});if(v==="auto"){const me=M.transitions.getAutoHeightDuration(Te);he.style.transitionDuration=`${me}ms`,F.current=me}else he.style.transitionDuration=typeof le=="string"?le:`${le}ms`;he.style[N]=I,he.style.transitionTimingFunction=ae,x&&x(he)}),Me=he=>{v==="auto"&&(k.current=setTimeout(he,F.current||0)),i&&i(j.current,he)};return Q.jsx(E,$({in:u,onEnter:X,onEntered:Z,onEntering:Y,onExit:se,onExited:xe,onExiting:de,addEndListener:Me,nodeRef:j,timeout:v==="auto"?null:v},T,{children:(he,Te)=>Q.jsx(tre,$({as:l,className:at(R.root,o,{entered:R.entered,exited:!u&&I==="0px"&&R.hidden}[he]),style:$({[D?"minWidth":"minHeight"]:I},w),ownerState:$({},P,{state:he}),ref:W},Te,{children:Q.jsx(nre,{ownerState:$({},P,{state:he}),className:R.wrapper,ref:O,children:Q.jsx(rre,{ownerState:$({},P,{state:he}),className:R.wrapperInner,children:s})})}))}))});fj.muiSupportAuto=!0;const pj=fj;function ire(t){return jt("MuiPaper",t)}Ft("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const sre=["className","component","elevation","square","variant"],ore=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return $t(s,ire,i)},are=Fe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return $({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&$({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Rn("#fff",sN(e.elevation))}, ${Rn("#fff",sN(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),lre=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=Qe(r,sre),u=$({},r,{component:s,elevation:o,square:a,variant:l}),h=ore(u);return Q.jsx(are,$({as:s,ownerState:u,className:at(h.root,i),ref:n},c))}),gj=lre;function Gc(t){return typeof t=="string"}function Ig(t,e,n){return t===void 0||Gc(t)?e:$({},e,{ownerState:$({},e.ownerState,n)})}function cre(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const ure={disableDefaultClasses:!1},hre=C.createContext(ure);function dre(t){const{disableDefaultClasses:e}=C.useContext(hre);return n=>e?"":t(n)}function cm(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function fre(t,e,n){return typeof t=="function"?t(e,n):t}function aN(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function pre(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const g=at(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),m=$({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),y=$({},n,i,r);return g.length>0&&(y.className=g),Object.keys(m).length>0&&(y.style=m),{props:y,internalRef:void 0}}const o=cm($({},i,r)),a=aN(r),l=aN(i),c=e(o),u=at(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h=$({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=$({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(h).length>0&&(f.style=h),{props:f,internalRef:c.ref}}const gre=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function wi(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Qe(t,gre),a=s?{}:fre(r,i),{props:l,internalRef:c}=pre($({},o,{externalSlotProps:a})),u=Hn(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Ig(n,$({},l,{ref:u}),i)}function mre(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,h]=C.useState(!1),f=at(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),g={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},m=at(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&h(!0),C.useEffect(()=>{if(!a&&l!=null){const y=setTimeout(l,c);return()=>{clearTimeout(y)}}},[l,a,c]),Q.jsx("span",{className:f,style:g,children:Q.jsx("span",{className:m})})}const yre=Ft("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ao=yre,vre=["center","classes","className"];let hw=t=>t,lN,cN,uN,hN;const XC=550,bre=80,_re=F0(lN||(lN=hw`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),xre=F0(cN||(cN=hw`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),wre=F0(uN||(uN=hw`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Ere=Fe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Sre=Fe(mre,{name:"MuiTouchRipple",slot:"Ripple"})(hN||(hN=hw`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ao.rippleVisible,_re,XC,({theme:t})=>t.transitions.easing.easeInOut,ao.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,ao.child,ao.childLeaving,xre,XC,({theme:t})=>t.transitions.easing.easeInOut,ao.childPulsate,wre,({theme:t})=>t.transitions.easing.easeInOut),Tre=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Qe(r,vre),[l,c]=C.useState([]),u=C.useRef(0),h=C.useRef(null);C.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const f=C.useRef(!1),g=C.useRef(0),m=C.useRef(null),y=C.useRef(null);C.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]);const x=C.useCallback(E=>{const{pulsate:T,rippleX:P,rippleY:R,rippleSize:M,cb:k}=E;c(O=>[...O,Q.jsx(Sre,{classes:{ripple:at(s.ripple,ao.ripple),rippleVisible:at(s.rippleVisible,ao.rippleVisible),ripplePulsate:at(s.ripplePulsate,ao.ripplePulsate),child:at(s.child,ao.child),childLeaving:at(s.childLeaving,ao.childLeaving),childPulsate:at(s.childPulsate,ao.childPulsate)},timeout:XC,pulsate:T,rippleX:P,rippleY:R,rippleSize:M},u.current)]),u.current+=1,h.current=k},[s]),b=C.useCallback((E={},T={},P=()=>{})=>{const{pulsate:R=!1,center:M=i||T.pulsate,fakeElement:k=!1}=T;if((E==null?void 0:E.type)==="mousedown"&&f.current){f.current=!1;return}(E==null?void 0:E.type)==="touchstart"&&(f.current=!0);const O=k?null:y.current,F=O?O.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,D,N;if(M||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)I=Math.round(F.width/2),D=Math.round(F.height/2);else{const{clientX:j,clientY:W}=E.touches&&E.touches.length>0?E.touches[0]:E;I=Math.round(j-F.left),D=Math.round(W-F.top)}if(M)N=Math.sqrt((2*F.width**2+F.height**2)/3),N%2===0&&(N+=1);else{const j=Math.max(Math.abs((O?O.clientWidth:0)-I),I)*2+2,W=Math.max(Math.abs((O?O.clientHeight:0)-D),D)*2+2;N=Math.sqrt(j**2+W**2)}E!=null&&E.touches?m.current===null&&(m.current=()=>{x({pulsate:R,rippleX:I,rippleY:D,rippleSize:N,cb:P})},g.current=setTimeout(()=>{m.current&&(m.current(),m.current=null)},bre)):x({pulsate:R,rippleX:I,rippleY:D,rippleSize:N,cb:P})},[i,x]),w=C.useCallback(()=>{b({},{pulsate:!0})},[b]),v=C.useCallback((E,T)=>{if(clearTimeout(g.current),(E==null?void 0:E.type)==="touchend"&&m.current){m.current(),m.current=null,g.current=setTimeout(()=>{v(E,T)});return}m.current=null,c(P=>P.length>0?P.slice(1):P),h.current=T},[]);return C.useImperativeHandle(n,()=>({pulsate:w,start:b,stop:v}),[w,b,v]),Q.jsx(Ere,$({className:at(ao.root,s.root,o),ref:y},a,{children:Q.jsx(Zne,{component:null,exit:!0,children:l})}))}),Pre=Tre;function Cre(t){return jt("MuiButtonBase",t)}const Are=Ft("MuiButtonBase",["root","disabled","focusVisible"]),Rre=Are,Ire=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Mre=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=$t({root:["root",e&&"disabled",n&&"focusVisible"]},Cre,i);return n&&r&&(o.root+=` ${r}`),o},Ore=Fe("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Rre.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Lre=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:f=!1,LinkComponent:g="a",onBlur:m,onClick:y,onContextMenu:x,onDragLeave:b,onFocus:w,onFocusVisible:v,onKeyDown:E,onKeyUp:T,onMouseDown:P,onMouseLeave:R,onMouseUp:M,onTouchEnd:k,onTouchMove:O,onTouchStart:F,tabIndex:I=0,TouchRippleProps:D,touchRippleRef:N,type:j}=r,W=Qe(r,Ire),H=C.useRef(null),U=C.useRef(null),X=Hn(U,N),{isFocusVisibleRef:Y,onFocus:Z,onBlur:se,ref:xe}=Qx(),[de,Me]=C.useState(!1);c&&de&&Me(!1),C.useImperativeHandle(i,()=>({focusVisible:()=>{Me(!0),H.current.focus()}}),[]);const[he,Te]=C.useState(!1);C.useEffect(()=>{Te(!0)},[]);const le=he&&!u&&!c;C.useEffect(()=>{de&&f&&!u&&he&&U.current.pulsate()},[u,f,de,he]);function ae(Le,kt,wt=h){return Pi(Ot=>(kt&&kt(Ot),!wt&&U.current&&U.current[Le](Ot),!0))}const me=ae("start",P),oe=ae("stop",x),_e=ae("stop",b),pe=ae("stop",M),Pe=ae("stop",Le=>{de&&Le.preventDefault(),R&&R(Le)}),we=ae("start",F),Ye=ae("stop",k),ke=ae("stop",O),Oe=ae("stop",Le=>{se(Le),Y.current===!1&&Me(!1),m&&m(Le)},!1),rt=Pi(Le=>{H.current||(H.current=Le.currentTarget),Z(Le),Y.current===!0&&(Me(!0),v&&v(Le)),w&&w(Le)}),qe=()=>{const Le=H.current;return l&&l!=="button"&&!(Le.tagName==="A"&&Le.href)},Ge=C.useRef(!1),fn=Pi(Le=>{f&&!Ge.current&&de&&U.current&&Le.key===" "&&(Ge.current=!0,U.current.stop(Le,()=>{U.current.start(Le)})),Le.target===Le.currentTarget&&qe()&&Le.key===" "&&Le.preventDefault(),E&&E(Le),Le.target===Le.currentTarget&&qe()&&Le.key==="Enter"&&!c&&(Le.preventDefault(),y&&y(Le))}),Mt=Pi(Le=>{f&&Le.key===" "&&U.current&&de&&!Le.defaultPrevented&&(Ge.current=!1,U.current.stop(Le,()=>{U.current.pulsate(Le)})),T&&T(Le),y&&Le.target===Le.currentTarget&&qe()&&Le.key===" "&&!Le.defaultPrevented&&y(Le)});let pt=l;pt==="button"&&(W.href||W.to)&&(pt=g);const Se={};pt==="button"?(Se.type=j===void 0?"button":j,Se.disabled=c):(!W.href&&!W.to&&(Se.role="button"),c&&(Se["aria-disabled"]=c));const Ne=Hn(n,xe,H),Ke=$({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:f,tabIndex:I,focusVisible:de}),je=Mre(Ke);return Q.jsxs(Ore,$({as:pt,className:at(je.root,a),ownerState:Ke,onBlur:Oe,onClick:y,onContextMenu:oe,onFocus:rt,onKeyDown:fn,onKeyUp:Mt,onMouseDown:me,onMouseLeave:Pe,onMouseUp:pe,onDragLeave:_e,onTouchEnd:Ye,onTouchMove:ke,onTouchStart:we,ref:Ne,tabIndex:c?-1:I,type:j},Se,W,{children:[o,le?Q.jsx(Pre,$({ref:X,center:s},D)):null]}))}),$0=Lre;function kre(t){return jt("MuiIconButton",t)}const Dre=Ft("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Nre=Dre,Bre=["edge","children","className","color","disabled","disableFocusRipple","size"],Fre=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${$e(r)}`,i&&`edge${$e(i)}`,`size${$e(s)}`]};return $t(o,kre,e)},zre=Fe($0,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${$e(n.color)}`],n.edge&&e[`edge${$e(n.edge)}`],e[`size${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>$({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return $({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&$({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":$({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Nre.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Ure=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,h=Qe(r,Bre),f=$({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),g=Fre(f);return Q.jsx(zre,$({className:at(g.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:f},h,{children:s}))}),Hc=Ure;function $re(t){return jt("MuiTypography",t)}Ft("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const jre=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Vre=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${$e(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return $t(a,$re,o)},Gre=Fe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${$e(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>$({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),dN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Hre={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Wre=t=>Hre[t]||t,Xre=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiTypography"}),i=Wre(r.color),s=rj($({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:h=!1,variant:f="body1",variantMapping:g=dN}=s,m=Qe(s,jre),y=$({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:h,variant:f,variantMapping:g}),x=l||(h?"p":g[f]||dN[f])||"span",b=Vre(y);return Q.jsx(Gre,$({as:x,ref:n,ownerState:y,className:at(b.root,a)},m))}),Ji=Xre,mj="base";function Yre(t){return`${mj}--${t}`}function qre(t,e){return`${mj}-${t}-${e}`}function yj(t,e){const n=Q$[e];return n?Yre(n):qre(t,e)}function Kre(t,e){const n={};return e.forEach(r=>{n[r]=yj(t,r)}),n}const Zre=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Qre(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function Jre(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function eie(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Jre(t))}function tie(t){const e=[],n=[];return Array.from(t.querySelectorAll(Zre)).forEach((r,i)=>{const s=Qre(r);s===-1||!eie(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function nie(){return!0}function rie(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=tie,isEnabled:o=nie,open:a}=t,l=C.useRef(!1),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),f=C.useRef(null),g=C.useRef(!1),m=C.useRef(null),y=Hn(e.ref,m),x=C.useRef(null);C.useEffect(()=>{!a||!m.current||(g.current=!n)},[n,a]),C.useEffect(()=>{if(!a||!m.current)return;const v=or(m.current);return m.current.contains(v.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),g.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),C.useEffect(()=>{if(!a||!m.current)return;const v=or(m.current),E=R=>{x.current=R,!(r||!o()||R.key!=="Tab")&&v.activeElement===m.current&&R.shiftKey&&(l.current=!0,u.current&&u.current.focus())},T=()=>{const R=m.current;if(R===null)return;if(!v.hasFocus()||!o()||l.current){l.current=!1;return}if(R.contains(v.activeElement)||r&&v.activeElement!==c.current&&v.activeElement!==u.current)return;if(v.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!g.current)return;let M=[];if((v.activeElement===c.current||v.activeElement===u.current)&&(M=s(m.current)),M.length>0){var k,O;const F=!!((k=x.current)!=null&&k.shiftKey&&((O=x.current)==null?void 0:O.key)==="Tab"),I=M[0],D=M[M.length-1];typeof I!="string"&&typeof D!="string"&&(F?D.focus():I.focus())}else R.focus()};v.addEventListener("focusin",T),v.addEventListener("keydown",E,!0);const P=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&T()},50);return()=>{clearInterval(P),v.removeEventListener("focusin",T),v.removeEventListener("keydown",E,!0)}},[n,r,i,o,a,s]);const b=v=>{h.current===null&&(h.current=v.relatedTarget),g.current=!0,f.current=v.target;const E=e.props.onFocus;E&&E(v)},w=v=>{h.current===null&&(h.current=v.relatedTarget),g.current=!0};return Q.jsxs(C.Fragment,{children:[Q.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:c,"data-testid":"sentinelStart"}),C.cloneElement(e,{ref:y,onFocus:b}),Q.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:u,"data-testid":"sentinelEnd"})]})}var ss="top",So="bottom",To="right",os="left",MI="auto",j0=[ss,So,To,os],Nf="start",Jm="end",iie="clippingParents",vj="viewport",tg="popper",sie="reference",fN=j0.reduce(function(t,e){return t.concat([e+"-"+Nf,e+"-"+Jm])},[]),bj=[].concat(j0,[MI]).reduce(function(t,e){return t.concat([e,e+"-"+Nf,e+"-"+Jm])},[]),oie="beforeRead",aie="read",lie="afterRead",cie="beforeMain",uie="main",hie="afterMain",die="beforeWrite",fie="write",pie="afterWrite",gie=[oie,aie,lie,cie,uie,hie,die,fie,pie];function Ka(t){return t?(t.nodeName||"").toLowerCase():null}function $s(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ch(t){var e=$s(t).Element;return t instanceof e||t instanceof Element}function bo(t){var e=$s(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function OI(t){if(typeof ShadowRoot>"u")return!1;var e=$s(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function mie(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!bo(s)||!Ka(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function yie(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!bo(i)||!Ka(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const vie={name:"applyStyles",enabled:!0,phase:"write",fn:mie,effect:yie,requires:["computeStyles"]};function Ya(t){return t.split("-")[0]}var ah=Math.max,r_=Math.min,Bf=Math.round;function YC(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function _j(){return!/^((?!chrome|android).)*safari/i.test(YC())}function Ff(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&bo(t)&&(i=t.offsetWidth>0&&Bf(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Bf(r.height)/t.offsetHeight||1);var o=Ch(t)?$s(t):window,a=o.visualViewport,l=!_j()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,f=r.height/s;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function LI(t){var e=Ff(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function xj(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&OI(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Bl(t){return $s(t).getComputedStyle(t)}function bie(t){return["table","td","th"].indexOf(Ka(t))>=0}function uu(t){return((Ch(t)?t.ownerDocument:t.document)||window.document).documentElement}function dw(t){return Ka(t)==="html"?t:t.assignedSlot||t.parentNode||(OI(t)?t.host:null)||uu(t)}function pN(t){return!bo(t)||Bl(t).position==="fixed"?null:t.offsetParent}function _ie(t){var e=/firefox/i.test(YC()),n=/Trident/i.test(YC());if(n&&bo(t)){var r=Bl(t);if(r.position==="fixed")return null}var i=dw(t);for(OI(i)&&(i=i.host);bo(i)&&["html","body"].indexOf(Ka(i))<0;){var s=Bl(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function V0(t){for(var e=$s(t),n=pN(t);n&&bie(n)&&Bl(n).position==="static";)n=pN(n);return n&&(Ka(n)==="html"||Ka(n)==="body"&&Bl(n).position==="static")?e:n||_ie(t)||e}function kI(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function um(t,e,n){return ah(t,r_(e,n))}function xie(t,e,n){var r=um(t,e,n);return r>n?n:r}function wj(){return{top:0,right:0,bottom:0,left:0}}function Ej(t){return Object.assign({},wj(),t)}function Sj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var wie=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Ej(typeof e!="number"?e:Sj(e,j0))};function Eie(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ya(n.placement),l=kI(a),c=[os,To].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var h=wie(i.padding,n),f=LI(s),g=l==="y"?ss:os,m=l==="y"?So:To,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],x=o[l]-n.rects.reference[l],b=V0(s),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,v=y/2-x/2,E=h[g],T=w-f[u]-h[m],P=w/2-f[u]/2+v,R=um(E,P,T),M=l;n.modifiersData[r]=(e={},e[M]=R,e.centerOffset=R-P,e)}}function Sie(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||xj(e.elements.popper,i)&&(e.elements.arrow=i))}const Tie={name:"arrow",enabled:!0,phase:"main",fn:Eie,effect:Sie,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zf(t){return t.split("-")[1]}var Pie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cie(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Bf(n*i)/i||0,y:Bf(r*i)/i||0}}function gN(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,g=f===void 0?0:f,m=o.y,y=m===void 0?0:m,x=typeof u=="function"?u({x:g,y}):{x:g,y};g=x.x,y=x.y;var b=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),v=os,E=ss,T=window;if(c){var P=V0(n),R="clientHeight",M="clientWidth";if(P===$s(n)&&(P=uu(n),Bl(P).position!=="static"&&a==="absolute"&&(R="scrollHeight",M="scrollWidth")),P=P,i===ss||(i===os||i===To)&&s===Jm){E=So;var k=h&&P===T&&T.visualViewport?T.visualViewport.height:P[R];y-=k-r.height,y*=l?1:-1}if(i===os||(i===ss||i===So)&&s===Jm){v=To;var O=h&&P===T&&T.visualViewport?T.visualViewport.width:P[M];g-=O-r.width,g*=l?1:-1}}var F=Object.assign({position:a},c&&Pie),I=u===!0?Cie({x:g,y},$s(n)):{x:g,y};if(g=I.x,y=I.y,l){var D;return Object.assign({},F,(D={},D[E]=w?"0":"",D[v]=b?"0":"",D.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",D))}return Object.assign({},F,(e={},e[E]=w?y+"px":"",e[v]=b?g+"px":"",e.transform="",e))}function Aie(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ya(e.placement),variation:zf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,gN(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,gN(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Rie={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Aie,data:{}};var Av={passive:!0};function Iie(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=$s(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Av)}),a&&l.addEventListener("resize",n.update,Av),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Av)}),a&&l.removeEventListener("resize",n.update,Av)}}const Mie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Iie,data:{}};var Oie={left:"right",right:"left",bottom:"top",top:"bottom"};function K1(t){return t.replace(/left|right|bottom|top/g,function(e){return Oie[e]})}var Lie={start:"end",end:"start"};function mN(t){return t.replace(/start|end/g,function(e){return Lie[e]})}function DI(t){var e=$s(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function NI(t){return Ff(uu(t)).left+DI(t).scrollLeft}function kie(t,e){var n=$s(t),r=uu(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=_j();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+NI(t),y:l}}function Die(t){var e,n=uu(t),r=DI(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=ah(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=ah(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+NI(t),l=-r.scrollTop;return Bl(i||n).direction==="rtl"&&(a+=ah(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function BI(t){var e=Bl(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Tj(t){return["html","body","#document"].indexOf(Ka(t))>=0?t.ownerDocument.body:bo(t)&&BI(t)?t:Tj(dw(t))}function hm(t,e){var n;e===void 0&&(e=[]);var r=Tj(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=$s(r),o=i?[s].concat(s.visualViewport||[],BI(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(hm(dw(o)))}function qC(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Nie(t,e){var n=Ff(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function yN(t,e,n){return e===vj?qC(kie(t,n)):Ch(e)?Nie(e,n):qC(Die(uu(t)))}function Bie(t){var e=hm(dw(t)),n=["absolute","fixed"].indexOf(Bl(t).position)>=0,r=n&&bo(t)?V0(t):t;return Ch(r)?e.filter(function(i){return Ch(i)&&xj(i,r)&&Ka(i)!=="body"}):[]}function Fie(t,e,n,r){var i=e==="clippingParents"?Bie(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=yN(t,c,r);return l.top=ah(u.top,l.top),l.right=r_(u.right,l.right),l.bottom=r_(u.bottom,l.bottom),l.left=ah(u.left,l.left),l},yN(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Pj(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ya(r):null,s=r?zf(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case ss:l={x:o,y:e.y-n.height};break;case So:l={x:o,y:e.y+e.height};break;case To:l={x:e.x+e.width,y:a};break;case os:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?kI(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Nf:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Jm:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function e0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?iie:a,c=n.rootBoundary,u=c===void 0?vj:c,h=n.elementContext,f=h===void 0?tg:h,g=n.altBoundary,m=g===void 0?!1:g,y=n.padding,x=y===void 0?0:y,b=Ej(typeof x!="number"?x:Sj(x,j0)),w=f===tg?sie:tg,v=t.rects.popper,E=t.elements[m?w:f],T=Fie(Ch(E)?E:E.contextElement||uu(t.elements.popper),l,u,o),P=Ff(t.elements.reference),R=Pj({reference:P,element:v,strategy:"absolute",placement:i}),M=qC(Object.assign({},v,R)),k=f===tg?M:P,O={top:T.top-k.top+b.top,bottom:k.bottom-T.bottom+b.bottom,left:T.left-k.left+b.left,right:k.right-T.right+b.right},F=t.modifiersData.offset;if(f===tg&&F){var I=F[i];Object.keys(O).forEach(function(D){var N=[To,So].indexOf(D)>=0?1:-1,j=[ss,So].indexOf(D)>=0?"y":"x";O[D]+=I[j]*N})}return O}function zie(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?bj:l,u=zf(r),h=u?a?fN:fN.filter(function(m){return zf(m)===u}):j0,f=h.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=h);var g=f.reduce(function(m,y){return m[y]=e0(t,{placement:y,boundary:i,rootBoundary:s,padding:o})[Ya(y)],m},{});return Object.keys(g).sort(function(m,y){return g[m]-g[y]})}function Uie(t){if(Ya(t)===MI)return[];var e=K1(t);return[mN(t),e,mN(e)]}function $ie(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,g=n.flipVariations,m=g===void 0?!0:g,y=n.allowedAutoPlacements,x=e.options.placement,b=Ya(x),w=b===x,v=l||(w||!m?[K1(x)]:Uie(x)),E=[x].concat(v).reduce(function(de,Me){return de.concat(Ya(Me)===MI?zie(e,{placement:Me,boundary:u,rootBoundary:h,padding:c,flipVariations:m,allowedAutoPlacements:y}):Me)},[]),T=e.rects.reference,P=e.rects.popper,R=new Map,M=!0,k=E[0],O=0;O<E.length;O++){var F=E[O],I=Ya(F),D=zf(F)===Nf,N=[ss,So].indexOf(I)>=0,j=N?"width":"height",W=e0(e,{placement:F,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),H=N?D?To:os:D?So:ss;T[j]>P[j]&&(H=K1(H));var U=K1(H),X=[];if(s&&X.push(W[I]<=0),a&&X.push(W[H]<=0,W[U]<=0),X.every(function(de){return de})){k=F,M=!1;break}R.set(F,X)}if(M)for(var Y=m?3:1,Z=function(Me){var he=E.find(function(Te){var le=R.get(Te);if(le)return le.slice(0,Me).every(function(ae){return ae})});if(he)return k=he,"break"},se=Y;se>0;se--){var xe=Z(se);if(xe==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const jie={name:"flip",enabled:!0,phase:"main",fn:$ie,requiresIfExists:["offset"],data:{_skip:!1}};function vN(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function bN(t){return[ss,To,So,os].some(function(e){return t[e]>=0})}function Vie(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=e0(e,{elementContext:"reference"}),a=e0(e,{altBoundary:!0}),l=vN(o,r),c=vN(a,i,s),u=bN(l),h=bN(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const Gie={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vie};function Hie(t,e,n){var r=Ya(t),i=[os,ss].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[os,To].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Wie(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=bj.reduce(function(u,h){return u[h]=Hie(h,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Xie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Wie};function Yie(t){var e=t.state,n=t.name;e.modifiersData[n]=Pj({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const qie={name:"popperOffsets",enabled:!0,phase:"read",fn:Yie,data:{}};function Kie(t){return t==="x"?"y":"x"}function Zie(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,g=f===void 0?!0:f,m=n.tetherOffset,y=m===void 0?0:m,x=e0(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),b=Ya(e.placement),w=zf(e.placement),v=!w,E=kI(b),T=Kie(E),P=e.modifiersData.popperOffsets,R=e.rects.reference,M=e.rects.popper,k=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,O=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(P){if(s){var D,N=E==="y"?ss:os,j=E==="y"?So:To,W=E==="y"?"height":"width",H=P[E],U=H+x[N],X=H-x[j],Y=g?-M[W]/2:0,Z=w===Nf?R[W]:M[W],se=w===Nf?-M[W]:-R[W],xe=e.elements.arrow,de=g&&xe?LI(xe):{width:0,height:0},Me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:wj(),he=Me[N],Te=Me[j],le=um(0,R[W],de[W]),ae=v?R[W]/2-Y-le-he-O.mainAxis:Z-le-he-O.mainAxis,me=v?-R[W]/2+Y+le+Te+O.mainAxis:se+le+Te+O.mainAxis,oe=e.elements.arrow&&V0(e.elements.arrow),_e=oe?E==="y"?oe.clientTop||0:oe.clientLeft||0:0,pe=(D=F==null?void 0:F[E])!=null?D:0,Pe=H+ae-pe-_e,we=H+me-pe,Ye=um(g?r_(U,Pe):U,H,g?ah(X,we):X);P[E]=Ye,I[E]=Ye-H}if(a){var ke,Oe=E==="x"?ss:os,rt=E==="x"?So:To,qe=P[T],Ge=T==="y"?"height":"width",fn=qe+x[Oe],Mt=qe-x[rt],pt=[ss,os].indexOf(b)!==-1,Se=(ke=F==null?void 0:F[T])!=null?ke:0,Ne=pt?fn:qe-R[Ge]-M[Ge]-Se+O.altAxis,Ke=pt?qe+R[Ge]+M[Ge]-Se-O.altAxis:Mt,je=g&&pt?xie(Ne,qe,Ke):um(g?Ne:fn,qe,g?Ke:Mt);P[T]=je,I[T]=je-qe}e.modifiersData[r]=I}}const Qie={name:"preventOverflow",enabled:!0,phase:"main",fn:Zie,requiresIfExists:["offset"]};function Jie(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ese(t){return t===$s(t)||!bo(t)?DI(t):Jie(t)}function tse(t){var e=t.getBoundingClientRect(),n=Bf(e.width)/t.offsetWidth||1,r=Bf(e.height)/t.offsetHeight||1;return n!==1||r!==1}function nse(t,e,n){n===void 0&&(n=!1);var r=bo(e),i=bo(e)&&tse(e),s=uu(e),o=Ff(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ka(e)!=="body"||BI(s))&&(a=ese(e)),bo(e)?(l=Ff(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=NI(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function rse(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function ise(t){var e=rse(t);return gie.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function sse(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ose(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var _N={placement:"bottom",modifiers:[],strategy:"absolute"};function xN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ase(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?_N:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},_N,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,g={state:u,setOptions:function(b){var w=typeof b=="function"?b(u.options):b;y(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ch(a)?hm(a):a.contextElement?hm(a.contextElement):[],popper:hm(l)};var v=ise(ose([].concat(r,u.options.modifiers)));return u.orderedModifiers=v.filter(function(E){return E.enabled}),m(),g.update()},forceUpdate:function(){if(!f){var b=u.elements,w=b.reference,v=b.popper;if(xN(w,v)){u.rects={reference:nse(w,V0(v),u.options.strategy==="fixed"),popper:LI(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var T=u.orderedModifiers[E],P=T.fn,R=T.options,M=R===void 0?{}:R,k=T.name;typeof P=="function"&&(u=P({state:u,options:M,name:k,instance:g})||u)}}}},update:sse(function(){return new Promise(function(x){g.forceUpdate(),x(u)})}),destroy:function(){y(),f=!0}};if(!xN(a,l))return g;g.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function m(){u.orderedModifiers.forEach(function(x){var b=x.name,w=x.options,v=w===void 0?{}:w,E=x.effect;if(typeof E=="function"){var T=E({state:u,name:b,instance:g,options:v}),P=function(){};h.push(T||P)}})}function y(){h.forEach(function(x){return x()}),h=[]}return g}}var lse=[Mie,qie,Rie,vie,Xie,jie,Qie,Tie,Gie],cse=ase({defaultModifiers:lse});function use(t){return typeof t=="function"?t():t}const Cj=C.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=C.useState(null),l=Hn(C.isValidElement(r)?r.ref:null,n);if(Us(()=>{s||a(use(i)||document.body)},[i,s]),Us(()=>{if(o&&!s)return Qb(n,o),()=>{Qb(n,null)}},[n,o,s]),s){if(C.isValidElement(r)){const c={ref:l};return C.cloneElement(r,c)}return Q.jsx(C.Fragment,{children:r})}return Q.jsx(C.Fragment,{children:o&&Gl.createPortal(r,o)})}),Aj="Popper";function hse(t){return yj(Aj,t)}Kre(Aj,["root"]);const dse=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],fse=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function pse(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function KC(t){return typeof t=="function"?t():t}function gse(t){return t.nodeType!==void 0}const mse=()=>$t({root:["root"]},dre(hse)),yse={},vse=C.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:h,popperRef:f,slotProps:g={},slots:m={},TransitionProps:y}=e,x=Qe(e,dse),b=C.useRef(null),w=Hn(b,n),v=C.useRef(null),E=Hn(v,f),T=C.useRef(E);Us(()=>{T.current=E},[E]),C.useImperativeHandle(f,()=>v.current,[]);const P=pse(u,o),[R,M]=C.useState(P),[k,O]=C.useState(KC(i));C.useEffect(()=>{v.current&&v.current.forceUpdate()}),C.useEffect(()=>{i&&O(KC(i))},[i]),Us(()=>{if(!k||!c)return;const j=U=>{M(U.placement)};let W=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:U})=>{j(U)}}];l!=null&&(W=W.concat(l)),h&&h.modifiers!=null&&(W=W.concat(h.modifiers));const H=cse(k,b.current,$({placement:P},h,{modifiers:W}));return T.current(H),()=>{H.destroy(),T.current(null)}},[k,a,l,c,h,P]);const F={placement:R};y!==null&&(F.TransitionProps=y);const I=mse(),D=(r=m.root)!=null?r:"div",N=wi({elementType:D,externalSlotProps:g.root,externalForwardedProps:x,additionalProps:{role:"tooltip",ref:w},ownerState:e,className:I.root});return Q.jsx(D,$({},N,{children:typeof s=="function"?s(F):s}))}),bse=C.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:h="bottom",popperOptions:f=yse,popperRef:g,style:m,transition:y=!1,slotProps:x={},slots:b={}}=e,w=Qe(e,fse),[v,E]=C.useState(!0),T=()=>{E(!1)},P=()=>{E(!0)};if(!l&&!u&&(!y||v))return null;let R;if(s)R=s;else if(r){const O=KC(r);R=O&&gse(O)?or(O).body:or(null).body}const M=!u&&l&&(!y||v)?"none":void 0,k=y?{in:u,onEnter:T,onExited:P}:void 0;return Q.jsx(Cj,{disablePortal:a,container:R,children:Q.jsx(vse,$({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:y?!v:u,placement:h,popperOptions:f,popperRef:g,slotProps:x,slots:b},w,{style:$({position:"fixed",top:0,left:0,display:M},m),TransitionProps:k,children:i}))})});function _se(t){const e=or(t);return e.body===t?nu(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function dm(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function wN(t){return parseInt(nu(t).getComputedStyle(t).paddingRight,10)||0}function xse(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function EN(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!xse(o);a&&l&&dm(o,i)})}function HS(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function wse(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(_se(r)){const o=K$(or(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${wN(r)+o}px`;const a=or(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${wN(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=or(r).body;else{const o=r.parentElement,a=nu(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function Ese(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Sse{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&dm(e.modalRef,!1);const i=Ese(n);EN(n,e.mount,e.modalRef,i,!0);const s=HS(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=HS(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=wse(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=HS(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&dm(e.modalRef,n),EN(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&dm(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Tse(t){return typeof t=="function"?t():t}function Pse(t){return t?t.props.hasOwnProperty("in"):!1}const Cse=new Sse;function Ase(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=Cse,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:h}=t,f=C.useRef({}),g=C.useRef(null),m=C.useRef(null),y=Hn(m,h),[x,b]=C.useState(!u),w=Pse(l);let v=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(v=!1);const E=()=>or(g.current),T=()=>(f.current.modalRef=m.current,f.current.mount=g.current,f.current),P=()=>{i.mount(T(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},R=Pi(()=>{const W=Tse(e)||E().body;i.add(T(),W),m.current&&P()}),M=C.useCallback(()=>i.isTopModal(T()),[i]),k=Pi(W=>{g.current=W,W&&(u&&M()?P():m.current&&dm(m.current,v))}),O=C.useCallback(()=>{i.remove(T(),v)},[v,i]);C.useEffect(()=>()=>{O()},[O]),C.useEffect(()=>{u?R():(!w||!s)&&O()},[u,O,w,s,R]);const F=W=>H=>{var U;(U=W.onKeyDown)==null||U.call(W,H),!(H.key!=="Escape"||H.which===229||!M())&&(n||(H.stopPropagation(),c&&c(H,"escapeKeyDown")))},I=W=>H=>{var U;(U=W.onClick)==null||U.call(W,H),H.target===H.currentTarget&&c&&c(H,"backdropClick")};return{getRootProps:(W={})=>{const H=cm(t);delete H.onTransitionEnter,delete H.onTransitionExited;const U=$({},H,W);return $({role:"presentation"},U,{onKeyDown:F(U),ref:y})},getBackdropProps:(W={})=>{const H=W;return $({"aria-hidden":!0},H,{onClick:I(H),open:u})},getTransitionProps:()=>{const W=()=>{b(!1),o&&o()},H=()=>{b(!0),a&&a(),s&&O()};return{onEnter:jC(W,l==null?void 0:l.props.onEnter),onExited:jC(H,l==null?void 0:l.props.onExited)}},rootRef:y,portalRef:k,isTopModal:M,exited:x,hasTransition:w}}const Rse=2;function Rj(t,e){return t-e}function SN(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function Rv(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function i_(t,e,n){return(t-e)*100/(n-e)}function Ise(t,e,n){return(n-e)*t+e}function Mse(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Ose(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Mse(e)))}function TN({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(Rj)}function Iv({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=or(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function Mv(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?cre(t,e):!1}const Lse={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},kse=t=>t;let Ov;function PN(){return Ov===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ov=CSS.supports("touch-action","none"):Ov=!0),Ov}function Dse(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:h,orientation:f="horizontal",rootRef:g,scale:m=kse,step:y=1,tabIndex:x,value:b}=t,w=C.useRef(),[v,E]=C.useState(-1),[T,P]=C.useState(-1),[R,M]=C.useState(!1),k=C.useRef(0),[O,F]=kf({controlled:b,default:n??l,name:"Slider"}),I=u&&((Se,Ne,Ke)=>{const je=Se.nativeEvent||Se,Le=new je.constructor(je.type,je);Object.defineProperty(Le,"target",{writable:!0,value:{value:Ne,name:c}}),u(Le,Ne,Ke)}),D=Array.isArray(O);let N=D?O.slice().sort(Rj):[O];N=N.map(Se=>Se==null?l:Rd(Se,l,a));const j=o===!0&&y!==null?[...Array(Math.floor((a-l)/y)+1)].map((Se,Ne)=>({value:l+y*Ne})):o||[],W=j.map(Se=>Se.value),{isFocusVisibleRef:H,onBlur:U,onFocus:X,ref:Y}=Qx(),[Z,se]=C.useState(-1),xe=C.useRef(),de=Hn(Y,xe),Me=Hn(g,de),he=Se=>Ne=>{var Ke;const je=Number(Ne.currentTarget.getAttribute("data-index"));X(Ne),H.current===!0&&se(je),P(je),Se==null||(Ke=Se.onFocus)==null||Ke.call(Se,Ne)},Te=Se=>Ne=>{var Ke;U(Ne),H.current===!1&&se(-1),P(-1),Se==null||(Ke=Se.onBlur)==null||Ke.call(Se,Ne)};Us(()=>{if(r&&xe.current.contains(document.activeElement)){var Se;(Se=document.activeElement)==null||Se.blur()}},[r]),r&&v!==-1&&E(-1),r&&Z!==-1&&se(-1);const le=Se=>Ne=>{var Ke;(Ke=Se.onChange)==null||Ke.call(Se,Ne);const je=Number(Ne.currentTarget.getAttribute("data-index")),Le=N[je],kt=W.indexOf(Le);let wt=Ne.target.valueAsNumber;if(j&&y==null){const Ot=W[W.length-1];wt>Ot?wt=Ot:wt<W[0]?wt=W[0]:wt=wt<Le?W[kt-1]:W[kt+1]}if(wt=Rd(wt,l,a),D){i&&(wt=Rd(wt,N[je-1]||-1/0,N[je+1]||1/0));const Ot=wt;wt=TN({values:N,newValue:wt,index:je});let Be=je;i||(Be=wt.indexOf(Ot)),Iv({sliderRef:xe,activeIndex:Be})}F(wt),se(je),I&&!Mv(wt,O)&&I(Ne,wt,je),h&&h(Ne,wt)},ae=C.useRef();let me=f;s&&f==="horizontal"&&(me+="-reverse");const oe=({finger:Se,move:Ne=!1})=>{const{current:Ke}=xe,{width:je,height:Le,bottom:kt,left:wt}=Ke.getBoundingClientRect();let Ot;me.indexOf("vertical")===0?Ot=(kt-Se.y)/Le:Ot=(Se.x-wt)/je,me.indexOf("-reverse")!==-1&&(Ot=1-Ot);let Be;if(Be=Ise(Ot,l,a),y)Be=Ose(Be,y,l);else{const Gt=SN(W,Be);Be=W[Gt]}Be=Rd(Be,l,a);let Tt=0;if(D){Ne?Tt=ae.current:Tt=SN(N,Be),i&&(Be=Rd(Be,N[Tt-1]||-1/0,N[Tt+1]||1/0));const Gt=Be;Be=TN({values:N,newValue:Be,index:Tt}),i&&Ne||(Tt=Be.indexOf(Gt),ae.current=Tt)}return{newValue:Be,activeIndex:Tt}},_e=Pi(Se=>{const Ne=Rv(Se,w);if(!Ne)return;if(k.current+=1,Se.type==="mousemove"&&Se.buttons===0){pe(Se);return}const{newValue:Ke,activeIndex:je}=oe({finger:Ne,move:!0});Iv({sliderRef:xe,activeIndex:je,setActive:E}),F(Ke),!R&&k.current>Rse&&M(!0),I&&!Mv(Ke,O)&&I(Se,Ke,je)}),pe=Pi(Se=>{const Ne=Rv(Se,w);if(M(!1),!Ne)return;const{newValue:Ke}=oe({finger:Ne,move:!0});E(-1),Se.type==="touchend"&&P(-1),h&&h(Se,Ke),w.current=void 0,we()}),Pe=Pi(Se=>{if(r)return;PN()||Se.preventDefault();const Ne=Se.changedTouches[0];Ne!=null&&(w.current=Ne.identifier);const Ke=Rv(Se,w);if(Ke!==!1){const{newValue:Le,activeIndex:kt}=oe({finger:Ke});Iv({sliderRef:xe,activeIndex:kt,setActive:E}),F(Le),I&&!Mv(Le,O)&&I(Se,Le,kt)}k.current=0;const je=or(xe.current);je.addEventListener("touchmove",_e,{passive:!0}),je.addEventListener("touchend",pe,{passive:!0})}),we=C.useCallback(()=>{const Se=or(xe.current);Se.removeEventListener("mousemove",_e),Se.removeEventListener("mouseup",pe),Se.removeEventListener("touchmove",_e),Se.removeEventListener("touchend",pe)},[pe,_e]);C.useEffect(()=>{const{current:Se}=xe;return Se.addEventListener("touchstart",Pe,{passive:PN()}),()=>{Se.removeEventListener("touchstart",Pe),we()}},[we,Pe]),C.useEffect(()=>{r&&we()},[r,we]);const Ye=Se=>Ne=>{var Ke;if((Ke=Se.onMouseDown)==null||Ke.call(Se,Ne),r||Ne.defaultPrevented||Ne.button!==0)return;Ne.preventDefault();const je=Rv(Ne,w);if(je!==!1){const{newValue:kt,activeIndex:wt}=oe({finger:je});Iv({sliderRef:xe,activeIndex:wt,setActive:E}),F(kt),I&&!Mv(kt,O)&&I(Ne,kt,wt)}k.current=0;const Le=or(xe.current);Le.addEventListener("mousemove",_e,{passive:!0}),Le.addEventListener("mouseup",pe)},ke=i_(D?N[0]:l,l,a),Oe=i_(N[N.length-1],l,a)-ke,rt=(Se={})=>{const Ne=cm(Se),Ke={onMouseDown:Ye(Ne||{})},je=$({},Ne,Ke);return $({},Se,{ref:Me},je)},qe=Se=>Ne=>{var Ke;(Ke=Se.onMouseOver)==null||Ke.call(Se,Ne);const je=Number(Ne.currentTarget.getAttribute("data-index"));P(je)},Ge=Se=>Ne=>{var Ke;(Ke=Se.onMouseLeave)==null||Ke.call(Se,Ne),P(-1)};return{active:v,axis:me,axisProps:Lse,dragging:R,focusedThumbIndex:Z,getHiddenInputProps:(Se={})=>{var Ne;const Ke=cm(Se),je={onChange:le(Ke||{}),onFocus:he(Ke||{}),onBlur:Te(Ke||{})},Le=$({},Ke,je);return $({tabIndex:x,"aria-labelledby":e,"aria-orientation":f,"aria-valuemax":m(a),"aria-valuemin":m(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(Ne=t.step)!=null?Ne:void 0,disabled:r},Se,Le,{style:$({},Gee,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:rt,getThumbProps:(Se={})=>{const Ne=cm(Se),Ke={onMouseOver:qe(Ne||{}),onMouseLeave:Ge(Ne||{})};return $({},Se,Ne,Ke)},marks:j,open:T,range:D,rootRef:Me,trackLeap:Oe,trackOffset:ke,values:N,getThumbStyle:Se=>({pointerEvents:v!==-1&&v!==Se?"none":void 0})}}const Nse=["onChange","maxRows","minRows","style","value"];function Lv(t){return parseInt(t,10)||0}const Bse={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function CN(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const Fse=C.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=Qe(e,Nse),{current:c}=C.useRef(a!=null),u=C.useRef(null),h=Hn(n,u),f=C.useRef(null),g=C.useRef(0),[m,y]=C.useState({outerHeightStyle:0}),x=C.useCallback(()=>{const E=u.current,P=nu(E).getComputedStyle(E);if(P.width==="0px")return{outerHeightStyle:0};const R=f.current;R.style.width=P.width,R.value=E.value||e.placeholder||"x",R.value.slice(-1)===`
`&&(R.value+=" ");const M=P.boxSizing,k=Lv(P.paddingBottom)+Lv(P.paddingTop),O=Lv(P.borderBottomWidth)+Lv(P.borderTopWidth),F=R.scrollHeight;R.value="x";const I=R.scrollHeight;let D=F;s&&(D=Math.max(Number(s)*I,D)),i&&(D=Math.min(Number(i)*I,D)),D=Math.max(D,I);const N=D+(M==="border-box"?k+O:0),j=Math.abs(D-F)<=1;return{outerHeightStyle:N,overflow:j}},[i,s,e.placeholder]),b=(E,T)=>{const{outerHeightStyle:P,overflow:R}=T;return g.current<20&&(P>0&&Math.abs((E.outerHeightStyle||0)-P)>1||E.overflow!==R)?(g.current+=1,{overflow:R,outerHeightStyle:P}):E},w=C.useCallback(()=>{const E=x();CN(E)||y(T=>b(T,E))},[x]);Us(()=>{const E=()=>{const F=x();CN(F)||Gl.flushSync(()=>{y(I=>b(I,F))})},T=()=>{g.current=0,E()};let P;const R=bI(T),M=u.current,k=nu(M);k.addEventListener("resize",R);let O;return typeof ResizeObserver<"u"&&(O=new ResizeObserver(T),O.observe(M)),()=>{R.clear(),cancelAnimationFrame(P),k.removeEventListener("resize",R),O&&O.disconnect()}},[x]),Us(()=>{w()}),C.useEffect(()=>{g.current=0},[a]);const v=E=>{g.current=0,c||w(),r&&r(E)};return Q.jsxs(C.Fragment,{children:[Q.jsx("textarea",$({value:a,onChange:v,ref:h,rows:s,style:$({height:m.outerHeightStyle,overflow:m.overflow?"hidden":void 0},o)},l)),Q.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:$({},Bse.shadow,o,{paddingTop:0,paddingBottom:0})})]})}),zse=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Use=Fe(bse,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),$se=C.forwardRef(function(e,n){var r;const i=nj(),s=Ht({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:h,keepMounted:f,modifiers:g,open:m,placement:y,popperOptions:x,popperRef:b,transition:w,slots:v,slotProps:E}=s,T=Qe(s,zse),P=(r=v==null?void 0:v.root)!=null?r:l==null?void 0:l.Root,R=$({anchorEl:o,container:u,disablePortal:h,keepMounted:f,modifiers:g,open:m,placement:y,popperOptions:x,popperRef:b,transition:w},T);return Q.jsx(Use,$({as:a,direction:i==null?void 0:i.direction,slots:{root:P},slotProps:E??c},R,{ref:n}))}),Ij=$se;function G0({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const jse=C.createContext(void 0),FI=jse;function fp(){return C.useContext(FI)}function Vse(t){return Q.jsx(Gte,$({},t,{defaultTheme:uw,themeId:B0}))}function AN(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function s_(t,e=!1){return t&&(AN(t.value)&&t.value!==""||e&&AN(t.defaultValue)&&t.defaultValue!=="")}function Gse(t){return t.startAdornment}function Hse(t){return jt("MuiInputBase",t)}const Wse=Ft("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Uf=Wse,Xse=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],fw=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${$e(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},pw=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Yse=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:f,startAdornment:g,type:m}=t,y={root:["root",`color${$e(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${$e(f)}`,u&&"multiline",g&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",m==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",g&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return $t(y,Hse,e)},gw=Fe("div",{name:"MuiInputBase",slot:"Root",overridesResolver:fw})(({theme:t,ownerState:e})=>$({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Uf.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&$({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),mw=Fe("input",{name:"MuiInputBase",slot:"Input",overridesResolver:pw})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=$({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return $({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Uf.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Uf.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),qse=Q.jsx(Vse,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Kse=C.forwardRef(function(e,n){var r;const i=Ht({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:h,disabled:f,disableInjectingGlobalStyles:g,endAdornment:m,fullWidth:y=!1,id:x,inputComponent:b="input",inputProps:w={},inputRef:v,maxRows:E,minRows:T,multiline:P=!1,name:R,onBlur:M,onChange:k,onClick:O,onFocus:F,onKeyDown:I,onKeyUp:D,placeholder:N,readOnly:j,renderSuffix:W,rows:H,slotProps:U={},slots:X={},startAdornment:Y,type:Z="text",value:se}=i,xe=Qe(i,Xse),de=w.value!=null?w.value:se,{current:Me}=C.useRef(de!=null),he=C.useRef(),Te=C.useCallback(je=>{},[]),le=Hn(he,v,w.ref,Te),[ae,me]=C.useState(!1),oe=fp(),_e=G0({props:i,muiFormControl:oe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_e.focused=oe?oe.focused:ae,C.useEffect(()=>{!oe&&f&&ae&&(me(!1),M&&M())},[oe,f,ae,M]);const pe=oe&&oe.onFilled,Pe=oe&&oe.onEmpty,we=C.useCallback(je=>{s_(je)?pe&&pe():Pe&&Pe()},[pe,Pe]);Us(()=>{Me&&we({value:de})},[de,we,Me]);const Ye=je=>{if(_e.disabled){je.stopPropagation();return}F&&F(je),w.onFocus&&w.onFocus(je),oe&&oe.onFocus?oe.onFocus(je):me(!0)},ke=je=>{M&&M(je),w.onBlur&&w.onBlur(je),oe&&oe.onBlur?oe.onBlur(je):me(!1)},Oe=(je,...Le)=>{if(!Me){const kt=je.target||he.current;if(kt==null)throw new Error(tu(1));we({value:kt.value})}w.onChange&&w.onChange(je,...Le),k&&k(je,...Le)};C.useEffect(()=>{we(he.current)},[]);const rt=je=>{he.current&&je.currentTarget===je.target&&he.current.focus(),O&&O(je)};let qe=b,Ge=w;P&&qe==="input"&&(H?Ge=$({type:void 0,minRows:H,maxRows:H},Ge):Ge=$({type:void 0,maxRows:E,minRows:T},Ge),qe=Fse);const fn=je=>{we(je.animationName==="mui-auto-fill-cancel"?he.current:{value:"x"})};C.useEffect(()=>{oe&&oe.setAdornedStart(!!Y)},[oe,Y]);const Mt=$({},i,{color:_e.color||"primary",disabled:_e.disabled,endAdornment:m,error:_e.error,focused:_e.focused,formControl:oe,fullWidth:y,hiddenLabel:_e.hiddenLabel,multiline:P,size:_e.size,startAdornment:Y,type:Z}),pt=Yse(Mt),Se=X.root||c.Root||gw,Ne=U.root||u.root||{},Ke=X.input||c.Input||mw;return Ge=$({},Ge,(r=U.input)!=null?r:u.input),Q.jsxs(C.Fragment,{children:[!g&&qse,Q.jsxs(Se,$({},Ne,!Gc(Se)&&{ownerState:$({},Mt,Ne.ownerState)},{ref:n,onClick:rt},xe,{className:at(pt.root,Ne.className,l,j&&"MuiInputBase-readOnly"),children:[Y,Q.jsx(FI.Provider,{value:null,children:Q.jsx(Ke,$({ownerState:Mt,"aria-invalid":_e.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:h,disabled:_e.disabled,id:x,onAnimationStart:fn,name:R,placeholder:N,readOnly:j,required:_e.required,rows:H,value:de,onKeyDown:I,onKeyUp:D,type:Z},Ge,!Gc(Ke)&&{as:qe,ownerState:$({},Mt,Ge.ownerState)},{ref:le,className:at(pt.input,Ge.className,j&&"MuiInputBase-readOnly"),onBlur:ke,onChange:Oe,onFocus:Ye}))}),m,W?W($({},_e,{startAdornment:Y})):null]}))]})}),zI=Kse;function Zse(t){return jt("MuiInput",t)}const Qse=$({},Uf,Ft("MuiInput",["root","underline","input"])),ng=Qse;function Jse(t){return jt("MuiOutlinedInput",t)}const eoe=$({},Uf,Ft("MuiOutlinedInput",["root","notchedOutline","input"])),ac=eoe;function toe(t){return jt("MuiFilledInput",t)}const noe=$({},Uf,Ft("MuiFilledInput",["root","underline","input"])),Tu=noe,roe=St(Q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ioe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],soe={entering:{opacity:1},entered:{opacity:1}},ooe=C.forwardRef(function(e,n){const r=cu(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:f,onExit:g,onExited:m,onExiting:y,style:x,timeout:b=i,TransitionComponent:w=AI}=e,v=Qe(e,ioe),E=C.useRef(null),T=Hn(E,a.ref,n),P=N=>j=>{if(N){const W=E.current;j===void 0?N(W):N(W,j)}},R=P(f),M=P((N,j)=>{dj(N);const W=Df({style:x,timeout:b,easing:l},{mode:"enter"});N.style.webkitTransition=r.transitions.create("opacity",W),N.style.transition=r.transitions.create("opacity",W),u&&u(N,j)}),k=P(h),O=P(y),F=P(N=>{const j=Df({style:x,timeout:b,easing:l},{mode:"exit"});N.style.webkitTransition=r.transitions.create("opacity",j),N.style.transition=r.transitions.create("opacity",j),g&&g(N)}),I=P(m),D=N=>{s&&s(E.current,N)};return Q.jsx(w,$({appear:o,in:c,nodeRef:E,onEnter:M,onEntered:k,onEntering:R,onExit:F,onExited:I,onExiting:O,addEndListener:D,timeout:b},v,{children:(N,j)=>C.cloneElement(a,$({style:$({opacity:0,visibility:N==="exited"&&!c?"hidden":void 0},soe[N],x,a.props.style),ref:T},j))}))}),aoe=ooe;function loe(t){return jt("MuiBackdrop",t)}Ft("MuiBackdrop",["root","invisible"]);const coe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],uoe=t=>{const{classes:e,invisible:n}=t;return $t({root:["root",n&&"invisible"]},loe,e)},hoe=Fe("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>$({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),doe=C.forwardRef(function(e,n){var r,i,s;const o=Ht({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:h={},invisible:f=!1,open:g,slotProps:m={},slots:y={},TransitionComponent:x=aoe,transitionDuration:b}=o,w=Qe(o,coe),v=$({},o,{component:c,invisible:f}),E=uoe(v),T=(r=m.root)!=null?r:h.root;return Q.jsx(x,$({in:g,timeout:b},w,{children:Q.jsx(hoe,$({"aria-hidden":!0},T,{as:(i=(s=y.root)!=null?s:u.Root)!=null?i:c,className:at(E.root,l,T==null?void 0:T.className),ownerState:$({},v,T==null?void 0:T.ownerState),classes:E,ref:n,children:a}))}))}),Mj=doe,foe=Ft("MuiBox",["root"]),poe=foe,goe=cj(),moe=Yte({themeId:B0,defaultTheme:goe,defaultClassName:poe.root,generateClassName:_I.generate}),ar=moe;function yoe(t){return jt("MuiButton",t)}const voe=Ft("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),kv=voe,boe=C.createContext({}),Oj=boe,_oe=C.createContext(void 0),Lj=_oe,xoe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],woe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${$e(e)}`,`size${$e(i)}`,`${s}Size${$e(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${$e(i)}`],endIcon:["endIcon",`iconSize${$e(i)}`]},l=$t(a,yoe,o);return $({},o,l)},kj=t=>$({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Eoe=Fe($0,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${$e(n.color)}`],e[`size${$e(n.size)}`],e[`${n.variant}Size${$e(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return $({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":$({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${kv.focusVisible}`]:$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${kv.disabled}`]:$({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Rn(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${kv.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${kv.disabled}`]:{boxShadow:"none"}}),Soe=Fe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${$e(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},kj(t))),Toe=Fe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${$e(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},kj(t))),Poe=C.forwardRef(function(e,n){const r=C.useContext(Oj),i=C.useContext(Lj),s=Jx(r,e),o=Ht({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:h=!1,disableElevation:f=!1,disableFocusRipple:g=!1,endIcon:m,focusVisibleClassName:y,fullWidth:x=!1,size:b="medium",startIcon:w,type:v,variant:E="text"}=o,T=Qe(o,xoe),P=$({},o,{color:l,component:c,disabled:h,disableElevation:f,disableFocusRipple:g,fullWidth:x,size:b,type:v,variant:E}),R=woe(P),M=w&&Q.jsx(Soe,{className:R.startIcon,ownerState:P,children:w}),k=m&&Q.jsx(Toe,{className:R.endIcon,ownerState:P,children:m}),O=i||"";return Q.jsxs(Eoe,$({ownerState:P,className:at(r.className,R.root,u,O),component:c,disabled:h,focusRipple:!g,focusVisibleClassName:at(R.focusVisible,y),ref:n,type:v},T,{classes:R,children:[M,a,k]}))}),ZC=Poe;function Coe(t){return jt("MuiButtonGroup",t)}const Aoe=Ft("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),oi=Aoe,Roe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Ioe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${oi.grouped}`]:e.grouped},{[`& .${oi.grouped}`]:e[`grouped${$e(n.orientation)}`]},{[`& .${oi.grouped}`]:e[`grouped${$e(n.variant)}`]},{[`& .${oi.grouped}`]:e[`grouped${$e(n.variant)}${$e(n.orientation)}`]},{[`& .${oi.grouped}`]:e[`grouped${$e(n.variant)}${$e(n.color)}`]},{[`& .${oi.firstButton}`]:e.firstButton},{[`& .${oi.lastButton}`]:e.lastButton},{[`& .${oi.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},Moe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:o,variant:a}=t,l={root:["root",a,o==="vertical"&&"vertical",s&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${$e(o)}`,`grouped${$e(a)}`,`grouped${$e(a)}${$e(o)}`,`grouped${$e(a)}${$e(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return $t(l,Coe,e)},Ooe=Fe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Ioe})(({theme:t,ownerState:e})=>$({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${oi.grouped}`]:$({minWidth:40,"&:hover":$({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${oi.firstButton},& .${oi.middleButton}`]:$({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${oi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${oi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Rn(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${oi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${oi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":$({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${oi.lastButton},& .${oi.middleButton}`]:$({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),Loe=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:h=!1,fullWidth:f=!1,orientation:g="horizontal",size:m="medium",variant:y="outlined"}=r,x=Qe(r,Roe),b=$({},r,{color:o,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:h,fullWidth:f,orientation:g,size:m,variant:y}),w=Moe(b),v=C.useMemo(()=>({className:w.grouped,color:o,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:h,fullWidth:f,size:m,variant:y}),[o,l,c,u,h,f,m,y,w.grouped]),E=Z$(i),T=E.length,P=R=>{const M=R===0,k=R===T-1;return M&&k?"":M?w.firstButton:k?w.lastButton:w.middleButton};return Q.jsx(Ooe,$({as:a,role:"group",className:at(w.root,s),ref:n,ownerState:b},x,{children:Q.jsx(Oj.Provider,{value:v,children:E.map((R,M)=>Q.jsx(Lj.Provider,{value:P(M),children:R},M))})}))}),koe=Loe;function Doe(t){return jt("MuiCard",t)}Ft("MuiCard",["root"]);const Noe=["className","raised"],Boe=t=>{const{classes:e}=t;return $t({root:["root"]},Doe,e)},Foe=Fe(gj,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),zoe=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=Qe(r,Noe),a=$({},r,{raised:s}),l=Boe(a);return Q.jsx(Foe,$({className:at(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),Uoe=zoe;function $oe(t){return jt("MuiCardActions",t)}Ft("MuiCardActions",["root","spacing"]);const joe=["disableSpacing","className"],Voe=t=>{const{classes:e,disableSpacing:n}=t;return $t({root:["root",!n&&"spacing"]},$oe,e)},Goe=Fe("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>$({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Hoe=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=Qe(r,joe),a=$({},r,{disableSpacing:i}),l=Voe(a);return Q.jsx(Goe,$({className:at(l.root,s),ownerState:a,ref:n},o))}),Woe=Hoe;function Xoe(t){return jt("MuiCardContent",t)}Ft("MuiCardContent",["root"]);const Yoe=["className","component"],qoe=t=>{const{classes:e}=t;return $t({root:["root"]},Xoe,e)},Koe=Fe("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Zoe=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=Qe(r,Yoe),a=$({},r,{component:s}),l=qoe(a);return Q.jsx(Koe,$({as:s,className:at(l.root,i),ownerState:a,ref:n},o))}),Dj=Zoe;function Qoe(t){return jt("MuiCardHeader",t)}const Joe=Ft("MuiCardHeader",["root","avatar","action","content","title","subheader"]),RN=Joe,eae=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],tae=t=>{const{classes:e}=t;return $t({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Qoe,e)},nae=Fe("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>$({[`& .${RN.title}`]:e.title,[`& .${RN.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),rae=Fe("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),iae=Fe("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),sae=Fe("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),oae=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCardHeader"}),{action:i,avatar:s,className:o,component:a="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:h,titleTypographyProps:f}=r,g=Qe(r,eae),m=$({},r,{component:a,disableTypography:l}),y=tae(m);let x=h;x!=null&&x.type!==Ji&&!l&&(x=Q.jsx(Ji,$({variant:s?"body2":"h5",className:y.title,component:"span",display:"block"},f,{children:x})));let b=c;return b!=null&&b.type!==Ji&&!l&&(b=Q.jsx(Ji,$({variant:s?"body2":"body1",className:y.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:b}))),Q.jsxs(nae,$({className:at(y.root,o),as:a,ref:n,ownerState:m},g,{children:[s&&Q.jsx(rae,{className:y.avatar,ownerState:m,children:s}),Q.jsxs(sae,{className:y.content,ownerState:m,children:[x,b]}),i&&Q.jsx(iae,{className:y.action,ownerState:m,children:i})]}))}),aae=oae;function lae(t){return jt("PrivateSwitchBase",t)}Ft("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const cae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],uae=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${$e(i)}`],input:["input"]};return $t(s,lae,e)},hae=Fe($0)(({ownerState:t})=>$({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),dae=Fe("input",{shouldForwardProp:ls})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),fae=C.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:f,inputProps:g,inputRef:m,name:y,onBlur:x,onChange:b,onFocus:w,readOnly:v,required:E=!1,tabIndex:T,type:P,value:R}=e,M=Qe(e,cae),[k,O]=kf({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),F=fp(),I=X=>{w&&w(X),F&&F.onFocus&&F.onFocus(X)},D=X=>{x&&x(X),F&&F.onBlur&&F.onBlur(X)},N=X=>{if(X.nativeEvent.defaultPrevented)return;const Y=X.target.checked;O(Y),b&&b(X,Y)};let j=l;F&&typeof j>"u"&&(j=F.disabled);const W=P==="checkbox"||P==="radio",H=$({},e,{checked:k,disabled:j,disableFocusRipple:c,edge:u}),U=uae(H);return Q.jsxs(hae,$({component:"span",className:at(U.root,o),centerRipple:!0,focusRipple:!c,disabled:j,tabIndex:null,role:void 0,onFocus:I,onBlur:D,ownerState:H,ref:n},M,{children:[Q.jsx(dae,$({autoFocus:r,checked:i,defaultChecked:a,className:U.input,disabled:j,id:W?f:void 0,name:y,onChange:N,readOnly:v,ref:m,required:E,ownerState:H,tabIndex:T,type:P},P==="checkbox"&&R===void 0?{}:{value:R},g)),k?s:h]}))}),pae=fae,gae=St(Q.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),mae=St(Q.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),yae=St(Q.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function vae(t){return jt("MuiCheckbox",t)}const bae=Ft("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),WS=bae,_ae=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],xae=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${$e(r)}`,`size${$e(i)}`]},o=$t(s,vae,e);return $({},e,o)},wae=Fe(pae,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${$e(n.size)}`],n.color!=="default"&&e[`color${$e(n.color)}`]]}})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${WS.checked}, &.${WS.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${WS.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),Eae=Q.jsx(mae,{}),Sae=Q.jsx(gae,{}),Tae=Q.jsx(yae,{}),Pae=C.forwardRef(function(e,n){var r,i;const s=Ht({props:e,name:"MuiCheckbox"}),{checkedIcon:o=Eae,color:a="primary",icon:l=Sae,indeterminate:c=!1,indeterminateIcon:u=Tae,inputProps:h,size:f="medium",className:g}=s,m=Qe(s,_ae),y=c?u:l,x=c?u:o,b=$({},s,{color:a,indeterminate:c,size:f}),w=xae(b);return Q.jsx(wae,$({type:"checkbox",inputProps:$({"data-indeterminate":c},h),icon:C.cloneElement(y,{fontSize:(r=y.props.fontSize)!=null?r:f}),checkedIcon:C.cloneElement(x,{fontSize:(i=x.props.fontSize)!=null?i:f}),ownerState:b,ref:n,className:at(w.root,g)},m,{classes:w}))}),Cae=Pae;function Aae(t){return jt("MuiCircularProgress",t)}Ft("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rae=["className","color","disableShrink","size","style","thickness","value","variant"];let yw=t=>t,IN,MN,ON,LN;const lc=44,Iae=F0(IN||(IN=yw`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Mae=F0(MN||(MN=yw`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Oae=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${$e(r)}`],svg:["svg"],circle:["circle",`circle${$e(n)}`,i&&"circleDisableShrink"]};return $t(s,Aae,e)},Lae=Fe("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${$e(n.color)}`]]}})(({ownerState:t,theme:e})=>$({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&mI(ON||(ON=yw`
      animation: ${0} 1.4s linear infinite;
    `),Iae)),kae=Fe("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Dae=Fe("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${$e(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>$({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&mI(LN||(LN=yw`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Mae)),Nae=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate"}=r,f=Qe(r,Rae),g=$({},r,{color:s,disableShrink:o,size:a,thickness:c,value:u,variant:h}),m=Oae(g),y={},x={},b={};if(h==="determinate"){const w=2*Math.PI*((lc-c)/2);y.strokeDasharray=w.toFixed(3),b["aria-valuenow"]=Math.round(u),y.strokeDashoffset=`${((100-u)/100*w).toFixed(3)}px`,x.transform="rotate(-90deg)"}return Q.jsx(Lae,$({className:at(m.root,i),style:$({width:a,height:a},x,l),ownerState:g,ref:n,role:"progressbar"},b,f,{children:Q.jsx(kae,{className:m.svg,ownerState:g,viewBox:`${lc/2} ${lc/2} ${lc} ${lc}`,children:Q.jsx(Dae,{className:m.circle,style:y,ownerState:g,cx:lc,cy:lc,r:(lc-c)/2,fill:"none",strokeWidth:c})})}))}),UI=Nae;function Bae(t){return jt("MuiModal",t)}Ft("MuiModal",["root","hidden","backdrop"]);const Fae=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],zae=t=>{const{open:e,exited:n,classes:r}=t;return $t({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Bae,r)},Uae=Fe("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>$({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),$ae=Fe(Mj,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),jae=C.forwardRef(function(e,n){var r,i,s,o,a,l;const c=Ht({name:"MuiModal",props:e}),{BackdropComponent:u=$ae,BackdropProps:h,className:f,closeAfterTransition:g=!1,children:m,container:y,component:x,components:b={},componentsProps:w={},disableAutoFocus:v=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:T=!1,disablePortal:P=!1,disableRestoreFocus:R=!1,disableScrollLock:M=!1,hideBackdrop:k=!1,keepMounted:O=!1,onBackdropClick:F,open:I,slotProps:D,slots:N}=c,j=Qe(c,Fae),W=$({},c,{closeAfterTransition:g,disableAutoFocus:v,disableEnforceFocus:E,disableEscapeKeyDown:T,disablePortal:P,disableRestoreFocus:R,disableScrollLock:M,hideBackdrop:k,keepMounted:O}),{getRootProps:H,getBackdropProps:U,getTransitionProps:X,portalRef:Y,isTopModal:Z,exited:se,hasTransition:xe}=Ase($({},W,{rootRef:n})),de=$({},W,{exited:se}),Me=zae(de),he={};if(m.props.tabIndex===void 0&&(he.tabIndex="-1"),xe){const{onEnter:pe,onExited:Pe}=X();he.onEnter=pe,he.onExited=Pe}const Te=(r=(i=N==null?void 0:N.root)!=null?i:b.Root)!=null?r:Uae,le=(s=(o=N==null?void 0:N.backdrop)!=null?o:b.Backdrop)!=null?s:u,ae=(a=D==null?void 0:D.root)!=null?a:w.root,me=(l=D==null?void 0:D.backdrop)!=null?l:w.backdrop,oe=wi({elementType:Te,externalSlotProps:ae,externalForwardedProps:j,getSlotProps:H,additionalProps:{ref:n,as:x},ownerState:de,className:at(f,ae==null?void 0:ae.className,Me==null?void 0:Me.root,!de.open&&de.exited&&(Me==null?void 0:Me.hidden))}),_e=wi({elementType:le,externalSlotProps:me,additionalProps:h,getSlotProps:pe=>U($({},pe,{onClick:Pe=>{F&&F(Pe),pe!=null&&pe.onClick&&pe.onClick(Pe)}})),className:at(me==null?void 0:me.className,h==null?void 0:h.className,Me==null?void 0:Me.backdrop),ownerState:de});return!O&&!I&&(!xe||se)?null:Q.jsx(Cj,{ref:Y,container:y,disablePortal:P,children:Q.jsxs(Te,$({},oe,{children:[!k&&u?Q.jsx(le,$({},_e)):null,Q.jsx(rie,{disableEnforceFocus:E,disableAutoFocus:v,disableRestoreFocus:R,isEnabled:Z,open:I,children:C.cloneElement(m,he)})]}))})}),Vae=jae,Gae=Ft("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),kN=Gae,Hae=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Wae=t=>{const{classes:e,disableUnderline:n}=t,i=$t({root:["root",!n&&"underline"],input:["input"]},toe,e);return $({},e,i)},Xae=Fe(gw,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...fw(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return $({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Tu.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Tu.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Tu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Tu.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Tu.disabled}, .${Tu.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Tu.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&$({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),Yae=Fe(mw,{name:"MuiFilledInput",slot:"Input",overridesResolver:pw})(({theme:t,ownerState:e})=>$({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),Nj=C.forwardRef(function(e,n){var r,i,s,o;const a=Ht({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:f=!1,slotProps:g,slots:m={},type:y="text"}=a,x=Qe(a,Hae),b=$({},a,{fullWidth:u,inputComponent:h,multiline:f,type:y}),w=Wae(a),v={root:{ownerState:b},input:{ownerState:b}},E=g??c?is(v,g??c):v,T=(r=(i=m.root)!=null?i:l.Root)!=null?r:Xae,P=(s=(o=m.input)!=null?o:l.Input)!=null?s:Yae;return Q.jsx(zI,$({slots:{root:T,input:P},componentsProps:E,fullWidth:u,inputComponent:h,multiline:f,ref:n,type:y},x,{classes:w}))});Nj.muiName="Input";const qae=Nj;function Kae(t){return jt("MuiFormControl",t)}Ft("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Zae=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Qae=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${$e(n)}`,r&&"fullWidth"]};return $t(i,Kae,e)},Jae=Fe("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,e[`margin${$e(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>$({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),ele=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:f=!1,margin:g="none",required:m=!1,size:y="medium",variant:x="outlined"}=r,b=Qe(r,Zae),w=$({},r,{color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:f,margin:g,required:m,size:y,variant:x}),v=Qae(w),[E,T]=C.useState(()=>{let D=!1;return i&&C.Children.forEach(i,N=>{if(!Y1(N,["Input","Select"]))return;const j=Y1(N,["Select"])?N.props.input:N;j&&Gse(j.props)&&(D=!0)}),D}),[P,R]=C.useState(()=>{let D=!1;return i&&C.Children.forEach(i,N=>{Y1(N,["Input","Select"])&&(s_(N.props,!0)||s_(N.props.inputProps,!0))&&(D=!0)}),D}),[M,k]=C.useState(!1);l&&M&&k(!1);const O=u!==void 0&&!l?u:M;let F;const I=C.useMemo(()=>({adornedStart:E,setAdornedStart:T,color:o,disabled:l,error:c,filled:P,focused:O,fullWidth:h,hiddenLabel:f,size:y,onBlur:()=>{k(!1)},onEmpty:()=>{R(!1)},onFilled:()=>{R(!0)},onFocus:()=>{k(!0)},registerEffect:F,required:m,variant:x}),[E,o,l,c,P,O,h,f,F,m,y,x]);return Q.jsx(FI.Provider,{value:I,children:Q.jsx(Jae,$({as:a,ownerState:w,className:at(v.root,s),ref:n},b,{children:i}))})}),tle=ele;function nle(t){return jt("MuiFormLabel",t)}const rle=Ft("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fm=rle,ile=["children","className","color","component","disabled","error","filled","focused","required"],sle=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${$e(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return $t(l,nle,e)},ole=Fe("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${fm.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${fm.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${fm.error}`]:{color:(t.vars||t).palette.error.main}})),ale=Fe("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${fm.error}`]:{color:(t.vars||t).palette.error.main}})),lle=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=Qe(r,ile),l=fp(),c=G0({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=$({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),h=sle(u);return Q.jsxs(ole,$({as:o,ownerState:u,className:at(h.root,s),ref:n},a,{children:[i,c.required&&Q.jsxs(ale,{ownerState:u,"aria-hidden":!0,className:h.asterisk,children:["","*"]})]}))}),cle=lle,ule=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function QC(t){return`scale(${t}, ${t**2})`}const hle={entering:{opacity:1,transform:QC(1)},entered:{opacity:1,transform:"none"}},XS=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Bj=C.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:f,onExiting:g,style:m,timeout:y="auto",TransitionComponent:x=AI}=e,b=Qe(e,ule),w=C.useRef(),v=C.useRef(),E=cu(),T=C.useRef(null),P=Hn(T,s.ref,n),R=j=>W=>{if(j){const H=T.current;W===void 0?j(H):j(H,W)}},M=R(u),k=R((j,W)=>{dj(j);const{duration:H,delay:U,easing:X}=Df({style:m,timeout:y,easing:o},{mode:"enter"});let Y;y==="auto"?(Y=E.transitions.getAutoHeightDuration(j.clientHeight),v.current=Y):Y=H,j.style.transition=[E.transitions.create("opacity",{duration:Y,delay:U}),E.transitions.create("transform",{duration:XS?Y:Y*.666,delay:U,easing:X})].join(","),l&&l(j,W)}),O=R(c),F=R(g),I=R(j=>{const{duration:W,delay:H,easing:U}=Df({style:m,timeout:y,easing:o},{mode:"exit"});let X;y==="auto"?(X=E.transitions.getAutoHeightDuration(j.clientHeight),v.current=X):X=W,j.style.transition=[E.transitions.create("opacity",{duration:X,delay:H}),E.transitions.create("transform",{duration:XS?X:X*.666,delay:XS?H:H||X*.333,easing:U})].join(","),j.style.opacity=0,j.style.transform=QC(.75),h&&h(j)}),D=R(f),N=j=>{y==="auto"&&(w.current=setTimeout(j,v.current||0)),r&&r(T.current,j)};return C.useEffect(()=>()=>{clearTimeout(w.current)},[]),Q.jsx(x,$({appear:i,in:a,nodeRef:T,onEnter:k,onEntered:O,onEntering:M,onExit:I,onExited:D,onExiting:F,addEndListener:N,timeout:y==="auto"?null:y},b,{children:(j,W)=>C.cloneElement(s,$({style:$({opacity:0,transform:QC(.75),visibility:j==="exited"&&!a?"hidden":void 0},hle[j],m,s.props.style),ref:P},W))}))});Bj.muiSupportAuto=!0;const JC=Bj,dle=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],fle=t=>{const{classes:e,disableUnderline:n}=t,i=$t({root:["root",!n&&"underline"],input:["input"]},Zse,e);return $({},e,i)},ple=Fe(gw,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...fw(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),$({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ng.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ng.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ng.disabled}, .${ng.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${ng.disabled}:before`]:{borderBottomStyle:"dotted"}})}),gle=Fe(mw,{name:"MuiInput",slot:"Input",overridesResolver:pw})({}),Fj=C.forwardRef(function(e,n){var r,i,s,o;const a=Ht({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:h=!1,inputComponent:f="input",multiline:g=!1,slotProps:m,slots:y={},type:x="text"}=a,b=Qe(a,dle),w=fle(a),E={root:{ownerState:{disableUnderline:l}}},T=m??u?is(m??u,E):E,P=(r=(i=y.root)!=null?i:c.Root)!=null?r:ple,R=(s=(o=y.input)!=null?o:c.Input)!=null?s:gle;return Q.jsx(zI,$({slots:{root:P,input:R},slotProps:T,fullWidth:h,inputComponent:f,multiline:g,ref:n,type:x},b,{classes:w}))});Fj.muiName="Input";const mle=Fj;function yle(t){return jt("MuiInputLabel",t)}Ft("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const vle=["disableAnimation","margin","shrink","variant","className"],ble=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${$e(r)}`,o],asterisk:[a&&"asterisk"]},c=$t(l,yle,e);return $({},e,c)},_le=Fe(cle,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${fm.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>$({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&$({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&$({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&$({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),xle=C.forwardRef(function(e,n){const r=Ht({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=Qe(r,vle),l=fp();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=G0({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),h=$({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=ble(h);return Q.jsx(_le,$({"data-shrink":c,ownerState:h,ref:n,className:at(f.root,o)},a,{classes:f}))}),wle=xle,Ele=C.createContext({}),o_=Ele;function Sle(t){return jt("MuiList",t)}Ft("MuiList",["root","padding","dense","subheader"]);const Tle=["children","className","component","dense","disablePadding","subheader"],Ple=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return $t({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Sle,e)},Cle=Fe("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>$({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),Ale=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=Qe(r,Tle),h=C.useMemo(()=>({dense:a}),[a]),f=$({},r,{component:o,dense:a,disablePadding:l}),g=Ple(f);return Q.jsx(o_.Provider,{value:h,children:Q.jsxs(Cle,$({as:o,className:at(g.root,s),ref:n,ownerState:f},u,{children:[c,i]}))})}),Rle=Ale,Ile=Ft("MuiListItemIcon",["root","alignItemsFlexStart"]),DN=Ile;function Mle(t){return jt("MuiListItemText",t)}const Ole=Ft("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),a_=Ole,Lle=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],kle=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return $t({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Mle,e)},Dle=Fe("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${a_.primary}`]:e.primary},{[`& .${a_.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>$({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Nle=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:h}=r,f=Qe(r,Lle),{dense:g}=C.useContext(o_);let m=l??i,y=u;const x=$({},r,{disableTypography:o,inset:a,primary:!!m,secondary:!!y,dense:g}),b=kle(x);return m!=null&&m.type!==Ji&&!o&&(m=Q.jsx(Ji,$({variant:g?"body2":"body1",className:b.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:m}))),y!=null&&y.type!==Ji&&!o&&(y=Q.jsx(Ji,$({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},h,{children:y}))),Q.jsxs(Dle,$({className:at(b.root,s),ownerState:x,ref:n},f,{children:[m,y]}))}),Ble=Nle,Fle=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function YS(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function NN(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function zj(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function rg(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!zj(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const zle=C.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,f=Qe(e,Fle),g=C.useRef(null),m=C.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Us(()=>{i&&g.current.focus()},[i]),C.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(v,E)=>{const T=!g.current.style.width;if(v.clientHeight<g.current.clientHeight&&T){const P=`${K$(or(v))}px`;g.current.style[E.direction==="rtl"?"paddingLeft":"paddingRight"]=P,g.current.style.width=`calc(100% + ${P})`}return g.current}}),[]);const y=v=>{const E=g.current,T=v.key,P=or(E).activeElement;if(T==="ArrowDown")v.preventDefault(),rg(E,P,c,l,YS);else if(T==="ArrowUp")v.preventDefault(),rg(E,P,c,l,NN);else if(T==="Home")v.preventDefault(),rg(E,null,c,l,YS);else if(T==="End")v.preventDefault(),rg(E,null,c,l,NN);else if(T.length===1){const R=m.current,M=T.toLowerCase(),k=performance.now();R.keys.length>0&&(k-R.lastTime>500?(R.keys=[],R.repeating=!0,R.previousKeyMatched=!0):R.repeating&&M!==R.keys[0]&&(R.repeating=!1)),R.lastTime=k,R.keys.push(M);const O=P&&!R.repeating&&zj(P,R);R.previousKeyMatched&&(O||rg(E,P,!1,l,YS,R))?v.preventDefault():R.previousKeyMatched=!1}u&&u(v)},x=Hn(g,n);let b=-1;C.Children.forEach(o,(v,E)=>{if(!C.isValidElement(v)){b===E&&(b+=1,b>=o.length&&(b=-1));return}v.props.disabled||(h==="selectedMenu"&&v.props.selected||b===-1)&&(b=E),b===E&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const w=C.Children.map(o,(v,E)=>{if(E===b){const T={};return s&&(T.autoFocus=!0),v.props.tabIndex===void 0&&h==="selectedMenu"&&(T.tabIndex=0),C.cloneElement(v,T)}return v});return Q.jsx(Rle,$({role:"menu",ref:x,className:a,onKeyDown:y,tabIndex:i?0:-1},f,{children:w}))}),Ule=zle;function $le(t){return jt("MuiPopover",t)}Ft("MuiPopover",["root","paper"]);const jle=["onEntering"],Vle=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Gle=["slotProps"];function BN(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function FN(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function zN(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function qS(t){return typeof t=="function"?t():t}const Hle=t=>{const{classes:e}=t;return $t({root:["root"],paper:["paper"]},$le,e)},Wle=Fe(Vae,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Uj=Fe(gj,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Xle=C.forwardRef(function(e,n){var r,i,s;const o=Ht({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:f,className:g,container:m,elevation:y=8,marginThreshold:x=16,open:b,PaperProps:w={},slots:v,slotProps:E,transformOrigin:T={vertical:"top",horizontal:"left"},TransitionComponent:P=JC,transitionDuration:R="auto",TransitionProps:{onEntering:M}={},disableScrollLock:k=!1}=o,O=Qe(o.TransitionProps,jle),F=Qe(o,Vle),I=(r=E==null?void 0:E.paper)!=null?r:w,D=C.useRef(),N=Hn(D,I.ref),j=$({},o,{anchorOrigin:c,anchorReference:h,elevation:y,marginThreshold:x,externalPaperSlotProps:I,transformOrigin:T,TransitionComponent:P,transitionDuration:R,TransitionProps:O}),W=Hle(j),H=C.useCallback(()=>{if(h==="anchorPosition")return u;const pe=qS(l),we=(pe&&pe.nodeType===1?pe:or(D.current).body).getBoundingClientRect();return{top:we.top+BN(we,c.vertical),left:we.left+FN(we,c.horizontal)}},[l,c.horizontal,c.vertical,u,h]),U=C.useCallback(pe=>({vertical:BN(pe,T.vertical),horizontal:FN(pe,T.horizontal)}),[T.horizontal,T.vertical]),X=C.useCallback(pe=>{const Pe={width:pe.offsetWidth,height:pe.offsetHeight},we=U(Pe);if(h==="none")return{top:null,left:null,transformOrigin:zN(we)};const Ye=H();let ke=Ye.top-we.vertical,Oe=Ye.left-we.horizontal;const rt=ke+Pe.height,qe=Oe+Pe.width,Ge=nu(qS(l)),fn=Ge.innerHeight-x,Mt=Ge.innerWidth-x;if(x!==null&&ke<x){const pt=ke-x;ke-=pt,we.vertical+=pt}else if(x!==null&&rt>fn){const pt=rt-fn;ke-=pt,we.vertical+=pt}if(x!==null&&Oe<x){const pt=Oe-x;Oe-=pt,we.horizontal+=pt}else if(qe>Mt){const pt=qe-Mt;Oe-=pt,we.horizontal+=pt}return{top:`${Math.round(ke)}px`,left:`${Math.round(Oe)}px`,transformOrigin:zN(we)}},[l,h,H,U,x]),[Y,Z]=C.useState(b),se=C.useCallback(()=>{const pe=D.current;if(!pe)return;const Pe=X(pe);Pe.top!==null&&(pe.style.top=Pe.top),Pe.left!==null&&(pe.style.left=Pe.left),pe.style.transformOrigin=Pe.transformOrigin,Z(!0)},[X]);C.useEffect(()=>(k&&window.addEventListener("scroll",se),()=>window.removeEventListener("scroll",se)),[l,k,se]);const xe=(pe,Pe)=>{M&&M(pe,Pe),se()},de=()=>{Z(!1)};C.useEffect(()=>{b&&se()}),C.useImperativeHandle(a,()=>b?{updatePosition:()=>{se()}}:null,[b,se]),C.useEffect(()=>{if(!b)return;const pe=bI(()=>{se()}),Pe=nu(l);return Pe.addEventListener("resize",pe),()=>{pe.clear(),Pe.removeEventListener("resize",pe)}},[l,b,se]);let Me=R;R==="auto"&&!P.muiSupportAuto&&(Me=void 0);const he=m||(l?or(qS(l)).body:void 0),Te=(i=v==null?void 0:v.root)!=null?i:Wle,le=(s=v==null?void 0:v.paper)!=null?s:Uj,ae=wi({elementType:le,externalSlotProps:$({},I,{style:Y?I.style:$({},I.style,{opacity:0})}),additionalProps:{elevation:y,ref:N},ownerState:j,className:at(W.paper,I==null?void 0:I.className)}),me=wi({elementType:Te,externalSlotProps:(E==null?void 0:E.root)||{},externalForwardedProps:F,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:he,open:b},ownerState:j,className:at(W.root,g)}),{slotProps:oe}=me,_e=Qe(me,Gle);return Q.jsx(Te,$({},_e,!Gc(Te)&&{slotProps:oe,disableScrollLock:k},{children:Q.jsx(P,$({appear:!0,in:b,onEntering:xe,onExited:de,timeout:Me},O,{children:Q.jsx(le,$({},ae,{children:f}))}))}))}),Yle=Xle;function qle(t){return jt("MuiMenu",t)}Ft("MuiMenu",["root","paper","list"]);const Kle=["onEntering"],Zle=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Qle={vertical:"top",horizontal:"right"},Jle={vertical:"top",horizontal:"left"},ece=t=>{const{classes:e}=t;return $t({root:["root"],paper:["paper"],list:["list"]},qle,e)},tce=Fe(Yle,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),nce=Fe(Uj,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rce=Fe(Ule,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),ice=C.forwardRef(function(e,n){var r,i;const s=Ht({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:h,open:f,PaperProps:g={},PopoverClasses:m,transitionDuration:y="auto",TransitionProps:{onEntering:x}={},variant:b="selectedMenu",slots:w={},slotProps:v={}}=s,E=Qe(s.TransitionProps,Kle),T=Qe(s,Zle),P=cu(),R=P.direction==="rtl",M=$({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:x,PaperProps:g,transitionDuration:y,TransitionProps:E,variant:b}),k=ece(M),O=o&&!c&&f,F=C.useRef(null),I=(X,Y)=>{F.current&&F.current.adjustStyleForScrollbar(X,P),x&&x(X,Y)},D=X=>{X.key==="Tab"&&(X.preventDefault(),h&&h(X,"tabKeyDown"))};let N=-1;C.Children.map(a,(X,Y)=>{C.isValidElement(X)&&(X.props.disabled||(b==="selectedMenu"&&X.props.selected||N===-1)&&(N=Y))});const j=(r=w.paper)!=null?r:nce,W=(i=v.paper)!=null?i:g,H=wi({elementType:w.root,externalSlotProps:v.root,ownerState:M,className:[k.root,l]}),U=wi({elementType:j,externalSlotProps:W,ownerState:M,className:k.paper});return Q.jsx(tce,$({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:R?"right":"left"},transformOrigin:R?Qle:Jle,slots:{paper:j,root:w.root},slotProps:{root:H,paper:U},open:f,ref:n,transitionDuration:y,TransitionProps:$({onEntering:I},E),ownerState:M},T,{classes:m,children:Q.jsx(rce,$({onKeyDown:D,actions:F,autoFocus:o&&(N===-1||c),autoFocusItem:O,variant:b},u,{className:at(k.list,u.className),children:a}))}))}),sce=ice;function oce(t){return jt("MuiMenuItem",t)}const ace=Ft("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ig=ace,lce=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],cce=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},uce=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=$t({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},oce,o);return $({},o,l)},hce=Fe($0,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:cce})(({theme:t,ownerState:e})=>$({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ig.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${ig.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${ig.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${ig.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ig.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${kN.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${kN.inset}`]:{marginLeft:52},[`& .${a_.root}`]:{marginTop:0,marginBottom:0},[`& .${a_.inset}`]:{paddingLeft:36},[`& .${DN.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&$({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${DN.root} svg`]:{fontSize:"1.25rem"}}))),dce=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:h,className:f}=r,g=Qe(r,lce),m=C.useContext(o_),y=C.useMemo(()=>({dense:o||m.dense||!1,disableGutters:l}),[m.dense,o,l]),x=C.useRef(null);Us(()=>{i&&x.current&&x.current.focus()},[i]);const b=$({},r,{dense:y.dense,divider:a,disableGutters:l}),w=uce(r),v=Hn(x,n);let E;return r.disabled||(E=h!==void 0?h:-1),Q.jsx(o_.Provider,{value:y,children:Q.jsx(hce,$({ref:v,role:u,tabIndex:E,component:s,focusVisibleClassName:at(w.focusVisible,c),className:at(w.root,f)},g,{ownerState:b,classes:w}))})}),fce=dce;function pce(t){return jt("MuiNativeSelect",t)}const gce=Ft("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),$I=gce,mce=["className","disabled","error","IconComponent","inputRef","variant"],yce=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${$e(n)}`,s&&"iconOpen",r&&"disabled"]};return $t(a,pce,e)},$j=({ownerState:t,theme:e})=>$({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":$({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${$I.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),vce=Fe("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ls,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${$I.multiple}`]:e.multiple}]}})($j),jj=({ownerState:t,theme:e})=>$({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${$I.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),bce=Fe("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${$e(n.variant)}`],n.open&&e.iconOpen]}})(jj),_ce=C.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=Qe(e,mce),u=$({},e,{disabled:i,variant:l,error:s}),h=yce(u);return Q.jsxs(C.Fragment,{children:[Q.jsx(vce,$({ownerState:u,className:at(h.select,r),disabled:i,ref:a||n},c)),e.multiple?null:Q.jsx(bce,{as:o,ownerState:u,className:h.icon})]})}),xce=_ce;var UN;const wce=["children","classes","className","label","notched"],Ece=Fe("fieldset",{shouldForwardProp:ls})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Sce=Fe("legend",{shouldForwardProp:ls})(({ownerState:t,theme:e})=>$({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&$({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Tce(t){const{className:e,label:n,notched:r}=t,i=Qe(t,wce),s=n!=null&&n!=="",o=$({},t,{notched:r,withLabel:s});return Q.jsx(Ece,$({"aria-hidden":!0,className:e,ownerState:o},i,{children:Q.jsx(Sce,{ownerState:o,children:s?Q.jsx("span",{children:n}):UN||(UN=Q.jsx("span",{className:"notranslate",children:""}))})}))}const Pce=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Cce=t=>{const{classes:e}=t,r=$t({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Jse,e);return $({},e,r)},Ace=Fe(gw,{shouldForwardProp:t=>ls(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:fw})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return $({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${ac.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${ac.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${ac.focused} .${ac.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${ac.error} .${ac.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${ac.disabled} .${ac.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&$({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Rce=Fe(Tce,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Ice=Fe(mw,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:pw})(({theme:t,ownerState:e})=>$({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Vj=C.forwardRef(function(e,n){var r,i,s,o,a;const l=Ht({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:h="input",label:f,multiline:g=!1,notched:m,slots:y={},type:x="text"}=l,b=Qe(l,Pce),w=Cce(l),v=fp(),E=G0({props:l,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),T=$({},l,{color:E.color||"primary",disabled:E.disabled,error:E.error,focused:E.focused,formControl:v,fullWidth:u,hiddenLabel:E.hiddenLabel,multiline:g,size:E.size,type:x}),P=(r=(i=y.root)!=null?i:c.Root)!=null?r:Ace,R=(s=(o=y.input)!=null?o:c.Input)!=null?s:Ice;return Q.jsx(zI,$({slots:{root:P,input:R},renderSuffix:M=>Q.jsx(Rce,{ownerState:T,className:w.notchedOutline,label:f!=null&&f!==""&&E.required?a||(a=Q.jsxs(C.Fragment,{children:[f,"","*"]})):f,notched:typeof m<"u"?m:!!(M.startAdornment||M.filled||M.focused)}),fullWidth:u,inputComponent:h,multiline:g,ref:n,type:x},b,{classes:$({},w,{notchedOutline:null})}))});Vj.muiName="Input";const Mce=Vj;function Oce(t){return jt("MuiSelect",t)}const Lce=Ft("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),sg=Lce;var $N;const kce=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Dce=Fe("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${sg.select}`]:e.select},{[`&.${sg.select}`]:e[n.variant]},{[`&.${sg.error}`]:e.error},{[`&.${sg.multiple}`]:e.multiple}]}})($j,{[`&.${sg.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Nce=Fe("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${$e(n.variant)}`],n.open&&e.iconOpen]}})(jj),Bce=Fe("input",{shouldForwardProp:t=>CI(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function jN(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Fce(t){return t==null||typeof t=="string"&&!t.trim()}const zce=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${$e(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return $t(a,Oce,e)},Uce=C.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:h,disabled:f,displayEmpty:g,error:m=!1,IconComponent:y,inputRef:x,labelId:b,MenuProps:w={},multiple:v,name:E,onBlur:T,onChange:P,onClose:R,onFocus:M,onOpen:k,open:O,readOnly:F,renderValue:I,SelectDisplayProps:D={},tabIndex:N,value:j,variant:W="standard"}=e,H=Qe(e,kce),[U,X]=kf({controlled:j,default:h,name:"Select"}),[Y,Z]=kf({controlled:O,default:u,name:"Select"}),se=C.useRef(null),xe=C.useRef(null),[de,Me]=C.useState(null),{current:he}=C.useRef(O!=null),[Te,le]=C.useState(),ae=Hn(n,x),me=C.useCallback(Be=>{xe.current=Be,Be&&Me(Be)},[]),oe=de==null?void 0:de.parentNode;C.useImperativeHandle(ae,()=>({focus:()=>{xe.current.focus()},node:se.current,value:U}),[U]),C.useEffect(()=>{u&&Y&&de&&!he&&(le(a?null:oe.clientWidth),xe.current.focus())},[de,a]),C.useEffect(()=>{o&&xe.current.focus()},[o]),C.useEffect(()=>{if(!b)return;const Be=or(xe.current).getElementById(b);if(Be){const Tt=()=>{getSelection().isCollapsed&&xe.current.focus()};return Be.addEventListener("click",Tt),()=>{Be.removeEventListener("click",Tt)}}},[b]);const _e=(Be,Tt)=>{Be?k&&k(Tt):R&&R(Tt),he||(le(a?null:oe.clientWidth),Z(Be))},pe=Be=>{Be.button===0&&(Be.preventDefault(),xe.current.focus(),_e(!0,Be))},Pe=Be=>{_e(!1,Be)},we=C.Children.toArray(l),Ye=Be=>{const Tt=we.find(Gt=>Gt.props.value===Be.target.value);Tt!==void 0&&(X(Tt.props.value),P&&P(Be,Tt))},ke=Be=>Tt=>{let Gt;if(Tt.currentTarget.hasAttribute("tabindex")){if(v){Gt=Array.isArray(U)?U.slice():[];const on=U.indexOf(Be.props.value);on===-1?Gt.push(Be.props.value):Gt.splice(on,1)}else Gt=Be.props.value;if(Be.props.onClick&&Be.props.onClick(Tt),U!==Gt&&(X(Gt),P)){const on=Tt.nativeEvent||Tt,Dr=new on.constructor(on.type,on);Object.defineProperty(Dr,"target",{writable:!0,value:{value:Gt,name:E}}),P(Dr,Be)}v||_e(!1,Tt)}},Oe=Be=>{F||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Be.key)!==-1&&(Be.preventDefault(),_e(!0,Be))},rt=de!==null&&Y,qe=Be=>{!rt&&T&&(Object.defineProperty(Be,"target",{writable:!0,value:{value:U,name:E}}),T(Be))};delete H["aria-invalid"];let Ge,fn;const Mt=[];let pt=!1;(s_({value:U})||g)&&(I?Ge=I(U):pt=!0);const Se=we.map(Be=>{if(!C.isValidElement(Be))return null;let Tt;if(v){if(!Array.isArray(U))throw new Error(tu(2));Tt=U.some(Gt=>jN(Gt,Be.props.value)),Tt&&pt&&Mt.push(Be.props.children)}else Tt=jN(U,Be.props.value),Tt&&pt&&(fn=Be.props.children);return C.cloneElement(Be,{"aria-selected":Tt?"true":"false",onClick:ke(Be),onKeyUp:Gt=>{Gt.key===" "&&Gt.preventDefault(),Be.props.onKeyUp&&Be.props.onKeyUp(Gt)},role:"option",selected:Tt,value:void 0,"data-value":Be.props.value})});pt&&(v?Mt.length===0?Ge=null:Ge=Mt.reduce((Be,Tt,Gt)=>(Be.push(Tt),Gt<Mt.length-1&&Be.push(", "),Be),[]):Ge=fn);let Ne=Te;!a&&he&&de&&(Ne=oe.clientWidth);let Ke;typeof N<"u"?Ke=N:Ke=f?null:0;const je=D.id||(E?`mui-component-select-${E}`:void 0),Le=$({},e,{variant:W,value:U,open:rt,error:m}),kt=zce(Le),wt=$({},w.PaperProps,(r=w.slotProps)==null?void 0:r.paper),Ot=Kx();return Q.jsxs(C.Fragment,{children:[Q.jsx(Dce,$({ref:me,tabIndex:Ke,role:"combobox","aria-controls":Ot,"aria-disabled":f?"true":void 0,"aria-expanded":rt?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[b,je].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Oe,onMouseDown:f||F?null:pe,onBlur:qe,onFocus:M},D,{ownerState:Le,className:at(D.className,kt.select,c),id:je,children:Fce(Ge)?$N||($N=Q.jsx("span",{className:"notranslate",children:""})):Ge})),Q.jsx(Bce,$({"aria-invalid":m,value:Array.isArray(U)?U.join(","):U,name:E,ref:se,"aria-hidden":!0,onChange:Ye,tabIndex:-1,disabled:f,className:kt.nativeInput,autoFocus:o,ownerState:Le},H)),Q.jsx(Nce,{as:y,className:kt.icon,ownerState:Le}),Q.jsx(sce,$({id:`menu-${E||""}`,anchorEl:oe,open:rt,onClose:Pe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},w,{MenuListProps:$({"aria-labelledby":b,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:Ot},w.MenuListProps),slotProps:$({},w.slotProps,{paper:$({},wt,{style:$({minWidth:Ne},wt!=null?wt.style:null)})}),children:Se}))]})}),$ce=Uce,jce=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Vce=["root"],Gce=t=>{const{classes:e}=t;return e},jI={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>ls(t)&&t!=="variant",slot:"Root"},Hce=Fe(mle,jI)(""),Wce=Fe(Mce,jI)(""),Xce=Fe(qae,jI)(""),Gj=C.forwardRef(function(e,n){const r=Ht({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=roe,id:h,input:f,inputProps:g,label:m,labelId:y,MenuProps:x,multiple:b=!1,native:w=!1,onClose:v,onOpen:E,open:T,renderValue:P,SelectDisplayProps:R,variant:M="outlined"}=r,k=Qe(r,jce),O=w?xce:$ce,F=fp(),I=G0({props:r,muiFormControl:F,states:["variant","error"]}),D=I.variant||M,N=$({},r,{variant:D,classes:o}),j=Gce(N),W=Qe(j,Vce),H=f||{standard:Q.jsx(Hce,{ownerState:N}),outlined:Q.jsx(Wce,{label:m,ownerState:N}),filled:Q.jsx(Xce,{ownerState:N})}[D],U=Hn(n,H.ref);return Q.jsx(C.Fragment,{children:C.cloneElement(H,$({inputComponent:O,inputProps:$({children:s,error:I.error,IconComponent:u,variant:D,type:void 0,multiple:b},w?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:y,MenuProps:x,onClose:v,onOpen:E,open:T,renderValue:P,SelectDisplayProps:$({id:h},R)},g,{classes:g?is(W,g.classes):W},f?f.props.inputProps:{})},b&&w&&D==="outlined"?{notched:!0}:{},{ref:U,className:at(H.props.className,a,j.root)},!f&&{variant:D},k))})});Gj.muiName="Select";const Yce=Gj,qce=t=>!t||!Gc(t),Kce=qce;function Zce(t){return jt("MuiSlider",t)}const Qce=Ft("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),qo=Qce,Jce=t=>{const{open:e}=t;return{offset:at(e&&qo.valueLabelOpen),circle:qo.valueLabelCircle,label:qo.valueLabelLabel}};function eue(t){const{children:e,className:n,value:r}=t,i=Jce(t);return e?C.cloneElement(e,{className:at(e.props.className)},Q.jsxs(C.Fragment,{children:[e.props.children,Q.jsx("span",{className:at(i.offset,n),"aria-hidden":!0,children:Q.jsx("span",{className:i.circle,children:Q.jsx("span",{className:i.label,children:r})})})]})):null}const tue=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function VN(t){return t}const nue=Fe("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${$e(n.color)}`],n.size!=="medium"&&e[`size${$e(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t,ownerState:e})=>$({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(t.vars||t).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&$({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&$({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${qo.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${qo.dragging}`]:{[`& .${qo.thumb}, & .${qo.track}`]:{transition:"none"}}})),rue=Fe("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})(({ownerState:t})=>$({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},t.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track==="inverted"&&{opacity:1})),iue=Fe("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?aj(t.palette[e.color].main,.62):oj(t.palette[e.color].main,.5);return $({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n,borderColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n})}),sue=Fe("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${$e(n.color)}`],n.size!=="medium"&&e[`thumbSize${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>$({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&::before":$({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${qo.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:Rn(t.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${qo.active}`]:{boxShadow:`0px 0px 0px 14px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:Rn(t.palette[e.color].main,.16)}`},[`&.${qo.disabled}`]:{"&:hover":{boxShadow:"none"}}})),oue=Fe(eue,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t,ownerState:e})=>$({[`&.${qo.valueLabelOpen}`]:{transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:e.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},e.size==="small"&&{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),aue=Fe("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>CI(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t,ownerState:e,markActive:n})=>$({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})),lue=Fe("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>CI(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t,ownerState:e,markLabelActive:n})=>$({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})),cue=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${$e(a)}`,l&&`size${$e(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${$e(l)}`,a&&`thumbColor${$e(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return $t(c,Zce,o)},uue=({children:t})=>t,hue=C.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,h,f,g,m,y,x,b,w,v,E,T,P,R,M,k,O;const F=Ht({props:e,name:"MuiSlider"}),D=cu().direction==="rtl",{"aria-label":N,"aria-valuetext":j,"aria-labelledby":W,component:H="span",components:U={},componentsProps:X={},color:Y="primary",classes:Z,className:se,disableSwap:xe=!1,disabled:de=!1,getAriaLabel:Me,getAriaValueText:he,marks:Te=!1,max:le=100,min:ae=0,orientation:me="horizontal",size:oe="medium",step:_e=1,scale:pe=VN,slotProps:Pe,slots:we,track:Ye="normal",valueLabelDisplay:ke="off",valueLabelFormat:Oe=VN}=F,rt=Qe(F,tue),qe=$({},F,{isRtl:D,max:le,min:ae,classes:Z,disabled:de,disableSwap:xe,orientation:me,marks:Te,color:Y,size:oe,step:_e,scale:pe,track:Ye,valueLabelDisplay:ke,valueLabelFormat:Oe}),{axisProps:Ge,getRootProps:fn,getHiddenInputProps:Mt,getThumbProps:pt,open:Se,active:Ne,axis:Ke,focusedThumbIndex:je,range:Le,dragging:kt,marks:wt,values:Ot,trackOffset:Be,trackLeap:Tt,getThumbStyle:Gt}=Dse($({},qe,{rootRef:n}));qe.marked=wt.length>0&&wt.some(Zt=>Zt.label),qe.dragging=kt,qe.focusedThumbIndex=je;const on=cue(qe),Dr=(r=(i=we==null?void 0:we.root)!=null?i:U.Root)!=null?r:nue,Gi=(s=(o=we==null?void 0:we.rail)!=null?o:U.Rail)!=null?s:rue,Io=(a=(l=we==null?void 0:we.track)!=null?l:U.Track)!=null?a:iue,fa=(c=(u=we==null?void 0:we.thumb)!=null?u:U.Thumb)!=null?c:sue,Ws=(h=(f=we==null?void 0:we.valueLabel)!=null?f:U.ValueLabel)!=null?h:oue,us=(g=(m=we==null?void 0:we.mark)!=null?m:U.Mark)!=null?g:aue,ee=(y=(x=we==null?void 0:we.markLabel)!=null?x:U.MarkLabel)!=null?y:lue,ne=(b=(w=we==null?void 0:we.input)!=null?w:U.Input)!=null?b:"input",ce=(v=Pe==null?void 0:Pe.root)!=null?v:X.root,De=(E=Pe==null?void 0:Pe.rail)!=null?E:X.rail,Ve=(T=Pe==null?void 0:Pe.track)!=null?T:X.track,vt=(P=Pe==null?void 0:Pe.thumb)!=null?P:X.thumb,ut=(R=Pe==null?void 0:Pe.valueLabel)!=null?R:X.valueLabel,ht=(M=Pe==null?void 0:Pe.mark)!=null?M:X.mark,Je=(k=Pe==null?void 0:Pe.markLabel)!=null?k:X.markLabel,Lt=(O=Pe==null?void 0:Pe.input)!=null?O:X.input,an=wi({elementType:Dr,getSlotProps:fn,externalSlotProps:ce,externalForwardedProps:rt,additionalProps:$({},Kce(Dr)&&{as:H}),ownerState:$({},qe,ce==null?void 0:ce.ownerState),className:[on.root,se]}),gt=wi({elementType:Gi,externalSlotProps:De,ownerState:qe,className:on.rail}),Pt=wi({elementType:Io,externalSlotProps:Ve,additionalProps:{style:$({},Ge[Ke].offset(Be),Ge[Ke].leap(Tt))},ownerState:$({},qe,Ve==null?void 0:Ve.ownerState),className:on.track}),ln=wi({elementType:fa,getSlotProps:pt,externalSlotProps:vt,ownerState:$({},qe,vt==null?void 0:vt.ownerState),className:on.thumb}),Bn=wi({elementType:Ws,externalSlotProps:ut,ownerState:$({},qe,ut==null?void 0:ut.ownerState),className:on.valueLabel}),tn=wi({elementType:us,externalSlotProps:ht,ownerState:qe,className:on.mark}),Cr=wi({elementType:ee,externalSlotProps:Je,ownerState:qe,className:on.markLabel}),hs=wi({elementType:ne,getSlotProps:Mt,externalSlotProps:Lt,ownerState:qe});return Q.jsxs(Dr,$({},an,{children:[Q.jsx(Gi,$({},gt)),Q.jsx(Io,$({},Pt)),wt.filter(Zt=>Zt.value>=ae&&Zt.value<=le).map((Zt,Jt)=>{const vr=i_(Zt.value,ae,le),br=Ge[Ke].offset(vr);let Wn;return Ye===!1?Wn=Ot.indexOf(Zt.value)!==-1:Wn=Ye==="normal"&&(Le?Zt.value>=Ot[0]&&Zt.value<=Ot[Ot.length-1]:Zt.value<=Ot[0])||Ye==="inverted"&&(Le?Zt.value<=Ot[0]||Zt.value>=Ot[Ot.length-1]:Zt.value>=Ot[0]),Q.jsxs(C.Fragment,{children:[Q.jsx(us,$({"data-index":Jt},tn,!Gc(us)&&{markActive:Wn},{style:$({},br,tn.style),className:at(tn.className,Wn&&on.markActive)})),Zt.label!=null?Q.jsx(ee,$({"aria-hidden":!0,"data-index":Jt},Cr,!Gc(ee)&&{markLabelActive:Wn},{style:$({},br,Cr.style),className:at(on.markLabel,Cr.className,Wn&&on.markLabelActive),children:Zt.label})):null]},Jt)}),Ot.map((Zt,Jt)=>{const vr=i_(Zt,ae,le),br=Ge[Ke].offset(vr),Wn=ke==="off"?uue:Ws;return Q.jsx(Wn,$({},!Gc(Wn)&&{valueLabelFormat:Oe,valueLabelDisplay:ke,value:typeof Oe=="function"?Oe(pe(Zt),Jt):Oe,index:Jt,open:Se===Jt||Ne===Jt||ke==="on",disabled:de},Bn,{children:Q.jsx(fa,$({"data-index":Jt},ln,{className:at(on.thumb,ln.className,Ne===Jt&&on.active,je===Jt&&on.focusVisible),style:$({},br,Gt(Jt),ln.style),children:Q.jsx(ne,$({"data-index":Jt,"aria-label":Me?Me(Jt):N,"aria-valuenow":pe(Zt),"aria-labelledby":W,"aria-valuetext":he?he(pe(Zt),Jt):j,value:Ot[Jt]},hs))}))}),Jt)})]}))}),vw=hue;function due(t){return jt("MuiTooltip",t)}const fue=Ft("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ic=fue,pue=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function gue(t){return Math.round(t*1e5)/1e5}const mue=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${$e(s.split("-")[0])}`],arrow:["arrow"]};return $t(o,due,e)},yue=Fe(Ij,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>$({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ic.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ic.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ic.arrow}`]:$({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ic.arrow}`]:$({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),vue=Fe("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${$e(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>$({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Rn(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${gue(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Ic.popper}[data-popper-placement*="left"] &`]:$({transformOrigin:"right center"},e.isRtl?$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):$({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ic.popper}[data-popper-placement*="right"] &`]:$({transformOrigin:"left center"},e.isRtl?$({marginRight:"14px"},e.touch&&{marginRight:"24px"}):$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ic.popper}[data-popper-placement*="top"] &`]:$({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ic.popper}[data-popper-placement*="bottom"] &`]:$({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),bue=Fe("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Rn(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Dv=!1,KS=null,og={x:0,y:0};function Nv(t,e){return n=>{e&&e(n),t(n)}}const _ue=C.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,h,f,g,m,y,x,b,w,v,E,T;const P=Ht({props:e,name:"MuiTooltip"}),{arrow:R=!1,children:M,components:k={},componentsProps:O={},describeChild:F=!1,disableFocusListener:I=!1,disableHoverListener:D=!1,disableInteractive:N=!1,disableTouchListener:j=!1,enterDelay:W=100,enterNextDelay:H=0,enterTouchDelay:U=700,followCursor:X=!1,id:Y,leaveDelay:Z=0,leaveTouchDelay:se=1500,onClose:xe,onOpen:de,open:Me,placement:he="bottom",PopperComponent:Te,PopperProps:le={},slotProps:ae={},slots:me={},title:oe,TransitionComponent:_e=JC,TransitionProps:pe}=P,Pe=Qe(P,pue),we=C.isValidElement(M)?M:Q.jsx("span",{children:M}),Ye=cu(),ke=Ye.direction==="rtl",[Oe,rt]=C.useState(),[qe,Ge]=C.useState(null),fn=C.useRef(!1),Mt=N||X,pt=C.useRef(),Se=C.useRef(),Ne=C.useRef(),Ke=C.useRef(),[je,Le]=kf({controlled:Me,default:!1,name:"Tooltip",state:"open"});let kt=je;const wt=Kx(Y),Ot=C.useRef(),Be=C.useCallback(()=>{Ot.current!==void 0&&(document.body.style.WebkitUserSelect=Ot.current,Ot.current=void 0),clearTimeout(Ke.current)},[]);C.useEffect(()=>()=>{clearTimeout(pt.current),clearTimeout(Se.current),clearTimeout(Ne.current),Be()},[Be]);const Tt=Et=>{clearTimeout(KS),Dv=!0,Le(!0),de&&!kt&&de(Et)},Gt=Pi(Et=>{clearTimeout(KS),KS=setTimeout(()=>{Dv=!1},800+Z),Le(!1),xe&&kt&&xe(Et),clearTimeout(pt.current),pt.current=setTimeout(()=>{fn.current=!1},Ye.transitions.duration.shortest)}),on=Et=>{fn.current&&Et.type!=="touchstart"||(Oe&&Oe.removeAttribute("title"),clearTimeout(Se.current),clearTimeout(Ne.current),W||Dv&&H?Se.current=setTimeout(()=>{Tt(Et)},Dv?H:W):Tt(Et))},Dr=Et=>{clearTimeout(Se.current),clearTimeout(Ne.current),Ne.current=setTimeout(()=>{Gt(Et)},Z)},{isFocusVisibleRef:Gi,onBlur:Io,onFocus:fa,ref:Ws}=Qx(),[,us]=C.useState(!1),ee=Et=>{Io(Et),Gi.current===!1&&(us(!1),Dr(Et))},ne=Et=>{Oe||rt(Et.currentTarget),fa(Et),Gi.current===!0&&(us(!0),on(Et))},ce=Et=>{fn.current=!0;const At=we.props;At.onTouchStart&&At.onTouchStart(Et)},De=on,Ve=Dr,vt=Et=>{ce(Et),clearTimeout(Ne.current),clearTimeout(pt.current),Be(),Ot.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ke.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ot.current,on(Et)},U)},ut=Et=>{we.props.onTouchEnd&&we.props.onTouchEnd(Et),Be(),clearTimeout(Ne.current),Ne.current=setTimeout(()=>{Gt(Et)},se)};C.useEffect(()=>{if(!kt)return;function Et(At){(At.key==="Escape"||At.key==="Esc")&&Gt(At)}return document.addEventListener("keydown",Et),()=>{document.removeEventListener("keydown",Et)}},[Gt,kt]);const ht=Hn(we.ref,Ws,rt,n);!oe&&oe!==0&&(kt=!1);const Je=C.useRef(),Lt=Et=>{const At=we.props;At.onMouseMove&&At.onMouseMove(Et),og={x:Et.clientX,y:Et.clientY},Je.current&&Je.current.update()},an={},gt=typeof oe=="string";F?(an.title=!kt&&gt&&!D?oe:null,an["aria-describedby"]=kt?wt:null):(an["aria-label"]=gt?oe:null,an["aria-labelledby"]=kt&&!gt?wt:null);const Pt=$({},an,Pe,we.props,{className:at(Pe.className,we.props.className),onTouchStart:ce,ref:ht},X?{onMouseMove:Lt}:{}),ln={};j||(Pt.onTouchStart=vt,Pt.onTouchEnd=ut),D||(Pt.onMouseOver=Nv(De,Pt.onMouseOver),Pt.onMouseLeave=Nv(Ve,Pt.onMouseLeave),Mt||(ln.onMouseOver=De,ln.onMouseLeave=Ve)),I||(Pt.onFocus=Nv(ne,Pt.onFocus),Pt.onBlur=Nv(ee,Pt.onBlur),Mt||(ln.onFocus=ne,ln.onBlur=ee));const Bn=C.useMemo(()=>{var Et;let At=[{name:"arrow",enabled:!!qe,options:{element:qe,padding:4}}];return(Et=le.popperOptions)!=null&&Et.modifiers&&(At=At.concat(le.popperOptions.modifiers)),$({},le.popperOptions,{modifiers:At})},[qe,le]),tn=$({},P,{isRtl:ke,arrow:R,disableInteractive:Mt,placement:he,PopperComponentProp:Te,touch:fn.current}),Cr=mue(tn),hs=(r=(i=me.popper)!=null?i:k.Popper)!=null?r:yue,Zt=(s=(o=(a=me.transition)!=null?a:k.Transition)!=null?o:_e)!=null?s:JC,Jt=(l=(c=me.tooltip)!=null?c:k.Tooltip)!=null?l:vue,vr=(u=(h=me.arrow)!=null?h:k.Arrow)!=null?u:bue,br=Ig(hs,$({},le,(f=ae.popper)!=null?f:O.popper,{className:at(Cr.popper,le==null?void 0:le.className,(g=(m=ae.popper)!=null?m:O.popper)==null?void 0:g.className)}),tn),Wn=Ig(Zt,$({},pe,(y=ae.transition)!=null?y:O.transition),tn),ds=Ig(Jt,$({},(x=ae.tooltip)!=null?x:O.tooltip,{className:at(Cr.tooltip,(b=(w=ae.tooltip)!=null?w:O.tooltip)==null?void 0:b.className)}),tn),Ii=Ig(vr,$({},(v=ae.arrow)!=null?v:O.arrow,{className:at(Cr.arrow,(E=(T=ae.arrow)!=null?T:O.arrow)==null?void 0:E.className)}),tn);return Q.jsxs(C.Fragment,{children:[C.cloneElement(we,Pt),Q.jsx(hs,$({as:Te??Ij,placement:he,anchorEl:X?{getBoundingClientRect:()=>({top:og.y,left:og.x,right:og.x,bottom:og.y,width:0,height:0})}:Oe,popperRef:Je,open:Oe?kt:!1,id:wt,transition:!0},ln,br,{popperOptions:Bn,children:({TransitionProps:Et})=>Q.jsx(Zt,$({timeout:Ye.transitions.duration.shorter},Et,Wn,{children:Q.jsxs(Jt,$({},ds,{children:[oe,R?Q.jsx(vr,$({},Ii,{ref:Ge})):null]}))}))}))]})}),l_=_ue;function xue(t){return jt("MuiToggleButton",t)}const wue=Ft("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Jd=wue,Eue=C.createContext({}),Hj=Eue,Sue=C.createContext(void 0),Wj=Sue;function Tue(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const Pue=["value"],Cue=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Aue=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${$e(s)}`,o]};return $t(a,xue,e)},Rue=Fe($0,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),$({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${Jd.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Jd.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:Rn(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:Rn(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),Iue=C.forwardRef(function(e,n){const r=C.useContext(Hj),{value:i}=r,s=Qe(r,Pue),o=C.useContext(Wj),a=Jx($({},s,{selected:Tue(e.value,i)}),e),l=Ht({props:a,name:"MuiToggleButton"}),{children:c,className:u,color:h="standard",disabled:f=!1,disableFocusRipple:g=!1,fullWidth:m=!1,onChange:y,onClick:x,selected:b,size:w="medium",value:v}=l,E=Qe(l,Cue),T=$({},l,{color:h,disabled:f,disableFocusRipple:g,fullWidth:m,size:w}),P=Aue(T),R=k=>{x&&(x(k,v),k.defaultPrevented)||y&&y(k,v)},M=o||"";return Q.jsx(Rue,$({className:at(s.className,P.root,u,M),disabled:f,focusRipple:!g,ref:n,onClick:R,onChange:y,value:v,ownerState:T,"aria-pressed":b},E,{children:c}))}),Mue=Iue;function Oue(t){return jt("MuiToggleButtonGroup",t)}const Lue=Ft("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),jn=Lue,kue=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Due=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${$e(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return $t(s,Oue,e)},Nue=Fe("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${jn.grouped}`]:e.grouped},{[`& .${jn.grouped}`]:e[`grouped${$e(n.orientation)}`]},{[`& .${jn.firstButton}`]:e.firstButton},{[`& .${jn.lastButton}`]:e.lastButton},{[`& .${jn.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>$({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${jn.grouped}`]:$({},t.orientation==="horizontal"?{[`&.${jn.selected} + .${jn.grouped}.${jn.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${jn.selected} + .${jn.grouped}.${jn.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${jn.firstButton},& .${jn.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${jn.lastButton},& .${jn.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${jn.firstButton},& .${jn.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${jn.lastButton},& .${jn.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${jn.lastButton}.${Jd.disabled},& .${jn.middleButton}.${Jd.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${jn.lastButton}.${Jd.disabled},& .${jn.middleButton}.${Jd.disabled}`]:{borderTop:"1px solid transparent"}})),Bue=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:o="standard",disabled:a=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:h="horizontal",size:f="medium",value:g}=r,m=Qe(r,kue),y=$({},r,{disabled:a,fullWidth:c,orientation:h,size:f}),x=Due(y),b=C.useCallback((R,M)=>{if(!u)return;const k=g&&g.indexOf(M);let O;g&&k>=0?(O=g.slice(),O.splice(k,1)):O=g?g.concat(M):[M],u(R,O)},[u,g]),w=C.useCallback((R,M)=>{u&&u(R,g===M?null:M)},[u,g]),v=C.useMemo(()=>({className:x.grouped,onChange:l?w:b,value:g,size:f,fullWidth:c,color:o,disabled:a}),[x.grouped,l,w,b,g,f,c,o,a]),E=Z$(i),T=E.length,P=R=>{const M=R===0,k=R===T-1;return M&&k?"":M?x.firstButton:k?x.lastButton:x.middleButton};return Q.jsx(Nue,$({role:"group",className:at(x.root,s),ref:n,ownerState:y},m,{children:Q.jsx(Hj.Provider,{value:v,children:E.map((R,M)=>Q.jsx(Wj.Provider,{value:P(M),children:R},M))})}))}),Fue=Bue;var Xj={exports:{}},H0={},eA={exports:{}};(function(t,e){(function(n,r){r(e)})(es,function(n){function r(le){return function(me,oe,_e,pe,Pe,we,Ye){return le(me,oe,Ye)}}function i(le){return function(me,oe,_e,pe){if(!me||!oe||typeof me!="object"||typeof oe!="object")return le(me,oe,_e,pe);var Pe=pe.get(me),we=pe.get(oe);if(Pe&&we)return Pe===oe&&we===me;pe.set(me,oe),pe.set(oe,me);var Ye=le(me,oe,_e,pe);return pe.delete(me),pe.delete(oe),Ye}}function s(le,ae){var me={};for(var oe in le)me[oe]=le[oe];for(var oe in ae)me[oe]=ae[oe];return me}function o(le){return le.constructor===Object||le.constructor==null}function a(le){return typeof le.then=="function"}function l(le,ae){return le===ae||le!==le&&ae!==ae}var c="[object Arguments]",u="[object Boolean]",h="[object Date]",f="[object RegExp]",g="[object Map]",m="[object Number]",y="[object Object]",x="[object Set]",b="[object String]",w=Object.prototype.toString;function v(le){var ae=le.areArraysEqual,me=le.areDatesEqual,oe=le.areMapsEqual,_e=le.areObjectsEqual,pe=le.areRegExpsEqual,Pe=le.areSetsEqual,we=le.createIsNestedEqual,Ye=we(ke);function ke(Oe,rt,qe){if(Oe===rt)return!0;if(!Oe||!rt||typeof Oe!="object"||typeof rt!="object")return Oe!==Oe&&rt!==rt;if(o(Oe)&&o(rt))return _e(Oe,rt,Ye,qe);var Ge=Array.isArray(Oe),fn=Array.isArray(rt);if(Ge||fn)return Ge===fn&&ae(Oe,rt,Ye,qe);var Mt=w.call(Oe);return Mt!==w.call(rt)?!1:Mt===h?me(Oe,rt,Ye,qe):Mt===f?pe(Oe,rt,Ye,qe):Mt===g?oe(Oe,rt,Ye,qe):Mt===x?Pe(Oe,rt,Ye,qe):Mt===y||Mt===c?a(Oe)||a(rt)?!1:_e(Oe,rt,Ye,qe):Mt===u||Mt===m||Mt===b?l(Oe.valueOf(),rt.valueOf()):!1}return ke}function E(le,ae,me,oe){var _e=le.length;if(ae.length!==_e)return!1;for(;_e-- >0;)if(!me(le[_e],ae[_e],_e,_e,le,ae,oe))return!1;return!0}var T=i(E);function P(le,ae){return l(le.valueOf(),ae.valueOf())}function R(le,ae,me,oe){var _e=le.size===ae.size;if(!_e)return!1;if(!le.size)return!0;var pe={},Pe=0;return le.forEach(function(we,Ye){if(_e){var ke=!1,Oe=0;ae.forEach(function(rt,qe){!ke&&!pe[Oe]&&(ke=me(Ye,qe,Pe,Oe,le,ae,oe)&&me(we,rt,Ye,qe,le,ae,oe))&&(pe[Oe]=!0),Oe++}),Pe++,_e=ke}}),_e}var M=i(R),k="_owner",O=Object.prototype.hasOwnProperty;function F(le,ae,me,oe){var _e=Object.keys(le),pe=_e.length;if(Object.keys(ae).length!==pe)return!1;for(var Pe;pe-- >0;){if(Pe=_e[pe],Pe===k){var we=!!le.$$typeof,Ye=!!ae.$$typeof;if((we||Ye)&&we!==Ye)return!1}if(!O.call(ae,Pe)||!me(le[Pe],ae[Pe],Pe,Pe,le,ae,oe))return!1}return!0}var I=i(F);function D(le,ae){return le.source===ae.source&&le.flags===ae.flags}function N(le,ae,me,oe){var _e=le.size===ae.size;if(!_e)return!1;if(!le.size)return!0;var pe={};return le.forEach(function(Pe,we){if(_e){var Ye=!1,ke=0;ae.forEach(function(Oe,rt){!Ye&&!pe[ke]&&(Ye=me(Pe,Oe,we,rt,le,ae,oe))&&(pe[ke]=!0),ke++}),_e=Ye}}),_e}var j=i(N),W=Object.freeze({areArraysEqual:E,areDatesEqual:P,areMapsEqual:R,areObjectsEqual:F,areRegExpsEqual:D,areSetsEqual:N,createIsNestedEqual:r}),H=Object.freeze({areArraysEqual:T,areDatesEqual:P,areMapsEqual:M,areObjectsEqual:I,areRegExpsEqual:D,areSetsEqual:j,createIsNestedEqual:r}),U=v(W);function X(le,ae){return U(le,ae,void 0)}var Y=v(s(W,{createIsNestedEqual:function(){return l}}));function Z(le,ae){return Y(le,ae,void 0)}var se=v(H);function xe(le,ae){return se(le,ae,new WeakMap)}var de=v(s(H,{createIsNestedEqual:function(){return l}}));function Me(le,ae){return de(le,ae,new WeakMap)}function he(le){return v(s(W,le(W)))}function Te(le){var ae=v(s(H,le(H)));return function(me,oe,_e){return _e===void 0&&(_e=new WeakMap),ae(me,oe,_e)}}n.circularDeepEqual=xe,n.circularShallowEqual=Me,n.createCustomCircularEqual=Te,n.createCustomEqual=he,n.deepEqual=X,n.sameValueZeroEqual=l,n.shallowEqual=Z,Object.defineProperty(n,"__esModule",{value:!0})})})(eA,eA.exports);var VI=eA.exports,tA={exports:{}};function Yj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Yj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GN(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Yj(t))&&(r&&(r+=" "),r+=e);return r}tA.exports=GN,tA.exports.clsx=GN;var GI=tA.exports,Vt={},zue=function(e,n,r){return e===n?!0:e.className===n.className&&r(e.style,n.style)&&e.width===n.width&&e.autoSize===n.autoSize&&e.cols===n.cols&&e.draggableCancel===n.draggableCancel&&e.draggableHandle===n.draggableHandle&&r(e.verticalCompact,n.verticalCompact)&&r(e.compactType,n.compactType)&&r(e.layout,n.layout)&&r(e.margin,n.margin)&&r(e.containerPadding,n.containerPadding)&&e.rowHeight===n.rowHeight&&e.maxRows===n.maxRows&&e.isBounded===n.isBounded&&e.isDraggable===n.isDraggable&&e.isResizable===n.isResizable&&e.allowOverlap===n.allowOverlap&&e.preventCollision===n.preventCollision&&e.useCSSTransforms===n.useCSSTransforms&&e.transformScale===n.transformScale&&e.isDroppable===n.isDroppable&&r(e.resizeHandles,n.resizeHandles)&&r(e.resizeHandle,n.resizeHandle)&&e.onLayoutChange===n.onLayoutChange&&e.onDragStart===n.onDragStart&&e.onDrag===n.onDrag&&e.onDragStop===n.onDragStop&&e.onResizeStart===n.onResizeStart&&e.onResize===n.onResize&&e.onResizeStop===n.onResizeStop&&e.onDrop===n.onDrop&&r(e.droppingItem,n.droppingItem)&&r(e.innerRef,n.innerRef)};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.bottom=HI;Vt.childrenEqual=jue;Vt.cloneLayout=qj;Vt.cloneLayoutItem=lh;Vt.collides=bw;Vt.compact=Zj;Vt.compactItem=Qj;Vt.compactType=nhe;Vt.correctBounds=Jj;Vt.fastPositionEqual=Vue;Vt.fastRGLPropsEqual=void 0;Vt.getAllCollisions=e8;Vt.getFirstCollision=Zu;Vt.getLayoutItem=WI;Vt.getStatics=XI;Vt.modifyLayout=Kj;Vt.moveElement=Og;Vt.moveElementAwayFromCollision=rA;Vt.noop=void 0;Vt.perc=Hue;Vt.resizeItemInDirection=Zue;Vt.setTopLeft=Jue;Vt.setTransform=Que;Vt.sortLayoutItems=JI;Vt.sortLayoutItemsByColRow=s8;Vt.sortLayoutItemsByRowCol=i8;Vt.synchronizeLayoutWithChildren=ehe;Vt.validateLayout=the;Vt.withLayoutItem=$ue;var HN=VI,Mg=Uue(C);function Uue(t){return t&&t.__esModule?t:{default:t}}function HI(t){let e=0,n;for(let r=0,i=t.length;r<i;r++)n=t[r].y+t[r].h,n>e&&(e=n);return e}function qj(t){const e=Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=lh(t[n]);return e}function Kj(t,e){const n=Array(t.length);for(let r=0,i=t.length;r<i;r++)e.i===t[r].i?n[r]=e:n[r]=t[r];return n}function $ue(t,e,n){let r=WI(t,e);return r?(r=n(lh(r)),t=Kj(t,r),[t,r]):[t,null]}function lh(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function jue(t,e){return(0,HN.deepEqual)(Mg.default.Children.map(t,n=>n==null?void 0:n.key),Mg.default.Children.map(e,n=>n==null?void 0:n.key))&&(0,HN.deepEqual)(Mg.default.Children.map(t,n=>n==null?void 0:n.props["data-grid"]),Mg.default.Children.map(e,n=>n==null?void 0:n.props["data-grid"]))}Vt.fastRGLPropsEqual=zue;function Vue(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function bw(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Zj(t,e,n,r){const i=XI(t),s=JI(t,e),o=Array(t.length);for(let a=0,l=s.length;a<l;a++){let c=lh(s[a]);c.static||(c=Qj(i,c,e,n,s,r),i.push(c)),o[t.indexOf(s[a])]=c,c.moved=!1}return o}const Gue={x:"w",y:"h"};function nA(t,e,n,r){const i=Gue[r];e[r]+=1;const s=t.map(o=>o.i).indexOf(e.i);for(let o=s+1;o<t.length;o++){const a=t[o];if(!a.static){if(a.y>e.y+e.h)break;bw(e,a)&&nA(t,a,n+e[i],r)}}e[r]=n}function Qj(t,e,n,r,i,s){const o=n==="vertical",a=n==="horizontal";if(o)for(e.y=Math.min(HI(t),e.y);e.y>0&&!Zu(t,e);)e.y--;else if(a)for(;e.x>0&&!Zu(t,e);)e.x--;let l;for(;(l=Zu(t,e))&&!(n===null&&s);)if(a?nA(i,e,l.x+l.w,"x"):nA(i,e,l.y+l.h,"y"),a&&e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!Zu(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function Jj(t,e){const n=XI(t);for(let r=0,i=t.length;r<i;r++){const s=t[r];if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)n.push(s);else for(;Zu(n,s);)s.y++}return t}function WI(t,e){for(let n=0,r=t.length;n<r;n++)if(t[n].i===e)return t[n]}function Zu(t,e){for(let n=0,r=t.length;n<r;n++)if(bw(t[n],e))return t[n]}function e8(t,e){return t.filter(n=>bw(n,e))}function XI(t){return t.filter(e=>e.static)}function Og(t,e,n,r,i,s,o,a,l){if(e.static&&e.isDraggable!==!0||e.y===r&&e.x===n)return t;`${e.i}${String(n)}${String(r)}${e.x}${e.y}`;const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof r=="number"&&(e.y=r),e.moved=!0;let h=JI(t,o);(o==="vertical"&&typeof r=="number"?u>=r:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(h=h.reverse());const g=e8(h,e),m=g.length>0;if(m&&l)return qj(t);if(m&&s)return`${e.i}`,e.x=c,e.y=u,e.moved=!1,t;for(let y=0,x=g.length;y<x;y++){const b=g[y];`${e.i}${e.x}${e.y}${b.i}${b.x}${b.y}`,!b.moved&&(b.static?t=rA(t,b,e,i,o):t=rA(t,e,b,i,o))}return t}function rA(t,e,n,r,i,s){const o=i==="horizontal",a=i==="vertical",l=e.static;if(r){r=!1;const h={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Zu(t,h),g=f&&f.y+f.h>e.y,m=f&&e.x+e.w>f.x;if(f){if(g&&a)return Og(t,n,void 0,e.y+1,r,l,i);if(g&&i==null)return e.y=n.y,n.y=n.y+n.h,t;if(m&&o)return Og(t,e,n.x,void 0,r,l,i)}else return`${n.i}${h.x}${h.y}`,Og(t,n,o?h.x:void 0,a?h.y:void 0,r,l,i)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c==null&&u==null?t:Og(t,n,o?n.x+1:void 0,a?n.y+1:void 0,r,l,i)}function Hue(t){return t*100+"%"}const t8=(t,e,n,r)=>t+n>r?e:n,n8=(t,e,n)=>t<0?e:n,r8=t=>Math.max(0,t),YI=t=>Math.max(0,t),qI=(t,e,n)=>{let{left:r,height:i,width:s}=e;const o=t.top-(i-t.height);return{left:r,width:s,height:n8(o,t.height,i),top:YI(o)}},KI=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{top:r,height:s,width:t8(t.left,t.width,o,n),left:r8(i)}},ZI=(t,e,n)=>{let{top:r,height:i,width:s}=e;const o=t.left-(s-t.width);return{height:i,width:o<0?t.width:t8(t.left,t.width,s,n),top:YI(r),left:r8(o)}},QI=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{width:o,left:i,height:n8(r,t.height,s),top:YI(r)}},Wue=function(){return qI(arguments.length<=0?void 0:arguments[0],KI(...arguments))},Xue=function(){return qI(arguments.length<=0?void 0:arguments[0],ZI(...arguments))},Yue=function(){return QI(arguments.length<=0?void 0:arguments[0],KI(...arguments))},que=function(){return QI(arguments.length<=0?void 0:arguments[0],ZI(...arguments))},Kue={n:qI,ne:Wue,e:KI,se:Yue,s:QI,sw:que,w:ZI,nw:Xue};function Zue(t,e,n,r){const i=Kue[t];return i?i(e,{...e,...n},r):n}function Que(t){let{top:e,left:n,width:r,height:i}=t;const s=`translate(${n}px,${e}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function Jue(t){let{top:e,left:n,width:r,height:i}=t;return{top:`${e}px`,left:`${n}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function JI(t,e){return e==="horizontal"?s8(t):e==="vertical"?i8(t):t}function i8(t){return t.slice(0).sort(function(e,n){return e.y>n.y||e.y===n.y&&e.x>n.x?1:e.y===n.y&&e.x===n.x?0:-1})}function s8(t){return t.slice(0).sort(function(e,n){return e.x>n.x||e.x===n.x&&e.y>n.y?1:-1})}function ehe(t,e,n,r,i){t=t||[];const s=[];Mg.default.Children.forEach(e,a=>{if((a==null?void 0:a.key)==null)return;const l=WI(t,String(a.key)),c=a.props["data-grid"];l&&c==null?s.push(lh(l)):c?s.push(lh({...c,i:a.key})):s.push(lh({w:1,h:1,x:0,y:HI(s),i:String(a.key)}))});const o=Jj(s,{cols:n});return i?o:Zj(o,r,n)}function the(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,i=t.length;r<i;r++){const s=t[r];for(let o=0;o<n.length;o++)if(typeof s[n[o]]!="number")throw new Error("ReactGridLayout: "+e+"["+r+"]."+n[o]+" must be a number!")}}function nhe(t){const{verticalCompact:e,compactType:n}=t||{};return e===!1?null:n}const rhe=()=>{};Vt.noop=rhe;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.calcGridColWidth=_w;il.calcGridItemPosition=ihe;il.calcGridItemWHPx=iA;il.calcWH=ohe;il.calcXY=she;il.clamp=Qu;function _w(t){const{margin:e,containerPadding:n,containerWidth:r,cols:i}=t;return(r-e[0]*(i-1)-n[0]*2)/i}function iA(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function ihe(t,e,n,r,i,s){const{margin:o,containerPadding:a,rowHeight:l}=t,c=_w(t),u={};return s&&s.resizing?(u.width=Math.round(s.resizing.width),u.height=Math.round(s.resizing.height)):(u.width=iA(r,c,o[0]),u.height=iA(i,l,o[1])),s&&s.dragging?(u.top=Math.round(s.dragging.top),u.left=Math.round(s.dragging.left)):s&&s.resizing&&typeof s.resizing.top=="number"&&typeof s.resizing.left=="number"?(u.top=Math.round(s.resizing.top),u.left=Math.round(s.resizing.left)):(u.top=Math.round((l+o[1])*n+a[1]),u.left=Math.round((c+o[0])*e+a[0])),u}function she(t,e,n,r,i){const{margin:s,cols:o,rowHeight:a,maxRows:l}=t,c=_w(t);let u=Math.round((n-s[0])/(c+s[0])),h=Math.round((e-s[1])/(a+s[1]));return u=Qu(u,0,o-r),h=Qu(h,0,l-i),{x:u,y:h}}function ohe(t,e,n,r,i,s){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=_w(t);let h=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1])),g=Qu(h,0,l-r),m=Qu(f,0,a-i);return["sw","w","nw"].indexOf(s)!==-1&&(g=Qu(h,0,l)),["nw","n","ne"].indexOf(s)!==-1&&(m=Qu(f,0,a)),{w:g,h:m}}function Qu(t,e,n){return Math.max(Math.min(t,n),e)}var xw={},ww={exports:{}},o8={};function a8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=a8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function WN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=a8(t))&&(r&&(r+=" "),r+=e);return r}const ahe=Object.freeze(Object.defineProperty({__proto__:null,clsx:WN,default:WN},Symbol.toStringTag,{value:"Module"})),lhe=dn(ahe);var ur={},sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.dontSetMe=fhe;sl.findInArray=che;sl.int=dhe;sl.isFunction=uhe;sl.isNum=hhe;function che(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function uhe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function hhe(t){return typeof t=="number"&&!isNaN(t)}function dhe(t){return parseInt(t,10)}function fhe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.browserPrefixToKey=c8;kh.browserPrefixToStyle=phe;kh.default=void 0;kh.getPrefix=l8;const ZS=["Moz","Webkit","O","ms"];function l8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<ZS.length;r++)if(c8(e,ZS[r])in n)return ZS[r];return""}function c8(t,e){return e?"".concat(e).concat(ghe(t)):t}function phe(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function ghe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}kh.default=l8();Object.defineProperty(ur,"__esModule",{value:!0});ur.addClassName=d8;ur.addEvent=vhe;ur.addUserSelectStyles=Rhe;ur.createCSSTransform=The;ur.createSVGTransform=Phe;ur.getTouch=Che;ur.getTouchIdentifier=Ahe;ur.getTranslation=eM;ur.innerHeight=whe;ur.innerWidth=Ehe;ur.matchesSelector=h8;ur.matchesSelectorAndParentsTo=yhe;ur.offsetXYFromParent=She;ur.outerHeight=_he;ur.outerWidth=xhe;ur.removeClassName=f8;ur.removeEvent=bhe;ur.removeUserSelectStyles=Ihe;var Ls=sl,XN=mhe(kh);function u8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(u8=function(r){return r?n:e})(t)}function mhe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=u8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}let Bv="";function h8(t,e){return Bv||(Bv=(0,Ls.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ls.isFunction)(t[n])})),(0,Ls.isFunction)(t[Bv])?t[Bv](e):!1}function yhe(t,e,n){let r=t;do{if(h8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function vhe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function bhe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function _he(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ls.int)(n.borderTopWidth),e+=(0,Ls.int)(n.borderBottomWidth),e}function xhe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ls.int)(n.borderLeftWidth),e+=(0,Ls.int)(n.borderRightWidth),e}function whe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ls.int)(n.paddingTop),e-=(0,Ls.int)(n.paddingBottom),e}function Ehe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ls.int)(n.paddingLeft),e-=(0,Ls.int)(n.paddingRight),e}function She(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:s,y:o}}function The(t,e){const n=eM(t,e,"px");return{[(0,XN.browserPrefixToKey)("transform",XN.default)]:n}}function Phe(t,e){return eM(t,e,"")}function eM(t,e,n){let{x:r,y:i}=t,s="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);s="translate(".concat(o,", ").concat(a,")")+s}return s}function Che(t,e){return t.targetTouches&&(0,Ls.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Ls.findInArray)(t.changedTouches,n=>e===n.identifier)}function Ahe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Rhe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&d8(t.body,"react-draggable-transparent-selection")}function Ihe(t){if(t)try{if(t.body&&f8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function d8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function f8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.canDragX=Lhe;ol.canDragY=khe;ol.createCoreData=Nhe;ol.createDraggableData=Bhe;ol.getBoundPosition=Mhe;ol.getControlPosition=Dhe;ol.snapToGrid=Ohe;var _s=sl,ef=ur;function Mhe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Fhe(r);const i=tM(t);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,_s.int)(u.paddingLeft)+(0,_s.int)(c.marginLeft),top:-i.offsetTop+(0,_s.int)(u.paddingTop)+(0,_s.int)(c.marginTop),right:(0,ef.innerWidth)(l)-(0,ef.outerWidth)(i)-i.offsetLeft+(0,_s.int)(u.paddingRight)-(0,_s.int)(c.marginRight),bottom:(0,ef.innerHeight)(l)-(0,ef.outerHeight)(i)-i.offsetTop+(0,_s.int)(u.paddingBottom)-(0,_s.int)(c.marginBottom)}}return(0,_s.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,_s.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,_s.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,_s.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Ohe(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function Lhe(t){return t.props.axis==="both"||t.props.axis==="x"}function khe(t){return t.props.axis==="both"||t.props.axis==="y"}function Dhe(t,e,n){const r=typeof e=="number"?(0,ef.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=tM(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,ef.offsetXYFromParent)(r||t,s,n.props.scale)}function Nhe(t,e,n){const r=!(0,_s.isNum)(t.lastX),i=tM(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Bhe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Fhe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function tM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Ew={},Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});Sw.default=zhe;function zhe(){}Object.defineProperty(Ew,"__esModule",{value:!0});Ew.default=void 0;var QS=$he(C),qi=nM(Hl),Uhe=nM(Gl),yi=ur,cc=ol,JS=sl,ag=nM(Sw);function nM(t){return t&&t.__esModule?t:{default:t}}function p8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(p8=function(r){return r?n:e})(t)}function $he(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=p8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function ki(t,e,n){return e=jhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jhe(t){var e=Vhe(t,"string");return typeof e=="symbol"?e:String(e)}function Vhe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Uo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let uc=Uo.mouse,Tw=class extends QS.Component{constructor(){super(...arguments),ki(this,"dragging",!1),ki(this,"lastX",NaN),ki(this,"lastY",NaN),ki(this,"touchIdentifier",null),ki(this,"mounted",!1),ki(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,yi.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,yi.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,yi.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,cc.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,cc.createCoreData)(this,o,a);(0,ag.default)("DraggableCore: handleDragStart: %j",l),(0,ag.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,yi.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,yi.addEvent)(r,uc.move,this.handleDrag),(0,yi.addEvent)(r,uc.stop,this.handleDragStop))}),ki(this,"handleDrag",e=>{const n=(0,cc.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,cc.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,cc.createCoreData)(this,r,i);if((0,ag.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),ki(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,cc.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,cc.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,cc.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,yi.removeUserSelectStyles)(a.ownerDocument),(0,ag.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,ag.default)("DraggableCore: Removing handlers"),(0,yi.removeEvent)(a.ownerDocument,uc.move,this.handleDrag),(0,yi.removeEvent)(a.ownerDocument,uc.stop,this.handleDragStop))}),ki(this,"onMouseDown",e=>(uc=Uo.mouse,this.handleDragStart(e))),ki(this,"onMouseUp",e=>(uc=Uo.mouse,this.handleDragStop(e))),ki(this,"onTouchStart",e=>(uc=Uo.touch,this.handleDragStart(e))),ki(this,"onTouchEnd",e=>(uc=Uo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,yi.addEvent)(e,Uo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,yi.removeEvent)(n,Uo.mouse.move,this.handleDrag),(0,yi.removeEvent)(n,Uo.touch.move,this.handleDrag),(0,yi.removeEvent)(n,Uo.mouse.stop,this.handleDragStop),(0,yi.removeEvent)(n,Uo.touch.stop,this.handleDragStop),(0,yi.removeEvent)(e,Uo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,yi.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Uhe.default.findDOMNode(this)}render(){return QS.cloneElement(QS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Ew.default=Tw;ki(Tw,"displayName","DraggableCore");ki(Tw,"propTypes",{allowAnyClick:qi.default.bool,children:qi.default.node.isRequired,disabled:qi.default.bool,enableUserSelectHack:qi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:qi.default.arrayOf(qi.default.number),handle:qi.default.string,cancel:qi.default.string,nodeRef:qi.default.object,onStart:qi.default.func,onDrag:qi.default.func,onStop:qi.default.func,onMouseDown:qi.default.func,scale:qi.default.number,className:JS.dontSetMe,style:JS.dontSetMe,transform:JS.dontSetMe});ki(Tw,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=f(C),n=u(Hl),r=u(Gl),i=u(lhe),s=ur,o=ol,a=sl,l=u(Ew),c=u(Sw);function u(w){return w&&w.__esModule?w:{default:w}}function h(w){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(h=function(T){return T?E:v})(w)}function f(w,v){if(!v&&w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var E=h(v);if(E&&E.has(w))return E.get(w);var T={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in w)if(R!=="default"&&Object.prototype.hasOwnProperty.call(w,R)){var M=P?Object.getOwnPropertyDescriptor(w,R):null;M&&(M.get||M.set)?Object.defineProperty(T,R,M):T[R]=w[R]}return T.default=w,E&&E.set(w,T),T}function g(){return g=Object.assign?Object.assign.bind():function(w){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(w[T]=E[T])}return w},g.apply(this,arguments)}function m(w,v,E){return v=y(v),v in w?Object.defineProperty(w,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[v]=E,w}function y(w){var v=x(w,"string");return typeof v=="symbol"?v:String(v)}function x(w,v){if(typeof w!="object"||w===null)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var T=E.call(w,v||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(w)}class b extends e.Component{static getDerivedStateFromProps(v,E){let{position:T}=v,{prevPropsPosition:P}=E;return T&&(!P||T.x!==P.x||T.y!==P.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:P}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(v){super(v),m(this,"onDragStart",(E,T)=>{if((0,c.default)("Draggable: onDragStart: %j",T),this.props.onStart(E,(0,o.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(E,T)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",T);const P=(0,o.createDraggableData)(this,T),R={x:P.x,y:P.y,slackX:0,slackY:0};if(this.props.bounds){const{x:k,y:O}=R;R.x+=this.state.slackX,R.y+=this.state.slackY;const[F,I]=(0,o.getBoundPosition)(this,R.x,R.y);R.x=F,R.y=I,R.slackX=this.state.slackX+(k-R.x),R.slackY=this.state.slackY+(O-R.y),P.x=R.x,P.y=R.y,P.deltaX=R.x-this.state.x,P.deltaY=R.y-this.state.y}if(this.props.onDrag(E,P)===!1)return!1;this.setState(R)}),m(this,"onDragStop",(E,T)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,T))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",T);const R={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:k,y:O}=this.props.position;R.x=k,R.y=O}this.setState(R)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:T,defaultPosition:P,defaultClassName:R,defaultClassNameDragging:M,defaultClassNameDragged:k,position:O,positionOffset:F,scale:I,...D}=this.props;let N={},j=null;const H=!!!O||this.state.dragging,U=O||P,X={x:(0,o.canDragX)(this)&&H?this.state.x:U.x,y:(0,o.canDragY)(this)&&H?this.state.y:U.y};this.state.isElementSVG?j=(0,s.createSVGTransform)(X,F):N=(0,s.createCSSTransform)(X,F);const Y=(0,i.default)(T.props.className||"",R,{[M]:this.state.dragging,[k]:this.state.dragged});return e.createElement(l.default,g({},D,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(T),{className:Y,style:{...T.props.style,...N},transform:j}))}}t.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(o8);const{default:g8,DraggableCore:Ghe}=o8;ww.exports=g8;ww.exports.default=g8;ww.exports.DraggableCore=Ghe;var m8=ww.exports,Pw={exports:{}},W0={},rM={};rM.__esModule=!0;rM.cloneElement=Khe;var Hhe=Whe(C);function Whe(t){return t&&t.__esModule?t:{default:t}}function YN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(n),!0).forEach(function(r){Xhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xhe(t,e,n){return e=Yhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yhe(t){var e=qhe(t,"string");return typeof e=="symbol"?e:String(e)}function qhe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Khe(t,e){return e.style&&t.props.style&&(e.style=qN(qN({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),Hhe.default.cloneElement(t,e)}var X0={};X0.__esModule=!0;X0.resizableProps=void 0;var Nt=Zhe(Hl);function Zhe(t){return t&&t.__esModule?t:{default:t}}var Qhe={axis:Nt.default.oneOf(["both","x","y","none"]),className:Nt.default.string,children:Nt.default.element.isRequired,draggableOpts:Nt.default.shape({allowAnyClick:Nt.default.bool,cancel:Nt.default.string,children:Nt.default.node,disabled:Nt.default.bool,enableUserSelectHack:Nt.default.bool,offsetParent:Nt.default.node,grid:Nt.default.arrayOf(Nt.default.number),handle:Nt.default.string,nodeRef:Nt.default.object,onStart:Nt.default.func,onDrag:Nt.default.func,onStop:Nt.default.func,onMouseDown:Nt.default.func,scale:Nt.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var s;return(s=Nt.default.number).isRequired.apply(s,n)}return Nt.default.number.apply(Nt.default,n)},handle:Nt.default.oneOfType([Nt.default.node,Nt.default.func]),handleSize:Nt.default.arrayOf(Nt.default.number),lockAspectRatio:Nt.default.bool,maxConstraints:Nt.default.arrayOf(Nt.default.number),minConstraints:Nt.default.arrayOf(Nt.default.number),onResizeStop:Nt.default.func,onResizeStart:Nt.default.func,onResize:Nt.default.func,resizeHandles:Nt.default.arrayOf(Nt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Nt.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var s;return(s=Nt.default.number).isRequired.apply(s,n)}return Nt.default.number.apply(Nt.default,n)}};X0.resizableProps=Qhe;W0.__esModule=!0;W0.default=void 0;var lg=rde(C),Jhe=m8,ede=rM,tde=X0,nde=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function y8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(y8=function(i){return i?n:e})(t)}function rde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=y8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function sA(){return sA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sA.apply(this,arguments)}function ide(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KN(Object(n),!0).forEach(function(r){sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sde(t,e,n){return e=ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=ade(t,"string");return typeof e=="symbol"?e:String(e)}function ade(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lde(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,oA(t,e)}function oA(t,e){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oA(t,e)}var iM=function(t){lde(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,s){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[i,s];if(c){var u=this.props.width/this.props.height,h=i-this.props.width,f=s-this.props.height;Math.abs(h)>Math.abs(f*u)?s=i/u:i=s*u}var g=i,m=s,y=this.slack||[0,0],x=y[0],b=y[1];return i+=x,s+=b,a&&(i=Math.max(a[0],i),s=Math.max(a[1],s)),l&&(i=Math.min(l[0],i),s=Math.min(l[1],s)),this.slack=[x+(g-i),b+(m-s)],[i,s]},n.resizeHandler=function(i,s){var o=this;return function(a,l){var c=l.node,u=l.deltaX,h=l.deltaY;i==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&s!=="n"&&s!=="s",g=(o.props.axis==="both"||o.props.axis==="y")&&s!=="e"&&s!=="w";if(!(!f&&!g)){var m=s[0],y=s[s.length-1],x=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(y==="w"){var b=x.left-o.lastHandleRect.left;u+=b}if(m==="n"){var w=x.top-o.lastHandleRect.top;h+=w}}o.lastHandleRect=x,y==="w"&&(u=-u),m==="n"&&(h=-h);var v=o.props.width+(f?u/o.props.transformScale:0),E=o.props.height+(g?h/o.props.transformScale:0),T=o.runConstraints(v,E);v=T[0],E=T[1];var P=v!==o.props.width||E!==o.props.height,R=typeof o.props[i]=="function"?o.props[i]:null,M=i==="onResize"&&!P;R&&!M&&(a.persist==null||a.persist(),R(a,{node:c,size:{width:v,height:E},handle:s})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,s){var o=this.props.handle;if(!o)return lg.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:s});if(typeof o=="function")return o(i,s);var a=typeof o.type=="string",l=eT({ref:s},a?{}:{handleAxis:i});return lg.cloneElement(o,l)},n.render=function(){var i=this,s=this.props,o=s.children,a=s.className,l=s.draggableOpts;s.width,s.height,s.handle,s.handleSize,s.lockAspectRatio,s.axis,s.minConstraints,s.maxConstraints,s.onResize,s.onResizeStop,s.onResizeStart;var c=s.resizeHandles;s.transformScale;var u=ide(s,nde);return(0,ede.cloneElement)(o,eT(eT({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(h){var f,g=(f=i.handleRefs[h])!=null?f:i.handleRefs[h]=lg.createRef();return lg.createElement(Jhe.DraggableCore,sA({},l,{nodeRef:g,key:"resizableHandle-"+h,onStop:i.resizeHandler("onResizeStop",h),onStart:i.resizeHandler("onResizeStart",h),onDrag:i.resizeHandler("onResize",h)}),i.renderResizeHandle(h,g))}))}))},e}(lg.Component);W0.default=iM;iM.propTypes=tde.resizableProps;iM.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Cw={};Cw.__esModule=!0;Cw.default=void 0;var tT=fde(C),cde=v8(Hl),ude=v8(W0),hde=X0,dde=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function v8(t){return t&&t.__esModule?t:{default:t}}function b8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(b8=function(i){return i?n:e})(t)}function fde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=b8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function aA(){return aA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aA.apply(this,arguments)}function ZN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZN(Object(n),!0).forEach(function(r){pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pde(t,e,n){return e=gde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gde(t){var e=mde(t,"string");return typeof e=="symbol"?e:String(e)}function mde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vde(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lA(t,e)}var _8=function(t){vde(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(a,l){var c=l.size;r.props.onResize?(a.persist==null||a.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(a,l)})):r.setState(c)},r}e.getDerivedStateFromProps=function(i,s){return s.propsWidth!==i.width||s.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,s=i.handle,o=i.handleSize;i.onResize;var a=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,u=i.minConstraints,h=i.maxConstraints,f=i.lockAspectRatio,g=i.axis;i.width,i.height;var m=i.resizeHandles,y=i.style,x=i.transformScale,b=yde(i,dde);return tT.createElement(ude.default,{axis:g,draggableOpts:c,handle:s,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:h,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:x,width:this.state.width},tT.createElement("div",aA({},b,{style:c_(c_({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(tT.Component);Cw.default=_8;_8.propTypes=c_(c_({},hde.resizableProps),{},{children:cde.default.element});Pw.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};Pw.exports.Resizable=W0.default;Pw.exports.ResizableBox=Cw.default;var bde=Pw.exports,Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.resizeHandleType=Rl.resizeHandleAxesType=Rl.default=void 0;var Ut=x8(Hl),_de=x8(C);function x8(t){return t&&t.__esModule?t:{default:t}}const xde=Rl.resizeHandleAxesType=Ut.default.arrayOf(Ut.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),wde=Rl.resizeHandleType=Ut.default.oneOfType([Ut.default.node,Ut.default.func]);Rl.default={className:Ut.default.string,style:Ut.default.object,width:Ut.default.number,autoSize:Ut.default.bool,cols:Ut.default.number,draggableCancel:Ut.default.string,draggableHandle:Ut.default.string,verticalCompact:function(t){t.verticalCompact},compactType:Ut.default.oneOf(["vertical","horizontal"]),layout:function(t){var e=t.layout;e!==void 0&&Vt.validateLayout(e,"layout")},margin:Ut.default.arrayOf(Ut.default.number),containerPadding:Ut.default.arrayOf(Ut.default.number),rowHeight:Ut.default.number,maxRows:Ut.default.number,isBounded:Ut.default.bool,isDraggable:Ut.default.bool,isResizable:Ut.default.bool,allowOverlap:Ut.default.bool,preventCollision:Ut.default.bool,useCSSTransforms:Ut.default.bool,transformScale:Ut.default.number,isDroppable:Ut.default.bool,resizeHandles:xde,resizeHandle:wde,onLayoutChange:Ut.default.func,onDragStart:Ut.default.func,onDrag:Ut.default.func,onDragStop:Ut.default.func,onResizeStart:Ut.default.func,onResize:Ut.default.func,onResizeStop:Ut.default.func,onDrop:Ut.default.func,droppingItem:Ut.default.shape({i:Ut.default.string.isRequired,w:Ut.default.number.isRequired,h:Ut.default.number.isRequired}),children:function(t,e){const n=t[e],r={};_de.default.Children.forEach(n,function(i){if((i==null?void 0:i.key)!=null){if(r[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');r[i.key]=!0}})},innerRef:Ut.default.any};Object.defineProperty(xw,"__esModule",{value:!0});xw.default=void 0;var fd=sM(C),cn=sM(Hl),Ede=m8,Sde=bde,pd=Vt,ti=il,QN=Rl,Tde=sM(GI);function sM(t){return t&&t.__esModule?t:{default:t}}function Na(t,e,n){return e=Pde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Cde(t,"string");return typeof e=="symbol"?e:String(e)}function Cde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class oM extends fd.default.Component{constructor(){super(...arguments),Na(this,"state",{resizing:null,dragging:null,className:""}),Na(this,"elementRef",fd.default.createRef()),Na(this,"onDragStart",(e,n)=>{let{node:r}=n;const{onDragStart:i,transformScale:s}=this.props;if(!i)return;const o={top:0,left:0},{offsetParent:a}=r;if(!a)return;const l=a.getBoundingClientRect(),c=r.getBoundingClientRect(),u=c.left/s,h=l.left/s,f=c.top/s,g=l.top/s;o.left=u-h+a.scrollLeft,o.top=f-g+a.scrollTop,this.setState({dragging:o});const{x:m,y}=(0,ti.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return i.call(this,this.props.i,m,y,{e,node:r,newPosition:o})}),Na(this,"onDrag",(e,n)=>{let{node:r,deltaX:i,deltaY:s}=n;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let a=this.state.dragging.top+s,l=this.state.dragging.left+i;const{isBounded:c,i:u,w:h,h:f,containerWidth:g}=this.props,m=this.getPositionParams();if(c){const{offsetParent:v}=r;if(v){const{margin:E,rowHeight:T,containerPadding:P}=this.props,R=v.clientHeight-(0,ti.calcGridItemWHPx)(f,T,E[1]);a=(0,ti.clamp)(a-P[1],0,R);const M=(0,ti.calcGridColWidth)(m),k=g-(0,ti.calcGridItemWHPx)(h,M,E[0]);l=(0,ti.clamp)(l-P[0],0,k)}}const y={top:a,left:l};this.setState({dragging:y});const{containerPadding:x}=this.props,{x:b,y:w}=(0,ti.calcXY)(m,a-x[1],l-x[0],h,f);return o.call(this,u,b,w,{e,node:r,newPosition:y})}),Na(this,"onDragStop",(e,n)=>{let{node:r}=n;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:s,h:o,i:a,containerPadding:l}=this.props,{left:c,top:u}=this.state.dragging,h={top:u,left:c};this.setState({dragging:null});const{x:f,y:g}=(0,ti.calcXY)(this.getPositionParams(),u-l[1],c-l[0],s,o);return i.call(this,a,f,g,{e,node:r,newPosition:h})}),Na(this,"onResizeStop",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStop")),Na(this,"onResizeStart",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStart")),Na(this,"onResize",(e,n,r)=>this.onResizeHandler(e,n,r,"onResize"))}shouldComponentUpdate(e,n){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,ti.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,ti.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,n);return!(0,pd.fastPositionEqual)(r,i)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:n}=this.props;if(!n)return;const r=this.elementRef.current;if(!r)return;const i=e.droppingPosition||{left:0,top:0},{dragging:s}=this.state,o=s&&n.left!==i.left||n.top!==i.top;if(!s)this.onDragStart(n.e,{node:r,deltaX:n.left,deltaY:n.top});else if(o){const a=n.left-s.left,l=n.top-s.top;this.onDrag(n.e,{node:r,deltaX:a,deltaY:l})}}getPositionParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:n,containerWidth:r,useCSSTransforms:i}=this.props;let s;return i?s=(0,pd.setTransform)(e):(s=(0,pd.setTopLeft)(e),n&&(s.left=(0,pd.perc)(e.left/r),s.width=(0,pd.perc)(e.width/r))),s}mixinDraggable(e,n){return fd.default.createElement(Ede.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,n){return(r,i)=>n(r,i,e)}mixinResizable(e,n,r){const{cols:i,minW:s,minH:o,maxW:a,maxH:l,transformScale:c,resizeHandles:u,resizeHandle:h}=this.props,f=this.getPositionParams(),g=(0,ti.calcGridItemPosition)(f,0,0,i,0).width,m=(0,ti.calcGridItemPosition)(f,0,0,s,o),y=(0,ti.calcGridItemPosition)(f,0,0,a,l),x=[m.width,m.height],b=[Math.min(y.width,g),Math.min(y.height,1/0)];return fd.default.createElement(Sde.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:x,maxConstraints:b,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:c,resizeHandles:u,handle:h},e)}onResizeHandler(e,n,r,i){let{node:s,size:o,handle:a}=n;const l=this.props[i];if(!l)return;const{x:c,y:u,i:h,maxH:f,minH:g,containerWidth:m}=this.props,{minW:y,maxW:x}=this.props;let b=o;s&&(b=(0,pd.resizeItemInDirection)(a,r,o,m),this.setState({resizing:i==="onResizeStop"?null:b}));let{w,h:v}=(0,ti.calcWH)(this.getPositionParams(),b.width,b.height,c,u,a);w=(0,ti.clamp)(w,Math.max(y,1),x),v=(0,ti.clamp)(v,g,f),l.call(this,h,w,v,{e,node:s,size:b,handle:a})}render(){const{x:e,y:n,w:r,h:i,isDraggable:s,isResizable:o,droppingPosition:a,useCSSTransforms:l}=this.props,c=(0,ti.calcGridItemPosition)(this.getPositionParams(),e,n,r,i,this.state),u=fd.default.Children.only(this.props.children);let h=fd.default.cloneElement(u,{ref:this.elementRef,className:(0,Tde.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":s,"react-draggable-dragging":!!this.state.dragging,dropping:!!a,cssTransforms:l}),style:{...this.props.style,...u.props.style,...this.createStyle(c)}});return h=this.mixinResizable(h,c,o),h=this.mixinDraggable(h,s),h}}xw.default=oM;Na(oM,"propTypes",{children:cn.default.element,cols:cn.default.number.isRequired,containerWidth:cn.default.number.isRequired,rowHeight:cn.default.number.isRequired,margin:cn.default.array.isRequired,maxRows:cn.default.number.isRequired,containerPadding:cn.default.array.isRequired,x:cn.default.number.isRequired,y:cn.default.number.isRequired,w:cn.default.number.isRequired,h:cn.default.number.isRequired,minW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minWidth not Number");if(n>t.w||n>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxWidth not Number");if(n<t.w||n<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minHeight not Number");if(n>t.h||n>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxHeight not Number");if(n<t.h||n<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:cn.default.string.isRequired,resizeHandles:QN.resizeHandleAxesType,resizeHandle:QN.resizeHandleType,onDragStop:cn.default.func,onDragStart:cn.default.func,onDrag:cn.default.func,onResizeStop:cn.default.func,onResizeStart:cn.default.func,onResize:cn.default.func,isDraggable:cn.default.bool.isRequired,isResizable:cn.default.bool.isRequired,isBounded:cn.default.bool.isRequired,static:cn.default.bool,useCSSTransforms:cn.default.bool.isRequired,transformScale:cn.default.number,className:cn.default.string,handle:cn.default.string,cancel:cn.default.string,droppingPosition:cn.default.shape({e:cn.default.object.isRequired,left:cn.default.number.isRequired,top:cn.default.number.isRequired})});Na(oM,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(H0,"__esModule",{value:!0});H0.default=void 0;var Pu=Mde(C),nT=VI,Ade=aM(GI),Ct=Vt,Rde=il,JN=aM(xw),Ide=aM(Rl);function aM(t){return t&&t.__esModule?t:{default:t}}function w8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(w8=function(r){return r?n:e})(t)}function Mde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=w8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function _i(t,e,n){return e=Ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ode(t){var e=Lde(t,"string");return typeof e=="symbol"?e:String(e)}function Lde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const eB="react-grid-layout";let E8=!1;try{E8=/firefox/i.test(navigator.userAgent)}catch{}class Aw extends Pu.Component{constructor(){super(...arguments),_i(this,"state",{activeDrag:null,layout:(0,Ct.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Ct.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),_i(this,"dragEnterCounter",0),_i(this,"onDragStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Ct.getLayoutItem)(a,e);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,Ct.cloneLayoutItem)(l),oldLayout:a,activeDrag:c}),this.props.onDragStart(a,l,l,null,s,o)}),_i(this,"onDrag",(e,n,r,i)=>{let{e:s,node:o}=i;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:u,preventCollision:h}=this.props,f=(0,Ct.getLayoutItem)(l,e);if(!f)return;const g={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:e},m=!0;l=(0,Ct.moveElement)(l,f,n,r,m,h,(0,Ct.compactType)(this.props),c,u),this.props.onDrag(l,a,f,g,s,o),this.setState({layout:u?l:(0,Ct.compact)(l,(0,Ct.compactType)(this.props),c),activeDrag:g})}),_i(this,"onDragStop",(e,n,r,i)=>{let{e:s,node:o}=i;if(!this.state.activeDrag)return;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:u,allowOverlap:h}=this.props,f=(0,Ct.getLayoutItem)(l,e);if(!f)return;const g=!0;l=(0,Ct.moveElement)(l,f,n,r,g,u,(0,Ct.compactType)(this.props),c,h);const m=h?l:(0,Ct.compact)(l,(0,Ct.compactType)(this.props),c);this.props.onDragStop(m,a,f,null,s,o);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(m,y)}),_i(this,"onResizeStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Ct.getLayoutItem)(a,e);l&&(this.setState({oldResizeItem:(0,Ct.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(a,l,l,null,s,o))}),_i(this,"onResize",(e,n,r,i)=>{let{e:s,node:o,size:a,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:u}=this.state,{cols:h,preventCollision:f,allowOverlap:g}=this.props;let m=!1,y,x,b;const[w,v]=(0,Ct.withLayoutItem)(u,e,T=>{let P;return x=T.x,b=T.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(x=T.x+(T.w-n),n=T.x!==x&&x<0?T.w:n,x=x<0?0:x),["ne","n","nw"].indexOf(l)!==-1&&(b=T.y+(T.h-r),r=T.y!==b&&b<0?T.h:r,b=b<0?0:b),m=!0),f&&!g&&(P=(0,Ct.getAllCollisions)(u,{...T,w:n,h:r,x,y:b}).filter(M=>M.i!==T.i).length>0,P&&(b=T.y,r=T.h,x=T.x,n=T.w,m=!1)),T.w=n,T.h=r,T});if(!v)return;y=w,m&&(y=(0,Ct.moveElement)(w,v,x,b,!0,this.props.preventCollision,(0,Ct.compactType)(this.props),h,g));const E={w:v.w,h:v.h,x:v.x,y:v.y,static:!0,i:e};this.props.onResize(y,c,v,E,s,o),this.setState({layout:g?y:(0,Ct.compact)(y,(0,Ct.compactType)(this.props),h),activeDrag:E})}),_i(this,"onResizeStop",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a,oldResizeItem:l}=this.state,{cols:c,allowOverlap:u}=this.props,h=(0,Ct.getLayoutItem)(a,e),f=u?a:(0,Ct.compact)(a,(0,Ct.compactType)(this.props),c);this.props.onResizeStop(f,l,h,null,s,o);const{oldLayout:g}=this.state;this.setState({activeDrag:null,layout:f,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(f,g)}),_i(this,"onDragOver",e=>{var w;if(e.preventDefault(),e.stopPropagation(),E8&&!((w=e.nativeEvent.target)!=null&&w.classList.contains(eB)))return!1;const{droppingItem:n,onDropDragOver:r,margin:i,cols:s,rowHeight:o,maxRows:a,width:l,containerPadding:c,transformScale:u}=this.props,h=r==null?void 0:r(e);if(h===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const f={...n,...h},{layout:g}=this.state,m=e.currentTarget.getBoundingClientRect(),y=e.clientX-m.left,x=e.clientY-m.top,b={left:y/u,top:x/u,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:v,top:E}=this.state.droppingPosition;(v!=y||E!=x)&&this.setState({droppingPosition:b})}}else{const v={cols:s,margin:i,maxRows:a,rowHeight:o,containerWidth:l,containerPadding:c||i},E=(0,Rde.calcXY)(v,x,y,f.w,f.h);this.setState({droppingDOMNode:Pu.createElement("div",{key:f.i}),droppingPosition:b,layout:[...g,{...f,x:E.x,y:E.y,static:!1,isDraggable:!0}]})}}),_i(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:n}=this.props,{layout:r}=this.state,i=(0,Ct.compact)(r.filter(s=>s.i!==e.i),(0,Ct.compactType)(this.props),n,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),_i(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),_i(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),_i(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:n}=this.props,{layout:r}=this.state,i=r.find(s=>s.i===n.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,i,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let r;return n.activeDrag?null:(!(0,nT.deepEqual)(e.layout,n.propsLayout)||e.compactType!==n.compactType?r=e.layout:(0,Ct.childrenEqual)(e.children,n.children)||(r=n.layout),r?{layout:(0,Ct.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,Ct.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,Ct.fastRGLPropsEqual)(this.props,e,nT.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,n){if(!this.state.activeDrag){const r=this.state.layout,i=n.layout;this.onLayoutMaybeChanged(r,i)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,Ct.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+n*2+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,nT.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:n,cols:r,margin:i,containerPadding:s,rowHeight:o,maxRows:a,useCSSTransforms:l,transformScale:c}=this.props;return Pu.createElement(JN.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:n,cols:r,margin:i,containerPadding:s||i,maxRows:a,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Pu.createElement("div",null))}processGridItem(e,n){if(!e||!e.key)return;const r=(0,Ct.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:i,cols:s,margin:o,containerPadding:a,rowHeight:l,maxRows:c,isDraggable:u,isResizable:h,isBounded:f,useCSSTransforms:g,transformScale:m,draggableCancel:y,draggableHandle:x,resizeHandles:b,resizeHandle:w}=this.props,{mounted:v,droppingPosition:E}=this.state,T=typeof r.isDraggable=="boolean"?r.isDraggable:!r.static&&u,P=typeof r.isResizable=="boolean"?r.isResizable:!r.static&&h,R=r.resizeHandles||b,M=T&&f&&r.isBounded!==!1;return Pu.createElement(JN.default,{containerWidth:i,cols:s,margin:o,containerPadding:a||o,maxRows:c,rowHeight:l,cancel:y,handle:x,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:T,isResizable:P,isBounded:M,useCSSTransforms:g&&v,usePercentages:!v,transformScale:m,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:n?E:void 0,resizeHandles:R,resizeHandle:w},e)}render(){const{className:e,style:n,isDroppable:r,innerRef:i}=this.props,s=(0,Ade.default)(eB,e),o={height:this.containerHeight(),...n};return Pu.createElement("div",{ref:i,className:s,style:o,onDrop:r?this.onDrop:Ct.noop,onDragLeave:r?this.onDragLeave:Ct.noop,onDragEnter:r?this.onDragEnter:Ct.noop,onDragOver:r?this.onDragOver:Ct.noop},Pu.Children.map(this.props.children,a=>this.processGridItem(a)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}H0.default=Aw;_i(Aw,"displayName","ReactGridLayout");_i(Aw,"propTypes",Ide.default);_i(Aw,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Ct.noop,onDragStart:Ct.noop,onDrag:Ct.noop,onDragStop:Ct.noop,onResizeStart:Ct.noop,onResize:Ct.noop,onResizeStop:Ct.noop,onDrop:Ct.noop,onDropDragOver:Ct.noop});var Rw={},Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});Dh.findOrGenerateResponsiveLayout=Nde;Dh.getBreakpointFromWidth=kde;Dh.getColsFromBreakpoint=Dde;Dh.sortBreakpoints=lM;var Fv=Vt;function kde(t,e){const n=lM(t);let r=n[0];for(let i=1,s=n.length;i<s;i++){const o=n[i];e>t[o]&&(r=o)}return r}function Dde(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function Nde(t,e,n,r,i,s){if(t[n])return(0,Fv.cloneLayout)(t[n]);let o=t[r];const a=lM(e),l=a.slice(a.indexOf(n));for(let c=0,u=l.length;c<u;c++){const h=l[c];if(t[h]){o=t[h];break}}return o=(0,Fv.cloneLayout)(o||[]),(0,Fv.compact)((0,Fv.correctBounds)(o,{cols:i}),s,i)}function lM(t){return Object.keys(t).sort(function(n,r){return t[n]-t[r]})}Object.defineProperty(Rw,"__esModule",{value:!0});Rw.default=void 0;var tB=Fde(C),Ki=S8(Hl),rT=VI,pf=Vt,Cu=Dh,Bde=S8(H0);function S8(t){return t&&t.__esModule?t:{default:t}}function T8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(T8=function(r){return r?n:e})(t)}function Fde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=T8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cA.apply(this,arguments)}function u_(t,e,n){return e=zde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zde(t){var e=Ude(t,"string");return typeof e=="symbol"?e:String(e)}function Ude(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const nB=t=>Object.prototype.toString.call(t);function zv(t,e){return t==null?null:Array.isArray(t)?t:t[e]}class cM extends tB.Component{constructor(){super(...arguments),u_(this,"state",this.generateInitialState()),u_(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){const{width:e,breakpoints:n,layouts:r,cols:i}=this.props,s=(0,Cu.getBreakpointFromWidth)(n,e),o=(0,Cu.getColsFromBreakpoint)(s,i),a=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,Cu.findOrGenerateResponsiveLayout)(r,n,s,s,o,a),breakpoint:s,cols:o}}static getDerivedStateFromProps(e,n){if(!(0,rT.deepEqual)(e.layouts,n.layouts)){const{breakpoint:r,cols:i}=n;return{layout:(0,Cu.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,i,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,rT.deepEqual)(this.props.breakpoints,e.breakpoints)||!(0,rT.deepEqual)(this.props.cols,e.cols))&&this.onWidthChange(e)}onWidthChange(e){const{breakpoints:n,cols:r,layouts:i,compactType:s}=this.props,o=this.props.breakpoint||(0,Cu.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),a=this.state.breakpoint,l=(0,Cu.getColsFromBreakpoint)(o,r),c={...i};if(a!==o||e.breakpoints!==n||e.cols!==r){a in c||(c[a]=(0,pf.cloneLayout)(this.state.layout));let f=(0,Cu.findOrGenerateResponsiveLayout)(c,n,o,a,l,s);f=(0,pf.synchronizeLayoutWithChildren)(f,this.props.children,l,s,this.props.allowOverlap),c[o]=f,this.props.onLayoutChange(f,c),this.props.onBreakpointChange(o,l),this.setState({breakpoint:o,layout:f,cols:l})}const u=zv(this.props.margin,o),h=zv(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,l,h)}render(){const{breakpoint:e,breakpoints:n,cols:r,layouts:i,margin:s,containerPadding:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,...u}=this.props;return tB.createElement(Bde.default,cA({},u,{margin:zv(s,this.state.breakpoint),containerPadding:zv(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}Rw.default=cM;u_(cM,"propTypes",{breakpoint:Ki.default.string,breakpoints:Ki.default.object,allowOverlap:Ki.default.bool,cols:Ki.default.object,margin:Ki.default.oneOfType([Ki.default.array,Ki.default.object]),containerPadding:Ki.default.oneOfType([Ki.default.array,Ki.default.object]),layouts(t,e){if(nB(t[e])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+nB(t[e]));Object.keys(t[e]).forEach(n=>{if(!(n in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,pf.validateLayout)(t.layouts[n],"layouts."+n)})},width:Ki.default.number.isRequired,onBreakpointChange:Ki.default.func,onLayoutChange:Ki.default.func,onWidthChange:Ki.default.func});u_(cM,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:pf.noop,onLayoutChange:pf.noop,onWidthChange:pf.noop});var uM={},P8=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];n.call(r,o[1],o[0])}},e}()}(),uA=typeof window<"u"&&typeof document<"u"&&window.document===document,h_=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),$de=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h_):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),jde=2;function Vde(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&a()}function o(){$de(s)}function a(){var l=Date.now();if(n){if(l-i<jde)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return a}var Gde=20,Hde=["top","right","bottom","left","width","height","size","weight"],Wde=typeof MutationObserver<"u",Xde=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Vde(this.refresh.bind(this),Gde)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!uA||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Wde?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!uA||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=Hde.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),C8=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},$f=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||h_},A8=Iw(0,0,0,0);function d_(t){return parseFloat(t)||0}function rB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var s=t["border-"+i+"-width"];return r+d_(s)},0)}function Yde(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var s=i[r],o=t["padding-"+s];n[s]=d_(o)}return n}function qde(t){var e=t.getBBox();return Iw(0,0,e.width,e.height)}function Kde(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return A8;var r=$f(t).getComputedStyle(t),i=Yde(r),s=i.left+i.right,o=i.top+i.bottom,a=d_(r.width),l=d_(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=rB(r,"left","right")+s),Math.round(l+o)!==n&&(l-=rB(r,"top","bottom")+o)),!Qde(t)){var c=Math.round(a+s)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return Iw(i.left,i.top,a,l)}var Zde=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof $f(t).SVGGraphicsElement}:function(t){return t instanceof $f(t).SVGElement&&typeof t.getBBox=="function"}}();function Qde(t){return t===$f(t).document.documentElement}function Jde(t){return uA?Zde(t)?qde(t):Kde(t):A8}function efe(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return C8(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function Iw(t,e,n,r){return{x:t,y:e,width:n,height:r}}var tfe=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Iw(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Jde(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),nfe=function(){function t(e,n){var r=efe(n);C8(this,{target:e,contentRect:r})}return t}(),rfe=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new P8,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof $f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new tfe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof $f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new nfe(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),R8=typeof WeakMap<"u"?new WeakMap:new P8,I8=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Xde.getInstance(),r=new rfe(e,n,this);R8.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){I8.prototype[t]=function(){var e;return(e=R8.get(this))[t].apply(e,arguments)}});var ife=function(){return typeof h_.ResizeObserver<"u"?h_.ResizeObserver:I8}();const sfe=Object.freeze(Object.defineProperty({__proto__:null,default:ife},Symbol.toStringTag,{value:"Module"})),ofe=dn(sfe);Object.defineProperty(uM,"__esModule",{value:!0});uM.default=pfe;var Uv=ufe(C),afe=hM(Hl),lfe=hM(ofe),cfe=hM(GI);function hM(t){return t&&t.__esModule?t:{default:t}}function M8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(M8=function(r){return r?n:e})(t)}function ufe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=M8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hA.apply(this,arguments)}function gd(t,e,n){return e=hfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hfe(t){var e=dfe(t,"string");return typeof e=="symbol"?e:String(e)}function dfe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ffe="react-grid-layout";function pfe(t){var e;return e=class extends Uv.Component{constructor(){super(...arguments),gd(this,"state",{width:1280}),gd(this,"elementRef",Uv.createRef()),gd(this,"mounted",!1),gd(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new lfe.default(i=>{if(this.elementRef.current instanceof HTMLElement){const o=i[0].contentRect.width;this.setState({width:o})}});const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.observe(r)}componentWillUnmount(){this.mounted=!1;const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.unobserve(r),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:r,...i}=this.props;return r&&!this.mounted?Uv.createElement("div",{className:(0,cfe.default)(this.props.className,ffe),style:this.props.style,ref:this.elementRef}):Uv.createElement(t,hA({innerRef:this.elementRef},i,this.state))}},gd(e,"defaultProps",{measureBeforeMount:!1}),gd(e,"propTypes",{measureBeforeMount:afe.default.bool}),e}(function(t){t.exports=H0.default,t.exports.utils=Vt,t.exports.calculateUtils=il,t.exports.Responsive=Rw.default,t.exports.Responsive.utils=Dh,t.exports.WidthProvider=uM.default})(Xj);var gfe=Xj.exports;function iB(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}function dM(){const[t,e]=C.useState(iB());return C.useEffect(()=>{function n(){e(iB())}return window.addEventListener("load",n),window.addEventListener("resize",n),()=>{window.removeEventListener("load",n),window.removeEventListener("resize",n)}},[]),t}const O8=It(ar)`
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  white-space: nowrap;
`,mfe=It.div`
  width: 6px;
  height: 32px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  margin-right: 2px;
`,yfe=C.forwardRef((t,e)=>{const[n,r]=C.useState(null),i=C.useCallback(a=>{r(a),t.onMouseDown&&t.onMouseDown(a)},[]),s=C.useCallback(a=>{n&&n.clientX===a.clientX&&n.clientY===a.clientY&&!t.disabled?t.onClick():t.onMouseUp&&t.onMouseUp(a),r(null)},[n]),o=C.useCallback(a=>{t.onTouchEnd&&t.onTouchEnd(a)},[]);return K(ar,{id:t.id,style:{...t.style,width:40,left:-8},onMouseDown:i,onTouchEnd:o,onMouseUp:s,ref:e,children:Bt(O8,{children:[K(mfe,{className:"draggable",style:{userSelect:"none",paddingTop:5,width:"8px",height:"32px",cursor:"move"},children:K(Ji,{style:{color:"blue"}})}),t.disabled?K(Hc,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},disabled:!0,children:K(ar,{style:{marginTop:"4px"},children:t.children})}):K(l_,{title:t.tooltip,placement:"right",children:K(Hc,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},children:K(ar,{style:{marginTop:"4px"},children:t.children})})})]})},t.key)}),vfe=St([Q.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),Q.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),bfe=St(Q.jsx("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2zM18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2z"}),"AddRoad"),_fe=St([Q.jsx("path",{d:"M19.5 12c.93 0 1.78.28 2.5.76V8c0-1.1-.9-2-2-2h-6.29l-1.06-1.06 1.41-1.41-.71-.71-3.53 3.53.71.71 1.41-1.41L13 6.71V9c0 1.1-.9 2-2 2h-.54c.95 1.06 1.54 2.46 1.54 4 0 .34-.04.67-.09 1h3.14c.25-2.25 2.14-4 4.45-4"},"0"),Q.jsx("path",{d:"M19.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M4 9h5c0-1.1-.9-2-2-2H4c-.55 0-1 .45-1 1s.45 1 1 1m5.83 4.82-.18-.47.93-.35c-.46-1.06-1.28-1.91-2.31-2.43l-.4.89-.46-.21.4-.9C7.26 10.13 6.64 10 6 10c-.53 0-1.04.11-1.52.26l.34.91-.47.18-.35-.93c-1.06.46-1.91 1.28-2.43 2.31l.89.4-.21.46-.9-.4C1.13 13.74 1 14.36 1 15c0 .53.11 1.04.26 1.52l.91-.34.18.47-.93.35c.46 1.06 1.28 1.91 2.31 2.43l.4-.89.46.21-.4.9c.55.22 1.17.35 1.81.35.53 0 1.04-.11 1.52-.26l-.34-.91.47-.18.35.93c1.06-.46 1.91-1.28 2.43-2.31l-.89-.4.21-.46.9.4c.22-.55.35-1.17.35-1.81 0-.53-.11-1.04-.26-1.52zm-2.68 3.95c-1.53.63-3.29-.09-3.92-1.62-.63-1.53.09-3.29 1.62-3.92 1.53-.63 3.29.09 3.92 1.62.64 1.53-.09 3.29-1.62 3.92"},"1")],"Agriculture"),xfe=St(Q.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.42 0 2.13.54 2.39 1.4.12.4.45.7.87.7h.3c.66 0 1.13-.65.9-1.27-.42-1.18-1.4-2.16-2.96-2.54V4.5c0-.83-.67-1.5-1.5-1.5S10 3.67 10 4.5v.66c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-1.65 0-2.5-.59-2.83-1.43-.15-.39-.49-.67-.9-.67h-.28c-.67 0-1.14.68-.89 1.3.57 1.39 1.9 2.21 3.4 2.53v.67c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-.65c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoneyRounded"),L8=St(Q.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),sB=St(Q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),wfe=St(Q.jsx("path",{d:"M22 3.41 16.71 8.7 20 12h-8V4l3.29 3.29L20.59 2zM3.41 22l5.29-5.29L12 20v-8H4l3.29 3.29L2 20.59z"}),"CloseFullscreen"),Efe=St(Q.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Domain"),Sfe=St(Q.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"}),"DomainAdd"),k8=St(Q.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),D8=St(Q.jsx("path",{d:"M22 10v12H2V10l7-3v2l5-2v3zm-4.8-1.5L18 2h3l.8 6.5zM11 18h2v-4h-2zm-4 0h2v-4H7zm10-4h-2v4h2z"}),"Factory"),Tfe=St(Q.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),Pfe=St(Q.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),Cfe=St(Q.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),Afe=St(Q.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"}),"FitScreen"),Rfe=St(Q.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),N8=St(Q.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),B8=St(Q.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),Ife=St(Q.jsx("path",{d:"M17.2 3H6.8l-5.2 9 5.2 9h10.4l5.2-9z"}),"Hexagon"),F8=St(Q.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),Mfe=St(Q.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),z8=St(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),U8=St(Q.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),$8=St(Q.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),Ofe=St(Q.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),oB=St(Q.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull"),Lfe=St(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"}),"PauseCircle"),kfe=St(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle"),Dfe=St(Q.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m-8 6H8v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1H8v-1H6v-2h4v-1H7c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2zm4 6.25-2-2h4zM14 10l2-2 2 2z"}),"PriceChange"),Nfe=St(Q.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),Bfe=St(Q.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Ffe=St(Q.jsx("path",{d:"M18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2zm11.5.41L21.09 15 19 17.09 16.91 15l-1.41 1.41 2.09 2.09-2.09 2.09L16.91 22 19 19.91 21.09 22l1.41-1.41-2.09-2.09z"}),"RemoveRoad"),zfe=St(Q.jsx("path",{d:"m19.41 7.41-4.83-4.83c-.37-.37-.88-.58-1.41-.58H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.42M14 13c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1c0 .55-.45 1-1 1s-1-.45-1-1h-1c-.55 0-1-.45-1-1s.45-1 1-1h3v-1h-3c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-.55.45-1 1-1s1 .45 1 1h1c.55 0 1 .45 1 1s-.45 1-1 1h-3v1zm0-5c-.55 0-1-.45-1-1V3.5L17.5 8z"}),"RequestQuoteRounded"),Ufe=St(Q.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),j8=St(Q.jsx("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82"}),"Route"),$fe=St(Q.jsx("path",{d:"M3 3h18v18H3z"}),"Square"),V8=St(Q.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer"),jfe=St(Q.jsx("path",{d:"m22 12-4-4v3H3v2h15v3z"}),"TrendingFlat"),G8=St(Q.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),Vfe=St(Q.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo"),H8=St([Q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),Q.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),Gfe=St(Q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),Hfe=It(Uoe)`
  background-color: rgba(255, 255, 255, 0.95);
`,iT=It(Hc)`
  padding: 2px;
  height: 18px;
  margin: 7px 4px 3px 0;
  border-radius: 16px;
  border: 1px solid rgba(0, 0, 0, 0.2);

  .MuiSvgIcon-root {
    width: 12px;
    height: 12px;
  }
`,Wfe=It(ar)`
  margin-top: 4px;
`,Xfe=C.forwardRef(({id:t,key:e,title:n,icon:r,rowHeight:i,subheader:s,children:o,style:a,onMouseDown:l,onMouseUp:c,onTouchEnd:u,setToFront:h,onClose:f,maximized:g,onMaximize:m,onDemaximize:y,titleBarMode:x},b)=>{const w=()=>{f&&f()},v=()=>{m&&m()},E=()=>{y&&y()},P=26*(x==="win"?2:0);return Bt(Hfe,{id:t,ref:b,style:{...a,borderRadius:"8px"},onMouseDown:R=>{const M=document.getElementById(t).getBoundingClientRect();P<M.right-R.clientX&&R.clientY-M.top<26&&(h(),l&&l(R))},onMouseUp:c,onTouchEnd:u,children:[K(aae,{title:Bt(ar,{style:{userSelect:"none",position:"absolute",top:0,left:0,width:"100%",height:i+"px",display:"flex",flexDirection:"row",marginLeft:"8px"},children:[x==="mac"&&Bt(MP,{children:[K(iT,{size:"small",onClick:()=>{console.log("close")},children:K(sB,{})}),K(iT,{size:"small",onClick:()=>{console.log("remove")},children:K(Bfe,{})}),K(iT,{size:"small",onClick:()=>{console.log("open in full")},children:K(oB,{})})]}),Bt(O8,{className:"draggable",children:[K(Wfe,{children:r}),K(Ji,{style:{marginLeft:"4px",marginTop:"4px"},children:n})]}),x==="win"&&Bt(MP,{children:[g?K(Hc,{size:"small",style:{margin:0,padding:0},"aria-label":"demaximize",title:"demaximize",onClick:E,children:K(wfe,{style:{width:"18px",height:"18px"}})}):K(Hc,{size:"small",style:{margin:0,padding:0},"aria-label":"maximize",title:"maximize",onClick:v,children:K(oB,{style:{width:"18px",height:"18px"}})}),K(Hc,{size:"small","aria-label":"close",style:{marginRight:"6px"},onClick:w,title:"close",children:K(sB,{})})]})]}),style:{cursor:"move",height:"16px",backgroundColor:"rgba(255,255,255,0.90)",padding:"8px",borderBottom:"1px solid rgba(0,0,0,0.1)"},titleTypographyProps:{fontSize:"16px"}}),o,K(Woe,{})]},e)}),In={BackgroundPanel:"BackgroundPanel",FloatingButton:"FloatingButton",FloatingPanel:"FloatingPanel"},dA=32,sT=32,Yfe=It(Dj)`
  padding: 8px;
  margin: 0;
  overflow: hidden;
`,qfe=It(gfe.Responsive)`
  .react-grid-item.react-grid-placeholder {
    background: grey !important;
  }
`,Kfe=t=>{const e=J2(),{width:n,height:r}=dM(),i=Math.floor((r-10)/sT-3),[s,o]=C.useState(""),[a,l]=C.useState([...t.initialLayouts.map(O=>({...O,y:t.resources[O.i].shown?O.y:O.y+i*2}))]),[c,u]=C.useState(null),[h,f]=C.useState(xD(a.map(O=>{t.resources[O.i]||console.error("ERROR",O.i,t.resources);const F=t.resources[O.i].shown||!1,I=t.resources[O.i].type===In.FloatingButton?t.resources[O.i].enabled:!0;return[O.i,{shown:F,enabled:I}]}))),[g,m]=C.useState(null),y=(O,F)=>{const I=F.findIndex(j=>j.i===O);if(I<0)return F;const D=F[I],N=new Array(F.length);for(let j=0;j<I;j++)N[j]=F[j];for(let j=I;j<F.length-1;j++)N[j]=F[j+1];return N[F.length-1]=D,N},x=O=>{const F=O[O.length-1];u({...F});const I=[...O];return I[O.length-1]={...F,x:0,y:0,w:dA,h:Math.floor((r-10)/sT-3)},I},b=()=>{if(c){const O=[...a];O[a.length-1]=c,l(O),u(null)}},w=O=>{l(I=>I.map(D=>D.i!==O?D:{...D,y:D.y-i}));const F=t.resources[O].bindToButtonId;F&&f(I=>({...I,[O]:{...I[O],shown:!0},[F]:{...I[F],enabled:!1}}))},v=O=>{a.find(D=>D.i===O)&&l(D=>D.map(N=>N.i!==O?N:{...N,y:N.y+i}));const I=t.resources[O].bindToButtonId;I&&f(D=>({...D,[O]:{...D[O],shown:!1},[I]:{...D[I],enabled:!0}}))},E=O=>{o(O),l(F=>y(O,F))},T=O=>{o(O),l(F=>x(y(O,F)))},P=(O,F,I,D,N,j)=>{const W=y(F.i,O);l(W)},R=(O,F,I,D,N,j)=>{const W=y(F.i,O);l(W)},M=O=>{if(O.length===0)return;const F=y(s,O);l(F)},k=(O,F,I)=>{var D;if(!F)return null;switch(F.type){case"FloatingButton":{const N=F;return K(yfe,{id:O,tooltip:F.tooltip,onClick:()=>{N.bindToPanelId?(w(N.bindToPanelId),E(N.bindToPanelId)):N.onClick?N.onClick():N.navigateTo&&e(N.navigateTo)},disabled:!((D=h[O])!=null&&D.enabled),children:F.icon},O)}case"FloatingPanel":return K(Xfe,{id:O,title:F.title,icon:F.icon,setToFront:()=>E(O),rowHeight:F.rowHeight,titleBarMode:F.titleBarMode,onClose:()=>{v(F.id)},onMaximize:()=>{T(O)},onDemaximize:()=>{b()},maximized:(c==null?void 0:c.i)===O,children:K(Yfe,{children:I})},O);case"BackgroundPanel":default:return K("div",{id:O},O)}};return C.useEffect(()=>{a.length>0&&Object.keys(t.resources).length>0&&m(xD(a.map(O=>[O.i,k(O.i,t.resources[O.i],t.gridItemChildrenMap[O.i])])))},[a,t.resources,t.gridItemChildrenMap]),K(ar,{style:{margin:0,padding:0,border:"none"},children:n===0||a.length===0||g===null?K(ar,{sx:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",backgroundColor:"#ccc"},children:K(UI,{variant:"indeterminate",size:100})}):Bt(qfe,{style:{backgroundColor:t.backgroundColor,margin:0,padding:0},compactType:"vertical",autoSize:!0,allowOverlap:!0,isResizable:!1,isBounded:!1,width:n,draggableHandle:".draggable",breakpoints:{lg:1140},cols:{lg:dA},rowHeight:sT,margin:[4,4],containerPadding:[8,2],layouts:{lg:a},onLayoutChange:M,onDragStop:R,onResizeStop:P,children:[K(ar,{sx:{position:"absolute",top:"-2px",left:"-8px"},children:t.children},"BackgroundPanel"),a.filter(O=>O.i!=="BackgroundPanel").map((O,F)=>g[O.i])]})})};function Zfe(t){return{layout:{i:"HomeButton",x:0,y:0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"HomeButton",type:In.FloatingButton,tooltip:"Home",icon:K(Mfe,{}),navigateTo:"/",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function aB(t){return{layout:{i:"ZoomInButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomInButton",type:In.FloatingButton,tooltip:"zoom in",icon:K(H8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function lB(t){return{layout:{i:"ZoomOutButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomOutButton",type:In.FloatingButton,tooltip:"zoom out",icon:K(Gfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function cB(t){return{layout:{i:"FitScreenButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.w)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"FitScreenButton",type:In.FloatingButton,tooltip:"fit to screen",icon:K(Afe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Qfe(t){return{layout:{i:"InputOutputButton",x:0,y:(t==null?void 0:t.y)??1,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InputOutputButton",type:In.FloatingButton,bindToPanelId:"InputOutputPanel",tooltip:"Open Input/Output Panel",icon:K(N8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Jfe(t){return{layout:{i:"InputOutputPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??3,minW:5,minH:2,resizeHandles:Xl,isDraggable:!0,isResizable:!0},resource:{id:"InputOutputPanel",type:In.FloatingPanel,title:"Input/Output",icon:K(N8,{}),titleBarMode:"win",rowHeight:al,shown:t==null?void 0:t.shown,bindToButtonId:"InputOutputButton"}}}function epe(t){return{layout:{i:"ChartPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??10,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"ChartPanel",type:In.FloatingPanel,title:"Chart",icon:K(L8,{}),titleBarMode:"win",rowHeight:al,shown:!0,bindToButtonId:"ChartButton"}}}function uB(t){return t.parameterSet.units==="degrees"}const tpe=({sessionState:t,setSessionState:e,uiState:n,setUIState:r,matrices:i,updateAndSetMatrices:s})=>{var O,F;const[o,a]=C.useState(null),l=C.useCallback((I,D)=>{requestAnimationFrame(()=>{const{locations:N,edges:j,locationSerialNumber:W}=kJ(I,t);e(H=>{H.locations=N,H.edges=j,H.parameterSet.numLocations=I,H.locationSerialNumber=W},D||!1,"removeBulkLocations"),s(N,j),r(H=>{H.selectedIndices=[]})})},[t==null?void 0:t.locations,t==null?void 0:t.edges,(O=t==null?void 0:t.parameterSet)==null?void 0:O.transportationCost]),c=C.useCallback(()=>{u(t,n)},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,t==null?void 0:t.locationSerialNumber]),u=C.useCallback((I,D)=>{requestAnimationFrame(()=>{const{locations:N,edges:j,locationSerialNumber:W,addedIndices:H}=$$(I,D.selectedIndices);e(U=>{U.locations=N,U.edges=j,U.parameterSet.numLocations=U.parameterSet.numLocations+1,U.locationSerialNumber=W},!0,"addLocation"),s(N,j),r(U=>{U.focusedIndices=[...D.selectedIndices],U.selectedIndices=[...H]})})},[s,r]),h=C.useCallback((I,D)=>{requestAnimationFrame(()=>{e(N=>{const{locations:j,edges:W,locationSerialNumber:H,addedIndices:U}=gI(t,n.selectedIndices,I);N.locations=j,N.edges=W,N.parameterSet.numLocations=I,N.locationSerialNumber=H,s(j,W),r(X=>{X.selectedIndices=[],X.focusedIndices=U})},D||!1,"addBulkLocations")})},[n,t,r,e]),f=C.useCallback((I,D,N)=>{if(!N)return[];const j=new Set(I.map(W=>{var H;return(H=t.locations[W])==null?void 0:H.id}));return D.filter(W=>!j.has(W.source)&&!j.has(W.target))},[t]),g=C.useCallback((I,D,N,j)=>{if(!j)return[];const W=new Set;function H(U,X){return U<X?`${U},${X}`:`${X},${U}`}for(let U=0;I!==D&&U<j.length;U++){const X=j[I][D];if(X===-1)break;W.add(H(t.locations[I].id,t.locations[X].id)),I=X}return N.filter((U,X)=>!W.has(H(U.source,U.target)))},[t]),m=C.useCallback(()=>{requestAnimationFrame(()=>{e(I=>{const D=[];for(let N=0;N<n.selectedIndices.length;N++)for(let j=N+1;j<n.selectedIndices.length;j++){const W=n.selectedIndices[N],H=t.locations[W],U=n.selectedIndices[j],X=t.locations[U];if(Dl(i.adjacencyMatrix[W][U])){const Y=Th(H.point,X.point,uB(t)),Z={source:H.id,target:X.id,distance:Y};D.push(Z)}}I.edges=[...I.edges,...D],s(t.locations,t.edges)},!0,"addEdge")})},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,(F=t==null?void 0:t.parameterSet)==null?void 0:F.transportationCost,e,i==null?void 0:i.adjacencyMatrix,r]),y=C.useCallback(()=>{if(n.selectedIndices.length===2){const I=g(n.selectedIndices[0],n.selectedIndices[1],t.edges,i.predecessorMatrix);e(D=>{D.edges=I},!0,"removePath")}else{const I=f(n.selectedIndices,t.edges,i.predecessorMatrix);e(D=>{D.edges=I||[]},!0,"removeEdge")}},[n==null?void 0:n.selectedIndices,t==null?void 0:t.edges,i==null?void 0:i.predecessorMatrix]),x=C.useCallback(()=>{requestAnimationFrame(()=>{const I=f(n.selectedIndices,t.edges,i.predecessorMatrix)||[],D=(t.locations.length+n.selectedIndices.length)/t.locations.length,N=t.locations.filter((j,W)=>!n.selectedIndices.includes(W)).map(j=>({...j,manufactureShare:j.manufactureShare*D,agricultureShare:j.agricultureShare*D}));e(j=>{j.locations=N,j.edges=I,j.parameterSet.numLocations=N.length},!0,"removeLocation"),s(N,I),r(j=>{j.selectedIndices=[]})})},[]),b=C.useCallback((I,D,N)=>{a({x:I,y:D}),r(j=>{j.draggingIndex=N})},[a,r]),w=C.useCallback((I,D,N)=>{o===null||Math.abs(o.x-I)<=1&&Math.abs(o.y-D)<=1||requestAnimationFrame(()=>{r(j=>{j.draggingIndex=null,j.focusedIndices=[]}),a(null),e(j=>{},!0,"dragEnd"),s(t.locations,t.edges)})},[t,e,r,a,s]),v=C.useCallback((I,D,N)=>{(I!==0||D!==0)&&o!==null&&requestAnimationFrame(()=>{const W=n.selectedIndices.includes(N)?n.selectedIndices:[...n.selectedIndices,N];e(H=>{W.forEach(U=>{const X=H.locations[U].id,Y=H.locations[U];Y.point[0]+=I,Y.point[1]+=D,i.adjacencyMatrix&&H.edges.filter(Z=>Z.source===X||Z.target===X).forEach(Z=>{const se=Z.source===X?Z.target:Z.source,xe=kC(t.locations,se);Z.distance=Th(Y.point,t.locations[xe].point,uB(t))})})},!1,"drag")})},[n==null?void 0:n.selectedIndices,i==null?void 0:i.adjacencyMatrix,t,o]),E=C.useCallback(I=>{const D=I.filter(N=>N!==-1);r(N=>{N.focusedIndices=D})},[]),T=C.useCallback(I=>{r(D=>{D.focusedIndices=[]})},[]),P=C.useCallback((I,D)=>{r(N=>{const j=wQ(I,D).sort();N.selectedIndices=j,N.draggingIndex=null})},[r]),R=C.useCallback((I,D)=>{r(N=>{const j=I.filter(W=>!D.includes(W));N.selectedIndices=j,N.draggingIndex=null})},[r]),M=C.useCallback((I,D,N)=>{N>=0&&(o===null||o.x===I&&o.y===D)&&(n.selectedIndices.includes(N)?R(n.selectedIndices,[N]):P(n.selectedIndices,[N]))},[o,P,R,n==null?void 0:n.selectedIndices]),k=C.useCallback(()=>{R(n.selectedIndices,n.selectedIndices)},[n==null?void 0:n.selectedIndices]);return{onAddLocation:c,onAddBulkLocations:h,onRemoveLocation:x,onRemoveBulkLocations:l,onAddEdge:m,onRemoveEdge:y,onDragStart:b,onDrag:v,onDragEnd:w,onFocus:E,onUnfocus:T,onSelect:P,onUnselect:R,onPointerUp:M,onClearSelection:k}},npe=({setUIState:t})=>{const e=C.useCallback(r=>{t(i=>{i.chartType=r})},[t]);return{setSessionChartScale:C.useCallback(r=>{t(i=>{i.chartScale=r})},[t]),setSessionChartType:e}};function W8(t){if(!t||t.length===0)return{top:Number.NEGATIVE_INFINITY,left:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY,right:Number.POSITIVE_INFINITY};let e=t[0].point[0],n=t[0].point[0],r=t[0].point[1],i=t[0].point[1];for(let s=1;s<t.length;s++)e=Math.min(e,t[s].point[0]),n=Math.max(n,t[s].point[0]),r=Math.min(r,t[s].point[1]),i=Math.max(i,t[s].point[1]);return{top:r,left:e,bottom:i,right:n}}const X8=t=>{const e=(t.left+t.right)/2,n=(t.top+t.bottom)/2,r=t.width/(t.right-t.left)*t.paddingMarginRatio,i=t.height/(t.bottom-t.top)*t.paddingMarginRatio;return[Math.min(r,i),n,e]},Y8=16448250,rpe=400,q8=.4,ipe=({width:t,height:e,locations:n,uiState:r,setUIState:i})=>{const s=C.useCallback((a,l)=>{if((l==null?void 0:l.length)>1){const c=W8(l);return X8({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:t,height:e,paddingMarginRatio:a.viewportCenter&&a.viewportCenter[0]<1.7?q8:.5})}return a.viewportCenter},[e,t]);return{onFit:C.useCallback(()=>s(r,n),[s,r,n])}};function spe(t){return{layout:{i:"ChartButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??6,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ChartButton",type:In.FloatingButton,bindToPanelId:"ChartPanel",tooltip:"Open Chart Panel",icon:K(L8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function ope(){return window.matchMedia("(hover: hover)").matches}const ape=It(Hc)`
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  right: 10px;
  border-radius: 20px;
  border: 1px solid gray;
`,lpe=It(ape)`
  top: 40px;
`,cpe=It(vw)`
  width: 120px;
  padding: 18px;
  margin-right: 5px;
  margin-left: 20px;
`,upe=It.div`
  position: absolute;
  width: 210px;
  height: 50px;
  top: 40px;
  right: 55px;
  background-color: white;
  border-radius: 20px;
  border: 1px solid gray;
  box-shadow: 0 0 1px gray;
`,hpe=t=>{const[e,n]=C.useState(!1);return t.shown?Bt(MP,{children:[K(lpe,{color:"primary",title:"Change scale of display chart",onClick:()=>n(!e),children:K(H8,{})}),K(Mj,{open:e,onClick:()=>{setTimeout(()=>{n(!1)},rpe)},sx:{backgroundColor:"#00000030",zIndex:r=>r.zIndex.drawer+1},children:K(upe,{children:K(cpe,{"aria-label":"Change scale of display chart",value:t.scale,min:1,max:21,step:null,marks:[{value:1,label:"1"},{value:2,label:""},{value:3,label:"3"},{value:5,label:"5"},{value:8,label:"8"},{value:13,label:"13"},{value:21,label:"21"}],onChange:(r,i)=>t.onChangeScale(i)})})})]}):null},dpe=It.div`
  width: 100%;
  height: 100%;
  border-radius: 8px;
`,fpe=It(ar)`
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  justify-content: center;
  align-items: center;
  align-content: center;
  border-radius: 8px;
  background-color: #f5f5f5;
`,ppe=It(ar)`
  position: absolute;
  bottom: 5px;
  width: 100%;
  display: flex;
  justify-content: center;
`,gpe={[Yo.ManufactureShare]:K(D8,{}),[Yo.AgricultureShare]:K(_fe,{}),[Yo.PriceIndex]:K(Dfe,{}),[Yo.NominalWage]:K(zfe,{}),[Yo.RealWage]:K(xfe,{})},mpe=Object.values(VZ).map(t=>({label:t,icon:gpe[t],value:t})),ype=It(ar)`
  display: flex;
  align-items: center;
  margin: 0;
`,vpe=It(ar)`
  justify-content: center;
  margin-right: 8px;
  vertical-align: middle;
`;function bpe(t){return Bt(tle,{size:"small",children:[K(wle,{id:"select-label",children:"Chart"}),K(Yce,{labelId:"select-label",id:"chart-title-select",value:t.chartType,label:"title",onChange:e=>t.onChangeChartType(e.target.value),children:mpe.map(e=>K(fce,{value:e.value,children:Bt(ype,{children:[K(vpe,{children:e.icon}),K(Ble,{children:e.label})]})},e.value))})]})}const _pe=An.memo(t=>{const[e,n]=C.useState(!1);return Bt(dpe,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[K(hpe,{shown:e||!ope(),scale:t.scale,onChangeScale:t.onChangeScale}),K(fpe,{children:t.children}),K(ppe,{children:K(bpe,{chartType:t.chartType,onChangeChartType:t.onChangeChartType})})]})}),xpe={"Share of Manufacturing":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.01,lineDash:[3,3]}],bar:t=>t.manufactureShare,toFixed:2},"Share of Agriculture":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.25,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.02,lineDash:[5,3]}],bar:t=>t.agricultureShare,toFixed:2},"Price Index":{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]}],line:t=>t.priceIndex,toFixed:2},"Nominal Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.95,max:1.05,step:.005,lineDash:[5,5]}],line:t=>t.nominalWage,toFixed:3},"Real Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.9,max:1.1,step:.01,lineDash:[5,5]},{min:.95,max:1.05,step:.005,lineDash:[3,3]}],line:t=>t.realWage,toFixed:3}},$v=32,Ir=48,jv=32,ni=95,hB="#f5f5f5",wpe=(t,e,n,r,i,s,o)=>{if(t.textAlign="left",r<=20)for(let l=0;l<r;l+=1){const c=n+(l+.5)*e-(l<10?4:8);s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}else for(let l=10;l<r;l+=10){const c=n/2+l*e;s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}},Epe=An.memo(({width:t,height:e,chartTypeKey:n,scale:r,locations:i,focusedIndices:s,selectedIndices:o,onFocus:a,onUnfocus:l,onSelect:c,onUnselect:u})=>{const h=C.useRef(null),[f,g]=C.useState(null),m=v=>{if(!i||i.length===0)return null;const E=(t-Ir-jv)/i.length;if(v){if(v.x<Ir)return null;for(let T=0;T<i.length;T++)if(v.x<Ir+(T+1)*E)return T}return null},y=(v,E)=>{E.clearRect(0,0,v.width,v.height),E.fillStyle=hB,E.fillRect(Ir,0,v.width-Ir-jv,v.height-ni);const T=xpe[n];if(!T)throw new Error("ERROR ChartTypeKey="+n);if(!i||i.length===0)return;const P=(v.width-Ir-jv)/i.length;E.textAlign="right";const R=v.width-Ir-jv,M=v.height-$v-ni,k=j=>O(j,T.max,T.min,M,T.oy,r),O=(j,W,H,U,X=0,Y=1)=>{const Z=(j-X)/(W-H);return U*Y*Z+X*U/2};(()=>{for(let j=0;j<T.ticks.length;j++){const{min:W,max:H,step:U,lineDash:X}=T.ticks[j];E.lineWidth=1,E.setLineDash(X),E.strokeStyle="#ddd";let Y=0;for(let Z=W;Z<=H;Z+=U){const se=v.height-ni-k(Z);0<=se&&se<=v.height-ni&&(E.beginPath(),E.moveTo(Ir,se),E.lineTo(Ir+R,se),E.stroke(),Y++)}if(Y>3)break}E.setLineDash([])})(),i.forEach((j,W)=>{function H(){s.includes(W)&&(E.fillStyle="rgb(255,255,0,0.3)",E.fillRect(Ir+W*P,0,Math.max(P-1,1),v.height-ni))}function U(Z,se){const xe=s.includes(W),de=o.includes(W);(xe||de)&&(E.lineWidth=2,E.strokeStyle=de?"#f83":"#ff0",0<=Z&&Z<=v.height-ni?E.strokeRect(Ir+W*P+2,v.height-ni-Z+2,Math.max(P-1,1)-4,Z-4):v.height-ni<Z&&E.strokeRect(Ir+W*P,0,Math.max(P-1,1),v.height-ni),E.strokeStyle=se)}function X(Z){0<=Z&&Z<=v.height-ni?E.fillRect(Ir+W*P,v.height-ni-Z,Math.max(P-1,1),Z):v.height-ni<Z&&E.fillRect(Ir+W*P,0,Math.max(P-1,1),v.height-ni)}function Y(){const Z=o.includes(W),se=T.bar?T.bar(j):null;if(se!==null){const xe=se<0?"#88e":Z?"#ff8":"rgb(25,118,210)";E.strokeStyle=E.fillStyle=xe;const de=k(se);X(de),U(de,xe)}}H(),Y()});function I(){E.beginPath(),i.forEach((j,W)=>{const H=T.line?T.line(j):null;if(H!==null){const U=v.height-ni-k(H);E.strokeStyle="#88e",E.lineWidth=2,W===0?E.moveTo(Ir+(W+.5)*P,U):E.lineTo(Ir+(W+.5)*P,U);const X=s.includes(W),Y=o.includes(W);(X||Y)&&(E.save(),E.fillStyle=X&&Y?"red":"blue",E.fillRect(Ir+(W+.5)*P-3,U-3,6,6),E.restore())}}),E.stroke()}I();const D=()=>{for(let j=0;j<T.ticks.length;j++){const{min:W,max:H,step:U}=T.ticks[j];let X=0;for(let Y=W;Y<=H;Y+=U){const Z=v.height-ni-k(Y);if($v<=Z&&Z<=v.height-$v+ni){E.fillStyle="#888";const se=Y.toFixed(T.toFixed);E.fillText(se,Ir-6,Z),X++}}if(X>3)break}};E.fillStyle=hB,E.fillRect(0,0,v.width,$v),D(),wpe(E,P,Ir,i.length,v.height-ni+13,s,o);function N(j){j!==null&&s.includes(j)&&f!==null&&(E.fillStyle="rgb(10,10,10,0.3)",E.fillRect(Math.min(t-230,f.x),f.y+12,230,20),E.fillStyle="rgb(255,255,255,1)",E.textAlign="left",E.fillText(i[j].label,Math.min(t-230+16,f.x+8),f.y+26))}N(m(f))},x=C.useCallback(v=>{const E=h.current,T=m({x:v.offsetX,y:v.offsetY});T===null?l(s):s.includes(T)?E.style.cursor="pointer":(E.style.cursor="pointer",l(s),a([T])),g({x:v.offsetX,y:v.offsetY})},[h.current,s]),b=C.useCallback(v=>{h.current,m({x:v.offsetX,y:v.offsetY}),s.length>0&&l(s)},[h.current,s]),w=C.useCallback(v=>{h.current;const E=m({x:v.offsetX,y:v.offsetY});E!==null&&(o.includes(E)?u(o,[E]):c(o,[E]))},[h.current,o]);return C.useEffect(()=>{const v=h.current;v.onmousemove=x,v.onmouseleave=b,v.onmousedown=w},[h.current,x,b,w]),C.useEffect(()=>{const E=h.current.getContext("2d");if(!E)throw new Error("Canvas2D is not supported");y(h.current,E)},[r,t,e,n,s,o,i]),K("canvas",{ref:h,width:t,height:e})}),dB=({sessionState:t,uiState:e,setSessionChartType:n,setSessionChartScale:r,onSelect:i,onUnselect:s,onFocus:o,onUnfocus:a})=>K(_pe,{onChangeChartType:n,onChangeScale:r,scale:e==null?void 0:e.chartScale,chartType:e==null?void 0:e.chartType,children:K(Epe,{width:300,height:300,chartTypeKey:e==null?void 0:e.chartType,scale:e==null?void 0:e.chartScale,locations:t==null?void 0:t.locations,focusedIndices:e==null?void 0:e.focusedIndices,selectedIndices:e==null?void 0:e.selectedIndices,onFocus:o,onUnfocus:a,onSelect:i,onUnselect:s})}),Spe=()=>Bt(ar,{style:{display:"flex",gap:"10px"},children:[K(ZC,{variant:"contained",startIcon:K(Cfe,{}),title:"Import a simulation from a file",children:"Import"}),K(ZC,{variant:"contained",startIcon:K(Pfe,{}),title:"Export a simulation from a file",children:"Export"})]}),Mw=It(Hc)`
  background-color: rgba(255, 255, 255, 0.5);
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  border-radius: 20px;
  border: 1px solid gray;
  z-index: 101;
`,Tpe=It(Mw)``,Ppe=It(Mw)``,Cpe=It(Mw)``,Ape=It(Mw)``,Rpe=t=>{var e,n,r,i;return Bt(ar,{style:{display:"flex",gap:"10px"},children:[K(Tpe,{id:"addNodeButton",disabled:!((e=t.state)!=null&&e.addLocation),color:"primary",title:"Add a location",onClick:t.onAddLocation,children:K(Sfe,{})}),K(Ppe,{id:"removeNodeButton",disabled:!((n=t.state)!=null&&n.removeLocation),color:"primary",title:"Remove selected location(s)",onClick:t.onRemoveLocation,children:Bt(GC,{children:[K("path",{d:"M18 11h-2v2h2z"}),K("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2z"}),K("path",{d:"m21.398 15.596-1.662 1.664-1.63-1.631-1.413 1.41 1.631 1.63-1.795 1.798 1.41 1.41 1.795-1.795 1.83 1.828 1.41-1.412-1.828-1.828 1.665-1.664-1.413-1.41z"})]})}),K(Cpe,{id:"addEdgeButton",disabled:!((r=t.state)!=null&&r.addEdge),color:"primary",title:"Add edge(s) between selected locations",onClick:t.onAddEdge,children:K(bfe,{})}),K(Ape,{id:"removeEdgeButton",disabled:!((i=t.state)!=null&&i.removeEdge),color:"primary",title:"Remove edge(s) between selected locations",onClick:t.onRemoveEdge,children:K(Ffe,{})})]})};function Ipe(t){return{layout:{i:"BackgroundPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],static:!0},resource:{id:"BackgroundPanel",type:In.BackgroundPanel,shown:!0}}}const Mpe=({type:t,sessionState:e,setSessionState:n,onAddBulkLocations:r,onRemoveBulkLocations:i})=>{const s=C.useCallback(u=>{n(h=>(h.parameterSet=Lf[t].find(f=>f.caseId===u)||h.parameterSet,h),!0,"changeCase")},[n]),o=C.useCallback((u,h)=>{n(f=>{f.parameterSet.manufactureShare=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),a=C.useCallback((u,h)=>{n(f=>{f.parameterSet.transportationCost=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),l=C.useCallback((u,h)=>{n(f=>{f.parameterSet.elasticitySubstitution=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),c=C.useCallback((u,h)=>{u<e.locations.length?i(u,h):e.locations.length<u&&(console.log("onAddBulkLocations",u),r(u,h))},[]);return{onParameterSetChange:s,setManufactureShare:o,setTransportationCost:a,setElasticitySubstitution:l,setNumLocations:c}};class Ope{constructor(){this.controller=null}async runAsyncFunction(e){this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal,e()}async cancelAll(){this.controller&&this.controller.abort()}}const Lpe=()=>K(ar,{style:{display:"flex",gap:"10px"}});var K8={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(K8);var Z8=K8.exports;const kpe=["element"];function Dpe(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}function Npe(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2);if(t[i].element===e)return i;t[i].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?r=i-1:n=i+1}return n}const Q8=C.createContext({});function Bpe(t){const e=C.useRef(null);return C.useEffect(()=>{e.current=t},[t]),e.current}const fB=()=>{};function Fpe(t){const[,e]=C.useState(),{registerDescendant:n=fB,unregisterDescendant:r=fB,descendants:i=[],parentId:s=null}=C.useContext(Q8),o=Dpe(i,c=>c.element===t.element),a=Bpe(i),l=i.some((c,u)=>a&&a[u]&&a[u].element!==c.element);return Us(()=>{if(t.element)return n($({},t,{index:o})),()=>{r(t.element)};e({})},[n,r,o,l,t]),{parentId:s,index:o}}function J8(t){const{children:e,id:n}=t,[r,i]=C.useState([]),s=C.useCallback(l=>{let{element:c}=l,u=Qe(l,kpe);i(h=>{if(h.length===0)return[$({},u,{element:c,index:0})];const f=Npe(h,c);let g;if(h[f]&&h[f].element===c)g=h;else{const m=$({},u,{element:c,index:f});g=h.slice(),g.splice(f,0,m)}return g.forEach((m,y)=>{m.index=y}),g})},[]),o=C.useCallback(l=>{i(c=>c.filter(u=>l!==u.element))},[]),a=C.useMemo(()=>({descendants:r,registerDescendant:s,unregisterDescendant:o,parentId:n}),[r,s,o,n]);return Q.jsx(Q8.Provider,{value:a,children:e})}const eV={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},tV=C.createContext(eV),nV=()=>C.useContext(tV);function zpe(t){const{instance:e,multiSelect:n}=nV(),r=e?e.isNodeExpandable(t):!1,i=e?e.isNodeExpanded(t):!1,s=e?e.isNodeFocused(t):!1,o=e?e.isNodeSelected(t):!1,a=e?e.isNodeDisabled(t):!1;return{disabled:a,expanded:i,selected:o,focused:s,handleExpansion:h=>{if(e&&!a){s||e.focusNode(h,t);const f=n&&(h.shiftKey||h.ctrlKey||h.metaKey);r&&!(f&&e.isNodeExpanded(t))&&e.toggleNodeExpansion(h,t)}},handleSelection:h=>{e&&!a&&(s||e.focusNode(h,t),n&&(h.shiftKey||h.ctrlKey||h.metaKey)?h.shiftKey?e.selectRange(h,{end:t}):e.selectNode(h,t,!0):e.selectNode(h,t))},preventSelection:h=>{(h.shiftKey||h.ctrlKey||h.metaKey||a)&&h.preventDefault()}}}const Upe=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],rV=C.forwardRef(function(e,n){const{classes:r,className:i,displayIcon:s,expansionIcon:o,icon:a,label:l,nodeId:c,onClick:u,onMouseDown:h}=e,f=Qe(e,Upe),{disabled:g,expanded:m,selected:y,focused:x,handleExpansion:b,handleSelection:w,preventSelection:v}=zpe(c),E=a||o||s,T=R=>{v(R),h&&h(R)},P=R=>{b(R),w(R),u&&u(R)};return Q.jsxs("div",$({},f,{className:at(i,r.root,m&&r.expanded,y&&r.selected,x&&r.focused,g&&r.disabled),onClick:P,onMouseDown:T,ref:n,children:[Q.jsx("div",{className:r.iconContainer,children:E}),Q.jsx("div",{className:r.label,children:l})]}))});function $pe(t){return jt("MuiTreeItem",t)}const oo=Ft("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),jpe=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],Vpe=t=>{const{classes:e}=t;return $t({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},$pe,e)},Gpe=Fe("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),Hpe=Fe(rV,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${oo.iconContainer}`]:e.iconContainer},e.label&&{[`& .${oo.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${oo.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${oo.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${oo.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${oo.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${oo.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${oo.label}`]:$({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1)})),Wpe=Fe(pj,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),Xpe=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiTreeItem"}),{children:i,className:s,collapseIcon:o,ContentComponent:a=rV,ContentProps:l,endIcon:c,expandIcon:u,disabled:h,icon:f,id:g,label:m,nodeId:y,onClick:x,onMouseDown:b,TransitionComponent:w=pj,TransitionProps:v}=r,E=Qe(r,jpe),{icons:T,multiSelect:P,disabledItemsFocusable:R,treeId:M,instance:k}=nV();let O;g!=null?O=g:M&&y&&(O=`${M}-${y}`);const[F,I]=C.useState(null),D=C.useRef(null),N=Hn(I,n),j=C.useMemo(()=>({element:F,id:y}),[y,F]),{index:W,parentId:H}=Fpe(j),U=!!(Array.isArray(i)?i.length:i),X=k?k.isNodeExpanded(y):!1,Y=k?k.isNodeFocused(y):!1,Z=k?k.isNodeSelected(y):!1,se=k?k.isNodeDisabled(y):!1,xe=$({},r,{expanded:X,focused:Y,selected:Z,disabled:se}),de=Vpe(xe);let Me,he;U&&(X?he=o||T.defaultCollapseIcon:he=u||T.defaultExpandIcon),U?Me=T.defaultParentIcon:Me=c||T.defaultEndIcon,C.useEffect(()=>{if(k&&W!==-1)return k.updateNode({id:y,idAttribute:O,index:W,parentId:H,expandable:U,disabled:h}),()=>k.removeNode(y)},[k,H,W,y,U,h,O]),C.useEffect(()=>{if(k&&m){var ae,me;return k.mapFirstChar(y,((ae=(me=D.current)==null?void 0:me.textContent)!=null?ae:"").substring(0,1).toLowerCase())}},[k,y,m]);let Te;P?Te=Z:Z&&(Te=!0);function le(ae){if(ae.target===ae.currentTarget){let oe;typeof ae.target.getRootNode=="function"?oe=ae.target.getRootNode():oe=or(ae.target),oe.getElementById(M).focus({preventScroll:!0})}const me=!R&&se;k&&!Y&&ae.currentTarget===ae.target&&!me&&k.focusNode(ae,y)}return Q.jsxs(Gpe,$({className:at(de.root,s),role:"treeitem","aria-expanded":U?X:void 0,"aria-selected":Te,"aria-disabled":se||void 0,id:O,tabIndex:-1},E,{ownerState:xe,onFocus:le,ref:N,children:[Q.jsx(Hpe,$({as:a,ref:D,classes:{root:de.content,expanded:de.expanded,selected:de.selected,focused:de.focused,disabled:de.disabled,iconContainer:de.iconContainer,label:de.label},label:m,nodeId:y,onClick:x,onMouseDown:b,icon:f,expansionIcon:he,displayIcon:Me,ownerState:xe},l)),i&&Q.jsx(J8,{id:y,children:Q.jsx(Wpe,$({as:w,unmountOnExit:!0,className:de.group,in:X,component:"ul",role:"group"},v,{children:i}))})]}))});function Ype(t){return jt("MuiTreeView",t)}Ft("MuiTreeView",["root"]);const qpe=(t,e)=>{const n=C.useRef({}),[r,i]=C.useState(()=>{const o={};return t.forEach(a=>{a.models&&Object.entries(a.models).forEach(([l,c])=>{n.current[l]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:e[c.controlledProp]!==void 0},o[l]=e[c.defaultProp]})}),o});return Object.fromEntries(Object.entries(n.current).map(([o,a])=>{const l=a.isControlled?e[a.controlledProp]:r[o];return[o,{value:l,setValue:c=>{a.isControlled||i(u=>$({},u,{[o]:c}))}}]}))};let Kpe=class{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,n,r={}){let i=this.events[e];i||(i={highPriority:new Map,regular:new Map},this.events[e]=i),r.isFirst?i.highPriority.set(n,!0):i.regular.set(n,!0)}removeListener(e,n){this.events[e]&&(this.events[e].regular.delete(n),this.events[e].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(e,...n){const r=this.events[e];if(!r)return;const i=Array.from(r.highPriority.keys()),s=Array.from(r.regular.keys());for(let o=i.length-1;o>=0;o-=1){const a=i[o];r.highPriority.has(a)&&a.apply(this,n)}for(let o=0;o<s.length;o+=1){const a=s[o];r.regular.has(a)&&a.apply(this,n)}}once(e,n){const r=this;this.on(e,function i(...s){r.removeListener(e,i),n.apply(r,s)})}};const oT=(t,e)=>{const n=t.getNode(e),r=t.getNavigableChildrenIds(n.parentId),i=r.indexOf(e);if(i===0)return n.parentId;let s=r[i-1];for(;t.isNodeExpanded(s)&&t.getNavigableChildrenIds(s).length>0;)s=t.getNavigableChildrenIds(s).pop();return s},Lg=(t,e)=>{if(t.isNodeExpanded(e)&&t.getNavigableChildrenIds(e).length>0)return t.getNavigableChildrenIds(e)[0];let n=t.getNode(e);for(;n!=null;){const r=t.getNavigableChildrenIds(n.parentId),i=r[r.indexOf(n.id)+1];if(i)return i;n=t.getNode(n.parentId)}return null},fA=t=>{let e=t.getNavigableChildrenIds(null).pop();for(;t.isNodeExpanded(e);)e=t.getNavigableChildrenIds(e).pop();return e},pA=t=>t.getNavigableChildrenIds(null)[0],pp=(t,e)=>{Object.assign(t,e)},Zpe=t=>t.isPropagationStopped!==void 0,Qpe=({instance:t})=>{const[e]=C.useState(()=>new Kpe),n=C.useCallback((...i)=>{const[s,o,a={}]=i;a.defaultMuiPrevented=!1,!(Zpe(a)&&a.isPropagationStopped())&&e.emit(s,o,a)},[e]),r=C.useCallback((i,s)=>(e.on(i,s),()=>{e.removeListener(i,s)}),[e]);pp(t,{$$publishEvent:n,$$subscribeEvent:r})},Jpe=[Qpe],ege=t=>{const e=[...Jpe,...t.plugins],n=e.reduce((m,y)=>y.getDefaultizedParams?y.getDefaultizedParams(m):m,t),r=qpe(e,n),s=C.useRef({}).current,o=C.useRef(null),a=Hn(o,t.rootRef),[l,c]=C.useState(()=>{const m={};return e.forEach(y=>{y.getInitialState&&Object.assign(m,y.getInitialState(n))}),m}),u=[];let h=eV;const f=m=>{const y=m({instance:s,params:n,state:l,setState:c,rootRef:o,models:r})||{};y.getRootProps&&u.push(y.getRootProps),y.contextValue&&(h=y.contextValue)};return e.forEach(f),{getRootProps:(m={})=>{const y=$({role:"tree",tabIndex:0},m,{ref:a});return u.forEach(x=>{Object.assign(y,x(m))}),y},rootRef:a,contextValue:h}};function tge(t){const{value:e,children:n}=t;return Q.jsx(tV.Provider,{value:e,children:Q.jsx(J8,{children:n})})}const nge=(t,e,n)=>{t.$$publishEvent(e,n)},rge=({instance:t,params:e})=>{const n=C.useRef({}),r=C.useCallback(c=>n.current[c],[]),i=C.useCallback(c=>{n.current[c.id]=c},[]),s=C.useCallback(c=>{const u=$({},n.current);delete u[c],n.current=u,nge(t,"removeNode",{id:c})},[t]),o=C.useCallback(c=>{if(c==null)return!1;let u=t.getNode(c);if(!u)return!1;if(u.disabled)return!0;for(;u.parentId!=null;)if(u=t.getNode(u.parentId),u.disabled)return!0;return!1},[t]),a=Pi(c=>Object.values(n.current).filter(u=>u.parentId===c).sort((u,h)=>u.index-h.index).map(u=>u.id));pp(t,{getNode:r,updateNode:i,removeNode:s,getChildrenIds:a,getNavigableChildrenIds:c=>{let u=t.getChildrenIds(c);return e.disabledItemsFocusable||(u=u.filter(h=>!t.isNodeDisabled(h))),u},isNodeDisabled:o})},fM=({instance:t,params:e,models:n})=>{const r=C.useCallback(a=>Array.isArray(n.expanded.value)?n.expanded.value.indexOf(a)!==-1:!1,[n.expanded.value]),i=C.useCallback(a=>{var l;return!!((l=t.getNode(a))!=null&&l.expandable)},[t]),s=Pi((a,l)=>{if(l==null)return;let c;n.expanded.value.indexOf(l)!==-1?c=n.expanded.value.filter(u=>u!==l):c=[l].concat(n.expanded.value),e.onNodeToggle&&e.onNodeToggle(a,c),n.expanded.setValue(c)});pp(t,{isNodeExpanded:r,isNodeExpandable:i,toggleNodeExpansion:s,expandAllSiblings:(a,l)=>{const c=t.getNode(l),h=t.getChildrenIds(c.parentId).filter(g=>t.isNodeExpandable(g)&&!t.isNodeExpanded(g)),f=n.expanded.value.concat(h);h.length>0&&(n.expanded.setValue(f),e.onNodeToggle&&e.onNodeToggle(a,f))}})};fM.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const ige=[];fM.getDefaultizedParams=t=>{var e;return $({},t,{defaultExpanded:(e=t.defaultExpanded)!=null?e:ige})};const sge=(t,e,n)=>{if(e===n)return[e,n];const r=t.getNode(e),i=t.getNode(n);if(r.parentId===i.id||i.parentId===r.id)return i.parentId===r.id?[r.id,i.id]:[i.id,r.id];const s=[r.id],o=[i.id];let a=r.parentId,l=i.parentId,c=o.indexOf(a)!==-1,u=s.indexOf(l)!==-1,h=!0,f=!0;for(;!u&&!c;)h&&(s.push(a),c=o.indexOf(a)!==-1,h=a!==null,!c&&h&&(a=t.getNode(a).parentId)),f&&!c&&(o.push(l),u=s.indexOf(l)!==-1,f=l!==null,!u&&f&&(l=t.getNode(l).parentId));const g=c?a:l,m=t.getChildrenIds(g),y=s[s.indexOf(g)-1],x=o[o.indexOf(g)-1];return m.indexOf(y)<m.indexOf(x)?[e,n]:[n,e]},pM=({instance:t,params:e,models:n})=>{const r=C.useRef(null),i=C.useRef(!1),s=C.useRef([]),o=m=>Array.isArray(n.selected.value)?n.selected.value.indexOf(m)!==-1:n.selected.value===m,a=(m,y,x=!1)=>{if(!e.disableSelection){if(x){if(Array.isArray(n.selected.value)){let b;n.selected.value.indexOf(y)!==-1?b=n.selected.value.filter(w=>w!==y):b=[y].concat(n.selected.value),e.onNodeSelect&&e.onNodeSelect(m,b),n.selected.setValue(b)}}else{const b=e.multiSelect?[y]:y;e.onNodeSelect&&e.onNodeSelect(m,b),n.selected.setValue(b)}r.current=y,i.current=!1,s.current=[]}},l=(m,y)=>{const[x,b]=sge(t,m,y),w=[x];let v=x;for(;v!==b;)v=Lg(t,v),w.push(v);return w},c=(m,y)=>{let x=n.selected.value.slice();const{start:b,next:w,current:v}=y;!w||!v||(s.current.indexOf(v)===-1&&(s.current=[]),i.current?s.current.indexOf(w)!==-1?(x=x.filter(E=>E===b||E!==v),s.current=s.current.filter(E=>E===b||E!==v)):(x.push(w),s.current.push(w)):(x.push(w),s.current.push(v,w)),e.onNodeSelect&&e.onNodeSelect(m,x),n.selected.setValue(x))},u=(m,y)=>{let x=n.selected.value.slice();const{start:b,end:w}=y;i.current&&(x=x.filter(T=>s.current.indexOf(T)===-1));let v=l(b,w);v=v.filter(T=>!t.isNodeDisabled(T)),s.current=v;let E=x.concat(v);E=E.filter((T,P)=>E.indexOf(T)===P),e.onNodeSelect&&e.onNodeSelect(m,E),n.selected.setValue(E)};return pp(t,{isNodeSelected:o,selectNode:a,selectRange:(m,y,x=!1)=>{if(e.disableSelection)return;const{start:b=r.current,end:w,current:v}=y;x?c(m,{start:b,next:w,current:v}):b!=null&&w!=null&&u(m,{start:b,end:w}),i.current=!0},rangeSelectToLast:(m,y)=>{r.current||(r.current=y);const x=i.current?r.current:y;t.selectRange(m,{start:x,end:fA(t)})},rangeSelectToFirst:(m,y)=>{r.current||(r.current=y);const x=i.current?r.current:y;t.selectRange(m,{start:x,end:pA(t)})}}),{getRootProps:()=>({"aria-multiselectable":e.multiSelect})}};pM.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const oge=[];pM.getDefaultizedParams=t=>{var e,n,r;return $({},t,{disableSelection:(e=t.disableSelection)!=null?e:!1,multiSelect:(n=t.multiSelect)!=null?n:!1,defaultSelected:(r=t.defaultSelected)!=null?r:t.multiSelect?oge:null})};const pB=1e3;class age{constructor(e=pB){this.timeouts=new Map,this.cleanupTimeout=pB,this.cleanupTimeout=e}register(e,n,r){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,i)}unregister(e){const n=this.timeouts.get(e.cleanupToken);n&&(this.timeouts.delete(e.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((e,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class lge{constructor(){this.registry=new FinalizationRegistry(e=>{typeof e=="function"&&e()})}register(e,n,r){this.registry.register(e,n,r)}unregister(e){this.registry.unregister(e)}reset(){}}class cge{}function uge(t){let e=0;return function(r,i,s){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new lge:new age);const[o]=C.useState(new cge),a=C.useRef(null),l=C.useRef();l.current=s;const c=C.useRef(null);if(!a.current&&l.current){const u=(h,f)=>{if(!f.defaultMuiPrevented){var g;(g=l.current)==null||g.call(l,h,f)}};a.current=r.$$subscribeEvent(i,u),e+=1,c.current={cleanupToken:e},t.registry.register(o,()=>{var h;(h=a.current)==null||h.call(a),a.current=null,c.current=null},c.current)}else!l.current&&a.current&&(a.current(),a.current=null,c.current&&(t.registry.unregister(c.current),c.current=null));C.useEffect(()=>{if(!a.current&&l.current){const u=(h,f)=>{if(!f.defaultMuiPrevented){var g;(g=l.current)==null||g.call(l,h,f)}};a.current=r.$$subscribeEvent(i,u)}return c.current&&t.registry&&(t.registry.unregister(c.current),c.current=null),()=>{var u;(u=a.current)==null||u.call(a),a.current=null}},[r,i])}}const hge={registry:null},dge=uge(hge),gM=({instance:t,params:e,state:n,setState:r,models:i,rootRef:s})=>{const o=Pi(g=>{const m=typeof g=="function"?g(n.focusedNodeId):g;r(y=>$({},y,{focusedNodeId:m}))}),a=C.useCallback(g=>n.focusedNodeId===g,[n.focusedNodeId]),l=Pi((g,m)=>{m&&(o(m),e.onNodeFocus&&e.onNodeFocus(g,m))});pp(t,{isNodeFocused:a,focusNode:l}),dge(t,"removeNode",({id:g})=>{o(m=>m===g&&s.current===or(s.current).activeElement?t.getChildrenIds(null)[0]:m)});const c=g=>m=>{var y;if((y=g.onFocus)==null||y.call(g,m),m.target===m.currentTarget){const x=w=>{const v=t.getNode(w);return v&&(v.parentId==null||t.isNodeExpanded(v.parentId))};let b;Array.isArray(i.selected.value)?b=i.selected.value.find(x):i.selected.value!=null&&x(i.selected.value)&&(b=i.selected.value),b==null&&(b=t.getNavigableChildrenIds(null)[0]),t.focusNode(m,b)}},u=g=>m=>{var y;(y=g.onBlur)==null||y.call(g,m),o(null)},h=t.getNode(n.focusedNodeId),f=h?h.idAttribute:null;return{getRootProps:g=>({onFocus:c(g),onBlur:u(g),"aria-activedescendant":f??void 0})}};gM.getInitialState=()=>({focusedNodeId:null});gM.getDefaultizedParams=t=>{var e;return $({},t,{disabledItemsFocusable:(e=t.disabledItemsFocusable)!=null?e:!1})};function fge(t){return t&&t.length===1&&t.match(/\S/)}function gB(t,e,n){for(let r=e;r<t.length;r+=1)if(n===t[r])return r;return-1}const pge=({instance:t,params:e,state:n})=>{const i=cu().direction==="rtl",s=C.useRef({}),o=Pi((g,m)=>(s.current[g]=m,()=>{const y=$({},s.current);delete y[g],s.current=y}));pp(t,{mapFirstChar:o});const a=g=>(n.focusedNodeId!=null&&t.isNodeExpandable(n.focusedNodeId)&&(t.isNodeExpanded(n.focusedNodeId)?t.focusNode(g,Lg(t,n.focusedNodeId)):t.isNodeDisabled(n.focusedNodeId)||t.toggleNodeExpansion(g,n.focusedNodeId)),!0),l=g=>{if(n.focusedNodeId==null)return!1;if(t.isNodeExpanded(n.focusedNodeId)&&!t.isNodeDisabled(n.focusedNodeId))return t.toggleNodeExpansion(g,n.focusedNodeId),!0;const m=t.getNode(n.focusedNodeId).parentId;return m?(t.focusNode(g,m),!0):!1},c=(g,m,y)=>{let x,b;const w=y.toLowerCase(),v=[],E=[];Object.keys(s.current).forEach(T=>{const P=t.getNode(T),R=P.parentId?t.isNodeExpanded(P.parentId):!0,M=e.disabledItemsFocusable?!1:t.isNodeDisabled(T);R&&!M&&(v.push(T),E.push(s.current[T]))}),x=v.indexOf(m)+1,x>=v.length&&(x=0),b=gB(E,x,w),b===-1&&(b=gB(E,0,w)),b>-1&&t.focusNode(g,v[b])},u=(g,m)=>{t.isNodeDisabled(Lg(t,m))||t.selectRange(g,{end:Lg(t,m),current:m},!0)},h=(g,m)=>{t.isNodeDisabled(oT(t,m))||t.selectRange(g,{end:oT(t,m),current:m},!0)},f=g=>m=>{var y;(y=g.onKeyDown)==null||y.call(g,m);let x=!1;const b=m.key;if(m.altKey||m.currentTarget!==m.target||n.focusedNodeId==null)return;const w=m.ctrlKey||m.metaKey;switch(b){case" ":!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&(x=!0,e.multiSelect&&m.shiftKey?t.selectRange(m,{end:n.focusedNodeId}):e.multiSelect?t.selectNode(m,n.focusedNodeId,!0):t.selectNode(m,n.focusedNodeId)),m.stopPropagation();break;case"Enter":t.isNodeDisabled(n.focusedNodeId)||(t.isNodeExpandable(n.focusedNodeId)?(t.toggleNodeExpansion(m,n.focusedNodeId),x=!0):e.disableSelection||(x=!0,e.multiSelect?t.selectNode(m,n.focusedNodeId,!0):t.selectNode(m,n.focusedNodeId))),m.stopPropagation();break;case"ArrowDown":e.multiSelect&&m.shiftKey&&!e.disableSelection&&u(m,n.focusedNodeId),t.focusNode(m,Lg(t,n.focusedNodeId)),x=!0;break;case"ArrowUp":e.multiSelect&&m.shiftKey&&!e.disableSelection&&h(m,n.focusedNodeId),t.focusNode(m,oT(t,n.focusedNodeId)),x=!0;break;case"ArrowRight":i?x=l(m):x=a(m);break;case"ArrowLeft":i?x=a(m):x=l(m);break;case"Home":e.multiSelect&&w&&m.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToFirst(m,n.focusedNodeId),t.focusNode(m,pA(t)),x=!0;break;case"End":e.multiSelect&&w&&m.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToLast(m,n.focusedNodeId),t.focusNode(m,fA(t)),x=!0;break;default:b==="*"?(t.expandAllSiblings(m,n.focusedNodeId),x=!0):e.multiSelect&&w&&b.toLowerCase()==="a"&&!e.disableSelection?(t.selectRange(m,{start:pA(t),end:fA(t)}),x=!0):!w&&!m.shiftKey&&fge(b)&&(c(m,n.focusedNodeId,b),x=!0)}x&&(m.preventDefault(),m.stopPropagation())};return{getRootProps:g=>({onKeyDown:f(g)})}},gge=({instance:t,params:e})=>{const n=Kx(e.id);return{getRootProps:()=>({id:n}),contextValue:{treeId:n,instance:t,multiSelect:e.multiSelect,disabledItemsFocusable:e.disabledItemsFocusable,icons:{defaultCollapseIcon:e.defaultCollapseIcon,defaultEndIcon:e.defaultEndIcon,defaultExpandIcon:e.defaultExpandIcon,defaultParentIcon:e.defaultParentIcon}}}},mge=[rge,fM,pM,gM,pge,gge],yge=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],vge=t=>{const{classes:e}=t;return $t({root:["root"]},Ype,e)},mB=Fe("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0}),bge=C.forwardRef(function(e,n){const r=Ht({props:e,name:"MuiTreeView"}),i=r,s=r,{disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:h,defaultSelected:f,selected:g,multiSelect:m,onNodeSelect:y,id:x,defaultCollapseIcon:b,defaultEndIcon:w,defaultExpandIcon:v,defaultParentIcon:E,children:T}=s,P=Qe(s,yge),{getRootProps:R,contextValue:M}=ege({disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:h,defaultSelected:f,selected:g,multiSelect:m,onNodeSelect:y,id:x,defaultCollapseIcon:b,defaultEndIcon:w,defaultExpandIcon:v,defaultParentIcon:E,plugins:mge,rootRef:n}),k=vge(r),O=wi({elementType:mB,externalSlotProps:{},externalForwardedProps:P,className:k.root,getSlotProps:R,ownerState:i});return Q.jsx(tge,{value:M,children:Q.jsx(mB,$({},O,{children:T}))})});var mM={},aT={};const _ge=dn(Vne);var yB;function iV(){return yB||(yB=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=_ge}(aT)),aT}var xge=Z8;Object.defineProperty(mM,"__esModule",{value:!0});var sV=mM.default=void 0,wge=xge(iV()),Ege=Q;sV=mM.default=(0,wge.default)((0,Ege.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var yM={},Sge=Z8;Object.defineProperty(yM,"__esModule",{value:!0});var oV=yM.default=void 0,Tge=Sge(iV()),Pge=Q;oV=yM.default=(0,Tge.default)((0,Pge.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const Cge=Fe(Xpe)(({theme:t})=>({color:t.palette.text.secondary,[`& .${oo.content}`]:{color:t.palette.text.secondary,borderTopRightRadius:t.spacing(2),borderBottomRightRadius:t.spacing(2),paddingRight:t.spacing(1),fontWeight:t.typography.fontWeightMedium,"&.Mui-expanded":{fontWeight:t.typography.fontWeightRegular},"&:hover":{backgroundColor:t.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:`var(--tree-view-bg-color, ${t.palette.action.selected})`,color:"var(--tree-view-color)"},[`& .${oo.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${oo.group}`]:{marginLeft:0,[`& .${oo.content}`]:{paddingLeft:t.spacing(1)}}})),cg=An.forwardRef(function(e,n){const r=cu(),{bgColor:i,color:s,level:o=1,labelIcon:a,labelInfo:l,labelText:c,colorForDarkMode:u,bgColorForDarkMode:h,...f}=e,g={"--tree-view-color":r.palette.mode!=="dark"?s:u,"--tree-view-bg-color":r.palette.mode!=="dark"?i:h};return K(Cge,{label:Bt(ar,{sx:{display:"flex",alignItems:"center",p:.1,marginLeft:(e.level-1)*2,pr:0},children:[K(Cae,{onClick:m=>m.stopPropagation()}),K(ar,{component:a,color:"inherit",sx:{mr:.1}}),K(Ji,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:c}),K(Ji,{variant:"caption",color:"inherit",children:l})]}),style:g,...f,ref:n})}),Age=()=>K(Dj,{style:{height:"300px",overflowY:"scroll"},children:Bt(bge,{defaultCollapseIcon:K(sV,{}),defaultExpandIcon:K(oV,{}),defaultExpanded:["1","2"],children:[K(cg,{nodeId:"1",level:1,labelText:"Country Shapes",labelIcon:Rfe,children:K(cg,{nodeId:"1-1",level:2,labelText:"Region1 Shapes",labelIcon:Ife,children:K(cg,{nodeId:"1-1-1",level:3,labelText:"Region2 Shapes",labelIcon:$fe})})}),K(cg,{nodeId:"2",level:1,labelText:"Cities",labelIcon:Ofe}),K(cg,{nodeId:"3",level:1,labelText:"Routes",labelIcon:j8})]})}),Rge=It.div`
  display: flex;
  gap: 10px;
  align-content: center;
  align-items: center;
`,Ige=It.div`
  display: flex;
  gap: 4px;
  margin-top: -5px;
  vertical-align: top;
`,Mge=It.div`
  padding-top: 4px;
  margin-left: 10px;
  text-align: center;
  width: 100px;
`,Oge=It(vw)`
  margin-top: 2px;
`;function Vv(t){return Bt(Rge,{children:[K(l_,{title:t.title,children:Bt(Mge,{children:[t.icon,Bt(Ige,{children:[Bt(Ji,{children:[t.label," ="]}),K(Ji,{children:t.value})]})]})}),K(Oge,{"aria-label":t.label,value:t.value,getAriaValueText:e=>`${e}`,step:t.step,marks:t.marks,min:t.min,max:t.max,valueLabelDisplay:"auto",onChange:t.onChange,onChangeCommitted:t.onChangeCommitted})]})}const Lge=It.div`
  margin-left: 0;
  margin-right: 10px;
`,kge=C.forwardRef((t,e)=>{const{set:n,current:r}=Bx(oh);C.useImperativeHandle(e,()=>({resetToDefault(){const g=Lf[t.type].find(m=>r.parameterSet.caseId===m.caseId);n(m=>{m.parameterSet.numLocations=g.numLocations,m.parameterSet.manufactureShare=g.manufactureShare,m.parameterSet.transportationCost=g.transportationCost,m.parameterSet.elasticitySubstitution=g.elasticitySubstitution},!0,"resetToDefault")}}));const i=Lf[t.type],s=C.useCallback((g,m)=>{t.setNumLocations(m,!1)},[n]),o=C.useCallback((g,m)=>{t.setNumLocations(m,!0)},[n]),a=C.useCallback((g,m)=>{n(y=>{y.parameterSet.manufactureShare=m},!1,"set parameter")},[n]),l=C.useCallback((g,m)=>{n(y=>{y.parameterSet.manufactureShare=m},!0,"set parameter")},[n]),c=C.useCallback((g,m)=>{n(y=>{y.parameterSet.transportationCost=m},!1,"set parameter")},[n]),u=C.useCallback((g,m)=>{n(y=>{y.parameterSet.transportationCost=m},!0,"set parameter")},[n]),h=C.useCallback((g,m)=>{n(y=>{y.parameterSet.elasticitySubstitution=m},!1,"set parameter")},[n]),f=C.useCallback((g,m)=>{n(y=>{y.parameterSet.elasticitySubstitution=m},!0,"set parameter")},[n]);return Bt(Lge,{children:[K(Fue,{exclusive:!0,value:r.parameterSet.caseId,onChange:(g,m)=>{m!==null&&t.onParameterSetChange(m,!0)},sx:{display:"flex",justifyContent:"center",marginTop:"4px",marginBottom:"8px"},children:i.map((g,m)=>K(Mue,{size:"small",title:g.title+": "+g.description,value:g.caseId,children:g.title},m))}),K(Vv,{title:"K: The number of locations connected by transportation network.",icon:K(Efe,{}),label:"K",step:1,marks:[{value:1,label:"1"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"60"},{value:80,label:"80"},{value:100,label:"100"}],value:r.parameterSet.numLocations||0,onChange:s,onChangeCommitted:o,min:1,max:100}),K(Vv,{title:": The share of manufacturing goods in expenditure.",icon:K(D8,{}),label:"",step:.01,marks:[{value:0,label:"0"},{value:.2,label:"0.2"},{value:.4,label:"0.4"},{value:.6,label:"0.6"},{value:.8,label:"0.8"},{value:1,label:"1.0"}],value:r.parameterSet.manufactureShare||0,onChange:a,onChangeCommitted:l,min:0,max:1}),K(Vv,{title:": The level of transportation cost among locations. A value of 1 represents no transportation cost, while a value of 10 represents significant transportation cost.",icon:K($8,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:4,label:"4"},{value:7,label:"7"},{value:10,label:"10"}],value:r.parameterSet.transportationCost||0,onChange:c,onChangeCommitted:u,min:1,max:10}),K(Vv,{title:": The elasticity of substitution among manufactured goods. A value of 1 represents a strong love of variety, while a value of 20 represents a limited love of variety.",icon:K(Tfe,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"}],value:r.parameterSet.elasticitySubstitution||0,onChange:h,onChangeCommitted:f,min:1,max:20})]})});function vB({type:t,onParameterSetChange:e,setNumLocations:n}){return K(kge,{type:t,onParameterSetChange:e,setNumLocations:n})}const Dge=It.div`
  color: black;
  width: 33%;
`,Nge=It.h3`
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 0;
  margin-bottom: 10px;
`,Bge=It.div`
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: auto;
`,Fge=It.table`
  border-collapse: collapse;
  border: 0 solid black;
  text-align: center;
  box-shadow: 1px 1px 1px 3px #ccc inset;
  max-height: 40vh;

  th,
  td {
    border: 0 solid white;
    cursor: pointer;
  }

  th {
    background-color: #e0e0e0;

    position: sticky;
    left: 0;
    top: 0; /* Don't forget this, required for the stickiness */
    box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.4);
  }

  th.selected,
  td.selected {
    border: 0 solid #e0e0e0 !important;
  }

  .selected.focused {
    color: red;
  }

  th.focused,
  td.focused {
    color: rgba(100, 100, 0, 1);
  }

  tr:first-of-type > th.selected,
  tr > th:first-of-type.selected {
    border: 0 solid yellow !important;
    background-color: #dd1 !important;
  }

  tr:first-of-type > th.focused,
  tr > th:first-of-type.focused {
    background-color: rgb(255, 255, 0, 1) !important;
  }

  tr:first-of-type > th.focused.selected,
  tr > th:first-of-type.focused.selected {
    background-color: #ff0 !important;
  }
`,zge=It(ar)`
  flex: 1;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
`;function Uge(t,e,n,r,i){return Dl(e)?i?r?{style:{backgroundColor:"#eee",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#ccc",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#bbb",color:"#ccc"},valueString:""}:e===0?i?{style:{backgroundColor:"#ddd",color:"#833"},valueString:Ev(e)}:{style:{backgroundColor:"#888",color:"#ccc"},valueString:Ev(e)}:i?{style:{backgroundColor:`rgba(${t.r},${t.g},${t.b},${e/n})`,color:"#f33"},valueString:Ev(e)}:{style:{backgroundColor:`rgba(${t.r*.9},${t.g*.9},${t.b*.9},${e/n})`,color:"#ccc"},valueString:Ev(e)}}const lT=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},Gv=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},bB=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},cT=t=>{const e=t.data&&t.data.reduce((r,i)=>Math.max(r,...i.filter(s=>!Dl(s))),0)||0;function n(r){return[r.some(i=>t.focusedIndices.includes(i))?"focused":"",r.some(i=>t.selectedIndices.includes(i))?"selected":""].filter(i=>i!=="").join(" ")}return Bt(Dge,{children:[Bt(Nge,{children:[t.icon,t.title]}),t.data===null?K(zge,{children:K(UI,{})}):K(Bge,{children:K(ar,{className:"fog-added",children:Bt(Fge,{id:t.matrixId,className:t.focused?"focused":"",ref:t.tableRef,children:[K("thead",{children:Bt("tr",{children:[K("th",{}),t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&K("th",{title:t.locations[i].label,onMouseEnter:()=>lT(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseEnter),onMouseLeave:()=>Gv(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseLeave),onMouseDown:()=>bB(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i},i))]})}),K("tbody",{children:t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&Bt("tr",{title:t.locations[i].label,children:[K("th",{onMouseEnter:()=>lT(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseEnter),onMouseLeave:()=>Gv(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseLeave),onMouseDown:()=>Gv(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i}),r.filter((s,o)=>o<=t.maxRowColLength).map((s,o)=>{const{style:a,valueString:l}=i==t.maxRowColLength||o==t.maxRowColLength?{style:{},valueString:"..."}:Uge(t.rgb,s,e,[o,i].some(c=>t.focusedIndices.includes(c)),[o,i].some(c=>t.selectedIndices.includes(c)));return K("td",{title:`(${o}, ${i}) = ${l}`,onMouseEnter:()=>lT(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseEnter),onMouseLeave:()=>Gv(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseLeave),onMouseDown:()=>bB(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseDown),className:i<t.maxRowColLength?n([i,o]):"",style:a,children:l},o+1)})]},i))})]})})})]})},$ge=It.div`
  div.focused > div > table > tbody > tr > td:not(.focused) {
    background-color: #e0e0e0 !important;
    color: #333;
  }
`,jge=It(ar)`
  font-size: 75%;
  display: flex;
  gap: 20px;
`,Vge=C.forwardRef((t,e)=>{var v;const[n,r]=C.useState(null),[i,s]=C.useState([]),o=[C.useRef(null),C.useRef(null),C.useRef(null)],a=(E,T,P)=>{E&&E.rows&&P.forEach(R=>{var M,k,O;R<=T&&((M=E.rows[0].cells[R+1])==null||M.classList.add("selected"),(O=(k=E.rows[R+1])==null?void 0:k.cells[0])==null||O.classList.add("selected"))})},l=(E,T,P)=>{E&&E.rows&&P.forEach(R=>{var M,k,O;R<=T&&((M=E.rows[0].cells[R+1])==null||M.classList.remove("selected"),(O=(k=E.rows[R+1])==null?void 0:k.cells[0])==null||O.classList.remove("selected"))})},c=E=>{y(null,E)},u=E=>{x(null,E)},h=E=>{g(E)},f=E=>{m(E)};C.useImperativeHandle(e,()=>({onFocus:c,onUnfocus:u,onSelect:h,onUnselect:f}));const g=E=>{o.forEach(T=>{a(T.current,t.maxRowColLength,E)})},m=E=>{o.forEach(T=>{l(T.current,t.maxRowColLength,E)})},y=(E,T)=>{r(E),E&&t.onFocus(T.map(P=>P-1))},x=(E,T)=>{r(null),E&&t.onUnfocus(T.map(P=>P-1))},b=(E,T)=>{const P=i,R=T.map(N=>N-1).filter(N=>N>=0),M=new Set(R),k=P.filter(N=>M.has(N)),O=new Set(k),F=P.filter(N=>!O.has(N)),I=R.filter(N=>!O.has(N)),D=F.concat(I);k.length>0&&m(k.map(N=>N)),I.length>0&&g(I.map(N=>N)),s(D)},w=(E,T)=>{o.forEach(R=>{b(R.current,T)});const P=T.map(R=>R-1).filter(R=>0<=R);E&&t.onSelected(i,P)};return K($ge,{children:Bt(jge,{className:((v=t.focusedIndices)==null?void 0:v.length)>0?"focused":"",children:[K(cT,{matrixId:"adjacencyMatrix",locations:t.locations,focused:n==="adjacencyMatrix",tableRef:o[0],icon:K(jfe,{}),title:"Adjacency distances",maxRowColLength:t.maxRowColLength,data:t.adjacencyMatrix,rgb:t.rgb,onMouseEnter:(E,T,P)=>y(E,[T,P]),onMouseLeave:(E,T,P)=>x(E,[T,P]),onMouseDown:(E,T,P)=>w(E,[T,P]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),K(cT,{matrixId:"distanceMatrix",locations:t.locations,focused:n==="distanceMatrix",tableRef:o[1],icon:K(j8,{}),title:"Path distances",maxRowColLength:t.maxRowColLength,data:t.distanceMatrix,rgb:t.rgb,onMouseEnter:(E,T,P)=>y(E,[T,P]),onMouseLeave:(E,T,P)=>x(E,[T,P]),onMouseDown:(E,T,P)=>w(E,[T,P]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),K(cT,{matrixId:"transportationCostMatrix",locations:t.locations,focused:n==="transportationCostMatrix",tableRef:o[2],icon:K($8,{}),title:"Transportation costs",maxRowColLength:t.maxRowColLength,data:t.transportationCostMatrix,rgb:t.rgb,onMouseEnter:(E,T,P)=>y(E,[T,P]),onMouseLeave:(E,T,P)=>x(E,[T,P]),onMouseDown:(E,T,P)=>w(E,[T,P]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices})]})})}),_B=({sessionState:t,matrices:e,uiState:n,preferences:r,onSelect:i,onFocus:s,onUnfocus:o})=>K(Vge,{locations:t==null?void 0:t.locations,maxRowColLength:r==null?void 0:r.maxRowColLength,adjacencyMatrix:e==null?void 0:e.adjacencyMatrix,distanceMatrix:e==null?void 0:e.distanceMatrix,transportationCostMatrix:e==null?void 0:e.transportationCostMatrix,rgb:{r:23,g:111,b:203},selectedIndices:n==null?void 0:n.selectedIndices,focusedIndices:n==null?void 0:n.focusedIndices,onSelected:i,onFocus:s,onUnfocus:o}),Gge=It.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  vertical-align: middle;
  align-content: center;
  align-items: center;
  margin-left: 0;
  margin-right: 8px;
  gap: 8px;
`,Hge=It(koe)``,uT=It(ZC)`
  border-radius: 24px;
  padding-left: 20px;
  padding-right: 20px;
`,Wge=It.div`
  display: flex;
  gap: 5px;
`,Xge=It.div`
  display: flex;
  align-items: flex-end;
  margin-left: 8px;
  margin-right: 8px;
  font-size: 1em;
  white-space: nowrap;
  gap: 8px;

  input {
    text-align: right;
  }
`,Yge=It(vw)``,qge=It.div`
  display: flex;
  width: 95%;
  gap: 15px;
  align-content: center;
  align-items: center;
`,xB=t=>({animation:`blinking ${1.5-t}s ease-in-out infinite alternate; @keyframes blinking { 0% { background-color: rgb(230,138,35);} 100% { background-color: rgb(180,88,25); }}`,color:"#444"});function Kge(t){return Bt(Gge,{children:[Bt(Wge,{children:[Bt(Hge,{variant:"outlined","aria-label":"outlined primary button group",children:[K(uT,{variant:"contained",color:"primary",onClick:t.start,disabled:t.isStarted,startIcon:K(kfe,{}),children:"Start"}),K(uT,{variant:"contained",color:"primary",onClick:t.stop,disabled:!t.isStarted,sx:{...t.isStarted?xB(t.intervalScale):{}},startIcon:K(Lfe,{}),children:"Stop"})]}),K(uT,{onClick:t.reset,variant:"contained",color:"primary",sx:{...t.isStarted?xB(t.intervalScale):{}},startIcon:K(Ufe,{}),children:"Reset"})]}),Bt(qge,{children:[K(l_,{title:"Elapsed time",children:Bt(Xge,{children:[K(vfe,{}),K("input",{type:"text",value:t.counter,size:6,disabled:!0})]})}),K(l_,{title:"Simulation Speed",children:K(Yge,{"aria-label":"Simulation speed",value:t.intervalScale,step:.01,marks:[{value:0,label:""},{value:.2,label:"20%"},{value:.4,label:"40%"},{value:.6,label:"60%"},{value:.8,label:"80%"},{value:1,label:""}],onChange:(e,n)=>{t.changeIntervalScale(n)},min:0,max:1,valueLabelDisplay:"auto",sx:{"& .MuiSlider-markLabel":{fontSize:"70%"}}})})]})]})}const Zge={interval:0,isStarted:!1,counter:0},aV=L0(Zge),Qge=t=>{const[e,n]=S$(aV),r=C.useRef(Number.POSITIVE_INFINITY),i=C.useRef(null),s=c=>{n(u=>(u.interval=c,u))},o=()=>{n(c=>(c.isStarted=!0,c)),t.onStarted()},a=()=>{n(c=>(c.isStarted=!1,c))},l=()=>{n(c=>(c.counter=0,c)),t.onReset()};return C.useEffect(()=>(!e.isStarted&&i.current&&(clearInterval(i.current),i.current=null),e.isStarted&&r.current!==e.interval&&(r.current=e.interval,i.current=setInterval(()=>{t.tick(),n(c=>(c.counter++,c))},e.interval)),()=>{i.current&&(clearInterval(i.current),r.current=Number.POSITIVE_INFINITY)}),[e.counter,e.isStarted,e.interval]),{changeInterval:s,start:o,stop:a,reset:l}};function Jge(t){const[e,n]=C.useState(t.initialIntervalScale),r=bD(t.minInterval,t.maxInterval,e),{changeInterval:i,start:s,stop:o,reset:a}=Qge({tick:t.tick,onStarted:t.onStarted,onReset:t.onReset,onStopped:t.onStopped});return{changeIntervalScale:c=>{n(c);const u=bD(t.minInterval,t.maxInterval,c);i(u)},start:s,stop:o,reset:a,interval:r,intervalScale:e}}const eme=({simulation:t})=>{const{counter:e,isStarted:n}=Dx(aV);return K(Kge,{isStarted:n,counter:e,intervalScale:t.intervalScale,start:t.start,stop:t.stop,reset:t.reset,changeIntervalScale:t.changeIntervalScale})};function tme(t){return{layout:{i:"EditButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??2,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"EditButton",type:In.FloatingButton,bindToPanelId:"EditPanel",tooltip:"Open Edit Panel",icon:K(k8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function nme(t){return{layout:{i:"ParametersButton",x:0,y:(t==null?void 0:t.y)??3,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ParametersButton",type:In.FloatingButton,bindToPanelId:"ParametersPanel",tooltip:"Open Parameters Panel",icon:K(G8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function rme(t){return{layout:{i:"ParametersPanel",x:1,y:(t==null?void 0:t.y)??3,w:9,h:9,minW:9,minH:9,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"ParametersPanel",type:In.FloatingPanel,title:"Parameters",icon:K(G8,{}),titleBarMode:"win",rowHeight:al,bindToButtonId:"ParametersButton",shown:(t==null?void 0:t.shown)??!0}}}function ime(t){return{layout:{i:"TimerControlButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??4,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimerControlButton",type:In.FloatingButton,bindToPanelId:"TimerControlPanel",tooltip:"Open TimerControl Panel",icon:K(V8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function sme(t){return{layout:{i:"TimerControlPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??9,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??4,minW:8,minH:4,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"TimerControlPanel",type:In.FloatingPanel,title:"Timer Control",icon:K(V8,{}),titleBarMode:"win",rowHeight:al,shown:!0,bindToButtonId:"TimerControlButton"}}}function ome(t){return{layout:{i:"MatricesButton",x:0,y:(t==null?void 0:t.y)??5,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"MatricesButton",type:In.FloatingButton,bindToPanelId:"MatricesPanel",tooltip:"Open Matrices Panel",icon:K(B8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function ame(t){return{layout:{i:"MatricesPanel",x:(t==null?void 0:t.x)??10,y:(t==null?void 0:t.y)??5,w:(t==null?void 0:t.w)??23,h:(t==null?void 0:t.h)??9,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"MatricesPanel",type:In.FloatingPanel,title:"Matrices",icon:K(B8,{}),titleBarMode:"win",rowHeight:al,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"MatricesButton"}}}function lme(t){return{layout:{i:"LayersButton",x:0,y:(t==null?void 0:t.y)??7,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"LayersButton",type:In.FloatingButton,bindToPanelId:"LayersPanel",tooltip:"Open Layers Panel",icon:K(U8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function cme(t){return{layout:{i:"LayersPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??7,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??8,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"LayersPanel",type:In.FloatingPanel,title:"Layers",icon:K(U8,{}),titleBarMode:"win",rowHeight:al,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"LayersButton"}}}function ume(t){return{layout:{i:"InfoButton",x:0,y:8,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InfoButton",type:In.FloatingButton,tooltip:"Info",icon:K(z8,{}),bindToPanelId:"InfoPanel",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function hme(t){return{layout:{i:"InfoPanel",x:10,y:(t==null?void 0:t.y)??0,w:5,h:3,minW:5,minH:3,resizeHandles:Xl,isDraggable:!0,isResizable:!0},resource:{id:"InfoPanel",type:In.FloatingPanel,title:"Information",icon:K(z8,{}),titleBarMode:"win",rowHeight:al,bindToButtonId:"InfoButton",shown:!1}}}function dme(t){return{layout:{i:"UndoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"UndoButton",type:In.FloatingButton,tooltip:"undo",icon:K(Vfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function fme(t){return{layout:{i:"RedoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"RedoButton",type:In.FloatingButton,tooltip:"redo",icon:K(Nfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function pme(t){return{layout:{i:"EditPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??9,h:(t==null?void 0:t.h)??3,resizeHandles:Xl,isDraggable:!0,isResizable:!0},resource:{id:"EditPanel",type:In.FloatingPanel,title:"Edit Panel",icon:K(k8,{}),titleBarMode:"win",rowHeight:al,shown:(t==null?void 0:t.shown)||!1,bindToButtonId:"EditButton"}}}function gme(t){return{layout:{i:"TimeMachineButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??8,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimeMachineButton",type:In.FloatingButton,bindToPanelId:"TimeMachinePanel",tooltip:"Open TimeMachine Panel",icon:K(F8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function mme(t){return{layout:{i:"TimeMachinePanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??20,w:(t==null?void 0:t.w)??12,h:(t==null?void 0:t.h)??3,minW:12,minH:3,isDraggable:!0,isResizable:!0,resizeHandles:Xl},resource:{id:"TimeMachinePanel",type:In.FloatingPanel,title:"Time Machine",icon:K(F8,{}),titleBarMode:"win",rowHeight:al,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"TimeMachineButton"}}}const yme=It(ar)`
  margin-top: 30px;
  margin-right: 20px;
  margin-left: 20px;
`,vme=[{value:0,label:"0"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"40"}],bme=()=>K(yme,{children:K(vw,{defaultValue:0,step:1,marks:vme,min:0,max:60,valueLabelDisplay:"on"})}),al=32,Xl=["se","sw","nw"],_me=t=>t&&t>0?Math.floor(t/al)-3:0,xme=(t,e)=>t.x?t.x>=0?t.x:dA+t.x:0,wme=(t,e)=>{if(t.y){if(t.y>=0)return t.y;if(e.height&&e.height>0)return _me(e.height)+t.y}return 0},wB=new Ope,Eme=t=>{const e=J2(),{width:n,height:r}=dM(),{backgroundColor:i,type:s,uuid:o,uiState:a,setUIState:l,matrices:c,preferences:u,updateAndSetMatrices:h}=t,{set:f,current:g,undo:m,redo:y,history:x,future:b}=Bx(oh),{setSessionChartScale:w,setSessionChartType:v}=npe({setUIState:l}),[E,T]=C.useState([]),[P,R]=C.useState({}),[M,k]=C.useState({}),O=({zoom:ke,y:Oe,x:rt})=>{},F=({zoom:ke,y:Oe,x:rt})=>{l(qe=>{qe.viewportCenter=[ke,Oe,rt],me(qe.viewportCenter)})},{onFit:I}=ipe({width:n,height:r,locations:g==null?void 0:g.locations,uiState:a,setUIState:l}),D=C.useCallback(ke=>{l(Oe=>{Oe.viewportCenter=ke,me(Oe.viewportCenter)})},[l]),{onAddBulkLocations:N,onRemoveBulkLocations:j,onDragStart:W,onDrag:H,onDragEnd:U,onFocus:X,onUnfocus:Y,onSelect:Z,onUnselect:se,onPointerUp:xe,onClearSelection:de}=tpe({sessionState:g,setSessionState:f,uiState:a,setUIState:l,matrices:c,updateAndSetMatrices:h}),{onParameterSetChange:Me,setManufactureShare:he,setTransportationCost:Te,setElasticitySubstitution:le,setNumLocations:ae}=Mpe({type:s,sessionState:g,setSessionState:f,onAddBulkLocations:N,onRemoveBulkLocations:j}),me=C.useCallback(ke=>{const Oe=ke.map(qe=>parseFloat(qe.toFixed(4))),rt=`/${s}/${o}/${Oe[0]}/${Oe[1]}/${Oe[2]}/`;wB.runAsyncFunction(()=>{e(rt,{replace:!0})})},[e,s,o]),oe=C.useCallback(ke=>{l(Oe=>(Oe.viewportCenter[0]+=ke,me(Oe.viewportCenter),Oe))},[l]),_e=C.useCallback(()=>oe(.25),[oe]),pe=C.useCallback(()=>oe(-.25),[oe]),Pe=C.useCallback(()=>{const ke=I();l(Oe=>(Oe.viewportCenter=ke,me(ke),Oe))},[I,me,l]),we={BackgroundPanel:{},HomeButton:{},ChartButton:{enabled:!1},ChartPanel:{},InputOutputButton:{enabled:!1},InputOutputPanel:{shown:!1},EditButton:{enabled:!1},EditPanel:{shown:!1},ParametersButton:{enabled:!1},ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},TimerControlButton:{enabled:!1},TimerControlPanel:{y:9},MatricesButton:{enabled:!1},MatricesPanel:{height:r,y:-9},LayersButton:{enabled:!1},LayersPanel:{shown:!1},TimeMachineButton:{enabled:!1},TimeMachinePanel:{shown:!0,x:-1,y:-4,height:r,w:27,h:3},InfoButton:{shown:!1},InfoPanel:{shown:!1},UndoButton:{height:r,y:-6,onClick:m,enabled:x.length>0},RedoButton:{height:r,y:-5,onClick:y,enabled:b.length>0},ZoomInButton:{height:r,y:-3,onClick:_e},ZoomOutButton:{height:r,y:-2,onClick:pe},FitScreenButton:{height:r,y:-1,onClick:Pe}},Ye={[li.Racetrack]:{...we},[li.Graph]:{...we,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0}},[li.RealWorld]:{...we,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0},LayersPanel:{x:-1,y:10,shown:!0},MatricesButton:{enabled:!0},MatricesPanel:{height:r,y:-9,shown:!1}}};if(C.useEffect(()=>{const ke=[],Oe={};return[Ipe,Zfe,Qfe,Jfe,spe,epe,tme,pme,nme,rme,ime,sme,gme,mme,ome,ame,lme,cme,ume,hme,dme,fme,aB,lB,cB].forEach((rt,qe)=>{const Ge=Ye[s][rt.name]&&rt(Ye[s][rt.name]);Ge&&(Ge.layout&&(Ge.layout.x=xme(Ge.layout,Ye[s][rt.name]),Ge.layout.y=wme(Ge.layout,Ye[s][rt.name]),ke.push({...Ge.layout})),Ge.resource&&(Oe[Ge.resource.id]=Ge.resource))}),T(ke),R(Oe),k(rt=>({ChartPanel:K(dB,{sessionState:g,uiState:a,setSessionChartType:v,setSessionChartScale:w,onSelect:Z,onUnselect:se,onFocus:X,onUnfocus:Y}),ParametersPanel:K(vB,{type:t.type,parameterSet:g.parameterSet,sessionStateAtom:oh,onParameterSetChange:Me,setNumLocations:ae}),InputOutputPanel:K(Spe,{}),EditPanel:K(Rpe,{state:{addLocation:!1,removeLocation:!1,addEdge:!1,removeEdge:!1,autoGraphLayout:!1,undo:!1,redo:!1},onAddLocation:function(){throw new Error("Function not implemented.")},onRemoveLocation:function(){throw new Error("Function not implemented.")},onAddEdge:function(){throw new Error("Function not implemented.")},onRemoveEdge:function(){throw new Error("Function not implemented.")}}),InfoPanel:K(Lpe,{}),LayersPanel:K(Age,{}),MatricesPanel:K(_B,{sessionState:g,matrices:c,uiState:a,preferences:u,onSelect:Z,onFocus:X,onUnfocus:Y})})),()=>{wB.cancelAll(),console.warn("TODO: store viewportCenter in DB "+JSON.stringify(a.viewportCenter))}},[]),C.useEffect(()=>{R(ke=>(ke.ZoomInButton=aB({height:r,onClick:_e}).resource,ke))},[pe]),C.useEffect(()=>{R(ke=>(ke.ZoomOutButton=lB({height:r,onClick:pe}).resource,ke))},[_e]),C.useEffect(()=>{R(ke=>(ke.FitScreenButton=cB({height:r,onClick:Pe}).resource,ke))},[Pe]),C.useEffect(()=>{k(ke=>({...ke,ParametersPanel:K(vB,{type:t.type,sessionStateAtom:oh,parameterSet:g.parameterSet,onParameterSetChange:Me,setNumLocations:ae,setManufactureShare:he,setTransportationCost:Te,setElasticitySubstitution:le})}))},[g.parameterSet]),C.useEffect(()=>{k(ke=>({...ke,ChartPanel:K(dB,{sessionState:g,uiState:a,setSessionChartType:v,setSessionChartScale:w,onSelect:Z,onUnselect:se,onFocus:X,onUnfocus:Y})}))},[g.locations,a]),C.useEffect(()=>{k(ke=>({...ke,MatricesPanel:K(_B,{sessionState:g,matrices:c,uiState:a,preferences:u,onSelect:Z,onFocus:X,onUnfocus:Y})}))},[c]),C.useEffect(()=>{k(ke=>{const Oe={...ke};return Oe.TimerControlPanel=K(eme,{simulation:t.simulation}),Oe})},[t.simulation]),C.useEffect(()=>{k(ke=>({...ke,TimeMachinePanel:K(bme,{})}))},[a]),!(E.length===0||Object.keys(P).length===0||Object.keys(M).length===0))return K(Kfe,{initialLayouts:E,resources:P,gridItemChildrenMap:M,backgroundColor:i,children:t.backgroundPanel({width:n,height:r,sessionState:g,uiState:a,matrices:c,onDragStart:W,onDragEnd:U,onDrag:H,onFocus:X,onUnfocus:Y,onPointerUp:xe,onClearSelection:de,onMoved:O,onMovedEnd:F,overrideViewportCenter:D})})},Sme=({startSimulation:t,stopSimulation:e,resetSimulation:n,tickSimulation:r})=>Jge({onStarted:()=>{requestAnimationFrame(()=>{t()})},onReset:()=>{requestAnimationFrame(()=>{n()})},onStopped:()=>{e()},tick:()=>{requestAnimationFrame(()=>{r()})},minInterval:5,maxInterval:2e3,initialIntervalScale:.5});function Tme(){const[t,e]=C.useState({open:!1,vertical:"top",horizontal:"center",message:""}),n=C.useCallback(i=>{e({...t,open:!0,message:i})},[t,e]),r=C.useCallback(()=>{e({...t,open:!1})},[t,e]);return{openSnackBar:n,closeSnackBar:r}}const Pme=function(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})},Cme=function(t){var e=[];return t.ctrlKey&&e.push("ctrlKey"),t.shiftKey&&e.push("shiftKey"),t.altKey&&e.push("altKey"),t.metaKey&&e.push("metaKey"),e};var Ame=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};const EB=function(t){var e=t.toLowerCase();return e.length===1?[e]:e.includes("+")?e.replace(/\s+/g,"").split(/\b\+/g):Ame([],e.match(/[^\s"']+|"([^"]*)"|'([^']*)'/g)||[],!0).map(function(n){return n.replace(/("|').*?("|')/," ")})},Rme=function(t,e){return t.length===e.length&&t.every(function(n){return e.includes(n)})};var Ime={control:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"};const Mme=function(t){return t.map(function(e){return Ime[e]})},gA=function(t){return t.altKey||t.ctrlKey||t.shiftKey||t.metaKey},Ome=function(t){return t[t.length-1]},Lme=function(t){return t.slice(0,-1)};var kme=["INPUT","TEXTAREA"];const Dme=function(t,e,n){if(!t.key&&!gA(t))return!0;var r=t.target||{};return r.isContentEditable&&!e?!0:kme.includes(r.nodeName)&&!(n!=null&&n.includes(r.nodeName))};(function(){if(!(typeof self>"u"||!self.document)){var t=KeyboardEvent.prototype,e=Object.getOwnPropertyDescriptor(t,"key");if(e){var n={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};Object.defineProperty(t,"key",{get:function(){var r=e.get.call(this);return n.hasOwnProperty(r)?n[r]:r}})}}})();var Nme=1e3,Bme="*",Hv=function(t,e,n){var r=C.useMemo(function(){return Array.isArray(t)?t.map(EB):[EB(t)]},[t]);C.useEffect(function(){var i={},s={},o=n||{},a=o.enabled,l=o.enableOnContentEditable,c=o.ignoredElementWhitelist,u=o.eventListenerOptions,h=function(x){clearTimeout(s[x])},f=function(x){h(x),i[x]=[]},g=function(x,b,w){h(w),i[w]=i[w]||[],s[w]=window.setTimeout(function(){f(w)},Nme);var v=i[w];v.push(x.key.toLowerCase()),Pme(v,b)&&(f(w),e(x))},m=function(x,b){var w=Ome(b),v=Mme(Lme(b)),E=Cme(x),T=Rme(v,E);T&&x.key.toLowerCase()===w&&e(x)},y=function(x){Dme(x,l,c)||r.forEach(function(b,w){if(b.length===1&&b[0]===Bme){e(x);return}if(gA(x)){m(x,b);return}if(b.length>1&&!gA(x)){g(x,b,w);return}x.key.toLowerCase()===b[0]&&e(x)})};return a!==!1&&window.addEventListener("keydown",y,u),function(){window.removeEventListener("keydown",y,u)}},[r,e,n==null?void 0:n.enabled,n==null?void 0:n.enableOnContentEditable,n==null?void 0:n.ignoredElementWhitelist,n==null?void 0:n.eventListenerOptions])};const Fme=({sessionStateAtom:t,openSnackBar:e,closeSnackBar:n,uiState:r,setUIState:i})=>{const{undo:s,redo:o,current:a,history:l,future:c,staging:u}=Bx(t),h=C.useCallback(()=>{requestAnimationFrame(()=>{i(g=>{g.focusedIndices=[],g.selectedIndices=[]}),s()})},[s,i]),f=C.useCallback(()=>{requestAnimationFrame(()=>{i(g=>{g.focusedIndices=[],g.selectedIndices=[]}),o()})},[o,i]);Hv(["Meta+z","Control+z"],()=>{if(l.length===0){e("No more undo!");return}h()}),Hv(["Shift+Meta+z","Shift+Control+z"],()=>{if(c.length===0){e("No more redo!");return}f()}),Hv(["h"],()=>{console.log({numLocations:a.locations.length,locations:a.locations,selectedIndices:r.selectedIndices}),console.log({sessionState:a,history:l,staging:u,future:c})}),Hv(["e"],()=>{console.log(JSON.stringify(a.edges,null," "))})};w$();const vM=t=>{var M,k,O,F;const{type:e,uuid:n,backgroundPanel:r,backgroundColor:i,viewportCenter:s}=t,{set:o,current:a}=Bx(oh),[l,c]=S$(zJ),{openSnackBar:u,closeSnackBar:h}=Tme();Fme({uiState:l,setUIState:c,openSnackBar:u,closeSnackBar:h,sessionStateAtom:oh});const f=Dx(tee),[g,m]=tI(FJ);C.useEffect(()=>{c(I=>(I.viewportCenter=s,I))},[c,s]);const y=()=>{const I=Lf[e].find(D=>a.parameterSet.caseId===D.caseId);I&&o(D=>{D.parameterSet.numLocations=I.numLocations,D.parameterSet.manufactureShare=I.manufactureShare,D.parameterSet.transportationCost=I.transportationCost,D.parameterSet.elasticitySubstitution=I.elasticitySubstitution})};function x(){o(I=>{},!0,"simulationStart")}function b(){o(I=>{},!0,"simulationStop")}function w(){o(I=>{I.locations.forEach(D=>hQ(D,I.locations.length)),y()},!0,"resetSimulation")}function v(){o(I=>{iee(I,g.transportationCostMatrix)},!1,"tick")}const E=Sme({startSimulation:x,stopSimulation:b,resetSimulation:w,tickSimulation:v}),T=see((M=a==null?void 0:a.locations)==null?void 0:M.length,(k=a==null?void 0:a.edges)==null?void 0:k.length),P=(I,D,N)=>{if(!T)throw new Error;return T.updateAdjacencyMatrix(I,D,N)},R=(I,D)=>{P(I,D,a.parameterSet.transportationCost).then(N=>{m({adjacencyMatrix:N.adjacencyMatrix,distanceMatrix:N.distanceMatrix,predecessorMatrix:N.predecessorMatrix,transportationCostMatrix:N.transportationCostMatrix})})};return C.useEffect(()=>{R(a==null?void 0:a.locations,a==null?void 0:a.edges)},[a==null?void 0:a.locations,a==null?void 0:a.edges,(O=a==null?void 0:a.parameterSet)==null?void 0:O.transportationCost]),C.useEffect(()=>{var I,D;(I=a==null?void 0:a.parameterSet)!=null&&I.title?document.title=`Eco-Geo - ${(D=a==null?void 0:a.parameterSet)==null?void 0:D.title}`:document.title="Eco-Geo - Geological Economics Modeling Simulator"},[(F=a==null?void 0:a.parameterSet)==null?void 0:F.title]),K(Eme,{backgroundColor:i,type:e,uuid:n,simulation:E,matrices:g,setMatrices:m,uiState:l,setUIState:c,preferences:f,updateMatrices:P,updateAndSetMatrices:R,backgroundPanel:r})};var lV={exports:{}},hu=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(hu||{}),bM=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(bM||{}),f_=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(f_||{}),mt=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(mt||{}),mo=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(mo||{}),Re=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Re||{}),ch=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(ch||{}),lt=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(lt||{}),We=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(We||{}),ja=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(ja||{}),qa=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(qa||{}),ca=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ca||{}),Ui=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Ui||{}),Xo=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Xo||{}),Ow=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Ow||{}),Rs=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Rs||{}),xr=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(xr||{}),cV=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(cV||{}),gr=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(gr||{}),sa=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(sa||{});const uV={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},Xe={ADAPTER:uV,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var hT=/iPhone/i,SB=/iPod/i,TB=/iPad/i,PB=/\biOS-universal(?:.+)Mac\b/i,dT=/\bAndroid(?:.+)Mobile\b/i,CB=/Android/i,md=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Wv=/Silk/i,fl=/Windows Phone/i,AB=/\bWindows(?:.+)ARM\b/i,RB=/BlackBerry/i,IB=/BB10/i,MB=/Opera Mini/i,OB=/\b(CriOS|Chrome)(?:.+)Mobile/i,LB=/Mobile(?:.+)Firefox\b/i,kB=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function zme(t){return function(e){return e.test(t)}}function DB(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=zme(n),s={apple:{phone:i(hT)&&!i(fl),ipod:i(SB),tablet:!i(hT)&&(i(TB)||kB(e))&&!i(fl),universal:i(PB),device:(i(hT)||i(SB)||i(TB)||i(PB)||kB(e))&&!i(fl)},amazon:{phone:i(md),tablet:!i(md)&&i(Wv),device:i(md)||i(Wv)},android:{phone:!i(fl)&&i(md)||!i(fl)&&i(dT),tablet:!i(fl)&&!i(md)&&!i(dT)&&(i(Wv)||i(CB)),device:!i(fl)&&(i(md)||i(Wv)||i(dT)||i(CB))||i(/\bokhttp\b/i)},windows:{phone:i(fl),tablet:i(AB),device:i(fl)||i(AB)},other:{blackberry:i(RB),blackberry10:i(IB),opera:i(MB),firefox:i(LB),chrome:i(OB),device:i(RB)||i(IB)||i(MB)||i(LB)||i(OB)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Ume=DB.default??DB,Ko=Ume(globalThis.navigator);Xe.RETINA_PREFIX=/@([0-9\.]+)x/;Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var hV={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],g]:l._events[m].push(g):(l._events[m]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,m=new Array(g);f<g;f++)m[f]=h[f].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,f,g,m){var y=n?n+c:c;if(!this._events[y])return!1;var x=this._events[y],b=arguments.length,w,v;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,h),!0;case 4:return x.fn.call(x.context,u,h,f),!0;case 5:return x.fn.call(x.context,u,h,f,g),!0;case 6:return x.fn.call(x.context,u,h,f,g,m),!0}for(v=1,w=new Array(b-1);v<b;v++)w[v-1]=arguments[v];x.fn.apply(x.context,w)}else{var E=x.length,T;for(v=0;v<E;v++)switch(x[v].once&&this.removeListener(c,x[v].fn,void 0,!0),b){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,u);break;case 3:x[v].fn.call(x[v].context,u,h);break;case 4:x[v].fn.call(x[v].context,u,h,f);break;default:if(!w)for(T=1,w=new Array(b-1);T<b;T++)w[T-1]=arguments[T];x[v].fn.apply(x[v].context,w)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,f){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var m=this._events[g];if(m.fn)m.fn===u&&(!f||m.once)&&(!h||m.context===h)&&o(this,g);else{for(var y=0,x=[],b=m.length;y<b;y++)(m[y].fn!==u||f&&!m[y].once||h&&m[y].context!==h)&&x.push(m[y]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(hV);var $me=hV.exports;const gp=Rh($me);var p_={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */p_.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof es=="object"&&es;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,c=1,u=26,h=38,f=700,g=72,m=128,y="-",x=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-c,T=Math.floor,P=String.fromCharCode,R;function M(Y){throw new RangeError(v[Y])}function k(Y,Z){for(var se=Y.length,xe=[];se--;)xe[se]=Z(Y[se]);return xe}function O(Y,Z){var se=Y.split("@"),xe="";se.length>1&&(xe=se[0]+"@",Y=se[1]),Y=Y.replace(w,".");var de=Y.split("."),Me=k(de,Z).join(".");return xe+Me}function F(Y){for(var Z=[],se=0,xe=Y.length,de,Me;se<xe;)de=Y.charCodeAt(se++),de>=55296&&de<=56319&&se<xe?(Me=Y.charCodeAt(se++),(Me&64512)==56320?Z.push(((de&1023)<<10)+(Me&1023)+65536):(Z.push(de),se--)):Z.push(de);return Z}function I(Y){return k(Y,function(Z){var se="";return Z>65535&&(Z-=65536,se+=P(Z>>>10&1023|55296),Z=56320|Z&1023),se+=P(Z),se}).join("")}function D(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:l}function N(Y,Z){return Y+22+75*(Y<26)-((Z!=0)<<5)}function j(Y,Z,se){var xe=0;for(Y=se?T(Y/f):Y>>1,Y+=T(Y/Z);Y>E*u>>1;xe+=l)Y=T(Y/E);return T(xe+(E+1)*Y/(Y+h))}function W(Y){var Z=[],se=Y.length,xe,de=0,Me=m,he=g,Te,le,ae,me,oe,_e,pe,Pe,we;for(Te=Y.lastIndexOf(y),Te<0&&(Te=0),le=0;le<Te;++le)Y.charCodeAt(le)>=128&&M("not-basic"),Z.push(Y.charCodeAt(le));for(ae=Te>0?Te+1:0;ae<se;){for(me=de,oe=1,_e=l;ae>=se&&M("invalid-input"),pe=D(Y.charCodeAt(ae++)),(pe>=l||pe>T((a-de)/oe))&&M("overflow"),de+=pe*oe,Pe=_e<=he?c:_e>=he+u?u:_e-he,!(pe<Pe);_e+=l)we=l-Pe,oe>T(a/we)&&M("overflow"),oe*=we;xe=Z.length+1,he=j(de-me,xe,me==0),T(de/xe)>a-Me&&M("overflow"),Me+=T(de/xe),de%=xe,Z.splice(de++,0,Me)}return I(Z)}function H(Y){var Z,se,xe,de,Me,he,Te,le,ae,me,oe,_e=[],pe,Pe,we,Ye;for(Y=F(Y),pe=Y.length,Z=m,se=0,Me=g,he=0;he<pe;++he)oe=Y[he],oe<128&&_e.push(P(oe));for(xe=de=_e.length,de&&_e.push(y);xe<pe;){for(Te=a,he=0;he<pe;++he)oe=Y[he],oe>=Z&&oe<Te&&(Te=oe);for(Pe=xe+1,Te-Z>T((a-se)/Pe)&&M("overflow"),se+=(Te-Z)*Pe,Z=Te,he=0;he<pe;++he)if(oe=Y[he],oe<Z&&++se>a&&M("overflow"),oe==Z){for(le=se,ae=l;me=ae<=Me?c:ae>=Me+u?u:ae-Me,!(le<me);ae+=l)Ye=le-me,we=l-me,_e.push(P(N(me+Ye%we,0))),le=T(Ye/we);_e.push(P(N(le,0))),Me=j(se,Pe,xe==de),se=0,++xe}++se,++Z}return _e.join("")}function U(Y){return O(Y,function(Z){return x.test(Z)?W(Z.slice(4).toLowerCase()):Z})}function X(Y){return O(Y,function(Z){return b.test(Z)?"xn--"+H(Z):Z})}if(o={version:"1.4.1",ucs2:{decode:F,encode:I},decode:W,encode:H,toASCII:X,toUnicode:U},r&&i)if(t.exports==r)i.exports=o;else for(R in o)o.hasOwnProperty(R)&&(r[R]=o[R]);else n.punycode=o})(es)})(p_,p_.exports);var jme=p_.exports,_M=typeof Map=="function"&&Map.prototype,fT=Object.getOwnPropertyDescriptor&&_M?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,g_=_M&&fT&&typeof fT.get=="function"?fT.get:null,NB=_M&&Map.prototype.forEach,xM=typeof Set=="function"&&Set.prototype,pT=Object.getOwnPropertyDescriptor&&xM?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,m_=xM&&pT&&typeof pT.get=="function"?pT.get:null,BB=xM&&Set.prototype.forEach,Vme=typeof WeakMap=="function"&&WeakMap.prototype,pm=Vme?WeakMap.prototype.has:null,Gme=typeof WeakSet=="function"&&WeakSet.prototype,gm=Gme?WeakSet.prototype.has:null,Hme=typeof WeakRef=="function"&&WeakRef.prototype,FB=Hme?WeakRef.prototype.deref:null,Wme=Boolean.prototype.valueOf,Xme=Object.prototype.toString,Yme=Function.prototype.toString,qme=String.prototype.match,wM=String.prototype.slice,Mc=String.prototype.replace,Kme=String.prototype.toUpperCase,zB=String.prototype.toLowerCase,dV=RegExp.prototype.test,UB=Array.prototype.concat,za=Array.prototype.join,Zme=Array.prototype.slice,$B=Math.floor,mA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gT=Object.getOwnPropertySymbols,yA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,jf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ri=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===jf||"symbol")?Symbol.toStringTag:null,fV=Object.prototype.propertyIsEnumerable,jB=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function VB(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||dV.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-$B(-t):$B(t);if(r!==t){var i=String(r),s=wM.call(e,i.length+1);return Mc.call(i,n,"$&_")+"."+Mc.call(Mc.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Mc.call(e,n,"$&_")}var vA=P$,GB=vA.custom,HB=gV(GB)?GB:null,Qme=function t(e,n,r,i){var s=n||{};if(xc(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xc(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=xc(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xc(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xc(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return yV(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?VB(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?VB(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return bA(e)?"[Array]":"[Object]";var h=m0e(s,r);if(typeof i>"u")i=[];else if(mV(i,e)>=0)return"[Circular]";function f(D,N,j){if(N&&(i=Zme.call(i),i.push(N)),j){var W={depth:s.depth};return xc(s,"quoteStyle")&&(W.quoteStyle=s.quoteStyle),t(D,W,r+1,i)}return t(D,s,r+1,i)}if(typeof e=="function"&&!WB(e)){var g=a0e(e),m=Xv(e,f);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(m.length>0?" { "+za.call(m,", ")+" }":"")}if(gV(e)){var y=jf?Mc.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):yA.call(e);return typeof e=="object"&&!jf?ug(y):y}if(f0e(e)){for(var x="<"+zB.call(String(e.nodeName)),b=e.attributes||[],w=0;w<b.length;w++)x+=" "+b[w].name+"="+pV(Jme(b[w].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+zB.call(String(e.nodeName))+">",x}if(bA(e)){if(e.length===0)return"[]";var v=Xv(e,f);return h&&!g0e(v)?"["+_A(v,h)+"]":"[ "+za.call(v,", ")+" ]"}if(t0e(e)){var E=Xv(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!fV.call(e,"cause")?"{ ["+String(e)+"] "+za.call(UB.call("[cause]: "+f(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+za.call(E,", ")+" }"}if(typeof e=="object"&&o){if(HB&&typeof e[HB]=="function"&&vA)return vA(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(l0e(e)){var T=[];return NB&&NB.call(e,function(D,N){T.push(f(N,e,!0)+" => "+f(D,e))}),XB("Map",g_.call(e),T,h)}if(h0e(e)){var P=[];return BB&&BB.call(e,function(D){P.push(f(D,e))}),XB("Set",m_.call(e),P,h)}if(c0e(e))return mT("WeakMap");if(d0e(e))return mT("WeakSet");if(u0e(e))return mT("WeakRef");if(r0e(e))return ug(f(Number(e)));if(s0e(e))return ug(f(mA.call(e)));if(i0e(e))return ug(Wme.call(e));if(n0e(e))return ug(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===es)return"{ [object globalThis] }";if(!e0e(e)&&!WB(e)){var R=Xv(e,f),M=jB?jB(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",O=!M&&Ri&&Object(e)===e&&Ri in e?wM.call(du(e),8,-1):k?"Object":"",F=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",I=F+(O||k?"["+za.call(UB.call([],O||[],k||[]),": ")+"] ":"");return R.length===0?I+"{}":h?I+"{"+_A(R,h)+"}":I+"{ "+za.call(R,", ")+" }"}return String(e)};function pV(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function Jme(t){return Mc.call(String(t),/"/g,"&quot;")}function bA(t){return du(t)==="[object Array]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function e0e(t){return du(t)==="[object Date]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function WB(t){return du(t)==="[object RegExp]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function t0e(t){return du(t)==="[object Error]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function n0e(t){return du(t)==="[object String]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function r0e(t){return du(t)==="[object Number]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function i0e(t){return du(t)==="[object Boolean]"&&(!Ri||!(typeof t=="object"&&Ri in t))}function gV(t){if(jf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!yA)return!1;try{return yA.call(t),!0}catch{}return!1}function s0e(t){if(!t||typeof t!="object"||!mA)return!1;try{return mA.call(t),!0}catch{}return!1}var o0e=Object.prototype.hasOwnProperty||function(t){return t in this};function xc(t,e){return o0e.call(t,e)}function du(t){return Xme.call(t)}function a0e(t){if(t.name)return t.name;var e=qme.call(Yme.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function mV(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function l0e(t){if(!g_||!t||typeof t!="object")return!1;try{g_.call(t);try{m_.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function c0e(t){if(!pm||!t||typeof t!="object")return!1;try{pm.call(t,pm);try{gm.call(t,gm)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function u0e(t){if(!FB||!t||typeof t!="object")return!1;try{return FB.call(t),!0}catch{}return!1}function h0e(t){if(!m_||!t||typeof t!="object")return!1;try{m_.call(t);try{g_.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function d0e(t){if(!gm||!t||typeof t!="object")return!1;try{gm.call(t,gm);try{pm.call(t,pm)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function f0e(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function yV(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return yV(wM.call(t,0,e.maxStringLength),e)+r}var i=Mc.call(Mc.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,p0e);return pV(i,"single",e)}function p0e(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+Kme.call(e.toString(16))}function ug(t){return"Object("+t+")"}function mT(t){return t+" { ? }"}function XB(t,e,n,r){var i=r?_A(n,r):za.call(n,", ");return t+" ("+e+") {"+i+"}"}function g0e(t){for(var e=0;e<t.length;e++)if(mV(t[e],`
`)>=0)return!1;return!0}function m0e(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=za.call(Array(t.indent+1)," ");else return null;return{base:n,prev:za.call(Array(e+1),n)}}function _A(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+za.call(t,","+n)+`
`+e.prev}function Xv(t,e){var n=bA(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=xc(t,i)?e(t[i],t):""}var s=typeof gT=="function"?gT(t):[],o;if(jf){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)xc(t,l)&&(n&&String(Number(l))===l&&l<t.length||jf&&o["$"+l]instanceof Symbol||(dV.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof gT=="function")for(var c=0;c<s.length;c++)fV.call(t,s[c])&&r.push("["+e(s[c])+"]: "+e(t[s[c]],t));return r}var EM=Lh,mp=AJ,y0e=Qme,v0e=EM("%TypeError%"),Yv=EM("%WeakMap%",!0),qv=EM("%Map%",!0),b0e=mp("WeakMap.prototype.get",!0),_0e=mp("WeakMap.prototype.set",!0),x0e=mp("WeakMap.prototype.has",!0),w0e=mp("Map.prototype.get",!0),E0e=mp("Map.prototype.set",!0),S0e=mp("Map.prototype.has",!0),SM=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},T0e=function(t,e){var n=SM(t,e);return n&&n.value},P0e=function(t,e,n){var r=SM(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},C0e=function(t,e){return!!SM(t,e)},A0e=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new v0e("Side channel does not contain "+y0e(s))},get:function(s){if(Yv&&s&&(typeof s=="object"||typeof s=="function")){if(e)return b0e(e,s)}else if(qv){if(n)return w0e(n,s)}else if(r)return T0e(r,s)},has:function(s){if(Yv&&s&&(typeof s=="object"||typeof s=="function")){if(e)return x0e(e,s)}else if(qv){if(n)return S0e(n,s)}else if(r)return C0e(r,s);return!1},set:function(s,o){Yv&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Yv),_0e(e,s,o)):qv?(n||(n=new qv),E0e(n,s,o)):(r||(r={key:{},next:null}),P0e(r,s,o))}};return i},R0e=String.prototype.replace,I0e=/%20/g,yT={RFC1738:"RFC1738",RFC3986:"RFC3986"},TM={default:yT.RFC3986,formatters:{RFC1738:function(t){return R0e.call(t,I0e,"+")},RFC3986:function(t){return String(t)}},RFC1738:yT.RFC1738,RFC3986:yT.RFC3986},M0e=TM,vT=Object.prototype.hasOwnProperty,Gu=Array.isArray,Pa=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),O0e=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Gu(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},vV=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},L0e=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Gu(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!vT.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Gu(e)&&!Gu(n)&&(i=vV(e,r)),Gu(e)&&Gu(n)?(n.forEach(function(s,o){if(vT.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return vT.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},k0e=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},D0e=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},N0e=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===M0e.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+Pa[c];continue}if(c<2048){a=a+(Pa[192|c>>6]+Pa[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Pa[224|c>>12]+Pa[128|c>>6&63]+Pa[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=Pa[240|c>>18]+Pa[128|c>>12&63]+Pa[128|c>>6&63]+Pa[128|c&63]}return a},B0e=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(n.push({obj:o,prop:c}),r.push(u))}return O0e(n),e},F0e=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},z0e=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},U0e=function(e,n){return[].concat(e,n)},$0e=function(e,n){if(Gu(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},bV={arrayToObject:vV,assign:k0e,combine:U0e,compact:B0e,decode:D0e,encode:N0e,isBuffer:z0e,isRegExp:F0e,maybeMap:$0e,merge:L0e},_V=A0e,Z1=bV,mm=TM,j0e=Object.prototype.hasOwnProperty,YB={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},_l=Array.isArray,V0e=Array.prototype.push,xV=function(t,e){V0e.apply(t,_l(e)?e:[e])},G0e=Date.prototype.toISOString,qB=mm.default,xi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Z1.encode,encodeValuesOnly:!1,format:qB,formatter:mm.formatters[qB],indices:!1,serializeDate:function(e){return G0e.call(e)},skipNulls:!1,strictNullHandling:!1},H0e=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},bT={},W0e=function t(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){for(var b=e,w=x,v=0,E=!1;(w=w.get(bT))!==void 0&&!E;){var T=w.get(e);if(v+=1,typeof T<"u"){if(T===v)throw new RangeError("Cyclic object value");E=!0}typeof w.get(bT)>"u"&&(v=0)}if(typeof l=="function"?b=l(n,b):b instanceof Date?b=h(b):r==="comma"&&_l(b)&&(b=Z1.maybeMap(b,function(W){return W instanceof Date?h(W):W})),b===null){if(s)return a&&!m?a(n,xi.encoder,y,"key",f):n;b=""}if(H0e(b)||Z1.isBuffer(b)){if(a){var P=m?n:a(n,xi.encoder,y,"key",f);return[g(P)+"="+g(a(b,xi.encoder,y,"value",f))]}return[g(n)+"="+g(String(b))]}var R=[];if(typeof b>"u")return R;var M;if(r==="comma"&&_l(b))m&&a&&(b=Z1.maybeMap(b,a)),M=[{value:b.length>0?b.join(",")||null:void 0}];else if(_l(l))M=l;else{var k=Object.keys(b);M=c?k.sort(c):k}for(var O=i&&_l(b)&&b.length===1?n+"[]":n,F=0;F<M.length;++F){var I=M[F],D=typeof I=="object"&&typeof I.value<"u"?I.value:b[I];if(!(o&&D===null)){var N=_l(b)?typeof r=="function"?r(O,I):O:O+(u?"."+I:"["+I+"]");x.set(e,v);var j=_V();j.set(bT,x),xV(R,t(D,N,r,i,s,o,r==="comma"&&m&&_l(b)?null:a,l,c,u,h,f,g,m,y,j))}}return R},X0e=function(e){if(!e)return xi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||xi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=mm.default;if(typeof e.format<"u"){if(!j0e.call(mm.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=mm.formatters[r],s=xi.filter;return(typeof e.filter=="function"||_l(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:xi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?xi.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xi.charsetSentinel,delimiter:typeof e.delimiter>"u"?xi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:xi.encode,encoder:typeof e.encoder=="function"?e.encoder:xi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:xi.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:xi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:xi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xi.strictNullHandling}},Y0e=function(t,e){var n=t,r=X0e(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):_l(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in YB?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=YB[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=_V(),h=0;h<i.length;++h){var f=i[h];r.skipNulls&&n[f]===null||xV(o,W0e(n[f],f,l,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var g=o.join(r.delimiter),m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""},Vf=bV,xA=Object.prototype.hasOwnProperty,q0e=Array.isArray,$r={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Vf.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},K0e=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},wV=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Z0e="utf8=%26%2310003%3B",Q0e="utf8=%E2%9C%93",J0e=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,l,c=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===Q0e?c="utf-8":o[l]===Z0e&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],h=u.indexOf("]="),f=h===-1?u.indexOf("="):h+1,g,m;f===-1?(g=n.decoder(u,$r.decoder,c,"key"),m=n.strictNullHandling?null:""):(g=n.decoder(u.slice(0,f),$r.decoder,c,"key"),m=Vf.maybeMap(wV(u.slice(f+1),n),function(y){return n.decoder(y,$r.decoder,c,"value")})),m&&n.interpretNumericEntities&&c==="iso-8859-1"&&(m=K0e(m)),u.indexOf("[]=")>-1&&(m=q0e(m)?[m]:m),xA.call(r,g)?r[g]=Vf.combine(r[g],m):r[g]=m}return r},eye=function(t,e,n,r){for(var i=r?e:wV(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!n.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},tye=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!r.plainObjects&&xA.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var h=0;r.depth>0&&(l=a.exec(s))!==null&&h<r.depth;){if(h+=1,!r.plainObjects&&xA.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),eye(u,n,r,i)}},nye=function(e){if(!e)return $r;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?$r.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?$r.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:$r.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:$r.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:$r.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:$r.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:$r.comma,decoder:typeof e.decoder=="function"?e.decoder:$r.decoder,delimiter:typeof e.delimiter=="string"||Vf.isRegExp(e.delimiter)?e.delimiter:$r.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:$r.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:$r.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:$r.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:$r.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:$r.strictNullHandling}},rye=function(t,e){var n=nye(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?J0e(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=tye(a,r[a],n,typeof t=="string");i=Vf.merge(i,l,n)}return n.allowSparse===!0?i:Vf.compact(i)},iye=Y0e,sye=rye,oye=TM,aye={formats:oye,parse:sye,stringify:iye},lye=jme;function oa(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var cye=/^([a-z0-9.+-]+:)/i,uye=/:[0-9]*$/,hye=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,dye=["<",">",'"',"`"," ","\r",`
`,"	"],fye=["{","}","|","\\","^","`"].concat(dye),wA=["'"].concat(fye),KB=["%","/","?",";","#"].concat(wA),ZB=["/","?","#"],pye=255,QB=/^[+a-z0-9A-Z_-]{0,63}$/,gye=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,mye={javascript:!0,"javascript:":!0},EA={javascript:!0,"javascript:":!0},gf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},SA=aye;function Lw(t,e,n){if(t&&typeof t=="object"&&t instanceof oa)return t;var r=new oa;return r.parse(t,e,n),r}oa.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=hye.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=SA.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=cye.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(c&&EA[c])&&(a=a.substr(2),this.slashes=!0)}if(!EA[c]&&(h||c&&!gf[c])){for(var f=-1,g=0;g<ZB.length;g++){var m=a.indexOf(ZB[g]);m!==-1&&(f===-1||m<f)&&(f=m)}var y,x;f===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",f),x!==-1&&(y=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(y)),f=-1;for(var g=0;g<KB.length;g++){var m=a.indexOf(KB[g]);m!==-1&&(f===-1||m<f)&&(f=m)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var w=this.hostname.split(/\./),g=0,v=w.length;g<v;g++){var E=w[g];if(E&&!E.match(QB)){for(var T="",P=0,R=E.length;P<R;P++)E.charCodeAt(P)>127?T+="x":T+=E[P];if(!T.match(QB)){var M=w.slice(0,g),k=w.slice(g+1),O=E.match(gye);O&&(M.push(O[1]),k.unshift(O[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>pye?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=lye.toASCII(this.hostname));var F=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+F,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!mye[u])for(var g=0,v=wA.length;g<v;g++){var D=wA[g];if(a.indexOf(D)!==-1){var N=encodeURIComponent(D);N===D&&(N=escape(D)),a=a.split(D).join(N)}}var j=a.indexOf("#");j!==-1&&(this.hash=a.substr(j),a=a.slice(0,j));var W=a.indexOf("?");if(W!==-1?(this.search=a.substr(W),this.query=a.substr(W+1),e&&(this.query=SA.parse(this.query)),a=a.slice(0,W)):e&&(this.search="",this.query={}),a&&(this.pathname=a),gf[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",H=this.search||"";this.path=F+H}return this.href=this.format(),this};function yye(t){return typeof t=="string"&&(t=Lw(t)),t instanceof oa?t.format():oa.prototype.format.call(t)}oa.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=SA.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||gf[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function vye(t,e){return Lw(t,!1,!0).resolve(e)}oa.prototype.resolve=function(t){return this.resolveObject(Lw(t,!1,!0)).format()};oa.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new oa;e.parse(t,!1,!0),t=e}for(var n=new oa,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return gf[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!gf[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var h=c[u];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!EA[t.protocol]){for(var v=(t.pathname||"").split("/");v.length&&!(t.host=v.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),n.pathname=v.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",g=n.search||"";n.path=f+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&n.pathname.charAt(0)==="/",y=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=y||m||n.host&&t.pathname,b=x,w=n.pathname&&n.pathname.split("/")||[],v=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!gf[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(w[0]===""?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host=null),x=x&&(v[0]===""||w[0]==="")),y)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=v;else if(v.length)w||(w=[]),w.pop(),w=w.concat(v),n.search=t.search,n.query=t.query;else if(t.search!=null){if(E){n.host=w.shift(),n.hostname=n.host;var T=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;T&&(n.auth=T.shift(),n.hostname=T.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var P=w.slice(-1)[0],R=(n.host||t.host||w.length>1)&&(P==="."||P==="..")||P==="",M=0,k=w.length;k>=0;k--)P=w[k],P==="."?w.splice(k,1):P===".."?(w.splice(k,1),M++):M&&(w.splice(k,1),M--);if(!x&&!b)for(;M--;M)w.unshift("..");x&&w[0]!==""&&(!w[0]||w[0].charAt(0)!=="/")&&w.unshift(""),R&&w.join("/").substr(-1)!=="/"&&w.push("");var O=w[0]===""||w[0]&&w[0].charAt(0)==="/";if(E){n.hostname=O?"":w.length?w.shift():"",n.host=n.hostname;var T=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;T&&(n.auth=T.shift(),n.hostname=T.shift(),n.host=n.hostname)}return x=x||n.host&&w.length,x&&!O&&w.unshift(""),w.length>0?n.pathname=w.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};oa.prototype.parseHost=function(){var t=this.host,e=uye.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var bye=Lw,_ye=vye,xye=yye;const JB={};function _t(t,e,n=3){if(JB[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),JB[e]=!0}const wye={get parse(){return _t("7.3.0","utils.url.parse is deprecated, use native URL API instead."),bye},get format(){return _t("7.3.0","utils.url.format is deprecated, use native URL API instead."),xye},get resolve(){return _t("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),_ye}};function Fo(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function hg(t){return t.split("?")[0].split("#")[0]}function Eye(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sye(t,e,n){return t.replace(new RegExp(Eye(e),"g"),n)}function Tye(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Pr={toPosix(t){return Sye(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Fo(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(Fo(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const r=hg(this.toPosix(e??Xe.ADAPTER.getBaseUrl())),i=hg(this.toPosix(n??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?Pr.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(Fo(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=Tye(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return Fo(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(Fo(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Fo(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){Fo(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Fo(t),e&&Fo(e),t=hg(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){Fo(t),t=hg(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){Fo(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=hg(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let _T;async function EV(){return _T??(_T=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return Ui.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return Ui.UNPACK;const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(r),t.deleteTexture(n),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?Ui.PMA:Ui.UNPACK})()),_T}function Pye(){_t("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function Cye(){_t("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let xT;function SV(){return typeof xT>"u"&&(xT=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Xe.ADAPTER.getWebGLRenderingContext())return!1;const n=Xe.ADAPTER.createCanvas();let r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const i=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),xT}var Aye={grad:.9,turn:360,rad:360/(2*Math.PI)},pl=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Hr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},yo=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},TV=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},eF=function(t){return{r:yo(t.r,0,255),g:yo(t.g,0,255),b:yo(t.b,0,255),a:yo(t.a)}},wT=function(t){return{r:Hr(t.r),g:Hr(t.g),b:Hr(t.b),a:Hr(t.a,3)}},Rye=/^#([0-9a-f]{3,8})$/i,Kv=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},PV=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},CV=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},tF=function(t){return{h:TV(t.h),s:yo(t.s,0,100),l:yo(t.l,0,100),a:yo(t.a)}},nF=function(t){return{h:Hr(t.h),s:Hr(t.s),l:Hr(t.l),a:Hr(t.a,3)}},rF=function(t){return CV((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},ym=function(t){return{h:(e=PV(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},Iye=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mye=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Oye=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Lye=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TA={string:[[function(t){var e=Rye.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Hr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Hr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Oye.exec(t)||Lye.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:eF({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Iye.exec(t)||Mye.exec(t);if(!e)return null;var n,r,i=tF({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(Aye[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return rF(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return pl(e)&&pl(n)&&pl(r)?eF({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!pl(e)||!pl(n)||!pl(r))return null;var o=tF({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return rF(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!pl(e)||!pl(n)||!pl(r))return null;var o=function(a){return{h:TV(a.h),s:yo(a.s,0,100),v:yo(a.v,0,100),a:yo(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return CV(o)},"hsv"]]},iF=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},kye=function(t){return typeof t=="string"?iF(t.trim(),TA.string):typeof t=="object"&&t!==null?iF(t,TA.object):[null,void 0]},ET=function(t,e){var n=ym(t);return{h:n.h,s:yo(n.s+100*e,0,100),l:n.l,a:n.a}},ST=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},sF=function(t,e){var n=ym(t);return{h:n.h,s:n.s,l:yo(n.l+100*e,0,100),a:n.a}},PA=function(){function t(e){this.parsed=kye(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Hr(ST(this.rgba),2)},t.prototype.isDark=function(){return ST(this.rgba)<.5},t.prototype.isLight=function(){return ST(this.rgba)>=.5},t.prototype.toHex=function(){return e=wT(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Kv(Hr(255*s)):"","#"+Kv(n)+Kv(r)+Kv(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return wT(this.rgba)},t.prototype.toRgbString=function(){return e=wT(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return nF(ym(this.rgba))},t.prototype.toHslString=function(){return e=nF(ym(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=PV(this.rgba),{h:Hr(e.h),s:Hr(e.s),v:Hr(e.v),a:Hr(e.a,3)};var e},t.prototype.invert=function(){return Ma({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Ma(ET(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ma(ET(this.rgba,-e))},t.prototype.grayscale=function(){return Ma(ET(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Ma(sF(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Ma(sF(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Ma({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Hr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=ym(this.rgba);return typeof e=="number"?Ma({h:e,s:n.s,l:n.l,a:n.a}):Hr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Ma(e).toHex()},t}(),Ma=function(t){return t instanceof PA?t:new PA(t)},oF=[],Dye=function(t){t.forEach(function(e){oF.indexOf(e)<0&&(e(PA,TA),oF.push(e))})};function Nye(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,f="black";if(!s.length)for(var g in n)s[g]=new t(n[g]).toRgb();for(var m in n){var y=(a=u,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));y<h&&(h=y,f=m)}return f}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}Dye([Nye]);const Md=class Q1{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Q1)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,n){const r=typeof e;if(r!==typeof n)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((i,s)=>i===n[s]);if(e!==null&&n!==null){const i=Object.keys(e),s=Object.keys(n);return i.length!==s.length?!1:i.every(o=>e[o]===n[o])}return e===n}toRgba(){const[e,n,r,i]=this._components;return{r:e,g:n,b:r,a:i}}toRgb(){const[e,n,r]=this._components;return{r:e,g:n,b:r}}toRgbaString(){const[e,n,r]=this.toUint8RgbArray();return`rgba(${e},${n},${r},${this.alpha})`}toUint8RgbArray(e){const[n,r,i]=this._components;return e=e??[],e[0]=Math.round(n*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,r,i,s]=Q1.temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return n&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[n,r,i]=this._components;return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[n,r,i,s]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let n,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;n=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,r,i,s=255]=e,n/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Q1.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Ma(e);o.isValid()&&({r:n,g:r,b:i,a:s}=o.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,n,r]=this._components;this._int=(e*255<<16)+(n*255<<8)+(r*255|0)}_clamp(e,n=0,r=1){return typeof e=="number"?Math.min(Math.max(e,n),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,n),r)}),e)}};Md.shared=new Md,Md.temp=new Md,Md.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let sn=Md;function Bye(t,e=[]){return _t("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),sn.shared.setValue(t).toRgbArray(e)}function AV(t){return _t("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),sn.shared.setValue(t).toHex()}function Fye(t){return _t("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),sn.shared.setValue(t).toNumber()}function RV(t){return _t("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),sn.shared.setValue(t).toNumber()}function zye(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[mt.NORMAL_NPM]=mt.NORMAL,t[mt.ADD_NPM]=mt.ADD,t[mt.SCREEN_NPM]=mt.SCREEN,e[mt.NORMAL]=mt.NORMAL_NPM,e[mt.ADD]=mt.ADD_NPM,e[mt.SCREEN]=mt.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const PM=zye();function CM(t,e){return PM[e?1:0][t]}function Uye(t,e,n,r=!0){return _t("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),sn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}function $ye(t,e){return _t("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),sn.shared.setValue(t).toPremultiplied(e)}function jye(t,e,n,r=!0){return _t("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),sn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}const IV=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function MV(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function kw(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}const Vye={Float32Array,Uint32Array,Int32Array,Uint8Array};function Gye(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],h=kw(u);i[h]||(i[h]=new Vye[h](s)),o=i[h];for(let f=0;f<u.length;f++){const g=(f/c|0)*r+a,m=f%c;o[g+m]=u[f]}a+=c}return new Float32Array(s)}function t0(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function CA(t){return!(t&t-1)&&!!t}function AA(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function uh(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function Cl(t){return t===0?0:t<0?-1:1}let Hye=0;function ru(){return++Hye}const RA=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};RA.EMPTY=new RA(0,0,0,0);let IA=RA;const MA={},Ni=Object.create(null),Ss=Object.create(null);function Wye(){let t;for(t in Ni)Ni[t].destroy();for(t in Ss)Ss[t].destroy()}function Xye(){let t;for(t in Ni)delete Ni[t];for(t in Ss)delete Ss[t]}class OV{constructor(e,n,r){this._canvas=Xe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Xe.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function aF(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function lF(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function LV(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,e,n).data;let s=0,o=0,a=e-1,l=n-1;for(;o<n&&aF(i,e,o);)++o;if(o===n)return IA.EMPTY;for(;aF(i,e,l);)--l;for(;lF(i,e,s,o,l);)++s;for(;lF(i,e,a,o,l);)--a;return++a,++l,new IA(s,o,a,l)}function kV(t){const e=LV(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}function Yye(t){const e=IV.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function DV(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}function Za(t,e=1){var r;const n=(r=Xe.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}const qye=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ss,BoundingBox:IA,CanvasRenderTarget:OV,DATA_URI:IV,EventEmitter:gp,ProgramCache:MA,TextureCache:Ni,clearTextureCache:Xye,correctBlendMode:CM,createIndicesForQuads:MV,decomposeDataUri:Yye,deprecation:_t,destroyTextureCache:Wye,detectVideoAlphaMode:EV,determineCrossOrigin:DV,earcut:dI,getBufferType:kw,getCanvasBoundingBox:LV,getResolutionOfUrl:Za,hex2rgb:Bye,hex2string:AV,interleaveTypedArrays:Gye,isMobile:Ko,isPow2:CA,isWebGLSupported:SV,log2:AA,nextPow2:t0,path:Pr,premultiplyBlendMode:PM,premultiplyRgba:Uye,premultiplyTint:$ye,premultiplyTintToRgba:jye,removeItems:uh,rgb2hex:RV,sayHello:Cye,sign:Cl,skipHello:Pye,string2hex:Fye,trimCanvas:kV,uid:ru,url:wye},Symbol.toStringTag,{value:"Module"}));var Ue=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Ue||{});const OA=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},cF=(t,e)=>OA(t).priority??e,nt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(OA).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map(OA).forEach(e=>{e.type.forEach(n=>{var s,o;const r=this._addHandlers,i=this._queue;r[n]?(s=r[n])==null||s.call(r,e):(i[n]=i[n]||[],(o=i[n])==null||o.push(e))})}),this},handle(t,e,n){var o;const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>cF(s,n)-cF(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class y_{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Kye=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Zye(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function NV(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=Kye.replace(/%forloop%/gi,Zye(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const TT=0,PT=1,CT=2,AT=3,RT=4,IT=5;class ha{constructor(){this.data=0,this.blendMode=mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<TT)}set blend(e){!!(this.data&1<<TT)!==e&&(this.data^=1<<TT)}get offsets(){return!!(this.data&1<<PT)}set offsets(e){!!(this.data&1<<PT)!==e&&(this.data^=1<<PT)}get culling(){return!!(this.data&1<<CT)}set culling(e){!!(this.data&1<<CT)!==e&&(this.data^=1<<CT)}get depthTest(){return!!(this.data&1<<AT)}set depthTest(e){!!(this.data&1<<AT)!==e&&(this.data^=1<<AT)}get depthMask(){return!!(this.data&1<<IT)}set depthMask(e){!!(this.data&1<<IT)!==e&&(this.data^=1<<IT)}get clockwiseFrontFace(){return!!(this.data&1<<RT)}set clockwiseFrontFace(e){!!(this.data&1<<RT)!==e&&(this.data^=1<<RT)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==mt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new ha;return e.depthTest=!1,e.blend=!0,e}}ha.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const v_=[];function AM(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=v_.length-1;r>=0;--r){const i=v_[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class ks{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let h=0,f=u.length;h<f;h++)u[h][c](e,n,r,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(ks.prototype,{dispatch:{value:ks.prototype.emit},run:{value:ks.prototype.emit}});let Gf=class{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new ks("setRealSize"),this.onUpdate=new ks("update"),this.onError=new ks("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}};class Y0 extends Gf{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=n.unpackAlignment??4}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Ui.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Qye={scaleMode:ja.NEAREST,alphaMode:Ui.NPM},LA=class Od extends gp{constructor(e=null,n=null){super(),n=Object.assign({},Od.defaultOptions,n);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:h,target:f,resolution:g,resourceOptions:m}=n;e&&!(e instanceof Gf)&&(e=AM(e,m),e.internal=!0),this.resolution=g||Xe.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=h,this.target=f,this.alphaMode=r,this.uid=ru(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,n){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,r=!0),r&&this.dirtyStyleId++,this}setSize(e,n,r){return r=r||this.resolution,this.setRealSize(e*r,n*r,r)}setRealSize(e,n,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=CA(this.realWidth)&&CA(this.realHeight)}setResolution(e){const n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ss[this.cacheId],delete Ni[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Od.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,n,r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ru()}`}s=e._pixiId}let o=Ss[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Od(e,n),o.cacheId=s,Od.addToCache(o,s)),o}static fromBuffer(e,n,r,i){e=e||new Float32Array(n*r*4);const s=new Y0(e,{width:n,height:r,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=Re.RGBA,a=lt.FLOAT):e instanceof Int32Array?(o=Re.RGBA_INTEGER,a=lt.INT):e instanceof Uint32Array?(o=Re.RGBA_INTEGER,a=lt.UNSIGNED_INT):e instanceof Int16Array?(o=Re.RGBA_INTEGER,a=lt.SHORT):e instanceof Uint16Array?(o=Re.RGBA_INTEGER,a=lt.UNSIGNED_SHORT):e instanceof Int8Array?(o=Re.RGBA,a=lt.BYTE):(o=Re.RGBA,a=lt.UNSIGNED_BYTE),s.internal=!0,new Od(s,Object.assign({},Qye,{type:a,format:o},i))}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Ss[n]&&Ss[n]!==e&&console.warn(`BaseTexture added to the cache with an id [${n}] that already had an entry`),Ss[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=Ss[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Ss[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)delete Ss[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}};LA.defaultOptions={mipmap:ca.POW2,anisotropicLevel:0,scaleMode:ja.LINEAR,wrapMode:qa.CLAMP,alphaMode:Ui.UNPACK,target:ch.TEXTURE_2D,format:Re.RGBA,type:lt.UNSIGNED_BYTE},LA._globalBatch=0;let Rt=LA;class b_{constructor(){this.texArray=null,this.blend=0,this.type=mo.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Jye=0,wr=class BV{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=Jye++,this.disposeRunner=new ks("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?sa.ELEMENT_ARRAY_BUFFER:sa.ARRAY_BUFFER}get index(){return this.type===sa.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new BV(e)}},kA=class FV{constructor(e,n=0,r=!1,i=lt.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new FV(e,n,r,i,s)}};const eve={Float32Array,Uint32Array,Int32Array,Uint8Array};function tve(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],h=kw(u);i[h]||(i[h]=new eve[h](s)),o=i[h];for(let f=0;f<u.length;f++){const g=(f/c|0)*r+a,m=f%c;o[g+m]=u[f]}a+=c}return new Float32Array(s)}const uF={5126:4,5123:2,5121:1};let nve=0;const rve={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let yp=class DA{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=nve++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ks("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof wr||(n instanceof Array&&(n=new Float32Array(n)),n=new wr(n));const c=e.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],n,r,i,s);return this}let u=this.buffers.indexOf(n);return u===-1&&(this.buffers.push(n),u=this.buffers.length-1),this.attributes[e]=new kA(u,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof wr||(e instanceof Array&&(e=new Uint16Array(e)),e=new wr(e)),e.type=sa.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new wr;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*uF[s.type]/4),s.buffer=0}for(r.data=tve(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new DA;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new wr(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new kA(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=sa.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new DA,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new rve[kw(o.buffers[a].data)](i[a]),n.buffers[a]=new wr(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=sa.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(const h in o.attributes){const f=o.attributes[h];(f.buffer|0)===u&&(l+=f.size*uF[f.type]/4)}for(let h=0;h<e.length;h++){const f=e[h].indexBuffer.data;for(let g=0;g<f.length;g++)n.indexBuffer.data[g+c]+=a;a+=e[h].buffers[u].data.length/l,c+=f.length}}return n}};class RM extends yp{constructor(e=!1){super(),this._buffer=new wr(null,e,!1),this._indexBuffer=new wr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,lt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,lt.FLOAT).addAttribute("aColor",this._buffer,4,!0,lt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,lt.FLOAT).addIndex(this._indexBuffer)}}const n0=Math.PI*2,zV=180/Math.PI,UV=Math.PI/180;var Xr=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Xr||{});class ft{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new ft(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}}ft.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Zv=[new ft,new ft,new ft,new ft];class xt{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=Xr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new xt(0,0,0,0)}clone(){return new xt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const k=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>k}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=Zv[0].set(e.left,e.top),l=Zv[1].set(e.left,e.bottom),c=Zv[2].set(e.right,e.top),u=Zv[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(n.a*n.d-n.b*n.c);if(h===0||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=r||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const f=h*(l.y-a.y),g=h*(a.x-l.x),m=f*r+g*s,y=f*i+g*s,x=f*r+g*o,b=f*i+g*o;if(Math.max(m,y,x,b)<=f*a.x+g*a.y||Math.min(m,y,x,b)>=f*u.x+g*u.y)return!1;const w=h*(a.y-c.y),v=h*(c.x-a.x),E=w*r+v*s,T=w*i+v*s,P=w*r+v*o,R=w*i+v*o;return!(Math.max(E,T,P,R)<=w*a.x+v*a.y||Math.min(E,T,P,R)>=w*u.x+v*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}}xt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class q0{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=Xr.CIRC}clone(){return new q0(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new xt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}q0.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class K0{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=Xr.ELIP}clone(){return new K0(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new xt(this.x-this.width,this.y-this.height,this.width,this.height)}}K0.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Wc{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=Xr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Wc(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>n!=u>n&&e<(c-a)*((n-l)/(u-l))+a&&(r=!r)}return r}}Wc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class Z0{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=Xr.RREC}clone(){return new Z0(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}}Z0.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let cr=class J1{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new ft;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new ft;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(a+l);return c<1e-5||Math.abs(n0-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new J1;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new J1}static get TEMP_MATRIX(){return new J1}};cr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const zu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Uu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$u=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ju=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],NA=[],$V=[],Qv=Math.sign;function ive(){for(let t=0;t<16;t++){const e=[];NA.push(e);for(let n=0;n<16;n++){const r=Qv(zu[t]*zu[n]+$u[t]*Uu[n]),i=Qv(Uu[t]*zu[n]+ju[t]*Uu[n]),s=Qv(zu[t]*$u[n]+$u[t]*ju[n]),o=Qv(Uu[t]*$u[n]+ju[t]*ju[n]);for(let a=0;a<16;a++)if(zu[a]===r&&Uu[a]===i&&$u[a]===s&&ju[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new cr;e.set(zu[t],Uu[t],$u[t],ju[t],0,0),$V.push(e)}}ive();const Vn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>zu[t],uY:t=>Uu[t],vX:t=>$u[t],vY:t=>ju[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>NA[t][e],sub:(t,e)=>NA[t][Vn.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Vn.S:Vn.N:Math.abs(e)*2<=Math.abs(t)?t>0?Vn.E:Vn.W:e>0?t>0?Vn.SE:Vn.SW:t>0?Vn.NE:Vn.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=$V[Vn.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class Zo{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new Zo(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Zo.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const BA=class{constructor(){this.worldTransform=new cr,this.localTransform=new cr,this.position=new Zo(this.onChange,this,0,0),this.scale=new Zo(this.onChange,this,1,1),this.pivot=new Zo(this.onChange,this,0,0),this.skew=new Zo(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};BA.IDENTITY=new BA;let Q0=BA;Q0.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var sve=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ove=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function hF(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function MT(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function jV(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return MT(2*e);case"bvec3":return MT(3*e);case"bvec4":return MT(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const hh=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],ave={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},lve={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function cve(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((r=t.uniforms[i])==null?void 0:r.group)===!0&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<hh.length;l++)if(hh[l].test(s,o)){n.push(hh[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?ave:lve)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const VV={};let yd=VV;function GV(){if(yd===VV||yd!=null&&yd.isContextLost()){const t=Xe.ADAPTER.createCanvas();let e;Xe.PREFER_ENV>=hu.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),yd=e}return yd}let Jv;function uve(){if(!Jv){Jv=Rs.MEDIUM;const t=GV();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Jv=e.precision?Rs.HIGH:Rs.MEDIUM)}}return Jv}function dF(t,e){const n=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function hve(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||dF(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||dF(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const dve={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function HV(t){return dve[t]}let e1=null;const fF={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function WV(t,e){if(!e1){const n=Object.keys(fF);e1={};for(let r=0;r<n.length;++r){const i=n[r];e1[t[i]]=fF[i]}}return e1[e]}function pF(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===Rs.HIGH&&n!==Rs.HIGH&&(r=Rs.MEDIUM),`precision ${r} float;
${t}`}else if(n!==Rs.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let dg;function XV(){if(typeof dg=="boolean")return dg;try{dg=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{dg=!1}return dg}let fve=0;const t1={},FA=class Ld{constructor(e,n,r="pixi-shader",i={}){this.extra={},this.id=fve++,this.vertexSrc=e||Ld.defaultVertexSrc,this.fragmentSrc=n||Ld.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),t1[r]?(t1[r]++,r+=`-${t1[r]}`):t1[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=pF(this.vertexSrc,Ld.defaultVertexPrecision,Rs.HIGH),this.fragmentSrc=pF(this.fragmentSrc,Ld.defaultFragmentPrecision,uve())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return ove}static get defaultFragmentSrc(){return sve}static from(e,n,r){const i=e+n;let s=MA[i];return s||(MA[i]=s=new Ld(e,n,r)),s}};FA.defaultVertexPrecision=Rs.HIGH,FA.defaultFragmentPrecision=Ko.apple.device?Rs.HIGH:Rs.MEDIUM;let Va=FA,pve=0;class _o{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pve++,this.static=!!n,this.ubo=!!r,e instanceof wr?(this.buffer=e,this.buffer.type=sa.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new wr(new Float32Array(1)),this.buffer.type=sa.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new _o(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new _o(e,n,r)}static uboFrom(e,n){return new _o(e,n??!0,!0)}}let Il=class YV{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof _o?this.uniformGroup=n:this.uniformGroup=new _o(n):this.uniformGroup=new _o({}),this.disposeRunner=new ks("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Va.from(e,n);return new YV(i,r)}};class qV{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=_o.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Va(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new cr,default:this.defaultGroupCache[e]};return new Il(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class __{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function gve(){return!Ko.apple.device}function mve(t){let e=!0;const n=Xe.ADAPTER.getNavigator();if(Ko.tablet||Ko.phone){if(Ko.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Ko.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class J0{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var yve=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,vve=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const kg=class $o extends J0{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=RM,this.vertexSize=6,this.state=ha.for2d(),this.size=$o.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??mve(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??gve(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return _t("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return vve}static get defaultFragmentTemplate(){return yve}setShaderGenerator({vertex:e=$o.defaultVertexSrc,fragment:n=$o.defaultFragmentTemplate}={}){this.shaderGenerator=new qV(e,n)}contextChange(){const e=this.renderer.gl;Xe.PREFER_ENV===hu.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),$o.defaultMaxTextures),this.maxTextures=NV(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:n}=$o,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new b_);for(;n.length<i;)n.push(new __);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:n}=this,r=$o._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Rt._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(s,n);for(let h=0;h<this._bufferSize;++h){const f=e[h];e[h]=null,f._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++a),f._batchEnabled=a,f.touched=o,c.elements[c.count++]=f)}c.count>0&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;Rt._globalBatch=a}buildDrawCalls(e,n,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=$o._drawCallPool;let c=this._dcIndex,u=this._aIndex,h=this._iIndex,f=l[c];f.start=this._iIndex,f.texArray=e;for(let g=n;g<r;++g){const m=i[g],y=m._texture.baseTexture,x=PM[y.alphaMode?1:0][m.blendMode];i[g]=null,n<g&&f.blend!==x&&(f.size=h-f.start,n=g,f=l[++c],f.texArray=e,f.start=h),this.packInterleavedGeometry(m,s,o,u,h),u+=m.vertexData.length/2*a,h+=m.indices.length,f.blend=x}n<r&&(f.size=h-f.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){const n=this.renderer.texture;for(let r=0;r<e.count;r++)n.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:n,_indexBuffer:r}=this;$o.canUploadSameBuffer?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:n,state:r}=this.renderer,i=$o._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,r.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),$o.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const n=t0(Math.ceil(e/8)),r=AA(n),i=n*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new y_(i*this.vertexSize*4)),s}getIndexBuffer(e){const n=t0(Math.ceil(e/12)),r=AA(n),i=n*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,n,r,i,s){const{uint32View:o,float32View:a}=n,l=i/this.vertexSize,c=e.uvs,u=e.indices,h=e.vertexData,f=e._texture.baseTexture._batchLocation,g=Math.min(e.worldAlpha,1),m=sn.shared.setValue(e._tintRGB).toPremultiplied(g,e._texture.baseTexture.alphaMode>0);for(let y=0;y<h.length;y+=2)a[i++]=h[y],a[i++]=h[y+1],a[i++]=c[y],a[i++]=c[y+1],o[i++]=m,a[i++]=f;for(let y=0;y<u.length;y++)r[s++]=l+u[y]}};kg.defaultBatchSize=4096,kg.extension={name:"batch",type:Ue.RendererPlugin},kg._drawCallPool=[],kg._textureArrayPool=[];let wc=kg;nt.add(wc);var bve=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_ve=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zA=class Dg extends Il{constructor(e,n,r){const i=Va.from(e||Dg.defaultVertexSrc,n||Dg.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=Dg.defaultResolution,this.multisample=Dg.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ha}apply(e,n,r,i,s){e.applyFilter(this,n,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return _ve}static get defaultFragmentSrc(){return bve}};zA.defaultResolution=1,zA.defaultMultisample=gr.NONE;let Ci=zA;class r0{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new sn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}r0.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},r0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"background"};nt.add(r0);class IM{constructor(e){this.renderer=e,this.emptyRenderer=new J0(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],h=u._batchLocation;if(h>=0&&h<i&&n[h]===u){o[c]=h;continue}for(;l<i;){const f=n[l];if(f&&f._batchEnabled===r&&f._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,n[l]=u;break}}}destroy(){this.renderer=null}}IM.extension={type:Ue.RendererSystem,name:"batch"};nt.add(IM);let gF=0;class i0{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=gF++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=gF++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(Xe.PREFER_ENV>=hu.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}i0.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},i0.extension={type:Ue.RendererSystem,name:"context"};nt.add(i0);let x_=class{constructor(e,n){if(this.width=Math.round(e),this.height=Math.round(n),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ks("disposeFramebuffer"),this.multisample=gr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Rt(null,{scaleMode:ja.NEAREST,resolution:1,mipmap:ca.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Rt(null,{scaleMode:ja.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ca.OFF,format:Re.DEPTH_COMPONENT,type:lt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!e||!n)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};class MM extends Rt{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=gr.NONE),super(null,e),this.mipmap=ca.OFF,this.valid=!0,this._clear=new sn([0,0,0,0]),this.framebuffer=new x_(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Qa extends Gf{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.displayWidth||n.width,i=n.naturalHeight||n.videoHeight||n.displayHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=DV(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Ui.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class OM extends Qa{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;Qa.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??Xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ui.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Dw{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=Vn.add(r,Vn.NW),this.x0=l+o*Vn.uX(r),this.y0=c+a*Vn.uY(r),r=Vn.add(r,2),this.x1=l+o*Vn.uX(r),this.y1=c+a*Vn.uY(r),r=Vn.add(r,2),this.x2=l+o*Vn.uX(r),this.y2=c+a*Vn.uY(r),r=Vn.add(r,2),this.x3=l+o*Vn.uX(r),this.y3=c+a*Vn.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Dw.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const mF=new Dw;function n1(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}let yt=class Pn extends gp{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new xt(0,0,1,1)),e instanceof Pn&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=mF,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ft(o.x,o.y):new ft(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&Ni[n.url]&&Pn.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Pn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new Pn(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===mF&&(this._uvs=new Dw),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Rt){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${ru()}`,Rt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ru()}`}s=e._pixiId}let o=Ni[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Rt)?(n.resolution||(n.resolution=Za(e)),o=new Pn(new Rt(e,n)),o.baseTexture.cacheId=s,Rt.addToCache(o.baseTexture,s),Pn.addToCache(o,s)):!o&&e instanceof Rt&&(o=new Pn(e),Pn.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=Pn.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new Pn(Rt.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Rt(e,Object.assign({scaleMode:Rt.defaultOptions.scaleMode,resolution:Za(n)},i)),{resource:o}=s;o instanceof OM&&(o.url=n);const a=new Pn(s);return r||(r=n),Rt.addToCache(a.baseTexture,r),Pn.addToCache(a,r),r!==n&&(Rt.addToCache(a.baseTexture,n),Pn.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Ni[n]&&Ni[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),Ni[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=Ni[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Ni[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)Ni[e.textureCacheIds[n]]===e&&delete Ni[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Pn._EMPTY||(Pn._EMPTY=new Pn(new Rt),n1(Pn._EMPTY),n1(Pn._EMPTY.baseTexture)),Pn._EMPTY}static get WHITE(){if(!Pn._WHITE){const e=Xe.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),Pn._WHITE=new Pn(Rt.from(e)),n1(Pn._WHITE),n1(Pn._WHITE.baseTexture)}return Pn._WHITE}};class fu extends yt{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new fu(new MM(e))}}class LM{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=gr.NONE){const i=new MM(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new fu(i)}getOptimalTexture(e,n,r=1,i=gr.NONE){let s;e=Math.max(Math.ceil(e*r-1e-6),1),n=Math.max(Math.ceil(n*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=t0(e),n=t0(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||gr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}LM.SCREEN_KEY=-1;class KV extends yp{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class kM extends yp{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new wr(this.vertices),this.uvBuffer=new wr(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ZV{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=gr.NONE,this.sourceFrame=new xt,this.destinationFrame=new xt,this.bindingSourceFrame=new xt,this.bindingDestinationFrame=new xt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const r1=[new ft,new ft,new ft,new ft],OT=new cr;class DM{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new LM,this.statePool=[],this.quad=new KV,this.quadUv=new kM,this.tempRect=new xt,this.activeState={},this.globalUniforms=new _o({outputFrame:new xt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new ZV,o=r.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=r.resolution,l=r.multisample;let c=n[0].resolution||a,u=n[0].multisample??l,h=n[0].padding,f=n[0].autoFit,g=n[0].legacy??!0;for(let x=1;x<n.length;x++){const b=n[x];c=Math.min(c,b.resolution||a),u=Math.min(u,b.multisample??l),h=this.useMaxPadding?Math.max(h,b.padding):h+b.padding,f=f&&b.autoFit,g=g||(b.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=g,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const m=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(OT.copyFrom(r.projection.transform).invert(),m),f?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,y),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=i.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,l.renderTexture,Xo.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,n.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<r.length-1;++h){h===1&&n.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,n.resolution),u.filterFrame=c.filterFrame),r[h].apply(this,c,u,Xo.CLEAR,n);const f=c;c=u,u=f}r[h].apply(this,c,l.renderTexture,Xo.BLEND,n),h>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Xo.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Xo.CLEAR||n===Xo.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(mo.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(mo.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(cr.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=gr.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||gr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=r1[0],i=r1[1],s=r1[2],o=r1[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),u=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=u-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?OT.copyFrom(s):OT.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}DM.extension={type:Ue.RendererSystem,name:"filter"};nt.add(DM);class QV{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=gr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const xve=new xt;class NM{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new x_(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Xe.PREFER_ENV===hu.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=f_.COLOR|f_.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new QV(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){n.bindRenderbuffer(n.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=n.DEPTH_STENCIL:e.depth&&e.stencil?o=n.DEPTH24_STENCIL8:e.depth?o=n.DEPTH_COMPONENT24:o=n.STENCIL_INDEX8,r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,o,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,n)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,c=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,c=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,c,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=gr.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=gr.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new x_(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=xve,n.width=i.width,n.height=i.height),r||(r=n);const c=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=n.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new xt}destroy(){this.renderer=null}}NM.extension={type:Ue.RendererSystem,name:"framebuffer"};nt.add(NM);const LT={5126:4,5123:2,5121:1};class BM{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Xe.PREFER_ENV===hu.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const h=e.buffers,f=e.attributes,g={},m={};for(const y in h)g[y]=0,m[y]=0;for(const y in f)!f[y].size&&a.attributeData[y]?f[y].size=a.attributeData[y].size:f[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),g[f[y].buffer]+=f[y].size*LT[f[y].type];for(const y in f){const x=f[y],b=x.size;x.stride===void 0&&(g[x.buffer]===b*LT[x.type]?x.stride=0:x.stride=g[x.buffer]),x.start===void 0&&(x.start=m[x.buffer],m[x.buffer]+=b*LT[x.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let y=0;y<h.length;y++){const x=h[y];o.bind(x),r&&x._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(sa.ARRAY_BUFFER),u}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!n&&o.dispose(s[l],n))}if(!n){for(const l in r)if(l[0]==="g"){const c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],h=o[u.buffer],f=h._glBuffers[i];if(n.attributeData[c]){l!==f&&(s.bind(h),l=f);const g=n.attributeData[c].location;if(r.enableVertexAttribArray(g),r.vertexAttribPointer(g,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(g,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}BM.extension={type:Ue.RendererSystem,name:"geometry"};nt.add(BM);const yF=new cr;class Nw{constructor(e,n){this._texture=e,this.mapCoord=new cr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(yF.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(yF));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var wve=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Eve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class JV extends Ci{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||Eve,n||wve,r),this.maskSprite=i,this.maskMatrix=new cr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Nw(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class eG{constructor(e=null){this.type=xr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ci.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=xr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class FM{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new eG;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==xr.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case xr.SCISSOR:this.renderer.scissor.push(r);break;case xr.STENCIL:this.renderer.stencil.push(r);break;case xr.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case xr.COLOR:this.pushColorMask(r);break}r.type===xr.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case xr.SCISSOR:this.renderer.scissor.pop(n);break;case xr.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case xr.SPRITE:this.popSpriteMask(n);break;case xr.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===xr.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=xr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=xr.SCISSOR:e.type=xr.STENCIL:e.type=xr.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new JV])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=n;const s=r.filterArea;r.filterArea=n.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}FM.extension={type:Ue.RendererSystem,name:"mask"};nt.add(FM);class tG{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const vF=new cr,bF=[],nG=class eb extends tG{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const n=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,bF.pop()??new xt);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),n&&o.fit(n),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:n,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:n}=e;if(!n.isFastRect||!n.isFastRect()||eb.isMatrixRotated(n.worldTransform)||eb.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,n,r,i,s){eb.isMatrixRotated(s)||(s=s?vF.copyFrom(s):vF.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:n}=this.renderer;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:n}=this.renderer;e&&bF.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)}};nG.extension={type:Ue.RendererSystem,name:"scissor"};let rG=nG;nt.add(rG);class zM extends tG{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}zM.extension={type:Ue.RendererSystem,name:"stencil"};nt.add(zM);class UM{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}UM.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"_plugin"};nt.add(UM);class $M{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new cr,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}$M.extension={type:Ue.RendererSystem,name:"projection"};nt.add($M);const Sve=new Q0,_F=new xt;class jM{constructor(e){this.renderer=e,this._tempMatrix=new cr}generateTexture(e,n){const{region:r,...i}=n||{},s=(r==null?void 0:r.copyTo(_F))||e.getLocalBounds(_F,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=fu.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=Sve,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}jM.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"textureGenerator"};nt.add(jM);const Au=new xt,fg=new xt;class VM{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xt,this.destinationFrame=new xt,this.viewportFrame=new xt}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(Au.width=e.frame.width,Au.height=e.frame.height,n=Au),r||(fg.x=e.frame.x,fg.y=e.frame.y,fg.width=n.width,fg.height=n.height,r=fg),o=s.framebuffer):(a=i.resolution,n||(Au.width=i._view.screen.width,Au.height=i._view.screen.height,n=Au),r||(r=Au,r.width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=sn.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}VM.extension={type:Ue.RendererSystem,name:"renderTexture"};nt.add(VM);class Tve{}class iG{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Pve(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=WV(e,s.type),a={type:o,name:s.name,size:HV(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function Cve(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=WV(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:jV(l,s.size)}}return n}function sG(t,e){var a;const n=hF(t,t.VERTEX_SHADER,e.vertexSrc),r=hF(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||hve(t,i,n,r),e.attributeData=Pve(i,t),e.uniformData=Cve(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(i,c,l[c]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:jV(c.type,c.size)}}return new iG(i,o)}function Ave(t,e,n,r,i){n.buffer.update(i)}const Rve={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},oG={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function aG(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=oG[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function lG(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function cG(t,e){if(!t.autoManage)return{size:0,syncFunc:Ave};const n=lG(t.uniforms,e),{uboElements:r,size:i}=aG(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let h=0;h<hh.length;h++){const f=hh[h];if(f.codeUbo&&f.test(a.data,l)){s.push(`offset = ${a.offset/4};`,hh[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const h=HV(a.data.type),f=Math.max(oG[a.data.type]/16,1),g=h/f,m=(4-g%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${g}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const h=Rve[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let Ive=0;const i1={textureCount:0,uboCount:0};class GM{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ive++}systemCheck(){if(!XV())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(i1.textureCount=0,i1.uboCount=0,this.syncUniformGroup(e.uniformGroup,i1)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=cve(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,i1,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=cG(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=sG(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}GM.extension={type:Ue.RendererSystem,name:"shader"};nt.add(GM);class s0{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.4.0 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}s0.defaultOptions={hello:!1},s0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"startup"};nt.add(s0);function Mve(t,e=[]){return e[mt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.ADD]=[t.ONE,t.ONE],e[mt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.NONE]=[0,0],e[mt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[mt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[mt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[mt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[mt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[mt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[mt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[mt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const Ove=0,Lve=1,kve=2,Dve=3,Nve=4,Bve=5,uG=class UA{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=mt.NONE,this._blendEq=!1,this.map=[],this.map[Ove]=this.setBlend,this.map[Lve]=this.setOffset,this.map[kve]=this.setCullFace,this.map[Dve]=this.setDepthTest,this.map[Nve]=this.setFrontFace,this.map[Bve]=this.setDepthMask,this.checks=[],this.defaultState=new ha,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Mve(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let n=this.stateId^e.data,r=0;for(;n;)n&1&&this.map[r].call(this,!!(e.data&1<<r)),n=n>>1,r++;this.stateId=e.data}for(let n=0;n<this.checks.length;n++)this.checks[n](this,e)}forceState(e){e=e||this.defaultState;for(let n=0;n<this.map.length;n++)this.map[n].call(this,!!(e.data&1<<n));for(let n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(UA.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(UA.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const n=this.blendModes[e],r=this.gl;n.length===2?r.blendFunc(n[0],n[1]):r.blendFuncSeparate(n[0],n[1],n[2],n[3]),n.length===6?(this._blendEq=!0,r.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,n){this.gl.polygonOffset(e,n)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,n){const r=this.checks.indexOf(e);n&&r===-1?this.checks.push(e):!n&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,n){e.setBlendMode(n.blendMode)}static checkPolygonOffset(e,n){e.setPolygonOffset(1,n.polygonOffset)}destroy(){this.gl=null}};uG.extension={type:Ue.RendererSystem,name:"state"};let hG=uG;nt.add(hG);class dG extends gp{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new ks(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Ng=class tb{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=tb.defaultMaxIdle,this.checkCountMax=tb.defaultCheckCountMax,this.mode=tb.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Ow.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let r=!1;for(let i=0;i<n.length;i++){const s=n[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<n.length;s++)n[s]!==null&&(n[i++]=n[s]);n.length=i}}unload(e){const n=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&n.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Ng.defaultMode=Ow.AUTO,Ng.defaultMaxIdle=60*60,Ng.defaultCheckCountMax=60*10,Ng.extension={type:Ue.RendererSystem,name:"textureGC"};let Ec=Ng;nt.add(Ec);class nb{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=lt.UNSIGNED_BYTE,this.internalFormat=Re.RGBA,this.samplerType=0}}function Fve(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:We.FLOAT,[t.RGBA]:We.FLOAT,[t.ALPHA]:We.FLOAT,[t.LUMINANCE]:We.FLOAT,[t.LUMINANCE_ALPHA]:We.FLOAT,[t.R8]:We.FLOAT,[t.R8_SNORM]:We.FLOAT,[t.RG8]:We.FLOAT,[t.RG8_SNORM]:We.FLOAT,[t.RGB8]:We.FLOAT,[t.RGB8_SNORM]:We.FLOAT,[t.RGB565]:We.FLOAT,[t.RGBA4]:We.FLOAT,[t.RGB5_A1]:We.FLOAT,[t.RGBA8]:We.FLOAT,[t.RGBA8_SNORM]:We.FLOAT,[t.RGB10_A2]:We.FLOAT,[t.RGB10_A2UI]:We.FLOAT,[t.SRGB8]:We.FLOAT,[t.SRGB8_ALPHA8]:We.FLOAT,[t.R16F]:We.FLOAT,[t.RG16F]:We.FLOAT,[t.RGB16F]:We.FLOAT,[t.RGBA16F]:We.FLOAT,[t.R32F]:We.FLOAT,[t.RG32F]:We.FLOAT,[t.RGB32F]:We.FLOAT,[t.RGBA32F]:We.FLOAT,[t.R11F_G11F_B10F]:We.FLOAT,[t.RGB9_E5]:We.FLOAT,[t.R8I]:We.INT,[t.R8UI]:We.UINT,[t.R16I]:We.INT,[t.R16UI]:We.UINT,[t.R32I]:We.INT,[t.R32UI]:We.UINT,[t.RG8I]:We.INT,[t.RG8UI]:We.UINT,[t.RG16I]:We.INT,[t.RG16UI]:We.UINT,[t.RG32I]:We.INT,[t.RG32UI]:We.UINT,[t.RGB8I]:We.INT,[t.RGB8UI]:We.UINT,[t.RGB16I]:We.INT,[t.RGB16UI]:We.UINT,[t.RGB32I]:We.INT,[t.RGB32UI]:We.UINT,[t.RGBA8I]:We.INT,[t.RGBA8UI]:We.UINT,[t.RGBA16I]:We.INT,[t.RGBA16UI]:We.UINT,[t.RGBA32I]:We.INT,[t.RGBA32UI]:We.UINT,[t.DEPTH_COMPONENT16]:We.FLOAT,[t.DEPTH_COMPONENT24]:We.FLOAT,[t.DEPTH_COMPONENT32F]:We.FLOAT,[t.DEPTH_STENCIL]:We.FLOAT,[t.DEPTH24_STENCIL8]:We.FLOAT,[t.DEPTH32F_STENCIL8]:We.FLOAT}:e={[t.RGB]:We.FLOAT,[t.RGBA]:We.FLOAT,[t.ALPHA]:We.FLOAT,[t.LUMINANCE]:We.FLOAT,[t.LUMINANCE_ALPHA]:We.FLOAT,[t.DEPTH_STENCIL]:We.FLOAT},e}function zve(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[lt.UNSIGNED_BYTE]:{[Re.RGBA]:t.RGBA8,[Re.RGB]:t.RGB8,[Re.RG]:t.RG8,[Re.RED]:t.R8,[Re.RGBA_INTEGER]:t.RGBA8UI,[Re.RGB_INTEGER]:t.RGB8UI,[Re.RG_INTEGER]:t.RG8UI,[Re.RED_INTEGER]:t.R8UI,[Re.ALPHA]:t.ALPHA,[Re.LUMINANCE]:t.LUMINANCE,[Re.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[lt.BYTE]:{[Re.RGBA]:t.RGBA8_SNORM,[Re.RGB]:t.RGB8_SNORM,[Re.RG]:t.RG8_SNORM,[Re.RED]:t.R8_SNORM,[Re.RGBA_INTEGER]:t.RGBA8I,[Re.RGB_INTEGER]:t.RGB8I,[Re.RG_INTEGER]:t.RG8I,[Re.RED_INTEGER]:t.R8I},[lt.UNSIGNED_SHORT]:{[Re.RGBA_INTEGER]:t.RGBA16UI,[Re.RGB_INTEGER]:t.RGB16UI,[Re.RG_INTEGER]:t.RG16UI,[Re.RED_INTEGER]:t.R16UI,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[lt.SHORT]:{[Re.RGBA_INTEGER]:t.RGBA16I,[Re.RGB_INTEGER]:t.RGB16I,[Re.RG_INTEGER]:t.RG16I,[Re.RED_INTEGER]:t.R16I},[lt.UNSIGNED_INT]:{[Re.RGBA_INTEGER]:t.RGBA32UI,[Re.RGB_INTEGER]:t.RGB32UI,[Re.RG_INTEGER]:t.RG32UI,[Re.RED_INTEGER]:t.R32UI,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[lt.INT]:{[Re.RGBA_INTEGER]:t.RGBA32I,[Re.RGB_INTEGER]:t.RGB32I,[Re.RG_INTEGER]:t.RG32I,[Re.RED_INTEGER]:t.R32I},[lt.FLOAT]:{[Re.RGBA]:t.RGBA32F,[Re.RGB]:t.RGB32F,[Re.RG]:t.RG32F,[Re.RED]:t.R32F,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[lt.HALF_FLOAT]:{[Re.RGBA]:t.RGBA16F,[Re.RGB]:t.RGB16F,[Re.RG]:t.RG16F,[Re.RED]:t.R16F},[lt.UNSIGNED_SHORT_5_6_5]:{[Re.RGB]:t.RGB565},[lt.UNSIGNED_SHORT_4_4_4_4]:{[Re.RGBA]:t.RGBA4},[lt.UNSIGNED_SHORT_5_5_5_1]:{[Re.RGBA]:t.RGB5_A1},[lt.UNSIGNED_INT_2_10_10_10_REV]:{[Re.RGBA]:t.RGB10_A2,[Re.RGBA_INTEGER]:t.RGB10_A2UI},[lt.UNSIGNED_INT_10F_11F_11F_REV]:{[Re.RGB]:t.R11F_G11F_B10F},[lt.UNSIGNED_INT_5_9_9_9_REV]:{[Re.RGB]:t.RGB9_E5},[lt.UNSIGNED_INT_24_8]:{[Re.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[lt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Re.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[lt.UNSIGNED_BYTE]:{[Re.RGBA]:t.RGBA,[Re.RGB]:t.RGB,[Re.ALPHA]:t.ALPHA,[Re.LUMINANCE]:t.LUMINANCE,[Re.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[lt.UNSIGNED_SHORT_5_6_5]:{[Re.RGB]:t.RGB},[lt.UNSIGNED_SHORT_4_4_4_4]:{[Re.RGBA]:t.RGBA},[lt.UNSIGNED_SHORT_5_5_5_1]:{[Re.RGBA]:t.RGBA}},e}class HM{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Rt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=zve(e),this.samplerTypes=Fve(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new nb(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new nb(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==We.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new nb(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,n.samplerType=this.samplerTypes[n.internalFormat]??We.FLOAT,this.webGLVersion===2&&e.type===lt.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)==null?void 0:i.upload(r,e,n))n.samplerType!==We.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&uh(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===ca.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=qa.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==ca.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ja.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===ja.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ja.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===ja.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}HM.extension={type:Ue.RendererSystem,name:"texture"};nt.add(HM);class WM{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}WM.extension={type:Ue.RendererSystem,name:"transformFeedback"};nt.add(WM);class o0{constructor(e){this.renderer=e}init(e){this.screen=new xt(0,0,e.width,e.height),this.element=e.view||Xe.ADAPTER.createCanvas(),this.resolution=e.resolution||Xe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}o0.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},o0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"_view"};nt.add(o0);Xe.PREFER_ENV=hu.WEBGL2;Xe.STRICT_TEXTURE_CACHE=!1;Xe.RENDER_OPTIONS={...i0.defaultOptions,...r0.defaultOptions,...o0.defaultOptions,...s0.defaultOptions};Object.defineProperties(Xe,{WRAP_MODE:{get(){return Rt.defaultOptions.wrapMode},set(t){_t("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Rt.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Rt.defaultOptions.scaleMode},set(t){_t("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Rt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Rt.defaultOptions.mipmap},set(t){_t("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Rt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Rt.defaultOptions.anisotropicLevel},set(t){_t("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Rt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return _t("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ci.defaultResolution},set(t){Ci.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return _t("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ci.defaultMultisample},set(t){Ci.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return wc.defaultMaxTextures},set(t){_t("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),wc.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return wc.defaultBatchSize},set(t){_t("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),wc.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return wc.canUploadSameBuffer},set(t){_t("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),wc.canUploadSameBuffer=t}},GC_MODE:{get(){return Ec.defaultMode},set(t){_t("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ec.defaultMode=t}},GC_MAX_IDLE:{get(){return Ec.defaultMaxIdle},set(t){_t("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ec.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ec.defaultCheckCountMax},set(t){_t("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ec.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Va.defaultVertexPrecision},set(t){_t("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Va.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Va.defaultFragmentPrecision},set(t){_t("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Va.defaultFragmentPrecision=t}}});var Fl=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Fl||{});class kT{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const fG=class xs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kT(null,null,1/0),this.deltaMS=1/xs.targetFPMS,this.elapsedMS=1/xs.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,r=Fl.NORMAL){return this._addListener(new kT(e,n,r))}addOnce(e,n,r=Fl.NORMAL){return this._addListener(new kT(e,n,r,!0))}_addListener(e){let n=this._head.next,r=this._head;if(!n)e.connect(r);else{for(;n;){if(e.priority>n.priority){e.connect(r);break}r=n,n=n.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,n){let r=this._head.next;for(;r;)r.match(e,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*xs.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,n)/1e3,xs.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!xs._shared){const e=xs._shared=new xs;e.autoStart=!0,e._protected=!0}return xs._shared}static get system(){if(!xs._system){const e=xs._system=new xs;e.autoStart=!0,e._protected=!0}return xs._system}};fG.targetFPMS=.06;let Tr=fG;Object.defineProperties(Xe,{TARGET_FPMS:{get(){return Tr.targetFPMS},set(t){_t("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Tr.targetFPMS=t}}});class XM{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Fl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Tr.shared:new Tr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}XM.extension=Ue.Application;nt.add(XM);const pG=[];nt.handleByList(Ue.Renderer,pG);function gG(t){for(const e of pG)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var Uve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$ve=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const mG=Uve,YM=$ve;class qM{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=gr.HIGH?this.multisample=gr.HIGH:n>=gr.MEDIUM?this.multisample=gr.MEDIUM:n>=gr.LOW?this.multisample=gr.LOW:this.multisample=gr.NONE}destroy(){}}qM.extension={type:Ue.RendererSystem,name:"_multisample"};nt.add(qM);class jve{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class KM{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new jve(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}KM.extension={type:Ue.RendererSystem,name:"buffer"};nt.add(KM);class ZM{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ZM.extension={type:Ue.RendererSystem,name:"objectRenderer"};nt.add(ZM);const rb=class $A extends dG{constructor(e){super(),this.type=bM.WEBGL,e=Object.assign({},Xe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new _o({projectionMatrix:new cr},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:$A.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in e&&(_t("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=$A.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:SV()}render(e,n){this.objectRenderer.render(e,n)}resize(e,n){this._view.resizeView(e,n)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return _t("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return _t("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return _t("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return _t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){_t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return _t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){_t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return _t("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,n){return this.textureGenerator.generateTexture(e,n)}};rb.extension={type:Ue.Renderer,priority:1},rb.__plugins={},rb.__systems={};let Bw=rb;nt.handleByMap(Ue.RendererPlugin,Bw.__plugins);nt.handleByMap(Ue.RendererSystem,Bw.__systems);nt.add(Bw);class QM extends Gf{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Rt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Gf?this.addResourceAt(e[r],r):this.addResourceAt(AM(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(e).then(()=>{const{realWidth:n,realHeight:r}=this.items[0];return this.resize(n,r),this.update(),Promise.resolve(this)}),this._load}}class yG extends QM{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ch.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,r.type,c.resource.source))}return!0}}class vG extends Qa{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const bG=class Bg extends QM{constructor(e,n){const{width:r,height:i,autoLoad:s,linkBaseTexture:o}=n||{};if(e&&e.length!==Bg.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<Bg.SIDES;a++)this.items[a].target=ch.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,n),s!==!1&&this.load()}bind(e){super.bind(e),e.target=ch.TEXTURE_CUBE_MAP}addBaseTextureAt(e,n,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[n])throw new Error(`Index ${n} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ch.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this}upload(e,n,r){const i=this.itemDirtyIds;for(let s=0;s<Bg.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<n.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Bg.SIDES}};bG.SIDES=6;let _G=bG;class Ju extends Qa{constructor(e,n){n=n||{};let r,i,s;typeof e=="string"?(r=Ju.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.ownsImageBitmap=n.ownsImageBitmap??s,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await Xe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ui.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Ju._EMPTY=Ju._EMPTY??Xe.ADAPTER.createCanvas(0,0),Ju._EMPTY}}const jA=class ib extends Qa{constructor(e,n){n=n||{},super(Xe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=n.scale||1,this._overrideWidth=n.width,this._overrideHeight=n.height,this._resolve=null,this._crossorigin=n.crossorigin,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},ib.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Qa.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=n=>{this._resolve&&(e.onerror=null,this.onError.emit(n))},e.onload=()=>{if(!this._resolve)return;const n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=n*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*n,s=this._overrideHeight||this._overrideWidth/n*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${ru()}`,o.getContext("2d").drawImage(e,0,0,n,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const n=ib.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,n){return n==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&ib.SVG_XML.test(e)}};jA.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,jA.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let w_=jA;class Vve extends Qa{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const VA=class GA extends Qa{constructor(e,n){if(n=n||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");n.autoLoad!==!1&&r.setAttribute("preload","auto"),n.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),n.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),n.loop===!0&&r.setAttribute("loop",""),n.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Qa.crossOrigin(r,i,n.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||GA.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=n.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),n.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const n=Tr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((n,r)=>{this.valid?n(this):(this._resolve=n,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const n=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!n&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Tr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Tr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Tr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||GA.TYPES.includes(n)}};VA.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VA.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let JM=VA;v_.push(Ju,OM,vG,JM,Vve,w_,Y0,_G,yG);let Gve=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new ks("disposeTransformFeedback")}bindBuffer(e,n){this.buffers[e]=n}destroy(){this.disposeRunner.emit(this,!1)}};const Hve="7.4.0",Wve=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:Ui,AbstractMultiResource:QM,ArrayResource:yG,Attribute:kA,BLEND_MODES:mt,BUFFER_BITS:f_,BUFFER_TYPE:sa,BackgroundSystem:r0,BaseImageResource:Qa,BaseRenderTexture:MM,BaseTexture:Rt,BatchDrawCall:b_,BatchGeometry:RM,BatchRenderer:wc,BatchShaderGenerator:qV,BatchSystem:IM,BatchTextureArray:__,BrowserAdapter:uV,Buffer:wr,BufferResource:Y0,BufferSystem:KM,CLEAR_MODES:Xo,COLOR_MASK_BITS:cV,CanvasResource:vG,Circle:q0,Color:sn,ContextSystem:i0,CubeResource:_G,DEG_TO_RAD:UV,DRAW_MODES:mo,ENV:hu,Ellipse:K0,ExtensionType:Ue,FORMATS:Re,Filter:Ci,FilterState:ZV,FilterSystem:DM,Framebuffer:x_,FramebufferSystem:NM,GC_MODES:Ow,GLFramebuffer:QV,GLProgram:iG,GLTexture:nb,GenerateTextureSystem:jM,Geometry:yp,GeometrySystem:BM,IGLUniformData:Tve,INSTALLED:v_,ImageBitmapResource:Ju,ImageResource:OM,MASK_TYPES:xr,MIPMAP_MODES:ca,MSAA_QUALITY:gr,MaskData:eG,MaskSystem:FM,Matrix:cr,MultisampleSystem:qM,ObjectRenderer:J0,ObjectRendererSystem:ZM,ObservablePoint:Zo,PI_2:n0,PRECISION:Rs,PluginSystem:UM,Point:ft,Polygon:Wc,Program:Va,ProjectionSystem:$M,Quad:KV,QuadUv:kM,RAD_TO_DEG:zV,RENDERER_TYPE:bM,Rectangle:xt,RenderTexture:fu,RenderTexturePool:LM,RenderTextureSystem:VM,Renderer:Bw,Resource:Gf,RoundedRectangle:Z0,Runner:ks,SAMPLER_TYPES:We,SCALE_MODES:ja,SHAPES:Xr,SVGResource:w_,ScissorSystem:rG,Shader:Il,ShaderSystem:GM,SpriteMaskFilter:JV,StartupSystem:s0,State:ha,StateSystem:hG,StencilSystem:zM,SystemManager:dG,TARGETS:ch,TYPES:lt,Texture:yt,TextureGCSystem:Ec,TextureMatrix:Nw,TextureSystem:HM,TextureUvs:Dw,Ticker:Tr,TickerPlugin:XM,Transform:Q0,TransformFeedback:Gve,TransformFeedbackSystem:WM,UPDATE_PRIORITY:Fl,UniformGroup:_o,VERSION:Hve,VideoResource:JM,ViewSystem:o0,ViewableBuffer:y_,WRAP_MODES:qa,autoDetectRenderer:gG,autoDetectResource:AM,checkMaxIfStatementsInShader:NV,createUBOElements:aG,defaultFilterVertex:YM,defaultVertex:mG,extensions:nt,generateProgram:sG,generateUniformBufferSync:cG,getTestContext:GV,getUBOData:lG,groupD8:Vn,isMobile:Ko,settings:Xe,uniformParsers:hh,unsafeEvalSupported:XV,utils:qye},Symbol.toStringTag,{value:"Module"}));class a0{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?xt.EMPTY:(e=e||new xt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*n.x+s*n.y+a,u=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty;let f=this.minX,g=this.minY,m=this.maxX,y=this.maxY,x=o*n+l*r+u,b=a*n+c*r+h;f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*i+l*r+u,b=a*i+c*r+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*n+l*s+u,b=a*n+c*s+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*i+l*s+u,b=a*i+c*s+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,this.minX=f,this.minY=g,this.maxX=m,this.maxY=y}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,h=e.tx,f=e.ty;let g=this.minX,m=this.minY,y=this.maxX,x=this.maxY;for(let b=r;b<i;b+=2){const w=n[b],v=n[b+1],E=a*w+c*v+h,T=u*v+l*w+f;g=Math.min(g,E-s),y=Math.max(y,E+s),m=Math.min(m,T-o),x=Math.max(x,T+o)}this.minX=g,this.minY=m,this.maxX=y,this.maxY=x}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class Nn extends gp{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Q0,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new a0,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(Nn.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new xt),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new a0);const n=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new xG),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*zV}set angle(e){this.transform.rotation=e*UV}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class xG extends Nn{constructor(){super(...arguments),this.sortDirty=null}}Nn.prototype.displayObjectUpdateTransform=Nn.prototype.updateTransform;const Xve=new cr;function Yve(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const wG=class HA extends Nn{constructor(){super(),this.children=[],this.sortableChildren=HA.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const r=this.getChildIndex(e),i=this.getChildIndex(n);this.children[r]=n,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);uh(this.children,r,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],r=this.children.indexOf(n);if(r===-1)return null;n.parent=null,n.transform._parentID=-1,uh(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,uh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const r=e,i=n,s=i-r;let o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,r=this.children.length;n<r;++n){const i=this.children[n];i._lastSortedIndex=n,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Yve),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){const r=n._mask.isMaskData?n._mask.maskObject:n._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(n._bounds,r._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const r=super.getLocalBounds(e);if(!n)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==HA.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=Xve.copyFrom(i),i.prepend(s)):i=s),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var n;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(n=this.filters)!=null&&n.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,o,a;const n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<n.length;l++)n[l].enabled&&this._enabledFilters.push(n[l])}const i=n&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==xr.NONE));if(i&&e.batch.flush(),n&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),n&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(n)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e}};wG.defaultSortableChildren=!1;let hi=wG;hi.prototype.containerUpdateTransform=hi.prototype.updateTransform;Object.defineProperties(Xe,{SORTABLE_CHILDREN:{get(){return hi.defaultSortableChildren},set(t){_t("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),hi.defaultSortableChildren=t}}});const qve=Object.freeze(Object.defineProperty({__proto__:null,Bounds:a0,Container:hi,DisplayObject:Nn,TemporaryDisplayObject:xG},Symbol.toStringTag,{value:"Module"}));var ey=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(ey||{});const pg=new ft,Kve=new Uint16Array([0,1,2,0,2,3]);class da extends hi{constructor(e){super(),this._anchor=new Zo(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new sn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||yt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Kve,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Xe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Cl(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Cl(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,u=e.trim,h=e.orig,f=this._anchor;let g=0,m=0,y=0,x=0;if(u?(m=u.x-f._x*h.width,g=m+u.width,x=u.y-f._y*h.height,y=x+u.height):(m=-f._x*h.width,g=m+h.width,x=-f._y*h.height,y=x+h.height),c[0]=r*m+s*x+a,c[1]=o*x+i*m+l,c[2]=r*g+s*x+a,c[3]=o*x+i*g+l,c[4]=r*g+s*y+a,c[5]=o*y+i*g+l,c[6]=r*m+s*y+a,c[7]=o*y+i*m+l,this._roundPixels){const b=Xe.RESOLUTION;for(let w=0;w<c.length;++w)c[w]=Math.round(c[w]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty,f=-i._x*r.width,g=f+r.width,m=-i._y*r.height,y=m+r.height;if(n[0]=o*f+l*m+u,n[1]=c*m+a*f+h,n[2]=o*g+l*m+u,n[3]=c*m+a*g+h,n[4]=o*g+l*y+u,n[5]=c*y+a*g+h,n[6]=o*f+l*y+u,n[7]=c*y+a*f+h,this._roundPixels){const x=Xe.RESOLUTION;for(let b=0;b<n.length;++b)n[b]=Math.round(n[b]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new a0),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,pg);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return pg.x>=i&&pg.x<i+n&&(s=-r*this.anchor.y,pg.y>=s&&pg.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,n){const r=e instanceof yt?e:yt.from(e,n);return new da(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Cl(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Cl(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||yt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Zve=Object.freeze(Object.defineProperty({__proto__:null,Sprite:da},Symbol.toStringTag,{value:"Module"})),s1={willReadFrequently:!0},Oa=class ot{static get experimentalLetterSpacingSupported(){let e=ot._experimentalLetterSpacingSupported;if(e!==void 0){const n=Xe.ADAPTER.getCanvasRenderingContext2D().prototype;e=ot._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,r,i,s,o,a,l,c){this.text=e,this.style=n,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,n,r,i=ot._canvas){r=r??n.wordWrap;const s=n.toFontString(),o=ot.measureFont(s);o.fontSize===0&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);const a=i.getContext("2d",s1);a.font=s;const l=(r?ot.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let m=0;m<l.length;m++){const y=ot._measureText(l[m],n.letterSpacing,a);c[m]=y,u=Math.max(u,y)}let h=u+n.strokeThickness;n.dropShadow&&(h+=n.dropShadowDistance);const f=n.lineHeight||o.fontSize+n.strokeThickness;let g=Math.max(f,o.fontSize+n.strokeThickness*2)+n.leading+(l.length-1)*(f+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new ot(e,n,h,g,l,c,f+n.leading,u,o)}static _measureText(e,n,r){let i=!1;ot.experimentalLetterSpacingSupported&&(ot.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=n:s+=(ot.graphemeSegmenter(e).length-1)*n),s}static wordWrap(e,n,r=ot._canvas){const i=r.getContext("2d",s1);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=n,h=ot.collapseSpaces(u),f=ot.collapseNewlines(u);let g=!h;const m=n.wordWrapWidth+c,y=ot.tokenize(e);for(let x=0;x<y.length;x++){let b=y[x];if(ot.isNewline(b)){if(!f){a+=ot.addLine(o),g=!h,o="",s=0;continue}b=" "}if(h){const v=ot.isBreakingSpace(b),E=ot.isBreakingSpace(o[o.length-1]);if(v&&E)continue}const w=ot.getFromCache(b,c,l,i);if(w>m)if(o!==""&&(a+=ot.addLine(o),o="",s=0),ot.canBreakWords(b,n.breakWords)){const v=ot.wordWrapSplit(b);for(let E=0;E<v.length;E++){let T=v[E],P=T,R=1;for(;v[E+R];){const k=v[E+R];if(!ot.canBreakChars(P,k,b,E,n.breakWords))T+=k;else break;P=k,R++}E+=R-1;const M=ot.getFromCache(T,c,l,i);M+s>m&&(a+=ot.addLine(o),g=!1,o="",s=0),o+=T,s+=M}}else{o.length>0&&(a+=ot.addLine(o),o="",s=0);const v=x===y.length-1;a+=ot.addLine(b,!v),g=!1,o="",s=0}else w+s>m&&(g=!1,a+=ot.addLine(o),o="",s=0),(o.length>0||!ot.isBreakingSpace(b)||g)&&(o+=b,s+=w)}return a+=ot.addLine(o,!1),a}static addLine(e,n=!0){return e=ot.trimRight(e),e=n?`${e}
`:e,e}static getFromCache(e,n,r,i){let s=r[e];return typeof s!="number"&&(s=ot._measureText(e,n,i)+n,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const r=e[n];if(!ot.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ot._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:ot._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const n=[];let r="";if(typeof e!="string")return n;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ot.isBreakingSpace(s,o)||ot.isNewline(s)){r!==""&&(n.push(r),r=""),n.push(s);continue}r+=s}return r!==""&&n.push(r),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,r,i,s){return!0}static wordWrapSplit(e){return ot.graphemeSegmenter(e)}static measureFont(e){if(ot._fonts[e])return ot._fonts[e];const n={ascent:0,descent:0,fontSize:0},r=ot._canvas,i=ot._context;i.font=e;const s=ot.METRICS_STRING+ot.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ot.BASELINE_SYMBOL).width);const l=Math.ceil(ot.HEIGHT_MULTIPLIER*a);if(a=a*ot.BASELINE_MULTIPLIER|0,o===0||l===0)return ot._fonts[e]=n,n;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,h=o*4;let f=0,g=0,m=!1;for(f=0;f<a;++f){for(let y=0;y<h;y+=4)if(c[g+y]!==255){m=!0;break}if(!m)g+=h;else break}for(n.ascent=a-f,g=u-h,m=!1,f=l;f>a;--f){for(let y=0;y<h;y+=4)if(c[g+y]!==255){m=!0;break}if(!m)g-=h;else break}return n.descent=f-a,n.fontSize=n.ascent+n.descent,ot._fonts[e]=n,n}static clearMetrics(e=""){e?delete ot._fonts[e]:ot._fonts={}}static get _canvas(){var e;if(!ot.__canvas){let n;try{const r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",s1))!=null&&e.measureText)return ot.__canvas=r,r;n=Xe.ADAPTER.createCanvas()}catch{n=Xe.ADAPTER.createCanvas()}n.width=n.height=10,ot.__canvas=n}return ot.__canvas}static get _context(){return ot.__context||(ot.__context=ot._canvas.getContext("2d",s1)),ot.__context}};Oa.METRICS_STRING="|q",Oa.BASELINE_SYMBOL="M",Oa.BASELINE_MULTIPLIER=1.4,Oa.HEIGHT_MULTIPLIER=2,Oa.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})(),Oa.experimentalLetterSpacing=!1,Oa._fonts={},Oa._newlines=[10,13],Oa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let xl=Oa;const Qve=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],EG=class Fg{constructor(e){this.styleID=0,this.reset(),NT(this,e,e)}clone(){const e={};return NT(e,this,Fg.defaultStyle),new Fg(e)}reset(){NT(this,Fg.defaultStyle,Fg.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=DT(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=DT(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){Jve(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=DT(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let r=n.length-1;r>=0;r--){let i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!Qve.includes(i)&&(i=`"${i}"`),n[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}};EG.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ey.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let js=EG;function DT(t){const e=sn.shared,n=r=>{const i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(n):n(t)}function Jve(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function NT(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const e1e={texture:!0,children:!1,baseTexture:!0},SG=class WA extends da{constructor(e,n,r){let i=!1;r||(r=Xe.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=yt.from(r);s.orig=new xt,s.trim=new xt,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=WA.defaultResolution??Xe.RESOLUTION,this._autoResolution=WA.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return xl.experimentalLetterSpacing}static set experimentalLetterSpacing(e){_t("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),xl.experimentalLetterSpacing=e}updateText(e){const n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=xl.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=n.strokeThickness,r.textBaseline=n.textBaseline,r.lineJoin=n.lineJoin,r.miterLimit=n.miterLimit;let f,g;const m=n.dropShadow?2:1;for(let y=0;y<m;++y){const x=n.dropShadow&&y===0,b=x?Math.ceil(Math.max(1,o)+n.padding*2):0,w=b*this._resolution;if(x){r.fillStyle="black",r.strokeStyle="black";const E=n.dropShadowColor,T=n.dropShadowBlur*this._resolution,P=n.dropShadowDistance*this._resolution;r.shadowColor=sn.shared.setValue(E).setAlpha(n.dropShadowAlpha).toRgbaString(),r.shadowBlur=T,r.shadowOffsetX=Math.cos(n.dropShadowAngle)*P,r.shadowOffsetY=Math.sin(n.dropShadowAngle)*P+w}else r.fillStyle=this._generateFillStyle(n,a,i),r.strokeStyle=n.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let v=(l-h.fontSize)/2;l-h.fontSize<0&&(v=0);for(let E=0;E<a.length;E++)f=n.strokeThickness/2,g=n.strokeThickness/2+E*l+h.ascent+v,n.align==="right"?f+=u-c[E]:n.align==="center"&&(f+=(u-c[E])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(a[E],f+n.padding,g+n.padding-b,!0),n.fill&&this.drawLetterSpacing(a[E],f+n.padding,g+n.padding-b)}this.updateTexture()}drawLetterSpacing(e,n,r,i=!1){const s=this._style.letterSpacing;let o=!1;if(xl.experimentalLetterSpacingSupported&&(xl.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r);return}let a=n;const l=xl.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let h=0;h<l.length;++h){const f=l[h];i?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let g="";for(let m=h+1;m<l.length;++m)g+=l[m];u=this.context.measureText(g).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=kV(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const n=this._texture,r=this._style,i=r.trim?0:r.padding,s=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-i*2,n.orig.height=n._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,n){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,n)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,n,r){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),h=e.fillGradientStops.slice();if(!h.length){const f=u.length+1;for(let g=1;g<f;++g)h.push(g/f)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),e.fillGradientType===ey.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const f=r.fontProperties.fontSize+e.strokeThickness;for(let g=0;g<n.length;g++){const m=r.lineHeight*(g-1)+f,y=r.lineHeight*g;let x=y;g>0&&m>y&&(x=(y+m)/2);const b=y+f,w=r.lineHeight*(g+1);let v=b;g+1<n.length&&w<b&&(v=(b+w)/2);const E=(v-x)/c;for(let T=0;T<u.length;T++){let P=0;typeof h[T]=="number"?P=h[T]:P=T/u.length;let R=Math.min(1,Math.max(0,x/c+P*E));R=Number(R.toFixed(5)),s.addColorStop(R,u[T])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const f=u.length+1;let g=1;for(let m=0;m<u.length;m++){let y;typeof h[m]=="number"?y=h[m]:y=g/f,s.addColorStop(y,u[m]),g++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},e1e,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const n=Cl(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const n=Cl(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof js?this._style=e:this._style=new js(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};SG.defaultAutoResolution=!0;let Fw=SG;const t1e=Object.freeze(Object.defineProperty({__proto__:null,TEXT_GRADIENT:ey,Text:Fw,TextMetrics:xl,TextStyle:js},Symbol.toStringTag,{value:"Module"}));class l0{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class vm{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),h=u[0],f=u[1].replace(/"/gm,""),g=parseFloat(f),m=isNaN(g)?f:g;l[h]=m}r[o].push(l)}const i=new l0;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class E_{static test(e){const n=e;return typeof e!="string"&&"getElementsByTagName"in e&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new l0,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)n.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)n.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];n.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class S_{static test(e){return typeof e=="string"&&e.includes("<font>")?E_.test(Xe.ADAPTER.parseXML(e)):!1}static parse(e){return E_.parse(Xe.ADAPTER.parseXML(e))}}const BT=[vm,E_,S_];function TG(t){for(let e=0;e<BT.length;e++)if(BT[e].test(t))return BT[e];return null}function n1e(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=t.width/r-l-c*2,h=t.height/r-l-c*2,f=o.slice(),g=n.fillGradientStops.slice();if(!g.length){const m=f.length+1;for(let y=1;y<m;++y)g.push(y/m)}if(f.unshift(o[0]),g.unshift(0),f.push(o[o.length-1]),g.push(1),n.fillGradientType===ey.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,h+c);let m=0;const y=(s.fontProperties.fontSize+n.strokeThickness)/h;for(let x=0;x<i.length;x++){const b=s.lineHeight*x;for(let w=0;w<f.length;w++){let v=0;typeof g[w]=="number"?v=g[w]:v=w/f.length;const E=b/h+v*y;let T=Math.max(m,E);T=Math.min(T,1),a.addColorStop(T,f[w]),m=T}}}else{a=e.createLinearGradient(c,h/2,u+c,h/2);const m=f.length+1;let y=1;for(let x=0;x<f.length;x++){let b;typeof g[x]=="number"?b=g[x]:b=y/m,a.addColorStop(b,f[x]),y++}}return a}function r1e(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=n1e(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,f=o.dropShadowBlur*s,g=o.dropShadowDistance*s;e.shadowColor=sn.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=f,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function sb(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function PG(t){return Array.from?Array.from(t):t.split("")}function i1e(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...PG(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const vc=class La{constructor(e,n,r){var u;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Za(o.file),c={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let h=0;h<e.page.length;h++){const{id:f,file:g}=e.page[h];c[f]=n instanceof Array?n[h]:n[g],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[f].baseTexture.alphaMode=Ui.NO_PREMULTIPLIED_ALPHA,c[f].baseTexture.mipmap=ca.OFF)}for(let h=0;h<e.char.length;h++){const{id:f,page:g}=e.char[h];let{x:m,y,width:x,height:b,xoffset:w,yoffset:v,xadvance:E}=e.char[h];m/=l,y/=l,x/=l,b/=l,w/=l,v/=l,E/=l;const T=new xt(m+c[g].frame.x/l,y+c[g].frame.y/l,x,b);this.chars[f]={xOffset:w,yOffset:v,xAdvance:E,kerning:{},texture:new yt(c[g].baseTexture,T),page:g}}for(let h=0;h<e.kerning.length;h++){let{first:f,second:g,amount:m}=e.kerning[h];f/=l,g/=l,m/=l,this.chars[g]&&(this.chars[g].kerning[f]=m)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((u=a==null?void 0:a.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,n,r){let i;if(e instanceof l0)i=e;else{const o=TG(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof yt&&(n=[n]);const s=new La(i,n,r);return La.available[s.font]=s,s}static uninstall(e){const n=La.available[e];if(!n)throw new Error(`No font found named '${e}'`);n.destroy(),delete La.available[e]}static from(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},La.defaultOptions,r),u=i1e(i),h=n instanceof js?n:new js(n),f=a,g=new l0;g.info[0]={face:h.fontFamily,size:h.fontSize},g.common[0]={lineHeight:h.fontSize};let m=0,y=0,x,b,w,v=0;const E=[];for(let P=0;P<u.length;P++){x||(x=Xe.ADAPTER.createCanvas(),x.width=a,x.height=l,b=x.getContext("2d"),w=new Rt(x,{resolution:o,...c}),E.push(new yt(w)),g.page.push({id:E.length-1,file:""}));const R=u[P],M=xl.measureText(R,h,!1,x),k=M.width,O=Math.ceil(M.height),F=Math.ceil((h.fontStyle==="italic"?2:1)*k);if(y>=l-O*o){if(y===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${R}')`);--P,x=null,b=null,w=null,y=0,m=0,v=0;continue}if(v=Math.max(O+M.fontProperties.descent,v),F*o+m>=f){if(m===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${R}')`);--P,y+=v*o,y=Math.ceil(y),m=0,v=0;continue}r1e(x,b,M,m,y,o,h);const I=sb(M.text);g.char.push({id:I,page:E.length-1,x:m/o,y:y/o,width:F,height:O,xoffset:0,yoffset:0,xadvance:k-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),m+=(F+2*s)*o,m=Math.ceil(m)}if(!(r!=null&&r.skipKerning))for(let P=0,R=u.length;P<R;P++){const M=u[P];for(let k=0;k<R;k++){const O=u[k],F=b.measureText(M).width,I=b.measureText(O).width,D=b.measureText(M+O).width-(F+I);D&&g.kerning.push({first:sb(M),second:sb(O),amount:D})}}const T=new La(g,E,!0);return La.available[e]!==void 0&&La.uninstall(e),La.available[e]=T,T}};vc.ALPHA=[["a","z"],["A","Z"]," "],vc.NUMERIC=[["0","9"]],vc.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],vc.ASCII=[[" ","~"]],vc.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:vc.ALPHANUMERIC},vc.available={};let vl=vc;class CG{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const FT=new ft,xF=new Wc,AG=class RG extends hi{constructor(e,n,r,i=mo.TRIANGLES){super(),this.geometry=e,this.shader=n,this.state=r||ha.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Xe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===mo.TRIANGLES&&n.length<RG.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const n=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,h=this.vertexData;for(let f=0;f<h.length/2;f++){const g=n[f*2],m=n[f*2+1];h[f*2]=s*g+a*m+c,h[f*2+1]=o*g+l*m+u}if(this._roundPixels){const f=Xe.RESOLUTION;for(let g=0;g<h.length;++g)h[g]=Math.round(h[g]*f)/f}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new CG(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,FT);const n=this.geometry.getBuffer("aVertexPosition").data,r=xF.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(r[0]=n[l],r[1]=n[l+1],r[2]=n[c],r[3]=n[c+1],r[4]=n[u],r[5]=n[u+1],xF.contains(FT.x,FT.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};AG.BATCHABLE_SIZE=100;let Hf=AG;class ty extends yp{constructor(e,n,r){super();const i=new wr(e),s=new wr(n,!0),o=new wr(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,lt.FLOAT).addAttribute("aTextureCoord",s,2,!1,lt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var s1e=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,o1e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Wf extends Il{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:cr.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Va.from(o1e,s1e),r),this._colorDirty=!1,this.uvMatrix=new Nw(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new sn(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;sn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}const a1e=Object.freeze(Object.defineProperty({__proto__:null,Mesh:Hf,MeshBatchUvs:CG,MeshGeometry:ty,MeshMaterial:Wf},Symbol.toStringTag,{value:"Module"}));var l1e=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,c1e=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const wF=[],EF=[],SF=[],IG=class MG extends hi{constructor(e,n={}){super();const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},MG.styleDefaults,n);if(!vl.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new sn(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Zo(()=>{this.dirty=!0},this,0,0),this._roundPixels=Xe.ROUND_PIXELS,this.dirty=!0,this._resolution=Xe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var F;const e=vl.available[this._fontName],n=this.fontSize,r=n/e.size,i=new ft,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=PG(l),u=this._maxWidth*e.size/n,h=e.distanceFieldType==="none"?wF:EF;let f=null,g=0,m=0,y=0,x=-1,b=0,w=0,v=0,E=0;for(let I=0;I<c.length;I++){const D=c[I],N=sb(D);if(/(?:\s)/.test(D)&&(x=I,b=g,E++),D==="\r"||D===`
`){o.push(g),a.push(-1),m=Math.max(m,g),++y,++w,i.x=0,i.y+=e.lineHeight,f=null,E=0;continue}const j=e.chars[N];if(!j)continue;f&&j.kerning[f]&&(i.x+=j.kerning[f]);const W=SF.pop()||{texture:yt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ft};W.texture=j.texture,W.line=y,W.charCode=N,W.position.x=Math.round(i.x+j.xOffset+this._letterSpacing/2),W.position.y=Math.round(i.y+j.yOffset),W.prevSpaces=E,s.push(W),g=W.position.x+Math.max(j.xAdvance-j.xOffset,j.texture.orig.width),i.x+=j.xAdvance+this._letterSpacing,v=Math.max(v,j.yOffset+j.texture.height),f=N,x!==-1&&u>0&&i.x>u&&(++w,uh(s,1+x-w,1+I-x),I=x,x=-1,o.push(b),a.push(s.length>0?s[s.length-1].prevSpaces:0),m=Math.max(m,b),y++,i.x=0,i.y+=e.lineHeight,f=null,E=0)}const T=c[c.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(g=b),o.push(g),m=Math.max(m,g),a.push(-1));const P=[];for(let I=0;I<=y;I++){let D=0;this._align==="right"?D=m-o[I]:this._align==="center"?D=(m-o[I])/2:this._align==="justify"&&(D=a[I]<0?0:(m-o[I])/a[I]),P.push(D)}const R=s.length,M={},k=[],O=this._activePagesMeshData;h.push(...O);for(let I=0;I<R;I++){const D=s[I].texture,N=D.baseTexture.uid;if(!M[N]){let j=h.pop();if(!j){const H=new ty;let U,X;e.distanceFieldType==="none"?(U=new Wf(yt.EMPTY),X=mt.NORMAL):(U=new Wf(yt.EMPTY,{program:Va.from(c1e,l1e),uniforms:{uFWidth:0}}),X=mt.NORMAL_NPM);const Y=new Hf(H,U);Y.blendMode=X,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;const{_textureCache:W}=this;W[N]=W[N]||new yt(D.baseTexture),j.mesh.texture=W[N],j.mesh.tint=this._tintColor.value,k.push(j),M[N]=j}M[N].total++}for(let I=0;I<O.length;I++)k.includes(O[I])||this.removeChild(O[I].mesh);for(let I=0;I<k.length;I++)k[I].mesh.parent!==this&&this.addChild(k[I].mesh);this._activePagesMeshData=k;for(const I in M){const D=M[I],N=D.total;if(!(((F=D.indices)==null?void 0:F.length)>6*N)||D.vertices.length<Hf.BATCHABLE_SIZE*2)D.vertices=new Float32Array(4*2*N),D.uvs=new Float32Array(4*2*N),D.indices=new Uint16Array(6*N);else{const j=D.total,W=D.vertices;for(let H=j*4*2;H<W.length;H++)W[H]=0}D.mesh.size=6*N}for(let I=0;I<R;I++){const D=s[I];let N=D.position.x+P[D.line]*(this._align==="justify"?D.prevSpaces:1);this._roundPixels&&(N=Math.round(N));const j=N*r,W=D.position.y*r,H=D.texture,U=M[H.baseTexture.uid],X=H.frame,Y=H._uvs,Z=U.index++;U.indices[Z*6+0]=0+Z*4,U.indices[Z*6+1]=1+Z*4,U.indices[Z*6+2]=2+Z*4,U.indices[Z*6+3]=0+Z*4,U.indices[Z*6+4]=2+Z*4,U.indices[Z*6+5]=3+Z*4,U.vertices[Z*8+0]=j,U.vertices[Z*8+1]=W,U.vertices[Z*8+2]=j+X.width*r,U.vertices[Z*8+3]=W,U.vertices[Z*8+4]=j+X.width*r,U.vertices[Z*8+5]=W+X.height*r,U.vertices[Z*8+6]=j,U.vertices[Z*8+7]=W+X.height*r,U.uvs[Z*8+0]=Y.x0,U.uvs[Z*8+1]=Y.y0,U.uvs[Z*8+2]=Y.x1,U.uvs[Z*8+3]=Y.y1,U.uvs[Z*8+4]=Y.x2,U.uvs[Z*8+5]=Y.y2,U.uvs[Z*8+6]=Y.x3,U.uvs[Z*8+7]=Y.y3}this._textWidth=m*r,this._textHeight=(i.y+e.lineHeight)*r;for(const I in M){const D=M[I];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const U=this._textWidth*this.anchor.x,X=this._textHeight*this.anchor.y;for(let Y=0;Y<D.total;Y++)D.vertices[H++]-=U,D.vertices[H++]-=X,D.vertices[H++]-=U,D.vertices[H++]-=X,D.vertices[H++]-=U,D.vertices[H++]-=X,D.vertices[H++]-=U,D.vertices[H++]-=X}this._maxLineHeight=v*r;const N=D.mesh.geometry.getBuffer("aVertexPosition"),j=D.mesh.geometry.getBuffer("aTextureCoord"),W=D.mesh.geometry.getIndex();N.data=D.vertices,j.data=D.uvs,W.data=D.indices,N.update(),j.update(),W.update()}for(let I=0;I<s.length;I++)SF.push(s[I]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:n,distanceFieldType:r,size:i}=vl.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),h=(Math.abs(c)+Math.abs(u))/2,f=this.fontSize/i,g=e._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=h*n*f*g}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=vl.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!vl.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??vl.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:n}=this,r=vl.available[this._fontName].distanceFieldType==="none"?wF:EF;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>n[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=yt.EMPTY});for(const i in n)n[i].destroy(),delete n[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};IG.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let OG=IG;const TF={loader:Ue.LoadParser,resolver:Ue.ResolveParser,cache:Ue.CacheParser,detection:Ue.DetectionParser};nt.handle(Ue.Asset,t=>{const e=t.ref;Object.entries(TF).filter(([n])=>!!e[n]).forEach(([n,r])=>nt.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(TF).filter(n=>!!e[n]).forEach(n=>nt.remove(e[n]))});class u1e{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Nh(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Yl(t,e){const n=t.split("?")[0],r=Pr.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const po=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||n?e(r):r):t),T_=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function LG(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?LG(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function kG(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),LG(t,i,0,n,r)}else r.push(t);return r}const c0=t=>!Array.isArray(t);class h1e{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=po(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof yt){const a=n;r.forEach(l=>{a.baseTexture!==yt.EMPTY.baseTexture&&Rt.addToCache(a.baseTexture,l),yt.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Pc=new h1e;class d1e{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,n,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,i,n,this))&&(i=await c.parse(i,n,this)||i,r.parser=c)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=c0(e),o=po(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=Pr.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,n&&n(++r/a)}catch(h){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const n=po(e,r=>({alias:[r],src:r})).map(async r=>{var o,a;const i=Pr.toAbsolute(r.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var Ao=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Ao||{});const f1e=".json",p1e="application/json",DG={extension:{type:Ue.LoadParser,priority:Ao.Low},name:"loadJson",test(t){return Nh(t,p1e)||Yl(t,f1e)},async load(t){return await(await Xe.ADAPTER.fetch(t)).json()}};nt.add(DG);const g1e=".txt",m1e="text/plain",NG={name:"loadTxt",extension:{type:Ue.LoadParser,priority:Ao.Low},test(t){return Nh(t,m1e)||Yl(t,g1e)},async load(t){return await(await Xe.ADAPTER.fetch(t)).text()}};nt.add(NG);const y1e=["normal","bold","100","200","300","400","500","600","700","800","900"],v1e=[".ttf",".otf",".woff",".woff2"],b1e=["font/ttf","font/otf","font/woff","font/woff2"],_1e=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function BG(t){const e=Pr.extname(t),n=Pr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=n.length>0;for(const s of n)if(!s.match(_1e)){r=!1;break}let i=n.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const x1e=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function w1e(t){return x1e.test(t)?t:encodeURI(t)}const FG={extension:{type:Ue.LoadParser,priority:Ao.Low},name:"loadWebFont",test(t){return Nh(t,b1e)||Yl(t,v1e)},async load(t,e){var r,i,s;const n=Xe.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??BG(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(u=>y1e.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const h=l[u],f=new FontFace(a,`url(${w1e(t)})`,{...c,weight:h});await f.load(),n.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>Xe.ADAPTER.getFontFaceSet().delete(e))}};nt.add(FG);const E1e=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let mf=null,XA=class extends Worker{constructor(){mf||(mf=URL.createObjectURL(new Blob([E1e],{type:"application/javascript"}))),super(mf)}};XA.revokeObjectURL=function(){mf&&(URL.revokeObjectURL(mf),mf=null)};const S1e=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let yf=null;class zG extends Worker{constructor(){yf||(yf=URL.createObjectURL(new Blob([S1e],{type:"application/javascript"}))),super(yf)}}zG.revokeObjectURL=function(){yf&&(URL.revokeObjectURL(yf),yf=null)};let PF=0,zT;class T1e{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=new XA;n.addEventListener("message",r=>{n.terminate(),XA.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){zT===void 0&&(zT=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<zT&&(this._createdWorkers++,e=new zG,e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[PF]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:PF++,id:r})}}const CF=new T1e;function vp(t,e,n){t.resource.internal=!0;const r=new yt(t),i=()=>{delete e.promiseCache[n],Pc.has(n)&&Pc.remove(n)};return r.baseTexture.once("destroyed",()=>{n in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const P1e=[".jpeg",".jpg",".png",".webp",".avif"],C1e=["image/jpeg","image/png","image/webp","image/avif"];async function UG(t){const e=await Xe.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const ny={name:"loadTextures",extension:{type:Ue.LoadParser,priority:Ao.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Nh(t,C1e)||Yl(t,P1e)},async load(t,e,n){var a;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;r?this.config.preferWorkers&&await CF.isImageBitmapSupported()?i=await CF.loadImageBitmap(t):i=await UG(t):i=await new Promise((l,c)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=t,u.complete?l(u):(u.onload=()=>l(u),u.onerror=h=>c(h))});const s={...e.data};s.resolution??(s.resolution=Za(t)),r&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Rt(i,s);return o.resource.src=t,vp(o,n,t)},unload(t){t.destroy(!0)}};nt.add(ny);const A1e=".svg",R1e="image/svg+xml",$G={extension:{type:Ue.LoadParser,priority:Ao.High},name:"loadSVG",test(t){return Nh(t,R1e)||Yl(t,A1e)},async testParse(t){return w_.test(t)},async parse(t,e,n){var s;const r=new w_(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await r.load();const i=new Rt(r,{resolution:Za(t),...e==null?void 0:e.data});return i.resource.src=e.src,vp(i,n,e.src)},async load(t,e){return(await Xe.ADAPTER.fetch(t)).text()},unload:ny.unload};nt.add($G);const I1e=[".mp4",".m4v",".webm",".ogv"],M1e=["video/mp4","video/webm","video/ogg"],jG={name:"loadVideo",extension:{type:Ue.LoadParser,priority:Ao.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Nh(t,M1e)||Yl(t,I1e)},async load(t,e,n){var o;let r;const i=await(await Xe.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new JM(s,a);await l.load();const c=new Rt(l,{alphaMode:await EV(),resolution:Za(t),...e==null?void 0:e.data});c.resource.src=t,r=vp(c,n,t),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return r},unload(t){t.destroy(!0)}};nt.add(jG);class O1e{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}getAlias(e){const{alias:n,name:r,src:i,srcs:s}=e;return po(n||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));r.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(n).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof n[i]=="string")this.add({alias:s,src:n[i]});else if(Array.isArray(n[i]))this.add({alias:s,src:n[i]});else{const o=n[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}r.push(...s)}),this._bundles[e]=r}add(e,n,r,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(_t("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:n,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},po(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:h,format:f,loadParser:g}=l;const m=po(c||u).map(b=>typeof b=="string"?kG(b):Array.isArray(b)?b:[b]),y=this.getAlias(l);Array.isArray(y)?y.forEach(a):a(y);const x=[];m.forEach(b=>{b.forEach(w=>{let v={};if(typeof w!="object"){v.src=w;for(let E=0;E<this._parsers.length;E++){const T=this._parsers[E];if(T.test(w)){v=T.parse(w);break}}}else h=w.data??h,f=w.format??f,g=w.loadParser??g,v={...v,...w};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${v.src}`);v=this.buildResolvedAsset(v,{aliases:y,data:h,format:f,loadParser:g}),x.push(v)})}),y.forEach(b=>{this._assetMap[b]=x})})}resolveBundle(e){const n=c0(e);e=po(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=c0(e);e=po(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(h=>h[l]?h[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}buildResolvedAsset(e,n){const{aliases:r,data:i,loadParser:s,format:o}=n;return(this._basePath||this._rootPath)&&(e.src=Pr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??Pr.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class VG{constructor(){this._detections=[],this._initialized=!1,this.resolver=new O1e,this.loader=new d1e,this.cache=Pc,this._backgroundLoader=new u1e(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r,i,s){this.resolver.add(e,n,r,i,s)}async load(e,n){this._initialized||await this.init();const r=c0(e),i=po(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{n==null||n(++a/l)},u=o.map(h=>{const f=i[h];return l+=Object.keys(f).length,this._mapLoadToResolve(f,c).then(g=>{s[h]=g})});return await Promise.all(u),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Pc.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Pc.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Pc.set(u,c)}),o}async unload(e){this._initialized||await this.init();const n=po(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=po(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Pc.remove(r.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?n=await r.add(n):e.skipDetections||(n=await r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n}get detections(){return this._detections}get preferWorkers(){return ny.config.preferWorkers}set preferWorkers(e){_t("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const zg=new VG;nt.handleByList(Ue.LoadParser,zg.loader.parsers).handleByList(Ue.ResolveParser,zg.resolver.parsers).handleByList(Ue.CacheParser,zg.cache.parsers).handleByList(Ue.DetectionParser,zg.detections);const GG={extension:Ue.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof yt),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};nt.add(GG);async function HG(t){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const WG={extension:{type:Ue.DetectionParser,priority:1},test:async()=>HG("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};nt.add(WG);const XG={extension:{type:Ue.DetectionParser,priority:0},test:async()=>HG("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};nt.add(XG);const AF=["png","jpg","jpeg"],YG={extension:{type:Ue.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...AF],remove:async t=>t.filter(e=>!AF.includes(e))};nt.add(YG);const L1e="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function eO(t){return L1e?!1:document.createElement("video").canPlayType(t)!==""}const qG={extension:{type:Ue.DetectionParser,priority:0},test:async()=>eO("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};nt.add(qG);const KG={extension:{type:Ue.DetectionParser,priority:0},test:async()=>eO("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};nt.add(KG);const ZG={extension:{type:Ue.DetectionParser,priority:0},test:async()=>eO("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};nt.add(ZG);const QG={extension:Ue.ResolveParser,test:ny.test,parse:t=>{var e;return{resolution:parseFloat(((e=Xe.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Pr.extname(t).slice(1),src:t}}};nt.add(QG);const k1e=Object.freeze(Object.defineProperty({__proto__:null,Assets:zg,AssetsClass:VG,Cache:Pc,LoaderParserPriority:Ao,cacheTextureArray:GG,checkDataUrl:Nh,checkExtension:Yl,convertToList:po,copySearchParams:T_,createStringVariations:kG,createTexture:vp,detectAvif:WG,detectDefaults:YG,detectMp4:KG,detectOgv:ZG,detectWebm:qG,detectWebp:XG,getFontFamilyName:BG,isSingleItem:c0,loadImageBitmap:UG,loadJson:DG,loadSVG:$G,loadTextures:ny,loadTxt:NG,loadVideo:jG,loadWebFont:FG,resolveTextureUrl:QG},Symbol.toStringTag,{value:"Module"})),D1e=[".xml",".fnt"],JG={extension:{type:Ue.LoadParser,priority:Ao.Normal},name:"loadBitmapFont",test(t){return D1e.includes(Pr.extname(t).toLowerCase())},async testParse(t){return vm.test(t)||S_.test(t)},async parse(t,e,n){const r=vm.test(t)?vm.parse(t):S_.parse(t),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let h=Pr.join(Pr.dirname(i),u);h=T_(h,i),o.push(h)}const a=await n.load(o),l=o.map(c=>a[c]);return vl.install(r,l,!0)},async load(t,e){return(await Xe.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};nt.add(JG);const N1e=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:vl,BitmapFontData:l0,BitmapText:OG,TextFormat:vm,XMLFormat:E_,XMLStringFormat:S_,autoDetectFormat:TG,loadBitmapFont:JG},Symbol.toStringTag,{value:"Module"})),u0={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===Xr.CIRC){const m=t.shape;n=m.x,r=m.y,o=a=m.radius,i=s=0}else if(t.type===Xr.ELIP){const m=t.shape;n=m.x,r=m.y,o=m.width,a=m.height,i=s=0}else{const m=t.shape,y=m.width/2,x=m.height/2;n=m.x+y,r=m.y+x,o=a=Math.max(0,Math.min(m.radius,Math.min(y,x))),i=y-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let u=0,h=l*4+(i?2:0)+2,f=h,g=c;{const m=i+o,y=s,x=n+m,b=n-m,w=r+y;if(e[u++]=x,e[u++]=w,e[--h]=w,e[--h]=b,s){const v=r-y;e[f++]=b,e[f++]=v,e[--g]=v,e[--g]=x}}for(let m=1;m<l;m++){const y=Math.PI/2*(m/l),x=i+Math.cos(y)*o,b=s+Math.sin(y)*a,w=n+x,v=n-x,E=r+b,T=r-b;e[u++]=w,e[u++]=E,e[--h]=E,e[--h]=v,e[f++]=v,e[f++]=T,e[--g]=T,e[--g]=w}{const m=i,y=s+a,x=n+m,b=n-m,w=r+y,v=r-y;e[u++]=x,e[u++]=w,e[--g]=v,e[--g]=x,i&&(e[u++]=b,e[u++]=w,e[--g]=v,e[--g]=b)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,l;if(t.type!==Xr.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;r.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(n[0],n[1]);for(let u=2;u<n.length;u+=2)r.push(n[u],n[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function RF(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const tO={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){RF(n,!1);const o=[];for(let c=0;c<r.length;c++){const u=r[c];RF(u.points,!0),o.push(n.length/2),n=n.concat(u.points)}const a=dI(n,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)i.push(n[c])}}},eH={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},tH={build(t){u0.build(t)},triangulate(t,e){u0.triangulate(t,e)}};var Bi=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Bi||{}),Qo=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(Qo||{});const iu={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},B1e=iu;class YA{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],l=o[o.length-1]-n,c=a-e,u=i-n,h=r-e,f=Math.abs(l*h-c*u);if(f<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const g=l*l+c*c,m=u*u+h*h,y=l*u+c*h,x=s*Math.sqrt(g)/f,b=s*Math.sqrt(m)/f,w=x*y/g,v=b*y/m,E=x*h+b*c,T=x*u+b*l,P=c*(b+w),R=l*(b+w),M=h*(x+v),k=u*(x+v),O=Math.atan2(R-T,P-E),F=Math.atan2(k-T,M-E);return{cx:E+e,cy:T+n,radius:s,startAngle:O,endAngle:F,anticlockwise:c*u>h*l}}static arc(e,n,r,i,s,o,a,l,c){const u=a-o,h=iu._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/n0)*40),f=u/(h*2),g=f*2,m=Math.cos(f),y=Math.sin(f),x=h-1,b=x%1/x;for(let w=0;w<=x;++w){const v=w+b*w,E=f+o+g*v,T=Math.cos(E),P=-Math.sin(E);c.push((m*T+y*P)*s+r,(m*-P+y*T)*s+i)}}}class nH{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class zw{static curveLength(e,n,r,i,s,o,a,l){let c=0,u=0,h=0,f=0,g=0,m=0,y=0,x=0,b=0,w=0,v=0,E=e,T=n;for(let P=1;P<=10;++P)u=P/10,h=u*u,f=h*u,g=1-u,m=g*g,y=m*g,x=y*e+3*m*u*r+3*g*h*s+f*a,b=y*n+3*m*u*i+3*g*h*o+f*l,w=E-x,v=T-b,E=x,T=b,c+=Math.sqrt(w*w+v*v);return c}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=iu._segmentsCount(zw.curveLength(l,c,e,n,r,i,s,o));let h=0,f=0,g=0,m=0,y=0;a.push(l,c);for(let x=1,b=0;x<=u;++x)b=x/u,h=1-b,f=h*h,g=f*h,m=b*b,y=m*b,a.push(g*l+3*f*b*e+3*h*m*r+y*s,g*c+3*f*b*n+3*h*m*i+y*o)}}function IF(t,e,n,r,i,s,o,a){const l=t-n*i,c=e-r*i,u=t+n*s,h=e+r*s;let f,g;o?(f=r,g=-n):(f=-r,g=n);const m=l+f,y=c+g,x=u+f,b=h+g;return a.push(m,y,x,b),2}function Ru(t,e,n,r,i,s,o,a){const l=n-t,c=r-e;let u=Math.atan2(l,c),h=Math.atan2(i-t,s-e);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let f=u;const g=h-u,m=Math.abs(g),y=Math.sqrt(l*l+c*c),x=(15*m*Math.sqrt(y)/Math.PI>>0)+1,b=g/x;if(f+=b,a){o.push(t,e,n,r);for(let w=1,v=f;w<x;w++,v+=b)o.push(t,e,t+Math.sin(v)*y,e+Math.cos(v)*y);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let w=1,v=f;w<x;w++,v+=b)o.push(t+Math.sin(v)*y,e+Math.cos(v)*y,t,e);o.push(i,s,t,e)}return x*2}function F1e(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new ft(r[0],r[1]),a=new ft(r[r.length-2],r[r.length-1]),l=n.type!==Xr.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const H=(o.x+a.x)*.5,U=(a.y+o.y)*.5;r.unshift(H,U),r.push(H,U)}const u=e.points,h=r.length/2;let f=r.length;const g=u.length/2,m=s.width/2,y=m*m,x=s.miterLimit*s.miterLimit;let b=r[0],w=r[1],v=r[2],E=r[3],T=0,P=0,R=-(w-E),M=b-v,k=0,O=0,F=Math.sqrt(R*R+M*M);R/=F,M/=F,R*=m,M*=m;const I=s.alignment,D=(1-I)*2,N=I*2;l||(s.cap===Qo.ROUND?f+=Ru(b-R*(D-N)*.5,w-M*(D-N)*.5,b-R*D,w-M*D,b+R*N,w+M*N,u,!0)+2:s.cap===Qo.SQUARE&&(f+=IF(b,w,R,M,D,N,!0,u))),u.push(b-R*D,w-M*D,b+R*N,w+M*N);for(let H=1;H<h-1;++H){b=r[(H-1)*2],w=r[(H-1)*2+1],v=r[H*2],E=r[H*2+1],T=r[(H+1)*2],P=r[(H+1)*2+1],R=-(w-E),M=b-v,F=Math.sqrt(R*R+M*M),R/=F,M/=F,R*=m,M*=m,k=-(E-P),O=v-T,F=Math.sqrt(k*k+O*O),k/=F,O/=F,k*=m,O*=m;const U=v-b,X=w-E,Y=v-T,Z=P-E,se=U*Y+X*Z,xe=X*Y-Z*U,de=xe<0;if(Math.abs(xe)<.001*Math.abs(se)){u.push(v-R*D,E-M*D,v+R*N,E+M*N),se>=0&&(s.join===Bi.ROUND?f+=Ru(v,E,v-R*D,E-M*D,v-k*D,E-O*D,u,!1)+4:f+=2,u.push(v-k*N,E-O*N,v+k*D,E+O*D));continue}const Me=(-R+b)*(-M+E)-(-R+v)*(-M+w),he=(-k+T)*(-O+E)-(-k+v)*(-O+P),Te=(U*he-Y*Me)/xe,le=(Z*Me-X*he)/xe,ae=(Te-v)*(Te-v)+(le-E)*(le-E),me=v+(Te-v)*D,oe=E+(le-E)*D,_e=v-(Te-v)*N,pe=E-(le-E)*N,Pe=Math.min(U*U+X*X,Y*Y+Z*Z),we=de?D:N,Ye=Pe+we*we*y,ke=ae<=Ye;let Oe=s.join;if(Oe===Bi.MITER&&ae/y>x&&(Oe=Bi.BEVEL),ke)switch(Oe){case Bi.MITER:{u.push(me,oe,_e,pe);break}case Bi.BEVEL:{de?u.push(me,oe,v+R*N,E+M*N,me,oe,v+k*N,E+O*N):u.push(v-R*D,E-M*D,_e,pe,v-k*D,E-O*D,_e,pe),f+=2;break}case Bi.ROUND:{de?(u.push(me,oe,v+R*N,E+M*N),f+=Ru(v,E,v+R*N,E+M*N,v+k*N,E+O*N,u,!0)+4,u.push(me,oe,v+k*N,E+O*N)):(u.push(v-R*D,E-M*D,_e,pe),f+=Ru(v,E,v-R*D,E-M*D,v-k*D,E-O*D,u,!1)+4,u.push(v-k*D,E-O*D,_e,pe));break}}else{switch(u.push(v-R*D,E-M*D,v+R*N,E+M*N),Oe){case Bi.MITER:{de?u.push(_e,pe,_e,pe):u.push(me,oe,me,oe),f+=2;break}case Bi.ROUND:{de?f+=Ru(v,E,v+R*N,E+M*N,v+k*N,E+O*N,u,!0)+2:f+=Ru(v,E,v-R*D,E-M*D,v-k*D,E-O*D,u,!1)+2;break}}u.push(v-k*D,E-O*D,v+k*N,E+O*N),f+=2}}b=r[(h-2)*2],w=r[(h-2)*2+1],v=r[(h-1)*2],E=r[(h-1)*2+1],R=-(w-E),M=b-v,F=Math.sqrt(R*R+M*M),R/=F,M/=F,R*=m,M*=m,u.push(v-R*D,E-M*D,v+R*N,E+M*N),l||(s.cap===Qo.ROUND?f+=Ru(v-R*(D-N)*.5,E-M*(D-N)*.5,v-R*D,E-M*D,v+R*N,E+M*N,u,!1)+2:s.cap===Qo.SQUARE&&(f+=IF(v,E,R,M,D,N,!1,u)));const j=e.indices,W=iu.epsilon*iu.epsilon;for(let H=g;H<f+g-2;++H)b=u[H*2],w=u[H*2+1],v=u[(H+1)*2],E=u[(H+1)*2+1],T=u[(H+2)*2],P=u[(H+2)*2+1],!(Math.abs(b*(E-P)+v*(P-w)+T*(w-E))<W)&&j.push(H,H+1,H+2)}function z1e(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==Xr.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[n*2],i[n*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function qA(t,e){t.lineStyle.native?z1e(t,e):F1e(t,e)}class Uw{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,c=2*r-2*e,u=2*i-2*n,h=4*(a*a+l*l),f=4*(a*c+l*u),g=c*c+u*u,m=2*Math.sqrt(h+f+g),y=Math.sqrt(h),x=2*h*y,b=2*Math.sqrt(g),w=f/y;return(x*m+y*f*(m-b)+(4*g*h-f*f)*Math.log((2*y+w+m)/(w+b)))/(4*x)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=iu._segmentsCount(Uw.curveLength(o,a,e,n,r,i));let c=0,u=0;for(let h=1;h<=l;++h){const f=h/l;c=o+(e-o)*f,u=a+(n-a)*f,s.push(c+(e+(r-e)*f-c)*f,u+(n+(i-n)*f-u)*f)}}}const ob={[Xr.POLY]:tO,[Xr.CIRC]:u0,[Xr.ELIP]:u0,[Xr.RECT]:eH,[Xr.RREC]:tH},KA=[],Ug=[];class h0{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new h0(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const vd=new ft,rH=class iH extends RM{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new a0,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Ug.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n.reset(),KA.push(n)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,n=null,r=null,i=null){const s=new h0(e,n,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,n=null){if(!this.graphicsData.length)return null;const r=new h0(e,null,null,n),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const n=this.graphicsData;for(let r=0;r<n.length;++r){const i=n[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,vd):vd.copyFrom(e),i.shape.contains(vd.x,vd.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(vd.x,vd.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,n=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;const c=n[l],u=c.fillStyle,h=c.lineStyle;ob[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||h.visible)&&this.processHoles(c.holes);for(let f=0;f<2;f++){const g=f===0?u:h;if(!g.visible)continue;const m=g.texture.baseTexture,y=this.indices.length,x=this.points.length/2;m.wrapMode=qa.REPEAT,f===0?this.processFill(c):this.processLine(c);const b=this.points.length/2-x;b!==0&&(r&&!this._compareStyles(i,g)&&(r.end(y,x),r=null),r||(r=KA.pop()||new nH,r.begin(g,y,x),this.batches.push(r),i=g),this.addUvs(this.points,e,g.texture,x,b,g.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,n=this.graphicsData.length;e<n;e++){const r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let n=0,r=e.length;n<r;n++){const i=e[n];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<iH.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Rt._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Ug.push(this.drawCalls[h]);this.drawCalls.length=0;const n=this.colors,r=this.textureIds;let i=Ug.pop();i||(i=new b_,i.texArray=new __),i.texArray.count=0,i.start=0,i.size=0,i.type=mo.TRIANGLES;let s=0,o=null,a=0,l=!1,c=mo.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const f=this.batches[h],g=8,m=f.style,y=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,c=l?mo.LINES:mo.TRIANGLES,o=null,s=g,e++),o!==y&&(o=y,y._batchEnabled!==e&&(s===g&&(e++,s=0,i.size>0&&(i=Ug.pop(),i||(i=new b_,i.texArray=new __),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),y.touched=1,y._batchEnabled=e,y._batchLocation=s,y.wrapMode=qa.REPEAT,i.texArray.elements[i.texArray.count++]=y,s++)),i.size+=f.size,u+=f.size,a=y._batchLocation,this.addColors(n,m.color,m.alpha,f.attribSize,f.attribStart),this.addTextureIds(r,a,f.attribSize,f.attribStart)}Rt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,n=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=n[c*2],o[l++]=n[c*2+1],a[l++]=r[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?tO.triangulate(e,this):ob[e.type].triangulate(e,this)}processLine(e){qA(e,this);for(let n=0;n<e.holes.length;n++)qA(e.holes[n],this)}processHoles(e){for(let n=0;n<e.length;n++){const r=e[n];ob[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,n){for(let r=0;r<e.length/2;r++){const i=e[r*2],s=e[r*2+1];e[r*2]=n.a*i+n.c*s+n.tx,e[r*2+1]=n.b*i+n.d*s+n.ty}}addColors(e,n,r,i,s=0){const o=sn.shared.setValue(n).toLittleEndianNumber(),a=sn.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,n,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=n}addUvs(e,n,r,i,s,o=null){let a=0;const l=n.length,c=r.frame;for(;a<s;){let h=e[(i+a)*2],f=e[(i+a)*2+1];if(o){const g=o.a*h+o.c*f+o.tx;f=o.b*h+o.d*f+o.ty,h=g}a++,n.push(h/c.width,f/c.height)}const u=r.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(n,r,l,s)}adjustUvs(e,n,r,i){const s=n.baseTexture,o=1e-6,a=r+i*2,l=n.frame,c=l.width/s.width,u=l.height/s.height;let h=l.x/l.width,f=l.y/l.height,g=Math.floor(e[r]+o),m=Math.floor(e[r+1]+o);for(let y=r+2;y<a;y+=2)g=Math.min(g,Math.floor(e[y]+o)),m=Math.min(m,Math.floor(e[y+1]+o));h-=g,f-=m;for(let y=r;y<a;y+=2)e[y]=(e[y]+h)*c,e[y+1]=(e[y+1]+f)*u}};rH.BATCHABLE_SIZE=100;let sH=rH;class ry{constructor(){this.color=16777215,this.alpha=1,this.texture=yt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new ry;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=yt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class $w extends ry{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Qo.BUTT,this.join=Bi.MITER,this.miterLimit=10}clone(){const e=new $w;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Qo.BUTT,this.join=Bi.MITER,this.miterLimit=10}}const UT={},ZA=class ab extends hi{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ry,this._lineStyle=new $w,this._matrix=null,this._holeMode=!1,this.state=ha.for2d(),this._geometry=e||new sH,this._geometry.refCount++,this._transformID=-1,this._tintColor=new sn(16777215),this.blendMode=mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ab(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,n=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:n,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const n={width:0,texture:yt.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Qo.BUTT,join:Bi.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Wc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new Wc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this}lineTo(e,n){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==n)&&r.push(e,n),this}_initCurve(e=0,n=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)}quadraticCurveTo(e,n,r,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Uw.curveTo(e,n,r,i,s),this}bezierCurveTo(e,n,r,i,s,o){return this._initCurve(),zw.curveTo(e,n,r,i,s,o,this.currentPath.points),this}arcTo(e,n,r,i,s){this._initCurve(e,n);const o=this.currentPath.points,a=YA.curveTo(e,n,r,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:h,endAngle:f,anticlockwise:g}=a;this.arc(l,c,u,h,f,g)}return this}arc(e,n,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=n0:o&&i<=s&&(i+=n0),s-i===0)return this;const a=e+Math.cos(i)*r,l=n+Math.sin(i)*r,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const h=Math.abs(u[u.length-2]-a),f=Math.abs(u[u.length-1]-l);h<c&&f<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return YA.arc(a,l,e,n,r,i,s,o,u),this}beginFill(e=0,n){return this.beginTextureFill({texture:yt.WHITE,color:e,alpha:n})}normalizeColor(e){const n=sn.shared.setValue(e.color??0);e.color=n.toNumber(),e.alpha??(e.alpha=n.alpha)}beginTextureFill(e){const n={texture:yt.WHITE,color:16777215,matrix:null};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,n,r,i){return this.drawShape(new xt(e,n,r,i))}drawRoundedRect(e,n,r,i,s){return this.drawShape(new Z0(e,n,r,i,s))}drawCircle(e,n,r){return this.drawShape(new q0(e,n,r))}drawEllipse(e,n,r,i){return this.drawShape(new K0(e,n,r,i))}drawPolygon(...e){let n,r=!0;const i=e[0];i.points?(r=i.closeStroke,n=i.points):Array.isArray(e[0])?n=e[0]:n=e;const s=new Wc(n);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Xr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,n=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:n,indices:c,uvs:l,_batchRGB:sn.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let n=0,r=this.batches.length;n<r;n++){const i=this.batches[n];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const n=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=n.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,sn.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(n),e.geometry.bind(r,n),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,n){const{texArray:r,type:i,size:s,start:o}=n,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let n=this.shader;const r=this.pluginName;if(!n){if(!UT[r]){const{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new cr,default:_o.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;UT[r]=new Il(a,o)}n=UT[r]}return n}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:n,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,n,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,ab._TEMP_POINT),this._geometry.containsPoint(ab._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n._tintRGB=sn.shared.setValue(this._tintColor).multiply(n._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this._geometry.points,u=this.vertexData;let h=0;for(let f=0;f<c.length;f+=2){const g=c[f],m=c[f+1];u[h++]=r*g+s*m+a,u[h++]=o*m+i*g+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};ZA.curves=iu,ZA._TEMP_POINT=new ft;let vf=ZA;const U1e={buildPoly:tO,buildCircle:u0,buildRectangle:eH,buildRoundedRectangle:tH,buildLine:qA,ArcUtils:YA,BezierUtils:zw,QuadraticUtils:Uw,BatchPart:nH,FILL_COMMANDS:ob,BATCH_POOL:KA,DRAW_CALL_POOL:Ug},$1e=Object.freeze(Object.defineProperty({__proto__:null,FillStyle:ry,GRAPHICS_CURVES:B1e,Graphics:vf,GraphicsData:h0,GraphicsGeometry:sH,LINE_CAP:Qo,LINE_JOIN:Bi,LineStyle:$w,curves:iu,graphicsUtils:U1e},Symbol.toStringTag,{value:"Module"}));class oH extends ty{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let u=0;u<e;u++){const h=u%this.segWidth,f=u/this.segWidth|0;n.push(h*a,f*l),r.push(h/s,f/o)}const c=s*o;for(let u=0;u<c;u++){const h=u%s,f=u/s|0,g=f*this.segWidth+h,m=f*this.segWidth+h+1,y=(f+1)*this.segWidth+h,x=(f+1)*this.segWidth+h+1;i.push(g,m,y,m,x,y)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class aH extends ty{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const c=this._width*this.textureScale,u=e.length;for(let f=0;f<u;f++){const g=f*4;if(this.textureScale>0){const m=l.x-e[f].x,y=l.y-e[f].y,x=Math.sqrt(m*m+y*y);l=e[f],a+=x/c}else a=f/(u-1);s[g]=a,s[g+1]=0,s[g+2]=a,s[g+3]=1}let h=0;for(let f=0;f<u-1;f++){const g=f*2;o[h++]=g,o[h++]=g+1,o[h++]=g+2,o[h++]=g+2,o[h++]=g+1,o[h++]=g+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<a;c++){const u=e[c],h=c*4;c<e.length-1?r=e[c+1]:r=u,s=-(r.x-n.x),i=r.y-n.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=l,s*=l),o[h]=u.x+i,o[h+1]=u.y+s,o[h+2]=u.x-i,o[h+3]=u.y-s,n=u}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class lH extends Hf{constructor(e,n,r){const i=new oH(e.width,e.height,n,r),s=new Wf(yt.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const o1=10;class cH extends lH{constructor(e,n,r,i,s){var o,a,l,c;super(yt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??o1,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??o1,this._topHeight=r??((l=e.defaultBorders)==null?void 0:l.top)??o1,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??o1,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class uH extends Hf{constructor(e=yt.EMPTY,n,r,i,s){const o=new ty(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new Wf(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class hH extends Hf{constructor(e,n,r=0){const i=new aH(e.height,n,r),s=new Wf(e);r>0&&(e.baseTexture.wrapMode=qa.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}const j1e=Object.freeze(Object.defineProperty({__proto__:null,NineSlicePlane:cH,PlaneGeometry:oH,RopeGeometry:aH,SimpleMesh:uH,SimplePlane:lH,SimpleRope:hH},Symbol.toStringTag,{value:"Module"}));class dH extends hi{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=mt.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new sn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class MF{constructor(e,n,r){this.geometry=new yp,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||lt.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new wr(MV(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new wr(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new wr(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===lt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===lt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===lt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===lt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var V1e=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,G1e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class nO extends J0{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new cr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:lt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Il.from(G1e,V1e,{}),this.state=ha.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=CM(e.blendMode,c),s.state.set(this.state);const u=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=sn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let g=0,m=0;g<o;g+=i,m+=1){let y=o-g;y>i&&(y=i),m>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[m];x.uploadDynamic(n,g,y);const b=e._bufferUpdateIDs[m]||0;f=f||x._updateID<b,f&&(x._updateID=e._updateID,x.uploadStatic(n,g,y)),s.geometry.bind(x.geometry),u.drawElements(u.TRIANGLES,y*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new MF(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new MF(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,c=0,u=0;for(let h=0;h<r;++h){const f=e[n+h],g=f._texture,m=f.scale.x,y=f.scale.y,x=g.trim,b=g.orig;x?(l=x.x-f.anchor.x*b.width,a=l+x.width,u=x.y-f.anchor.y*b.height,c=u+x.height):(a=b.width*(1-f.anchor.x),l=b.width*-f.anchor.x,c=b.height*(1-f.anchor.y),u=b.height*-f.anchor.y),i[o]=l*m,i[o+1]=u*y,i[o+s]=a*m,i[o+s+1]=u*y,i[o+s*2]=a*m,i[o+s*2+1]=c*y,i[o+s*3]=l*m,i[o+s*3+1]=c*y,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],c=sn.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}nO.extension={name:"particle",type:Ue.RendererPlugin};nt.add(nO);const H1e=Object.freeze(Object.defineProperty({__proto__:null,ParticleContainer:dH,ParticleRenderer:nO},Symbol.toStringTag,{value:"Module"}));class Xf extends da{constructor(e,n=!0){super(e[0]instanceof yt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Tr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Tr.shared.add(this.update,this,Fl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(yt.from(e[r]));return new Xf(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(yt.from(e[r]));return new Xf(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof yt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Tr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Tr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const W1e=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Xf},Symbol.toStringTag,{value:"Module"})),gg=new ft;class jw extends da{constructor(e,n=100,r=100){super(e),this.tileTransform=new Q0,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new Nw(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,gg);const n=this._width,r=this._height,i=-n*this.anchor._x;if(gg.x>=i&&gg.x<i+n){const s=-r*this.anchor._y;if(gg.y>=s&&gg.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof yt?e:yt.from(e,n);return new jw(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var X1e=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Y1e=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,q1e=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,OF=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,K1e=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const a1=new cr;class rO extends J0{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new kM,this.state=ha.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Il.from(OF,K1e,n),this.shader=e.context.webGLVersion>1?Il.from(Y1e,X1e,n):Il.from(OF,q1e,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,h=e.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[n.CONTEXT_UID]?f=l.wrapMode!==qa.CLAMP:l.wrapMode===qa.CLAMP&&(l.wrapMode=qa.REPEAT));const g=f?this.simpleShader:this.shader,m=a.width,y=a.height,x=e._width,b=e._height;a1.set(u.a*m/x,u.b*m/b,u.c*y/x,u.d*y/b,u.tx/x,u.ty/b),a1.invert(),f?a1.prepend(h.mapCoord):(g.uniforms.uMapCoord=h.mapCoord.toArray(!0),g.uniforms.uClampFrame=h.uClampFrame,g.uniforms.uClampOffset=h.uClampOffset),g.uniforms.uTransform=a1.toArray(!0),g.uniforms.uColor=sn.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,n.shader.bind(g),n.geometry.bind(r),this.state.blendMode=CM(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}rO.extension={name:"tilingSprite",type:Ue.RendererPlugin};nt.add(rO);const Z1e=Object.freeze(Object.defineProperty({__proto__:null,TilingSprite:jw,TilingSpriteRenderer:rO},Symbol.toStringTag,{value:"Module"})),fH=class QA{constructor(e){this.stage=new hi,e=Object.assign({forceCanvas:!1},e),this.renderer=gG(e),QA._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,n){const r=QA._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};fH._plugins=[];let iy=fH;nt.handleByList(Ue.Application,iy._plugins);class iO{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}iO.extension=Ue.Application;nt.add(iO);const Q1e=Object.freeze(Object.defineProperty({__proto__:null,Application:iy,ResizePlugin:iO},Symbol.toStringTag,{value:"Module"}));function Ds(t){return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(t)}function pH(t){var e=function(n,r){if(Ds(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(Ds(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Ds(e)==="symbol"?e:String(e)}function pr(t,e,n){return(e=pH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $T(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zl(t){return function(e){if(Array.isArray(e))return $T(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return $T(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$T(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lr(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var J1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ebe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tbe=function(t){return t==null};function $g(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=zl(t);else{if(t===null||Ds(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!tbe(n)&&!isNaN(n)}).map(Number)}function LF(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jT(t){return t instanceof ft||t instanceof Zo}var P_=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function VT(t,e,n){if(jT(t[e])&&jT(n))t[e].copyFrom(n);else if(jT(t[e])){var r=$g(n);lr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),Ds(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var bd,gH=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},mH=function(t){return function(){return!t.apply(void 0,arguments)}},JA="children",nbe=(pr(bd={},JA,!0),pr(bd,"parent",!0),pr(bd,"worldAlpha",!0),pr(bd,"worldTransform",!0),pr(bd,"worldVisible",!0),bd),eR={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ja=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var l,c;a==null||(l=a.__reactpixi)===null||l===void 0||(c=l.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(n.hasOwnProperty(a))return lr(l.typeofs.some(function(c){return Ds(n[a])===c})||l.instanceofs.some(function(c){return n[a]instanceof c}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return lr(n.texture instanceof yt,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,yt]});lr(!!s,"".concat(t," could not get texture from props"));var o=yt.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},rbe=mH(gH([].concat(zl(Object.keys(nbe)),zl(P_))));function el(t,e,n){var r=!1;if(lr(Nn.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Ds(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<P_.length;o++){var a=P_[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var l=Object.keys(n||{});if(n.overwriteProps){for(var c=0;c<l.length;c++){var u=l[c];e[u]!==n[u]&&(r=!0,VT(t,u,n[u]))}return r}for(var h=l.filter(rbe),f=0;f<h.length;f++){var g=h[f],m=n[g];n[g]!==e[g]&&(r=!0),m!==void 0?VT(t,g,m):g in eR?(console.warn("setting default value: ".concat(g,", from: ").concat(t[g]," to: ").concat(m," for"),t),r=!0,VT(t,g,eR[g])):console.warn("ignoring prop: ".concat(g,", from ").concat(t[g]," to ").concat(m," for"),t)}return r}var ibe=function(t,e){var n=e.text,r=e.style;return new OG(n,r)},sbe=function(){return new hi};function pu(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},h=Object.keys(o);for(c=0;c<h.length;c++)l=h[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var obe=["draw","geometry"],abe=function(t,e){var n=e.geometry;lr(!n||n instanceof vf,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new vf(n.geometry):new vf;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=el(i,s,pu(o,obe));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(r,r)),l},r},lbe=["image","texture"],cbe=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,c=l===void 0?10:l,u=Ja("NineSlicePlane",t,e),h=new cH(u,r,s,a,c);return h.applyProps=function(f,g,m){var y=m.image,x=m.texture,b=el(f,g,pu(m,lbe));return(y||x)&&(x!==g.texture&&(b=!0),f.texture=Ja("NineSlicePlane",t,m)),b},h};function kF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kF(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ube=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=l1(l1({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=l1(l1({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),u=new dH(r,l,s,a);return u.willUnmount=function(h,f,g){h.destroy(c)},u},hbe=["image","texture"],dbe=function(t,e){var n=new da(Ja("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,l=el(r,i,pu(s,hbe));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),r.texture=Ja("Sprite",t,s)),l},n},fbe=["textures","isPlaying","initialFrame","images"],pbe=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(c){return c.map(function(u){return lr(u instanceof yt||(u==null?void 0:u.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),u})},l=r?Xf.fromImages(r):new Xf(a(n));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(c,u,h){var f=h.textures,g=h.isPlaying,m=h.initialFrame,y=h.images,x=el(c,u,pu(h,fbe));if(y&&u.images!==y){for(var b=[],w=0;w<y.length;++w)b.push(yt.from(y[w]));c.textures=b,x=!0}if(f&&u.textures!==f&&(c.textures=a(f),x=!0),g!==u.isPlaying||m!==u.initialFrame){var v=typeof m=="number"?m:l.currentFrame||0;l[g?"gotoAndPlay":"gotoAndStop"](v),x=!0}return x},l},gbe=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new Fw(r,s);return o?(a.updateText(),new da(a.texture)):a},mbe=["tileScale","tilePosition","image","texture"],ybe=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=Ja("TilingSprite",t,e),a=new jw(o,r,s);return a.applyProps=function(l,c,u){var h=u.tileScale,f=u.tilePosition,g=u.image,m=u.texture,y=el(l,c,pu(u,mbe));if(f){var x,b=$g(f);(x=l.tilePosition).set.apply(x,zl(b)),y=!LF($g(c.tilePosition),b)||y}if(h){var w,v=$g(h);(w=l.tileScale).set.apply(w,zl(v)),y=!LF($g(c.tileScale),v)||y}return(g||m)&&(m!==c.texture&&(y=!0),l.texture=Ja("Sprite",t,u)),y},a},vbe=["image","texture"],bbe=function(t,e){var n=Ja("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?mo.TRIANGLES:o,l=new uH(n,r,i,s,a);return l.applyProps=function(c,u,h){var f=h.image,g=h.texture,m=el(c,u,pu(h,vbe));return(f||g)&&(g!==u.texture&&(m=!0),c.texture=Ja("Mesh",t,h)),m},l},_be=["image","texture"],xbe=function(t,e){var n=Ja("SimpleRope",t,e),r=e.points,i=new hH(n,r);return i.applyProps=function(s,o,a){var l=a.image,c=a.texture,u=pu(a,_be);lr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var h=el(s,o,u);return(l||c)&&(c!==o.texture&&(h=!0),s.texture=Ja("SimpleRope",t,a)),h},i},wbe=Object.freeze({__proto__:null,BitmapText:ibe,Container:sbe,Graphics:abe,NineSlicePlane:cbe,ParticleContainer:ube,Sprite:dbe,Text:gbe,TilingSprite:ybe,SimpleMesh:bbe,SimpleRope:xbe,AnimatedSprite:pbe});function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cs={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},Ebe=Object.keys(cs).reduce(function(t,e){return NF(NF({},t),{},pr({},e,wbe[e]))},{}),yH={};function Sbe(t,e){return lr(!!t,"Expect type to be defined, got `%s`",t),lr(!cs[t],"Component `%s` could not be created, already exists in default components.",t),yH[t]=e,t}var BF,FF,zF,UF,tR={},nR={},Tbe={get exports(){return nR},set exports(t){nR=t}},$F={};function Pbe(){return FF||(FF=1,Tbe.exports=(BF||(BF=1,function(t){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var Z=Y-1>>>1,se=U[Z];if(!(0<i(se,X)))break e;U[Z]=X,U[Y]=se,Y=Z}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var Z=0,se=U.length,xe=se>>>1;Z<xe;){var de=2*(Z+1)-1,Me=U[de],he=de+1,Te=U[he];if(0>i(Me,Y))he<se&&0>i(Te,Me)?(U[Z]=Te,U[he]=Y,Z=he):(U[Z]=Me,U[de]=Y,Z=de);else{if(!(he<se&&0>i(Te,Y)))break e;U[Z]=Te,U[he]=Y,Z=he}}}return X}function i(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function v(U){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else{if(!(X.startTime<=U))break;r(c),X.sortIndex=X.expirationTime,e(l,X)}X=n(c)}}function E(U){if(y=!1,v(U),!m)if(n(l)!==null)m=!0,W(T);else{var X=n(c);X!==null&&H(E,X.startTime-U)}}function T(U,X){m=!1,y&&(y=!1,b(k),k=-1),g=!0;var Y=f;try{for(v(X),h=n(l);h!==null&&(!(h.expirationTime>X)||U&&!I());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var se=Z(h.expirationTime<=X);X=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),v(X)}else r(l);h=n(l)}if(h!==null)var xe=!0;else{var de=n(c);de!==null&&H(E,de.startTime-X),xe=!1}return xe}finally{h=null,f=Y,g=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var P,R=!1,M=null,k=-1,O=5,F=-1;function I(){return!(t.unstable_now()-F<O)}function D(){if(M!==null){var U=t.unstable_now();F=U;var X=!0;try{X=M(!0,U)}finally{X?P():(R=!1,M=null)}}else R=!1}if(typeof w=="function")P=function(){w(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=D,P=function(){j.postMessage(null)}}else P=function(){x(D,0)};function W(U){M=U,R||(R=!0,P())}function H(U,X){k=x(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,W(T))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var Y=f;f=X;try{return U()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=f;f=U;try{return X()}finally{f=Y}},t.unstable_scheduleCallback=function(U,X,Y){var Z=t.unstable_now();switch(Y=typeof Y=="object"&&Y!==null&&typeof(Y=Y.delay)=="number"&&0<Y?Z+Y:Z,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:se=Y+se,sortIndex:-1},Y>Z?(U.sortIndex=Y,e(c,U),n(l)===null&&U===n(c)&&(y?(b(k),k=-1):y=!0,H(E,Y-Z))):(U.sortIndex=se,e(l,U),m||g||(m=!0,W(T))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var X=f;return function(){var Y=f;f=X;try{return U.apply(this,arguments)}finally{f=Y}}}}($F)),$F)),nR}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Cbe(){return UF||(UF=1,zF=function(t){var e={},n=An,r=Pbe(),i=Object.assign;function s(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,_=1;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),E=Symbol.iterator;function T(d){return d===null||typeof d!="object"?null:typeof(d=E&&d[E]||d["@@iterator"])=="function"?d:null}function P(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case l:return"Portal";case h:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case f:return(d._context.displayName||"Context")+".Provider";case m:var p=d.render;return(d=d.displayName)||(d=(d=p.displayName||p.name||"")!==""?"ForwardRef("+d+")":"ForwardRef"),d;case b:return(p=d.displayName||null)!==null?p:P(d.type)||"Memo";case w:p=d._payload,d=d._init;try{return P(d(p))}catch{}}return null}function R(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=(d=p.render).displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(p);case 8:return p===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function M(d){var p=d,_=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do 4098&(p=d).flags&&(_=p.return),d=p.return;while(d)}return p.tag===3?_:null}function k(d){if(M(d)!==d)throw Error(s(188))}function O(d){var p=d.alternate;if(!p){if((p=M(d))===null)throw Error(s(188));return p!==d?null:d}for(var _=d,S=p;;){var A=_.return;if(A===null)break;var L=A.alternate;if(L===null){if((S=A.return)!==null){_=S;continue}break}if(A.child===L.child){for(L=A.child;L;){if(L===_)return k(A),d;if(L===S)return k(A),p;L=L.sibling}throw Error(s(188))}if(_.return!==S.return)_=A,S=L;else{for(var G=!1,J=A.child;J;){if(J===_){G=!0,_=A,S=L;break}if(J===S){G=!0,S=A,_=L;break}J=J.sibling}if(!G){for(J=L.child;J;){if(J===_){G=!0,_=L,S=A;break}if(J===S){G=!0,S=L,_=A;break}J=J.sibling}if(!G)throw Error(s(189))}}if(_.alternate!==S)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?d:p}function F(d){return(d=O(d))!==null?I(d):null}function I(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=I(d);if(p!==null)return p;d=d.sibling}return null}function D(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=D(d);if(p!==null)return p}d=d.sibling}return null}var N,j=Array.isArray,W=t.getPublicInstance,H=t.getRootHostContext,U=t.getChildHostContext,X=t.prepareForCommit,Y=t.resetAfterCommit,Z=t.createInstance,se=t.appendInitialChild,xe=t.finalizeInitialChildren,de=t.prepareUpdate,Me=t.shouldSetTextContent,he=t.createTextInstance,Te=t.scheduleTimeout,le=t.cancelTimeout,ae=t.noTimeout,me=t.isPrimaryRenderer,oe=t.supportsMutation,_e=t.supportsPersistence,pe=t.supportsHydration,Pe=t.getInstanceFromNode,we=t.preparePortalMount,Ye=t.getCurrentEventPriority,ke=t.detachDeletedInstance,Oe=t.supportsMicrotasks,rt=t.scheduleMicrotask,qe=t.supportsTestSelectors,Ge=t.findFiberRoot,fn=t.getBoundingRect,Mt=t.getTextContent,pt=t.isHiddenSubtree,Se=t.matchAccessibilityRole,Ne=t.setFocusIfFocusable,Ke=t.setupIntersectionObserver,je=t.appendChild,Le=t.appendChildToContainer,kt=t.commitTextUpdate,wt=t.commitMount,Ot=t.commitUpdate,Be=t.insertBefore,Tt=t.insertInContainerBefore,Gt=t.removeChild,on=t.removeChildFromContainer,Dr=t.resetTextContent,Gi=t.hideInstance,Io=t.hideTextInstance,fa=t.unhideInstance,Ws=t.unhideTextInstance,us=t.clearContainer,ee=t.cloneInstance,ne=t.createContainerChildSet,ce=t.appendChildToContainerChildSet,De=t.finalizeContainerChildren,Ve=t.replaceContainerChildren,vt=t.cloneHiddenInstance,ut=t.cloneHiddenTextInstance,ht=t.canHydrateInstance,Je=t.canHydrateTextInstance,Lt=t.canHydrateSuspenseInstance,an=t.isSuspenseInstancePending,gt=t.isSuspenseInstanceFallback,Pt=t.getSuspenseInstanceFallbackErrorDetails,ln=t.registerSuspenseInstanceRetry,Bn=t.getNextHydratableSibling,tn=t.getFirstHydratableChild,Cr=t.getFirstHydratableChildWithinContainer,hs=t.getFirstHydratableChildWithinSuspenseInstance,Zt=t.hydrateInstance,Jt=t.hydrateTextInstance,vr=t.hydrateSuspenseInstance,br=t.getNextHydratableInstanceAfterSuspenseInstance,Wn=t.commitHydratedContainer,ds=t.commitHydratedSuspenseInstance,Ii=t.clearSuspenseBoundary,Et=t.clearSuspenseBoundaryFromContainer,At=t.shouldDeleteUnhydratedTailInstances,bn=t.didNotMatchHydratedContainerTextInstance,Kr=t.didNotMatchHydratedTextInstance;function Xn(d){if(N===void 0)try{throw Error()}catch(_){var p=_.stack.trim().match(/\n( *(at )?)/);N=p&&p[1]||""}return`
`+N+d}var Xs=!1;function Ys(d,p){if(!d||Xs)return"";Xs=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(fe){var S=fe}Reflect.construct(d,[],p)}else{try{p.call()}catch(fe){S=fe}d.call(p.prototype)}else{try{throw Error()}catch(fe){S=fe}d()}}catch(fe){if(fe&&S&&typeof fe.stack=="string"){for(var A=fe.stack.split(`
`),L=S.stack.split(`
`),G=A.length-1,J=L.length-1;1<=G&&0<=J&&A[G]!==L[J];)J--;for(;1<=G&&0<=J;G--,J--)if(A[G]!==L[J]){if(G!==1||J!==1)do if(G--,0>--J||A[G]!==L[J]){var re=`
`+A[G].replace(" at new "," at ");return d.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",d.displayName)),re}while(1<=G&&0<=J);break}}}finally{Xs=!1,Error.prepareStackTrace=_}return(d=d?d.displayName||d.name:"")?Xn(d):""}var Mo=Object.prototype.hasOwnProperty,ll=[],Zr=-1;function Nr(d){return{current:d}}function Sn(d){0>Zr||(d.current=ll[Zr],ll[Zr]=null,Zr--)}function mn(d,p){Zr++,ll[Zr]=d.current,d.current=p}var fs={},_n=Nr(fs),Ar=Nr(!1),Oo=fs;function pa(d,p){var _=d.type.contextTypes;if(!_)return fs;var S=d.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===p)return S.__reactInternalMemoizedMaskedChildContext;var A,L={};for(A in _)L[A]=p[A];return S&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=L),L}function Qr(d){return(d=d.childContextTypes)!=null}function gu(){Sn(Ar),Sn(_n)}function mu(d,p,_){if(_n.current!==fs)throw Error(s(168));mn(_n,p),mn(Ar,_)}function qs(d,p,_){var S=d.stateNode;if(p=p.childContextTypes,typeof S.getChildContext!="function")return _;for(var A in S=S.getChildContext())if(!(A in p))throw Error(s(108,R(d)||"Unknown",A));return i({},_,S)}function jh(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||fs,Oo=_n.current,mn(_n,d),mn(Ar,Ar.current),!0}function xp(d,p,_){var S=d.stateNode;if(!S)throw Error(s(169));_?(d=qs(d,p,Oo),S.__reactInternalMemoizedMergedChildContext=d,Sn(Ar),Sn(_n),mn(_n,d)):Sn(Ar),mn(Ar,_)}var Mi=Math.clz32?Math.clz32:function(d){return(d>>>=0)===0?32:31-(my(d)/Jw|0)|0},my=Math.log,Jw=Math.LN2,wp=64,z=4194304;function V(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&d;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&d;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function q(d,p){var _=d.pendingLanes;if(_===0)return 0;var S=0,A=d.suspendedLanes,L=d.pingedLanes,G=268435455&_;if(G!==0){var J=G&~A;J!==0?S=V(J):(L&=G)!==0&&(S=V(L))}else(G=_&~A)!==0?S=V(G):L!==0&&(S=V(L));if(S===0)return 0;if(p!==0&&p!==S&&!(p&A)&&((A=S&-S)>=(L=p&-p)||A===16&&4194240&L))return p;if(4&S&&(S|=16&_),(p=d.entangledLanes)!==0)for(d=d.entanglements,p&=S;0<p;)A=1<<(_=31-Mi(p)),S|=d[_],p&=~A;return S}function ie(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;default:return-1}}function Ee(d){return(d=-1073741825&d.pendingLanes)!==0?d:1073741824&d?1073741824:0}function He(){var d=wp;return!(4194240&(wp<<=1))&&(wp=64),d}function Dt(d){for(var p=[],_=0;31>_;_++)p.push(d);return p}function Fn(d,p,_){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),(d=d.eventTimes)[p=31-Mi(p)]=_}function hr(d,p){var _=d.entangledLanes|=p;for(d=d.entanglements;_;){var S=31-Mi(_),A=1<<S;A&p|d[S]&p&&(d[S]|=p),_&=~A}}var bt=0;function ps(d){return 1<(d&=-d)?4<d?268435455&d?16:536870912:4:1}var eE=r.unstable_scheduleCallback,YO=r.unstable_cancelCallback,u7=r.unstable_shouldYield,h7=r.unstable_requestPaint,Br=r.unstable_now,tE=r.unstable_ImmediatePriority,d7=r.unstable_UserBlockingPriority,qO=r.unstable_NormalPriority,f7=r.unstable_IdlePriority,yy=null,ga=null,Lo=typeof Object.is=="function"?Object.is:function(d,p){return d===p&&(d!==0||1/d==1/p)||d!=d&&p!=p},cl=null,vy=!1,nE=!1;function KO(d){cl===null?cl=[d]:cl.push(d)}function ma(){if(!nE&&cl!==null){nE=!0;var d=0,p=bt;try{var _=cl;for(bt=1;d<_.length;d++){var S=_[d];do S=S(!0);while(S!==null)}cl=null,vy=!1}catch(A){throw cl!==null&&(cl=cl.slice(d+1)),eE(tE,ma),A}finally{bt=p,nE=!1}}return null}var Vh=[],Gh=0,by=null,_y=0,Ks=[],Zs=0,yu=null,ya=1,ul="";function vu(d,p){Vh[Gh++]=_y,Vh[Gh++]=by,by=d,_y=p}function ZO(d,p,_){Ks[Zs++]=ya,Ks[Zs++]=ul,Ks[Zs++]=yu,yu=d;var S=ya;d=ul;var A=32-Mi(S)-1;S&=~(1<<A),_+=1;var L=32-Mi(p)+A;if(30<L){var G=A-A%5;L=(S&(1<<G)-1).toString(32),S>>=G,A-=G,ya=1<<32-Mi(p)+A|_<<A|S,ul=L+d}else ya=1<<L|_<<A|S,ul=d}function rE(d){d.return!==null&&(vu(d,1),ZO(d,1,0))}function iE(d){for(;d===by;)by=Vh[--Gh],Vh[Gh]=null,_y=Vh[--Gh],Vh[Gh]=null;for(;d===yu;)yu=Ks[--Zs],Ks[Zs]=null,ul=Ks[--Zs],Ks[Zs]=null,ya=Ks[--Zs],Ks[Zs]=null}var gs=null,Qs=null,zn=!1,Ep=!1,ko=null;function QO(d,p){var _=ro(5,null,null,0);_.elementType="DELETED",_.stateNode=p,_.return=d,(p=d.deletions)===null?(d.deletions=[_],d.flags|=16):p.push(_)}function JO(d,p){switch(d.tag){case 5:return(p=ht(p,d.type,d.pendingProps))!==null&&(d.stateNode=p,gs=d,Qs=tn(p),!0);case 6:return(p=Je(p,d.pendingProps))!==null&&(d.stateNode=p,gs=d,Qs=null,!0);case 13:if((p=Lt(p))!==null){var _=yu!==null?{id:ya,overflow:ul}:null;return d.memoizedState={dehydrated:p,treeContext:_,retryLane:1073741824},(_=ro(18,null,null,0)).stateNode=p,_.return=d,d.child=_,gs=d,Qs=null,!0}return!1;default:return!1}}function sE(d){return(1&d.mode)!=0&&(128&d.flags)==0}function oE(d){if(zn){var p=Qs;if(p){var _=p;if(!JO(d,p)){if(sE(d))throw Error(s(418));p=Bn(_);var S=gs;p&&JO(d,p)?QO(S,_):(d.flags=-4097&d.flags|2,zn=!1,gs=d)}}else{if(sE(d))throw Error(s(418));d.flags=-4097&d.flags|2,zn=!1,gs=d}}}function eL(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;gs=d}function xy(d){if(!pe||d!==gs)return!1;if(!zn)return eL(d),zn=!0,!1;if(d.tag!==3&&(d.tag!==5||At(d.type)&&!Me(d.type,d.memoizedProps))){var p=Qs;if(p){if(sE(d))throw tL(),Error(s(418));for(;p;)QO(d,p),p=Bn(p)}}if(eL(d),d.tag===13){if(!pe)throw Error(s(316));if(!(d=(d=d.memoizedState)!==null?d.dehydrated:null))throw Error(s(317));Qs=br(d)}else Qs=gs?Bn(d.stateNode):null;return!0}function tL(){for(var d=Qs;d;)d=Bn(d)}function Hh(){pe&&(Qs=gs=null,Ep=zn=!1)}function aE(d){ko===null?ko=[d]:ko.push(d)}var p7=o.ReactCurrentBatchConfig;function wy(d,p){if(Lo(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var _=Object.keys(d),S=Object.keys(p);if(_.length!==S.length)return!1;for(S=0;S<_.length;S++){var A=_[S];if(!Mo.call(p,A)||!Lo(d[A],p[A]))return!1}return!0}function g7(d){switch(d.tag){case 5:return Xn(d.type);case 16:return Xn("Lazy");case 13:return Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 2:case 15:return d=Ys(d.type,!1);case 11:return d=Ys(d.type.render,!1);case 1:return d=Ys(d.type,!0);default:return""}}function Do(d,p){if(d&&d.defaultProps){for(var _ in p=i({},p),d=d.defaultProps)p[_]===void 0&&(p[_]=d[_]);return p}return p}var Ey=Nr(null),Sy=null,Wh=null,lE=null;function cE(){lE=Wh=Sy=null}function nL(d,p,_){me?(mn(Ey,p._currentValue),p._currentValue=_):(mn(Ey,p._currentValue2),p._currentValue2=_)}function uE(d){var p=Ey.current;Sn(Ey),me?d._currentValue=p:d._currentValue2=p}function hE(d,p,_){for(;d!==null;){var S=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,S!==null&&(S.childLanes|=p)):S!==null&&(S.childLanes&p)!==p&&(S.childLanes|=p),d===_)break;d=d.return}}function Xh(d,p){Sy=d,lE=Wh=null,(d=d.dependencies)!==null&&d.firstContext!==null&&(d.lanes&p&&(Hi=!0),d.firstContext=null)}function Js(d){var p=me?d._currentValue:d._currentValue2;if(lE!==d)if(d={context:d,memoizedValue:p,next:null},Wh===null){if(Sy===null)throw Error(s(308));Wh=d,Sy.dependencies={lanes:0,firstContext:d}}else Wh=Wh.next=d;return p}var bu=null;function dE(d){bu===null?bu=[d]:bu.push(d)}function rL(d,p,_,S){var A=p.interleaved;return A===null?(_.next=_,dE(p)):(_.next=A.next,A.next=_),p.interleaved=_,va(d,S)}function va(d,p){d.lanes|=p;var _=d.alternate;for(_!==null&&(_.lanes|=p),_=d,d=d.return;d!==null;)d.childLanes|=p,(_=d.alternate)!==null&&(_.childLanes|=p),_=d,d=d.return;return _.tag===3?_.stateNode:null}var Zl=!1;function fE(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iL(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function hl(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Ql(d,p,_){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(2&Qt)!=0){var A=S.pending;return A===null?p.next=p:(p.next=A.next,A.next=p),S.pending=p,va(d,_)}return(A=S.interleaved)===null?(p.next=p,dE(S)):(p.next=A.next,A.next=p),S.interleaved=p,va(d,_)}function Ty(d,p,_){if((p=p.updateQueue)!==null&&(p=p.shared,(4194240&_)!=0)){var S=p.lanes;_|=S&=d.pendingLanes,p.lanes=_,hr(d,_)}}function sL(d,p){var _=d.updateQueue,S=d.alternate;if(S!==null&&_===(S=S.updateQueue)){var A=null,L=null;if((_=_.firstBaseUpdate)!==null){do{var G={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};L===null?A=L=G:L=L.next=G,_=_.next}while(_!==null);L===null?A=L=p:L=L.next=p}else A=L=p;return _={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:L,shared:S.shared,effects:S.effects},void(d.updateQueue=_)}(d=_.lastBaseUpdate)===null?_.firstBaseUpdate=p:d.next=p,_.lastBaseUpdate=p}function Py(d,p,_,S){var A=d.updateQueue;Zl=!1;var L=A.firstBaseUpdate,G=A.lastBaseUpdate,J=A.shared.pending;if(J!==null){A.shared.pending=null;var re=J,fe=re.next;re.next=null,G===null?L=fe:G.next=fe,G=re;var ve=d.alternate;ve!==null&&(J=(ve=ve.updateQueue).lastBaseUpdate)!==G&&(J===null?ve.firstBaseUpdate=fe:J.next=fe,ve.lastBaseUpdate=re)}if(L!==null){var ze=A.baseState;for(G=0,ve=fe=re=null,J=L;;){var ye=J.lane,Ie=J.eventTime;if((S&ye)===ye){ve!==null&&(ve=ve.next={eventTime:Ie,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var it=d,zt=J;switch(ye=p,Ie=_,zt.tag){case 1:if(typeof(it=zt.payload)=="function"){ze=it.call(Ie,ze,ye);break e}ze=it;break e;case 3:it.flags=-65537&it.flags|128;case 0:if((ye=typeof(it=zt.payload)=="function"?it.call(Ie,ze,ye):it)==null)break e;ze=i({},ze,ye);break e;case 2:Zl=!0}}J.callback!==null&&J.lane!==0&&(d.flags|=64,(ye=A.effects)===null?A.effects=[J]:ye.push(J))}else Ie={eventTime:Ie,lane:ye,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ve===null?(fe=ve=Ie,re=ze):ve=ve.next=Ie,G|=ye;if((J=J.next)===null){if((J=A.shared.pending)===null)break;J=(ye=J).next,ye.next=null,A.lastBaseUpdate=ye,A.shared.pending=null}}if(ve===null&&(re=ze),A.baseState=re,A.firstBaseUpdate=fe,A.lastBaseUpdate=ve,(p=A.shared.interleaved)!==null){A=p;do G|=A.lane,A=A.next;while(A!==p)}else L===null&&(A.shared.lanes=0);xu|=G,d.lanes=G,d.memoizedState=ze}}function oL(d,p,_){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var S=d[p],A=S.callback;if(A!==null){if(S.callback=null,S=_,typeof A!="function")throw Error(s(191,A));A.call(S)}}}var aL=new n.Component().refs;function pE(d,p,_,S){_=(_=_(S,p=d.memoizedState))==null?p:i({},p,_),d.memoizedState=_,d.lanes===0&&(d.updateQueue.baseState=_)}var Cy={isMounted:function(d){return!!(d=d._reactInternals)&&M(d)===d},enqueueSetState:function(d,p,_){d=d._reactInternals;var S=pi(),A=nc(d),L=hl(S,A);L.payload=p,_!=null&&(L.callback=_),(p=Ql(d,L,A))!==null&&(no(p,d,A,S),Ty(p,d,A))},enqueueReplaceState:function(d,p,_){d=d._reactInternals;var S=pi(),A=nc(d),L=hl(S,A);L.tag=1,L.payload=p,_!=null&&(L.callback=_),(p=Ql(d,L,A))!==null&&(no(p,d,A,S),Ty(p,d,A))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var _=pi(),S=nc(d),A=hl(_,S);A.tag=2,p!=null&&(A.callback=p),(p=Ql(d,A,S))!==null&&(no(p,d,S,_),Ty(p,d,S))}};function lL(d,p,_,S,A,L,G){return typeof(d=d.stateNode).shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,L,G):!p.prototype||!p.prototype.isPureReactComponent||!wy(_,S)||!wy(A,L)}function cL(d,p,_){var S=!1,A=fs,L=p.contextType;return typeof L=="object"&&L!==null?L=Js(L):(A=Qr(p)?Oo:_n.current,L=(S=(S=p.contextTypes)!=null)?pa(d,A):fs),p=new p(_,L),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Cy,d.stateNode=p,p._reactInternals=d,S&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=A,d.__reactInternalMemoizedMaskedChildContext=L),p}function uL(d,p,_,S){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(_,S),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(_,S),p.state!==d&&Cy.enqueueReplaceState(p,p.state,null)}function gE(d,p,_,S){var A=d.stateNode;A.props=_,A.state=d.memoizedState,A.refs=aL,fE(d);var L=p.contextType;typeof L=="object"&&L!==null?A.context=Js(L):(L=Qr(p)?Oo:_n.current,A.context=pa(d,L)),A.state=d.memoizedState,typeof(L=p.getDerivedStateFromProps)=="function"&&(pE(d,p,L,_),A.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(p=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),p!==A.state&&Cy.enqueueReplaceState(A,A.state,null),Py(d,_,A,S),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308)}function Sp(d,p,_){if((d=_.ref)!==null&&typeof d!="function"&&typeof d!="object"){if(_._owner){if(_=_._owner){if(_.tag!==1)throw Error(s(309));var S=_.stateNode}if(!S)throw Error(s(147,d));var A=S,L=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===L?p.ref:(p=function(G){var J=A.refs;J===aL&&(J=A.refs={}),G===null?delete J[L]:J[L]=G},p._stringRef=L,p)}if(typeof d!="string")throw Error(s(284));if(!_._owner)throw Error(s(290,d))}return d}function Ay(d,p){throw d=Object.prototype.toString.call(p),Error(s(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function hL(d){return(0,d._init)(d._payload)}function dL(d){function p(be,te){if(d){var ue=be.deletions;ue===null?(be.deletions=[te],be.flags|=16):ue.push(te)}}function _(be,te){if(!d)return null;for(;te!==null;)p(be,te),te=te.sibling;return null}function S(be,te){for(be=new Map;te!==null;)te.key!==null?be.set(te.key,te):be.set(te.index,te),te=te.sibling;return be}function A(be,te){return(be=ic(be,te)).index=0,be.sibling=null,be}function L(be,te,ue){return be.index=ue,d?(ue=be.alternate)!==null?(ue=ue.index)<te?(be.flags|=2,te):ue:(be.flags|=2,te):(be.flags|=1048576,te)}function G(be){return d&&be.alternate===null&&(be.flags|=2),be}function J(be,te,ue,Ce){return te===null||te.tag!==6?((te=tS(ue,be.mode,Ce)).return=be,te):((te=A(te,ue)).return=be,te)}function re(be,te,ue,Ce){var dt=ue.type;return dt===c?ve(be,te,ue.props.children,Ce,ue.key):te!==null&&(te.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===w&&hL(dt)===te.type)?((Ce=A(te,ue.props)).ref=Sp(be,te,ue),Ce.return=be,Ce):((Ce=ev(ue.type,ue.key,ue.props,null,be.mode,Ce)).ref=Sp(be,te,ue),Ce.return=be,Ce)}function fe(be,te,ue,Ce){return te===null||te.tag!==4||te.stateNode.containerInfo!==ue.containerInfo||te.stateNode.implementation!==ue.implementation?((te=nS(ue,be.mode,Ce)).return=be,te):((te=A(te,ue.children||[])).return=be,te)}function ve(be,te,ue,Ce,dt){return te===null||te.tag!==7?((te=Su(ue,be.mode,Ce,dt)).return=be,te):((te=A(te,ue)).return=be,te)}function ze(be,te,ue){if(typeof te=="string"&&te!==""||typeof te=="number")return(te=tS(""+te,be.mode,ue)).return=be,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case a:return(ue=ev(te.type,te.key,te.props,null,be.mode,ue)).ref=Sp(be,null,te),ue.return=be,ue;case l:return(te=nS(te,be.mode,ue)).return=be,te;case w:return ze(be,(0,te._init)(te._payload),ue)}if(j(te)||T(te))return(te=Su(te,be.mode,ue,null)).return=be,te;Ay(be,te)}return null}function ye(be,te,ue,Ce){var dt=te!==null?te.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return dt!==null?null:J(be,te,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case a:return ue.key===dt?re(be,te,ue,Ce):null;case l:return ue.key===dt?fe(be,te,ue,Ce):null;case w:return ye(be,te,(dt=ue._init)(ue._payload),Ce)}if(j(ue)||T(ue))return dt!==null?null:ve(be,te,ue,Ce,null);Ay(be,ue)}return null}function Ie(be,te,ue,Ce,dt){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return J(te,be=be.get(ue)||null,""+Ce,dt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case a:return re(te,be=be.get(Ce.key===null?ue:Ce.key)||null,Ce,dt);case l:return fe(te,be=be.get(Ce.key===null?ue:Ce.key)||null,Ce,dt);case w:return Ie(be,te,ue,(0,Ce._init)(Ce._payload),dt)}if(j(Ce)||T(Ce))return ve(te,be=be.get(ue)||null,Ce,dt,null);Ay(te,Ce)}return null}function it(be,te,ue,Ce){for(var dt=null,pn=null,st=te,nn=te=0,ei=null;st!==null&&nn<ue.length;nn++){st.index>nn?(ei=st,st=null):ei=st.sibling;var gn=ye(be,st,ue[nn],Ce);if(gn===null){st===null&&(st=ei);break}d&&st&&gn.alternate===null&&p(be,st),te=L(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn,st=ei}if(nn===ue.length)return _(be,st),zn&&vu(be,nn),dt;if(st===null){for(;nn<ue.length;nn++)(st=ze(be,ue[nn],Ce))!==null&&(te=L(st,te,nn),pn===null?dt=st:pn.sibling=st,pn=st);return zn&&vu(be,nn),dt}for(st=S(be,st);nn<ue.length;nn++)(ei=Ie(st,be,nn,ue[nn],Ce))!==null&&(d&&ei.alternate!==null&&st.delete(ei.key===null?nn:ei.key),te=L(ei,te,nn),pn===null?dt=ei:pn.sibling=ei,pn=ei);return d&&st.forEach(function(sc){return p(be,sc)}),zn&&vu(be,nn),dt}function zt(be,te,ue,Ce){var dt=T(ue);if(typeof dt!="function")throw Error(s(150));if((ue=dt.call(ue))==null)throw Error(s(151));for(var pn=dt=null,st=te,nn=te=0,ei=null,gn=ue.next();st!==null&&!gn.done;nn++,gn=ue.next()){st.index>nn?(ei=st,st=null):ei=st.sibling;var sc=ye(be,st,gn.value,Ce);if(sc===null){st===null&&(st=ei);break}d&&st&&sc.alternate===null&&p(be,st),te=L(sc,te,nn),pn===null?dt=sc:pn.sibling=sc,pn=sc,st=ei}if(gn.done)return _(be,st),zn&&vu(be,nn),dt;if(st===null){for(;!gn.done;nn++,gn=ue.next())(gn=ze(be,gn.value,Ce))!==null&&(te=L(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn);return zn&&vu(be,nn),dt}for(st=S(be,st);!gn.done;nn++,gn=ue.next())(gn=Ie(st,be,nn,gn.value,Ce))!==null&&(d&&gn.alternate!==null&&st.delete(gn.key===null?nn:gn.key),te=L(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn);return d&&st.forEach(function(z7){return p(be,z7)}),zn&&vu(be,nn),dt}return function be(te,ue,Ce,dt){if(typeof Ce=="object"&&Ce!==null&&Ce.type===c&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case a:e:{for(var pn=Ce.key,st=ue;st!==null;){if(st.key===pn){if((pn=Ce.type)===c){if(st.tag===7){_(te,st.sibling),(ue=A(st,Ce.props.children)).return=te,te=ue;break e}}else if(st.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===w&&hL(pn)===st.type){_(te,st.sibling),(ue=A(st,Ce.props)).ref=Sp(te,st,Ce),ue.return=te,te=ue;break e}_(te,st);break}p(te,st),st=st.sibling}Ce.type===c?((ue=Su(Ce.props.children,te.mode,dt,Ce.key)).return=te,te=ue):((dt=ev(Ce.type,Ce.key,Ce.props,null,te.mode,dt)).ref=Sp(te,ue,Ce),dt.return=te,te=dt)}return G(te);case l:e:{for(st=Ce.key;ue!==null;){if(ue.key===st){if(ue.tag===4&&ue.stateNode.containerInfo===Ce.containerInfo&&ue.stateNode.implementation===Ce.implementation){_(te,ue.sibling),(ue=A(ue,Ce.children||[])).return=te,te=ue;break e}_(te,ue);break}p(te,ue),ue=ue.sibling}(ue=nS(Ce,te.mode,dt)).return=te,te=ue}return G(te);case w:return be(te,ue,(st=Ce._init)(Ce._payload),dt)}if(j(Ce))return it(te,ue,Ce,dt);if(T(Ce))return zt(te,ue,Ce,dt);Ay(te,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,ue!==null&&ue.tag===6?(_(te,ue.sibling),(ue=A(ue,Ce)).return=te,te=ue):(_(te,ue),(ue=tS(Ce,te.mode,dt)).return=te,te=ue),G(te)):_(te,ue)}}var Yh=dL(!0),fL=dL(!1),Tp={},eo=Nr(Tp),Pp=Nr(Tp),qh=Nr(Tp);function ba(d){if(d===Tp)throw Error(s(174));return d}function mE(d,p){mn(qh,p),mn(Pp,d),mn(eo,Tp),d=H(p),Sn(eo),mn(eo,d)}function Kh(){Sn(eo),Sn(Pp),Sn(qh)}function pL(d){var p=ba(qh.current),_=ba(eo.current);_!==(p=U(_,d.type,p))&&(mn(Pp,d),mn(eo,p))}function yE(d){Pp.current===d&&(Sn(eo),Sn(Pp))}var Jn=Nr(0);function Ry(d){for(var p=d;p!==null;){if(p.tag===13){var _=p.memoizedState;if(_!==null&&((_=_.dehydrated)===null||an(_)||gt(_)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(128&p.flags)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var vE=[];function bE(){for(var d=0;d<vE.length;d++){var p=vE[d];me?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}vE.length=0}var Iy=o.ReactCurrentDispatcher,_E=o.ReactCurrentBatchConfig,_u=0,Yn=null,Fr=null,zr=null,My=!1,Cp=!1,Ap=0,m7=0;function di(){throw Error(s(321))}function xE(d,p){if(p===null)return!1;for(var _=0;_<p.length&&_<d.length;_++)if(!Lo(d[_],p[_]))return!1;return!0}function wE(d,p,_,S,A,L){if(_u=L,Yn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Iy.current=d===null||d.memoizedState===null?_7:x7,d=_(S,A),Cp){L=0;do{if(Cp=!1,Ap=0,25<=L)throw Error(s(301));L+=1,zr=Fr=null,p.updateQueue=null,Iy.current=w7,d=_(S,A)}while(Cp)}if(Iy.current=ky,p=Fr!==null&&Fr.next!==null,_u=0,zr=Fr=Yn=null,My=!1,p)throw Error(s(300));return d}function EE(){var d=Ap!==0;return Ap=0,d}function _a(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?Yn.memoizedState=zr=d:zr=zr.next=d,zr}function to(){if(Fr===null){var d=Yn.alternate;d=d!==null?d.memoizedState:null}else d=Fr.next;var p=zr===null?Yn.memoizedState:zr.next;if(p!==null)zr=p,Fr=d;else{if(d===null)throw Error(s(310));d={memoizedState:(Fr=d).memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},zr===null?Yn.memoizedState=zr=d:zr=zr.next=d}return zr}function Rp(d,p){return typeof p=="function"?p(d):p}function SE(d){var p=to(),_=p.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=d;var S=Fr,A=S.baseQueue,L=_.pending;if(L!==null){if(A!==null){var G=A.next;A.next=L.next,L.next=G}S.baseQueue=A=L,_.pending=null}if(A!==null){L=A.next,S=S.baseState;var J=G=null,re=null,fe=L;do{var ve=fe.lane;if((_u&ve)===ve)re!==null&&(re=re.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),S=fe.hasEagerState?fe.eagerState:d(S,fe.action);else{var ze={lane:ve,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};re===null?(J=re=ze,G=S):re=re.next=ze,Yn.lanes|=ve,xu|=ve}fe=fe.next}while(fe!==null&&fe!==L);re===null?G=S:re.next=J,Lo(S,p.memoizedState)||(Hi=!0),p.memoizedState=S,p.baseState=G,p.baseQueue=re,_.lastRenderedState=S}if((d=_.interleaved)!==null){A=d;do L=A.lane,Yn.lanes|=L,xu|=L,A=A.next;while(A!==d)}else A===null&&(_.lanes=0);return[p.memoizedState,_.dispatch]}function TE(d){var p=to(),_=p.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=d;var S=_.dispatch,A=_.pending,L=p.memoizedState;if(A!==null){_.pending=null;var G=A=A.next;do L=d(L,G.action),G=G.next;while(G!==A);Lo(L,p.memoizedState)||(Hi=!0),p.memoizedState=L,p.baseQueue===null&&(p.baseState=L),_.lastRenderedState=L}return[L,S]}function gL(){}function mL(d,p){var _=Yn,S=to(),A=p(),L=!Lo(S.memoizedState,A);if(L&&(S.memoizedState=A,Hi=!0),S=S.queue,PE(bL.bind(null,_,S,d),[d]),S.getSnapshot!==p||L||zr!==null&&1&zr.memoizedState.tag){if(_.flags|=2048,Ip(9,vL.bind(null,_,S,A,p),void 0,null),Ur===null)throw Error(s(349));30&_u||yL(_,p,A)}return A}function yL(d,p,_){d.flags|=16384,d={getSnapshot:p,value:_},(p=Yn.updateQueue)===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.stores=[d]):(_=p.stores)===null?p.stores=[d]:_.push(d)}function vL(d,p,_,S){p.value=_,p.getSnapshot=S,_L(p)&&xL(d)}function bL(d,p,_){return _(function(){_L(p)&&xL(d)})}function _L(d){var p=d.getSnapshot;d=d.value;try{var _=p();return!Lo(d,_)}catch{return!0}}function xL(d){var p=va(d,1);p!==null&&no(p,d,1,-1)}function wL(d){var p=_a();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:d},p.queue=d,d=d.dispatch=b7.bind(null,Yn,d),[p.memoizedState,d]}function Ip(d,p,_,S){return d={tag:d,create:p,destroy:_,deps:S,next:null},(p=Yn.updateQueue)===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.lastEffect=d.next=d):(_=p.lastEffect)===null?p.lastEffect=d.next=d:(S=_.next,_.next=d,d.next=S,p.lastEffect=d),d}function EL(){return to().memoizedState}function Oy(d,p,_,S){var A=_a();Yn.flags|=d,A.memoizedState=Ip(1|p,_,void 0,S===void 0?null:S)}function Ly(d,p,_,S){var A=to();S=S===void 0?null:S;var L=void 0;if(Fr!==null){var G=Fr.memoizedState;if(L=G.destroy,S!==null&&xE(S,G.deps))return void(A.memoizedState=Ip(p,_,L,S))}Yn.flags|=d,A.memoizedState=Ip(1|p,_,L,S)}function SL(d,p){return Oy(8390656,8,d,p)}function PE(d,p){return Ly(2048,8,d,p)}function TL(d,p){return Ly(4,2,d,p)}function PL(d,p){return Ly(4,4,d,p)}function CL(d,p){return typeof p=="function"?(d=d(),p(d),function(){p(null)}):p!=null?(d=d(),p.current=d,function(){p.current=null}):void 0}function AL(d,p,_){return _=_!=null?_.concat([d]):null,Ly(4,4,CL.bind(null,p,d),_)}function CE(){}function RL(d,p){var _=to();p=p===void 0?null:p;var S=_.memoizedState;return S!==null&&p!==null&&xE(p,S[1])?S[0]:(_.memoizedState=[d,p],d)}function IL(d,p){var _=to();p=p===void 0?null:p;var S=_.memoizedState;return S!==null&&p!==null&&xE(p,S[1])?S[0]:(d=d(),_.memoizedState=[d,p],d)}function ML(d,p,_){return 21&_u?(Lo(_,p)||(_=He(),Yn.lanes|=_,xu|=_,d.baseState=!0),p):(d.baseState&&(d.baseState=!1,Hi=!0),d.memoizedState=_)}function y7(d,p){var _=bt;bt=_!==0&&4>_?_:4,d(!0);var S=_E.transition;_E.transition={};try{d(!1),p()}finally{bt=_,_E.transition=S}}function OL(){return to().memoizedState}function v7(d,p,_){var S=nc(d);_={lane:S,action:_,hasEagerState:!1,eagerState:null,next:null},LL(d)?kL(p,_):(_=rL(d,p,_,S))!==null&&(no(_,d,S,pi()),DL(_,p,S))}function b7(d,p,_){var S=nc(d),A={lane:S,action:_,hasEagerState:!1,eagerState:null,next:null};if(LL(d))kL(p,A);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=p.lastRenderedReducer)!==null)try{var G=p.lastRenderedState,J=L(G,_);if(A.hasEagerState=!0,A.eagerState=J,Lo(J,G)){var re=p.interleaved;return re===null?(A.next=A,dE(p)):(A.next=re.next,re.next=A),void(p.interleaved=A)}}catch{}(_=rL(d,p,A,S))!==null&&(no(_,d,S,A=pi()),DL(_,p,S))}}function LL(d){var p=d.alternate;return d===Yn||p!==null&&p===Yn}function kL(d,p){Cp=My=!0;var _=d.pending;_===null?p.next=p:(p.next=_.next,_.next=p),d.pending=p}function DL(d,p,_){if(4194240&_){var S=p.lanes;_|=S&=d.pendingLanes,p.lanes=_,hr(d,_)}}var ky={readContext:Js,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},_7={readContext:Js,useCallback:function(d,p){return _a().memoizedState=[d,p===void 0?null:p],d},useContext:Js,useEffect:SL,useImperativeHandle:function(d,p,_){return _=_!=null?_.concat([d]):null,Oy(4194308,4,CL.bind(null,p,d),_)},useLayoutEffect:function(d,p){return Oy(4194308,4,d,p)},useInsertionEffect:function(d,p){return Oy(4,2,d,p)},useMemo:function(d,p){var _=_a();return p=p===void 0?null:p,d=d(),_.memoizedState=[d,p],d},useReducer:function(d,p,_){var S=_a();return p=_!==void 0?_(p):p,S.memoizedState=S.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},S.queue=d,d=d.dispatch=v7.bind(null,Yn,d),[S.memoizedState,d]},useRef:function(d){return d={current:d},_a().memoizedState=d},useState:wL,useDebugValue:CE,useDeferredValue:function(d){return _a().memoizedState=d},useTransition:function(){var d=wL(!1),p=d[0];return d=y7.bind(null,d[1]),_a().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,_){var S=Yn,A=_a();if(zn){if(_===void 0)throw Error(s(407));_=_()}else{if(_=p(),Ur===null)throw Error(s(349));30&_u||yL(S,p,_)}A.memoizedState=_;var L={value:_,getSnapshot:p};return A.queue=L,SL(bL.bind(null,S,L,d),[d]),S.flags|=2048,Ip(9,vL.bind(null,S,L,_,p),void 0,null),_},useId:function(){var d=_a(),p=Ur.identifierPrefix;if(zn){var _=ul;p=":"+p+"R"+(_=(ya&~(1<<32-Mi(ya)-1)).toString(32)+_),0<(_=Ap++)&&(p+="H"+_.toString(32)),p+=":"}else p=":"+p+"r"+(_=m7++).toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},x7={readContext:Js,useCallback:RL,useContext:Js,useEffect:PE,useImperativeHandle:AL,useInsertionEffect:TL,useLayoutEffect:PL,useMemo:IL,useReducer:SE,useRef:EL,useState:function(){return SE(Rp)},useDebugValue:CE,useDeferredValue:function(d){return ML(to(),Fr.memoizedState,d)},useTransition:function(){return[SE(Rp)[0],to().memoizedState]},useMutableSource:gL,useSyncExternalStore:mL,useId:OL,unstable_isNewReconciler:!1},w7={readContext:Js,useCallback:RL,useContext:Js,useEffect:PE,useImperativeHandle:AL,useInsertionEffect:TL,useLayoutEffect:PL,useMemo:IL,useReducer:TE,useRef:EL,useState:function(){return TE(Rp)},useDebugValue:CE,useDeferredValue:function(d){var p=to();return Fr===null?p.memoizedState=d:ML(p,Fr.memoizedState,d)},useTransition:function(){return[TE(Rp)[0],to().memoizedState]},useMutableSource:gL,useSyncExternalStore:mL,useId:OL,unstable_isNewReconciler:!1};function Zh(d,p){try{var _="",S=p;do _+=g7(S),S=S.return;while(S);var A=_}catch(L){A=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:p,stack:A,digest:null}}function AE(d,p,_){return{value:d,source:null,stack:_??null,digest:p??null}}function RE(d,p){try{console.error(p.value)}catch(_){setTimeout(function(){throw _})}}var E7=typeof WeakMap=="function"?WeakMap:Map;function NL(d,p,_){(_=hl(-1,_)).tag=3,_.payload={element:null};var S=p.value;return _.callback=function(){Yy||(Yy=!0,YE=S),RE(0,p)},_}function BL(d,p,_){(_=hl(-1,_)).tag=3;var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var A=p.value;_.payload=function(){return S(A)},_.callback=function(){RE(0,p)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(_.callback=function(){RE(0,p),typeof S!="function"&&(ec===null?ec=new Set([this]):ec.add(this));var G=p.stack;this.componentDidCatch(p.value,{componentStack:G!==null?G:""})}),_}function FL(d,p,_){var S=d.pingCache;if(S===null){S=d.pingCache=new E7;var A=new Set;S.set(p,A)}else(A=S.get(p))===void 0&&(A=new Set,S.set(p,A));A.has(_)||(A.add(_),d=O7.bind(null,d,p,_),p.then(d,d))}function zL(d){do{var p;if((p=d.tag===13)&&(p=(p=d.memoizedState)===null||p.dehydrated!==null),p)return d;d=d.return}while(d!==null);return null}function UL(d,p,_,S,A){return 1&d.mode?(d.flags|=65536,d.lanes=A,d):(d===p?d.flags|=65536:(d.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:((p=hl(-1,1)).tag=2,Ql(_,p,1))),_.lanes|=1),d)}var S7=o.ReactCurrentOwner,Hi=!1;function Wi(d,p,_,S){p.child=d===null?fL(p,null,_,S):Yh(p,d.child,_,S)}function $L(d,p,_,S,A){_=_.render;var L=p.ref;return Xh(p,A),S=wE(d,p,_,S,L,A),_=EE(),d===null||Hi?(zn&&_&&rE(p),p.flags|=1,Wi(d,p,S,A),p.child):(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~A,dl(d,p,A))}function jL(d,p,_,S,A){if(d===null){var L=_.type;return typeof L!="function"||eS(L)||L.defaultProps!==void 0||_.compare!==null||_.defaultProps!==void 0?((d=ev(_.type,null,S,p,p.mode,A)).ref=p.ref,d.return=p,p.child=d):(p.tag=15,p.type=L,VL(d,p,L,S,A))}if(L=d.child,(d.lanes&A)==0){var G=L.memoizedProps;if((_=(_=_.compare)!==null?_:wy)(G,S)&&d.ref===p.ref)return dl(d,p,A)}return p.flags|=1,(d=ic(L,S)).ref=p.ref,d.return=p,p.child=d}function VL(d,p,_,S,A){if(d!==null){var L=d.memoizedProps;if(wy(L,S)&&d.ref===p.ref){if(Hi=!1,p.pendingProps=S=L,(d.lanes&A)==0)return p.lanes=d.lanes,dl(d,p,A);131072&d.flags&&(Hi=!0)}}return IE(d,p,_,S,A)}function GL(d,p,_){var S=p.pendingProps,A=S.children,L=d!==null?d.memoizedState:null;if(S.mode==="hidden")if(!(1&p.mode))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(Jh,ms),ms|=_;else{if(!(1073741824&_))return d=L!==null?L.baseLanes|_:_,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,mn(Jh,ms),ms|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=L!==null?L.baseLanes:_,mn(Jh,ms),ms|=S}else L!==null?(S=L.baseLanes|_,p.memoizedState=null):S=_,mn(Jh,ms),ms|=S;return Wi(d,p,A,_),p.child}function HL(d,p){var _=p.ref;(d===null&&_!==null||d!==null&&d.ref!==_)&&(p.flags|=512,p.flags|=2097152)}function IE(d,p,_,S,A){var L=Qr(_)?Oo:_n.current;return L=pa(p,L),Xh(p,A),_=wE(d,p,_,S,L,A),S=EE(),d===null||Hi?(zn&&S&&rE(p),p.flags|=1,Wi(d,p,_,A),p.child):(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~A,dl(d,p,A))}function WL(d,p,_,S,A){if(Qr(_)){var L=!0;jh(p)}else L=!1;if(Xh(p,A),p.stateNode===null)Fy(d,p),cL(p,_,S),gE(p,_,S,A),S=!0;else if(d===null){var G=p.stateNode,J=p.memoizedProps;G.props=J;var re=G.context,fe=_.contextType;typeof fe=="object"&&fe!==null?fe=Js(fe):fe=pa(p,fe=Qr(_)?Oo:_n.current);var ve=_.getDerivedStateFromProps,ze=typeof ve=="function"||typeof G.getSnapshotBeforeUpdate=="function";ze||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==S||re!==fe)&&uL(p,G,S,fe),Zl=!1;var ye=p.memoizedState;G.state=ye,Py(p,S,G,A),re=p.memoizedState,J!==S||ye!==re||Ar.current||Zl?(typeof ve=="function"&&(pE(p,_,ve,S),re=p.memoizedState),(J=Zl||lL(p,_,J,S,ye,re,fe))?(ze||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(p.flags|=4194308)):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=S,p.memoizedState=re),G.props=S,G.state=re,G.context=fe,S=J):(typeof G.componentDidMount=="function"&&(p.flags|=4194308),S=!1)}else{G=p.stateNode,iL(d,p),J=p.memoizedProps,fe=p.type===p.elementType?J:Do(p.type,J),G.props=fe,ze=p.pendingProps,ye=G.context,typeof(re=_.contextType)=="object"&&re!==null?re=Js(re):re=pa(p,re=Qr(_)?Oo:_n.current);var Ie=_.getDerivedStateFromProps;(ve=typeof Ie=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==ze||ye!==re)&&uL(p,G,S,re),Zl=!1,ye=p.memoizedState,G.state=ye,Py(p,S,G,A);var it=p.memoizedState;J!==ze||ye!==it||Ar.current||Zl?(typeof Ie=="function"&&(pE(p,_,Ie,S),it=p.memoizedState),(fe=Zl||lL(p,_,fe,S,ye,it,re)||!1)?(ve||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(S,it,re),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(S,it,re)),typeof G.componentDidUpdate=="function"&&(p.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=1024),p.memoizedProps=S,p.memoizedState=it),G.props=S,G.state=it,G.context=re,S=fe):(typeof G.componentDidUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=1024),S=!1)}return ME(d,p,_,S,L,A)}function ME(d,p,_,S,A,L){HL(d,p);var G=(128&p.flags)!=0;if(!S&&!G)return A&&xp(p,_,!1),dl(d,p,L);S=p.stateNode,S7.current=p;var J=G&&typeof _.getDerivedStateFromError!="function"?null:S.render();return p.flags|=1,d!==null&&G?(p.child=Yh(p,d.child,null,L),p.child=Yh(p,null,J,L)):Wi(d,p,J,L),p.memoizedState=S.state,A&&xp(p,_,!0),p.child}function XL(d){var p=d.stateNode;p.pendingContext?mu(0,p.pendingContext,p.pendingContext!==p.context):p.context&&mu(0,p.context,!1),mE(d,p.containerInfo)}function YL(d,p,_,S,A){return Hh(),aE(A),p.flags|=256,Wi(d,p,_,S),p.child}var Mp,Op,Dy,Ny,OE={dehydrated:null,treeContext:null,retryLane:0};function LE(d){return{baseLanes:d,cachePool:null,transitions:null}}function qL(d,p,_){var S,A=p.pendingProps,L=Jn.current,G=!1,J=(128&p.flags)!=0;if((S=J)||(S=(d===null||d.memoizedState!==null)&&(2&L)!=0),S?(G=!0,p.flags&=-129):d!==null&&d.memoizedState===null||(L|=1),mn(Jn,1&L),d===null)return oE(p),(d=p.memoizedState)!==null&&(d=d.dehydrated)!==null?(1&p.mode?gt(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(J=A.children,d=A.fallback,G?(A=p.mode,G=p.child,J={mode:"hidden",children:J},!(1&A)&&G!==null?(G.childLanes=0,G.pendingProps=J):G=tv(J,A,0,null),d=Su(d,A,_,null),G.return=p,d.return=p,G.sibling=d,p.child=G,p.child.memoizedState=LE(_),p.memoizedState=OE,d):kE(p,J));if((L=d.memoizedState)!==null&&(S=L.dehydrated)!==null)return function(fe,ve,ze,ye,Ie,it,zt){if(ze)return 256&ve.flags?(ve.flags&=-257,By(fe,ve,zt,ye=AE(Error(s(422))))):ve.memoizedState!==null?(ve.child=fe.child,ve.flags|=128,null):(it=ye.fallback,Ie=ve.mode,ye=tv({mode:"visible",children:ye.children},Ie,0,null),(it=Su(it,Ie,zt,null)).flags|=2,ye.return=ve,it.return=ve,ye.sibling=it,ve.child=ye,1&ve.mode&&Yh(ve,fe.child,null,zt),ve.child.memoizedState=LE(zt),ve.memoizedState=OE,it);if(!(1&ve.mode))return By(fe,ve,zt,null);if(gt(Ie))return ye=Pt(Ie).digest,it=Error(s(419)),ye=AE(it,ye,void 0),By(fe,ve,zt,ye);if(ze=(zt&fe.childLanes)!=0,Hi||ze){if((ye=Ur)!==null){switch(zt&-zt){case 4:Ie=2;break;case 16:Ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ie=32;break;case 536870912:Ie=268435456;break;default:Ie=0}(Ie=Ie&(ye.suspendedLanes|zt)?0:Ie)!==0&&Ie!==it.retryLane&&(it.retryLane=Ie,va(fe,Ie),no(ye,fe,Ie,-1))}return JE(),By(fe,ve,zt,ye=AE(Error(s(421))))}return an(Ie)?(ve.flags|=128,ve.child=fe.child,ve=L7.bind(null,fe),ln(Ie,ve),null):(fe=it.treeContext,pe&&(Qs=hs(Ie),gs=ve,zn=!0,ko=null,Ep=!1,fe!==null&&(Ks[Zs++]=ya,Ks[Zs++]=ul,Ks[Zs++]=yu,ya=fe.id,ul=fe.overflow,yu=ve)),ve=kE(ve,ye.children),ve.flags|=4096,ve)}(d,p,J,A,S,L,_);if(G){G=A.fallback,J=p.mode,S=(L=d.child).sibling;var re={mode:"hidden",children:A.children};return!(1&J)&&p.child!==L?((A=p.child).childLanes=0,A.pendingProps=re,p.deletions=null):(A=ic(L,re)).subtreeFlags=14680064&L.subtreeFlags,S!==null?G=ic(S,G):(G=Su(G,J,_,null)).flags|=2,G.return=p,A.return=p,A.sibling=G,p.child=A,A=G,G=p.child,J=(J=d.child.memoizedState)===null?LE(_):{baseLanes:J.baseLanes|_,cachePool:null,transitions:J.transitions},G.memoizedState=J,G.childLanes=d.childLanes&~_,p.memoizedState=OE,A}return d=(G=d.child).sibling,A=ic(G,{mode:"visible",children:A.children}),!(1&p.mode)&&(A.lanes=_),A.return=p,A.sibling=null,d!==null&&((_=p.deletions)===null?(p.deletions=[d],p.flags|=16):_.push(d)),p.child=A,p.memoizedState=null,A}function kE(d,p){return(p=tv({mode:"visible",children:p},d.mode,0,null)).return=d,d.child=p}function By(d,p,_,S){return S!==null&&aE(S),Yh(p,d.child,null,_),(d=kE(p,p.pendingProps.children)).flags|=2,p.memoizedState=null,d}function KL(d,p,_){d.lanes|=p;var S=d.alternate;S!==null&&(S.lanes|=p),hE(d.return,p,_)}function DE(d,p,_,S,A){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:S,tail:_,tailMode:A}:(L.isBackwards=p,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=_,L.tailMode=A)}function ZL(d,p,_){var S=p.pendingProps,A=S.revealOrder,L=S.tail;if(Wi(d,p,S.children,_),(2&(S=Jn.current))!=0)S=1&S|2,p.flags|=128;else{if(d!==null&&128&d.flags)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&KL(d,_,p);else if(d.tag===19)KL(d,_,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}S&=1}if(mn(Jn,S),(1&p.mode)==0)p.memoizedState=null;else switch(A){case"forwards":for(_=p.child,A=null;_!==null;)(d=_.alternate)!==null&&Ry(d)===null&&(A=_),_=_.sibling;(_=A)===null?(A=p.child,p.child=null):(A=_.sibling,_.sibling=null),DE(p,!1,A,_,L);break;case"backwards":for(_=null,A=p.child,p.child=null;A!==null;){if((d=A.alternate)!==null&&Ry(d)===null){p.child=A;break}d=A.sibling,A.sibling=_,_=A,A=d}DE(p,!0,_,null,L);break;case"together":DE(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Fy(d,p){!(1&p.mode)&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function dl(d,p,_){if(d!==null&&(p.dependencies=d.dependencies),xu|=p.lanes,(_&p.childLanes)==0)return null;if(d!==null&&p.child!==d.child)throw Error(s(153));if(p.child!==null){for(_=ic(d=p.child,d.pendingProps),p.child=_,_.return=p;d.sibling!==null;)d=d.sibling,(_=_.sibling=ic(d,d.pendingProps)).return=p;_.sibling=null}return p.child}function xa(d){d.flags|=4}function QL(d,p){if(d!==null&&d.child===p.child)return!0;if(16&p.flags)return!1;for(d=p.child;d!==null;){if(12854&d.flags||12854&d.subtreeFlags)return!1;d=d.sibling}return!0}if(oe)Mp=function(d,p){for(var _=p.child;_!==null;){if(_.tag===5||_.tag===6)se(d,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Op=function(){},Dy=function(d,p,_,S,A){if((d=d.memoizedProps)!==S){var L=p.stateNode,G=ba(eo.current);_=de(L,_,d,S,A,G),(p.updateQueue=_)&&xa(p)}},Ny=function(d,p,_,S){_!==S&&xa(p)};else if(_e){Mp=function(d,p,_,S){for(var A=p.child;A!==null;){if(A.tag===5){var L=A.stateNode;_&&S&&(L=vt(L,A.type,A.memoizedProps,A)),se(d,L)}else if(A.tag===6)L=A.stateNode,_&&S&&(L=ut(L,A.memoizedProps,A)),se(d,L);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)(L=A.child)!==null&&(L.return=A),Mp(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var JL=function(d,p,_,S){for(var A=p.child;A!==null;){if(A.tag===5){var L=A.stateNode;_&&S&&(L=vt(L,A.type,A.memoizedProps,A)),ce(d,L)}else if(A.tag===6)L=A.stateNode,_&&S&&(L=ut(L,A.memoizedProps,A)),ce(d,L);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)(L=A.child)!==null&&(L.return=A),JL(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Op=function(d,p){var _=p.stateNode;if(!QL(d,p)){d=_.containerInfo;var S=ne(d);JL(S,p,!1,!1),_.pendingChildren=S,xa(p),De(d,S)}},Dy=function(d,p,_,S,A){var L=d.stateNode,G=d.memoizedProps;if((d=QL(d,p))&&G===S)p.stateNode=L;else{var J=p.stateNode,re=ba(eo.current),fe=null;G!==S&&(fe=de(J,_,G,S,A,re)),d&&fe===null?p.stateNode=L:(L=ee(L,fe,_,G,S,p,d,J),xe(L,_,S,A,re)&&xa(p),p.stateNode=L,d?xa(p):Mp(L,p,!1,!1))}},Ny=function(d,p,_,S){_!==S?(d=ba(qh.current),_=ba(eo.current),p.stateNode=he(S,d,_,p),xa(p)):p.stateNode=d.stateNode}}else Op=function(){},Dy=function(){},Ny=function(){};function Lp(d,p){if(!zn)switch(d.tailMode){case"hidden":p=d.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?d.tail=null:_.sibling=null;break;case"collapsed":_=d.tail;for(var S=null;_!==null;)_.alternate!==null&&(S=_),_=_.sibling;S===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function Oi(d){var p=d.alternate!==null&&d.alternate.child===d.child,_=0,S=0;if(p)for(var A=d.child;A!==null;)_|=A.lanes|A.childLanes,S|=14680064&A.subtreeFlags,S|=14680064&A.flags,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)_|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=S,d.childLanes=_,p}function T7(d,p,_){var S=p.pendingProps;switch(iE(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(p),null;case 1:case 17:return Qr(p.type)&&gu(),Oi(p),null;case 3:return _=p.stateNode,Kh(),Sn(Ar),Sn(_n),bE(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),d!==null&&d.child!==null||(xy(p)?xa(p):d===null||d.memoizedState.isDehydrated&&!(256&p.flags)||(p.flags|=1024,ko!==null&&(ZE(ko),ko=null))),Op(d,p),Oi(p),null;case 5:yE(p),_=ba(qh.current);var A=p.type;if(d!==null&&p.stateNode!=null)Dy(d,p,A,S,_),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!S){if(p.stateNode===null)throw Error(s(166));return Oi(p),null}if(d=ba(eo.current),xy(p)){if(!pe)throw Error(s(175));d=Zt(p.stateNode,p.type,p.memoizedProps,_,d,p,!Ep),p.updateQueue=d,d!==null&&xa(p)}else{var L=Z(A,S,_,d,p);Mp(L,p,!1,!1),p.stateNode=L,xe(L,A,S,_,d)&&xa(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Oi(p),null;case 6:if(d&&p.stateNode!=null)Ny(d,p,d.memoizedProps,S);else{if(typeof S!="string"&&p.stateNode===null)throw Error(s(166));if(d=ba(qh.current),_=ba(eo.current),xy(p)){if(!pe)throw Error(s(176));if(d=p.stateNode,_=p.memoizedProps,(S=Jt(d,_,p,!Ep))&&(A=gs)!==null)switch(A.tag){case 3:bn(A.stateNode.containerInfo,d,_,(1&A.mode)!=0);break;case 5:Kr(A.type,A.memoizedProps,A.stateNode,d,_,(1&A.mode)!=0)}S&&xa(p)}else p.stateNode=he(S,d,_,p)}return Oi(p),null;case 13:if(Sn(Jn),S=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(zn&&Qs!==null&&1&p.mode&&!(128&p.flags))tL(),Hh(),p.flags|=98560,A=!1;else if(A=xy(p),S!==null&&S.dehydrated!==null){if(d===null){if(!A)throw Error(s(318));if(!pe)throw Error(s(344));if(!(A=(A=p.memoizedState)!==null?A.dehydrated:null))throw Error(s(317));vr(A,p)}else Hh(),!(128&p.flags)&&(p.memoizedState=null),p.flags|=4;Oi(p),A=!1}else ko!==null&&(ZE(ko),ko=null),A=!0;if(!A)return 65536&p.flags?p:null}return 128&p.flags?(p.lanes=_,p):((_=S!==null)!=(d!==null&&d.memoizedState!==null)&&_&&(p.child.flags|=8192,1&p.mode&&(d===null||1&Jn.current?Rr===0&&(Rr=3):JE())),p.updateQueue!==null&&(p.flags|=4),Oi(p),null);case 4:return Kh(),Op(d,p),d===null&&we(p.stateNode.containerInfo),Oi(p),null;case 10:return uE(p.type._context),Oi(p),null;case 19:if(Sn(Jn),(A=p.memoizedState)===null)return Oi(p),null;if(S=(128&p.flags)!=0,(L=A.rendering)===null)if(S)Lp(A,!1);else{if(Rr!==0||d!==null&&128&d.flags)for(d=p.child;d!==null;){if((L=Ry(d))!==null){for(p.flags|=128,Lp(A,!1),(d=L.updateQueue)!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=_,_=p.child;_!==null;)A=d,(S=_).flags&=14680066,(L=S.alternate)===null?(S.childLanes=0,S.lanes=A,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=L.childLanes,S.lanes=L.lanes,S.child=L.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=L.memoizedProps,S.memoizedState=L.memoizedState,S.updateQueue=L.updateQueue,S.type=L.type,A=L.dependencies,S.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),_=_.sibling;return mn(Jn,1&Jn.current|2),p.child}d=d.sibling}A.tail!==null&&Br()>XE&&(p.flags|=128,S=!0,Lp(A,!1),p.lanes=4194304)}else{if(!S)if((d=Ry(L))!==null){if(p.flags|=128,S=!0,(d=d.updateQueue)!==null&&(p.updateQueue=d,p.flags|=4),Lp(A,!0),A.tail===null&&A.tailMode==="hidden"&&!L.alternate&&!zn)return Oi(p),null}else 2*Br()-A.renderingStartTime>XE&&_!==1073741824&&(p.flags|=128,S=!0,Lp(A,!1),p.lanes=4194304);A.isBackwards?(L.sibling=p.child,p.child=L):((d=A.last)!==null?d.sibling=L:p.child=L,A.last=L)}return A.tail!==null?(p=A.tail,A.rendering=p,A.tail=p.sibling,A.renderingStartTime=Br(),p.sibling=null,d=Jn.current,mn(Jn,S?1&d|2:1&d),p):(Oi(p),null);case 22:case 23:return QE(),_=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==_&&(p.flags|=8192),_&&1&p.mode?1073741824&ms&&(Oi(p),oe&&6&p.subtreeFlags&&(p.flags|=8192)):Oi(p),null;case 24:case 25:return null}throw Error(s(156,p.tag))}function P7(d,p){switch(iE(p),p.tag){case 1:return Qr(p.type)&&gu(),65536&(d=p.flags)?(p.flags=-65537&d|128,p):null;case 3:return Kh(),Sn(Ar),Sn(_n),bE(),65536&(d=p.flags)&&!(128&d)?(p.flags=-65537&d|128,p):null;case 5:return yE(p),null;case 13:if(Sn(Jn),(d=p.memoizedState)!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(s(340));Hh()}return 65536&(d=p.flags)?(p.flags=-65537&d|128,p):null;case 19:return Sn(Jn),null;case 4:return Kh(),null;case 10:return uE(p.type._context),null;case 22:case 23:return QE(),null;default:return null}}var zy=!1,fi=!1,C7=typeof WeakSet=="function"?WeakSet:Set,et=null;function Qh(d,p){var _=d.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(S){Un(d,p,S)}else _.current=null}function ek(d,p,_){try{_()}catch(S){Un(d,p,S)}}var tk=!1;function kp(d,p,_){var S=p.updateQueue;if((S=S!==null?S.lastEffect:null)!==null){var A=S=S.next;do{if((A.tag&d)===d){var L=A.destroy;A.destroy=void 0,L!==void 0&&ek(p,_,L)}A=A.next}while(A!==S)}}function Uy(d,p){if((p=(p=p.updateQueue)!==null?p.lastEffect:null)!==null){var _=p=p.next;do{if((_.tag&d)===d){var S=_.create;_.destroy=S()}_=_.next}while(_!==p)}}function NE(d){var p=d.ref;if(p!==null){var _=d.stateNode;d.tag===5?d=W(_):d=_,typeof p=="function"?p(d):p.current=d}}function nk(d){var p=d.alternate;p!==null&&(d.alternate=null,nk(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode)!==null&&ke(p),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function rk(d){return d.tag===5||d.tag===3||d.tag===4}function ik(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||rk(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(2&d.flags||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(2&d.flags))return d.stateNode}}function BE(d,p,_){var S=d.tag;if(S===5||S===6)d=d.stateNode,p?Tt(_,d,p):Le(_,d);else if(S!==4&&(d=d.child)!==null)for(BE(d,p,_),d=d.sibling;d!==null;)BE(d,p,_),d=d.sibling}function FE(d,p,_){var S=d.tag;if(S===5||S===6)d=d.stateNode,p?Be(_,d,p):je(_,d);else if(S!==4&&(d=d.child)!==null)for(FE(d,p,_),d=d.sibling;d!==null;)FE(d,p,_),d=d.sibling}var Li=null,wa=!1;function Ea(d,p,_){for(_=_.child;_!==null;)zE(d,p,_),_=_.sibling}function zE(d,p,_){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(yy,_)}catch{}switch(_.tag){case 5:fi||Qh(_,p);case 6:if(oe){var S=Li,A=wa;Li=null,Ea(d,p,_),wa=A,(Li=S)!==null&&(wa?on(Li,_.stateNode):Gt(Li,_.stateNode))}else Ea(d,p,_);break;case 18:oe&&Li!==null&&(wa?Et(Li,_.stateNode):Ii(Li,_.stateNode));break;case 4:oe?(S=Li,A=wa,Li=_.stateNode.containerInfo,wa=!0,Ea(d,p,_),Li=S,wa=A):(_e&&(S=_.stateNode.containerInfo,A=ne(S),Ve(S,A)),Ea(d,p,_));break;case 0:case 11:case 14:case 15:if(!fi&&(S=_.updateQueue)!==null&&(S=S.lastEffect)!==null){A=S=S.next;do{var L=A,G=L.destroy;L=L.tag,G!==void 0&&(2&L||4&L)&&ek(_,p,G),A=A.next}while(A!==S)}Ea(d,p,_);break;case 1:if(!fi&&(Qh(_,p),typeof(S=_.stateNode).componentWillUnmount=="function"))try{S.props=_.memoizedProps,S.state=_.memoizedState,S.componentWillUnmount()}catch(J){Un(_,p,J)}Ea(d,p,_);break;case 21:Ea(d,p,_);break;case 22:1&_.mode?(fi=(S=fi)||_.memoizedState!==null,Ea(d,p,_),fi=S):Ea(d,p,_);break;default:Ea(d,p,_)}}function sk(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var _=d.stateNode;_===null&&(_=d.stateNode=new C7),p.forEach(function(S){var A=k7.bind(null,d,S);_.has(S)||(_.add(S),S.then(A,A))})}}function No(d,p){var _=p.deletions;if(_!==null)for(var S=0;S<_.length;S++){var A=_[S];try{var L=d,G=p;if(oe){var J=G;e:for(;J!==null;){switch(J.tag){case 5:Li=J.stateNode,wa=!1;break e;case 3:case 4:Li=J.stateNode.containerInfo,wa=!0;break e}J=J.return}if(Li===null)throw Error(s(160));zE(L,G,A),Li=null,wa=!1}else zE(L,G,A);var re=A.alternate;re!==null&&(re.return=null),A.return=null}catch(fe){Un(A,p,fe)}}if(12854&p.subtreeFlags)for(p=p.child;p!==null;)ok(p,d),p=p.sibling}function ok(d,p){var _=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(No(p,d),Sa(d),4&S){try{kp(3,d,d.return),Uy(3,d)}catch(ye){Un(d,d.return,ye)}try{kp(5,d,d.return)}catch(ye){Un(d,d.return,ye)}}break;case 1:No(p,d),Sa(d),512&S&&_!==null&&Qh(_,_.return);break;case 5:if(No(p,d),Sa(d),512&S&&_!==null&&Qh(_,_.return),oe){if(32&d.flags){var A=d.stateNode;try{Dr(A)}catch(ye){Un(d,d.return,ye)}}if(4&S&&(A=d.stateNode)!=null){var L=d.memoizedProps;if(_=_!==null?_.memoizedProps:L,S=d.type,p=d.updateQueue,d.updateQueue=null,p!==null)try{Ot(A,p,S,_,L,d)}catch(ye){Un(d,d.return,ye)}}}break;case 6:if(No(p,d),Sa(d),4&S&&oe){if(d.stateNode===null)throw Error(s(162));A=d.stateNode,L=d.memoizedProps,_=_!==null?_.memoizedProps:L;try{kt(A,_,L)}catch(ye){Un(d,d.return,ye)}}break;case 3:if(No(p,d),Sa(d),4&S){if(oe&&pe&&_!==null&&_.memoizedState.isDehydrated)try{Wn(p.containerInfo)}catch(ye){Un(d,d.return,ye)}if(_e){A=p.containerInfo,L=p.pendingChildren;try{Ve(A,L)}catch(ye){Un(d,d.return,ye)}}}break;case 4:if(No(p,d),Sa(d),4&S&&_e){A=(L=d.stateNode).containerInfo,L=L.pendingChildren;try{Ve(A,L)}catch(ye){Un(d,d.return,ye)}}break;case 13:No(p,d),Sa(d),8192&(A=d.child).flags&&(L=A.memoizedState!==null,A.stateNode.isHidden=L,!L||A.alternate!==null&&A.alternate.memoizedState!==null||(WE=Br())),4&S&&sk(d);break;case 22:var G=_!==null&&_.memoizedState!==null;if(1&d.mode?(fi=(_=fi)||G,No(p,d),fi=_):No(p,d),Sa(d),8192&S){if(_=d.memoizedState!==null,(d.stateNode.isHidden=_)&&!G&&(1&d.mode)!=0)for(et=d,S=d.child;S!==null;){for(p=et=S;et!==null;){var J=(G=et).child;switch(G.tag){case 0:case 11:case 14:case 15:kp(4,G,G.return);break;case 1:Qh(G,G.return);var re=G.stateNode;if(typeof re.componentWillUnmount=="function"){var fe=G,ve=G.return;try{var ze=fe;re.props=ze.memoizedProps,re.state=ze.memoizedState,re.componentWillUnmount()}catch(ye){Un(fe,ve,ye)}}break;case 5:Qh(G,G.return);break;case 22:if(G.memoizedState!==null){ck(p);continue}}J!==null?(J.return=G,et=J):ck(p)}S=S.sibling}if(oe){e:if(S=null,oe)for(p=d;;){if(p.tag===5){if(S===null){S=p;try{A=p.stateNode,_?Gi(A):fa(p.stateNode,p.memoizedProps)}catch(ye){Un(d,d.return,ye)}}}else if(p.tag===6){if(S===null)try{L=p.stateNode,_?Io(L):Ws(L,p.memoizedProps)}catch(ye){Un(d,d.return,ye)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;S===p&&(S=null),p=p.return}S===p&&(S=null),p.sibling.return=p.return,p=p.sibling}}}break;case 19:No(p,d),Sa(d),4&S&&sk(d);break;case 21:break;default:No(p,d),Sa(d)}}function Sa(d){var p=d.flags;if(2&p){try{if(oe){e:{for(var _=d.return;_!==null;){if(rk(_)){var S=_;break e}_=_.return}throw Error(s(160))}switch(S.tag){case 5:var A=S.stateNode;32&S.flags&&(Dr(A),S.flags&=-33),FE(d,ik(d),A);break;case 3:case 4:var L=S.stateNode.containerInfo;BE(d,ik(d),L);break;default:throw Error(s(161))}}}catch(G){Un(d,d.return,G)}d.flags&=-3}4096&p&&(d.flags&=-4097)}function A7(d,p,_){et=d,ak(d)}function ak(d,p,_){for(var S=(1&d.mode)!=0;et!==null;){var A=et,L=A.child;if(A.tag===22&&S){var G=A.memoizedState!==null||zy;if(!G){var J=A.alternate,re=J!==null&&J.memoizedState!==null||fi;J=zy;var fe=fi;if(zy=G,(fi=re)&&!fe)for(et=A;et!==null;)re=(G=et).child,G.tag===22&&G.memoizedState!==null?uk(A):re!==null?(re.return=G,et=re):uk(A);for(;L!==null;)et=L,ak(L),L=L.sibling;et=A,zy=J,fi=fe}lk(d)}else 8772&A.subtreeFlags&&L!==null?(L.return=A,et=L):lk(d)}}function lk(d){for(;et!==null;){var p=et;if(8772&p.flags){var _=p.alternate;try{if(8772&p.flags)switch(p.tag){case 0:case 11:case 15:fi||Uy(5,p);break;case 1:var S=p.stateNode;if(4&p.flags&&!fi)if(_===null)S.componentDidMount();else{var A=p.elementType===p.type?_.memoizedProps:Do(p.type,_.memoizedProps);S.componentDidUpdate(A,_.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var L=p.updateQueue;L!==null&&oL(p,L,S);break;case 3:var G=p.updateQueue;if(G!==null){if(_=null,p.child!==null)switch(p.child.tag){case 5:_=W(p.child.stateNode);break;case 1:_=p.child.stateNode}oL(p,G,_)}break;case 5:var J=p.stateNode;_===null&&4&p.flags&&wt(J,p.type,p.memoizedProps,p);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(pe&&p.memoizedState===null){var re=p.alternate;if(re!==null){var fe=re.memoizedState;if(fe!==null){var ve=fe.dehydrated;ve!==null&&ds(ve)}}}break;default:throw Error(s(163))}fi||512&p.flags&&NE(p)}catch(ze){Un(p,p.return,ze)}}if(p===d){et=null;break}if((_=p.sibling)!==null){_.return=p.return,et=_;break}et=p.return}}function ck(d){for(;et!==null;){var p=et;if(p===d){et=null;break}var _=p.sibling;if(_!==null){_.return=p.return,et=_;break}et=p.return}}function uk(d){for(;et!==null;){var p=et;try{switch(p.tag){case 0:case 11:case 15:var _=p.return;try{Uy(4,p)}catch(re){Un(p,_,re)}break;case 1:var S=p.stateNode;if(typeof S.componentDidMount=="function"){var A=p.return;try{S.componentDidMount()}catch(re){Un(p,A,re)}}var L=p.return;try{NE(p)}catch(re){Un(p,L,re)}break;case 5:var G=p.return;try{NE(p)}catch(re){Un(p,G,re)}}}catch(re){Un(p,p.return,re)}if(p===d){et=null;break}var J=p.sibling;if(J!==null){J.return=p.return,et=J;break}et=p.return}}var $y=0,jy=1,Vy=2,Gy=3,Hy=4;if(typeof Symbol=="function"&&Symbol.for){var Dp=Symbol.for;$y=Dp("selector.component"),jy=Dp("selector.has_pseudo_class"),Vy=Dp("selector.role"),Gy=Dp("selector.test_id"),Hy=Dp("selector.text")}function UE(d){var p=Pe(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if((d=Ge(d))===null)throw Error(s(362));return d.stateNode.current}function $E(d,p){switch(p.$$typeof){case $y:if(d.type===p.value)return!0;break;case jy:e:{p=p.value,d=[d,0];for(var _=0;_<d.length;){var S=d[_++],A=d[_++],L=p[A];if(S.tag!==5||!pt(S)){for(;L!=null&&$E(S,L);)L=p[++A];if(A===p.length){p=!0;break e}for(S=S.child;S!==null;)d.push(S,A),S=S.sibling}}p=!1}return p;case Vy:if(d.tag===5&&Se(d.stateNode,p.value))return!0;break;case Hy:if((d.tag===5||d.tag===6)&&(d=Mt(d))!==null&&0<=d.indexOf(p.value))return!0;break;case Gy:if(d.tag===5&&typeof(d=d.memoizedProps["data-testname"])=="string"&&d.toLowerCase()===p.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function jE(d){switch(d.$$typeof){case $y:return"<"+(P(d.value)||"Unknown")+">";case jy:return":has("+(jE(d)||"")+")";case Vy:return'[role="'+d.value+'"]';case Hy:return'"'+d.value+'"';case Gy:return'[data-testname="'+d.value+'"]';default:throw Error(s(365))}}function hk(d,p){var _=[];d=[d,0];for(var S=0;S<d.length;){var A=d[S++],L=d[S++],G=p[L];if(A.tag!==5||!pt(A)){for(;G!=null&&$E(A,G);)G=p[++L];if(L===p.length)_.push(A);else for(A=A.child;A!==null;)d.push(A,L),A=A.sibling}}return _}function VE(d,p){if(!qe)throw Error(s(363));d=hk(d=UE(d),p),p=[],d=Array.from(d);for(var _=0;_<d.length;){var S=d[_++];if(S.tag===5)pt(S)||p.push(S.stateNode);else for(S=S.child;S!==null;)d.push(S),S=S.sibling}return p}var R7=Math.ceil,Wy=o.ReactCurrentDispatcher,GE=o.ReactCurrentOwner,dr=o.ReactCurrentBatchConfig,Qt=0,Ur=null,_r=null,Jr=0,ms=0,Jh=Nr(0),Rr=0,Np=null,xu=0,Xy=0,HE=0,Bp=null,ys=null,WE=0,XE=1/0,Jl=null;function ed(){XE=Br()+500}var dk,Yy=!1,YE=null,ec=null,qy=!1,tc=null,Ky=0,Fp=0,qE=null,Zy=-1,Qy=0;function pi(){return 6&Qt?Br():Zy!==-1?Zy:Zy=Br()}function nc(d){return 1&d.mode?2&Qt&&Jr!==0?Jr&-Jr:p7.transition!==null?(Qy===0&&(Qy=He()),Qy):(d=bt)!==0?d:Ye():1}function no(d,p,_,S){if(50<Fp)throw Fp=0,qE=null,Error(s(185));Fn(d,_,S),2&Qt&&d===Ur||(d===Ur&&(!(2&Qt)&&(Xy|=_),Rr===4&&rc(d,Jr)),Xi(d,S),_===1&&Qt===0&&!(1&p.mode)&&(ed(),vy&&ma()))}function Xi(d,p){var _=d.callbackNode;(function(A,L){for(var G=A.suspendedLanes,J=A.pingedLanes,re=A.expirationTimes,fe=A.pendingLanes;0<fe;){var ve=31-Mi(fe),ze=1<<ve,ye=re[ve];ye===-1?ze&G&&!(ze&J)||(re[ve]=ie(ze,L)):ye<=L&&(A.expiredLanes|=ze),fe&=~ze}})(d,p);var S=q(d,d===Ur?Jr:0);if(S===0)_!==null&&YO(_),d.callbackNode=null,d.callbackPriority=0;else if(p=S&-S,d.callbackPriority!==p){if(_!=null&&YO(_),p===1)d.tag===0?function(A){vy=!0,KO(A)}(pk.bind(null,d)):KO(pk.bind(null,d)),Oe?rt(function(){!(6&Qt)&&ma()}):eE(tE,ma),_=null;else{switch(ps(S)){case 1:_=tE;break;case 4:_=d7;break;case 16:default:_=qO;break;case 536870912:_=f7}_=wk(_,fk.bind(null,d))}d.callbackPriority=p,d.callbackNode=_}}function fk(d,p){if(Zy=-1,Qy=0,(6&Qt)!=0)throw Error(s(327));var _=d.callbackNode;if(Eu()&&d.callbackNode!==_)return null;var S=q(d,d===Ur?Jr:0);if(S===0)return null;if(30&S||S&d.expiredLanes||p)p=Jy(d,S);else{p=S;var A=Qt;Qt|=2;var L=yk();for(Ur===d&&Jr===p||(Jl=null,ed(),wu(d,p));;)try{M7();break}catch(J){mk(d,J)}cE(),Wy.current=L,Qt=A,_r!==null?p=0:(Ur=null,Jr=0,p=Rr)}if(p!==0){if(p===2&&(A=Ee(d))!==0&&(S=A,p=KE(d,A)),p===1)throw _=Np,wu(d,0),rc(d,S),Xi(d,Br()),_;if(p===6)rc(d,S);else{if(A=d.current.alternate,(30&S)==0&&!function(J){for(var re=J;;){if(16384&re.flags){var fe=re.updateQueue;if(fe!==null&&(fe=fe.stores)!==null)for(var ve=0;ve<fe.length;ve++){var ze=fe[ve],ye=ze.getSnapshot;ze=ze.value;try{if(!Lo(ye(),ze))return!1}catch{return!1}}}if(fe=re.child,16384&re.subtreeFlags&&fe!==null)fe.return=re,re=fe;else{if(re===J)break;for(;re.sibling===null;){if(re.return===null||re.return===J)return!0;re=re.return}re.sibling.return=re.return,re=re.sibling}}return!0}(A)&&((p=Jy(d,S))===2&&(L=Ee(d))!==0&&(S=L,p=KE(d,L)),p===1))throw _=Np,wu(d,0),rc(d,S),Xi(d,Br()),_;switch(d.finishedWork=A,d.finishedLanes=S,p){case 0:case 1:throw Error(s(345));case 2:case 5:td(d,ys,Jl);break;case 3:if(rc(d,S),(130023424&S)===S&&10<(p=WE+500-Br())){if(q(d,0)!==0)break;if(((A=d.suspendedLanes)&S)!==S){pi(),d.pingedLanes|=d.suspendedLanes&A;break}d.timeoutHandle=Te(td.bind(null,d,ys,Jl),p);break}td(d,ys,Jl);break;case 4:if(rc(d,S),(4194240&S)===S)break;for(p=d.eventTimes,A=-1;0<S;){var G=31-Mi(S);L=1<<G,(G=p[G])>A&&(A=G),S&=~L}if(S=A,10<(S=(120>(S=Br()-S)?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*R7(S/1960))-S)){d.timeoutHandle=Te(td.bind(null,d,ys,Jl),S);break}td(d,ys,Jl);break;default:throw Error(s(329))}}}return Xi(d,Br()),d.callbackNode===_?fk.bind(null,d):null}function KE(d,p){var _=Bp;return d.current.memoizedState.isDehydrated&&(wu(d,p).flags|=256),(d=Jy(d,p))!==2&&(p=ys,ys=_,p!==null&&ZE(p)),d}function ZE(d){ys===null?ys=d:ys.push.apply(ys,d)}function rc(d,p){for(p&=~HE,p&=~Xy,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var _=31-Mi(p),S=1<<_;d[_]=-1,p&=~S}}function pk(d){if(6&Qt)throw Error(s(327));Eu();var p=q(d,0);if(!(1&p))return Xi(d,Br()),null;var _=Jy(d,p);if(d.tag!==0&&_===2){var S=Ee(d);S!==0&&(p=S,_=KE(d,S))}if(_===1)throw _=Np,wu(d,0),rc(d,p),Xi(d,Br()),_;if(_===6)throw Error(s(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,td(d,ys,Jl),Xi(d,Br()),null}function gk(d){tc!==null&&tc.tag===0&&!(6&Qt)&&Eu();var p=Qt;Qt|=1;var _=dr.transition,S=bt;try{if(dr.transition=null,bt=1,d)return d()}finally{bt=S,dr.transition=_,!(6&(Qt=p))&&ma()}}function QE(){ms=Jh.current,Sn(Jh)}function wu(d,p){d.finishedWork=null,d.finishedLanes=0;var _=d.timeoutHandle;if(_!==ae&&(d.timeoutHandle=ae,le(_)),_r!==null)for(_=_r.return;_!==null;){var S=_;switch(iE(S),S.tag){case 1:(S=S.type.childContextTypes)!=null&&gu();break;case 3:Kh(),Sn(Ar),Sn(_n),bE();break;case 5:yE(S);break;case 4:Kh();break;case 13:case 19:Sn(Jn);break;case 10:uE(S.type._context);break;case 22:case 23:QE()}_=_.return}if(Ur=d,_r=d=ic(d.current,null),Jr=ms=p,Rr=0,Np=null,HE=Xy=xu=0,ys=Bp=null,bu!==null){for(p=0;p<bu.length;p++)if((S=(_=bu[p]).interleaved)!==null){_.interleaved=null;var A=S.next,L=_.pending;if(L!==null){var G=L.next;L.next=A,S.next=G}_.pending=S}bu=null}return d}function mk(d,p){for(;;){var _=_r;try{if(cE(),Iy.current=ky,My){for(var S=Yn.memoizedState;S!==null;){var A=S.queue;A!==null&&(A.pending=null),S=S.next}My=!1}if(_u=0,zr=Fr=Yn=null,Cp=!1,Ap=0,GE.current=null,_===null||_.return===null){Rr=1,Np=p,_r=null;break}e:{var L=d,G=_.return,J=_,re=p;if(p=Jr,J.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var fe=re,ve=J,ze=ve.tag;if(!(1&ve.mode)&&(ze===0||ze===11||ze===15)){var ye=ve.alternate;ye?(ve.updateQueue=ye.updateQueue,ve.memoizedState=ye.memoizedState,ve.lanes=ye.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Ie=zL(G);if(Ie!==null){Ie.flags&=-257,UL(Ie,G,J,0,p),1&Ie.mode&&FL(L,fe,p),re=fe;var it=(p=Ie).updateQueue;if(it===null){var zt=new Set;zt.add(re),p.updateQueue=zt}else it.add(re);break e}if(!(1&p)){FL(L,fe,p),JE();break e}re=Error(s(426))}else if(zn&&1&J.mode){var be=zL(G);if(be!==null){!(65536&be.flags)&&(be.flags|=256),UL(be,G,J,0,p),aE(Zh(re,J));break e}}L=re=Zh(re,J),Rr!==4&&(Rr=2),Bp===null?Bp=[L]:Bp.push(L),L=G;do{switch(L.tag){case 3:L.flags|=65536,p&=-p,L.lanes|=p,sL(L,NL(0,re,p));break e;case 1:J=re;var te=L.type,ue=L.stateNode;if(!(128&L.flags)&&(typeof te.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(ec===null||!ec.has(ue)))){L.flags|=65536,p&=-p,L.lanes|=p,sL(L,BL(L,J,p));break e}}L=L.return}while(L!==null)}bk(_)}catch(Ce){p=Ce,_r===_&&_!==null&&(_r=_=_.return);continue}break}}function yk(){var d=Wy.current;return Wy.current=ky,d===null?ky:d}function JE(){Rr!==0&&Rr!==3&&Rr!==2||(Rr=4),Ur===null||!(268435455&xu)&&!(268435455&Xy)||rc(Ur,Jr)}function Jy(d,p){var _=Qt;Qt|=2;var S=yk();for(Ur===d&&Jr===p||(Jl=null,wu(d,p));;)try{I7();break}catch(A){mk(d,A)}if(cE(),Qt=_,Wy.current=S,_r!==null)throw Error(s(261));return Ur=null,Jr=0,Rr}function I7(){for(;_r!==null;)vk(_r)}function M7(){for(;_r!==null&&!u7();)vk(_r)}function vk(d){var p=dk(d.alternate,d,ms);d.memoizedProps=d.pendingProps,p===null?bk(d):_r=p,GE.current=null}function bk(d){var p=d;do{var _=p.alternate;if(d=p.return,(32768&p.flags)==0){if((_=T7(_,p,ms))!==null)return void(_r=_)}else{if((_=P7(_,p))!==null)return _.flags&=32767,void(_r=_);if(d===null)return Rr=6,void(_r=null);d.flags|=32768,d.subtreeFlags=0,d.deletions=null}if((p=p.sibling)!==null)return void(_r=p);_r=p=d}while(p!==null);Rr===0&&(Rr=5)}function td(d,p,_){var S=bt,A=dr.transition;try{dr.transition=null,bt=1,function(L,G,J,re){do Eu();while(tc!==null);if(6&Qt)throw Error(s(327));J=L.finishedWork;var fe=L.finishedLanes;if(J===null)return null;if(L.finishedWork=null,L.finishedLanes=0,J===L.current)throw Error(s(177));L.callbackNode=null,L.callbackPriority=0;var ve=J.lanes|J.childLanes;if(function(Ie,it){var zt=Ie.pendingLanes&~it;Ie.pendingLanes=it,Ie.suspendedLanes=0,Ie.pingedLanes=0,Ie.expiredLanes&=it,Ie.mutableReadLanes&=it,Ie.entangledLanes&=it,it=Ie.entanglements;var be=Ie.eventTimes;for(Ie=Ie.expirationTimes;0<zt;){var te=31-Mi(zt),ue=1<<te;it[te]=0,be[te]=-1,Ie[te]=-1,zt&=~ue}}(L,ve),L===Ur&&(_r=Ur=null,Jr=0),!(2064&J.subtreeFlags)&&!(2064&J.flags)||qy||(qy=!0,wk(qO,function(){return Eu(),null})),ve=(15990&J.flags)!=0,(15990&J.subtreeFlags)!=0||ve){ve=dr.transition,dr.transition=null;var ze=bt;bt=1;var ye=Qt;Qt|=4,GE.current=null,function(Ie,it){for(X(Ie.containerInfo),et=it;et!==null;)if(it=(Ie=et).child,(1028&Ie.subtreeFlags)!=0&&it!==null)it.return=Ie,et=it;else for(;et!==null;){Ie=et;try{var zt=Ie.alternate;if(1024&Ie.flags)switch(Ie.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(zt!==null){var be=zt.memoizedProps,te=zt.memoizedState,ue=Ie.stateNode,Ce=ue.getSnapshotBeforeUpdate(Ie.elementType===Ie.type?be:Do(Ie.type,be),te);ue.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:oe&&us(Ie.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(dt){Un(Ie,Ie.return,dt)}if((it=Ie.sibling)!==null){it.return=Ie.return,et=it;break}et=Ie.return}zt=tk,tk=!1}(L,J),ok(J,L),Y(L.containerInfo),L.current=J,A7(J),h7(),Qt=ye,bt=ze,dr.transition=ve}else L.current=J;if(qy&&(qy=!1,tc=L,Ky=fe),ve=L.pendingLanes,ve===0&&(ec=null),function(Ie){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(yy,Ie,void 0,(128&Ie.current.flags)==128)}catch{}}(J.stateNode),Xi(L,Br()),G!==null)for(re=L.onRecoverableError,J=0;J<G.length;J++)fe=G[J],re(fe.value,{componentStack:fe.stack,digest:fe.digest});if(Yy)throw Yy=!1,L=YE,YE=null,L;1&Ky&&L.tag!==0&&Eu(),ve=L.pendingLanes,1&ve?L===qE?Fp++:(Fp=0,qE=L):Fp=0,ma()}(d,p,_,S)}finally{dr.transition=A,bt=S}return null}function Eu(){if(tc!==null){var d=ps(Ky),p=dr.transition,_=bt;try{if(dr.transition=null,bt=16>d?16:d,tc===null)var S=!1;else{if(d=tc,tc=null,Ky=0,(6&Qt)!=0)throw Error(s(331));var A=Qt;for(Qt|=4,et=d.current;et!==null;){var L=et,G=L.child;if(16&et.flags){var J=L.deletions;if(J!==null){for(var re=0;re<J.length;re++){var fe=J[re];for(et=fe;et!==null;){var ve=et;switch(ve.tag){case 0:case 11:case 15:kp(8,ve,L)}var ze=ve.child;if(ze!==null)ze.return=ve,et=ze;else for(;et!==null;){var ye=(ve=et).sibling,Ie=ve.return;if(nk(ve),ve===fe){et=null;break}if(ye!==null){ye.return=Ie,et=ye;break}et=Ie}}}var it=L.alternate;if(it!==null){var zt=it.child;if(zt!==null){it.child=null;do{var be=zt.sibling;zt.sibling=null,zt=be}while(zt!==null)}}et=L}}if(2064&L.subtreeFlags&&G!==null)G.return=L,et=G;else e:for(;et!==null;){if(2048&(L=et).flags)switch(L.tag){case 0:case 11:case 15:kp(9,L,L.return)}var te=L.sibling;if(te!==null){te.return=L.return,et=te;break e}et=L.return}}var ue=d.current;for(et=ue;et!==null;){var Ce=(G=et).child;if(2064&G.subtreeFlags&&Ce!==null)Ce.return=G,et=Ce;else e:for(G=ue;et!==null;){if(2048&(J=et).flags)try{switch(J.tag){case 0:case 11:case 15:Uy(9,J)}}catch(pn){Un(J,J.return,pn)}if(J===G){et=null;break e}var dt=J.sibling;if(dt!==null){dt.return=J.return,et=dt;break e}et=J.return}}if(Qt=A,ma(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(yy,d)}catch{}S=!0}return S}finally{bt=_,dr.transition=p}}return!1}function _k(d,p,_){d=Ql(d,p=NL(0,p=Zh(_,p),1),1),p=pi(),d!==null&&(Fn(d,1,p),Xi(d,p))}function Un(d,p,_){if(d.tag===3)_k(d,d,_);else for(;p!==null;){if(p.tag===3){_k(p,d,_);break}if(p.tag===1){var S=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(ec===null||!ec.has(S))){p=Ql(p,d=BL(p,d=Zh(_,d),1),1),d=pi(),p!==null&&(Fn(p,1,d),Xi(p,d));break}}p=p.return}}function O7(d,p,_){var S=d.pingCache;S!==null&&S.delete(p),p=pi(),d.pingedLanes|=d.suspendedLanes&_,Ur===d&&(Jr&_)===_&&(Rr===4||Rr===3&&(130023424&Jr)===Jr&&500>Br()-WE?wu(d,0):HE|=_),Xi(d,p)}function xk(d,p){p===0&&(1&d.mode?(p=z,!(130023424&(z<<=1))&&(z=4194304)):p=1);var _=pi();(d=va(d,p))!==null&&(Fn(d,p,_),Xi(d,_))}function L7(d){var p=d.memoizedState,_=0;p!==null&&(_=p.retryLane),xk(d,_)}function k7(d,p){var _=0;switch(d.tag){case 13:var S=d.stateNode,A=d.memoizedState;A!==null&&(_=A.retryLane);break;case 19:S=d.stateNode;break;default:throw Error(s(314))}S!==null&&S.delete(p),xk(d,_)}function wk(d,p){return eE(d,p)}function D7(d,p,_,S){this.tag=d,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ro(d,p,_,S){return new D7(d,p,_,S)}function eS(d){return!(!(d=d.prototype)||!d.isReactComponent)}function ic(d,p){var _=d.alternate;return _===null?((_=ro(d.tag,p,d.key,d.mode)).elementType=d.elementType,_.type=d.type,_.stateNode=d.stateNode,_.alternate=d,d.alternate=_):(_.pendingProps=p,_.type=d.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=14680064&d.flags,_.childLanes=d.childLanes,_.lanes=d.lanes,_.child=d.child,_.memoizedProps=d.memoizedProps,_.memoizedState=d.memoizedState,_.updateQueue=d.updateQueue,p=d.dependencies,_.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},_.sibling=d.sibling,_.index=d.index,_.ref=d.ref,_}function ev(d,p,_,S,A,L){var G=2;if(S=d,typeof d=="function")eS(d)&&(G=1);else if(typeof d=="string")G=5;else e:switch(d){case c:return Su(_.children,A,L,p);case u:G=8,A|=8;break;case h:return(d=ro(12,_,p,2|A)).elementType=h,d.lanes=L,d;case y:return(d=ro(13,_,p,A)).elementType=y,d.lanes=L,d;case x:return(d=ro(19,_,p,A)).elementType=x,d.lanes=L,d;case v:return tv(_,A,L,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case f:G=10;break e;case g:G=9;break e;case m:G=11;break e;case b:G=14;break e;case w:G=16,S=null;break e}throw Error(s(130,d==null?d:typeof d,""))}return(p=ro(G,_,p,A)).elementType=d,p.type=S,p.lanes=L,p}function Su(d,p,_,S){return(d=ro(7,d,S,p)).lanes=_,d}function tv(d,p,_,S){return(d=ro(22,d,S,p)).elementType=v,d.lanes=_,d.stateNode={isHidden:!1},d}function tS(d,p,_){return(d=ro(6,d,null,p)).lanes=_,d}function nS(d,p,_){return(p=ro(4,d.children!==null?d.children:[],d.key,p)).lanes=_,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function N7(d,p,_,S,A){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.identifierPrefix=S,this.onRecoverableError=A,pe&&(this.mutableSourceEagerHydrationData=null)}function Ek(d,p,_,S,A,L,G,J,re){return d=new N7(d,p,_,J,re),p===1?(p=1,L===!0&&(p|=8)):p=0,L=ro(3,null,null,p),d.current=L,L.stateNode=d,L.memoizedState={element:S,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},fE(L),d}function Sk(d){if(!d)return fs;e:{if(M(d=d._reactInternals)!==d||d.tag!==1)throw Error(s(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Qr(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(s(171))}if(d.tag===1){var _=d.type;if(Qr(_))return qs(d,_,p)}return p}function Tk(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(s(188)):(d=Object.keys(d).join(","),Error(s(268,d)));return(d=F(p))===null?null:d.stateNode}function Pk(d,p){if((d=d.memoizedState)!==null&&d.dehydrated!==null){var _=d.retryLane;d.retryLane=_!==0&&_<p?_:p}}function nv(d,p){Pk(d,p),(d=d.alternate)&&Pk(d,p)}function B7(d){return(d=F(d))===null?null:d.stateNode}function F7(){return null}return dk=function(d,p,_){if(d!==null)if(d.memoizedProps!==p.pendingProps||Ar.current)Hi=!0;else{if(!(d.lanes&_)&&!(128&p.flags))return Hi=!1,function(ze,ye,Ie){switch(ye.tag){case 3:XL(ye),Hh();break;case 5:pL(ye);break;case 1:Qr(ye.type)&&jh(ye);break;case 4:mE(ye,ye.stateNode.containerInfo);break;case 10:nL(0,ye.type._context,ye.memoizedProps.value);break;case 13:var it=ye.memoizedState;if(it!==null)return it.dehydrated!==null?(mn(Jn,1&Jn.current),ye.flags|=128,null):Ie&ye.child.childLanes?qL(ze,ye,Ie):(mn(Jn,1&Jn.current),(ze=dl(ze,ye,Ie))!==null?ze.sibling:null);mn(Jn,1&Jn.current);break;case 19:if(it=(Ie&ye.childLanes)!=0,(128&ze.flags)!=0){if(it)return ZL(ze,ye,Ie);ye.flags|=128}var zt=ye.memoizedState;if(zt!==null&&(zt.rendering=null,zt.tail=null,zt.lastEffect=null),mn(Jn,Jn.current),it)break;return null;case 22:case 23:return ye.lanes=0,GL(ze,ye,Ie)}return dl(ze,ye,Ie)}(d,p,_);Hi=(131072&d.flags)!=0}else Hi=!1,zn&&1048576&p.flags&&ZO(p,_y,p.index);switch(p.lanes=0,p.tag){case 2:var S=p.type;Fy(d,p),d=p.pendingProps;var A=pa(p,_n.current);Xh(p,_),A=wE(null,p,S,d,A,_);var L=EE();return p.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Qr(S)?(L=!0,jh(p)):L=!1,p.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,fE(p),A.updater=Cy,p.stateNode=A,A._reactInternals=p,gE(p,S,d,_),p=ME(null,p,S,!0,L,_)):(p.tag=0,zn&&L&&rE(p),Wi(null,p,A,_),p=p.child),p;case 16:S=p.elementType;e:{switch(Fy(d,p),d=p.pendingProps,S=(A=S._init)(S._payload),p.type=S,A=p.tag=function(ze){if(typeof ze=="function")return eS(ze)?1:0;if(ze!=null){if((ze=ze.$$typeof)===m)return 11;if(ze===b)return 14}return 2}(S),d=Do(S,d),A){case 0:p=IE(null,p,S,d,_);break e;case 1:p=WL(null,p,S,d,_);break e;case 11:p=$L(null,p,S,d,_);break e;case 14:p=jL(null,p,S,Do(S.type,d),_);break e}throw Error(s(306,S,""))}return p;case 0:return S=p.type,A=p.pendingProps,IE(d,p,S,A=p.elementType===S?A:Do(S,A),_);case 1:return S=p.type,A=p.pendingProps,WL(d,p,S,A=p.elementType===S?A:Do(S,A),_);case 3:e:{if(XL(p),d===null)throw Error(s(387));S=p.pendingProps,A=(L=p.memoizedState).element,iL(d,p),Py(p,S,null,_);var G=p.memoizedState;if(S=G.element,pe&&L.isDehydrated){if(L={element:S,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},p.updateQueue.baseState=L,p.memoizedState=L,256&p.flags){p=YL(d,p,S,_,A=Zh(Error(s(423)),p));break e}if(S!==A){p=YL(d,p,S,_,A=Zh(Error(s(424)),p));break e}for(pe&&(Qs=Cr(p.stateNode.containerInfo),gs=p,zn=!0,ko=null,Ep=!1),_=fL(p,null,S,_),p.child=_;_;)_.flags=-3&_.flags|4096,_=_.sibling}else{if(Hh(),S===A){p=dl(d,p,_);break e}Wi(d,p,S,_)}p=p.child}return p;case 5:return pL(p),d===null&&oE(p),S=p.type,A=p.pendingProps,L=d!==null?d.memoizedProps:null,G=A.children,Me(S,A)?G=null:L!==null&&Me(S,L)&&(p.flags|=32),HL(d,p),Wi(d,p,G,_),p.child;case 6:return d===null&&oE(p),null;case 13:return qL(d,p,_);case 4:return mE(p,p.stateNode.containerInfo),S=p.pendingProps,d===null?p.child=Yh(p,null,S,_):Wi(d,p,S,_),p.child;case 11:return S=p.type,A=p.pendingProps,$L(d,p,S,A=p.elementType===S?A:Do(S,A),_);case 7:return Wi(d,p,p.pendingProps,_),p.child;case 8:case 12:return Wi(d,p,p.pendingProps.children,_),p.child;case 10:e:{if(S=p.type._context,A=p.pendingProps,L=p.memoizedProps,nL(0,S,G=A.value),L!==null)if(Lo(L.value,G)){if(L.children===A.children&&!Ar.current){p=dl(d,p,_);break e}}else for((L=p.child)!==null&&(L.return=p);L!==null;){var J=L.dependencies;if(J!==null){G=L.child;for(var re=J.firstContext;re!==null;){if(re.context===S){if(L.tag===1){(re=hl(-1,_&-_)).tag=2;var fe=L.updateQueue;if(fe!==null){var ve=(fe=fe.shared).pending;ve===null?re.next=re:(re.next=ve.next,ve.next=re),fe.pending=re}}L.lanes|=_,(re=L.alternate)!==null&&(re.lanes|=_),hE(L.return,_,p),J.lanes|=_;break}re=re.next}}else if(L.tag===10)G=L.type===p.type?null:L.child;else if(L.tag===18){if((G=L.return)===null)throw Error(s(341));G.lanes|=_,(J=G.alternate)!==null&&(J.lanes|=_),hE(G,_,p),G=L.sibling}else G=L.child;if(G!==null)G.return=L;else for(G=L;G!==null;){if(G===p){G=null;break}if((L=G.sibling)!==null){L.return=G.return,G=L;break}G=G.return}L=G}Wi(d,p,A.children,_),p=p.child}return p;case 9:return A=p.type,S=p.pendingProps.children,Xh(p,_),S=S(A=Js(A)),p.flags|=1,Wi(d,p,S,_),p.child;case 14:return A=Do(S=p.type,p.pendingProps),jL(d,p,S,A=Do(S.type,A),_);case 15:return VL(d,p,p.type,p.pendingProps,_);case 17:return S=p.type,A=p.pendingProps,A=p.elementType===S?A:Do(S,A),Fy(d,p),p.tag=1,Qr(S)?(d=!0,jh(p)):d=!1,Xh(p,_),cL(p,S,A),gE(p,S,A,_),ME(null,p,S,!0,d,_);case 19:return ZL(d,p,_);case 22:return GL(d,p,_)}throw Error(s(156,p.tag))},e.attemptContinuousHydration=function(d){if(d.tag===13){var p=va(d,134217728);p!==null&&no(p,d,134217728,pi()),nv(d,134217728)}},e.attemptDiscreteHydration=function(d){if(d.tag===13){var p=va(d,1);p!==null&&no(p,d,1,pi()),nv(d,1)}},e.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=nc(d),_=va(d,p);_!==null&&no(_,d,p,pi()),nv(d,p)}},e.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var _=V(p.pendingLanes);_!==0&&(hr(p,1|_),Xi(p,Br()),!(6&Qt)&&(ed(),ma()))}break;case 13:gk(function(){var S=va(d,1);if(S!==null){var A=pi();no(S,d,1,A)}}),nv(d,1)}},e.batchedUpdates=function(d,p){var _=Qt;Qt|=1;try{return d(p)}finally{(Qt=_)===0&&(ed(),vy&&ma())}},e.createComponentSelector=function(d){return{$$typeof:$y,value:d}},e.createContainer=function(d,p,_,S,A,L,G){return Ek(d,p,!1,null,0,S,0,L,G)},e.createHasPseudoClassSelector=function(d){return{$$typeof:jy,value:d}},e.createHydrationContainer=function(d,p,_,S,A,L,G,J,re){return(d=Ek(_,S,!0,d,0,L,0,J,re)).context=Sk(null),_=d.current,(L=hl(S=pi(),A=nc(_))).callback=p??null,Ql(_,L,A),d.current.lanes=A,Fn(d,A,S),Xi(d,S),d},e.createPortal=function(d,p,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:d,containerInfo:p,implementation:_}},e.createRoleSelector=function(d){return{$$typeof:Vy,value:d}},e.createTestNameSelector=function(d){return{$$typeof:Gy,value:d}},e.createTextSelector=function(d){return{$$typeof:Hy,value:d}},e.deferredUpdates=function(d){var p=bt,_=dr.transition;try{return dr.transition=null,bt=16,d()}finally{bt=p,dr.transition=_}},e.discreteUpdates=function(d,p,_,S,A){var L=bt,G=dr.transition;try{return dr.transition=null,bt=1,d(p,_,S,A)}finally{bt=L,dr.transition=G,Qt===0&&ed()}},e.findAllNodes=VE,e.findBoundingRects=function(d,p){if(!qe)throw Error(s(363));p=VE(d,p),d=[];for(var _=0;_<p.length;_++)d.push(fn(p[_]));for(p=d.length-1;0<p;p--)for(var S=(_=d[p]).x,A=S+_.width,L=_.y,G=L+_.height,J=p-1;0<=J;J--)if(p!==J){var re=d[J],fe=re.x,ve=fe+re.width,ze=re.y,ye=ze+re.height;if(S>=fe&&L>=ze&&A<=ve&&G<=ye){d.splice(p,1);break}if(!(S!==fe||_.width!==re.width||ye<L||ze>G)){ze>L&&(re.height+=ze-L,re.y=L),ye<G&&(re.height=G-ze),d.splice(p,1);break}if(!(L!==ze||_.height!==re.height||ve<S||fe>A)){fe>S&&(re.width+=fe-S,re.x=S),ve<A&&(re.width=A-fe),d.splice(p,1);break}}return d},e.findHostInstance=Tk,e.findHostInstanceWithNoPortals=function(d){return(d=(d=O(d))!==null?D(d):null)===null?null:d.stateNode},e.findHostInstanceWithWarning=function(d){return Tk(d)},e.flushControlled=function(d){var p=Qt;Qt|=1;var _=dr.transition,S=bt;try{dr.transition=null,bt=1,d()}finally{bt=S,dr.transition=_,(Qt=p)===0&&(ed(),ma())}},e.flushPassiveEffects=Eu,e.flushSync=gk,e.focusWithin=function(d,p){if(!qe)throw Error(s(363));for(p=hk(d=UE(d),p),p=Array.from(p),d=0;d<p.length;){var _=p[d++];if(!pt(_)){if(_.tag===5&&Ne(_.stateNode))return!0;for(_=_.child;_!==null;)p.push(_),_=_.sibling}}return!1},e.getCurrentUpdatePriority=function(){return bt},e.getFindAllNodesFailureDescription=function(d,p){if(!qe)throw Error(s(363));var _=0,S=[];d=[UE(d),0];for(var A=0;A<d.length;){var L=d[A++],G=d[A++],J=p[G];if((L.tag!==5||!pt(L))&&($E(L,J)&&(S.push(jE(J)),++G>_&&(_=G)),G<p.length))for(L=L.child;L!==null;)d.push(L,G),L=L.sibling}if(_<p.length){for(d=[];_<p.length;_++)d.push(jE(p[_]));return`findAllNodes was able to match part of the selector:
  `+S.join(" > ")+`

No matching component was found for:
  `+d.join(" > ")}return null},e.getPublicRootInstance=function(d){return(d=d.current).child?d.child.tag===5?W(d.child.stateNode):d.child.stateNode:null},e.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:B7,findFiberByHostInstance:d.findFiberByHostInstance||F7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{yy=p.inject(d),ga=p}catch{}d=!!p.checkDCE}}return d},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(d,p,_,S){if(!qe)throw Error(s(363));d=VE(d,p);var A=Ke(d,_,S).disconnect;return{disconnect:function(){A()}}},e.registerMutableSourceForHydration=function(d,p){var _=p._getVersion;_=_(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,_]:d.mutableSourceEagerHydrationData.push(p,_)},e.runWithPriority=function(d,p){var _=bt;try{return bt=d,p()}finally{bt=_}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(d,p,_,S){var A=p.current,L=pi(),G=nc(A);return _=Sk(_),p.context===null?p.context=_:p.pendingContext=_,(p=hl(L,G)).payload={element:d},(S=S===void 0?null:S)!==null&&(p.callback=S),(d=Ql(A,p,G))!==null&&(no(d,A,G,L),Ty(d,A,G)),G},e}),zF}({get exports(){return tR},set exports(t){tR=t}}).exports=Cbe();var Abe=ebe(tR),vH={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},rR={},c1={get exports(){return rR},set exports(t){rR=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?c1.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(c1.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(c1.exports=function(){return Date.now()-n},n=Date.now()):(c1.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(J1e);var jF,tf={},Iu={};({get exports(){return tf},set exports(t){tf=t}}).exports=(jF||(jF=1,Iu.ConcurrentRoot=1,Iu.ContinuousEventPriority=4,Iu.DefaultEventPriority=16,Iu.DiscreteEventPriority=1,Iu.IdleEventPriority=536870912,Iu.LegacyRoot=0),Iu);var Rbe={};function GT(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function bH(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&zl(t.children).forEach(function(s){bH(s,t)})}function VF(t,e){var n;bH(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,l=r.destroyTexture,c=l!==void 0&&l,u=r.destroyBaseTexture,h=u!==void 0&&u;s&&e.destroy({children:a,texture:c,baseTexture:h})}function GF(t,e,n){lr(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var HF=null,Jo=Abe({getRootHostContext:function(){return Rbe},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return tf.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tf.ContinuousEventPriority;default:return tf.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=Ebe[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=yH[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:el)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return HF=function(o,a,l,c){var u=null;for(var h in l)!c.hasOwnProperty(h)&&l.hasOwnProperty(h)&&l[h]!==null&&(h===JA||(u||(u=[]),u.push(h,null)));for(var f in c){var g=c[f],m=l!==null?l[f]:void 0;!c.hasOwnProperty(f)||g===m||g===null&&m===null||f===JA||(u||(u=[]),u.push(f,g))}return u}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){lr(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:rR,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GT.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=VF.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=VF.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:GF,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=GF.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=el),(a(t,r,i)||HF)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),Ibe=vH.dependencies["react-dom"].replace(/[^0-9.]/g,""),Mbe=vH.name;Jo.injectIntoDevTools({bundleType:0,version:Ibe,rendererPackageName:Mbe,findHostInstanceByFiber:Jo.findHostInstance});var Xc=new Map;function _H(t){if(lr(hi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),Xc.has(t)){var e=Xc.get(t).pixiFiberContainer;Jo.updateContainer(null,e,void 0,function(){Xc.delete(t)})}}function xH(t){lr(hi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=Xc.get(t);if(lr(!e,"Pixi React: createRoot should only be called once"),!e){var n=Jo.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return Jo.updateContainer(r,n,void 0),Jo.getPublicRootInstance(n)},unmount:function(){_H(t),Xc.delete(t)}}},Xc.set(t,e)}return e.reactRoot}function Obe(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Xc.has(e)?r=Xc.get(e).reactRoot:r=xH(e),r.render(t)}function Lbe(t){_H(t)}function d0(){return d0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d0.apply(this,arguments)}function kbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pH(r.key),r)}}function ml(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C_(t,e){return C_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},C_(t,e)}function Nbe(t,e){if(e&&(Ds(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ml(t)}function A_(t){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A_(t)}var Vw=An.createContext(null),wH=Vw.Provider,EH=Vw.Consumer,Bbe=function(t){var e=An.forwardRef(function(n,r){return An.createElement(EH,null,function(i){return An.createElement(t,d0({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function Fbe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=A_(t);if(e){var i=A_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nbe(this,n)}}function WF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var XF=function(){},SH={width:Ln.number,height:Ln.number,onMount:Ln.func,onUnmount:Ln.func,raf:Ln.bool,renderOnComponentChange:Ln.bool,children:Ln.node,options:Ln.shape({autoStart:Ln.bool,width:Ln.number,height:Ln.number,useContextAlpha:Ln.bool,backgroundAlpha:Ln.number,autoDensity:Ln.bool,antialias:Ln.bool,preserveDrawingBuffer:Ln.bool,resolution:Ln.number,forceCanvas:Ln.bool,backgroundColor:Ln.number,clearBeforeRender:Ln.bool,powerPreference:Ln.string,sharedTicker:Ln.bool,sharedLoader:Ln.bool,resizeTo:function(t,e){var n=t[e];n&&lr(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ds(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&lr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ds(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},zbe={width:800,height:600,onMount:XF,onUnmount:XF,raf:!0,renderOnComponentChange:!0},iR=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&C_(s,o)})(i,An.Component);var e,n,r=Fbe(i);function i(){var s;kbe(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return pr(ml(s=r.call.apply(r,[this].concat(a))),"_canvas",null),pr(ml(s),"_mediaQuery",null),pr(ml(s),"_ticker",null),pr(ml(s),"_needsUpdate",!0),pr(ml(s),"app",null),pr(ml(s),"updateSize",function(){var c=s.props,u=c.width,h=c.height,f=c.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(u,h)}),pr(ml(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),pr(ml(s),"renderStage",function(){var c=s.props,u=c.renderOnComponentChange;!c.raf&&u&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,c=s.options,u=s.raf,h=s.renderOnComponentChange;this.app=new iy(u1(u1({width:a,height:l,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[u?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Jo.createContainer(this.app.stage),Jo.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),h&&!u&&(this._ticker=new Tr,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,c=this.props,u=c.width,h=c.height,f=c.raf,g=c.renderOnComponentChange,m=c.options;(m==null?void 0:m.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(m==null?void 0:m.resolution)&&(this.app.renderer.resolution=m.resolution,this.resetInteractionManager()),s.height===h&&s.width===u&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(m==null?void 0:m.resolution)||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),Jo.updateContainer(this.getChildren(),this.mountNode,this),s.width===u&&s.height===h&&s.raf===f&&s.renderOnComponentChange===g&&s.options===m||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return An.createElement(wH,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Jo.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(lr(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):An.createElement("canvas",d0({},(s=this.props,o=[].concat(zl(Object.keys(SH)),zl(Object.keys(eR))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,u){return u1(u1({},c),{},pr({},u,s[u]))},{})),{ref:function(c){return a._canvas=c}}))}}])&&Dbe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();iR.propTypes=SH,iR.defaultProps=zbe;var Ube=iR;function TH(){var t=C.useContext(Vw);return lr(t instanceof iy,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function $be(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=TH();lr(typeof t=="function","`useTick` needs a callback function."),lr(n instanceof iy,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=C.useRef(null);C.useEffect(function(){r.current=t},[t]),C.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function jbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sR(t,e,n){return sR=jbe()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&C_(a,s.prototype),a},sR.apply(null,arguments)}var Vbe=["children","apply"];function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Gbe=function(t,e){lr(Ds(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=pu(i,Vbe),l=C.useRef(C.useMemo(function(){return n.map(function(h){var f,g=(a==null||(f=a[h])===null||f===void 0?void 0:f.construct)||[];return sR(e[h],zl(g))})},[n])),c=C.useMemo(function(){return n.reduce(function(h,f,g){return h1(h1({},h),{},pr({},f,l.current[g]))},{})},[n]),u=C.useMemo(function(){return Object.keys(a).filter(mH(gH(n))).reduce(function(h,f){return h1(h1({},h),{},pr({},f,a[f]))},{})},[a,n]);return n.forEach(function(h,f){return Object.assign(l.current[f],a[h])}),o&&function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return f.every(function(m){return typeof m=="function"})}(o)&&o.call(t,c),An.createElement(t,d0({},u,{filters:l.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:Ln.node,apply:Ln.func},r},Hbe=cs.BitmapText,Wbe=cs.Container,Xbe=cs.Graphics,Ybe=cs.NineSlicePlane,qbe=cs.ParticleContainer,Kbe=cs.Sprite,Zbe=cs.AnimatedSprite,Qbe=cs.Text,Jbe=cs.TilingSprite,e_e=cs.SimpleMesh,t_e=cs.SimpleRope;const n_e=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Zbe,AppConsumer:EH,AppContext:Vw,AppProvider:wH,BitmapText:Hbe,Container:Wbe,Graphics:Xbe,NineSlicePlane:Ybe,ParticleContainer:qbe,PixiComponent:Sbe,PixiFiber:Jo,SimpleMesh:e_e,SimpleRope:t_e,Sprite:Kbe,Stage:Ube,TYPES:cs,Text:Qbe,TilingSprite:Jbe,applyDefaultProps:el,createRoot:xH,eventHandlers:P_,render:Obe,unmountComponentAtNode:Lbe,useApp:TH,useTick:$be,withFilters:Gbe,withPixiApp:Bbe},Symbol.toStringTag,{value:"Module"})),r_e=dn(n_e);lV.exports=r_e;var Xt=lV.exports,i_e=Object.defineProperty,s_e=(t,e,n)=>e in t?i_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ge=(t,e,n)=>(s_e(t,typeof e!="symbol"?e+"":e,n),n);class Ro{constructor(e){ge(this,"parent"),ge(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var o_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PH={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s},easeOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-u)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=n.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=n.easeInBounce(i*2,0,o,a),l*.5+s):(l=n.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(n)}).call(o_e)})(PH);const qF=PH.exports;function Gw(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return qF[t]}else return qF[e]}const a_e={removeOnInterrupt:!1,ease:"linear",time:1e3};class l_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"startX"),ge(this,"startY"),ge(this,"deltaX"),ge(this,"deltaY"),ge(this,"keepCenter"),ge(this,"startWidth",null),ge(this,"startHeight",null),ge(this,"deltaWidth",null),ge(this,"deltaHeight",null),ge(this,"width",null),ge(this,"height",null),ge(this,"time",0),this.options=Object.assign({},a_e,n),this.options.ease=Gw(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new ft(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new ft(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const c_e={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class u_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"left"),ge(this,"top"),ge(this,"right"),ge(this,"bottom"),ge(this,"underflowX"),ge(this,"underflowY"),ge(this,"ease"),ge(this,"toX"),ge(this,"toY"),this.options=Object.assign({},c_e,n),this.ease=Gw(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new ft(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new ft(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new ft(0,0),bottomRight:new ft(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,l=r.bottomRight;if(!this.toX&&!i.x){let c=null;r.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let c=null;r.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const h_e={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class d_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"last"),ge(this,"noUnderflow"),ge(this,"underflowX"),ge(this,"underflowY"),this.options=Object.assign({},h_e,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new ft(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const f_e={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class p_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),this.options=Object.assign({},f_e,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const g_e={friction:.98,bounce:.8,minSpeed:.01},hc=16;class m_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"x"),ge(this,"y"),ge(this,"percentChangeX"),ge(this,"percentChangeY"),ge(this,"saved"),ge(this,"timeSinceRelease"),this.options=Object.assign({},g_e,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*hc/o*(Math.pow(s,i/hc)-Math.pow(s,r/hc)),this.x*=Math.pow(this.percentChangeX,e/hc)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*hc/o*(Math.pow(s,i/hc)-Math.pow(s,r/hc)),this.y*=Math.pow(this.percentChangeY,e/hc)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const y_e={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class v_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"moved"),ge(this,"reverse"),ge(this,"xDirection"),ge(this,"yDirection"),ge(this,"keyIsPressed"),ge(this,"mouse"),ge(this,"underflowX"),ge(this,"underflowY"),ge(this,"last"),ge(this,"current"),ge(this,"windowEventHandlers",[]),this.options=Object.assign({},y_e,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new ft(this.last.x,this.last.y),world:this.parent.toWorld(new ft(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new ft(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const b_e={speed:0,acceleration:null,radius:null};class __e extends Ro{constructor(e,n,r={}){super(e),ge(this,"options"),ge(this,"target"),ge(this,"velocity"),this.target=n,this.options=Object.assign({},b_e,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,h=Math.sin(a)*this.velocity.y,f=Math.abs(u)>Math.abs(s)?r:n.x+u,g=Math.abs(h)>Math.abs(o)?i:n.y+h;this.parent.moveCenter(f,g),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?r:n.x+l,h=Math.abs(c)>Math.abs(o)?i:n.y+c;this.parent.moveCenter(u,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const x_e={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class w_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"reverse"),ge(this,"radiusSquared"),ge(this,"left"),ge(this,"top"),ge(this,"right"),ge(this,"bottom"),ge(this,"horizontal"),ge(this,"vertical"),this.options=Object.assign({},x_e,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const E_e={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class S_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"active",!1),ge(this,"pinching",!1),ge(this,"moved",!1),ge(this,"lastCenter"),this.options=Object.assign({},E_e,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let l;const c=new ft(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const h=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=h),this.isAxisY()&&(this.parent.scale.y+=h),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const g=this.parent.toGlobal(l);this.parent.x+=(c.x-g.x)*this.options.factor,this.parent.y+=(c.y-g.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const T_e={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class P_e extends Ro{constructor(e,n,r,i={}){super(e),ge(this,"options"),ge(this,"ease"),ge(this,"x"),ge(this,"y"),ge(this,"percent"),ge(this,"snapping"),ge(this,"deltaX"),ge(this,"deltaY"),ge(this,"startX"),ge(this,"startY"),this.options=Object.assign({},T_e,i),this.ease=Gw(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(n.time>this.options.time)r=!0,i=o+l,s=a+c;else{const u=this.ease(n.time,0,1,this.options.time);i=o+l*u,s=a+c*u}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const C_e={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class A_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"ease"),ge(this,"xScale"),ge(this,"yScale"),ge(this,"xIndependent"),ge(this,"yIndependent"),ge(this,"snapping"),this.options=Object.assign({},C_e,n),this.ease=Gw(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const R_e={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class I_e extends Ro{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"smoothing"),ge(this,"smoothingCenter"),ge(this,"smoothingCount"),ge(this,"keyIsPressed"),this.options=Object.assign({},R_e,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class M_e{constructor(e){ge(this,"viewport"),ge(this,"clickedAvailable"),ge(this,"isMouseDown"),ge(this,"last"),ge(this,"wheelFunction"),ge(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new xt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new ft;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const mg=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class O_e{constructor(e){ge(this,"plugins"),ge(this,"list"),ge(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=mg.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=mg.indexOf(e);s!==-1&&mg.splice(s,1),mg.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of mg)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const L_e={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Tr.shared,allowPreserveDragOutside:!1};class k_e extends hi{constructor(e){super(),ge(this,"moving"),ge(this,"screenWidth"),ge(this,"screenHeight"),ge(this,"threshold"),ge(this,"input"),ge(this,"plugins"),ge(this,"zooming"),ge(this,"lastViewport"),ge(this,"options"),ge(this,"_dirty"),ge(this,"_forceHitArea"),ge(this,"_hitAreaDefault"),ge(this,"_pause"),ge(this,"tickerFunction"),ge(this,"_worldWidth"),ge(this,"_worldHeight"),ge(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...L_e,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new M_e(this),this.plugins=new O_e(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new xt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new xt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new ft(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new ft(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new ft(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new ft(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new A_e(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new ft(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new xt(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new v_e(this,e)),this}clamp(e){return this.plugins.add("clamp",new d_e(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new m_e(this,e)),this}bounce(e){return this.plugins.add("bounce",new u_e(this,e)),this}pinch(e){return this.plugins.add("pinch",new S_e(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new P_e(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new __e(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new I_e(this,e)),this}animate(e){return this.plugins.add("animate",new l_e(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new p_e(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new w_e(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const D_e=t=>{const e=new k_e({passiveWheel:!1,events:t.app.renderer.events,stopPropagation:!0,screenWidth:t.screenWidth,screenHeight:t.screenHeight,worldWidth:1e3,worldHeight:1e3});return e.moveCenter(t.viewportCenter[2]||0,t.viewportCenter[1]||0),e.setZoom(t.viewportCenter[0]||1,!0),e.drag({wheel:!1}).wheel({wheelZoom:!0}).pinch().clampZoom({maxScale:5,minScale:.1}),t.onDragStart&&e.on("drag-start",t.onDragStart),t.onDragEnd&&e.on("drag-end",t.onDragEnd),t.onPinchStart&&e.on("pinch-start",t.onPinchStart),t.onPinchEnd&&e.on("pinch-end",t.onPinchEnd),t.onSnapStart&&e.on("snap-start",t.onSnapStart),t.onSnapEnd&&e.on("snap-end",t.onSnapEnd),t.onSnapZoomStart&&e.on("snap-zoom-start",t.onSnapZoomStart),t.onSnapZoomEnd&&e.on("snap-zoom-end",t.onSnapZoomEnd),t.onZoomed&&e.on("zoomed",t.onZoomed),t.onZoomedEnd&&e.on("zoomed-end",t.onZoomedEnd),t.onMouseUp&&e.on("mouseup",t.onMouseUp),t.onMoved&&e.on("moved",t.onMoved),t.onMovedEnd&&e.on("moved-end",n=>{t.onMovedEnd&&t.onMovedEnd({x:n.center.x,y:n.center.y,zoom:n.lastViewport.scaleX})}),e},N_e=t=>{const e=Xt.useApp(),n=({left:i,top:s,right:o,bottom:a,paddingMarginRatio:l})=>{if(t.screenWidth===0)return;const c=e.stage.getChildAt(0),u=X8({left:i,top:s,right:o,bottom:a,width:t.screenWidth,height:t.screenHeight,paddingMarginRatio:l});c.moveCenter(u[2],u[1]),c.setZoom(u[0],!0),requestAnimationFrame(()=>{t.onSetViewportCenter(u)})};C.useEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);t.screenWidth>0&&t.screenHeight>0&&(t.viewportCenter?(i.moveCenter(t.viewportCenter[2],t.viewportCenter[1]),i.setZoom(t.viewportCenter[0],!0)):n(t.boundingBox))})},[t.viewportCenter]),C.useLayoutEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);i.pause=t.pause})},[t.pause]);const r=Xt.PixiComponent("Viewport",{create:i=>{const s=D_e(i);return s.options.events.domElement=i.app.renderer.view,s},didMount(i,s){},willUnmount:i=>{i.destroy({children:!0})}});return K(r,{app:e,...t})},B_e='<svg xmlns="http://www.w3.org/2000/svg" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-kaxv2e" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DomainIcon"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></svg>',F_e=new Blob([B_e],{type:"image/svg+xml"}),CH=URL.createObjectURL(F_e),AH=new cr;Nn.prototype._cacheAsBitmap=!1;Nn.prototype._cacheData=null;Nn.prototype._cacheAsBitmapResolution=null;Nn.prototype._cacheAsBitmapMultisample=null;class z_e{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new z_e),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Nn.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Nn.prototype._initCachedDisplayObject=function(t){var f,g;if((f=this._cacheData)!=null&&f.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(new xt,!0);if((g=this.filters)!=null&&g.length){const m=this.filters[0].padding;n.pad(m)}const r=this.cacheAsBitmapResolution||t.resolution;n.ceil(r),n.width=Math.max(n.width,1/r),n.height=Math.max(n.height,1/r);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=fu.create({width:n.width,height:n.height,resolution:r,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${ru()}`;this._cacheData.textureCacheId=c,Rt.addToCache(l.baseTexture,c),yt.addToCache(l,c);const u=this.transform.localTransform.copyTo(AH).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new da(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};Nn.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Nn.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const e=this.getLocalBounds(new xt,!0),n=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=fu.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${ru()}`;this._cacheData.textureCacheId=a,Rt.addToCache(o.baseTexture,a),yt.addToCache(o,a);const l=AH;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new da(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};Nn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Nn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Nn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Rt.removeFromCache(this._cacheData.textureCacheId),yt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Nn.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Nn.prototype.name=null;hi.prototype.getChildByName=function(t,e){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(let n=0,r=this.children.length;n<r;n++){const i=this.children[n];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};Nn.prototype.getGlobalPosition=function(t=new ft,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var U_e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class RH extends Ci{constructor(e=1){super(mG,U_e,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const $_e=Object.freeze(Object.defineProperty({__proto__:null,AlphaFilter:RH},Symbol.toStringTag,{value:"Module"})),j_e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},V_e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function G_e(t){const e=j_e[t],n=e.length;let r=V_e,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const H_e=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function W_e(t,e){const n=Math.ceil(t/2);let r=H_e,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class R_ extends Ci{constructor(e,n=8,r=4,i=Ci.defaultResolution,s=5){const o=W_e(s,e),a=G_e(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Xo.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Xo.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class IH extends Ci{constructor(e=8,n=4,r=Ci.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new R_(!0,e,n,r,i),this.blurYFilter=new R_(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Xo.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}const X_e=Object.freeze(Object.defineProperty({__proto__:null,BlurFilter:IH,BlurFilterPass:R_},Symbol.toStringTag,{value:"Module"}));var Y_e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class I_ extends Ci{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(YM,Y_e,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=sn.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,u=o*(1-r)+a*i,h=o*(1-r)+a*i,f=r+o*(1-r),g=o*(1-r)-a*i,m=o*(1-r)-a*i,y=o*(1-r)+a*i,x=r+o*(1-r),b=[l,c,u,0,0,h,f,g,0,0,m,y,x,0,0,0,0,0,1,0];this._loadMatrix(b,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=sn.shared,[a,l,c]=o.setValue(r).toArray(),[u,h,f]=o.setValue(i).toArray(),g=[.3,.59,.11,0,0,a,l,c,e,0,u,h,f,n,0,a-u,l-h,c-f,0,0];this._loadMatrix(g,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}I_.prototype.grayscale=I_.prototype.greyscale;const q_e=Object.freeze(Object.defineProperty({__proto__:null,ColorMatrixFilter:I_},Symbol.toStringTag,{value:"Module"}));var K_e=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Z_e=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class MH extends Ci{constructor(e,n){const r=new cr;e.renderable=!1,super(Z_e,K_e,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new ft(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}const Q_e=Object.freeze(Object.defineProperty({__proto__:null,DisplacementFilter:MH},Symbol.toStringTag,{value:"Module"}));var J_e=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,exe=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class OH extends Ci{constructor(){super(exe,J_e)}}const txe=Object.freeze(Object.defineProperty({__proto__:null,FXAAFilter:OH},Symbol.toStringTag,{value:"Module"}));var nxe=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class LH extends Ci{constructor(e=.5,n=Math.random()){super(YM,nxe,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const rxe=Object.freeze(Object.defineProperty({__proto__:null,NoiseFilter:LH},Symbol.toStringTag,{value:"Module"})),KF={AlphaFilter:RH,BlurFilter:IH,BlurFilterPass:R_,ColorMatrixFilter:I_,DisplacementFilter:MH,FXAAFilter:OH,NoiseFilter:LH};Object.entries(KF).forEach(([t,e])=>{Object.defineProperty(KF,t,{get(){return _t("7.1.0",`filters.${t} has moved to ${t}`),e}})});class ixe{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Tr.system.add(this.tickerUpdate,this,Fl.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Tr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Cc=new ixe;class bp{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=bp.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ft,this.page=new ft,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class f0 extends bp{constructor(){super(...arguments),this.client=new ft,this.movement=new ft,this.offset=new ft,this.global=new ft,this.screen=new ft}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y){throw new Error("Method not implemented.")}}class io extends f0{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class dh extends f0{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}dh.DOM_DELTA_PIXEL=0,dh.DOM_DELTA_LINE=1,dh.DOM_DELTA_PAGE=2;const sxe=2048,oxe=new ft,HT=new ft;class kH{constructor(e){this.dispatch=new gp,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Cc.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,oxe.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<sxe&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Cc.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const f=u[h],g=this.hitTestMoveRecursive(f,this._isInteractive(n)?n:f.eventMode,r,i,s,o||s(e,r));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const m=e.isInteractive();(g.length>0||m)&&(m&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),a=!0}}}const l=this._isInteractive(n),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Cc.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],h=this.hitTestRecursive(u,this._isInteractive(n)?n:u.eventMode,r,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const f=e.isInteractive();return(h.length>0||f)&&h.push(e),h}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,HT),!e.hitArea.contains(HT.x,HT.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var l,c;if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==n.target){const u=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,u,s);if(this.dispatchEvent(h,"pointerout"),r&&this.dispatchEvent(h,"mouseout"),!n.composedPath().includes(s)){const f=this.createPointerEvent(e,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!n.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}if(s!==n.target){const u=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(n,u);this.dispatchEvent(h,"pointerover"),r&&this.dispatchEvent(h,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==n.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(n,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),r&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=n.target)==null?void 0:c.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof io)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof dh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(io);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(dh);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(io);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof io&&n instanceof io&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof f0&&n instanceof f0&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const axe=1,lxe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},oR=class aR{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new kH(null),Cc.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new io(null),this.rootWheelEvent=new dh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...aR.defaultEventFeatures},{set:(n,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),n[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:n,resolution:r}=this.renderer;this.setTargetElement(n),this.resolution=r,aR._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":n&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":n&&Object.assign(this.domElement.style,r);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=n.length;r<i;r++){const s=n[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Cc.pointerMoved();const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const r=n!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,Cc.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Cc.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Cc.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(n-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=axe),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,n.push(r)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,n.deltaMode=e.deltaMode,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=lxe[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}};oR.extension={name:"events",type:[Ue.RendererSystem,Ue.CanvasRendererSystem]},oR.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let M_=oR;nt.add(M_);function ZF(t){return t==="dynamic"||t==="static"}const DH={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??ZF(M_.defaultEventMode)},set interactive(t){_t("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??M_.defaultEventMode},set eventMode(t){this._internalInteractive=ZF(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof n=="object"?n.signal:void 0,s=typeof n=="object"?n.once===!0:!1,o=typeof e=="function"?void 0:e;t=r?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof bp))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Nn.mixin(DH);const cxe=Object.freeze(Object.defineProperty({__proto__:null,EventBoundary:kH,EventSystem:M_,FederatedDisplayObject:DH,FederatedEvent:bp,FederatedMouseEvent:f0,FederatedPointerEvent:io,FederatedWheelEvent:dh},Symbol.toStringTag,{value:"Module"})),NH={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nn.mixin(NH);const uxe=9,d1=100,hxe=0,dxe=0,QF=2,JF=1,fxe=-1e3,pxe=-1e3,gxe=2;class sO{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ko.tablet||Ko.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${d1}px`,n.style.height=`${d1}px`,n.style.position="absolute",n.style.top=`${hxe}px`,n.style.left=`${dxe}px`,n.style.zIndex=QF.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${JF}px`,e.style.height=`${JF}px`,e.style.position="absolute",e.style.top=`${fxe}px`,e.style.left=`${pxe}px`,e.style.zIndex=gxe.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Ko.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let h=this.div;h.style.left=`${n}px`,h.style.top=`${r}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const g=this.children[f];if(g.renderId!==this.renderId)g._accessibleActive=!1,uh(this.children,f,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,f--;else{h=g._accessibleDiv;let m=g.hitArea;const y=g.worldTransform;g.hitArea?(h.style.left=`${(y.tx+m.x*y.a)*c}px`,h.style.top=`${(y.ty+m.y*y.d)*u}px`,h.style.width=`${m.width*y.a*c}px`,h.style.height=`${m.height*y.d*u}px`):(m=g.getBounds(),this.capHitArea(m),h.style.left=`${m.x*c}px`,h.style.top=`${m.y*u}px`,h.style.width=`${m.width*c}px`,h.style.height=`${m.height*u}px`,h.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(h.title=g.accessibleTitle),h.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&h.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==h.title||g.tabIndex!==h.tabIndex)&&(h.title=g.accessibleTitle,h.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${d1}px`,n.style.height=`${d1}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=QF.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new bp(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===uxe&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}sO.extension={name:"accessibility",type:[Ue.RendererPlugin,Ue.CanvasRendererPlugin]};nt.add(sO);const mxe=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityManager:sO,accessibleTarget:NH},Symbol.toStringTag,{value:"Module"}));var jr=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(jr||{});const p0={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ka,kd;function e4(){kd={s3tc:ka.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ka.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ka.getExtension("WEBGL_compressed_texture_etc"),etc1:ka.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ka.getExtension("WEBGL_compressed_texture_pvrtc")||ka.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ka.getExtension("WEBGL_compressed_texture_atc"),astc:ka.getExtension("WEBGL_compressed_texture_astc"),bptc:ka.getExtension("EXT_texture_compression_bptc")}}const BH={extension:{type:Ue.DetectionParser,priority:2},test:async()=>{const t=Xe.ADAPTER.createCanvas().getContext("webgl");return t?(ka=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{kd||e4();const e=[];for(const n in kd)kd[n]&&e.push(n);return[...e,...t]},remove:async t=>(kd||e4(),t.filter(e=>!(e in kd)))};nt.add(BH);class FH extends Y0{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new y_(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new y_(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Yc extends FH{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=Yc._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||Yc._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Yc._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let c=e.byteOffset,u=o,h=a,f=u+i-1&~(i-1),g=h+s-1&~(s-1),m=f*g*p0[n];for(let y=0;y<r;y++)l[y]={levelID:y,levelWidth:r>1?u:f,levelHeight:r>1?h:g,levelBuffer:new Uint8Array(e.buffer,c,m)},c+=m,u=u>>1||1,h=h>>1||1,f=u+i-1&~(i-1),g=h+s-1&~(s-1),m=f*g*p0[n];return l}}const WT=4,f1=124,yxe=32,t4=20,vxe=542327876,p1={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},bxe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},g1={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},_xe=1,xxe=2,wxe=4,Exe=64,Sxe=512,Txe=131072,Pxe=827611204,Cxe=861165636,Axe=894720068,Rxe=808540228,Ixe=4,Mxe={[Pxe]:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Cxe]:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Axe]:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT},Oxe={70:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:jr.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:jr.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:jr.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:jr.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function zH(t){const e=new Uint32Array(t);if(e[0]!==vxe)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,f1/Uint32Array.BYTES_PER_ELEMENT),r=n[p1.HEIGHT],i=n[p1.WIDTH],s=n[p1.MIPMAP_COUNT],o=new Uint32Array(t,p1.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,yxe/Uint32Array.BYTES_PER_ELEMENT),a=o[_xe];if(a&wxe){const l=o[bxe.FOURCC];if(l!==Rxe){const w=Mxe[l],v=WT+f1,E=new Uint8Array(t,v);return[new Yc(E,{format:w,width:i,height:r,levels:s})]}const c=WT+f1,u=new Uint32Array(e.buffer,c,t4/Uint32Array.BYTES_PER_ELEMENT),h=u[g1.DXGI_FORMAT],f=u[g1.RESOURCE_DIMENSION],g=u[g1.MISC_FLAG],m=u[g1.ARRAY_SIZE],y=Oxe[h];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(g===Ixe)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,b=WT+f1+t4;if(m===1)x.push(new Uint8Array(t,b));else{const w=p0[y];let v=0,E=i,T=r;for(let R=0;R<s;R++){const M=Math.max(1,E+3&-4),k=Math.max(1,T+3&-4),O=M*k*w;v+=O,E=E>>>1,T=T>>>1}let P=b;for(let R=0;R<m;R++)x.push(new Uint8Array(t,P,v)),P+=v}return x.map(w=>new Yc(w,{format:y,width:i,height:r,levels:s}))}throw a&Exe?new Error("DDSParser does not support uncompressed texture data."):a&Sxe?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Txe?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&xxe?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const n4=[171,75,84,88,32,49,49,187,13,10,26,10],Lxe=67305985,zo={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},lR=64,cR={[lt.UNSIGNED_BYTE]:1,[lt.UNSIGNED_SHORT]:2,[lt.INT]:4,[lt.UNSIGNED_INT]:4,[lt.FLOAT]:4,[lt.HALF_FLOAT]:8},UH={[Re.RGBA]:4,[Re.RGB]:3,[Re.RG]:2,[Re.RED]:1,[Re.LUMINANCE]:1,[Re.LUMINANCE_ALPHA]:2,[Re.ALPHA]:1},$H={[lt.UNSIGNED_SHORT_4_4_4_4]:2,[lt.UNSIGNED_SHORT_5_5_5_1]:2,[lt.UNSIGNED_SHORT_5_6_5]:2};function jH(t,e,n=!1){const r=new DataView(e);if(!kxe(t,r))return null;const i=r.getUint32(zo.ENDIANNESS,!0)===Lxe,s=r.getUint32(zo.GL_TYPE,i),o=r.getUint32(zo.GL_FORMAT,i),a=r.getUint32(zo.GL_INTERNAL_FORMAT,i),l=r.getUint32(zo.PIXEL_WIDTH,i),c=r.getUint32(zo.PIXEL_HEIGHT,i)||1,u=r.getUint32(zo.PIXEL_DEPTH,i)||1,h=r.getUint32(zo.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=r.getUint32(zo.NUMBER_OF_FACES,i),g=r.getUint32(zo.NUMBER_OF_MIPMAP_LEVELS,i),m=r.getUint32(zo.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const y=4,x=4,b=l+3&-4,w=c+3&-4,v=new Array(h);let E=l*c;s===0&&(E=b*w);let T;if(s!==0?cR[s]?T=cR[s]*UH[o]:T=$H[s]:T=p0[a],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const P=n?Nxe(r,m,i):null;let R=E*T,M=l,k=c,O=b,F=w,I=lR+m;for(let D=0;D<g;D++){const N=r.getUint32(I,i);let j=I+4;for(let W=0;W<h;W++){let H=v[W];H||(H=v[W]=new Array(g)),H[D]={levelID:D,levelWidth:g>1||s!==0?M:O,levelHeight:g>1||s!==0?k:F,levelBuffer:new Uint8Array(e,j,R)},j+=R}I+=N+4,I=I%4!==0?I+4-I%4:I,M=M>>1||1,k=k>>1||1,O=M+y-1&~(y-1),F=k+x-1&~(x-1),R=O*F*T}return s!==0?{uncompressed:v.map(D=>{let N=D[0].levelBuffer,j=!1;return s===lt.FLOAT?N=new Float32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4):s===lt.UNSIGNED_INT?(j=!0,N=new Uint32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)):s===lt.INT&&(j=!0,N=new Int32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)),{resource:new Y0(N,{width:D[0].levelWidth,height:D[0].levelHeight}),type:s,format:j?Dxe(o):o}}),kvData:P}:{compressed:v.map(D=>new Yc(null,{format:a,width:l,height:c,levels:g,levelBuffers:D})),kvData:P}}function kxe(t,e){for(let n=0;n<n4.length;n++)if(e.getUint8(n)!==n4[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function Dxe(t){switch(t){case Re.RGBA:return Re.RGBA_INTEGER;case Re.RGB:return Re.RGB_INTEGER;case Re.RG:return Re.RG_INTEGER;case Re.RED:return Re.RED_INTEGER;default:return t}}function Nxe(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(lR+i,n),o=lR+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);r.set(c,u),i+=4+s+a}return r}const VH={extension:{type:Ue.LoadParser,priority:Ao.High},name:"loadDDS",test(t){return Yl(t,".dds")},async load(t,e,n){const r=await(await Xe.ADAPTER.fetch(t)).arrayBuffer(),i=zH(r).map(s=>{const o=new Rt(s,{mipmap:ca.OFF,alphaMode:Ui.NO_PREMULTIPLIED_ALPHA,resolution:Za(t),...e.data});return vp(o,n,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};nt.add(VH);const GH={extension:{type:Ue.LoadParser,priority:Ao.High},name:"loadKTX",test(t){return Yl(t,".ktx")},async load(t,e,n){const r=await(await Xe.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=jH(t,r),a=i??s,l={mipmap:ca.OFF,alphaMode:Ui.NO_PREMULTIPLIED_ALPHA,resolution:Za(t),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const h=u.resource??u,f=new Rt(h,l);return f.ktxKeyValueData=o,vp(f,n,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};nt.add(GH);const HH={extension:Ue.ResolveParser,test:t=>{const e=Pr.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,r;const e=Pr.extname(t).slice(1);if(e==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(i.some(s=>t.endsWith(s)))return{resolution:parseFloat(((n=Xe.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:i.find(s=>t.endsWith(s)),src:t}}return{resolution:parseFloat(((r=Xe.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e,src:t}}};nt.add(HH);const Bxe=Object.freeze(Object.defineProperty({__proto__:null,BlobResource:FH,CompressedTextureResource:Yc,FORMATS_TO_COMPONENTS:UH,INTERNAL_FORMATS:jr,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:p0,TYPES_TO_BYTES_PER_COMPONENT:cR,TYPES_TO_BYTES_PER_PIXEL:$H,detectCompressedTextures:BH,loadDDS:VH,loadKTX:GH,parseDDS:zH,parseKTX:jH,resolveCompressedTextureUrl:HH},Symbol.toStringTag,{value:"Module"})),m1=new xt,Fxe=4,WH=class jg{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,n,r,i){const s=new Image;return s.src=await this.base64(e,n,r,i),s}async base64(e,n,r,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},n,r)});if(s.toDataURL!==void 0)return s.toDataURL(n,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:n,quality:r});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);o&&jg._flipY(r,i,s),a&&jg._unpremultiplyAlpha(r);const l=new OV(i,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);return o&&jg._flipY(r,i,s),a&&jg._unpremultiplyAlpha(r),r}_rawPixels(e,n){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof fu?a=e:(a=r.generateTexture(e,{region:n,resolution:r.resolution,multisample:r.multisample}),l=!0,n&&(m1.width=n.width,m1.height=n.height,n=m1)));const c=r.gl;if(a){if(i=a.baseTexture.resolution,n=n??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===Re.RGBA,!l){r.renderTexture.bind(a);const g=a.framebuffer.glFramebuffers[r.CONTEXT_UID];g.blitFramebuffer&&r.framebuffer.bind(g.blitFramebuffer)}}else i=r.resolution,n||(n=m1,n.width=r.width/i,n.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(n.width*i),1),h=Math.max(Math.round(n.height*i),1),f=new Uint8Array(Fxe*u*h);return c.readPixels(Math.round(n.x*i),Math.round(n.y*i),u,h,c.RGBA,c.UNSIGNED_BYTE,f),l&&(a==null||a.destroy(!0)),{pixels:f,width:u,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,n,r){const i=n<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==0){const s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};WH.extension={name:"extract",type:Ue.RendererSystem};let XH=WH;nt.add(XH);const zxe=Object.freeze(Object.defineProperty({__proto__:null,Extract:XH},Symbol.toStringTag,{value:"Module"}));class YH{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Uxe(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof yt){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function $xe(t,e){if(t.baseTexture instanceof Rt){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function jxe(t,e){if(t._texture&&t._texture instanceof yt){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Vxe(t,e){return e instanceof Fw?(e.updateText(!0),!0):!1}function Gxe(t,e){if(e instanceof js){const n=e.toFontString();return xl.measureFont(n),!0}return!1}function Hxe(t,e){if(t instanceof Fw){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Wxe(t,e){return t instanceof js?(e.includes(t)||e.push(t),!0):!1}const qH=class KH{constructor(e){this.limiter=new YH(KH.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Hxe),this.registerFindHook(Wxe),this.registerFindHook(Uxe),this.registerFindHook($xe),this.registerFindHook(jxe),this.registerUploadHook(Vxe),this.registerUploadHook(Gxe)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,Tr.system.addOnce(this.tick,this,Fl.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)Tr.system.addOnce(this.tick,this,Fl.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,r=e.length;n<r;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,r=this.addHooks.length;n<r&&!this.addHooks[n](e,this.queue);n++);if(e instanceof hi)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&Tr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};qH.uploadsPerFrame=4;let O_=qH;Object.defineProperties(Xe,{UPLOADS_PER_FRAME:{get(){return O_.uploadsPerFrame},set(t){_t("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),O_.uploadsPerFrame=t}}});function ZH(t,e){return e instanceof Rt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function Xxe(t,e){if(!(e instanceof vf))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&ZH(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function Yxe(t,e){return t instanceof vf?(e.push(t),!0):!1}class oO extends O_{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Yxe),this.registerUploadHook(ZH),this.registerUploadHook(Xxe)}}oO.extension={name:"prepare",type:Ue.RendererSystem};nt.add(oO);class qxe{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const Kxe=Object.freeze(Object.defineProperty({__proto__:null,BasePrepare:O_,CountLimiter:YH,Prepare:oO,TimeLimiter:qxe},Symbol.toStringTag,{value:"Module"})),QH=class Vg{constructor(e,n,r){this.linkedSheets=[],(e instanceof Rt||e instanceof yt)&&(e={texture:e,data:n,resolutionFilename:r});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof yt?i:null,this.baseTexture=i instanceof Rt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:n}=this.data.meta;let r=Za(e,null);return r===null&&(r=typeof n=="number"?n:parseFloat(n??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Vg.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const r=Vg.BATCH_SIZE;for(;n-e<r&&n<this._frameKeys.length;){const i=this._frameKeys[n],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new xt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new xt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new yt(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),yt.addToCache(this.textures[i],this.cachePrefix+i.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let r=0;r<e[n].length;r++){const i=e[n][r];this.animations[n].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Vg.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Vg.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var n;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)==null||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};QH.BATCH_SIZE=1e3;let uR=QH;const Zxe=["jpg","png","jpeg","avif","webp"];function JH(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!n){const i=Pr.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(r,JH([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const eW={extension:Ue.Asset,cache:{test:t=>t instanceof uR,getCacheableAssets:(t,e)=>JH(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),n=e.pop(),r=e.pop();return n==="json"&&Zxe.includes(r)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=Xe.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:Ue.LoadParser,priority:Ao.Normal},async testParse(t,e){return Pr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var u,h;const{texture:r,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Pr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(r&&r.baseTexture)a=r;else{const f=T_(o+(i??t.meta.image),e.src);a=(await n.load([f]))[f]}const l=new uR({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(c)){const f=[];for(const m of c){if(typeof m!="string")continue;let y=o+m;(h=e.data)!=null&&h.ignoreMultiPack||(y=T_(y,e.src),f.push(n.load({src:y,data:{ignoreMultiPack:!0}})))}const g=await Promise.all(f);l.linkedSheets=g,g.forEach(m=>{m.linkedSheets=[l].concat(l.linkedSheets.filter(y=>y!==m))})}return l},unload(t){t.destroy(!0)}}};nt.add(eW);const Qxe=Object.freeze(Object.defineProperty({__proto__:null,Spritesheet:uR,spritesheetAsset:eW},Symbol.toStringTag,{value:"Module"})),hR=class Dd extends js{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Dd(Object.keys(Dd.defaultOptions).reduce((n,r)=>({...n,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Dd.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,n={}){const{availableFonts:r}=Dd;if(r[e]){const i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Xe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Pr.basename(e,Pr.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},n);r[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const n=e.filter(r=>!this._overrides.includes(r));n.length>0&&(this._overrides.push(...n),this.styleID++)}removeOverride(...e){const n=e.filter(r=>this._overrides.includes(r));n.length>0&&(this._overrides=this._overrides.filter(r=>!n.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,n)=>`${e}
            @font-face {
                font-family: "${n.family}";
                src: url('${n.dataSrc}');
                font-weight: ${n.weight};
                font-style: ${n.style};
                font-display: ${n.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=RV(e)),typeof e=="number"?AV(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const n=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&n<1&&(e+=(n*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Dd.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(n=>setTimeout(n,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Xe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};hR.availableFonts={},hR.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let lb=hR;const Gg=class Nd extends da{constructor(e="",n={}){super(yt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,i=yt.from(r,{scaleMode:Xe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new xt,i.trim=new xt,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Nd.defaultMaxWidth,this.maxHeight=Nd.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=r,this._loadImage=new Image,this._autoResolution=Nd.defaultAutoResolution,this._resolution=Nd.defaultResolution??Xe.RESOLUTION,this.text=e,this.style=n}measureText(e){var u,h;const{text:n,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(i)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:l+r.padding*2,height:c+r.padding*2}}async updateText(e=!0){const{style:n,_image:r,_loadImage:i}=this;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await n.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:n,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=n;n.trim.width=n._frame.width=r.width/i,n.trim.height=n._frame.height=r.height/i,n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var r,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Nd.defaultDestroyOptions,e),super.destroy(e);const n=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=n,(i=this._svgRoot)==null||i.remove(),this._svgRoot=n,(s=this._domElement)==null||s.remove(),this._domElement=n,(o=this._foreignObject)==null||o.remove(),this._foreignObject=n,(a=this._styleElement)==null||a.remove(),this._styleElement=n,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=n,this._image.src="",this._image=n}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const n=Cl(this.scale.x)||1;this.scale.x=n*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const n=Cl(this.scale.y)||1;this.scale.y=n*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof lb?(this.ownsStyle=!1,this._style=e):e instanceof js?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=lb.from(e)):(this.ownsStyle=!0,this._style=new lb(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Gg.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Gg.defaultMaxWidth=2024,Gg.defaultMaxHeight=2024,Gg.defaultAutoResolution=!0;let Jxe=Gg;const ewe=Object.freeze(Object.defineProperty({__proto__:null,HTMLText:Jxe,HTMLTextStyle:lb},Symbol.toStringTag,{value:"Module"})),twe=new js({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center"}),nwe=new js({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#dd0000",align:"center"}),rwe=new js({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',align:"center",fill:"#333333"}),jo=t=>new js({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center",...t}),iwe=t=>{if(!t.city)return null;const e=n=>{n.clear(),n.beginFill(Y8,.7),n.lineStyle(2,170,1),n.drawRoundedRect(-90,-50,170,195,20),n.endFill()};return Bt(Xt.Container,{position:{x:t.x,y:t.y},children:[K(Xt.Graphics,{draw:e}),K(Xt.Text,{x:0,y:-30,anchor:{x:.5,y:.5},style:jo({fontSize:14,fill:170}),text:`(${t.city.point[0].toFixed(2)}, ${t.city.point[1].toFixed(2)})`}),K(Xt.Sprite,{image:CH,x:0,y:0,scale:{x:.3,y:.3},anchor:{x:.5,y:.5}}),K(Xt.Text,{x:0,y:28,anchor:{x:.5,y:.5},style:jo({fontSize:18,fill:170}),text:`#${t.index}`}),K(Xt.Text,{x:0,y:45,anchor:{x:.5,y:.5},style:jo({fontSize:10,fill:170}),text:t.city.label.length<28?t.city.label:t.city.label.substring(0,28)+"..."}),K(Xt.Text,{x:0,y:60,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`share of manufacturing = ${t.city.manufactureShare.toFixed(3)} `}),K(Xt.Text,{x:0,y:75,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`      share of agriculture = ${t.city.agricultureShare.toFixed(3)} `}),K(Xt.Text,{x:0,y:90,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`        price index = ${t.city.priceIndex.toFixed(3)} `}),K(Xt.Text,{x:0,y:105,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`    nominal wage = ${t.city.nominalWage.toFixed(3)} `}),K(Xt.Text,{x:0,y:120,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`          real wage = ${t.city.realWage.toFixed(3)} `}),K(Xt.Text,{x:0,y:135,anchor:{x:.5,y:.5},style:jo({fontSize:11,fill:136}),text:`    GDP = ${t.city.priceIndex.toFixed(3)} `})]})},swe=t=>K(Xt.Container,{children:K(Xt.Graphics,{draw:e=>{e.clear(),t.focusedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),owe=t=>K(Xt.Container,{children:K(Xt.Graphics,{draw:e=>{e.clear(),t.selectedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.8),t.focusedIndices.includes(n)?e.lineStyle(2,16711680,.6):e.lineStyle(2,16711680,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),awe=t=>K(Xt.Container,{children:t.edges.map((e,n)=>K(lwe,{edge:e,index:n,...t},n))}),lwe=t=>{const e=kC(t.locations,t.edge.source),n=kC(t.locations,t.edge.target),r=t.locations[e],i=t.locations[n];if(!r||!i)return;const{x:s,y:o}={x:(r.point[0]+i.point[0])/2,y:(r.point[1]+i.point[1])/2},a=An.useCallback(l=>{l.clear(),l.lineStyle({width:1,color:0,alpha:.1,alignment:.5}),l.moveTo(r.point[0],r.point[1]),l.lineTo(i.point[0],i.point[1])},[r.point[0],i.point[0],r.point[1],i.point[1]]);return Bt(Xt.Container,{children:[K(Xt.Graphics,{draw:a}),!(t.focusedIndices.length===2&&e===t.focusedIndices[0]&&n===t.focusedIndices[1])&&!(t.selectedIndices.length===2&&e===t.selectedIndices[0]&&n===t.selectedIndices[1])&&K(Xt.Text,{text:t.edge.distance.toFixed(2),position:{x:s,y:o},anchor:{x:.5,y:.5},style:rwe})]},t.index)},cwe=t=>K(Xt.Container,{children:t.locations.map((e,n)=>K(uwe,{index:n,...t},e.id))}),uwe=t=>{const[e,n]=An.useState(null),r=t.locations[t.index],i=C.useCallback(c=>{c.preventDefault(),t.onDragStart(c.clientX,c.clientY,t.index)},[t.index]),s=C.useCallback(c=>{if(c.preventDefault(),t.draggingIndex===t.index){c.currentTarget.cursor="grabbing";const u=c.currentTarget.parent.parent,h=c.getLocalPosition(u),f=t.locations[t.index],g=h.x-f.point[0],m=h.y-f.point[1];t.onDrag(g,m,t.index)}},[t.draggingIndex,t.locations,t.onDrag,t.index]),o=C.useCallback(c=>{c.preventDefault(),c.currentTarget.cursor="pointer",t.onPointerUp(c,t.index),t.onDragEnd(c.clientX,c.clientY,t.index)},[t.onPointerUp,t.onDragEnd,t.index,e]),a=C.useCallback(c=>{c.preventDefault(),t.onPointerEnter(c,t.index),n(t.index)},[t.onPointerEnter,t.index]),l=C.useCallback(c=>{c.preventDefault(),t.onPointerLeave(c,t.index),n(null)},[t.onPointerLeave,t.index]);return Bt(Xt.Container,{position:{x:r.point[0],y:r.point[1]},interactive:!0,eventMode:"static",children:[K(Xt.Graphics,{draw:c=>{const u=t.locations[t.index];c.clear(),u.manufactureShare0<u.manufactureShare?c.lineStyle(1,255,.5):c.lineStyle(0,0,.1),c.beginFill(1668818,.25),c.drawCircle(0,0,100*u.manufactureShare),c.endFill()}}),K(Xt.Sprite,{texture:t.cityTexture,width:20,height:20,anchor:{x:.5,y:.5},alpha:t.draggingIndex===t.index?.3:1,interactive:!0,eventMode:"static",onpointerdown:i,onpointerupoutside:o,onmouseup:o,onpointerenter:a,onpointerleave:l,onglobalpointermove:s}),K(Xt.Text,{text:`#${t.index}`,position:{x:0,y:20},anchor:{x:.5,y:.5},style:twe}),e===t.index&&K(Xt.Text,{text:r.label,position:{x:-10,y:45},anchor:{x:0,y:.5},style:nwe})]},t.index)};var tW={},nW={};const rW=dn(Wve),iW=dn($_e),sW=dn(X_e),oW=dn(q_e),aW=dn(Q_e),lW=dn(txe),cW=dn(rxe);var hwe=rW,dwe=iW,r4=sW,fwe=oW,pwe=aW,gwe=lW,mwe=cW;const dR={AlphaFilter:dwe.AlphaFilter,BlurFilter:r4.BlurFilter,BlurFilterPass:r4.BlurFilterPass,ColorMatrixFilter:fwe.ColorMatrixFilter,DisplacementFilter:pwe.DisplacementFilter,FXAAFilter:gwe.FXAAFilter,NoiseFilter:mwe.NoiseFilter};Object.entries(dR).forEach(([t,e])=>{Object.defineProperty(dR,t,{get(){return hwe.utils.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e}})});nW.filters=dR;const ywe=dn(mxe),vwe=dn(Q1e),bwe=dn(k1e),_we=dn(Bxe),xwe=dn(qve),wwe=dn(cxe),Ewe=dn(zxe),Swe=dn($1e),Twe=dn(a1e),Pwe=dn(j1e),Cwe=dn(H1e),Awe=dn(Kxe),Rwe=dn(Zve),Iwe=dn(W1e),Mwe=dn(Z1e),Owe=dn(Qxe),Lwe=dn(t1e),kwe=dn(N1e),Dwe=dn(ewe);(function(t){var e=nW,n=ywe,r=vwe,i=bwe,s=_we,o=rW,a=xwe,l=wwe,c=Ewe,u=iW,h=sW,f=oW,g=aW,m=lW,y=cW,x=Swe,b=Twe,w=Pwe,v=Cwe,E=Awe,T=Rwe,P=Iwe,R=Mwe,M=Owe,k=Lwe,O=kwe,F=Dwe;t.filters=e.filters,Object.keys(n).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return n[I]}})}),Object.keys(r).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return r[I]}})}),Object.keys(i).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return i[I]}})}),Object.keys(s).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return s[I]}})}),Object.keys(o).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return o[I]}})}),Object.keys(a).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return a[I]}})}),Object.keys(l).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return l[I]}})}),Object.keys(c).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return c[I]}})}),Object.keys(u).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return u[I]}})}),Object.keys(h).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return h[I]}})}),Object.keys(f).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return f[I]}})}),Object.keys(g).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return g[I]}})}),Object.keys(m).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return m[I]}})}),Object.keys(y).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return y[I]}})}),Object.keys(x).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return x[I]}})}),Object.keys(b).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return b[I]}})}),Object.keys(w).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return w[I]}})}),Object.keys(v).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return v[I]}})}),Object.keys(E).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return E[I]}})}),Object.keys(T).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return T[I]}})}),Object.keys(P).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return P[I]}})}),Object.keys(R).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return R[I]}})}),Object.keys(M).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return M[I]}})}),Object.keys(k).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return k[I]}})}),Object.keys(O).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return O[I]}})}),Object.keys(F).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return F[I]}})})})(tW);var L_=es&&es.__assign||function(){return L_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L_.apply(this,arguments)},uW=void 0,Ca=tW,Nwe={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},Bwe=function(){function t(e,n){n===void 0&&(n={}),this.cursor=new Ca.Point,this.scale=1,this.graphics=e,n=L_(L_({},Nwe),n),this.dash=n.dash,this.dashSize=this.dash.reduce(function(r,i){return r+i}),this.useTexture=n.useTexture,this.options=n,this.setLineStyle()}return t.prototype.setLineStyle=function(){var e=this.options;if(this.useTexture){var n=t.getTexture(e,this.dashSize);this.graphics.lineTextureStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,texture:n,alignment:e.alignment}),this.activeTexture=n}else this.graphics.lineStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,cap:e.cap,join:e.join,alignment:e.alignment});this.scale=e.scale},t.distance=function(e,n,r,i){return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-n,2))},t.prototype.moveTo=function(e,n){return this.lineLength=0,this.cursor.set(e,n),this.start=new Ca.Point(e,n),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},t.prototype.lineTo=function(e,n,r){typeof this.lineLength===void 0&&this.moveTo(0,0);var i=t.distance(this.cursor.x,this.cursor.y,e,n),s=Math.atan2(n-this.cursor.y,e-this.cursor.x),o=r&&e===this.start.x&&n===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(s),o&&this.dash.length%2===0){var a=Math.min(this.dash[this.dash.length-1],i);this.graphics.lineTo(e-Math.cos(s)*a,n-Math.sin(s)*a),this.graphics.closePath()}else this.graphics.lineTo(e,n);else{for(var l=Math.cos(s),c=Math.sin(s),u=this.cursor.x,h=this.cursor.y,f=this.lineLength%(this.dashSize*this.scale),g=0,m=0,y=0,x=0;x<this.dash.length;x++){var b=this.dash[x]*this.scale;if(f<y+b){g=x,m=f-y;break}else y+=b}for(var w=i;w>0;){var b=this.dash[g]*this.scale-m,v=w>b?b:w;if(o){var E=t.distance(u+l*v,h+c*v,this.start.x,this.start.y);if(E<=v){if(g%2===0){var T=t.distance(u,h,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;u+=l*T,h+=c*T,this.graphics.lineTo(u,h)}break}}u+=l*v,h+=c*v,g%2?this.graphics.moveTo(u,h):this.graphics.lineTo(u,h),w-=v,g++,g=g===this.dash.length?0:g,m=0}}return this.lineLength+=i,this.cursor.set(e,n),this},t.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},t.prototype.drawCircle=function(e,n,r,i,s){i===void 0&&(i=80);var o=Math.PI*2/i,a=0,l;s?(l=new Ca.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),s.apply(l,l),this.moveTo(l[0],l[1])):(l=new Ca.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),this.moveTo(l.x,l.y)),a+=o;for(var c=1;c<i+1;c++){var u=c===i?l:[e+Math.cos(a)*r,n+Math.sin(a)*r];this.lineTo(u[0],u[1]),a+=o}return this},t.prototype.drawEllipse=function(e,n,r,i,s,o){s===void 0&&(s=80);for(var a=Math.PI*2/s,l,c=new Ca.Point,u=0;u<Math.PI*2;u+=a){var h=e-r*Math.sin(u),f=n-i*Math.cos(u);o&&(c.set(h,f),o.apply(c,c),h=c.x,f=c.y),u===0?(this.moveTo(h,f),l={x:h,y:f}):this.lineTo(h,f)}return this.lineTo(l.x,l.y,!0),this},t.prototype.drawPolygon=function(e,n){var r=new Ca.Point;if(typeof e[0]=="number")if(n){r.set(e[0],e[1]),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=2;i<e.length;i+=2)r.set(e[i],e[i+1]),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-2)}else{this.moveTo(e[0],e[1]);for(var i=2;i<e.length;i+=2)this.lineTo(e[i],e[i+1],i===e.length-2)}else if(n){var s=e[0];r.copyFrom(s),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=1;i<e.length;i++){var o=e[i];r.copyFrom(o),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-1)}}else{var s=e[0];this.moveTo(s.x,s.y);for(var i=1;i<e.length;i++){var a=e[i];this.lineTo(a.x,a.y,i===e.length-1)}}return this},t.prototype.drawRect=function(e,n,r,i,s){if(s){var o=new Ca.Point;o.set(e,n),s.apply(o,o),this.moveTo(o.x,o.y),o.set(e+r,n),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e+r,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n),s.apply(o,o),this.lineTo(o.x,o.y,!0)}else this.moveTo(e,n).lineTo(e+r,n).lineTo(e+r,n+i).lineTo(e,n+i).lineTo(e,n,!0);return this},t.prototype.adjustLineStyle=function(e){var n=this.graphics.line;n.matrix=new Ca.Matrix,e&&n.matrix.rotate(e),this.scale!==1&&n.matrix.scale(this.scale,this.scale);var r=-this.lineLength;n.matrix.translate(this.cursor.x+r*Math.cos(e),this.cursor.y+r*Math.sin(e)),this.graphics.lineStyle(n)},t.getTexture=function(e,n){var r=e.dash.toString();if(t.dashTextureCache[r])return t.dashTextureCache[r];var i=document.createElement("canvas");i.width=n,i.height=Math.ceil(e.width);var s=i.getContext("2d");if(!s){console.warn("Did not get context from canvas");return}s.strokeStyle="white",s.globalAlpha=e.alpha,s.lineWidth=e.width;var o=0,a=e.width/2;s.moveTo(o,a);for(var l=0;l<e.dash.length;l+=2)o+=e.dash[l],s.lineTo(o,a),e.dash.length!==l+1&&(o+=e.dash[l+1],s.moveTo(o,a));s.stroke();var c=t.dashTextureCache[r]=Ca.Texture.from(i);return c.baseTexture.scaleMode=Ca.SCALE_MODES.NEAREST,c},t.dashTextureCache={},t}();uW=Bwe;const i4=t=>{if(t.focusedIndices.length<=1||!t.adjacencyMatrix||!t.distanceMatrix||!t.predecessorMatrix)return;let e=t.focusedIndices[0];const n=t.focusedIndices[1];let r=e,i=Mf(t.locations,e);if(!i)return;const s=[i],o=[];for(let c=0;r!==n&&c<t.locations.length;c++){const u=t.predecessorMatrix[r][n];if(u===-1)break;const h=t.locations[u];h&&(s.push(h),Dl(t.distanceMatrix[e][n])||o.push({text:t.adjacencyMatrix[r][u].toFixed(2),x:(i.point[0]+h.point[0])/2,y:(i.point[1]+h.point[1])/2}),r=u,i=h)}const a=c=>{const u=t.focusedIndices[0],h=t.focusedIndices[1];let f=Mf(t.locations,u);if(c.clear(),f&&t.distanceMatrix&&t.predecessorMatrix&&t.predecessorMatrix[u][h]!==-1&&u<t.locations.length&&h<t.locations.length){c.lineStyle({width:2,color:t.color||16755200,alpha:.25,alignment:.5,cap:Qo.ROUND,join:Bi.ROUND}),c.moveTo(f.point[0],f.point[1]),s.forEach(m=>c.lineTo(m.point[0],m.point[1]));const g=new uW(c,{dash:[1,15],width:10,color:t.color||16711680,alpha:.25,alignment:.5,cap:Qo.ROUND,join:Bi.ROUND});g.moveTo(t.locations[u].point[0],t.locations[u].point[1]),g.lineTo(t.locations[h].point[0],t.locations[h].point[1])}},l=t.distanceMatrix[e][n];return Bt(Xt.Container,{children:[K(Xt.Graphics,{draw:a}),Bt(Xt.Container,{children:[o.map((c,u)=>K(Xt.Text,{text:c.text,position:{x:c.x,y:c.y},anchor:{x:.5,y:.5},style:jo({fontSize:11,alpha:1,dropShadow:!0,dropShadowAlpha:.5,dropShadowColor:16776960,fill:16776960})},u)),!Dl(l)&&l>0&&e<t.locations.length&&n<t.locations.length&&K(Xt.Text,{text:t.distanceMatrix[e][n].toFixed(2),position:{x:(t.locations[e].point[0]+t.locations[n].point[0])/2,y:(t.locations[e].point[1]+t.locations[n].point[1])/2},anchor:{x:.5,y:.5},style:jo({fontSize:15,fill:16711680,dropShadow:!1,dropShadowAlpha:.1,dropShadowBlur:1,dropShadowColor:0})})]})]})},Fwe=t=>{const[e,n]=C.useState(null);return K(Xt.Container,{children:K(Xt.Graphics,{draw:r=>{r.clear();const i=100,s=Math.ceil(2e3/i)+1,o=Math.ceil(2e3/i)+1;for(let a=-s;a<s;a++)for(let l=-o;l<o;l++)(a+l)%2===0?r.beginFill(16777215,.001+t.backgroundAlpha):r.beginFill(255,.001+.05*t.backgroundAlpha),r.drawRect(a*i,l*i,i,i),r.endFill()},eventMode:"static",onmousedown:r=>{n([r.clientX,r.clientY])},onmouseup:r=>{e&&r.clientX===e[0]&&r.clientY===e[1]&&(n(null),t.clearSelection())}})})},zwe=yt.from(CH),Uwe=An.memo(t=>{const e=C.useRef(null),[n,r]=C.useState(0),i=t.sessionState,s=i.locations,o=i.edges,a=t.focusedIndices,l=t.selectedIndices,c=t.draggingIndex!==null?i.locations[t.draggingIndex]:null,u=t.focusedIndices.length>0?Mf(i.locations,t.focusedIndices[0]):null,h=t.selectedIndices.length>0?Mf(i.locations,t.selectedIndices[0]):null,f=C.useCallback(()=>{r(.5)},[]),g=C.useCallback(()=>{r(0)},[]),m=C.useCallback((D,N)=>{e.current.style.cursor="pointer",c||t.onFocus([N])},[t.onFocus]),y=C.useCallback((D,N)=>{e.current.style.cursor="default",c||t.onUnfocus([N])},[t.onUnfocus]),x=C.useCallback((D,N)=>{},[]),b=C.useCallback((D,N)=>{D.preventDefault(),e.current.style.cursor="default",t.onPointerUp(D.clientX,D.clientY,N)},[t.onPointerUp]),w=C.useCallback(D=>{},[]),v=C.useCallback(()=>{t.onClearSelection()},[t.onClearSelection]),E=u??c??h,T=a.length>0?a[0]:t.draggingIndex&&t.draggingIndex>=0?t.draggingIndex:l.length>0?l[0]:-1,P=C.useCallback(D=>{t.overrideViewportCenter(D)},[t.overrideViewportCenter]),R=C.useCallback(()=>{f(),e.current.style.cursor="grabbing"},[]),M=C.useCallback(()=>{g(),e.current.style.cursor="default"},[t.viewportCenter]),k=C.useCallback(()=>{e.current.style.cursor="default"},[]),O=C.useCallback(D=>{f()},[]),F=C.useCallback(D=>{t.onMoved({x:D.viewport.center.x,y:D.viewport.center.y,zoom:D.viewport.scale.x})},[]),I=C.useCallback(({x:D,y:N,zoom:j})=>{t.onMovedEnd({x:D,y:N,zoom:j})},[]);return K("div",{ref:e,style:{zIndex:100},children:Bt(Xt.Stage,{width:t.width,height:t.height,options:{backgroundColor:Y8,backgroundAlpha:.1},children:[Bt(N_e,{pause:t.draggingIndex!==null,boundingBox:t.boundingBox,screenWidth:t.width,screenHeight:t.height,viewportCenter:t.viewportCenter,onSetViewportCenter:P,onDragStart:R,onDragEnd:M,onPinchStart:f,onPinchEnd:g,onSnapStart:f,onSnapEnd:g,onSnapZoomStart:f,onSnapZoomEnd:g,onZoomed:O,onZoomedEnd:g,onMouseUp:k,onMoved:F,onMovedEnd:I,children:[K(Fwe,{backgroundAlpha:n,clearSelection:v}),K(swe,{focusedIndices:a,locations:s,width:t.width,height:t.height}),K(owe,{selectedIndices:l,focusedIndices:a,locations:s,width:t.width,height:t.height}),a.length===2&&t.matrices.distanceMatrix&&a[0]<t.matrices.distanceMatrix.length&&a[1]<t.matrices.distanceMatrix[a[0]].length&&!Dl(t.matrices.distanceMatrix[a[0]][a[1]])&&K(i4,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:a,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix}),l.length===2&&!Dl(t.matrices.distanceMatrix[l[0]][l[1]])&&K(i4,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:l,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix,color:16724787}),K(awe,{edges:o,locations:s,focusedIndices:a,selectedIndices:l}),K(cwe,{locations:s,selectedIndices:l,draggingIndex:t.draggingIndex,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDrag:t.onDrag,width:t.width,height:t.height,cityTexture:zwe,onPointerEnter:m,onPointerLeave:y,onPointerDown:x,onPointerUp:b,onPointerMove:w})]}),E&&K(iwe,{index:T,city:E,x:140,y:t.height-155})]})})});function hW({width:t,height:e,sessionState:n,uiState:r,matrices:i,overrideViewportCenter:s,onDragStart:o,onDragEnd:a,onDrag:l,onFocus:c,onUnfocus:u,onPointerUp:h,onClearSelection:f,onMovedEnd:g,onMoved:m}){return K(Uwe,{width:t,height:e,boundingBox:{...W8(n.locations),paddingMarginRatio:q8},onDragStart:o,onDrag:l,onMoved:m,onMovedEnd:g,onDragEnd:a,onFocus:c,onUnfocus:u,onPointerUp:h,onClearSelection:f,draggingIndex:r.draggingIndex,sessionState:n,viewportCenter:r.viewportCenter,overrideViewportCenter:s,selectedIndices:r.selectedIndices,focusedIndices:r.focusedIndices,matrices:i})}const $we=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=O0(),[s,o]=tI(oh);return C.useEffect(()=>{o(a=>{const l=Lf[li.Graph][0],c=gI({parameterSet:l,locations:[],edges:[],locationSerialNumber:0},[],4);return console.log(c),{...a,...c}})},[]),K(vM,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(230,255,230,0.6)",backgroundPanel:a=>K(hW,{...a})})};function k_(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const aO=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),s4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);s4&&parseFloat(s4[1]);const jwe="3.4.14";function Ul(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const cb=typeof process!="object"||String(process)!=="[object process]"||process.browser,Vwe=typeof window<"u"&&typeof window.orientation<"u",o4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);o4&&parseFloat(o4[1]);function g0(t){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g0(t)}function Gwe(t,e){if(g0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(g0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hwe(t){var e=Gwe(t,"string");return g0(e)=="symbol"?e:String(e)}function B(t,e,n){return e=Hwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Wwe{constructor(e,n){B(this,"name",void 0),B(this,"workerThread",void 0),B(this,"isRunning",!0),B(this,"result",void 0),B(this,"_resolve",()=>{}),B(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Ul(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ul(this.isRunning),this.isRunning=!1,this._reject(e)}}let XT=class{terminate(){}};const YT=new Map;function Xwe(t){Ul(t.source&&!t.url||!t.source&&t.url);let e=YT.get(t.source||t.url);return e||(t.url&&(e=Ywe(t.url),YT.set(t.url,e)),t.source&&(e=dW(t.source),YT.set(t.source,e))),Ul(e),e}function Ywe(t){if(!t.startsWith("http"))return t;const e=qwe(t);return dW(e)}function dW(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function qwe(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function fW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(a4(t))r.add(t);else if(a4(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)fW(t[i],e,r)}}return n===void 0?Array.from(r):[]}function a4(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const qT=()=>{};class fR{static isSupported(){return typeof Worker<"u"&&cb||typeof XT<"u"&&!cb}constructor(e){B(this,"name",void 0),B(this,"source",void 0),B(this,"url",void 0),B(this,"terminated",!1),B(this,"worker",void 0),B(this,"onMessage",void 0),B(this,"onError",void 0),B(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Ul(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=qT,this.onError=s=>console.log(s),this.worker=cb?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=qT,this.onError=qT,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||fW(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=Xwe({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new XT(r,{eval:!1})}else if(this.source)e=new XT(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}let Kwe=class{static isSupported(){return fR.isSupported()}constructor(e){B(this,"name","unnamed"),B(this,"source",void 0),B(this,"url",void 0),B(this,"maxConcurrency",1),B(this,"maxMobileConcurrency",1),B(this,"onDebug",()=>{}),B(this,"reuseWorkers",!0),B(this,"props",{}),B(this,"jobQueue",[]),B(this,"idleQueue",[]),B(this,"count",0),B(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new Wwe(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new fR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Vwe?this.maxMobileConcurrency:this.maxConcurrency}};const Zwe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class El{static isSupported(){return fR.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return El._workerFarm=El._workerFarm||new El({}),El._workerFarm.setProps(e),El._workerFarm}constructor(e){B(this,"props",void 0),B(this,"workerPools",new Map),this.props={...Zwe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new Kwe({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}B(El,"_workerFarm",void 0);const Qwe="latest";function Jwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=Qwe);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Ul(i),i}function eEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jwe;Ul(t,"no worker provided");const n=t.version;return!(!e||!n)}function tEe(t,e){return!El.isSupported()||!cb&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function nEe(t,e,n,r,i){const s=t.id,o=Jwe(t,n),l=El.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",rEe.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function rEe(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function iEe(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function sEe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function oEe(t){const e=[];for await(const n of t)e.push(n);return sEe(...e)}let aEe="";const l4={};function lEe(t){for(const e in l4)if(t.startsWith(e)){const n=l4[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(aEe).concat(t)),t}function cEe(t){return t&&typeof t=="object"&&t.isBuffer}function pW(t){if(cEe(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function gW(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function uEe(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const hEe=t=>typeof t=="boolean",bm=t=>typeof t=="function",sy=t=>t!==null&&typeof t=="object",c4=t=>sy(t)&&t.constructor==={}.constructor,dEe=t=>t&&typeof t[Symbol.iterator]=="function",fEe=t=>t&&typeof t[Symbol.asyncIterator]=="function",Bh=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Fh=t=>typeof Blob<"u"&&t instanceof Blob,pEe=t=>t&&typeof t=="object"&&t.isBuffer,gEe=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||sy(t)&&bm(t.tee)&&bm(t.cancel)&&bm(t.getReader),mEe=t=>sy(t)&&bm(t.read)&&bm(t.pipe)&&hEe(t.readable),mW=t=>gEe(t)||mEe(t),yEe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,vEe=/^([-\w.]+\/[-\w.+]+)/;function bEe(t){const e=vEe.exec(t);return e?e[1]:t}function u4(t){const e=yEe.exec(t);return e?e[1]:""}const yW=/\?.*/;function _Ee(t){const e=t.match(yW);return e&&e[0]}function lO(t){return t.replace(yW,"")}function Hw(t){return Bh(t)?t.url:Fh(t)?t.name||"":typeof t=="string"?t:""}function cO(t){if(Bh(t)){const e=t,n=e.headers.get("content-type")||"",r=lO(e.url);return bEe(n)||u4(r)}return Fh(t)?t.type||"":typeof t=="string"?u4(t):""}function xEe(t){return Bh(t)?t.headers["content-length"]||-1:Fh(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function vW(t){if(Bh(t))return t;const e={},n=xEe(t);n>=0&&(e["content-length"]=String(n));const r=Hw(t),i=cO(t);i&&(e["content-type"]=i);const s=await SEe(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function wEe(t){if(!t.ok){const e=await EEe(t);throw new Error(e)}}async function EEe(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function SEe(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=TEe(n);return"data:base64,".concat(r)}return null}function TEe(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function h4(t,e){if(typeof t=="string"){t=lEe(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await vW(t)}function PEe(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function oy(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||PEe()}const y1=globalThis.window||globalThis.self||globalThis.global,yg=globalThis.process||{},bW=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";oy();function CEe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let AEe=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=CEe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function REe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function IEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function KT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let D_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(D_||(D_={}));const MEe=10;function d4(t){return typeof t!="string"?t:(t=t.toUpperCase(),D_[t]||D_.WHITE)}function OEe(t,e,n){if(!oy&&typeof t=="string"){if(e){const r=d4(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=d4(n);t="\x1B[".concat(r+MEe,"m").concat(t,"\x1B[49m")}}return t}function LEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function N_(t,e){if(!t)throw new Error(e||"Assertion failed")}function _d(){let t;if(oy()&&y1.performance){var e,n;t=y1==null||(e=y1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in yg){var r;const i=yg==null||(r=yg.hrtime)===null||r===void 0?void 0:r.call(yg);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const xd={debug:oy()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},kEe={enabled:!0,level:0};function lo(){}const f4={},p4={once:!0};let uO=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=bW,this._startTs=_d(),this._deltaTs=_d(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new AEe("__probe-".concat(this.id,"__"),kEe),this.timeStamp("".concat(this.id," started")),LEe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((_d()-this._startTs).toPrecision(10))}getDelta(){return Number((_d()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){N_(e,n)}warn(e){return this._getLogFunction(0,e,xd.warn,arguments,p4)}error(e){return this._getLogFunction(0,e,xd.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,xd.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,xd.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,xd.debug||xd.info,arguments,p4)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||lo,r&&[r],{tag:FEe(n)}):lo}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?oy()?BEe({image:i,message:s,scale:o}):NEe():lo}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||lo)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=g4({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||lo)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=_W(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=g4({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,N_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=_d();const o=s.tag||s.message;if(s.once&&o)if(!f4[o])f4[o]=_d();else return lo;return n=DEe(this.id,s.message,s),r.bind(console,n,...s.args)}return lo}};uO.VERSION=bW;function _W(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return N_(Number.isFinite(e)&&e>=0),e}function g4(t){const{logLevel:e,message:n}=t;t.logLevel=_W(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return N_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function DEe(t,e,n){if(typeof e=="string"){const r=n.time?IEe(REe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=OEe(e,n.color,n.background)}return e}function NEe(t){return console.warn("removed"),lo}function BEe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=KT(s,n,r);console.log(...o)},s.src=e,lo}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...KT(e,n,r)),lo;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...KT(s,n,r)),s.src=e.toDataURL(),lo}return lo}function FEe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const m4=new uO({id:"loaders.gl"});class zEe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class UEe{constructor(){B(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const xW={fetch:null,mimeType:void 0,nothrow:!1,log:new UEe,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:aO,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},$Ee={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function wW(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const EW=()=>{const t=wW();return t.globalOptions=t.globalOptions||{...xW},t.globalOptions};function jEe(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],VEe(t,n),HEe(e,t,r)}function VEe(t,e){y4(t,null,xW,$Ee,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};y4(r,n.id,i,s,e)}}function y4(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&sy(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)m4.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const h=GEe(a,i);m4.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}}function GEe(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function HEe(t,e,n){const i={...t.options||{}};return WEe(i,n),i.log===null&&(i.log=new zEe),v4(i,EW()),v4(i,e),i}function v4(t,e){for(const n in e)if(n in e){const r=e[n];c4(r)&&c4(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function WEe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function hO(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function dO(t){var e,n;k_(t,"null loader"),k_(hO(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const SW=()=>{const t=wW();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function XEe(t){const e=SW();t=Array.isArray(t)?t:[t];for(const n of t){const r=dO(n);e.find(i=>r===i)||e.unshift(r)}}function YEe(){return SW()}const qEe=new uO({id:"loaders.gl"}),KEe=/\.([^.]+)$/;async function ZEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!TW(t))return null;let i=b4(t,e,{...n,nothrow:!0},r);if(i)return i;if(Fh(t)&&(t=await t.slice(0,10).arrayBuffer(),i=b4(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(PW(t));return i}function b4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!TW(t))return null;if(e&&!Array.isArray(e))return dO(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...YEe()),JEe(i);const s=QEe(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(PW(t));return s}function QEe(t,e,n,r){const i=Hw(t),s=cO(t),o=lO(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=ZT(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||eSe(e,o),l=l||(a?"matched url ".concat(o):""),a=a||ZT(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||nSe(e,t),l=l||(a?"matched initial data ".concat(CW(t)):""),a=a||ZT(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;qEe.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function TW(t){return!(t instanceof Response&&t.status===204)}function PW(t){const e=Hw(t),n=cO(t);let r="No valid loader found (";r+=e?"".concat(gW(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?CW(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function JEe(t){for(const e of t)dO(e)}function eSe(t,e){const n=e&&KEe.exec(e),r=n&&n[1];return r?tSe(t,r):null}function tSe(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function ZT(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function nSe(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(rSe(e,n))return n}else if(ArrayBuffer.isView(e)){if(_4(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&_4(e,0,n))return n;return null}function rSe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function _4(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>iSe(t,e,n,i))}function iSe(t,e,n,r){if(r instanceof ArrayBuffer)return iEe(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=pR(t,e,r.length);return r===i;default:return!1}}function CW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?pR(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?pR(t,0,e):""}function pR(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const sSe=256*1024;function*oSe(t,e){const n=(e==null?void 0:e.chunkSize)||sSe;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const aSe=256*1024;function lSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=aSe}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const cSe=1024*1024;async function*uSe(t,e){const n=(e==null?void 0:e.chunkSize)||cSe;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function x4(t,e){return aO?hSe(t,e):dSe(t)}async function*hSe(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield pW(o)}}catch{n.releaseLock()}}async function*dSe(t,e){for await(const n of t)yield pW(n)}function fSe(t,e){if(typeof t=="string")return oSe(t,e);if(t instanceof ArrayBuffer)return lSe(t,e);if(Fh(t))return uSe(t,e);if(mW(t))return x4(t,e);if(Bh(t))return x4(t.body,e);throw new Error("makeIterator")}const AW="Cannot convert supplied data type";function pSe(t,e,n){if(e.text&&typeof t=="string")return t;if(pEe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(AW)}async function gSe(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return pSe(t,e);if(Fh(t)&&(t=await vW(t)),Bh(t)){const i=t;return await wEe(i),e.binary?await i.arrayBuffer():await i.text()}if(mW(t)&&(t=fSe(t,n)),dEe(t)||fEe(t))return oEe(t);throw new Error(AW)}function RW(t,e){const n=EW(),r=t||n;return typeof r.fetch=="function"?r.fetch:sy(r.fetch)?i=>h4(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:h4}function mSe(t,e,n){if(n)return n;const r={fetch:RW(e,t),...t};if(r.url){const i=lO(r.url);r.baseUrl=i,r.queryString=_Ee(r.url),r.filename=gW(i),r.baseUrl=uEe(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function ySe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function fO(t,e,n,r){Ul(!r||typeof r=="object"),e&&!Array.isArray(e)&&!hO(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=Hw(t),o=ySe(e,r),a=await ZEe(t,o,n);return a?(n=jEe(n,a,o,i),r=mSe({url:i,parse:fO,loaders:o},n,r||null),await vSe(a,t,n,r)):null}async function vSe(t,e,n,r){if(eEe(t),Bh(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,h=Object.fromEntries(i.headers.entries());r.response={headers:h,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await gSe(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(tEe(t,n))return await nEe(t,e,n,r,fO);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Ul(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function gR(t,e,n,r){!Array.isArray(e)&&!hO(e)&&(n=e,e=void 0);const i=RW(n);let s=t;return typeof t=="string"&&(s=await i(t)),Fh(t)&&(s=await i(t)),await fO(s,e,n)}const bSe="3.4.14",{_parseImageNode:_Se}=globalThis,mR=typeof Image<"u",yR=typeof ImageBitmap<"u",xSe=!!_Se,vR=aO?!0:xSe;function wSe(t){switch(t){case"auto":return yR||mR||vR;case"imagebitmap":return yR;case"image":return mR;case"data":return vR;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function ESe(){if(yR)return"imagebitmap";if(mR)return"image";if(vR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function SSe(t){const e=PSe(t);if(!e)throw new Error("Not an image");return e}function TSe(t){switch(SSe(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function PSe(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const CSe=/^data:image\/svg\+xml/,ASe=/\.svg((\?|#).*)?$/;function pO(t){return t&&(CSe.test(t)||ASe.test(t))}function RSe(t,e){if(pO(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return IW(t,e)}function IW(t,e){if(pO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function MW(t,e,n){const r=RSe(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await ISe(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function ISe(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const MSe={};let w4=!0;async function OSe(t,e,n){let r;pO(n)?r=await MW(t,e,n):r=IW(t,n);const i=e&&e.imagebitmap;return await LSe(r,i)}async function LSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((kSe(e)||!w4)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),w4=!1}return await createImageBitmap(t)}function kSe(t){for(const e in t||MSe)return!1;return!0}function DSe(t){return!zSe(t,"ftyp",4)||!(t[8]&96)?null:NSe(t)}function NSe(t){switch(BSe(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function BSe(t,e,n){return String.fromCharCode(...t.slice(e,n))}function FSe(t){return[...t].map(e=>e.charCodeAt(0))}function zSe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=FSe(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const $a=!1,_m=!0;function OW(t){const e=ay(t);return $Se(e)||GSe(e)||jSe(e)||VSe(e)||USe(e)}function USe(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=DSe(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function $Se(t){const e=ay(t);return e.byteLength>=24&&e.getUint32(0,$a)===2303741511?{mimeType:"image/png",width:e.getUint32(16,$a),height:e.getUint32(20,$a)}:null}function jSe(t){const e=ay(t);return e.byteLength>=10&&e.getUint32(0,$a)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,_m),height:e.getUint16(8,_m)}:null}function VSe(t){const e=ay(t);return e.byteLength>=14&&e.getUint16(0,$a)===16973&&e.getUint32(2,_m)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,_m),height:e.getUint32(22,_m)}:null}function GSe(t){const e=ay(t);if(!(e.byteLength>=3&&e.getUint16(0,$a)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=HSe();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,$a);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,$a),width:e.getUint16(s+7,$a)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,$a)}return null}function HSe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function ay(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function WSe(t,e){const{mimeType:n}=OW(t)||{},r=globalThis._parseImageNode;return k_(r),await r(t,n)}async function XSe(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=YSe(i);let a;switch(o){case"imagebitmap":a=await OSe(t,e,s);break;case"image":a=await MW(t,e,s);break;case"data":a=await WSe(t);break;default:k_(!1)}return i==="data"&&(a=TSe(a)),a}function YSe(t){switch(t){case"auto":case"data":return ESe();default:return wSe(t),t}}const qSe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],KSe=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],ZSe={image:{type:"auto",decode:!0}},QSe={id:"image",module:"images",name:"Images",version:bSe,mimeTypes:KSe,extensions:qSe,parse:XSe,tests:[t=>!!OW(new DataView(t))],options:ZSe};function LW(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function ql(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||LW()}const ub={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},v1=ub.window||ub.self||ub.global,vg=ub.process||{},kW=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";ql();const QT=globalThis;function DW(t){if(!t&&!ql())return"Node";if(LW(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":QT.chrome?"Chrome":QT.safari?"Safari":QT.mozInnerScreenX?"Firefox":"Unknown"}function JSe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class eTe{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";B(this,"storage",void 0),B(this,"id",void 0),B(this,"config",void 0),this.storage=JSe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function tTe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function nTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function JT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let B_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(B_||(B_={}));function E4(t){return typeof t=="string"?B_[t.toUpperCase()]||B_.WHITE:t}function rTe(t,e,n){return!ql&&typeof t=="string"&&(e&&(e=E4(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=E4(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function iTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function F_(t,e){if(!t)throw new Error(e||"Assertion failed")}function wd(){let t;if(ql&&"performance"in v1){var e,n;t=v1==null||(e=v1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in vg){var r;const i=vg==null||(r=vg.hrtime)===null||r===void 0?void 0:r.call(vg);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Ed={debug:ql&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},sTe={enabled:!0,level:0};function co(){}const S4={},T4={once:!0};class gO{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};B(this,"id",void 0),B(this,"VERSION",kW),B(this,"_startTs",wd()),B(this,"_deltaTs",wd()),B(this,"_storage",void 0),B(this,"userData",{}),B(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new eTe("__probe-".concat(this.id,"__"),sTe),this.timeStamp("".concat(this.id," started")),iTe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((wd()-this._startTs).toPrecision(10))}getDelta(){return Number((wd()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){F_(e,n)}warn(e){return this._getLogFunction(0,e,Ed.warn,arguments,T4)}error(e){return this._getLogFunction(0,e,Ed.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Ed.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Ed.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Ed.debug||Ed.info,arguments,T4)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||co,r&&[r],{tag:cTe(n)}):co}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?ql?lTe({image:i,message:s,scale:o}):aTe():co}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||co)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=P4({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||co)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=NW(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=P4({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,F_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=wd();const o=s.tag||s.message;if(s.once)if(!S4[o])S4[o]=wd();else return co;return n=oTe(this.id,s.message,s),r.bind(console,n,...s.args)}return co}}B(gO,"VERSION",kW);function NW(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return F_(Number.isFinite(e)&&e>=0),e}function P4(t){const{logLevel:e,message:n}=t;t.logLevel=NW(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return F_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function oTe(t,e,n){if(typeof e=="string"){const r=n.time?nTe(tTe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=rTe(e,n.color,n.background)}return e}function aTe(t){return console.warn("removed"),co}function lTe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=JT(s,n,r);console.log(...o)},s.src=e,co}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...JT(e,n,r)),co;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...JT(s,n,r)),s.src=e.toDataURL(),co}return co}function cTe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const wn=new gO({id:"deck"});let bR={};function uTe(t){bR=t}function Ei(t,e,n,r){wn.level>0&&bR[t]&&bR[t].call(null,e,n,r)}function hTe(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const dTe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:hTe,parseTextSync:JSON.parse};function fTe(){const t="8.9.34",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(wn.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:wn,_registerLoggers:uTe},XEe([dTe,[QSe,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const pTe=fTe(),rn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(rn,"IDENTITY",{get:()=>(wn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ga={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},m0={common:0,meters:1,pixels:2},C4={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},ct=new gO({id:"luma.gl"});function Fi(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const gTe="Invalid WebGLRenderingContext",mTe="Requires WebGL2";function Ww(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function qt(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function yTe(t){return qt(t)?t:null}function Xw(t){return Fi(Ww(t),gTe),t}function zi(t){return Fi(qt(t),mTe),t}const Hg={};function vTe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function bTe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function _Te(t,e){Hg[t]=!0,e!==void 0&&vTe(e)}function xTe(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Hg[r]=!0);while(r!==0);for(r in Hg)if(Hg[r])return delete Hg[r],parseInt(r,10);return 0}}const ly=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};ly.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};ly.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const zh=function(e){const n=this;this.gl=e,xTe(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{bTe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};zh.prototype.VERTEX_ARRAY_BINDING_OES=34229;zh.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new ly(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};zh.prototype.createVertexArrayOES=function(){const e=new ly(this);return this.vertexArrayObjects.push(e),e};zh.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};zh.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof ly&&e.hasBeenBound&&e.ext===this)};zh.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){_Te(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let h=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function wTe(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new zh(this)),this.__OESVertexArrayObject))}}const A4="OES_element_index",R4="WEBGL_draw_buffers",ETe="EXT_disjoint_timer_query",STe="EXT_disjoint_timer_query_webgl2",TTe="EXT_texture_filter_anisotropic",I4="WEBGL_debug_renderer_info",PTe=35723,CTe=4352,ATe=36795,RTe=34047,ITe=37445,MTe=37446,Tn=t=>qt(t)?void 0:0,OTe={3074:t=>qt(t)?void 0:36064,[PTe]:t=>qt(t)?void 0:CTe,35977:Tn,32937:Tn,[ATe]:(t,e)=>{const n=qt(t)?t.getExtension(STe):t.getExtension(ETe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[ITe]:(t,e)=>{const n=t.getExtension(I4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[MTe]:(t,e)=>{const n=t.getExtension(I4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[RTe]:(t,e)=>{const n=t.luma.extensions[TTe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Tn,35071:Tn,37447:Tn,36063:(t,e)=>{if(!qt(t)){const n=t.getExtension(R4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Tn,35374:Tn,35377:Tn,34852:t=>{if(!qt(t)){const e=t.getExtension(R4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(A4)?2147483647:65535,33001:t=>t.getExtension(A4)?16777216:65535,33e3:t=>16777216,37157:Tn,35373:Tn,35657:Tn,36183:Tn,37137:Tn,34045:Tn,35978:Tn,35979:Tn,35968:Tn,35376:Tn,35375:Tn,35659:Tn,37154:Tn,35371:Tn,35658:Tn,35076:Tn,35077:Tn,35380:Tn};function LTe(t,e,n){const r=OTe[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const kTe="OES_vertex_array_object",BW="ANGLE_instanced_arrays",DTe="WEBGL_draw_buffers",NTe="EXT_disjoint_timer_query",BTe="EXT_texture_filter_anisotropic",FTe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function zTe(t,e){return{webgl2:qt(t),ext:t.getExtension(e)}}const FW={[kTe]:{meta:{suffix:"OES"},createVertexArray:()=>{Fi(!1,FTe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[BW]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Fi(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[DTe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Fi(!1)}},[NTe]:{meta:{suffix:"EXT"},createQuery:()=>{Fi(!1)},deleteQuery:()=>{Fi(!1)},beginQuery:()=>{Fi(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},eP={readBuffer:(t,e,n)=>{qt(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=zTe(t,BW);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!qt(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!qt(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[BTe];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:LTe,hint(t,e,n,r){return e(n,r)}};function UTe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(wTe(t),$Te(t),VTe(t,FW),jTe(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=UTe;function $Te(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function jTe(t,e){let{target:n,target2:r}=e;Object.keys(eP).forEach(i=>{if(typeof eP[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=eP[i].bind(null,t,s);n[i]=o,r[i]=o}})}function VTe(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&GTe(t,{extension:n,target:t.luma,target2:t})}function GTe(t,e){let{extension:n,target:r,target2:i}=e;const s=FW[n];Fi(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let h=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?h=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(h=s[c].bind(r))),h&&(r[c]=h,i[c]=h)}}const mO={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},dc=(t,e,n)=>e?t.enable(n):t.disable(n),M4=(t,e,n)=>t.hint(n,e),vs=(t,e,n)=>t.pixelStorei(n,e),HTe=(t,e)=>{const n=qt(t)?36009:36160;return t.bindFramebuffer(n,e)},WTe=(t,e)=>t.bindFramebuffer(36008,e);function bg(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const XTe={3042:dc,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:dc,2885:(t,e)=>t.cullFace(e),2929:dc,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:dc,35723:M4,36006:HTe,2886:(t,e)=>t.frontFace(e),33170:M4,2849:(t,e)=>t.lineWidth(e),32823:dc,32824:"polygonOffset",10752:"polygonOffset",35977:dc,32938:"sampleCoverage",32939:"sampleCoverage",3089:dc,3088:(t,e)=>t.scissor(...e),2960:dc,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:vs,3317:vs,37440:vs,37441:vs,37443:vs,3330:vs,3332:vs,3331:vs,36010:WTe,3314:vs,32878:vs,3316:vs,3315:vs,32877:vs,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=bg(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=bg(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=bg(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=bg(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=bg(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function er(t,e,n){return e[t]!==void 0?e[t]:n[t]}const YTe={blendEquation:(t,e,n)=>t.blendEquationSeparate(er(32777,e,n),er(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(er(32969,e,n),er(32968,e,n),er(32971,e,n),er(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(er(32824,e,n),er(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(er(32938,e,n),er(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,er(2962,e,n),er(2967,e,n),er(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,er(34816,e,n),er(36003,e,n),er(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,er(2964,e,n),er(2965,e,n),er(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,er(34817,e,n),er(34818,e,n),er(34819,e,n))},O4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Aa=(t,e)=>t.isEnabled(e),L4={3042:Aa,2884:Aa,2929:Aa,3024:Aa,32823:Aa,32926:Aa,32928:Aa,3089:Aa,2960:Aa,35977:Aa};function zW(t){for(const e in t)return!1;return!0}function qTe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function k4(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function KTe(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function ZTe(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class QTe{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?ePe(e):Object.assign({},mO),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Fi(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];$l(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Fi(s!==void 0);const o=e[s],a=this.cache[s];qTe(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function UW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Fi(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new QTe(t,{copyState:r}),ZTe(t);for(const s in O4){const o=O4[s];KTe(t,s,o)}k4(t,"getParameter"),k4(t,"isEnabled")}return t.state.enable=n,t}function JTe(t){t.state||UW(t,{copyState:!1}),t.state.push()}function D4(t){Fi(t.state),t.state.pop()}function $l(t,e){if(Fi(Ww(t),"setParameters requires a WebGL context"),zW(e))return;const n={};for(const i in e){const s=Number(i),o=XTe[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=YTe[i];s(t,e,r)}}function ePe(t,e){if(e=e||mO,typeof e=="number"){const i=e,s=L4[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=L4[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function tPe(t){$l(t,mO)}function aa(t,e,n){if(zW(e))return n(t);const{nocatch:r=!0}=e;JTe(t),$l(t,e);let i;if(r)i=n(t),D4(t);else try{i=n(t)}finally{D4(t)}return i}function Yf(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function tP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Yf(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return rPe(e,r,i,s,n)}function nPe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function rPe(t,e,n,r,i){const s=N4(t[0],e,n);let o=B4(t[1],e,r,i),a=N4(t[0]+1,e,n);const l=a===n-1?a:a-1;a=B4(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function N4(t,e,n){return Math.min(Math.round(t*e),n-1)}function B4(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const yO=ql(),iPe=yO&&typeof document<"u",$W={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function jW(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fi(yO,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},$W,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=lPe({canvas:s,width:e,height:n,onError:r});return i=aPe(o,t),i?(i=vO(i,t),cPe(i),i):null}function vO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||uPe(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},$W,e);const{manageState:n,debug:r}=e;return n&&UW(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return ct.log(1,...s)()}}),yO&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),ct.level=Math.max(ct.level,1)):ct.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function sPe(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function oPe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=nPe(e.useDevicePixels);hPe(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function aPe(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function lPe(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(iPe&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function cPe(t){const e=qt(t)?"WebGL2":"WebGL1",n=sPe(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";ct.info(1,"".concat(e).concat(i," context ").concat(r))()}function uPe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function hPe(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(ct.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(ct.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function F4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class z4{constructor(e,n){B(this,"name",void 0),B(this,"type",void 0),B(this,"sampleSize",1),B(this,"time",void 0),B(this,"count",void 0),B(this,"samples",void 0),B(this,"lastTiming",void 0),B(this,"lastSampleTime",void 0),B(this,"lastSampleCount",void 0),B(this,"_count",0),B(this,"_time",0),B(this,"_samples",0),B(this,"_startTime",0),B(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=F4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(F4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class bO{constructor(e){B(this,"id",void 0),B(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof z4?this.stats[n]=e:this.stats[n]=new z4(n,r)),this.stats[n]}}const xm="8.5.21",dPe="set luma.log.level=1 (or higher) to trace rendering";class fPe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new bO({id:e})),this.stats.get(e)}}const eh=new fPe;if(globalThis.luma&&globalThis.luma.VERSION!==xm)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(xm));globalThis.luma||(ql()&&ct.log(1,"luma.gl ".concat(xm," - ").concat(dPe))(),globalThis.luma=globalThis.luma||{VERSION:xm,version:xm,log:ct,stats:eh,globals:{modules:{},nodeIO:{}}});function pPe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function gPe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function Ze(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function nP(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return Ze(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function qc(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const rP={};function su(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";rP[t]=rP[t]||1;const e=rP[t]++;return"".concat(t,"-").concat(e)}function U4(t){return Ze(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function qf(t){let e=!0;for(const n in t){e=!1;break}return e}function VW(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw ct.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Sd="Resource subclass must define virtual methods";let Kl=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xw(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||su(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=nP(this.gl,e),Ze(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=qt(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=qt(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=r?qc(this.gl,l):l;o[h]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[h]=qc(this.gl,o[h]))}}return o}setParameter(e,n){e=nP(this.gl,e),Ze(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=qt(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=nP(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return VW(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Sd)}_deleteHandle(){throw new Error(Sd)}_bindHandle(e){throw new Error(Sd)}_getOptsFromHandle(){throw new Error(Sd)}_getParameter(e,n){throw new Error(Sd)}_setParameter(e,n){throw new Error(Sd)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=eh.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];eh.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=eh.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=eh.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const mPe="Failed to deduce GL constant from typed array";function _R(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(mPe)}}function y0(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function yPe(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function vPe(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function xR(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";ct.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];ct.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];ct.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const bPe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},_Pe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ps{static getBytesPerElement(e){return y0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Ze(e.size),y0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Ps(bPe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ps.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ps.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=xR("Accessor",e,_Pe),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const $4=10,GW={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},xPe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:GW},wPe={removedProps:GW};class xn extends Kl{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Ps.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Ps.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=xR("Buffer",e,xPe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=xR("Buffer",e,wPe),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Ps(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;Ze(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(zi(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return zi(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zi(this.gl);const s=y0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,Ze(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(Ze(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min($4,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;Ze(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,$4),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=_R(e);return Ze(s),this.setAccessor(new Ps(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Ze(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=y0(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Ps(this.accessor,{type:_R(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return ct.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ct.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ct.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ct.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ps(this.accessor,e),this}}const _O={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},HW={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},WW={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function EPe(t,e){const n=_O[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=qt(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function SPe(t,e){const n=_O[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const TPe=[9729,9728],j4=globalThis.WebGLBuffer||function(){};class Kf extends Kl{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&EPe(e,r),s=s&&(!i||SPe(e,r))),s}constructor(e,n){const{id:r=su("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(w=>this.initialize(Object.assign({},e,{pixels:w,data:w}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:h,height:f,dataFormat:g,type:m,compressed:y=!1,mipmaps:x=!0}=e;const{depth:b=0}=e;return{width:h,height:f,compressed:y,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:y,data:n,width:h,height:f}),this.width=h,this.height=f,this.depth=b,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),x&&this._isNPOT()&&(ct.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),x=!1,this._updateForNPOT(l)),this.mipmaps=x,this.setImageData({data:n,width:h,height:f,depth:b,format:s,type:m,dataFormat:g,border:o,mipmaps:x,parameters:c,compressed:y}),x&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(ct.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),aa(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;c||(c=r),{type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:f});const{gl:y}=this;y.bindTexture(this.target,this.handle);let x=null;({data:c,dataType:x}=this._getDataType({data:c,compressed:m}));let b,w=0;if(aa(this.gl,l,()=>{switch(x){case"null":y.texImage2D(n,i,s,h,f,o,g,u,c);break;case"typed-array":y.texImage2D(n,i,s,h,f,o,g,u,c,a);break;case"buffer":b=zi(y),b.bindBuffer(35052,c.handle||c),b.texImage2D(n,i,s,h,f,o,g,u,a),b.bindBuffer(35052,null);break;case"browser-object":qt(y)?y.texImage2D(n,i,s,h,f,o,g,u,c):y.texImage2D(n,i,s,g,u,c);break;case"compressed":for(const[v,E]of c.entries())y.compressedTexImage2D(n,v,E.format,E.width,E.height,o,E.data),w+=E.levelSize;break;default:Ze(!1,"Unknown image data type")}}),x==="compressed")this._trackAllocatedMemory(w,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const v=HW[this.dataFormat]||4,E=WW[this.type]||1;this._trackAllocatedMemory(this.width*this.height*v*E,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:y=this.border,parameters:x={}}=e;if({type:h,dataFormat:f,compressed:g,width:a,height:l}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:i,width:a,height:l}),Ze(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const b=i;i=b.data,a=b.shape[0],l=b.shape[1]}i instanceof xn&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),aa(this.gl,x,()=>{if(g)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,f,h,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,f,h,i,m);else if(i instanceof j4){const b=zi(this.gl);b.bindBuffer(35052,i),b.texSubImage2D(n,c,s,o,a,l,f,h,m),b.bindBuffer(35052,null)}else qt(this.gl)?zi(this.gl).texSubImage2D(n,c,s,o,a,l,f,h,i):this.gl.texSubImage2D(n,c,s,o,f,h,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ct.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof xn?{data:n.handle,dataType:"buffer"}:n instanceof j4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=_O[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},Ze(i,"Could not deduced texture size"),Ze(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),Ze(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Ze(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return qt(this.gl)||!this.width||!this.height?!1:!U4(this.width)||!U4(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:TPe.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let PPe="";function CPe(t,e){return Ze(typeof t=="string"),t=PPe+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class ua extends Kf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Kf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xw(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:CPe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const wR=[34069,34070,34071,34072,34073,34074];class XW extends Kf{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xw(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,h=await Promise.all(wR.map(f=>{const g=u[f];return Promise.all(Array.isArray(g)?g:[g])}));this.bind(),wR.forEach((f,g)=>{h[g].length>1&&this.opts.mipmaps!==!1&&ct.warn("".concat(this.id," has mipmap and multiple LODs."))(),h[g].forEach((m,y)=>{n&&r?c.texImage2D(f,y,a,n,r,o,a,l,m):c.texImage2D(f,y,a,a,l,m)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,h=s||o;return this.bind(),h instanceof Promise?h.then(f=>this.setImageDataForFace(Object.assign({},e,{face:n,data:f,pixels:f}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,h):u.texImage2D(n,0,l,l,c,h),this}}XW.FACES=wR;class APe extends Kf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zi(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:h,parameters:f={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),aa(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,h),h instanceof xn&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),h&&h.byteLength)this._trackAllocatedMemory(h.byteLength,"Texture");else{const g=HW[this.dataFormat]||4,m=WW[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*g*m,"Texture")}return this.loaded=!0,this}}const Mu="EXT_color_buffer_float",V4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Mu,bpp:2},33327:{gl2:Mu,bpp:4},34842:{gl2:Mu,bpp:8},33326:{gl2:Mu,bpp:4},33328:{gl2:Mu,bpp:8},34836:{gl2:Mu,bpp:16},35898:{gl2:Mu,bpp:4}};function RPe(t,e,n){const r=n[e];if(!r)return!1;const i=qt(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class nf extends Kl{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||RPe(e,n,V4)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return Ze(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*V4[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const IPe=256,MPe=1024,OPe=16384,G4=6144,H4=6145,W4=6146,X4=34041,YW="clear: bad arguments";function xO(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=OPe,n!==!0&&(s.clearColor=n)),r&&(o|=IPe,r!==!0&&(s.clearDepth=r)),i&&(o|=MPe,r!==!0&&(s.clearStencil=r)),Ze(o!==0,YW),aa(t,s,()=>{t.clear(o)})}function LPe(t){let{framebuffer:e=null,buffer:n=G4,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zi(t),aa(t,{framebuffer:e},()=>{switch(n){case G4:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case H4:t.clearBufferfv(H4,0,[i]);break;case W4:t.clearBufferiv(W4,0,[i]);break;case X4:const[s,o]=i;t.clearBufferfi(X4,0,s,o);break;default:Ze(!1,YW)}})}function kPe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Ze(!1),0}}function Yw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=DPe(t);Ze(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,s===36064&&g===null&&(s=1028),Ze(m[s]),c=c||m[s].type,o=NPe(o,c,i,a,l),c=c||_R(o);const y=f.bindFramebuffer(36160,g);return f.readPixels(n,r,a,l,i,c,o),f.bindFramebuffer(36160,y||null),h&&u.delete(),o}function Y4(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Yw(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=vPe({data:r,width:i,height:s}));yPe({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function DPe(t){return t instanceof kr?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:WPe(t),deleteFramebuffer:!0}}function NPe(t,e,n,r,i){if(t)return t;e=e||5121;const s=y0(e,{clamped:!1}),o=kPe(n);return new s(r*i*o)}const kn={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function BPe(t){const e=new ua(t,{format:6408,type:5126,dataFormat:6408}),n=new kr(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const qW={[kn.WEBGL2]:[!1,!0],[kn.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[kn.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[kn.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[kn.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[kn.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[kn.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[kn.FLOAT_BLEND]:["EXT_float_blend"],[kn.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[kn.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[kn.TEXTURE_FLOAT]:["OES_texture_float",!0],[kn.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[kn.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[kn.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[kn.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[kn.COLOR_ATTACHMENT_RGBA32F]:[BPe,"EXT_color_buffer_float"],[kn.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[kn.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[kn.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[kn.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[kn.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[kn.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},FPe=2;function zPe(t,e){return wO(t,e)}function wO(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>KW(t,n))}function UPe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in qW)t.luma.caps[e]===void 0&&(t.luma.caps[e]=KW(t,e));return t.luma.caps}function KW(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=$Pe(t,e)),t.luma.caps[e]||ct.log(FPe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function $Pe(t,e){const n=qW[e];Ze(n,e);let r;const i=qt(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:Ze(!1);return r}const q4="Multiple render targets not supported";class kr extends Kl{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new kr(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=zi(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=zi(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if(Ze(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const h in i){const f=i[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return Ze(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&ct.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){Ze(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof nf)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(VPe(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&xO(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{LPe(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return ct.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ct.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ct.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ct.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ct.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ct.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=zi(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=qc(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?qc(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?qc(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(Y4(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>ct.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=Y4(this,{targetMaxHeight:100});return ct.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new ua(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new nf(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new nf(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&Ze(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof nf?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:zi(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=jPe(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:Ze(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=yTe(this.gl);n?n.readBuffer(e):Ze(e===36064||e===1029,q4),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=zi(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):Ze(e.length===1&&(e[0]===36064||e[0]===1029),q4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=UPe(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function jPe(t){return t<34069?t+34069:t}function VPe(t){return(kr.STATUS||{})[t]||"Framebuffer error ".concat(t)}const GPe=[36049,36048,33296,33298,33299,33300,33301,33302,33303];kr.ATTACHMENT_PARAMETERS=GPe;function HPe(t,e){Ze(t instanceof ua||t instanceof XW||t instanceof APe);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,h=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,h)}function WPe(t,e){const{gl:n,width:r,height:i,id:s}=t;return new kr(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function hb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const XPe=35632,YPe=35633;function qPe(t){switch(t){case XPe:return"fragment";case YPe:return"vertex";default:return"unknown type"}}function KPe(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||hb(e)||"(unnamed)",l="".concat(qPe(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const h=i[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));g!=="WARNING"?s[m]=h:o[m]=h}const c=ZPe(e);return{shaderName:l,errors:K4(s,c),warnings:K4(o,c)}}function K4(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=ZW("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function ZPe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return ZW(a,i-l)+n+s})}function ZW(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function QW(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const QPe="Shader: GLSL source code must be a JavaScript string";class v0 extends Kl{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Ze(!1),"unknown"}}constructor(e,n){Xw(e),Ze(typeof n.source=="string",QPe);const r=hb(n.source,null)||n.id||su("unnamed ".concat(v0.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=hb(n,null);r&&(this.id=su(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(v0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return hb(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=KPe(r,this.source,this.shaderType,this.id);throw ct.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),ct.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class iP extends v0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class sP extends v0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const JPe={5126:Mn.bind(null,"uniform1fv",bs,1,vi),35664:Mn.bind(null,"uniform2fv",bs,2,vi),35665:Mn.bind(null,"uniform3fv",bs,3,vi),35666:Mn.bind(null,"uniform4fv",bs,4,vi),5124:Mn.bind(null,"uniform1iv",fc,1,vi),35667:Mn.bind(null,"uniform2iv",fc,2,vi),35668:Mn.bind(null,"uniform3iv",fc,3,vi),35669:Mn.bind(null,"uniform4iv",fc,4,vi),35670:Mn.bind(null,"uniform1iv",fc,1,vi),35671:Mn.bind(null,"uniform2iv",fc,2,vi),35672:Mn.bind(null,"uniform3iv",fc,3,vi),35673:Mn.bind(null,"uniform4iv",fc,4,vi),35674:Mn.bind(null,"uniformMatrix2fv",bs,4,gl),35675:Mn.bind(null,"uniformMatrix3fv",bs,9,gl),35676:Mn.bind(null,"uniformMatrix4fv",bs,16,gl),35678:ri,35680:ri,5125:Mn.bind(null,"uniform1uiv",b1,1,vi),36294:Mn.bind(null,"uniform2uiv",b1,2,vi),36295:Mn.bind(null,"uniform3uiv",b1,3,vi),36296:Mn.bind(null,"uniform4uiv",b1,4,vi),35685:Mn.bind(null,"uniformMatrix2x3fv",bs,6,gl),35686:Mn.bind(null,"uniformMatrix2x4fv",bs,8,gl),35687:Mn.bind(null,"uniformMatrix3x2fv",bs,6,gl),35688:Mn.bind(null,"uniformMatrix3x4fv",bs,12,gl),35689:Mn.bind(null,"uniformMatrix4x2fv",bs,8,gl),35690:Mn.bind(null,"uniformMatrix4x3fv",bs,12,gl),35678:ri,35680:ri,35679:ri,35682:ri,36289:ri,36292:ri,36293:ri,36298:ri,36299:ri,36300:ri,36303:ri,36306:ri,36307:ri,36308:ri,36311:ri},eCe={},tCe={},nCe={},Z4=[0];function EO(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Z4[0]=t,t=Z4);const i=t.length;if(i%e&&ct.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function bs(t,e){return EO(t,e,Float32Array,eCe)}function fc(t,e){return EO(t,e,Int32Array,tCe)}function b1(t,e){return EO(t,e,Uint32Array,nCe)}function Q4(t,e,n){const r=JPe[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function rCe(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function iCe(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!sCe(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function sCe(t){return Array.isArray(t)||ArrayBuffer.isView(t)?aCe(t):isFinite(t)||t===!0||t===!1||t instanceof Kf||t instanceof nf?!0:t instanceof kr?!!t.texture:!1}function oCe(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function aCe(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ri(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Mn(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let h=!1;if(i===null)i=new Float32Array(u),s=u,h=!0;else{Ze(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==i[f]){h=!0;break}}return h&&(r(o,t,a,c),i.set(c)),h}}function vi(t,e,n,r){t[e](n,r)}function gl(t,e,n,r){t[e](n,!1,r)}const lCe=5120,cCe=5121,uCe=5122,hCe=5123,J4=0,_1=1,dCe=2,fCe=3,x1=4,pCe=5,gCe=6,Mr=5126,mCe=35664,yCe=35665,vCe=35666,_g=5124,bCe=35667,_Ce=35668,xCe=35669,xg=5125,wCe=36294,ECe=36295,SCe=36296,TCe=35670,PCe=35671,CCe=35672,ACe=35673,RCe=35674,ICe=35675,MCe=35676,OCe=35685,LCe=35686,kCe=35687,DCe=35688,NCe=35689,BCe=35690,ER={[Mr]:[Mr,1,"float"],[mCe]:[Mr,2,"vec2"],[yCe]:[Mr,3,"vec3"],[vCe]:[Mr,4,"vec4"],[_g]:[_g,1,"int"],[bCe]:[_g,2,"ivec2"],[_Ce]:[_g,3,"ivec3"],[xCe]:[_g,4,"ivec4"],[xg]:[xg,1,"uint"],[wCe]:[xg,2,"uvec2"],[ECe]:[xg,3,"uvec3"],[SCe]:[xg,4,"uvec4"],[TCe]:[Mr,1,"bool"],[PCe]:[Mr,2,"bvec2"],[CCe]:[Mr,3,"bvec3"],[ACe]:[Mr,4,"bvec4"],[RCe]:[Mr,8,"mat2"],[OCe]:[Mr,8,"mat2x3"],[LCe]:[Mr,8,"mat2x4"],[ICe]:[Mr,12,"mat3"],[kCe]:[Mr,12,"mat3x2"],[DCe]:[Mr,12,"mat3x4"],[MCe]:[Mr,16,"mat4"],[NCe]:[Mr,16,"mat4x2"],[BCe]:[Mr,16,"mat4x3"]};function FCe(t){switch(t){case J4:return J4;case _1:return _1;case fCe:return _1;case dCe:return _1;case x1:return x1;case pCe:return x1;case gCe:return x1;default:return Ze(!1),0}}function ez(t){const e=ER[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function JW(t,e){switch(t){case lCe:case cCe:case uCe:case hCe:t=Mr;break}for(const n in ER){const[r,i,s]=ER[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class zCe{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!qt(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=ez(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Ps(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=ez(r),a=new Ps({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const tz=4,UCe=35981,$Ce=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class e9 extends Kl{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",$Ce),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=UCe}=e;return this.hash=n||"",this.vs=typeof r=="string"?new iP(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new sP(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,Ze(this.vs instanceof iP),Ze(this.fs instanceof sP),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(zi(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new zCe(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:y={},uniforms:x,samplers:b}=e;if((x||b)&&(ct.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),ct.priority>=n){const w=m?m.id:"default",v="mode=".concat(qc(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(qc(this.gl,c)," ")+"isInstanced=".concat(h," isIndexed=").concat(l," ")+"Framebuffer=".concat(w);ct.log(n,v)()}return Ze(f),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||h&&u===0?!1:(f.bindForDraw(i,u,()=>{if(m!==void 0&&(y=Object.assign({},y,{framebuffer:m})),g){const w=FCe(r);g.begin(w)}this._bindTextures(),aa(this.gl,y,()=>{l&&h?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&qt(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):h?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),g&&g.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ct.priority>=2&&iCe(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof kr&&(s=s.texture),s instanceof Kf)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&oCe(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new iP({handle:i});break;case 35632:r.fs=new sP({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=su(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ct.time(tz,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ct.timeEnd(tz,"linkProgram for ".concat(this._getName()))(),e.debug||ct.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=rCe(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Q4(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=Q4(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const jCe=34918,VCe=34919,GCe=35007,HCe=36795,WCe=35976,XCe=35887,YCe=36202;class z_ extends Kl{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=qt(e),i=wO(e,kn.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:Ze(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(GCe)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?YCe:XCe)}beginTransformFeedbackQuery(){return this.begin(WCe)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,VCe);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(HCe)}getResult(){return this.gl2.getQueryParameter(this.handle,jCe)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return z_.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class t9 extends Kl{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zi(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,qf(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,ct.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof xn?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let w1=null;function qCe(t){return(!w1||w1.byteLength<t)&&(w1=new ArrayBuffer(t)),w1}function KCe(t,e){const n=qCe(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function ZCe(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const QCe="elements must be GL.ELEMENT_ARRAY_BUFFER";class ws extends Kl{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?qt(e)||DW()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ws(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ws.MAX_ATTRIBUTES=ws.MAX_ATTRIBUTES||e.getParameter(34921),ws.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:ws._setConstantFloatArray(e,n,r);break;case Int32Array:ws._setConstantIntArray(e,n,r);break;case Uint32Array:ws._setConstantUintArray(e,n,r);break;default:Ze(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ws.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Ze(!e||e.target===34963,QCe),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),c?(Ze(qt(h)),f.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!ws.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new xn(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=KCe(n.constructor,s);ZCe({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:Ze(!1)}}static _setConstantIntArray(e,n,r){switch(Ze(qt(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:Ze(!1)}}static _setConstantUintArray(e,n,r){switch(Ze(qt(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:Ze(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return Ze(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const JCe="VertexArray: attributes must be Buffers or constants (i.e. typed array)",eAe=/^(.+)__LOCATION_([0-9]+)$/,tAe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class nAe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ws(e),VW(this,"VertexArray","v6.0",tAe),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new xn(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof xn&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof xn&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,ct.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=Ps.resolve(l.accessor,c,r,i),{size:h,type:f}=u;return Ze(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=eAe.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof xn)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof xn){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof xn){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(JCe)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(ws.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){ws.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof xn){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ct.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function rAe(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=b0(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function b0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return rAe(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function nz(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;Ze(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const g of c)!g.match(s)&&!g.match(o)&&oP({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;for(const g of c)g.match(o)&&oP({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;for(const g of c)l[g]||oP({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;let h=0;const f={};if(!i)for(const g in r){const m=r[g];l[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:b0(m)})}return{table:l,count:u,unusedTable:f,unusedCount:h}}function oP(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=iAe(o);return!s||!a?(e[i]={[n]:a?b0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function iAe(t){return t!=null}function sAe(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=rz(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(oAe(o.name,l))),r[a]=rz(e,i[s],l,n)}}return r}function rz(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,h;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof xn){const f=e,{data:g,changed:m}=f.getDebugData();u=m?"*":"",h=g,l=f.byteLength,a=l/g.BYTES_PER_ELEMENT/o;let y;if(n){const x=n.divisor>0;y="".concat(x?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(qc(i,s),")")}else c=!0,y="".concat(l," bytes");return{[r]:"".concat(u).concat(b0(h,{size:o,isInteger:c})),"Format ":y}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(b0(h,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function oAe(t,e){const{type:n,size:r}=e,i=JW(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function aAe(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=iz(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=iz(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function iz(t){const{type:e,size:n}=t.accessor,r=JW(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const sz=ql()&&typeof document<"u";let lAe=0;class cAe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=x=>jW(x),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=eh.get("animation-loop-".concat(lAe++))}=e;let{useDevicePixels:y=!0}=e;"useDevicePixelRatio"in e&&(ct.deprecated("useDevicePixelRatio","useDevicePixels")(),y=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:y}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Ze(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=z_.isSupported(this.gl,["timers"])?new z_(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return ct.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=sz?new Promise((e,n)=>{if(sz&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):gPe(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):pPe(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?vO(this.props.gl,e):this.onCreateContext(e),!Ww(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");tPe(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&oPe(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new kr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const cy="vs",SO="fs";function Ns(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const aP={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function uAe(t){const e={};for(const n in t){const r=t[n],i=hAe(r);e[n]=i}return e}function hAe(t){let e=oz(t);return e==="object"?t?"type"in t?Object.assign({},t,aP[t.type]):"value"in t?(e=oz(t.value),Object.assign({type:e},t,aP[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},aP[e])}function oz(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const dAe="vs",fAe="fs";class az{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:h,fragmentShader:f}=e;Ns(typeof n=="string"),this.name=n,this.vs=r||h,this.fs=i||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=pAe(u),o&&(this.uniforms=uAe(o))}getModuleSource(e){let n;switch(e){case dAe:n=this.vs||"";break;case fAe:n=this.fs||"";break;default:Ns(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Ns(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function pAe(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function gAe(t){return mAe(r9(t))}function mAe(t){const e={},n={};return n9({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function n9(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&n9({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function r9(t,e){return t.map(n=>(n instanceof az||(Ns(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ns(n.name,"shader module has no name"),n=new az(n),n.dependencies=r9(n.dependencies)),n))}function yAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const vAe=7936,bAe=7937,_Ae=7938,xAe=35724,TO={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Vu={};Object.keys(TO).forEach(t=>{Vu[t]=t});function wAe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function EAe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||vAe),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||bAe);return{gpuVendor:SAe(n,r),vendor:n,renderer:r,version:t.getParameter(_Ae),shadingLanguageVersion:t.getParameter(xAe)}}function SAe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const lP={};function lz(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=TO[e];if(Ns(r,e),!yAe(n))return!0;if(e in lP)return lP[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),lP[e]=l,l}function TAe(t,e){const n=TO[e];Ns(n,e);const r=wAe(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Ns(i===!1||i===!0),i}function E1(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>TAe(t,n))}function PAe(t){switch(EAe(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function CAe(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return E1(t,Vu.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),E1(t,Vu.GLSL_DERIVATIVES)&&lz(t,Vu.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),E1(t,Vu.GLSL_FRAG_DATA)&&lz(t,Vu.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),E1(t,Vu.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const AAe=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,RAe=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,IAe={[cy]:AAe,[SO]:RAe},db="__LUMA_INJECT_DECLARATIONS__",cz=/void\s+main\s*\([^)]*\)\s*\{\n?/,uz=/}\n?[^{}]*$/,cP=[];function hz(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===cy;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),cP.length=o.length;for(let l=0,c=o.length;l<c;++l)cP[l]=o[l].injection;const a="".concat(cP.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(db,a));break;case"vs:#main-start":i&&(t=t.replace(cz,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(uz,l=>a+l));break;case"fs:#decl":i||(t=t.replace(db,a));break;case"fs:#main-start":i||(t=t.replace(cz,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(uz,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(db,""),r&&(t=t.replace(/\}\s*$/,s=>s+IAe[e])),t}function SR(t){const e={};return Ns(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Zf(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const i9=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],MAe=[...i9,[Zf("attribute"),"in $1"],[Zf("varying"),"out $1"]],OAe=[...i9,[Zf("varying"),"in $1"]],s9=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],LAe=[...s9,[Zf("in"),"attribute $1"],[Zf("out"),"varying $1"]],kAe=[...s9,[Zf("in"),"varying $1"]],TR="gl_FragColor",PR=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,DAe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function NAe(t,e,n){switch(e){case 300:return n?U_(t,MAe):BAe(t);case 100:return n?U_(t,LAe):FAe(t);default:throw new Error("unknown GLSL version ".concat(e))}}function U_(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function BAe(t){t=U_(t,OAe);const e=t.match(PR);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(TR,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(DAe,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(TR,"\\b"),"g"),n)}return t}function FAe(t){t=U_(t,kAe);const e=t.match(PR);if(e){const n=e[1];t=t.replace(PR,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),TR)}return t}const zAe=`

`.concat(db,`

`),o9={[cy]:"vertex",[SO]:"fragment"},UAe=`precision highp float;

`;function $Ae(t,e){const{vs:n,fs:r}=e,i=gAe(e.modules||[]);return{gl:t,vs:dz(t,Object.assign({},e,{source:n,type:cy,modules:i})),fs:dz(t,Object.assign({},e,{source:r,type:SO,modules:i})),getUniforms:jAe(i)}}function dz(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=e;Ns(typeof r=="string","shader source must be a string");const f=i===cy,g=r.split(`
`);let m=100,y="",x=r;g[0].indexOf("#version ")===0?(m=300,y=g[0],x=g.slice(1).join(`
`)):y="#version ".concat(m);const b={};s.forEach(R=>{Object.assign(b,R.getDefines())}),Object.assign(b,o);let w=u?"".concat(y,`
`).concat(GAe({id:n,source:r,type:i}),`
`).concat(VAe({type:i}),`
`).concat(PAe(t),`
`).concat(CAe(t),`
`).concat(HAe(b),`
`).concat(f?"":UAe,`
`):"".concat(y,`
`);const v=XAe(a),E={},T={},P={};for(const R in l){const M=typeof l[R]=="string"?{injection:l[R],order:0}:l[R],k=R.match(/^(v|f)s:(#)?([\w-]+)$/);if(k){const O=k[2],F=k[3];O?F==="decl"?T[R]=[M]:P[R]=[M]:E[R]=[M]}else P[R]=[M]}for(const R of s){h&&R.checkDeprecations(x,h);const M=R.getModuleSource(i,m);w+=M;const k=R.injections[i];for(const O in k){const F=O.match(/^(v|f)s:#([\w-]+)$/);if(F){const D=F[2]==="decl"?T:P;D[O]=D[O]||[],D[O].push(k[O])}else E[O]=E[O]||[],E[O].push(k[O])}}return w+=zAe,w=hz(w,i,T),w+=WAe(v[i],E),w+=x,w=hz(w,i,P),w=NAe(w,c?100:m,f),w}function jAe(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function VAe(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(o9[e].toUpperCase(),`
`)}function GAe(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(o9[r],`

`):""}function HAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function WAe(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function XAe(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const YAe="void main() {gl_FragColor = vec4(0);}",a9=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,qAe=`#version 300 es
`.concat(a9);function l9(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function c9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?qAe:e>300?"#version ".concat(e,`
`).concat(a9):YAe;const s=QAe(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function KAe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ns(!1),null}}function ZAe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ns(!1),null}}function QAe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ns(!1),null}}const JAe=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,eRe={name:"fp32",vs:JAe,fs:null};function fz(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Is={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function tRe(t,{precision:e=Is.precision}={}){return t=nRe(t),"".concat(parseFloat(t.toPrecision(e)))}function Qf(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Oc(t,e,n){return iRe(t,r=>Math.max(e,Math.min(n,r)))}function $_(t,e,n){return Qf(t)?t.map((r,i)=>$_(r,e[i],n)):n*e+(1-n)*t}function _0(t,e,n){const r=Is.EPSILON;n&&(Is.EPSILON=n);try{if(t===e)return!0;if(Qf(t)&&Qf(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!_0(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Is.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Is.EPSILON=r}}function nRe(t){return Math.round(t/Is.EPSILON)*Is.EPSILON}function rRe(t){return t.clone?t.clone():new Array(t.length)}function iRe(t,e,n){if(Qf(t)){const r=t;n=n||rRe(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function sRe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class u9 extends sRe(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Qf(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Is)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+tRe(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!_0(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Is.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function oRe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ts(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function uP(t,e,n=""){if(Is.debug&&!oRe(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class aRe extends u9{get x(){return this[0]}set x(e){this[0]=Ts(e)}get y(){return this[1]}set y(e){this[1]=Ts(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Ts(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Ts(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return fz(e>=0&&e<this.ELEMENTS,"index is out of range"),Ts(this[e])}setComponent(e,n){return fz(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var fb=1e-6,Jf=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function lRe(){var t=new Jf(2);return Jf!=Float32Array&&(t[0]=0,t[1]=0),t}function pz(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function cRe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function h9(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function uRe(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=lRe();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function hRe(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function d9(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function dRe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function fRe(){var t=new Jf(3);return Jf!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function pRe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function gRe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function mRe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function yRe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vRe(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function f9(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function bRe(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function _Re(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,m=s*u-r*f,y=r*h-i*u,x=o*2;return u*=x,h*=x,f*=x,g*=2,m*=2,y*=2,t[0]=a+u+g,t[1]=l+h+m,t[2]=c+f+y,t}function xRe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function wRe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function ERe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function SRe(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,h=u&&yRe(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}var TRe=pRe,PRe=gRe;(function(){var t=fRe();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const hP=[0,0,0];let S1;class tl extends aRe{static get ZERO(){return S1||(S1=new tl(0,0,0),Object.freeze(S1)),S1}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Qf(e)?this.copy(e):(Is.debug&&(Ts(e),Ts(n),Ts(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Is.debug&&(Ts(e.x),Ts(e.y),Ts(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Ts(e)}angle(e){return SRe(this,e)}cross(e){return vRe(this,this,e),this.check()}rotateX({radians:e,origin:n=hP}){return xRe(this,this,n,e),this.check()}rotateY({radians:e,origin:n=hP}){return wRe(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=hP}){return ERe(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return f9(this,this,e),this.check()}transformAsVector(e){return d9(this,this,e),this.check()}transformByMatrix3(e){return bRe(this,this,e),this.check()}transformByMatrix2(e){return dRe(this,this,e),this.check()}transformByQuaternion(e){return _Re(this,this,e),this.check()}}class CRe extends u9{toString(){let e="[";if(Is.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Ts(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function ARe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function RRe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function CR(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],y=e[13],x=e[14],b=e[15],w=n*a-r*o,v=n*l-i*o,E=n*c-s*o,T=r*l-i*a,P=r*c-s*a,R=i*c-s*l,M=u*y-h*m,k=u*x-f*m,O=u*b-g*m,F=h*x-f*y,I=h*b-g*y,D=f*b-g*x,N=w*D-v*I+E*F+T*O-P*k+R*M;return N?(N=1/N,t[0]=(a*D-l*I+c*F)*N,t[1]=(i*I-r*D-s*F)*N,t[2]=(y*R-x*P+b*T)*N,t[3]=(f*P-h*R-g*T)*N,t[4]=(l*O-o*D-c*k)*N,t[5]=(n*D-i*O+s*k)*N,t[6]=(x*E-m*R-b*v)*N,t[7]=(u*R-f*E+g*v)*N,t[8]=(o*I-a*O+c*M)*N,t[9]=(r*O-n*I-s*M)*N,t[10]=(m*P-y*E+b*w)*N,t[11]=(h*E-u*P-g*w)*N,t[12]=(a*k-o*F-l*M)*N,t[13]=(n*F-r*k+i*M)*N,t[14]=(y*v-m*T-x*w)*N,t[15]=(u*T-h*v+f*w)*N,t):null}function IRe(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],m=t[13],y=t[14],x=t[15],b=e*o-n*s,w=e*a-r*s,v=e*l-i*s,E=n*a-r*o,T=n*l-i*o,P=r*l-i*a,R=c*m-u*g,M=c*y-h*g,k=c*x-f*g,O=u*y-h*m,F=u*x-f*m,I=h*x-f*y;return b*I-w*F+v*O+E*k-T*M+P*R}function fh(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],y=e[12],x=e[13],b=e[14],w=e[15],v=n[0],E=n[1],T=n[2],P=n[3];return t[0]=v*r+E*a+T*h+P*y,t[1]=v*i+E*l+T*f+P*x,t[2]=v*s+E*c+T*g+P*b,t[3]=v*o+E*u+T*m+P*w,v=n[4],E=n[5],T=n[6],P=n[7],t[4]=v*r+E*a+T*h+P*y,t[5]=v*i+E*l+T*f+P*x,t[6]=v*s+E*c+T*g+P*b,t[7]=v*o+E*u+T*m+P*w,v=n[8],E=n[9],T=n[10],P=n[11],t[8]=v*r+E*a+T*h+P*y,t[9]=v*i+E*l+T*f+P*x,t[10]=v*s+E*c+T*g+P*b,t[11]=v*o+E*u+T*m+P*w,v=n[12],E=n[13],T=n[14],P=n[15],t[12]=v*r+E*a+T*h+P*y,t[13]=v*i+E*l+T*f+P*x,t[14]=v*s+E*c+T*g+P*b,t[15]=v*o+E*u+T*m+P*w,t}function j_(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,h,f,g,m,y,x,b;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],y=e[9],x=e[10],b=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=m,t[9]=y,t[10]=x,t[11]=b,t[12]=o*r+u*i+m*s+e[12],t[13]=a*r+h*i+y*s+e[13],t[14]=l*r+f*i+x*s+e[14],t[15]=c*r+g*i+b*s+e[15]),t}function PO(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function MRe(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,h,f,g,m,y,x,b,w,v,E,T,P,R,M,k,O,F,I,D,N,j;return a<fb?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],m=e[3],y=e[4],x=e[5],b=e[6],w=e[7],v=e[8],E=e[9],T=e[10],P=e[11],R=i*i*u+c,M=s*i*u+o*l,k=o*i*u-s*l,O=i*s*u-o*l,F=s*s*u+c,I=o*s*u+i*l,D=i*o*u+s*l,N=s*o*u-i*l,j=o*o*u+c,t[0]=h*R+y*M+v*k,t[1]=f*R+x*M+E*k,t[2]=g*R+b*M+T*k,t[3]=m*R+w*M+P*k,t[4]=h*O+y*F+v*I,t[5]=f*O+x*F+E*I,t[6]=g*O+b*F+T*I,t[7]=m*O+w*F+P*I,t[8]=h*D+y*N+v*j,t[9]=f*D+x*N+E*j,t[10]=g*D+b*N+T*j,t[11]=m*D+w*N+P*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function p9(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function ORe(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function g9(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function LRe(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,m=i*l,y=s*o,x=s*a,b=s*l;return t[0]=1-h-m,t[1]=u+b,t[2]=f-x,t[3]=0,t[4]=u-b,t[5]=1-c-m,t[6]=g+y,t[7]=0,t[8]=f+x,t[9]=g-y,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kRe(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function DRe(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var NRe=DRe;function BRe(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var FRe=BRe;function zRe(t,e,n,r){var i,s,o,a,l,c,u,h,f,g,m=e[0],y=e[1],x=e[2],b=r[0],w=r[1],v=r[2],E=n[0],T=n[1],P=n[2];return Math.abs(m-E)<fb&&Math.abs(y-T)<fb&&Math.abs(x-P)<fb?ARe(t):(u=m-E,h=y-T,f=x-P,g=1/Math.hypot(u,h,f),u*=g,h*=g,f*=g,i=w*f-v*h,s=v*u-b*f,o=b*h-w*u,g=Math.hypot(i,s,o),g?(g=1/g,i*=g,s*=g,o*=g):(i=0,s=0,o=0),a=h*o-f*s,l=f*i-u*o,c=u*s-h*i,g=Math.hypot(a,l,c),g?(g=1/g,a*=g,l*=g,c*=g):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*m+s*y+o*x),t[13]=-(a*m+l*y+c*x),t[14]=-(u*m+h*y+f*x),t[15]=1,t)}function URe(){var t=new Jf(4);return Jf!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function $Re(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function uy(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=URe();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var AR;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(AR||(AR={}));const jRe=45*Math.PI/180,VRe=1,dP=.1,fP=500,GRe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class nl extends CRe{static get IDENTITY(){return WRe()}static get ZERO(){return HRe()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return AR}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=y,this[15]=x,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=n,this[5]=o,this[6]=u,this[7]=m,this[8]=r,this[9]=a,this[10]=h,this[11]=y,this[12]=i,this[13]=l,this[14]=f,this[15]=x,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(GRe)}fromObject(e){return this.check()}fromQuaternion(e){return LRe(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=dP,far:a=fP}=e;return a===1/0?XRe(this,n,r,i,s,o):kRe(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return zRe(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=dP,far:a=fP}=e;return FRe(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=jRe,aspect:r=VRe,focalDistance:i=1,near:s=dP,far:o=fP}=e;gz(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return gz(n),NRe(this,n,r,i,s),this.check()}determinant(){return IRe(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return RRe(this,this),this.check()}invert(){return CR(this,this),this.check()}multiplyLeft(e){return fh(this,e,this),this.check()}multiplyRight(e){return fh(this,this,e),this.check()}rotateX(e){return p9(this,this,e),this.check()}rotateY(e){return ORe(this,this,e),this.check()}rotateZ(e){return g9(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return MRe(this,this,e,n),this.check()}scale(e){return PO(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return j_(this,this,e),this.check()}transform(e,n){return e.length===4?(n=uy(n||[-0,-0,-0,-0],e,this),uP(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=uRe(n||[-0,-0],e,this);break;case 3:i=f9(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return uP(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=hRe(n||[-0,-0],e,this);break;case 3:r=d9(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return uP(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let T1,P1;function HRe(){return T1||(T1=new nl([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(T1)),T1}function WRe(){return P1||(P1=new nl,Object.freeze(P1)),P1}function gz(t){if(t>Math.PI*2)throw Error("expected radians")}function XRe(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,h=-1,f=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=h,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}const mz=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,YRe={lightSources:{}};function pP(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function qRe(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=pP(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=pP(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=pP(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function m9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:YRe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},qRe({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return m9({lightSources:e})}return{}}const KRe={name:"lights",vs:mz,fs:mz,getUniforms:m9,defines:{MAX_LIGHTS:3}},ZRe=new Uint8Array([0,255,255,255]),QRe={pickingSelectedColor:null,pickingHighlightColor:ZRe,pickingActive:!1,pickingAttribute:!1};function JRe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QRe;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const e2e=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,t2e=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,n2e={name:"picking",vs:e2e,fs:t2e,getUniforms:JRe},r2e=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,i2e={};function s2e(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function o2e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i2e;if(!("material"in t))return{};const{material:e}=t;return e?s2e(e):{lighting_uEnabled:!1}}const a2e={name:"gouraud-lighting",dependencies:[KRe],vs:r2e,defines:{LIGHTING_VERTEX:1},getUniforms:o2e},l2e=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,c2e={name:"transform",vs:l2e,fs:null};class hy{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new hy(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),h=this._getHash(r),f=c.map(v=>this._getHash(v.name)).sort(),g=o.map(v=>this._getHash(v)),m=Object.keys(i).sort(),y=Object.keys(s).sort(),x=[],b=[];for(const v of m)x.push(this._getHash(v)),x.push(this._getHash(i[v]));for(const v of y)b.push(this._getHash(v)),b.push(this._getHash(s[v]));const w="".concat(u,"/").concat(h,"D").concat(x.join("/"),"M").concat(f.join("/"),"I").concat(b.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[w]){const v=$Ae(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[w]=new e9(this.gl,{hash:w,vs:v.vs,fs:v.fs,varyings:o,bufferMode:a}),this._getUniforms[w]=v.getUniforms||(E=>{}),this._useCounts[w]=0}return this._useCounts[w]++,this._programCache[w]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const u2e={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function h2e(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=d2e(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new xn(t,l),c],f2e(s,c)}}if(i){const s=i.value||i;Ze(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new xn(t,{data:s,target:34963}),o]}return r}function d2e(t,e){const{attributeMap:n=u2e}=e||{};return n&&n[t]||t}function f2e(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}Ze(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Td=2,p2e=1e4,g2e="Model needs drawMode and vertexCount",yz=()=>{},m2e={};class x0{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=su("model")}=n;Ze(Ww(e)),this.id=r,this.gl=e,this.id=n.id||su("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||hy.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Ze(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),g2e)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Ze(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Ze(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=h2e(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qf(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return xO(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;ct.priority>=Td&&(c=this._logDrawCallStart(Td));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&ct.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:x}=this,{onBeforeRender:b=yz,onAfterRender:w=yz}=this.props;b(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(m2e,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:y,instanceCount:x,offset:h?g:0}));return w(),ct.priority>=Td&&this._logDrawCallEnd(c,l,r),v}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Ze(n instanceof e9,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new nAe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof xn&&n.delete()}}_setAnimationProps(e){this.animated&&Ze(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qf(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new t9(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:p2e;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),ct.group(Td,">>> DRAWING MODEL ".concat(this.id),{collapsed:ct.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=sAe({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=nz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=nz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&ct.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&ct.log("UNUSED UNIFORMS",Object.keys(a))();const h=aAe(this.vertexArray.configuration);ct.table(e,s)(),ct.table(e,o)(),ct.table(e+1,h)(),i&&i.log({logLevel:Td,message:"Rendered to ".concat(i.id)}),ct.groupEnd(Td)()}}class y2e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof xn?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Ze(qt(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new t9(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],Ze(r[s]instanceof xn)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new xn(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const v2e="transform_uSampler_",V_="transform_uSize_",vz="transform_position";function b2e(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const h=c.split(`
`),f=h.slice();if(h.forEach((g,m,y)=>{if(o>0){const x=S2e(g,n);if(x){const{updatedLine:b,inject:w}=x;f[m]=b,u=SR([u,w]),Object.assign(l,x.samplerTextureMap),o--}}r&&!a&&(a=E2e(g,r))}),r){Ze(i);const g="".concat(V_).concat(r),m="uniform vec2 ".concat(g,`;
`),y="     vec2 ".concat(vz," = transform_getPos(").concat(g,`);
     gl_Position = vec4(`).concat(vz,`, 0, 1.);
`);u=SR([u,{"vs:#decl":m,"vs:#main-start":y}])}c=f.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function _2e(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(V_).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(V_).concat(a)]=[s,o];return i}function x2e(t){return l9(t,["attribute","in"])}function w2e(t){const e="".concat(v2e).concat(t),n="".concat(V_).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function E2e(t,e){const n=l9(t,["varying","out"]);return n&&n.name===e?n.type:null}function S2e(t,e){const n={},r=x2e(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=w2e(s),u=KAe(i),h="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:n}}return null}const T2e={10241:9728,10240:9728,10242:33071,10243:33071},P2e="transform_output";class C2e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap){const f=this.samplerTextureMap[h];a[h]=r[f]}this._setSourceTextureParameters();const u=_2e({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=Yw(n);if(!e)return r;const i=r.constructor,s=ZAe(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ua)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new xn(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new kr(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(T2e)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=HPe(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=b2e({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=SR([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||c9({version:QW(i),input:this.targetTextureVarying,inputType:o,output:P2e}),h=this.hasSourceTextures||this.targetTextureVarying?[c2e].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:h,uniforms:s,inject:c}}}class CO{static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();Ze(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new x0(n,Object.assign({},e,{fs:e.fs||c9({version:QW(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){A2e(n)&&(this.bufferTransform=new y2e(e,n)),R2e(n)&&(this.textureTransform=new C2e(e,n)),Ze(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function A2e(t){return!!(!qf(t.feedbackBuffers)||!qf(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function R2e(t){return!!(!qf(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const bz={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class AO{static get DRAW_MODE(){return bz}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=su("geometry"),drawMode:r=bz.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,Ze(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(Ze(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return Ze(Number.isFinite(r)),r}}let I2e=1,M2e=1;class y9{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=I2e++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=M2e++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const O2e=[255,255,255],L2e=1;let k2e=0;class D2e{constructor(e={}){B(this,"id",void 0),B(this,"color",void 0),B(this,"intensity",void 0),B(this,"type","ambient");const{color:n=O2e}=e,{intensity:r=L2e}=e;this.id=e.id||"ambient-".concat(k2e++),this.color=n,this.intensity=r}}const N2e=[255,255,255],B2e=1,F2e=[0,0,-1];let z2e=0;class _z{constructor(e={}){B(this,"id",void 0),B(this,"color",void 0),B(this,"intensity",void 0),B(this,"type","directional"),B(this,"direction",void 0),B(this,"shadow",void 0);const{color:n=N2e}=e,{intensity:r=B2e}=e,{direction:i=F2e}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(z2e++),this.color=n,this.intensity=r,this.type="directional",this.direction=new tl(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class U2e{constructor(e,n={id:"pass"}){B(this,"id",void 0),B(this,"gl",void 0),B(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class RO extends U2e{constructor(...e){super(...e),B(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return $l(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&j2e(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const h of i){const f=s&&s[h.id];o==null||o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const y of m){const x=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:y,view:f,pass:e.pass,layers:e.layers},g);u.push(x)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],h=v9(this._lastRenderIndex+1),f={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},g={};for(let m=0;m<n.length;m++){const y=n[m],x=this._shouldDrawLayer(y,f,s,g),b={shouldDrawLayer:x};x&&!c&&(b.layerRenderIndex=h(y,x),b.moduleParameters=this._getModuleParameters(y,a,r,l),b.layerParameters=this.getLayerParameters(y,m,e)),u[m]=b}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=$2e(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const h=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;aa(e,{scissorTest:!0,scissor:c},()=>xO(e,h))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};$l(e,{viewport:c});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:y,layerParameters:x}=l[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),y.viewport=o;try{f._drawLayer({moduleParameters:y,uniforms:{layerIndex:m},parameters:x})}catch(b){f.raiseError(b,"drawing ".concat(f," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Yf(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function v9(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||v9(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function $2e(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Yf(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function j2e(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;$l(t,{viewport:[0,0,n,r]}),t.clear(16640)}class V2e extends RO{constructor(e,n){super(e,n),B(this,"shadowMap",void 0),B(this,"depthBuffer",void 0),B(this,"fbo",void 0),this.shadowMap=new ua(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new nf(e,{format:33189,width:1,height:1}),this.fbo=new kr(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;aa(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Yf(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const b9="#define SMOOTH_EDGE_RADIUS 0.5",G2e=`
`.concat(b9,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),H2e=`
`.concat(b9,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),W2e={name:"geometry",vs:G2e,fs:H2e},X2e=Object.keys(rn).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(rn[t],";")).join(""),Y2e=Object.keys(Ga).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Ga[t],";")).join(""),q2e=Object.keys(m0).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(m0[t],";")).join(""),K2e="".concat(X2e,`
`).concat(Y2e,`
`).concat(q2e,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Z2e(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function dy(t){let e={},n;return r=>{for(const i in r)if(!Z2e(r[i],e[i])){n=t(r),e=r;break}return n}}const xz=[0,0,0,0],Q2e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],_9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J2e=[0,0,0],x9=[0,0,0],eIe=dy(rIe);function w9(t,e,n=x9){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===rn.LNGLAT_OFFSETS||e===rn.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ga.WEB_MERCATOR:(e===rn.LNGLAT||e===rn.CARTESIAN)&&(i=[0,0,0],s=!1);break;case Ga.WEB_MERCATOR_AUTO_OFFSET:e===rn.LNGLAT?r=i:e===rn.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Ga.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Ga.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function tIe(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=xz,l=xz,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=w9(t,e,n);return f&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=uy([],l,o),s=r||s,o=fh([],i,s),o=fh([],o,Q2e)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}function nIe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=rn.DEFAULT,coordinateOrigin:i=x9,autoWrapLongitude:s=!1}){r===rn.DEFAULT&&(r=t.isGeospatial?rn.LNGLAT:rn.CARTESIAN);const o=eIe({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||_9,o}function rIe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=tIe(t,n,r),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=uy([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:J2e,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:_9,project_uCameraPosition:a};if(c){const m=t.getDistanceScales(c);switch(n){case rn.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case rn.LNGLAT:case rn.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case rn.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]];break}}return g}const iIe={};function sIe(t=iIe){return"viewport"in t?nIe(t):{}}const IO={name:"project",dependencies:[eRe,W2e],vs:K2e,getUniforms:sIe};function oIe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function bf(t,e){const n=uy([],e,t);return $Re(n,n,1/n[3]),n}function wz(t,e){const n=t%e;return n<0?e+n:n}function RR(t,e,n){return t<e?e:t>n?n:t}function aIe(t){return Math.log(t)*Math.LOG2E}const MO=Math.log2||aIe;function jl(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ea=Math.PI,E9=ea/4,xo=ea/180,IR=180/ea,ep=512,G_=4003e4,C1=85.051129,lIe=1.5;function cIe(t){return MO(t)}function H_(t){const[e,n]=t;jl(Number.isFinite(e)),jl(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*xo,i=n*xo,s=ep*(r+ea)/(2*ea),o=ep*(ea+Math.log(Math.tan(E9+i*.5)))/(2*ea);return[s,o]}function tp(t){const[e,n]=t,r=e/ep*(2*ea)-ea,i=2*(Math.atan(Math.exp(n/ep*(2*ea)-ea))-E9);return[r*IR,i*IR]}function uIe(t){const{latitude:e}=t;jl(Number.isFinite(e));const n=Math.cos(e*xo);return cIe(G_*n)-9}function gP(t){const e=Math.cos(t*xo);return ep/G_/e}function MR(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;jl(Number.isFinite(e)&&Number.isFinite(n));const i=ep,s=Math.cos(e*xo),o=i/360,a=o/s,l=i/G_/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=xo*Math.tan(e*xo)/s,h=o*u/2,f=i/G_*u,g=f/a*l;c.unitsPerDegree2=[0,h,f],c.unitsPerMeter2=[g,0,g]}return c}function S9(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=MR({longitude:n,latitude:r,highPrecision:!0}),u=H_(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=tp(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],f]:h}function hIe(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=oIe();j_(a,a,[0,0,-i]),p9(a,a,-n*xo),g9(a,a,r*xo);const l=s/e;return PO(a,a,[l,l,l]),o&&j_(a,a,mRe([],o)),a}function dIe(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=W_(lIe)}=t;r!==void 0&&(u=W_(r));const h=u*xo,f=i*xo,g=T9(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/n);const y=h*(.5+(s?s[1]:0)/n),x=Math.sin(y)*m/Math.sin(RR(Math.PI/2-f-y,.01,Math.PI-.01)),b=Math.sin(f)*x+m,w=m*10,v=Math.min(b*c,w);return{fov:h,aspect:e/n,focalDistance:g,near:l,far:v}}function W_(t){return 2*Math.atan(.5/t)*IR}function T9(t){return .5/Math.tan(.5*t*xo)}function P9(t,e){const[n,r,i=0]=t;return jl(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),bf(e,[n,r,i,1])}function OO(t,e,n=0){const[r,i,s]=t;if(jl(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return bf(e,[r,i,s,1]);const o=bf(e,[r,i,0,1]),a=bf(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return h9([],o,a,u)}function fIe(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,h=pIe(t.padding),f=H_([a,RR(u,-C1,C1)]),g=H_([c,RR(l,-C1,C1)]),m=[Math.max(Math.abs(g[0]-f[0]),i),Math.max(Math.abs(g[1]-f[1]),i)],y=[e-h.left-h.right-Math.abs(o[0])*2,n-h.top-h.bottom-Math.abs(o[1])*2];jl(y[0]>0&&y[1]>0);const x=y[0]/m[0],b=y[1]/m[1],w=(h.right-h.left)/2/x,v=(h.top-h.bottom)/2/b,E=[(g[0]+f[0])/2+w,(g[1]+f[1])/2+v],T=tp(E),P=Math.min(s,MO(Math.abs(Math.min(x,b))));return jl(Number.isFinite(P)),{longitude:T[0],latitude:T[1],zoom:P}}function pIe(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(jl(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Ez=Math.PI/180;function gIe(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*Ez:Math.atan(.5/t.altitude),h=(90-t.pitch)*Ez;return u>h-.01?(l=Sz(t,0,e),c=Sz(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function Sz(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=bf(r,[e,0,1,1]),s=bf(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=h9([],i,s,a),c=tp(l);return c.push(n),c}const Tz=512;function mIe(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=wz(i+180,360)-180),(a<-180||a>180)&&(a=wz(a+180,360)-180);const l=MO(n/Tz);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=tp([0,c])[1];if(s<u)s=u;else{const h=tp([0,Tz-c])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const yIe=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,vIe=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,bIe=dy(SIe),_Ie=dy(TIe),xIe=[0,0,0,1],wIe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function EIe(t,e){const[n,r,i]=t,s=OO([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function SIe({viewport:t,center:e}){return new nl(t.viewProjectionMatrix).invert().transform(e)}function TIe({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>EIe(o,r));for(const o of e){const a=o.clone().translate(new tl(t.center).negate()),l=s.map(u=>a.transform(u)),c=new nl().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function PIe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||xIe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=bIe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=_Ie({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new tl(t.viewport.center).negate());e.project_uCoordinateSystem===rn.LNGLAT&&e.project_uProjectionMode===Ga.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(wIe),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const mP={name:"shadow",dependencies:[IO],vs:yIe,fs:vIe,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?PIe(t,e):{}},CIe={color:[255,255,255],intensity:1},Pz=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],AIe=[0,0,0,200/255];class C9{constructor(e={}){B(this,"id","lighting-effect"),B(this,"props",void 0),B(this,"shadowColor",AIe),B(this,"shadow",void 0),B(this,"ambientLight",void 0),B(this,"directionalLights",void 0),B(this,"pointLights",void 0),B(this,"shadowPasses",[]),B(this,"shadowMaps",[]),B(this,"dummyShadowMap",null),B(this,"programManager",void 0),B(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=hy.getDefaultProgramManager(e),mP&&this.programManager.addDefaultModule(mP)),this.dummyShadowMap||(this.dummyShadowMap=new ua(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(mP),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new nl().lookAt({eye:new tl(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new V2e(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new D2e(CIe),this.directionalLights.push(new _z(Pz[0]),new _z(Pz[1])))}}class RIe{constructor(e={}){B(this,"_pool",[]),B(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h=1/0;l&&(h=l*r+s);const f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const np=new RIe;function Wg(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function IIe(t){return[t[12],t[13],t[14]]}function MIe(t){return{left:Pd(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Pd(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Pd(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Pd(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Pd(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Pd(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Cz=new tl;function Pd(t,e,n,r){Cz.set(t,e,n);const i=Cz.len();return{distance:r/i,normal:new tl(-t/i,-e/i,-n/i)}}function OIe(t){return t-Math.fround(t)}let wg;function yP(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;wg=np.allocate(wg,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];wg[a+l]=c,wg[a+l+n]=OIe(c)}a+=n*2}return wg.subarray(0,s*n*2)}function LIe(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const kIe=Math.PI/180,DIe=Wg(),Az=[0,0,0],NIe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function BIe({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new nl().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new nl().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Oc((u+t-h)/2,0,t)-t/2,y=Oc((f+e-g)/2,0,e)-e/2;c[8]-=m*2/t,c[9]+=y*2/e}return c}class _p{constructor(e={}){B(this,"id",void 0),B(this,"x",void 0),B(this,"y",void 0),B(this,"width",void 0),B(this,"height",void 0),B(this,"padding",void 0),B(this,"isGeospatial",void 0),B(this,"zoom",void 0),B(this,"focalDistance",void 0),B(this,"position",void 0),B(this,"modelMatrix",void 0),B(this,"distanceScales",void 0),B(this,"scale",void 0),B(this,"center",void 0),B(this,"cameraPosition",void 0),B(this,"projectionMatrix",void 0),B(this,"viewMatrix",void 0),B(this,"viewMatrixUncentered",void 0),B(this,"viewMatrixInverse",void 0),B(this,"viewProjectionMatrix",void 0),B(this,"pixelProjectionMatrix",void 0),B(this,"pixelUnprojectionMatrix",void 0),B(this,"resolution",void 0),B(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||NIe,this.focalDistance=e.focalDistance||1,this.position=e.position||Az,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ga.WEB_MERCATOR:Ga.WEB_MERCATOR_AUTO_OFFSET:Ga.IDENTITY}equals(e){return e instanceof _p?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&_0(e.projectionMatrix,this.projectionMatrix)&&_0(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=P9(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=OO([i,a,o],this.pixelUnprojectionMatrix,l),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(r)?[u,h,r]:[u,h]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=H_(e);return n[1]=Oc(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?tp(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?MR({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,MIe(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=uIe({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||MR({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=Az;if(s&&(a=o?new nl(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new tl(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=DIe,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new nl().multiplyRight(n).translate(new tl(this.center).negate()),this.projectionMatrix=r||BIe({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*kIe,focalDistance:u,padding:c,near:a,far:l});const h=Wg();fh(h,h,this.projectionMatrix),fh(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=CR([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=IIe(this.viewMatrixInverse);const f=Wg(),g=Wg();PO(f,f,[this.width/2,-this.height/2,1]),j_(f,f,[1,-1,0]),fh(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=CR(Wg(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||wn.warn("Pixel project matrix not invertible")()}}B(_p,"displayName","Viewport");class rp extends _p{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:h=!1,projectionMatrix:f,repeat:g=!1,worldOffset:m=0,position:y,padding:x,legacyMeterSizes:b=!1}=e;let{width:w,height:v,altitude:E=1.5}=e;const T=Math.pow(2,i);w=w||1,v=v||1;let P,R=null;if(f)E=f[5]/2,P=W_(E);else{e.fovy?(P=e.fovy,E=T9(P)):P=W_(E);let k;if(x){const{top:O=0,bottom:F=0}=x;k=[0,Oc((O+v-F)/2,0,v)-v/2]}R=dIe({width:w,height:v,scale:T,center:y&&[0,0,y[2]*gP(n)],offset:k,pitch:s,fovy:P,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(R.near=c),Number.isFinite(u)&&(R.far=u)}let M=hIe({height:v,pitch:s,bearing:o,scale:T,altitude:E});m&&(M=new nl().translate([512*m,0,0]).multiplyLeft(M)),super({...e,width:w,height:v,viewMatrix:M,longitude:r,latitude:n,zoom:i,...R,fovy:P,focalDistance:E}),B(this,"longitude",void 0),B(this,"latitude",void 0),B(this,"pitch",void 0),B(this,"bearing",void 0),B(this,"altitude",void 0),B(this,"fovy",void 0),B(this,"orthographic",void 0),B(this,"_subViewports",void 0),B(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=E,this.fovy=P,this.orthographic=h,this._subViewports=g?[]:null,this._pseudoMeters=b,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new rp({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*gP(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/gP(r);return[n,r,i]}addMetersToLngLat(e,n){return S9(e,n)}panByPosition(e,n){const r=OO(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=pz([],i,cRe([],r)),o=pz([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=gIe(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=fIe({width:r,height:i,bounds:e,...n});return new rp({width:r,height:i,longitude:s,latitude:o,zoom:a})}}B(rp,"displayName","WebMercatorViewport");const Rz=[0,0,0];function vP(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof rp){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function FIe(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===rn.DEFAULT&&(i=e.isGeospatial?rn.LNGLAT:rn.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function A9(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=uy([],[o,a,l,1],n)),r){case rn.LNGLAT:return vP([o,a,l],e,s);case rn.LNGLAT_OFFSETS:return vP([o+i[0],a+i[1],l+(i[2]||0)],e,s);case rn.METER_OFFSETS:return vP(S9(i,[o,a,l]),e,s);case rn.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function zIe(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=FIe(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=Rz,shaderCoordinateOrigin:u=Rz,offsetMode:h=!1}=l?w9(n,r,i):{},f=A9(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:h});if(h){const g=n.projectPosition(c||u);TRe(f,f,g)}return f}const Iz={blendFunc:[1,0,32771,0],blendEquation:32774};class R9 extends RO{constructor(...e){super(...e),B(this,"pickZ",void 0),B(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m,moduleParameters:y}){const x=this.gl;this.pickZ=m;const b=this._resetColorEncoder(m),w=aa(x,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Iz,blend:!m},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:h,effects:f==null?void 0:f.filter(E=>E.useInPicking),pass:g,isPicking:!0,moduleParameters:y}));return this._colorEncoderState=null,{decodePickingColor:b&&$Ie.bind(null,b),stats:w}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,Iz),i.blend=!0,i.blendColor=UIe(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function UIe(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(wn.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function $Ie(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Bd={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},X_=Symbol.for("component"),Kc=Symbol.for("propTypes"),bP=Symbol.for("deprecatedProps"),_f=Symbol.for("asyncPropDefaults"),Ah=Symbol.for("asyncPropOriginal"),Lc=Symbol.for("asyncPropResolved");function LO(t,e=()=>!0){return Array.isArray(t)?I9(t,e,[]):e(t)?[t]:[]}function I9(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?I9(i,e,n):e(i)&&n.push(i)}return n}function jIe({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class VIe{constructor(e,n,r){B(this,"id",void 0),B(this,"context",void 0),B(this,"isLoaded",void 0),B(this,"persistent",void 0),B(this,"_loadCount",0),B(this,"_subscribers",new Set),B(this,"_data",void 0),B(this,"_loader",void 0),B(this,"_error",void 0),B(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=gR(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class GIe{constructor({gl:e,protocol:n}){B(this,"protocol",void 0),B(this,"_context",void 0),B(this,"_resources",void 0),B(this,"_consumers",void 0),B(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new VIe(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const HIe=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,kO={name:"project32",dependencies:[IO],vs:HIe},DO={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...n2e},WIe=[IO],XIe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function YIe(t){const e=hy.getDefaultProgramManager(t);for(const n of WIe)e.addDefaultModule(n);for(const n of XIe)e.addShaderHook(n);return e}const qIe="layerManager.setLayers",KIe="layerManager.activateViewport";class ZIe{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){B(this,"layers",void 0),B(this,"context",void 0),B(this,"resourceManager",void 0),B(this,"_lastRenderedLayers",[]),B(this,"_needsRedraw",!1),B(this,"_needsUpdate",!1),B(this,"_nextLayers",null),B(this,"_debug",!1),B(this,"activateViewport",o=>{Ei(KIe,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new GIe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&YIe(e),stats:r||new bO({id:"deck.gl"}),viewport:i||new _p({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new y9,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Ei(qIe,this,n,e),this._lastRenderedLayers=e;const r=LO(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?wn.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&wn.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Bd.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Bd.MATCHED,n!==e&&(e.lifecycle=Bd.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Bd.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Bd.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function ta(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!ta(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!ta(t[s],e[s],n-1))return!1;return!0}return!1}class QIe{constructor(e){B(this,"width",void 0),B(this,"height",void 0),B(this,"views",void 0),B(this,"viewState",void 0),B(this,"controllers",void 0),B(this,"timeline",void 0),B(this,"_viewports",void 0),B(this,"_viewportMap",void 0),B(this,"_isUpdating",void 0),B(this,"_needsRedraw",void 0),B(this,"_needsUpdate",void 0),B(this,"_eventManager",void 0),B(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=LO(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ta(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):wn.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const JIe=/([0-9]+\.?[0-9]*)(%|px)/;function pc(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=JIe.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function gc(t,e){return t.relative?Math.round(t.position*e):t.position}function Wr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class ip{constructor(e){B(this,"id",void 0),B(this,"viewportInstance",void 0),B(this,"_x",void 0),B(this,"_y",void 0),B(this,"_width",void 0),B(this,"_height",void 0),B(this,"_padding",void 0),B(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Wr(!l||l instanceof _p),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=pc(r),this._y=pc(i),this._width=pc(s),this._height=pc(o),this._padding=a&&{left:pc(a.left||0),right:pc(a.right||0),top:pc(a.top||0),bottom:pc(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&ta(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:gc(this._x,e),y:gc(this._y,n),width:gc(this._width,e),height:gc(this._height,n)};return this._padding&&(r.padding={left:gc(this._padding.left,e),top:gc(this._padding.top,n),right:gc(this._padding.right,e),bottom:gc(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class fy{constructor(e){B(this,"_inProgress",void 0),B(this,"_handle",void 0),B(this,"_timeline",void 0),B(this,"time",void 0),B(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Mz=()=>{},OR={BREAK:1,SNAP_TO_END:2,IGNORE:3},eMe=t=>t,tMe=OR.BREAK;class nMe{constructor(e){B(this,"getControllerState",void 0),B(this,"props",void 0),B(this,"propsInTransition",void 0),B(this,"transition",void 0),B(this,"onViewStateChange",void 0),B(this,"onStateChange",void 0),B(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new fy(e.timeline),this.onViewStateChange=e.onViewStateChange||Mz,this.onStateChange=e.onStateChange||Mz}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===OR.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===OR.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||eMe,interpolator:s,interruption:n.transitionInterruption||tMe,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class rMe{constructor(e){B(this,"_propsToCompare",void 0),B(this,"_propsToExtract",void 0),B(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!_0(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Wr(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const iMe=["longitude","latitude","zoom","bearing","pitch"],sMe=["longitude","latitude","zoom"];class M9 extends rMe{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:iMe,required:sMe},super(r.transitionProps),B(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=$_(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,$_(e.around,n.around,r)))}return i}}const mc={transitionDuration:0},oMe=300,A1=t=>1-(1-t)*(1-t),Cd={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ou={};class aMe{constructor(e){B(this,"props",void 0),B(this,"state",{}),B(this,"transitionManager",void 0),B(this,"eventManager",void 0),B(this,"onViewStateChange",void 0),B(this,"onStateChange",void 0),B(this,"makeViewport",void 0),B(this,"_controllerState",void 0),B(this,"_events",{}),B(this,"_interactionState",{isDragging:!1}),B(this,"_customEvents",[]),B(this,"_eventStartBlocked",null),B(this,"_panMove",!1),B(this,"invertPan",!1),B(this,"dragMode","rotate"),B(this,"inertia",0),B(this,"scrollZoom",!0),B(this,"dragPan",!0),B(this,"dragRotate",!0),B(this,"doubleClickZoom",!0),B(this,"touchZoom",!0),B(this,"touchRotate",!1),B(this,"keyboard",!0),this.transitionManager=new nMe({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?oMe:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Cd.WHEEL,u&&r),this.toggleEvents(Cd.PAN,u),this.toggleEvents(Cd.PINCH,u&&(a||l)),this.toggleEvents(Cd.TRIPLE_PAN,u&&l),this.toggleEvents(Cd.DOUBLE_TAP,u&&o),this.toggleEvents(Cd.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,mc,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,mc,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:A1},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,mc,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:A1},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,mc,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,mc,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:A1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ou._startPinchRotation=e.rotation,Ou._lastPinchEvent=e,this.updateViewport(r,mc,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ou._startPinchRotation-r})}return this.updateViewport(n,mc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ou._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ou;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:A1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ou._startPinchRotation=null,Ou._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?mc:e?{...n,transitionInterpolator:new M9({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class lMe{constructor(e,n){B(this,"_viewportProps",void 0),B(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const Oz=5,cMe=1.2;class uMe extends lMe{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:y,startZoomLngLat:x,startRotatePos:b,startBearing:w,startPitch:v,startZoom:E,normalize:T=!0}=e;Wr(Number.isFinite(s)),Wr(Number.isFinite(i)),Wr(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:T,position:u},{startPanLngLat:y,startZoomLngLat:x,startRotatePos:b,startBearing:w,startPitch:v,startZoom:E}),B(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Oc(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Oc(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Oc(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,mIe(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),h=s/c;let f=0;o>0?Math.abs(u-l)>Oz&&(f=o/(l-u)*cMe):o<0&&l>Oz&&(f=1-a/l),f=Oc(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps(),y=i+180*h;let x=r;return f>0?x=r+f*(m-r):f<0&&(x=r-f*(g-r)),{pitch:x,bearing:y}}}class hMe extends aMe{constructor(...e){super(...e),B(this,"ControllerState",uMe),B(this,"transition",{transitionDuration:300,transitionInterpolator:new M9({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),B(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class NO extends ip{get ViewportType(){return rp}get ControllerType(){return hMe}}B(NO,"displayName","MapView");const dMe=new C9;function fMe(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class pMe{constructor(){B(this,"effects",void 0),B(this,"_resolvedEffects",[]),B(this,"_defaultEffects",[]),B(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>fMe(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(ta(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof C9)||this._resolvedEffects.push(dMe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class gMe extends RO{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const mMe="deckRenderer.renderLayers";class yMe{constructor(e){B(this,"gl",void 0),B(this,"layerFilter",void 0),B(this,"drawPickingColors",void 0),B(this,"drawLayersPass",void 0),B(this,"pickLayersPass",void 0),B(this,"renderCount",void 0),B(this,"_needsRedraw",void 0),B(this,"renderBuffers",void 0),B(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new gMe(e),this.pickLayersPass=new R9(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||kr.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Ei(mMe,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new kr(this.gl),new kr(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const vMe={pickedColor:null,pickedObjectIndex:-1};function bMe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,h=-1,f=0;for(let g=0;g<c;g++){const m=g+a-r,y=m*m;if(y>u)f+=4*l;else for(let x=0;x<l;x++){if(t[f+3]-1>=0){const w=x+o-n,v=w*w+y;v<=u&&(u=v,h=f)}f+=4}}if(h>=0){const g=t.slice(h,h+4),m=e(g);if(m){const y=Math.floor(h/4/l),x=h/4-y*l;return{...m,pickedColor:g,pickedX:o+x,pickedY:a+y}}wn.error("Picked non-existent layer. Is picking buffer corrupt?")()}return vMe}function _Me({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):wn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function O9({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=wMe((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function xMe(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const h=n.index,f=n.layerId,g=o?o.props.id:null;if(g!==f||a!==h){if(g!==f){const m=i.find(y=>y.props.id===f);m&&l.unshift(m)}n.layerId=g,n.index=a,n.info=null}}const c=O9(t),u=new Map;return u.set(null,c),l.forEach(h=>{let f={...c};h===o&&(f.color=s,f.index=a,f.picked=!0),f=L9({layer:h,info:f,mode:r});const g=f.layer;h===o&&r==="hover"&&(n.info=f),u.set(g.id,f),r==="hover"&&g.updateAutoHighlight(f)}),u}function L9({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function wMe(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class EMe{constructor(e){B(this,"gl",void 0),B(this,"pickingFBO",void 0),B(this,"depthFBO",void 0),B(this,"pickLayersPass",void 0),B(this,"layerFilter",void 0),B(this,"lastPickedInfo",void 0),B(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new R9(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(f=>f.id===o):null,c=a&&i.find(f=>f.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new kr(r),kr.isSupported(r,{colorBufferFloat:!0}))){const i=new kr(r);i.attach({36064:new ua(r,{format:qt(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=Yf(this.gl);if(!f)return{result:[],emptyInfo:O9({viewports:r,x:i,y:s,pixelRatio:g})};this._resizeBuffer();const m=tP(this.gl,[i,s],!0),y=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],x=Math.round(o*g),{width:b,height:w}=this.pickingFBO,v=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:x,deviceWidth:b,deviceHeight:w}),E={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let T;const P=[],R=new Set;for(let M=0;M<a;M++){let k;if(v){const F=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:v,cullRect:E,effects:h,pass:"picking:".concat(l)});k=bMe({...F,deviceX:y[0],deviceY:y[1],deviceRadius:x,deviceRect:v})}else k={pickedColor:null,pickedObjectIndex:-1};let O;if(k.pickedLayer&&c&&this.depthFBO){const{pickedColors:F}=this._drawAndSample({layers:[k.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:k.pickedX,y:k.pickedY,width:1,height:1},cullRect:E,effects:h,pass:"picking:".concat(l,":z")},!0);F[3]&&(O=F[0])}k.pickedLayer&&M+1<a&&(R.add(k.pickedLayer),k.pickedLayer.disablePickingIndex(k.pickedObjectIndex)),T=xMe({pickInfo:k,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:r,x:i,y:s,z:O,pixelRatio:g});for(const F of T.values())F.layer&&P.push(F);if(!k.pickedColor)break}for(const M of R)M.restorePickingColors();return{result:P,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=Yf(this.gl),m=tP(this.gl,[i,s],!0),y=m.x,x=m.y+m.height,b=tP(this.gl,[i+o,s+a],!0),w=b.x+b.width,v=b.y,E={x:y,y:v,width:w-y,height:x-v},T=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:E,cullRect:{x:i,y:s,width:o,height:a},effects:h,pass:"picking:".concat(l)}),P=_Me(T),R=new Map,M=Number.isFinite(c);for(let O=0;O<P.length;O++){var k;if(M&&c&&R.size>=c)break;const F=P[O];let I={color:F.pickedColor,layer:null,index:F.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:g};I=L9({layer:F.pickedLayer,info:I,mode:l});const D=(k=I.object)!==null&&k!==void 0?k:"".concat(I.layer.id,"[").concat(I.index,"]");R.has(D)||R.set(D,I)}return Array.from(R.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const w of a)w.useInPicking&&(h.preRenderStats[w.id]=w.preRender(this.gl,h));const{decodePickingColor:f}=this.pickLayersPass.render(h),{x:g,y:m,width:y,height:x}=s,b=new(c?Float32Array:Uint8Array)(y*x*4);return Yw(u,{sourceX:g,sourceY:m,sourceWidth:y,sourceHeight:x,target:b}),{pickedColors:b,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const SMe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class TMe{constructor(e){B(this,"el",null),B(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,SMe),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var k9={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function h(z,V,q){return setTimeout(v(z,q),V)}function f(z,V,q){return Array.isArray(z)?(g(z,q[V],q),!0):!1}function g(z,V,q){var ie;if(z)if(z.forEach)z.forEach(V,q);else if(z.length!==i)for(ie=0;ie<z.length;)V.call(q,z[ie],ie,z),ie++;else for(ie in z)z.hasOwnProperty(ie)&&V.call(q,z[ie],ie,z)}function m(z,V,q){var ie="DEPRECATED METHOD: "+V+`
`+q+` AT 
`;return function(){var Ee=new Error("get-stack-trace"),He=Ee&&Ee.stack?Ee.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Dt=e.console&&(e.console.warn||e.console.log);return Dt&&Dt.call(e.console,ie,He),z.apply(this,arguments)}}var y;typeof Object.assign!="function"?y=function(V){if(V===i||V===null)throw new TypeError("Cannot convert undefined or null to object");for(var q=Object(V),ie=1;ie<arguments.length;ie++){var Ee=arguments[ie];if(Ee!==i&&Ee!==null)for(var He in Ee)Ee.hasOwnProperty(He)&&(q[He]=Ee[He])}return q}:y=Object.assign;var x=m(function(V,q,ie){for(var Ee=Object.keys(q),He=0;He<Ee.length;)(!ie||ie&&V[Ee[He]]===i)&&(V[Ee[He]]=q[Ee[He]]),He++;return V},"extend","Use `assign`."),b=m(function(V,q){return x(V,q,!0)},"merge","Use `assign`.");function w(z,V,q){var ie=V.prototype,Ee;Ee=z.prototype=Object.create(ie),Ee.constructor=z,Ee._super=ie,q&&y(Ee,q)}function v(z,V){return function(){return z.apply(V,arguments)}}function E(z,V){return typeof z==a?z.apply(V&&V[0]||i,V):z}function T(z,V){return z===i?V:z}function P(z,V,q){g(O(V),function(ie){z.addEventListener(ie,q,!1)})}function R(z,V,q){g(O(V),function(ie){z.removeEventListener(ie,q,!1)})}function M(z,V){for(;z;){if(z==V)return!0;z=z.parentNode}return!1}function k(z,V){return z.indexOf(V)>-1}function O(z){return z.trim().split(/\s+/g)}function F(z,V,q){if(z.indexOf&&!q)return z.indexOf(V);for(var ie=0;ie<z.length;){if(q&&z[ie][q]==V||!q&&z[ie]===V)return ie;ie++}return-1}function I(z){return Array.prototype.slice.call(z,0)}function D(z,V,q){for(var ie=[],Ee=[],He=0;He<z.length;){var Dt=V?z[He][V]:z[He];F(Ee,Dt)<0&&ie.push(z[He]),Ee[He]=Dt,He++}return q&&(V?ie=ie.sort(function(hr,bt){return hr[V]>bt[V]}):ie=ie.sort()),ie}function N(z,V){for(var q,ie,Ee=V[0].toUpperCase()+V.slice(1),He=0;He<s.length;){if(q=s[He],ie=q?q+Ee:V,ie in z)return ie;He++}return i}var j=1;function W(){return j++}function H(z){var V=z.ownerDocument||z;return V.defaultView||V.parentWindow||e}var U=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in e,Y=N(e,"PointerEvent")!==i,Z=X&&U.test(navigator.userAgent),se="touch",xe="pen",de="mouse",Me="kinect",he=25,Te=1,le=2,ae=4,me=8,oe=1,_e=2,pe=4,Pe=8,we=16,Ye=_e|pe,ke=Pe|we,Oe=Ye|ke,rt=["x","y"],qe=["clientX","clientY"];function Ge(z,V){var q=this;this.manager=z,this.callback=V,this.element=z.element,this.target=z.options.inputTarget,this.domHandler=function(ie){E(z.options.enable,[z])&&q.handler(ie)},this.init()}Ge.prototype={handler:function(){},init:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(H(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(H(this.element),this.evWin,this.domHandler)}};function fn(z){var V,q=z.options.inputClass;return q?V=q:Y?V=ee:Z?V=Je:X?V=Pt:V=Gi,new V(z,Mt)}function Mt(z,V,q){var ie=q.pointers.length,Ee=q.changedPointers.length,He=V&Te&&ie-Ee===0,Dt=V&(ae|me)&&ie-Ee===0;q.isFirst=!!He,q.isFinal=!!Dt,He&&(z.session={}),q.eventType=V,pt(z,q),z.emit("hammer.input",q),z.recognize(q),z.session.prevInput=q}function pt(z,V){var q=z.session,ie=V.pointers,Ee=ie.length;q.firstInput||(q.firstInput=Ke(V)),Ee>1&&!q.firstMultiple?q.firstMultiple=Ke(V):Ee===1&&(q.firstMultiple=!1);var He=q.firstInput,Dt=q.firstMultiple,Fn=Dt?Dt.center:He.center,hr=V.center=je(ie);V.timeStamp=u(),V.deltaTime=V.timeStamp-He.timeStamp,V.angle=Ot(Fn,hr),V.distance=wt(Fn,hr),Se(q,V),V.offsetDirection=kt(V.deltaX,V.deltaY);var bt=Le(V.deltaTime,V.deltaX,V.deltaY);V.overallVelocityX=bt.x,V.overallVelocityY=bt.y,V.overallVelocity=c(bt.x)>c(bt.y)?bt.x:bt.y,V.scale=Dt?Tt(Dt.pointers,ie):1,V.rotation=Dt?Be(Dt.pointers,ie):0,V.maxPointers=q.prevInput?V.pointers.length>q.prevInput.maxPointers?V.pointers.length:q.prevInput.maxPointers:V.pointers.length,Ne(q,V);var ps=z.element;M(V.srcEvent.target,ps)&&(ps=V.srcEvent.target),V.target=ps}function Se(z,V){var q=V.center,ie=z.offsetDelta||{},Ee=z.prevDelta||{},He=z.prevInput||{};(V.eventType===Te||He.eventType===ae)&&(Ee=z.prevDelta={x:He.deltaX||0,y:He.deltaY||0},ie=z.offsetDelta={x:q.x,y:q.y}),V.deltaX=Ee.x+(q.x-ie.x),V.deltaY=Ee.y+(q.y-ie.y)}function Ne(z,V){var q=z.lastInterval||V,ie=V.timeStamp-q.timeStamp,Ee,He,Dt,Fn;if(V.eventType!=me&&(ie>he||q.velocity===i)){var hr=V.deltaX-q.deltaX,bt=V.deltaY-q.deltaY,ps=Le(ie,hr,bt);He=ps.x,Dt=ps.y,Ee=c(ps.x)>c(ps.y)?ps.x:ps.y,Fn=kt(hr,bt),z.lastInterval=V}else Ee=q.velocity,He=q.velocityX,Dt=q.velocityY,Fn=q.direction;V.velocity=Ee,V.velocityX=He,V.velocityY=Dt,V.direction=Fn}function Ke(z){for(var V=[],q=0;q<z.pointers.length;)V[q]={clientX:l(z.pointers[q].clientX),clientY:l(z.pointers[q].clientY)},q++;return{timeStamp:u(),pointers:V,center:je(V),deltaX:z.deltaX,deltaY:z.deltaY}}function je(z){var V=z.length;if(V===1)return{x:l(z[0].clientX),y:l(z[0].clientY)};for(var q=0,ie=0,Ee=0;Ee<V;)q+=z[Ee].clientX,ie+=z[Ee].clientY,Ee++;return{x:l(q/V),y:l(ie/V)}}function Le(z,V,q){return{x:V/z||0,y:q/z||0}}function kt(z,V){return z===V?oe:c(z)>=c(V)?z<0?_e:pe:V<0?Pe:we}function wt(z,V,q){q||(q=rt);var ie=V[q[0]]-z[q[0]],Ee=V[q[1]]-z[q[1]];return Math.sqrt(ie*ie+Ee*Ee)}function Ot(z,V,q){q||(q=rt);var ie=V[q[0]]-z[q[0]],Ee=V[q[1]]-z[q[1]];return Math.atan2(Ee,ie)*180/Math.PI}function Be(z,V){return Ot(V[1],V[0],qe)+Ot(z[1],z[0],qe)}function Tt(z,V){return wt(V[0],V[1],qe)/wt(z[0],z[1],qe)}var Gt={mousedown:Te,mousemove:le,mouseup:ae},on="mousedown",Dr="mousemove mouseup";function Gi(){this.evEl=on,this.evWin=Dr,this.pressed=!1,Ge.apply(this,arguments)}w(Gi,Ge,{handler:function(V){var q=Gt[V.type];q&Te&&V.button===0&&(this.pressed=!0),q&le&&V.which!==1&&(q=ae),this.pressed&&(q&ae&&(this.pressed=!1),this.callback(this.manager,q,{pointers:[V],changedPointers:[V],pointerType:de,srcEvent:V}))}});var Io={pointerdown:Te,pointermove:le,pointerup:ae,pointercancel:me,pointerout:me},fa={2:se,3:xe,4:de,5:Me},Ws="pointerdown",us="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ws="MSPointerDown",us="MSPointerMove MSPointerUp MSPointerCancel");function ee(){this.evEl=Ws,this.evWin=us,Ge.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}w(ee,Ge,{handler:function(V){var q=this.store,ie=!1,Ee=V.type.toLowerCase().replace("ms",""),He=Io[Ee],Dt=fa[V.pointerType]||V.pointerType,Fn=Dt==se,hr=F(q,V.pointerId,"pointerId");He&Te&&(V.button===0||Fn)?hr<0&&(q.push(V),hr=q.length-1):He&(ae|me)&&(ie=!0),!(hr<0)&&(q[hr]=V,this.callback(this.manager,He,{pointers:q,changedPointers:[V],pointerType:Dt,srcEvent:V}),ie&&q.splice(hr,1))}});var ne={touchstart:Te,touchmove:le,touchend:ae,touchcancel:me},ce="touchstart",De="touchstart touchmove touchend touchcancel";function Ve(){this.evTarget=ce,this.evWin=De,this.started=!1,Ge.apply(this,arguments)}w(Ve,Ge,{handler:function(V){var q=ne[V.type];if(q===Te&&(this.started=!0),!!this.started){var ie=vt.call(this,V,q);q&(ae|me)&&ie[0].length-ie[1].length===0&&(this.started=!1),this.callback(this.manager,q,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:V})}}});function vt(z,V){var q=I(z.touches),ie=I(z.changedTouches);return V&(ae|me)&&(q=D(q.concat(ie),"identifier",!0)),[q,ie]}var ut={touchstart:Te,touchmove:le,touchend:ae,touchcancel:me},ht="touchstart touchmove touchend touchcancel";function Je(){this.evTarget=ht,this.targetIds={},Ge.apply(this,arguments)}w(Je,Ge,{handler:function(V){var q=ut[V.type],ie=Lt.call(this,V,q);ie&&this.callback(this.manager,q,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:V})}});function Lt(z,V){var q=I(z.touches),ie=this.targetIds;if(V&(Te|le)&&q.length===1)return ie[q[0].identifier]=!0,[q,q];var Ee,He,Dt=I(z.changedTouches),Fn=[],hr=this.target;if(He=q.filter(function(bt){return M(bt.target,hr)}),V===Te)for(Ee=0;Ee<He.length;)ie[He[Ee].identifier]=!0,Ee++;for(Ee=0;Ee<Dt.length;)ie[Dt[Ee].identifier]&&Fn.push(Dt[Ee]),V&(ae|me)&&delete ie[Dt[Ee].identifier],Ee++;if(Fn.length)return[D(He.concat(Fn),"identifier",!0),Fn]}var an=2500,gt=25;function Pt(){Ge.apply(this,arguments);var z=v(this.handler,this);this.touch=new Je(this.manager,z),this.mouse=new Gi(this.manager,z),this.primaryTouch=null,this.lastTouches=[]}w(Pt,Ge,{handler:function(V,q,ie){var Ee=ie.pointerType==se,He=ie.pointerType==de;if(!(He&&ie.sourceCapabilities&&ie.sourceCapabilities.firesTouchEvents)){if(Ee)ln.call(this,q,ie);else if(He&&tn.call(this,ie))return;this.callback(V,q,ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ln(z,V){z&Te?(this.primaryTouch=V.changedPointers[0].identifier,Bn.call(this,V)):z&(ae|me)&&Bn.call(this,V)}function Bn(z){var V=z.changedPointers[0];if(V.identifier===this.primaryTouch){var q={x:V.clientX,y:V.clientY};this.lastTouches.push(q);var ie=this.lastTouches,Ee=function(){var He=ie.indexOf(q);He>-1&&ie.splice(He,1)};setTimeout(Ee,an)}}function tn(z){for(var V=z.srcEvent.clientX,q=z.srcEvent.clientY,ie=0;ie<this.lastTouches.length;ie++){var Ee=this.lastTouches[ie],He=Math.abs(V-Ee.x),Dt=Math.abs(q-Ee.y);if(He<=gt&&Dt<=gt)return!0}return!1}var Cr=N(o.style,"touchAction"),hs=Cr!==i,Zt="compute",Jt="auto",vr="manipulation",br="none",Wn="pan-x",ds="pan-y",Ii=bn();function Et(z,V){this.manager=z,this.set(V)}Et.prototype={set:function(z){z==Zt&&(z=this.compute()),hs&&this.manager.element.style&&Ii[z]&&(this.manager.element.style[Cr]=z),this.actions=z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var z=[];return g(this.manager.recognizers,function(V){E(V.options.enable,[V])&&(z=z.concat(V.getTouchAction()))}),At(z.join(" "))},preventDefaults:function(z){var V=z.srcEvent,q=z.offsetDirection;if(this.manager.session.prevented){V.preventDefault();return}var ie=this.actions,Ee=k(ie,br)&&!Ii[br],He=k(ie,ds)&&!Ii[ds],Dt=k(ie,Wn)&&!Ii[Wn];if(Ee){var Fn=z.pointers.length===1,hr=z.distance<2,bt=z.deltaTime<250;if(Fn&&hr&&bt)return}if(!(Dt&&He)&&(Ee||He&&q&Ye||Dt&&q&ke))return this.preventSrc(V)},preventSrc:function(z){this.manager.session.prevented=!0,z.preventDefault()}};function At(z){if(k(z,br))return br;var V=k(z,Wn),q=k(z,ds);return V&&q?br:V||q?V?Wn:ds:k(z,vr)?vr:Jt}function bn(){if(!hs)return!1;var z={},V=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(q){z[q]=V?e.CSS.supports("touch-action",q):!0}),z}var Kr=1,Xn=2,Xs=4,Ys=8,Mo=Ys,ll=16,Zr=32;function Nr(z){this.options=y({},this.defaults,z||{}),this.id=W(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=Kr,this.simultaneous={},this.requireFail=[]}Nr.prototype={defaults:{},set:function(z){return y(this.options,z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(z){if(f(z,"recognizeWith",this))return this;var V=this.simultaneous;return z=fs(z,this),V[z.id]||(V[z.id]=z,z.recognizeWith(this)),this},dropRecognizeWith:function(z){return f(z,"dropRecognizeWith",this)?this:(z=fs(z,this),delete this.simultaneous[z.id],this)},requireFailure:function(z){if(f(z,"requireFailure",this))return this;var V=this.requireFail;return z=fs(z,this),F(V,z)===-1&&(V.push(z),z.requireFailure(this)),this},dropRequireFailure:function(z){if(f(z,"dropRequireFailure",this))return this;z=fs(z,this);var V=F(this.requireFail,z);return V>-1&&this.requireFail.splice(V,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(z){return!!this.simultaneous[z.id]},emit:function(z){var V=this,q=this.state;function ie(Ee){V.manager.emit(Ee,z)}q<Ys&&ie(V.options.event+Sn(q)),ie(V.options.event),z.additionalEvent&&ie(z.additionalEvent),q>=Ys&&ie(V.options.event+Sn(q))},tryEmit:function(z){if(this.canEmit())return this.emit(z);this.state=Zr},canEmit:function(){for(var z=0;z<this.requireFail.length;){if(!(this.requireFail[z].state&(Zr|Kr)))return!1;z++}return!0},recognize:function(z){var V=y({},z);if(!E(this.options.enable,[this,V])){this.reset(),this.state=Zr;return}this.state&(Mo|ll|Zr)&&(this.state=Kr),this.state=this.process(V),this.state&(Xn|Xs|Ys|ll)&&this.tryEmit(V)},process:function(z){},getTouchAction:function(){},reset:function(){}};function Sn(z){return z&ll?"cancel":z&Ys?"end":z&Xs?"move":z&Xn?"start":""}function mn(z){return z==we?"down":z==Pe?"up":z==_e?"left":z==pe?"right":""}function fs(z,V){var q=V.manager;return q?q.get(z):z}function _n(){Nr.apply(this,arguments)}w(_n,Nr,{defaults:{pointers:1},attrTest:function(z){var V=this.options.pointers;return V===0||z.pointers.length===V},process:function(z){var V=this.state,q=z.eventType,ie=V&(Xn|Xs),Ee=this.attrTest(z);return ie&&(q&me||!Ee)?V|ll:ie||Ee?q&ae?V|Ys:V&Xn?V|Xs:Xn:Zr}});function Ar(){_n.apply(this,arguments),this.pX=null,this.pY=null}w(Ar,_n,{defaults:{event:"pan",threshold:10,pointers:1,direction:Oe},getTouchAction:function(){var z=this.options.direction,V=[];return z&Ye&&V.push(ds),z&ke&&V.push(Wn),V},directionTest:function(z){var V=this.options,q=!0,ie=z.distance,Ee=z.direction,He=z.deltaX,Dt=z.deltaY;return Ee&V.direction||(V.direction&Ye?(Ee=He===0?oe:He<0?_e:pe,q=He!=this.pX,ie=Math.abs(z.deltaX)):(Ee=Dt===0?oe:Dt<0?Pe:we,q=Dt!=this.pY,ie=Math.abs(z.deltaY))),z.direction=Ee,q&&ie>V.threshold&&Ee&V.direction},attrTest:function(z){return _n.prototype.attrTest.call(this,z)&&(this.state&Xn||!(this.state&Xn)&&this.directionTest(z))},emit:function(z){this.pX=z.deltaX,this.pY=z.deltaY;var V=mn(z.direction);V&&(z.additionalEvent=this.options.event+V),this._super.emit.call(this,z)}});function Oo(){_n.apply(this,arguments)}w(Oo,_n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[br]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.scale-1)>this.options.threshold||this.state&Xn)},emit:function(z){if(z.scale!==1){var V=z.scale<1?"in":"out";z.additionalEvent=this.options.event+V}this._super.emit.call(this,z)}});function pa(){Nr.apply(this,arguments),this._timer=null,this._input=null}w(pa,Nr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Jt]},process:function(z){var V=this.options,q=z.pointers.length===V.pointers,ie=z.distance<V.threshold,Ee=z.deltaTime>V.time;if(this._input=z,!ie||!q||z.eventType&(ae|me)&&!Ee)this.reset();else if(z.eventType&Te)this.reset(),this._timer=h(function(){this.state=Mo,this.tryEmit()},V.time,this);else if(z.eventType&ae)return Mo;return Zr},reset:function(){clearTimeout(this._timer)},emit:function(z){this.state===Mo&&(z&&z.eventType&ae?this.manager.emit(this.options.event+"up",z):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Qr(){_n.apply(this,arguments)}w(Qr,_n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[br]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.rotation)>this.options.threshold||this.state&Xn)}});function gu(){_n.apply(this,arguments)}w(gu,_n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ye|ke,pointers:1},getTouchAction:function(){return Ar.prototype.getTouchAction.call(this)},attrTest:function(z){var V=this.options.direction,q;return V&(Ye|ke)?q=z.overallVelocity:V&Ye?q=z.overallVelocityX:V&ke&&(q=z.overallVelocityY),this._super.attrTest.call(this,z)&&V&z.offsetDirection&&z.distance>this.options.threshold&&z.maxPointers==this.options.pointers&&c(q)>this.options.velocity&&z.eventType&ae},emit:function(z){var V=mn(z.offsetDirection);V&&this.manager.emit(this.options.event+V,z),this.manager.emit(this.options.event,z)}});function mu(){Nr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}w(mu,Nr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vr]},process:function(z){var V=this.options,q=z.pointers.length===V.pointers,ie=z.distance<V.threshold,Ee=z.deltaTime<V.time;if(this.reset(),z.eventType&Te&&this.count===0)return this.failTimeout();if(ie&&Ee&&q){if(z.eventType!=ae)return this.failTimeout();var He=this.pTime?z.timeStamp-this.pTime<V.interval:!0,Dt=!this.pCenter||wt(this.pCenter,z.center)<V.posThreshold;this.pTime=z.timeStamp,this.pCenter=z.center,!Dt||!He?this.count=1:this.count+=1,this._input=z;var Fn=this.count%V.taps;if(Fn===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Mo,this.tryEmit()},V.interval,this),Xn):Mo}return Zr},failTimeout:function(){return this._timer=h(function(){this.state=Zr},this.options.interval,this),Zr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Mo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function qs(z,V){return V=V||{},V.recognizers=T(V.recognizers,qs.defaults.preset),new Mi(z,V)}qs.VERSION="2.0.7",qs.defaults={domEvents:!1,touchAction:Zt,enable:!0,inputTarget:null,inputClass:null,preset:[[Qr,{enable:!1}],[Oo,{enable:!1},["rotate"]],[gu,{direction:Ye}],[Ar,{direction:Ye},["swipe"]],[mu],[mu,{event:"doubletap",taps:2},["tap"]],[pa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var jh=1,xp=2;function Mi(z,V){this.options=y({},qs.defaults,V||{}),this.options.inputTarget=this.options.inputTarget||z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=z,this.input=fn(this),this.touchAction=new Et(this,this.options.touchAction),my(this,!0),g(this.options.recognizers,function(q){var ie=this.add(new q[0](q[1]));q[2]&&ie.recognizeWith(q[2]),q[3]&&ie.requireFailure(q[3])},this)}Mi.prototype={set:function(z){return y(this.options,z),z.touchAction&&this.touchAction.update(),z.inputTarget&&(this.input.destroy(),this.input.target=z.inputTarget,this.input.init()),this},stop:function(z){this.session.stopped=z?xp:jh},recognize:function(z){var V=this.session;if(!V.stopped){this.touchAction.preventDefaults(z);var q,ie=this.recognizers,Ee=V.curRecognizer;(!Ee||Ee&&Ee.state&Mo)&&(Ee=V.curRecognizer=null);for(var He=0;He<ie.length;)q=ie[He],V.stopped!==xp&&(!Ee||q==Ee||q.canRecognizeWith(Ee))?q.recognize(z):q.reset(),!Ee&&q.state&(Xn|Xs|Ys)&&(Ee=V.curRecognizer=q),He++}},get:function(z){if(z instanceof Nr)return z;for(var V=this.recognizers,q=0;q<V.length;q++)if(V[q].options.event==z)return V[q];return null},add:function(z){if(f(z,"add",this))return this;var V=this.get(z.options.event);return V&&this.remove(V),this.recognizers.push(z),z.manager=this,this.touchAction.update(),z},remove:function(z){if(f(z,"remove",this))return this;if(z=this.get(z),z){var V=this.recognizers,q=F(V,z);q!==-1&&(V.splice(q,1),this.touchAction.update())}return this},on:function(z,V){if(z!==i&&V!==i){var q=this.handlers;return g(O(z),function(ie){q[ie]=q[ie]||[],q[ie].push(V)}),this}},off:function(z,V){if(z!==i){var q=this.handlers;return g(O(z),function(ie){V?q[ie]&&q[ie].splice(F(q[ie],V),1):delete q[ie]}),this}},emit:function(z,V){this.options.domEvents&&Jw(z,V);var q=this.handlers[z]&&this.handlers[z].slice();if(!(!q||!q.length)){V.type=z,V.preventDefault=function(){V.srcEvent.preventDefault()};for(var ie=0;ie<q.length;)q[ie](V),ie++}},destroy:function(){this.element&&my(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function my(z,V){var q=z.element;if(q.style){var ie;g(z.options.cssProps,function(Ee,He){ie=N(q.style,He),V?(z.oldCssProps[ie]=q.style[ie],q.style[ie]=Ee):q.style[ie]=z.oldCssProps[ie]||""}),V||(z.oldCssProps={})}}function Jw(z,V){var q=n.createEvent("Event");q.initEvent(z,!0,!0),q.gesture=V,V.target.dispatchEvent(q)}y(qs,{INPUT_START:Te,INPUT_MOVE:le,INPUT_END:ae,INPUT_CANCEL:me,STATE_POSSIBLE:Kr,STATE_BEGAN:Xn,STATE_CHANGED:Xs,STATE_ENDED:Ys,STATE_RECOGNIZED:Mo,STATE_CANCELLED:ll,STATE_FAILED:Zr,DIRECTION_NONE:oe,DIRECTION_LEFT:_e,DIRECTION_RIGHT:pe,DIRECTION_UP:Pe,DIRECTION_DOWN:we,DIRECTION_HORIZONTAL:Ye,DIRECTION_VERTICAL:ke,DIRECTION_ALL:Oe,Manager:Mi,Input:Ge,TouchAction:Et,TouchInput:Je,MouseInput:Gi,PointerEventInput:ee,TouchMouseInput:Pt,SingleTouchInput:Ve,Recognizer:Nr,AttrRecognizer:_n,Tap:mu,Pan:Ar,Swipe:gu,Pinch:Oo,Rotate:Qr,Press:pa,on:P,off:R,each:g,merge:b,extend:x,assign:y,inherit:w,bindFn:v,prefixed:N});var wp=typeof e<"u"?e:typeof self<"u"?self:{};wp.Hammer=qs,typeof i=="function"&&i.amd?i(function(){return qs}):t.exports?t.exports=qs:e[r]=qs})(window,document,"Hammer")})(k9);var py=k9.exports;const PMe=Rh(py),Ra=XR({__proto__:null,default:PMe},[py]),D9=1,N9=2,LR=4,CMe={mousedown:D9,mousemove:N9,mouseup:LR};function AMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function RMe(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(AMe(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function IMe(t){t.prototype.handler=function(n){let r=CMe[n.type];r&D9&&n.button>=0&&(this.pressed=!0),r&N9&&n.which===0&&(r=LR),this.pressed&&(r&LR&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}RMe(py.PointerEventInput);IMe(py.MouseInput);const MMe=py.Manager;class qw{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const OMe=Ra?[[Ra.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ra.Rotate,{enable:!1}],[Ra.Pinch,{enable:!1}],[Ra.Swipe,{enable:!1}],[Ra.Pan,{threshold:0,enable:!1}],[Ra.Press,{enable:!1}],[Ra.Tap,{event:"doubletap",taps:2,enable:!1}],[Ra.Tap,{event:"anytap",enable:!1}],[Ra.Tap,{enable:!1}]]:null,Lz={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},LMe={doubletap:["tap"]},kMe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},BO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},DMe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},kz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},NMe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",rf=typeof window<"u"?window:global;let kR=!1;try{const t={get passive(){return kR=!0,!0}};rf.addEventListener("test",null,t),rf.removeEventListener("test",null)}catch{kR=!1}const BMe=NMe.indexOf("firefox")!==-1,{WHEEL_EVENTS:FMe}=BO,Dz="wheel",Nz=4.000244140625,zMe=40,UMe=.25;class $Me extends qw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;rf.WheelEvent&&(BMe&&i.deltaMode===rf.WheelEvent.DOM_DELTA_PIXEL&&(s/=rf.devicePixelRatio),i.deltaMode===rf.WheelEvent.DOM_DELTA_LINE&&(s*=zMe)),s!==0&&s%Nz===0&&(s=Math.floor(s/Nz)),i.shiftKey&&s&&(s=s*UMe),this.callback({type:Dz,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(FMe),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,kR?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Dz&&(this.options.enable=n)}}const{MOUSE_EVENTS:jMe}=BO,Bz="pointermove",Fz="pointerover",zz="pointerout",Uz="pointerenter",$z="pointerleave";class VMe extends qw{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(jMe),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Bz&&(this.enableMoveEvent=n),e===Fz&&(this.enableOverEvent=n),e===zz&&(this.enableOutEvent=n),e===Uz&&(this.enableEnterEvent=n),e===$z&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(Fz,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(zz,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(Uz,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit($z,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(Bz,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:GMe}=BO,jz="keydown",Vz="keyup";class HMe extends qw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:jz,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:Vz,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(GMe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===jz&&(this.enableDownEvent=n),e===Vz&&(this.enableUpEvent=n)}}const Gz="contextmenu";class WMe extends qw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:Gz,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===Gz&&(this.options.enable=n)}}const DR=1,Y_=2,NR=4,XMe={pointerdown:DR,pointermove:Y_,pointerup:NR,mousedown:DR,mousemove:Y_,mouseup:NR},YMe=1,qMe=2,KMe=3,ZMe=0,QMe=1,JMe=2,eOe=1,tOe=2,nOe=4;function rOe(t){const e=XMe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===NR||e===Y_&&!Number.isFinite(n)?(s=i===YMe,o=i===qMe,a=i===KMe):e===Y_?(s=!!(n&eOe),o=!!(n&nOe),a=!!(n&tOe)):e===DR&&(s=r===ZMe,o=r===QMe,a=r===JMe),{leftButton:s,middleButton:o,rightButton:a}}function iOe(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const _P={srcElement:"root",priority:0};class sOe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=_P;typeof r=="string"||r&&r.addEventListener?l={..._P,srcElement:r}:r&&(l={..._P,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=c.length-1;for(;h>=0&&!(c[h].priority>=u.priority);)h--;c.splice(h+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:h}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...rOe(e),...iOe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const oOe={events:null,recognizers:null,recognizerOptions:{},Manager:MMe,touchAction:"none",tabIndex:0};class aOe{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=kMe[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...oOe,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||OMe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Lz).forEach(i=>{const s=this.manager.get(i);s&&Lz[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new $Me(e,this._onOtherEvent,{enable:!1}),this.moveInput=new VMe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new HMe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new WMe(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=LMe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=kz[e]||e;let c=a.get(l);c||(c=new sOe(this),a.set(l,c),c.recognizerName=DMe[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=kz[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Lu(){}const lOe=({isDragging:t})=>t?"grabbing":"grab",B9={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Lu,onResize:Lu,onViewStateChange:Lu,onInteractionStateChange:Lu,onBeforeRender:Lu,onAfterRender:Lu,onLoad:Lu,onError:t=>wn.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:lOe,getTooltip:null,debug:!1,drawPickingColors:!1};class Kw{constructor(e){B(this,"props",void 0),B(this,"width",0),B(this,"height",0),B(this,"userData",{}),B(this,"canvas",null),B(this,"viewManager",null),B(this,"layerManager",null),B(this,"effectManager",null),B(this,"deckRenderer",null),B(this,"deckPicker",null),B(this,"eventManager",null),B(this,"tooltip",null),B(this,"metrics",void 0),B(this,"animationLoop",void 0),B(this,"stats",void 0),B(this,"viewState",void 0),B(this,"cursorState",void 0),B(this,"_needsRedraw",void 0),B(this,"_pickRequest",void 0),B(this,"_lastPointerDownInfo",null),B(this,"_metricsCounter",void 0),B(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),B(this,"_onEvent",n=>{const r=C4[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),B(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...B9,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&wn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),DW()==="IE"&&wn.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new bO({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&np.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&wn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&wn.removed("onLayerClick","onClick")(),e.initialViewState&&!ta(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Wr(this.viewManager),this.viewManager.views}getViewports(e){return Wr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Wr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Wr(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new cAe({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:h=>jW({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new NO({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,vO(e,{enable:!0,copyState:!0})),this.tooltip=new TMe(this.canvas),$l(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new y9;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new aOe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in C4)this.eventManager.on(i,this._onEvent);this.viewManager=new QIe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new ZIe(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new pMe,this.deckRenderer=new yMe(e),this.deckPicker=new EMe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;$l(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),wn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=eh.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}B(Kw,"defaultProps",B9);B(Kw,"VERSION",pTe);class xP{constructor(e,n){B(this,"opts",void 0),B(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function cOe(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function pb(t){return t.stride||t.size*t.bytesPerElement}function F9(t,e){e.offset&&wn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=pb(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function uOe(t,e){const n=F9(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class hOe{constructor(e,n,r){B(this,"gl",void 0),B(this,"id",void 0),B(this,"size",void 0),B(this,"settings",void 0),B(this,"value",void 0),B(this,"doublePrecision",void 0),B(this,"_buffer",void 0),B(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&zPe(e,kn.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=cOe(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new xn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*pb(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),np.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=uOe(this.getAccessor(),n||{});return r[e]=new xP(this,s.high),r["".concat(e,"64Low")]=i?new xP(this,s.low):new Float32Array(this.size),r}if(n){const r=F9(this.getAccessor(),n);return{[e]:new xP(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof xn?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=pb(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=pb(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=yP(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?yP(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=np.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?yP(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&wn.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const Hz=[],Wz=[];function FO(t,e=0,n=1/0){let r=Hz;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(Wz.length=t.length,r=Wz):r=Hz,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function z9(t){return t&&t[Symbol.asyncIterator]}function U9(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(h,{index:f,target:g})=>{if(!s){const b=f*l+c;for(let w=0;w<n;w++)g[w]=t[b+w];return g}const m=s[f],y=s[f+1]||u;let x;if(o){x=new Array(y-m);for(let b=m;b<y;b++){const w=b*l+c;g=new Array(n);for(let v=0;v<n;v++)g[v]=t[w+v];x[b-m]=g}}else if(l===n)x=t.subarray(m*n+c,y*n+c);else{x=new t.constructor((y-m)*n);let b=0;for(let w=m;w<y;w++){const v=w*l+c;for(let E=0;E<n;E++)x[b++]=t[v+E]}}return x}}const dOe=[],gb=[[0,1/0]];function fOe(t,e){if(t===gb||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function wP(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let h=0;h<i;h++)n[r+c]=u[h]||0,c++}}function pOe({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return wP({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,h)=>r(u+a,h)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const h=i[u]*n,f=s[u]*n;wP({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:l}),o=h,a=f}return a<e.length&&wP({source:[],target:e,start:a,size:n,getData:l}),e}const gOe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function $9(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...gOe[n],...e,...t,type:n}}function j9(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function V9(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function G9(t){t.push(t.shift())}function zO(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function H9({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,h=zO(n,e),f=n.isConstant;if(!u&&r>=h)return;const g=f?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!f){const b=s;s=(w,v)=>n.normalizeConstant(b(w,v))}const m=f?(b,w)=>s(g,w):(b,w)=>s(g.subarray(b,b+a),w),y=t.getData({length:r}),x=new Float32Array(h);pOe({source:y,target:x,sourceStartIndices:i,targetStartIndices:c,size:a,getData:m}),t.byteLength<x.byteLength+l&&t.reallocate(x.byteLength+l),t.subData({data:x,offset:l})}class UO extends hOe{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:gb}),B(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return $9(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=fOe(this.state.updateRanges,[r,i])}else this.state.updateRanges=gb}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=dOe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==gb),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Wr(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=U9(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=l.binaryAccessor||(typeof f=="function"?f:s[f]);Wr(typeof m=="function",'accessor "'.concat(f,'" is not a function'));let y=e.getVertexOffset(r);const{iterable:x,objectInfo:b}=FO(n,r,i);for(const w of x){b.index++;let v=m(w,b);if(g&&(v=g.call(this,v)),h){const E=(b.index<h.length-1?h[b.index+1]:o)-h[b.index];if(v&&Array.isArray(v[0])){let T=y;for(const P of v)e._normalizeValue(P,c,T),T+=u}else v&&v.length>u?c.set(v,y):(e._normalizeValue(v,b.target,0),jIe({target:c,source:b.target,start:y,count:E}));y+=E*u}else e._normalizeValue(v,c,y),y+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class mOe{constructor({gl:e,attribute:n,timeline:r}){B(this,"gl",void 0),B(this,"type","interpolation"),B(this,"attributeInTransition",void 0),B(this,"settings",void 0),B(this,"attribute",void 0),B(this,"transition",void 0),B(this,"currentStartIndices",void 0),B(this,"currentLength",void 0),B(this,"transform",void 0),B(this,"buffers",void 0),this.gl=e,this.transition=new fy(r),this.attribute=n,this.attributeInTransition=new UO(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=vOe(e,n);const i={byteLength:0,usage:35050};this.buffers=[new xn(e,i),new xn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;G9(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)H9({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=zO(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:j9(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const yOe=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function vOe(t,e){const n=V9(e.size);return new CO(t,{vs:yOe,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class bOe{constructor({gl:e,attribute:n,timeline:r}){B(this,"gl",void 0),B(this,"type","spring"),B(this,"attributeInTransition",void 0),B(this,"settings",void 0),B(this,"attribute",void 0),B(this,"transition",void 0),B(this,"currentStartIndices",void 0),B(this,"currentLength",void 0),B(this,"texture",void 0),B(this,"framebuffer",void 0),B(this,"transform",void 0),B(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new fy(r),this.attribute=n,this.attributeInTransition=new UO(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=xOe(e),this.framebuffer=wOe(e,this.texture),this.transform=_Oe(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new xn(e,i),new xn(e,i),new xn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)H9({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=zO(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:j9(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),G9(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Yw(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function _Oe(t,e,n){const r=V9(e.size);return new CO(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function xOe(t){return new ua(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function wOe(t,e){return new kr(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const EOe={interpolation:mOe,spring:bOe};class SOe{constructor(e,{id:n,timeline:r}){B(this,"id",void 0),B(this,"isSupported",void 0),B(this,"gl",void 0),B(this,"timeline",void 0),B(this,"transitions",void 0),B(this,"needsRedraw",void 0),B(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=CO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){wn.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=EOe[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(wn.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const Xz="attributeManager.invalidate",TOe="attributeManager.updateStart",POe="attributeManager.updateEnd",COe="attribute.updateStart",AOe="attribute.allocate",ROe="attribute.updateEnd";class IOe{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){B(this,"id",void 0),B(this,"gl",void 0),B(this,"attributes",void 0),B(this,"updateTriggers",void 0),B(this,"needsRedraw",void 0),B(this,"userData",void 0),B(this,"stats",void 0),B(this,"attributeTransitionManager",void 0),B(this,"mergeBoundsMemoized",dy(LIe)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new SOe(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Ei(Xz,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Ei(Xz,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;Ei(TOe,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],h=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&wn.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof h=="string"?o[h]:void 0,e.startIndices)||typeof h=="string"&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Ei(POe,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new UO(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Ei(COe,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Ei(AOe,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Ei(ROe,n,r))}}class MOe extends fy{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=$_(n,r,o)}}const Yz=1e-5;function qz(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function OOe(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=qz(t[o],e[o],n[o],r,i);return s}return qz(t,e,n,r,i)}function Kz(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class LOe extends fy{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=OOe(s,o,n,r,i);const l=Kz(a,n),c=Kz(a,o);l<Yz&&c<Yz&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const kOe={interpolation:MOe,spring:LOe};class DOe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=$9(i),!i)return;const o=kOe[i.type];if(!o){wn.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function NOe(t){const e=t[Kc];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function BOe(t,e){const n=W9({newProps:t,oldProps:e,propTypes:t[Kc],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=zOe(t,e);let i=!1;return r||(i=UOe(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:$Oe(t,e),transitionsChanged:FOe(t,e)}}function FOe(t,e){if(!t.transitions)return!1;const n={},r=t[Kc];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&BR(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function W9({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=BR(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=BR(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function BR(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function zOe(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function UOe(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Zz(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&Zz(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function $Oe(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Zz(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},W9({oldProps:i,newProps:r,triggerName:n})}const jOe="count(): argument not an object",VOe="count(): argument not a container";function GOe(t){if(!WOe(t))throw new Error(jOe);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(HOe(t))return Object.keys(t).length;throw new Error(VOe)}function HOe(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function WOe(t){return t!==null&&typeof t=="object"}function FR(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const XOe={10241:9987,10240:9729,10242:33071,10243:33071},zR={};function YOe(t,e,n,r){if(n instanceof ua)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new ua(e,{...n,parameters:{...XOe,...i,...r}});return zR[s.id]=t,s}function qOe(t,e){!e||!(e instanceof ua)||zR[e.id]===t&&(e.delete(),delete zR[e.id])}const KOe={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||UR(t)&&(t.length===3||t.length===4)},equal(t,e,n){return ta(t,e,1)}},accessor:{validate(t,e){const n=q_(t);return n==="function"||n===q_(e.value)},equal(t,e,n){return typeof e=="function"?!0:ta(t,e,1)}},array:{validate(t,e){return e.optional&&!t||UR(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?ta(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?ta(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:YOe(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{qOe(n.id,t)}}};function ZOe(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=QOe(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function QOe(t,e){switch(q_(e)){case"object":return Eg(t,e);case"array":return Eg(t,{type:"array",value:e,compare:!1});case"boolean":return Eg(t,{type:"boolean",value:e});case"number":return Eg(t,{type:"number",value:e});case"function":return Eg(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Eg(t,e){return"type"in e?{name:t,...KOe[e.type],...e}:"value"in e?{name:t,type:q_(e.value),...e}:{name:t,type:"object",value:e}}function UR(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function q_(t){return UR(t)?"array":t===null?"null":typeof t}function JOe(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=$R(t.constructor,n),i=Object.create(r);i[X_]=t,i[Ah]={},i[Lc]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const eLe="_mergedDefaultProps";function $R(t,e){let n=eLe;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=X9(t,n);return r||(t[n]=tLe(t,e||[]))}function tLe(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=$R(r),s=X9(t,"defaultProps")||{},o=ZOe(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[Kc],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[bP],o.deprecatedProps);for(const u of e){const h=$R(u.constructor);h&&(Object.assign(a,h),Object.assign(l,h[Kc]),Object.assign(c,h[bP]))}return nLe(a,t),iLe(a,l),rLe(a,c),a[Kc]=l,a[bP]=c,e.length===0&&!$O(t,"_propTypes")&&(t._propTypes=l),a}function nLe(t,e){const n=oLe(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function rLe(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])$O(this,s)||(this[s]=r);wn.deprecated(i,e[n].join("/"))()}})}function iLe(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=sLe(o))}t[_f]=n,t[Ah]={},Object.defineProperties(t,r)}function sLe(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||z9(e)?this[Ah][t]=e:this[Lc][t]=e},get(){if(this[Lc]){if(t in this[Lc])return this[Lc][t]||this[_f][t];if(t in this[Ah]){const e=this[X_]&&this[X_].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[_f][t]}}return this[_f][t]}}}function $O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function X9(t,e){return $O(t,e)&&t[e]}function oLe(t){const e=t.componentName;return e||wn.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let aLe=0;class jO{constructor(...e){B(this,"id",void 0),B(this,"props",void 0),B(this,"count",void 0),this.props=JOe(this,e),this.id=this.props.id,this.count=aLe++}clone(e){const{props:n}=this,r={};for(const i in n[_f])i in n[Lc]?r[i]=n[Lc][i]:i in n[Ah]&&(r[i]=n[Ah][i]);return new this.constructor({...n,...r,...e})}}B(jO,"componentName","Component");B(jO,"defaultProps",{});const lLe=Object.freeze({});class cLe{constructor(e){B(this,"component",void 0),B(this,"onAsyncPropUpdated",void 0),B(this,"asyncProps",void 0),B(this,"oldProps",void 0),B(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||lLe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[X_]||this.component;const n=e[Lc]||{},r=e[Ah]||e,i=e[_f]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(z9(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Kc];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class uLe extends cLe{constructor({attributeManager:e,layer:n}){super(n),B(this,"attributeManager",void 0),B(this,"needsRedraw",void 0),B(this,"needsUpdate",void 0),B(this,"subLayers",void 0),B(this,"usesPickingColorCache",void 0),B(this,"hasPickingBuffer",void 0),B(this,"changeFlags",void 0),B(this,"viewport",void 0),B(this,"uniformTransitions",void 0),B(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const hLe="layer.changeFlag",dLe="layer.initialize",fLe="layer.update",pLe="layer.finalize",gLe="layer.matched",Qz=2**24-1,mLe=Object.freeze([]),yLe=dy(({oldViewport:t,viewport:e})=>t.equals(e));let Ia=new Uint8ClampedArray(0);const vLe={data:{type:"data",value:mLe,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:gR(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):gR(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:rn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Uh extends jO{constructor(...e){super(...e),B(this,"internalState",null),B(this,"lifecycle",Bd.NO_STATE),B(this,"context",void 0),B(this,"state",void 0),B(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Wr(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=A9(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=P9(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return Wr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Wr(this.internalState);const r=this.internalState.viewport||this.context.viewport;return zIe(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===rn.DEFAULT||e===rn.LNGLAT||e===rn.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Wr(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:GOe(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=FR(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!yLe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Ia.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Qz&&wn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ia=np.allocate(Ia,n,{size:3,copy:!0,maxCount:Math.max(n,Qz)});const i=Math.floor(Ia.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Ia[o*3+0]=s[0],Ia[o*3+1]=s[1],Ia[o*3+2]=s[2]}e.value=Ia.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Ia.buffer&&(r.value=Ia.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Wr(!this.internalState),Wr(Number.isFinite(this.props.coordinateSystem)),Ei(dLe,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new uLe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(wn.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new DOe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ei(gLe,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ei(fLe,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ei(pLe,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];$l(s.gl,{polygonOffset:l}),aa(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Ei(hLe,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=BOe(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){NOe(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new IOe(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}B(Uh,"defaultProps",vLe);B(Uh,"layerName","Layer");const bLe="compositeLayer.renderLayers";class Y9 extends Uh{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:x,fetch:b,operation:w,_subLayerProps:v}=this.props,E={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:x,fetch:b,operation:w},T=v&&e.id&&v[e.id],P=T&&T.updateTriggers,R=e.id||"sublayer";if(T){const M=this.props[Kc],k=e.type?e.type._propTypes:{};for(const O in T){const F=k[O]||M[O];F&&F.type==="accessor"&&(T[O]=this.getSubLayerAccessor(T[O]))}}Object.assign(E,e,T),E.id="".concat(this.props.id,"-").concat(R),E.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...P};for(const M of x){const k=M.getSubLayerProps.call(this,M);k&&Object.assign(E,k,{updateTriggers:Object.assign(E.updateTriggers,k.updateTriggers)})}return E}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=LO(s,Boolean),this.internalState.subLayers=r}Ei(bLe,this,i,r);for(const s of r)s.parent=this}}B(Y9,"layerName","CompositeLayer");class VO{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){B(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&ta(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}}B(VO,"defaultProps",{});B(VO,"extensionName","LayerExtension");class q9{constructor(e){B(this,"opts",void 0),B(this,"typedArrayManager",void 0),B(this,"indexStarts",[0]),B(this,"vertexStarts",[0]),B(this,"vertexCount",0),B(this,"instanceCount",0),B(this,"attributes",void 0),B(this,"_attributeDefs",void 0),B(this,"data",void 0),B(this,"getGeometry",void 0),B(this,"geometryBuffer",void 0),B(this,"buffers",void 0),B(this,"positionSize",void 0),B(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=np,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(Wr(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?U9(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=FO(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((h,f)=>{const g=h&&this.normalizeGeometry(h);c[f]=g,r[f+1]=r[f]+(g?this.getGeometrySize(g):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof xn){const h=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/h}else if(o.buffer){const h=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/h}else if(o.value){const h=o.value,f=o.stride/h.BYTES_PER_ELEMENT||this.positionSize;i=i||h.length/f}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((h,f)=>{const g=c[f]||h;u.vertexStart=r[f],u.indexStart=n[f];const m=f<r.length-1?r[f+1]:i;u.geometrySize=m-r[f],u.geometryIndex=f,this.updateGeometryAttributes(g,u)},a,l),this.vertexCount=n[n.length-1]}}const _Le=typeof window<"u"?C.useLayoutEffect:C.useEffect,xLe=_Le;function K_(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const wLe={position:"absolute",zIndex:-1};function K9(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>K9(n,e));if(Zw(t)){if(ELe(t))return e.style=wLe,C.cloneElement(t,e);if(SLe(t))return C.cloneElement(t,e)}return t}function Zw(t){return t&&typeof t=="object"&&"type"in t||!1}function ELe(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function SLe(t){const e=t.type;return e&&e.deckGLViewProps}function jR(t){if(typeof t=="function")return C.createElement(ip,{},t);if(Array.isArray(t))return t.map(jR);if(Zw(t)){if(t.type===C.Fragment)return jR(t.props.children);if(K_(t.type,ip))return t}return t}function TLe({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return C.Children.forEach(jR(t),o=>{if(Zw(o)){const a=o.type;if(K_(a,Uh)){const l=PLe(a,o.props);i.push(l)}else r.push(o);if(K_(a,ip)&&a!==ip&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function PLe(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function CLe({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;Zw(o)&&K_(o.type,ip)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:h,y:f,width:g,height:m}=c;l=K9(l,{x:h,y:f,width:g,height:m,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:h,height:f}=a,g={position:"absolute",left:c,top:u,width:h,height:f},m="view-".concat(o),y=C.createElement("div",{key:m,id:m,style:g},...l);if(n){const x={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:b=>{b.viewId=o,e._onViewStateChange(b)}};return C.createElement(n,{key:m,value:x},y)}return y})}const ALe={mixBlendMode:null};function RLe({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in ALe?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function ILe(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function Z9(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function MLe(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():Z9(t)}});return r}const Q9=C.forwardRef((t,e)=>{const[n,r]=C.useState(0),s=C.useRef({control:null,version:n,forceUpdate:()=>r(T=>T+1)}).current,o=C.useRef(null),a=C.useRef(null),l=C.useMemo(()=>TLe(t),[t.layers,t.views,t.children]);let c=!0;const u=T=>{var P;return c&&t.viewState?(s.viewStateUpdateRequested=T,null):(s.viewStateUpdateRequested=null,(P=t.onViewStateChange)===null||P===void 0?void 0:P.call(t,T))},h=T=>{if(c)s.interactionStateUpdateRequested=T;else{var P;s.interactionStateUpdateRequested=null,(P=t.onInteractionStateChange)===null||P===void 0||P.call(t,T)}},f=C.useMemo(()=>{const T={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:h};return delete T._customRender,s.deck&&s.deck.setProps(T),T},[t]);C.useEffect(()=>{const T=t.Deck||Kw;return s.deck=MLe(s,T,{...f,parent:o.current,canvas:a.current}),()=>{var P;return(P=s.deck)===null||P===void 0?void 0:P.finalize()}},[]),xLe(()=>{Z9(s);const{viewStateUpdateRequested:T,interactionStateUpdateRequested:P}=s;T&&u(T),P&&h(P)}),C.useImperativeHandle(e,()=>ILe(s),[]);const g=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:m,width:y,height:x,id:b,style:w}=t,{containerStyle:v,canvasStyle:E}=C.useMemo(()=>RLe({width:y,height:x,style:w}),[y,x,w]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===g||s.version!==n){s.lastRenderedViewports=g,s.version=n;const T=CLe({children:l.children,deck:s.deck,ContextProvider:m}),P=C.createElement("canvas",{key:"canvas",id:b||"deckgl-overlay",ref:a,style:E});s.control=C.createElement("div",{id:"".concat(b||"deckgl","-wrapper"),ref:o,style:v},[P,T])}return c=!1,s.control});Q9.defaultProps=Kw.defaultProps;const OLe=Q9,LLe="modulepreload",kLe=function(t){return"/ecogeo/"+t},Jz={},DLe=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=kLe(s),s in Jz)return;Jz[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":LLe,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},NLe=C.createContext(null);function BLe(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Sl(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Sl(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Sl(t[i],e[i]))return!1;return!0}return!1}function FLe(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function eU(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Sl(n,r)||e.setProjection(n)}function tU(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function nU(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const zLe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rU(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of zLe)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}const iU={version:8,sources:{},layers:[]},sU={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},EP={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},oU={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ULe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],$Le=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sp{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[oU[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[sU[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[EP[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=sp.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=iU}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||jLe()||null,container:e,style:rU(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),eU(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in sU)o.on(u,this._onPointerEvent);for(const u in EP)o.on(u,this._onCameraEvent);for(const u in oU)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),sp.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=FLe(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=nU(i,{...tU(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||nU(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of ULe)if(s in e&&!Sl(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=iU,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(rU(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Sl(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Sl(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Sl(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of $Le){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;Sl(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in EP&&(typeof n=="object"&&(n.viewState=tU(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{eU(this._renderTransform,n),e.transform=n}}}sp.savedMaps=[];function jLe(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const VLe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function GLe(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of HLe(e))!(r in n)&&!VLe.includes(r)&&(n[r]=e[r].bind(e));return n}function HLe(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const WLe=typeof document<"u"?C.useLayoutEffect:C.useEffect,XLe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function YLe(t,e){for(const r of XLe)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const Qw=C.createContext(null);function qLe(t,e,n){const r=C.useContext(NLe),[i,s]=C.useState(null),o=C.useRef(),{current:a}=C.useRef({mapLib:null,map:null});C.useEffect(()=>{const u=t.mapLib;let h=!0,f;return Promise.resolve(u||n).then(g=>{if(!h)return;if(!g)throw new Error("Invalid mapLib");const m="Map"in g?g:g.default;if(!m.Map)throw new Error("Invalid mapLib");if(YLe(m,t),!m.supported||m.supported(t))t.reuseMaps&&(f=sp.reuse(t,o.current)),f||(f=new sp(m.Map,t,o.current)),a.map=GLe(f),a.mapLib=m,s(f),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(g=>{const{onError:m}=t;m?m({type:"error",target:null,originalEvent:null,error:g}):console.error(g)}),()=>{h=!1,f&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?f.recycle():f.destroy())}},[]),WLe(()=>{i&&i.setProps(t)}),C.useImperativeHandle(e,()=>a.map,[i]);const l=C.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return C.createElement("div",{id:t.id,ref:o,style:l},i&&C.createElement(Qw.Provider,{value:a},C.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const KLe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function $h(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!KLe.test(r)?n[r]=`${i}px`:n[r]=i}}function ZLe(t,e){const{map:n,mapLib:r}=C.useContext(Qw),i=C.useRef({props:t});i.current.props=t;const s=C.useMemo(()=>{let y=!1;C.Children.forEach(t.children,w=>{w&&(y=!0)});const x={...t,element:y?document.createElement("div"):null},b=new r.Marker(x);return b.setLngLat([t.longitude,t.latitude]),b.getElement().addEventListener("click",w=>{var v,E;(E=(v=i.current.props).onClick)===null||E===void 0||E.call(v,{type:"click",target:b,originalEvent:w})}),b.on("dragstart",w=>{var v,E;const T=w;T.lngLat=s.getLngLat(),(E=(v=i.current.props).onDragStart)===null||E===void 0||E.call(v,T)}),b.on("drag",w=>{var v,E;const T=w;T.lngLat=s.getLngLat(),(E=(v=i.current.props).onDrag)===null||E===void 0||E.call(v,T)}),b.on("dragend",w=>{var v,E;const T=w;T.lngLat=s.getLngLat(),(E=(v=i.current.props).onDragEnd)===null||E===void 0||E.call(v,T)}),b},[]);C.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:h=null,rotation:f=0,rotationAlignment:g="auto",pitchAlignment:m="auto"}=t;return C.useEffect(()=>{$h(s.getElement(),c)},[c]),C.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!BLe(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==f&&s.setRotation(f),s.getRotationAlignment()!==g&&s.setRotationAlignment(g),s.getPitchAlignment()!==m&&s.setPitchAlignment(m),s.getPopup()!==h&&s.setPopup(h),Gl.createPortal(t.children,s.getElement())}C.memo(C.forwardRef(ZLe));function aU(t){return new Set(t?t.trim().split(/\s+/):[])}function QLe(t,e){const{map:n,mapLib:r}=C.useContext(Qw),i=C.useMemo(()=>document.createElement("div"),[]),s=C.useRef({props:t});s.current.props=t;const o=C.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,h;(h=(u=s.current.props).onOpen)===null||h===void 0||h.call(u,c)}),l},[]);if(C.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),C.useEffect(()=>{$h(o.getElement(),t.style)},[t.style]),C.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Sl(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=aU(o.options.className),l=aU(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return Gl.createPortal(t.children,i)}C.memo(C.forwardRef(QLe));function gy(t,e,n,r){const i=C.useContext(Qw),s=C.useMemo(()=>t(i),[]);return C.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function JLe(t){const e=gy(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return C.useEffect(()=>{$h(e._container,t.style)},[t.style]),null}C.memo(JLe);function eke(t){const e=gy(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return C.useEffect(()=>{$h(e._controlContainer,t.style)},[t.style]),null}C.memo(eke);function tke(t,e){const n=C.useRef({props:t}),r=gy(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,C.useImperativeHandle(e,()=>r,[]),C.useEffect(()=>{$h(r._container,t.style)},[t.style]),null}C.memo(C.forwardRef(tke));function nke(t){const e=gy(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return C.useEffect(()=>{$h(e._container,t.style)},[t.style]),null}C.memo(nke);function rke(t){const e=gy(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=C.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),C.useEffect(()=>{$h(e._container,i)},[i]),null}C.memo(rke);const ike=DLe(()=>import("./maplibre-gl-c123922a.js").then(t=>t.m),[]),ske=(()=>C.forwardRef(function(e,n){return qLe(e,n,ike)}))(),oke=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,ake=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,lU=[0,0,0,255],lke={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:lU},getLineColor:{type:"accessor",value:lU},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class GO extends Uh{getShaders(){return super.getShaders({vs:oke,fs:ake,modules:[kO,DO]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:f,lineWidthMaxPixels:g}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:m0[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:m0[u],lineWidthScale:h,lineWidthMinPixels:f,lineWidthMaxPixels:g}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new x0(e,{...this.getShaders(),id:this.props.id,geometry:new AO({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}B(GO,"defaultProps",lke);B(GO,"layerName","ScatterplotLayer");const J9={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function e7(t,e,n={}){return cke(t,n)!==e?(hke(t,n),!0):!1}function cke(t,e={}){return Math.sign(uke(t,e))}function uke(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function hke(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const h=t[l+u];t[l+u]=t[c+u],t[c+u]=h}}}function na(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function VR(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function w0(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function GR(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function mb(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function t7(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],h=w0(t,0,n,o);let f,g;const m=r7(h,i,s,[]),y=[];na(c,h);for(let x=1;x<l;x++){for(f=w0(t,x,n,o,f),g=mb(f,m);g;){GR(h,f,g,m,y);const b=mb(y,m);b&&(GR(h,y,b,m,y),g=b),na(c,y),VR(h,y),fke(m,i,g),r&&c.length>n&&(c=[],u.push(c),na(c,h)),g=mb(f,m)}na(c,f),VR(h,f)}return r?u:u[0]}const cU=0,dke=1;function R1(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function n7(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(dke):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:h,types:f,holes:g}=l.shift();pke(h,r,g[0]||h.length,c),u=r7(c[0],i,s,u);const m=mb(c[1],u);if(m){let y=uU(h,f,r,0,g[0]||h.length,u,m);const x={pos:y[0].pos,types:y[0].types,holes:[]},b={pos:y[1].pos,types:y[1].types,holes:[]};l.push(x,b);for(let w=0;w<g.length;w++)y=uU(h,f,r,g[w],g[w+1]||h.length,u,m),y[0]&&(x.holes.push(x.pos.length),x.pos=R1(x.pos,y[0].pos),o&&(x.types=R1(x.types,y[0].types))),y[1]&&(b.holes.push(b.pos.length),b.pos=R1(b.pos,y[1].pos),o&&(b.types=R1(b.types,y[1].types)))}else{const y={positions:h};o&&(y.edgeTypes=f),g.length&&(y.holeIndices=g),a.push(y)}}return a}function uU(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],h=[],f=[];let g,m,y;const x=w0(t,a-1,n,r);let b=Math.sign(o&8?x[1]-s[3]:x[0]-s[2]),w=e&&e[a-1],v=0,E=0;for(let T=0;T<a;T++)g=w0(t,T,n,r,g),m=Math.sign(o&8?g[1]-s[3]:g[0]-s[2]),y=e&&e[r/n+T],m&&b&&b!==m&&(GR(x,g,o,s,f),na(l,f)&&u.push(w),na(c,f)&&h.push(w)),m<=0?(na(l,g)&&u.push(y),v-=m):u.length&&(u[u.length-1]=cU),m>=0?(na(c,g)&&h.push(y),E+=m):h.length&&(h[h.length-1]=cU),VR(x,g),b=m,w=y;return[v?{pos:l,types:e&&u}:null,E?{pos:c,types:e&&h}:null]}function r7(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function fke(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function pke(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const gke=85.051129;function mke(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);i7(o,n,0,i-r);const a=t7(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)s7(l,n);return a}function yke(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let h=0;h<=e.length;h++){const f=e[h]||t.length,g=c,m=vke(t,r,l,f);for(let y=m;y<f;y++)o[c++]=t[y];for(let y=l;y<m;y++)o[c++]=t[y];i7(o,r,g,c),bke(o,r,g,c,n==null?void 0:n.maxLatitude),l=f,a[h]=c}a.pop();const u=n7(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const h of u)s7(h.positions,r);return u}function vke(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function bke(t,e,n,r,i=gke){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=w0(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,na(t,a),a[1]=Math.sign(a[1])*i,na(t,a),a[0]=s,na(t,a)}}function i7(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function s7(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function _ke(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?t7(i,{size:e,gridResolution:n}):r?mke(i,{size:e}):i}const xke=1,wke=2,SP=4;class Eke extends q9{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?_ke(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(hU(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&hU(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=SP,r[s+o-2]=SP):(r[s]+=xke,r[s+o-2]+=wke),r[s+o-1]=SP}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function hU(t){return Array.isArray(t[0])}const Ske=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Tke=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,o7=[0,0,0,255],Pke={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:o7},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},TP={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class HO extends Uh{constructor(...e){super(...e),B(this,"state",void 0)}getShaders(){return super.getShaders({vs:Ske,fs:Tke,modules:[kO,DO]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:TP,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:TP,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:TP,defaultValue:o7},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new Eke({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:m0[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new x0(e,{...this.getShaders(),id:this.props.id,geometry:new AO({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}B(HO,"defaultProps",Pke);B(HO,"layerName","PathLayer");const I1=J9.CLOCKWISE,dU=J9.COUNTER_CLOCKWISE,kc={isClosed:!0};function Cke(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Xg(t){return"positions"in t?t.positions:t}function yb(t){return"holeIndices"in t?t.holeIndices:null}function Ake(t){return Array.isArray(t[0])}function Rke(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Ike(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Mke(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function fU(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!Ike(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return kc.start=e,kc.end=s,kc.size=r,e7(t,i,kc),s}function pU(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!Mke(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return kc.start=e,kc.end=l,kc.size=r,e7(t,o,kc),l}function a7(t,e){Cke(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=pU(n,o,i,e,s[a-1],s[a],a===0?I1:dU),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!Ake(t))return pU(n,0,t,e,0,n.length,I1),n;if(!Rke(t)){let i=0;for(const[s,o]of t.entries())i=fU(n,i,o,e,s===0?I1:dU),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return fU(n,0,t,e,I1),n}function PP(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function gU(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function Oke(t,e,n,r){let i=yb(t);i&&(i=i.map(a=>a/e));let s=Xg(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=PP(s,0,1),l=PP(s,0,2),c=PP(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),gU(s,0,2,1)):(n||(s=s.slice()),gU(s,2,0,1)))}return dI(s,i,e)}class Lke extends q9{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=a7(e,this.positionSize);return this.opts.resolution?n7(Xg(n),yb(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?yke(Xg(n),yb(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(mU(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return Xg(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&mU(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=Oke(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let h=0;h<u.length;h++)l[c++]=u[h]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=Xg(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],h=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=h}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&yb(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function mU(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const l7=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,kke=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(l7,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Dke=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(l7,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Nke=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Z_=[0,0,0,255],Bke={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Z_},getLineColor:{type:"accessor",value:Z_},material:!0},M1={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class WO extends Uh{constructor(...e){super(...e),B(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?kke:Dke,fs:Nke,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[kO,a2e,DO]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===rn.DEFAULT&&(r=rn.LNGLAT);let s;r===rn.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new Lke({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||wO(e,kn.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:M1,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:M1,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:M1,accessor:"getFillColor",defaultValue:Z_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:M1,accessor:"getLineColor",defaultValue:Z_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new x0(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new x0(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new AO({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}B(WO,"defaultProps",Bke);B(WO,"layerName","SolidPolygonLayer");function Fke({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let f=0;f<o;f++){const g=e(t[f]);if(a>f&&g>=i&&(a=f),g>=s){l=f;break}}let c=a;const h=l-a!==r.length?t.slice(l):void 0;for(let f=0;f<r.length;f++)t[c++]=r[f];if(h){for(let f=0;f<h.length;f++)t[c++]=h[f];t.length=c}return{startRow:a,endRow:a+r.length}}const c7=[0,0,0,255],zke=[0,0,0,255],Uke={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:zke},getLineColor:{type:"accessor",value:c7},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class wm extends Y9{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&wn.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>Fke({data:r,getIndex:o=>o.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:u,objectInfo:h}=FO(n,l,c);for(const f of u){h.index++;let g=r(f,h);s&&(g=a7(g,a));const{holeIndices:m}=g,y=g.positions||g;if(m)for(let x=0;x<=m.length;x++){const b=y.slice(m[x-1]||0,m[x]||y.length);o.push(this.getSubLayerRow({path:b},f,h.index))}else o.push(this.getSubLayerRow({path:y},f,h.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:c,transitions:u,positionFormat:h}=this.props,{lineWidthUnits:f,lineWidthScale:g,lineWidthMinPixels:m,lineWidthMaxPixels:y,lineJointRounded:x,lineMiterLimit:b,lineDashJustified:w}=this.props,{getFillColor:v,getLineColor:E,getLineWidth:T,getLineDashArray:P,getElevation:R,getPolygon:M,updateTriggers:k,material:O}=this.props,{paths:F,pathsDiff:I}=this.state,D=this.getSubLayerClass("fill",WO),N=this.getSubLayerClass("stroke",HO),j=this.shouldRenderSubLayer("fill",F)&&new D({_dataDiff:n,extruded:s,elevationScale:c,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:R,getFillColor:v,getLineColor:s&&o?E:c7,material:O,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:k&&{getPolygon:k.getPolygon,getElevation:k.getElevation,getFillColor:k.getFillColor,lineColors:s&&o,getLineColor:k.getLineColor}}),{data:e,positionFormat:h,getPolygon:M}),W=!s&&r&&this.shouldRenderSubLayer("stroke",F)&&new N({_dataDiff:I&&(()=>I),widthUnits:f,widthScale:g,widthMinPixels:m,widthMaxPixels:y,jointRounded:x,miterLimit:b,dashJustified:w,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(T),getDashArray:this.getSubLayerAccessor(P)},this.getSubLayerProps({id:"stroke",updateTriggers:k&&{getWidth:k.getLineWidth,getColor:k.getLineColor,getDashArray:k.getLineDashArray}}),{data:F,positionFormat:h,getPath:H=>H.path});return[!s&&j,W,s&&j]}}B(wm,"layerName","PolygonLayer");B(wm,"defaultProps",Uke);const ph=10,op=256;function E0(t,e){let n=Math.sin(t.lat*Math.PI/180);n=Math.min(Math.max(n,-.9999),.9999);const r=op*(.5+t.lng/360)*Math.pow(2,e),i=op*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))*Math.pow(2,e);return{x:r,y:i}}function yU(t,e){const n=Math.pow(2,e),r=(t.x/n/op-.5)*360,i=(t.y/n/op-.5)*(-2*Math.PI);return{lat:Math.atan(Math.sinh(i))*180/Math.PI,lng:r}}function Q_(t,e){return{x:Math.floor(t.x/op),y:Math.floor(t.y/op),z:e}}function HR({x:t,y:e,z:n}){let r=0;for(let i=0;i<n;i++){const s=1<<i;t&s&&(r|=1<<2*i),e&s&&(r|=1<<2*i+1)}return r}function $ke(t,e){let n=ph;for(;n>0;){const r=Q_(E0(t,n),n),i=Q_(E0(e,n),n),s=HR(r),o=HR(i);if(s!==o)break;n--}return n}function jke(t,e,n){if(n===void 0&&(n=$ke(t,e)),n<0||n>ph)throw new Error(`Invalid zoom level: ${n}`);if(t.lng>e.lng){const r=CP(t,{lat:e.lat,lng:180},n),i=CP({lat:t.lat,lng:-180},e,n);return[r,i]}else return t.lng===-180&&e.lng===180?[[0]]:[CP(t,e,n)]}function CP(t,e,n){const r=E0(t,n),i=E0(e,n),s=Q_(r,n),o=Q_(i,n),a=[];for(let l=s.x;l<=o.x;l++)for(let c=s.y;c<=o.y;c++)a.push(HR({x:l,y:c,z:n}));return a}function Vke(t,e,n){if(n<0||n>ph)throw new Error(`Invalid max zoom level: ${n}`);const r=new Array(ph);for(let i=0;i<=n;i++)r[i]=jke(t,e,i);for(let i=n+1;i<=ph;i++)r[i]=r[i-1];return r}const Gke=t=>{const e=[];return t.forEach((n,r)=>{r===0?e.push(n):e.push(n.length===1?[t[r][0].concat(e[r-1][0])]:n.length===2?[e[r-1][0].concat(t[r][0]),e[r-1].length===2?e[r-1][1].concat(t[r][1]):t[r][1]]:[])}),e};function Hke(t,e,n,r){const i=E0(n,r),s={x:i.x-t/2,y:i.y-e/2},o={x:i.x+t/2,y:i.y+e/2};return{topLeft:yU(s,r),bottomRight:yU(o,r)}}function WR(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!WR(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!WR(t[s],e[s],n-1))return!1;return!0}return!1}class Wke{constructor(e,n,r){this.pool=[],this.taskQueue=[],this.onResult=r;for(let i=0;i<n;i++)this.addWorkerToPool(e)}addWorkerToPool(e){const n=new e;n.onerror=r=>{console.log(r)},n.onmessage=r=>{const i=this.pool.findIndex(s=>s.worker===n);if(i!==-1){this.pool[i].currentTaskId=null;const s=JSON.parse(r.data);this.onResult(s),this.executeNextTask()}},this.pool.push({worker:n,workerConstructor:e,currentTaskId:null})}executeTask(e){this.taskQueue.push(e),this.executeNextTask()}executeNextTask(){const e=this.pool.find(n=>n.currentTaskId===null);if(e&&this.taskQueue.length>0){const n=this.taskQueue.shift();e.currentTaskId=n.id,e.worker.postMessage({...n,payload:JSON.stringify(n.payload)})}}terminateTask(e){const n=this.pool.findIndex(r=>r.currentTaskId===e);if(n!==-1){const r=this.pool[n];r.worker.terminate(),this.pool.splice(n,1),this.addWorkerToPool(r.workerConstructor)}}terminateAllTasks(){this.pool.forEach(e=>e.worker.terminate()),this.pool=[]}}function Xke(){return new Worker("/ecogeo/assets/DexieQueryWorker-aa500ad9.js")}const Yke={inject:{"vs:#decl":`
attribute vec2 instanceDashArrays;
attribute float instanceDashOffsets;
varying vec2 vDashArray;
varying float vDashOffset;
`,"vs:#main-end":`
vDashArray = instanceDashArrays;
vDashOffset = instanceDashOffsets / width.x;
`,"fs:#decl":`
uniform float dashAlignMode;
uniform float capType;
uniform bool dashGapPickable;
varying vec2 vDashArray;
varying float vDashOffset;

float round(float x) {
  return floor(x + 0.5);
}
`,"fs:#main-start":`
  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float offset;

  if (unitLength > 0.0) {
    if (dashAlignMode == 0.0) {
      offset = vDashOffset;
    } else {
      unitLength = vPathLength / round(vPathLength / unitLength);
      offset = solidLength / 2.0;
    }

    float unitOffset = mod(vPathPosition.y + offset, unitLength);

    if (gapLength > 0.0 && unitOffset > solidLength) {
      if (capType <= 0.5) {
        if (!(dashGapPickable && picking_uActive)) {
          discard;
        }
      } else {
        float distToEnd = length(vec2(
          min(unitOffset - solidLength, unitLength - unitOffset),
          vPathPosition.x
        ));
        if (distToEnd > 1.0) {
          if (!(dashGapPickable && picking_uActive)) {
            discard;
          }
        }
      }
    }
  }
`}},qke={inject:{"vs:#decl":`
attribute float instanceOffsets;
`,"vs:DECKGL_FILTER_SIZE":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  size *= offsetWidth;
`,"vs:#main-end":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  float offsetDir = sign(instanceOffsets);
  vPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;
  vPathPosition.y *= offsetWidth;
  vPathLength *= offsetWidth;
`,"fs:#main-start":`
  float isInside;
  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);
  if (isInside == 0.0) {
    discard;
  }
`}},Kke={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class XO extends VO{constructor({dash:e=!1,offset:n=!1,highPrecisionDash:r=!1}={}){super({dash:e||r,offset:n,highPrecisionDash:r})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let n={};return e.opts.dash&&(n=FR(n,Yke)),e.opts.offset&&(n=FR(n,qke)),n}initializeState(e,n){const r=this.getAttributeManager();!r||!n.isEnabled(this)||(n.opts.dash&&r.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),n.opts.highPrecisionDash&&r.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:n.getDashOffsets.bind(this)}}),n.opts.offset&&r.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,n){if(!n.isEnabled(this))return;const r={};n.opts.dash&&(r.dashAlignMode=this.props.dashJustified?1:0,r.dashGapPickable=!!this.props.dashGapPickable),this.state.model.setUniforms(r)}getDashOffsets(e){const n=[0],r=this.props.positionFormat==="XY"?2:3,i=Array.isArray(e[0]),s=i?e.length:e.length/r;let o,a;for(let l=0;l<s-1;l++)o=i?e[l]:e.slice(l*r,l*r+r),o=this.projectPosition(o),l>0&&(n[l]=n[l-1]+PRe(a,o)),a=o;return n}}B(XO,"defaultProps",Kke);B(XO,"extensionName","PathStyleExtension");const Zke="lMsL1JaJvv3fuJWczgIa";function Qke(t,e=[0]){let n=[];return e.forEach(r=>{r===0?n=t:t.forEach(i=>n.push([i[0]+r,i[1]]))}),n}function Jke(t,e=[0]){const n=[];return t.forEach(r=>{r.forEach(i=>{const s=`${i.country}/${i.name_1||""}/${i.name_2||""}`;i.coordinates.forEach(o=>{n.push({polygon:Qke(o,e),name:s})})})}),n}const e3e=t=>{const e=O0(),[n,r]=C.useState({longitude:e.x,latitude:e.y,zoom:e.zoom}),[i,s]=C.useState(-1),[o,a]=C.useState([]),[l,c]=C.useState(null),[u,h]=C.useState([[],[],[]]),[f,g]=C.useState([]),[m,y]=C.useState(null);J2(),C.useEffect(()=>{const v=new Wke(Xke,10,E=>{try{const T=E.payload.polygons.map(R=>Jke(R));h(T);const P=E.payload.points.flat(1).map(R=>({name:R.name,coordinates:[R.lng,R.lat]}));g(P)}catch(T){console.log(T,E)}});return y(v),()=>{v&&v.terminateAllTasks()}},[]),C.useEffect(()=>{if(m===null||t.width===0||t.height===0)return;const{topLeft:v,bottomRight:E}=Hke(t.width,t.height,{lng:n.longitude,lat:n.latitude},n.zoom),T=Math.ceil(n.zoom),P=Vke(v,E,T);if(WR(o,P[ph-1],2))return;a(P[ph-1]),i!==-1&&m.terminateTask(i);const R=i+1;s(R),m.executeTask({dbName:t.uuid,type:"dexie",id:R,payload:{mortonNumbers:Gke(P),zoom:Math.floor(n.zoom)}})},[m,n.longitude,n.latitude,n.zoom,t.width,t.height]);const x=[new wm({id:"region1-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:v=>v.polygon,getFillColor:v=>[10,80,10,5],getLineColor:v=>[40,100,40],getLineWidth:1,getDashArray:[3,2],dashJustified:!0,dashGapPickable:!0,extensions:[new XO({dash:!0})],onHover:v=>c(v)}),new wm({id:"region2-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:v=>v.polygon,getFillColor:v=>[80,10,10,5],getLineColor:v=>[80,80,100],getLineWidth:1,onHover:v=>c(v)}),new wm({id:"country-layer",pickable:!0,data:u[0],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,lineWidthScale:10,getPolygon:v=>v.polygon,getFillColor:v=>[10,10,80,5],getLineColor:v=>[200,200,40],getLineWidth:1,onHover:v=>c(v)}),new GO({id:"scatter-plot-layer",data:f,getPosition:v=>v.coordinates,getRadius:2e3,getFillColor:[255,0,0],pickable:!0,onHover:v=>c(v)})],b=()=>{if(!l)return;const{object:v,x:E,y:T}=l;if(!v)return null;const P=v.polygon?`Region: ${v.name}`:v.name?`Location: ${v.name}`:`Route: ${v.source} - ${v.target}`;return K("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:E,top:T,color:"white",backgroundColor:"black",padding:"5px"},children:P})},w=C.useCallback(v=>{const E=v.viewState;r(E)},[]);return!m||i===-1?K(UI,{variant:"indeterminate"}):Bt(OLe,{views:[new NO({repeat:!0})],width:t.width,height:t.height,controller:!0,layers:x,viewState:n,onViewStateChange:w,children:[K(ske,{mapStyle:`https://api.maptiler.com/maps/${t.map}/style.json?key=${Zke}`}),b(),t.children]})},t3e=()=>Bt("div",{style:{fontSize:"12px",position:"absolute",bottom:0,right:"7px",background:"rgba(255,255,255,0.1)"},children:[K("a",{href:"https://www.maptiler.com/copyright/",target:"_blank",children:" MapTiler"})," ",K("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",children:" OpenStreetMap contributors"})]}),n3e=()=>{const{uuid:t,zoom:e,y:n,x:r,type:i}=O0(),{width:s,height:o}=dM();return K(vM,{uuid:t,type:i,viewportCenter:[e,n,r],backgroundColor:"rgba(230,230,230,0.6)",backgroundPanel:a=>K(e3e,{uuid:t,map:"openstreetmap",width:s,height:o,children:K(t3e,{})})})},r3e=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=O0();return console.log(i),K(vM,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(255,230,230,0.6)",backgroundPanel:s=>K(hW,{...s})})},i3e=()=>{const{type:t}=O0();switch(t){case li.Racetrack:return K(r3e,{});case li.Graph:return K($we,{});case li.RealWorld:return K(n3e,{});default:throw new Error(t)}};console.log("built: 2024-02-06 15:49");const s3e=lZ([{path:"/",element:K("h1",{children:"home"})},{path:"/:projectType/:uuid/:zoom/:y/:x/",element:K(i3e,{}),loader:UJ}]),o3e=document.getElementById("root"),a3e=p$(o3e);a3e.render(K(C.StrictMode,{children:K(yZ,{router:s3e})}));export{es as c,Rh as g};
