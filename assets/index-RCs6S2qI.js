function K2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _U={exports:{}},tx={},xU={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=Symbol.for("react.element"),$7=Symbol.for("react.portal"),j7=Symbol.for("react.fragment"),G7=Symbol.for("react.strict_mode"),H7=Symbol.for("react.profiler"),V7=Symbol.for("react.provider"),W7=Symbol.for("react.context"),X7=Symbol.for("react.forward_ref"),Y7=Symbol.for("react.suspense"),q7=Symbol.for("react.memo"),K7=Symbol.for("react.lazy"),Ik=Symbol.iterator;function Z7(t){return t===null||typeof t!="object"?null:(t=Ik&&t[Ik]||t["@@iterator"],typeof t=="function"?t:null)}var wU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EU=Object.assign,TU={};function lp(t,e,n){this.props=t,this.context=e,this.refs=TU,this.updater=n||wU}lp.prototype.isReactComponent={};lp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SU(){}SU.prototype=lp.prototype;function Z2(t,e,n){this.props=t,this.context=e,this.refs=TU,this.updater=n||wU}var Q2=Z2.prototype=new SU;Q2.constructor=Z2;EU(Q2,lp.prototype);Q2.isPureReactComponent=!0;var Mk=Array.isArray,CU=Object.prototype.hasOwnProperty,J2={current:null},PU={key:!0,ref:!0,__self:!0,__source:!0};function AU(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CU.call(e,r)&&!PU.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:S0,type:t,key:s,ref:o,props:i,_owner:J2.current}}function Q7(t,e){return{$$typeof:S0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eR(t){return typeof t=="object"&&t!==null&&t.$$typeof===S0}function J7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ok=/\/+/g;function sT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J7(""+t.key):e.toString(36)}function L1(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case S0:case $7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+sT(o,0):r,Mk(i)?(n="",t!=null&&(n=t.replace(Ok,"$&/")+"/"),L1(i,e,n,"",function(c){return c})):i!=null&&(eR(i)&&(i=Q7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ok,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Mk(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+sT(s,a);o+=L1(s,e,n,l,i)}else if(l=Z7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+sT(s,a++),o+=L1(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function iv(t,e,n){if(t==null)return t;var r=[],i=0;return L1(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gi={current:null},k1={transition:null},tX={ReactCurrentDispatcher:Gi,ReactCurrentBatchConfig:k1,ReactCurrentOwner:J2};Kt.Children={map:iv,forEach:function(t,e,n){iv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return iv(t,function(){e++}),e},toArray:function(t){return iv(t,function(e){return e})||[]},only:function(t){if(!eR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kt.Component=lp;Kt.Fragment=j7;Kt.Profiler=H7;Kt.PureComponent=Z2;Kt.StrictMode=G7;Kt.Suspense=Y7;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tX;Kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EU({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=J2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)CU.call(e,l)&&!PU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:S0,type:t.type,key:i,ref:s,props:r,_owner:o}};Kt.createContext=function(t){return t={$$typeof:W7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V7,_context:t},t.Consumer=t};Kt.createElement=AU;Kt.createFactory=function(t){var e=AU.bind(null,t);return e.type=t,e};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(t){return{$$typeof:X7,render:t}};Kt.isValidElement=eR;Kt.lazy=function(t){return{$$typeof:K7,_payload:{_status:-1,_result:t},_init:eX}};Kt.memo=function(t,e){return{$$typeof:q7,type:t,compare:e===void 0?null:e}};Kt.startTransition=function(t){var e=k1.transition;k1.transition={};try{t()}finally{k1.transition=e}};Kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Kt.useCallback=function(t,e){return Gi.current.useCallback(t,e)};Kt.useContext=function(t){return Gi.current.useContext(t)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(t){return Gi.current.useDeferredValue(t)};Kt.useEffect=function(t,e){return Gi.current.useEffect(t,e)};Kt.useId=function(){return Gi.current.useId()};Kt.useImperativeHandle=function(t,e,n){return Gi.current.useImperativeHandle(t,e,n)};Kt.useInsertionEffect=function(t,e){return Gi.current.useInsertionEffect(t,e)};Kt.useLayoutEffect=function(t,e){return Gi.current.useLayoutEffect(t,e)};Kt.useMemo=function(t,e){return Gi.current.useMemo(t,e)};Kt.useReducer=function(t,e,n){return Gi.current.useReducer(t,e,n)};Kt.useRef=function(t){return Gi.current.useRef(t)};Kt.useState=function(t){return Gi.current.useState(t)};Kt.useSyncExternalStore=function(t,e,n){return Gi.current.useSyncExternalStore(t,e,n)};Kt.useTransition=function(){return Gi.current.useTransition()};Kt.version="18.2.0";xU.exports=Kt;var P=xU.exports;const An=Ih(P),bb=K2({__proto__:null,default:An},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nX=P,rX=Symbol.for("react.element"),iX=Symbol.for("react.fragment"),sX=Object.prototype.hasOwnProperty,oX=nX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aX={key:!0,ref:!0,__self:!0,__source:!0};function RU(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sX.call(e,r)&&!aX.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rX,type:t,key:s,ref:o,props:i,_owner:oX.current}}tx.Fragment=iX;tx.jsx=RU;tx.jsxs=RU;_U.exports=tx;var Q=_U.exports;function lX(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function cX(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var uX=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(cX(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=lX(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),_i="-ms-",_b="-moz-",un="-webkit-",IU="comm",tR="rule",nR="decl",hX="@import",MU="@keyframes",dX="@layer",fX=Math.abs,nx=String.fromCharCode,pX=Object.assign;function gX(t,e){return li(t,0)^45?(((e<<2^li(t,0))<<2^li(t,1))<<2^li(t,2))<<2^li(t,3):0}function OU(t){return t.trim()}function mX(t,e){return(t=e.exec(t))?t[0]:t}function hn(t,e,n){return t.replace(e,n)}function OC(t,e){return t.indexOf(e)}function li(t,e){return t.charCodeAt(e)|0}function Tm(t,e,n){return t.slice(e,n)}function Ba(t){return t.length}function rR(t){return t.length}function sv(t,e){return e.push(t),t}function yX(t,e){return t.map(e).join("")}var rx=1,wf=1,LU=0,ls=0,Er=0,cp="";function ix(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:rx,column:wf,length:o,return:""}}function Up(t,e){return pX(ix("",null,null,"",null,null,0),t,{length:-t.length},e)}function vX(){return Er}function bX(){return Er=ls>0?li(cp,--ls):0,wf--,Er===10&&(wf=1,rx--),Er}function Os(){return Er=ls<LU?li(cp,ls++):0,wf++,Er===10&&(wf=1,rx++),Er}function Wa(){return li(cp,ls)}function D1(){return ls}function C0(t,e){return Tm(cp,t,e)}function Sm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kU(t){return rx=wf=1,LU=Ba(cp=t),ls=0,[]}function DU(t){return cp="",t}function N1(t){return OU(C0(ls-1,LC(t===91?t+2:t===40?t+1:t)))}function _X(t){for(;(Er=Wa())&&Er<33;)Os();return Sm(t)>2||Sm(Er)>3?"":" "}function xX(t,e){for(;--e&&Os()&&!(Er<48||Er>102||Er>57&&Er<65||Er>70&&Er<97););return C0(t,D1()+(e<6&&Wa()==32&&Os()==32))}function LC(t){for(;Os();)switch(Er){case t:return ls;case 34:case 39:t!==34&&t!==39&&LC(Er);break;case 40:t===41&&LC(t);break;case 92:Os();break}return ls}function wX(t,e){for(;Os()&&t+Er!==57;)if(t+Er===84&&Wa()===47)break;return"/*"+C0(e,ls-1)+"*"+nx(t===47?t:Os())}function EX(t){for(;!Sm(Wa());)Os();return C0(t,ls)}function TX(t){return DU(F1("",null,null,null,[""],t=kU(t),0,[0],t))}function F1(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,f=0,g=0,m=0,y=1,x=1,b=1,w=0,v="",E=i,S=s,C=r,R=v;x;)switch(m=w,w=Os()){case 40:if(m!=108&&li(R,h-1)==58){OC(R+=hn(N1(w),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:R+=N1(w);break;case 9:case 10:case 13:case 32:R+=_X(m);break;case 92:R+=xX(D1()-1,7);continue;case 47:switch(Wa()){case 42:case 47:sv(SX(wX(Os(),D1()),e,n),l);break;default:R+="/"}break;case 123*y:a[c++]=Ba(R)*b;case 125*y:case 59:case 0:switch(w){case 0:case 125:x=0;case 59+u:b==-1&&(R=hn(R,/\f/g,"")),g>0&&Ba(R)-h&&sv(g>32?kk(R+";",r,n,h-1):kk(hn(R," ","")+";",r,n,h-2),l);break;case 59:R+=";";default:if(sv(C=Lk(R,e,n,c,u,i,a,v,E=[],S=[],h),s),w===123)if(u===0)F1(R,e,C,C,E,s,h,a,S);else switch(f===99&&li(R,3)===110?100:f){case 100:case 108:case 109:case 115:F1(t,C,C,r&&sv(Lk(t,C,C,0,0,i,a,v,i,E=[],h),S),i,S,h,a,r?E:S);break;default:F1(R,C,C,C,[""],S,0,a,S)}}c=u=g=0,y=b=1,v=R="",h=o;break;case 58:h=1+Ba(R),g=m;default:if(y<1){if(w==123)--y;else if(w==125&&y++==0&&bX()==125)continue}switch(R+=nx(w),w*y){case 38:b=u>0?1:(R+="\f",-1);break;case 44:a[c++]=(Ba(R)-1)*b,b=1;break;case 64:Wa()===45&&(R+=N1(Os())),f=Wa(),u=h=Ba(v=R+=EX(D1())),w++;break;case 45:m===45&&Ba(R)==2&&(y=0)}}return s}function Lk(t,e,n,r,i,s,o,a,l,c,u){for(var h=i-1,f=i===0?s:[""],g=rR(f),m=0,y=0,x=0;m<r;++m)for(var b=0,w=Tm(t,h+1,h=fX(y=o[m])),v=t;b<g;++b)(v=OU(y>0?f[b]+" "+w:hn(w,/&\f/g,f[b])))&&(l[x++]=v);return ix(t,e,n,i===0?tR:a,l,c,u)}function SX(t,e,n){return ix(t,e,n,IU,nx(vX()),Tm(t,2,-2),0)}function kk(t,e,n,r){return ix(t,e,n,nR,Tm(t,0,r),Tm(t,r+1,-1),r)}function of(t,e){for(var n="",r=rR(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function CX(t,e,n,r){switch(t.type){case dX:if(t.children.length)break;case hX:case nR:return t.return=t.return||t.value;case IU:return"";case MU:return t.return=t.value+"{"+of(t.children,r)+"}";case tR:t.value=t.props.join(",")}return Ba(n=of(t.children,r))?t.return=t.value+"{"+n+"}":""}function PX(t){var e=rR(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function AX(t){return function(e){e.root||(e=e.return)&&t(e)}}function NU(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var RX=function(e,n,r){for(var i=0,s=0;i=s,s=Wa(),i===38&&s===12&&(n[r]=1),!Sm(s);)Os();return C0(e,ls)},IX=function(e,n){var r=-1,i=44;do switch(Sm(i)){case 0:i===38&&Wa()===12&&(n[r]=1),e[r]+=RX(ls-1,n,r);break;case 2:e[r]+=N1(i);break;case 4:if(i===44){e[++r]=Wa()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=nx(i)}while(i=Os());return e},MX=function(e,n){return DU(IX(kU(e),n))},Dk=new WeakMap,OX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Dk.get(r))&&!i){Dk.set(e,!0);for(var s=[],o=MX(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},LX=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function FU(t,e){switch(gX(t,e)){case 5103:return un+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return un+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return un+t+_b+t+_i+t+t;case 6828:case 4268:return un+t+_i+t+t;case 6165:return un+t+_i+"flex-"+t+t;case 5187:return un+t+hn(t,/(\w+).+(:[^]+)/,un+"box-$1$2"+_i+"flex-$1$2")+t;case 5443:return un+t+_i+"flex-item-"+hn(t,/flex-|-self/,"")+t;case 4675:return un+t+_i+"flex-line-pack"+hn(t,/align-content|flex-|-self/,"")+t;case 5548:return un+t+_i+hn(t,"shrink","negative")+t;case 5292:return un+t+_i+hn(t,"basis","preferred-size")+t;case 6060:return un+"box-"+hn(t,"-grow","")+un+t+_i+hn(t,"grow","positive")+t;case 4554:return un+hn(t,/([^-])(transform)/g,"$1"+un+"$2")+t;case 6187:return hn(hn(hn(t,/(zoom-|grab)/,un+"$1"),/(image-set)/,un+"$1"),t,"")+t;case 5495:case 3959:return hn(t,/(image-set\([^]*)/,un+"$1$`$1");case 4968:return hn(hn(t,/(.+:)(flex-)?(.*)/,un+"box-pack:$3"+_i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+un+t+t;case 4095:case 3583:case 4068:case 2532:return hn(t,/(.+)-inline(.+)/,un+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ba(t)-1-e>6)switch(li(t,e+1)){case 109:if(li(t,e+4)!==45)break;case 102:return hn(t,/(.+:)(.+)-([^]+)/,"$1"+un+"$2-$3$1"+_b+(li(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~OC(t,"stretch")?FU(hn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(li(t,e+1)!==115)break;case 6444:switch(li(t,Ba(t)-3-(~OC(t,"!important")&&10))){case 107:return hn(t,":",":"+un)+t;case 101:return hn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+un+(li(t,14)===45?"inline-":"")+"box$3$1"+un+"$2$3$1"+_i+"$2box$3")+t}break;case 5936:switch(li(t,e+11)){case 114:return un+t+_i+hn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return un+t+_i+hn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return un+t+_i+hn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return un+t+_i+t+t}return t}var kX=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case nR:e.return=FU(e.value,e.length);break;case MU:return of([Up(e,{value:hn(e.value,"@","@"+un)})],i);case tR:if(e.length)return yX(e.props,function(s){switch(mX(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return of([Up(e,{props:[hn(s,/:(read-\w+)/,":"+_b+"$1")]})],i);case"::placeholder":return of([Up(e,{props:[hn(s,/:(plac\w+)/,":"+un+"input-$1")]}),Up(e,{props:[hn(s,/:(plac\w+)/,":"+_b+"$1")]}),Up(e,{props:[hn(s,/:(plac\w+)/,_i+"input-$1")]})],i)}return""})}},DX=[kX],NX=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var x=y.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||DX,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var x=y.getAttribute("data-emotion").split(" "),b=1;b<x.length;b++)s[x[b]]=!0;a.push(y)});var l,c=[OX,LX];{var u,h=[CX,AX(function(y){u.insert(y)})],f=PX(c.concat(i,h)),g=function(x){return of(TX(x),f)};l=function(x,b,w,v){u=w,g(x?x+"{"+b.styles+"}":b.styles),v&&(m.inserted[b.name]=!0)}}var m={key:n,sheet:new uX({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(a),m};function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$.apply(this,arguments)}var BU={exports:{}},vn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr=typeof Symbol=="function"&&Symbol.for,iR=Kr?Symbol.for("react.element"):60103,sR=Kr?Symbol.for("react.portal"):60106,sx=Kr?Symbol.for("react.fragment"):60107,ox=Kr?Symbol.for("react.strict_mode"):60108,ax=Kr?Symbol.for("react.profiler"):60114,lx=Kr?Symbol.for("react.provider"):60109,cx=Kr?Symbol.for("react.context"):60110,oR=Kr?Symbol.for("react.async_mode"):60111,ux=Kr?Symbol.for("react.concurrent_mode"):60111,hx=Kr?Symbol.for("react.forward_ref"):60112,dx=Kr?Symbol.for("react.suspense"):60113,FX=Kr?Symbol.for("react.suspense_list"):60120,fx=Kr?Symbol.for("react.memo"):60115,px=Kr?Symbol.for("react.lazy"):60116,BX=Kr?Symbol.for("react.block"):60121,zX=Kr?Symbol.for("react.fundamental"):60117,UX=Kr?Symbol.for("react.responder"):60118,$X=Kr?Symbol.for("react.scope"):60119;function Hs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case iR:switch(t=t.type,t){case oR:case ux:case sx:case ax:case ox:case dx:return t;default:switch(t=t&&t.$$typeof,t){case cx:case hx:case px:case fx:case lx:return t;default:return e}}case sR:return e}}}function zU(t){return Hs(t)===ux}vn.AsyncMode=oR;vn.ConcurrentMode=ux;vn.ContextConsumer=cx;vn.ContextProvider=lx;vn.Element=iR;vn.ForwardRef=hx;vn.Fragment=sx;vn.Lazy=px;vn.Memo=fx;vn.Portal=sR;vn.Profiler=ax;vn.StrictMode=ox;vn.Suspense=dx;vn.isAsyncMode=function(t){return zU(t)||Hs(t)===oR};vn.isConcurrentMode=zU;vn.isContextConsumer=function(t){return Hs(t)===cx};vn.isContextProvider=function(t){return Hs(t)===lx};vn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===iR};vn.isForwardRef=function(t){return Hs(t)===hx};vn.isFragment=function(t){return Hs(t)===sx};vn.isLazy=function(t){return Hs(t)===px};vn.isMemo=function(t){return Hs(t)===fx};vn.isPortal=function(t){return Hs(t)===sR};vn.isProfiler=function(t){return Hs(t)===ax};vn.isStrictMode=function(t){return Hs(t)===ox};vn.isSuspense=function(t){return Hs(t)===dx};vn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===sx||t===ux||t===ax||t===ox||t===dx||t===FX||typeof t=="object"&&t!==null&&(t.$$typeof===px||t.$$typeof===fx||t.$$typeof===lx||t.$$typeof===cx||t.$$typeof===hx||t.$$typeof===zX||t.$$typeof===UX||t.$$typeof===$X||t.$$typeof===BX)};vn.typeOf=Hs;BU.exports=vn;var jX=BU.exports,UU=jX,GX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},HX={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$U={};$U[UU.ForwardRef]=GX;$U[UU.Memo]=HX;var VX=!0;function jU(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var aR=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||VX===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},lR=function(e,n,r){aR(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function WX(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var XX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YX=/[A-Z]|^ms/g,qX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GU=function(e){return e.charCodeAt(1)===45},Nk=function(e){return e!=null&&typeof e!="boolean"},oT=NU(function(t){return GU(t)?t:t.replace(YX,"-$&").toLowerCase()}),Fk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(qX,function(r,i,s){return za={name:i,styles:s,next:za},i})}return XX[e]!==1&&!GU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Cm(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return za={name:n.name,styles:n.styles,next:za},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)za={name:r.name,styles:r.styles,next:za},r=r.next;var i=n.styles+";";return i}return KX(t,e,n)}case"function":{if(t!==void 0){var s=za,o=n(t);return za=s,Cm(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function KX(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Cm(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":Nk(o)&&(r+=oT(s)+":"+Fk(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)Nk(o[a])&&(r+=oT(s)+":"+Fk(s,o[a])+";");else{var l=Cm(t,e,o);switch(s){case"animation":case"animationName":{r+=oT(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var Bk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,za,gx=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";za=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Cm(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Cm(r,n,e[a]),i&&(s+=o[a]);Bk.lastIndex=0;for(var l="",c;(c=Bk.exec(s))!==null;)l+="-"+c[1];var u=WX(s)+l;return{name:u,styles:s,next:za}},ZX=function(e){return e()},HU=bb.useInsertionEffect?bb.useInsertionEffect:!1,VU=HU||ZX,zk=HU||P.useLayoutEffect,mx={}.hasOwnProperty,WU=P.createContext(typeof HTMLElement<"u"?NX({key:"css"}):null);WU.Provider;var cR=function(e){return P.forwardRef(function(n,r){var i=P.useContext(WU);return e(n,i,r)})},yx=P.createContext({}),kC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",XU=function(e,n){var r={};for(var i in n)mx.call(n,i)&&(r[i]=n[i]);return r[kC]=e,r},QX=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return aR(n,r,i),VU(function(){return lR(n,r,i)}),null},JX=cR(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[kC],s=[r],o="";typeof t.className=="string"?o=jU(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=gx(s,void 0,P.useContext(yx));o+=e.key+"-"+a.name;var l={};for(var c in t)mx.call(t,c)&&c!=="css"&&c!==kC&&(l[c]=t[c]);return l.ref=n,l.className=o,P.createElement(P.Fragment,null,P.createElement(QX,{cache:e,serialized:a,isStringTag:typeof i=="string"}),P.createElement(i,l))}),YU=JX,DC=Q.Fragment;function K(t,e,n){return mx.call(e,"css")?Q.jsx(YU,XU(t,e),n):Q.jsx(t,e,n)}function Ft(t,e,n){return mx.call(e,"css")?Q.jsxs(YU,XU(t,e),n):Q.jsxs(t,e,n)}var qU={exports:{}},Vs={},KU={exports:{}},ZU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var Z=Y-1>>>1,se=U[Z];if(0<i(se,X))U[Z]=X,U[Y]=se,Y=Z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var Z=0,se=U.length,xe=se>>>1;Z<xe;){var de=2*(Z+1)-1,Me=U[de],he=de+1,Se=U[he];if(0>i(Me,Y))he<se&&0>i(Se,Me)?(U[Z]=Se,U[he]=Y,Z=he):(U[Z]=Me,U[de]=Y,Z=de);else if(he<se&&0>i(Se,Y))U[Z]=Se,U[he]=Y,Z=he;else break e}}return X}function i(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(U){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=U)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function E(U){if(y=!1,v(U),!m)if(n(l)!==null)m=!0,W(S);else{var X=n(c);X!==null&&V(E,X.startTime-U)}}function S(U,X){m=!1,y&&(y=!1,b(I),I=-1),g=!0;var Y=f;try{for(v(X),h=n(l);h!==null&&(!(h.expirationTime>X)||U&&!B());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var se=Z(h.expirationTime<=X);X=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),v(X)}else r(l);h=n(l)}if(h!==null)var xe=!0;else{var de=n(c);de!==null&&V(E,de.startTime-X),xe=!1}return xe}finally{h=null,f=Y,g=!1}}var C=!1,R=null,I=-1,L=5,O=-1;function B(){return!(t.unstable_now()-O<L)}function M(){if(R!==null){var U=t.unstable_now();O=U;var X=!0;try{X=R(!0,U)}finally{X?D():(C=!1,R=null)}}else C=!1}var D;if(typeof w=="function")D=function(){w(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=M,D=function(){j.postMessage(null)}}else D=function(){x(M,0)};function W(U){R=U,C||(C=!0,D())}function V(U,X){I=x(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,W(S))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var Y=f;f=X;try{return U()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=f;f=U;try{return X()}finally{f=Y}},t.unstable_scheduleCallback=function(U,X,Y){var Z=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:se,sortIndex:-1},Y>Z?(U.sortIndex=Y,e(c,U),n(l)===null&&U===n(c)&&(y?(b(I),I=-1):y=!0,V(E,Y-Z))):(U.sortIndex=se,e(l,U),m||g||(m=!0,W(S))),U},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(U){var X=f;return function(){var Y=f;f=X;try{return U.apply(this,arguments)}finally{f=Y}}}})(ZU);KU.exports=ZU;var eY=KU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU=P,Bs=eY;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JU=new Set,Pm={};function Mh(t,e){Ef(t,e),Ef(t+"Capture",e)}function Ef(t,e){for(Pm[t]=e,t=0;t<e.length;t++)JU.add(e[t])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NC=Object.prototype.hasOwnProperty,tY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uk={},$k={};function nY(t){return NC.call($k,t)?!0:NC.call(Uk,t)?!1:tY.test(t)?$k[t]=!0:(Uk[t]=!0,!1)}function rY(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iY(t,e,n,r){if(e===null||typeof e>"u"||rY(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hi[t]=new Hi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hi[e]=new Hi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hi[t]=new Hi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hi[t]=new Hi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hi[t]=new Hi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hi[t]=new Hi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hi[t]=new Hi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hi[t]=new Hi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hi[t]=new Hi(t,5,!1,t.toLowerCase(),null,!1,!1)});var uR=/[\-:]([a-z])/g;function hR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uR,hR);hi[e]=new Hi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uR,hR);hi[e]=new Hi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uR,hR);hi[e]=new Hi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hi[t]=new Hi(t,1,!1,t.toLowerCase(),null,!1,!1)});hi.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hi[t]=new Hi(t,1,!1,t.toLowerCase(),null,!0,!0)});function dR(t,e,n,r){var i=hi.hasOwnProperty(e)?hi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iY(e,n,i,r)&&(n=null),r||i===null?nY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hl=QU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ov=Symbol.for("react.element"),zd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),FC=Symbol.for("react.profiler"),e5=Symbol.for("react.provider"),t5=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),BC=Symbol.for("react.suspense"),zC=Symbol.for("react.suspense_list"),gR=Symbol.for("react.memo"),_c=Symbol.for("react.lazy"),n5=Symbol.for("react.offscreen"),jk=Symbol.iterator;function $p(t){return t===null||typeof t!="object"?null:(t=jk&&t[jk]||t["@@iterator"],typeof t=="function"?t:null)}var Qn=Object.assign,aT;function Sg(t){if(aT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);aT=e&&e[1]||""}return`
`+aT+t}var lT=!1;function cT(t,e){if(!t||lT)return"";lT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sg(t):""}function sY(t){switch(t.tag){case 5:return Sg(t.type);case 16:return Sg("Lazy");case 13:return Sg("Suspense");case 19:return Sg("SuspenseList");case 0:case 2:case 15:return t=cT(t.type,!1),t;case 11:return t=cT(t.type.render,!1),t;case 1:return t=cT(t.type,!0),t;default:return""}}function UC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ud:return"Fragment";case zd:return"Portal";case FC:return"Profiler";case fR:return"StrictMode";case BC:return"Suspense";case zC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t5:return(t.displayName||"Context")+".Consumer";case e5:return(t._context.displayName||"Context")+".Provider";case pR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gR:return e=t.displayName||null,e!==null?e:UC(t.type)||"Memo";case _c:e=t._payload,t=t._init;try{return UC(t(e))}catch{}}return null}function oY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return UC(e);case 8:return e===fR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aY(t){var e=r5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function av(t){t._valueTracker||(t._valueTracker=aY(t))}function i5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $C(t,e){var n=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s5(t,e){e=e.checked,e!=null&&dR(t,"checked",e,!1)}function jC(t,e){s5(t,e);var n=Qc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?GC(t,e.type,n):e.hasOwnProperty("defaultValue")&&GC(t,e.type,Qc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function GC(t,e,n){(e!=="number"||xb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cg=Array.isArray;function af(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function HC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Cg(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qc(n)}}function o5(t,e){var n=Qc(e.value),r=Qc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lv,l5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lv=lv||document.createElement("div"),lv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Am(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lY=["Webkit","ms","Moz","O"];Object.keys(qg).forEach(function(t){lY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qg[e]=qg[t]})});function c5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qg.hasOwnProperty(t)&&qg[t]?(""+e).trim():e+"px"}function u5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=c5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cY=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function WC(t,e){if(e){if(cY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function XC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YC=null;function mR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qC=null,lf=null,cf=null;function Xk(t){if(t=R0(t)){if(typeof qC!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=wx(e),qC(t.stateNode,t.type,e))}}function h5(t){lf?cf?cf.push(t):cf=[t]:lf=t}function d5(){if(lf){var t=lf,e=cf;if(cf=lf=null,Xk(t),e)for(t=0;t<e.length;t++)Xk(e[t])}}function f5(t,e){return t(e)}function p5(){}var uT=!1;function g5(t,e,n){if(uT)return t(e,n);uT=!0;try{return f5(t,e,n)}finally{uT=!1,(lf!==null||cf!==null)&&(p5(),d5())}}function Rm(t,e){var n=t.stateNode;if(n===null)return null;var r=wx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var KC=!1;if(Ol)try{var jp={};Object.defineProperty(jp,"passive",{get:function(){KC=!0}}),window.addEventListener("test",jp,jp),window.removeEventListener("test",jp,jp)}catch{KC=!1}function uY(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Kg=!1,wb=null,Eb=!1,ZC=null,hY={onError:function(t){Kg=!0,wb=t}};function dY(t,e,n,r,i,s,o,a,l){Kg=!1,wb=null,uY.apply(hY,arguments)}function fY(t,e,n,r,i,s,o,a,l){if(dY.apply(this,arguments),Kg){if(Kg){var c=wb;Kg=!1,wb=null}else throw Error(Ae(198));Eb||(Eb=!0,ZC=c)}}function Oh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yk(t){if(Oh(t)!==t)throw Error(Ae(188))}function pY(t){var e=t.alternate;if(!e){if(e=Oh(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yk(i),t;if(s===r)return Yk(i),e;s=s.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function y5(t){return t=pY(t),t!==null?v5(t):null}function v5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v5(t);if(e!==null)return e;t=t.sibling}return null}var b5=Bs.unstable_scheduleCallback,qk=Bs.unstable_cancelCallback,gY=Bs.unstable_shouldYield,mY=Bs.unstable_requestPaint,mr=Bs.unstable_now,yY=Bs.unstable_getCurrentPriorityLevel,yR=Bs.unstable_ImmediatePriority,_5=Bs.unstable_UserBlockingPriority,Tb=Bs.unstable_NormalPriority,vY=Bs.unstable_LowPriority,x5=Bs.unstable_IdlePriority,vx=null,Xa=null;function bY(t){if(Xa&&typeof Xa.onCommitFiberRoot=="function")try{Xa.onCommitFiberRoot(vx,t,void 0,(t.current.flags&128)===128)}catch{}}var ia=Math.clz32?Math.clz32:wY,_Y=Math.log,xY=Math.LN2;function wY(t){return t>>>=0,t===0?32:31-(_Y(t)/xY|0)|0}var cv=64,uv=4194304;function Pg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pg(a):(s&=o,s!==0&&(r=Pg(s)))}else o=n&~i,o!==0?r=Pg(o):s!==0&&(r=Pg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ia(e),i=1<<n,r|=t[n],e&=~i;return r}function EY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TY(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ia(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=EY(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function QC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w5(){var t=cv;return cv<<=1,!(cv&4194240)&&(cv=64),t}function hT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function P0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ia(e),t[e]=n}function SY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ia(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ia(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yn=0;function E5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var T5,bR,S5,C5,P5,JC=!1,hv=[],Nc=null,Fc=null,Bc=null,Im=new Map,Mm=new Map,Sc=[],CY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kk(t,e){switch(t){case"focusin":case"focusout":Nc=null;break;case"dragenter":case"dragleave":Fc=null;break;case"mouseover":case"mouseout":Bc=null;break;case"pointerover":case"pointerout":Im.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mm.delete(e.pointerId)}}function Gp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=R0(e),e!==null&&bR(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PY(t,e,n,r,i){switch(e){case"focusin":return Nc=Gp(Nc,t,e,n,r,i),!0;case"dragenter":return Fc=Gp(Fc,t,e,n,r,i),!0;case"mouseover":return Bc=Gp(Bc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Im.set(s,Gp(Im.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mm.set(s,Gp(Mm.get(s)||null,t,e,n,r,i)),!0}return!1}function A5(t){var e=Wu(t.target);if(e!==null){var n=Oh(e);if(n!==null){if(e=n.tag,e===13){if(e=m5(n),e!==null){t.blockedOn=e,P5(t.priority,function(){S5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function B1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);YC=r,n.target.dispatchEvent(r),YC=null}else return e=R0(n),e!==null&&bR(e),t.blockedOn=n,!1;e.shift()}return!0}function Zk(t,e,n){B1(t)&&n.delete(e)}function AY(){JC=!1,Nc!==null&&B1(Nc)&&(Nc=null),Fc!==null&&B1(Fc)&&(Fc=null),Bc!==null&&B1(Bc)&&(Bc=null),Im.forEach(Zk),Mm.forEach(Zk)}function Hp(t,e){t.blockedOn===e&&(t.blockedOn=null,JC||(JC=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,AY)))}function Om(t){function e(i){return Hp(i,t)}if(0<hv.length){Hp(hv[0],t);for(var n=1;n<hv.length;n++){var r=hv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nc!==null&&Hp(Nc,t),Fc!==null&&Hp(Fc,t),Bc!==null&&Hp(Bc,t),Im.forEach(e),Mm.forEach(e),n=0;n<Sc.length;n++)r=Sc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sc.length&&(n=Sc[0],n.blockedOn===null);)A5(n),n.blockedOn===null&&Sc.shift()}var uf=Hl.ReactCurrentBatchConfig,Cb=!0;function RY(t,e,n,r){var i=yn,s=uf.transition;uf.transition=null;try{yn=1,_R(t,e,n,r)}finally{yn=i,uf.transition=s}}function IY(t,e,n,r){var i=yn,s=uf.transition;uf.transition=null;try{yn=4,_R(t,e,n,r)}finally{yn=i,uf.transition=s}}function _R(t,e,n,r){if(Cb){var i=eP(t,e,n,r);if(i===null)xT(t,e,r,Pb,n),Kk(t,r);else if(PY(i,t,e,n,r))r.stopPropagation();else if(Kk(t,r),e&4&&-1<CY.indexOf(t)){for(;i!==null;){var s=R0(i);if(s!==null&&T5(s),s=eP(t,e,n,r),s===null&&xT(t,e,r,Pb,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xT(t,e,r,null,n)}}var Pb=null;function eP(t,e,n,r){if(Pb=null,t=mR(r),t=Wu(t),t!==null)if(e=Oh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pb=t,null}function R5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yY()){case yR:return 1;case _5:return 4;case Tb:case vY:return 16;case x5:return 536870912;default:return 16}default:return 16}}var Rc=null,xR=null,z1=null;function I5(){if(z1)return z1;var t,e=xR,n=e.length,r,i="value"in Rc?Rc.value:Rc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return z1=i.slice(t,1<r?1-r:void 0)}function U1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dv(){return!0}function Qk(){return!1}function Ws(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dv:Qk,this.isPropagationStopped=Qk,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dv)},persist:function(){},isPersistent:dv}),e}var up={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wR=Ws(up),A0=Qn({},up,{view:0,detail:0}),MY=Ws(A0),dT,fT,Vp,bx=Qn({},A0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ER,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vp&&(Vp&&t.type==="mousemove"?(dT=t.screenX-Vp.screenX,fT=t.screenY-Vp.screenY):fT=dT=0,Vp=t),dT)},movementY:function(t){return"movementY"in t?t.movementY:fT}}),Jk=Ws(bx),OY=Qn({},bx,{dataTransfer:0}),LY=Ws(OY),kY=Qn({},A0,{relatedTarget:0}),pT=Ws(kY),DY=Qn({},up,{animationName:0,elapsedTime:0,pseudoElement:0}),NY=Ws(DY),FY=Qn({},up,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BY=Ws(FY),zY=Qn({},up,{data:0}),e3=Ws(zY),UY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$Y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GY(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jY[t])?!!e[t]:!1}function ER(){return GY}var HY=Qn({},A0,{key:function(t){if(t.key){var e=UY[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=U1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$Y[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ER,charCode:function(t){return t.type==="keypress"?U1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?U1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VY=Ws(HY),WY=Qn({},bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t3=Ws(WY),XY=Qn({},A0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ER}),YY=Ws(XY),qY=Qn({},up,{propertyName:0,elapsedTime:0,pseudoElement:0}),KY=Ws(qY),ZY=Qn({},bx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QY=Ws(ZY),JY=[9,13,27,32],TR=Ol&&"CompositionEvent"in window,Zg=null;Ol&&"documentMode"in document&&(Zg=document.documentMode);var eq=Ol&&"TextEvent"in window&&!Zg,M5=Ol&&(!TR||Zg&&8<Zg&&11>=Zg),n3=" ",r3=!1;function O5(t,e){switch(t){case"keyup":return JY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $d=!1;function tq(t,e){switch(t){case"compositionend":return L5(e);case"keypress":return e.which!==32?null:(r3=!0,n3);case"textInput":return t=e.data,t===n3&&r3?null:t;default:return null}}function nq(t,e){if($d)return t==="compositionend"||!TR&&O5(t,e)?(t=I5(),z1=xR=Rc=null,$d=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M5&&e.locale!=="ko"?null:e.data;default:return null}}var rq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rq[t.type]:e==="textarea"}function k5(t,e,n,r){h5(r),e=Ab(e,"onChange"),0<e.length&&(n=new wR("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qg=null,Lm=null;function iq(t){V5(t,0)}function _x(t){var e=Hd(t);if(i5(e))return t}function sq(t,e){if(t==="change")return e}var D5=!1;if(Ol){var gT;if(Ol){var mT="oninput"in document;if(!mT){var s3=document.createElement("div");s3.setAttribute("oninput","return;"),mT=typeof s3.oninput=="function"}gT=mT}else gT=!1;D5=gT&&(!document.documentMode||9<document.documentMode)}function o3(){Qg&&(Qg.detachEvent("onpropertychange",N5),Lm=Qg=null)}function N5(t){if(t.propertyName==="value"&&_x(Lm)){var e=[];k5(e,Lm,t,mR(t)),g5(iq,e)}}function oq(t,e,n){t==="focusin"?(o3(),Qg=e,Lm=n,Qg.attachEvent("onpropertychange",N5)):t==="focusout"&&o3()}function aq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _x(Lm)}function lq(t,e){if(t==="click")return _x(e)}function cq(t,e){if(t==="input"||t==="change")return _x(e)}function uq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ca=typeof Object.is=="function"?Object.is:uq;function km(t,e){if(ca(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!NC.call(e,i)||!ca(t[i],e[i]))return!1}return!0}function a3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l3(t,e){var n=a3(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a3(n)}}function F5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B5(){for(var t=window,e=xb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xb(t.document)}return e}function SR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hq(t){var e=B5(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F5(n.ownerDocument.documentElement,n)){if(r!==null&&SR(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=l3(n,s);var o=l3(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dq=Ol&&"documentMode"in document&&11>=document.documentMode,jd=null,tP=null,Jg=null,nP=!1;function c3(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nP||jd==null||jd!==xb(r)||(r=jd,"selectionStart"in r&&SR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jg&&km(Jg,r)||(Jg=r,r=Ab(tP,"onSelect"),0<r.length&&(e=new wR("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jd)))}function fv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gd={animationend:fv("Animation","AnimationEnd"),animationiteration:fv("Animation","AnimationIteration"),animationstart:fv("Animation","AnimationStart"),transitionend:fv("Transition","TransitionEnd")},yT={},z5={};Ol&&(z5=document.createElement("div").style,"AnimationEvent"in window||(delete Gd.animationend.animation,delete Gd.animationiteration.animation,delete Gd.animationstart.animation),"TransitionEvent"in window||delete Gd.transitionend.transition);function xx(t){if(yT[t])return yT[t];if(!Gd[t])return t;var e=Gd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in z5)return yT[t]=e[n];return t}var U5=xx("animationend"),$5=xx("animationiteration"),j5=xx("animationstart"),G5=xx("transitionend"),H5=new Map,u3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(t,e){H5.set(t,e),Mh(e,[t])}for(var vT=0;vT<u3.length;vT++){var bT=u3[vT],fq=bT.toLowerCase(),pq=bT[0].toUpperCase()+bT.slice(1);au(fq,"on"+pq)}au(U5,"onAnimationEnd");au($5,"onAnimationIteration");au(j5,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(G5,"onTransitionEnd");Ef("onMouseEnter",["mouseout","mouseover"]);Ef("onMouseLeave",["mouseout","mouseover"]);Ef("onPointerEnter",["pointerout","pointerover"]);Ef("onPointerLeave",["pointerout","pointerover"]);Mh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ag="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ag));function h3(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fY(r,e,void 0,t),t.currentTarget=null}function V5(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;h3(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;h3(i,a,c),s=l}}}if(Eb)throw t=ZC,Eb=!1,ZC=null,t}function On(t,e){var n=e[aP];n===void 0&&(n=e[aP]=new Set);var r=t+"__bubble";n.has(r)||(W5(e,t,2,!1),n.add(r))}function _T(t,e,n){var r=0;e&&(r|=4),W5(n,t,r,e)}var pv="_reactListening"+Math.random().toString(36).slice(2);function Dm(t){if(!t[pv]){t[pv]=!0,JU.forEach(function(n){n!=="selectionchange"&&(gq.has(n)||_T(n,!1,t),_T(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pv]||(e[pv]=!0,_T("selectionchange",!1,e))}}function W5(t,e,n,r){switch(R5(e)){case 1:var i=RY;break;case 4:i=IY;break;default:i=_R}n=i.bind(null,e,n,t),i=void 0,!KC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xT(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Wu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}g5(function(){var c=s,u=mR(n),h=[];e:{var f=H5.get(t);if(f!==void 0){var g=wR,m=t;switch(t){case"keypress":if(U1(n)===0)break e;case"keydown":case"keyup":g=VY;break;case"focusin":m="focus",g=pT;break;case"focusout":m="blur",g=pT;break;case"beforeblur":case"afterblur":g=pT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=LY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=YY;break;case U5:case $5:case j5:g=NY;break;case G5:g=KY;break;case"scroll":g=MY;break;case"wheel":g=QY;break;case"copy":case"cut":case"paste":g=BY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=t3}var y=(e&4)!==0,x=!y&&t==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,v;w!==null;){v=w;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,b!==null&&(E=Rm(w,b),E!=null&&y.push(Nm(w,E,v)))),x)break;w=w.return}0<y.length&&(f=new g(f,m,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==YC&&(m=n.relatedTarget||n.fromElement)&&(Wu(m)||m[Ll]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?Wu(m):null,m!==null&&(x=Oh(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(y=Jk,E="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=t3,E="onPointerLeave",b="onPointerEnter",w="pointer"),x=g==null?f:Hd(g),v=m==null?f:Hd(m),f=new y(E,w+"leave",g,n,u),f.target=x,f.relatedTarget=v,E=null,Wu(u)===c&&(y=new y(b,w+"enter",m,n,u),y.target=v,y.relatedTarget=x,E=y),x=E,g&&m)t:{for(y=g,b=m,w=0,v=y;v;v=rd(v))w++;for(v=0,E=b;E;E=rd(E))v++;for(;0<w-v;)y=rd(y),w--;for(;0<v-w;)b=rd(b),v--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=rd(y),b=rd(b)}y=null}else y=null;g!==null&&d3(h,f,g,y,!1),m!==null&&x!==null&&d3(h,x,m,y,!0)}}e:{if(f=c?Hd(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=sq;else if(i3(f))if(D5)S=cq;else{S=aq;var C=oq}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=lq);if(S&&(S=S(t,c))){k5(h,S,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&GC(f,"number",f.value)}switch(C=c?Hd(c):window,t){case"focusin":(i3(C)||C.contentEditable==="true")&&(jd=C,tP=c,Jg=null);break;case"focusout":Jg=tP=jd=null;break;case"mousedown":nP=!0;break;case"contextmenu":case"mouseup":case"dragend":nP=!1,c3(h,n,u);break;case"selectionchange":if(dq)break;case"keydown":case"keyup":c3(h,n,u)}var R;if(TR)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else $d?O5(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(M5&&n.locale!=="ko"&&($d||I!=="onCompositionStart"?I==="onCompositionEnd"&&$d&&(R=I5()):(Rc=u,xR="value"in Rc?Rc.value:Rc.textContent,$d=!0)),C=Ab(c,I),0<C.length&&(I=new e3(I,t,null,n,u),h.push({event:I,listeners:C}),R?I.data=R:(R=L5(n),R!==null&&(I.data=R)))),(R=eq?tq(t,n):nq(t,n))&&(c=Ab(c,"onBeforeInput"),0<c.length&&(u=new e3("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=R))}V5(h,e)})}function Nm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ab(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rm(t,n),s!=null&&r.unshift(Nm(t,s,i)),s=Rm(t,e),s!=null&&r.push(Nm(t,s,i))),t=t.return}return r}function rd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d3(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Rm(n,s),l!=null&&o.unshift(Nm(n,l,a))):i||(l=Rm(n,s),l!=null&&o.push(Nm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mq=/\r\n?/g,yq=/\u0000|\uFFFD/g;function f3(t){return(typeof t=="string"?t:""+t).replace(mq,`
`).replace(yq,"")}function gv(t,e,n){if(e=f3(e),f3(t)!==e&&n)throw Error(Ae(425))}function Rb(){}var rP=null,iP=null;function sP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oP=typeof setTimeout=="function"?setTimeout:void 0,vq=typeof clearTimeout=="function"?clearTimeout:void 0,p3=typeof Promise=="function"?Promise:void 0,bq=typeof queueMicrotask=="function"?queueMicrotask:typeof p3<"u"?function(t){return p3.resolve(null).then(t).catch(_q)}:oP;function _q(t){setTimeout(function(){throw t})}function wT(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Om(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Om(e)}function zc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function g3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hp=Math.random().toString(36).slice(2),$a="__reactFiber$"+hp,Fm="__reactProps$"+hp,Ll="__reactContainer$"+hp,aP="__reactEvents$"+hp,xq="__reactListeners$"+hp,wq="__reactHandles$"+hp;function Wu(t){var e=t[$a];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ll]||n[$a]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=g3(t);t!==null;){if(n=t[$a])return n;t=g3(t)}return e}t=n,n=t.parentNode}return null}function R0(t){return t=t[$a]||t[Ll],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function wx(t){return t[Fm]||null}var lP=[],Vd=-1;function lu(t){return{current:t}}function Dn(t){0>Vd||(t.current=lP[Vd],lP[Vd]=null,Vd--)}function Pn(t,e){Vd++,lP[Vd]=t.current,t.current=e}var Jc={},Ri=lu(Jc),ns=lu(!1),mh=Jc;function Tf(t,e){var n=t.type.contextTypes;if(!n)return Jc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rs(t){return t=t.childContextTypes,t!=null}function Ib(){Dn(ns),Dn(Ri)}function m3(t,e,n){if(Ri.current!==Jc)throw Error(Ae(168));Pn(Ri,e),Pn(ns,n)}function X5(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,oY(t)||"Unknown",i));return Qn({},n,r)}function Mb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jc,mh=Ri.current,Pn(Ri,t),Pn(ns,ns.current),!0}function y3(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=X5(t,e,mh),r.__reactInternalMemoizedMergedChildContext=t,Dn(ns),Dn(Ri),Pn(Ri,t)):Dn(ns),Pn(ns,n)}var _l=null,Ex=!1,ET=!1;function Y5(t){_l===null?_l=[t]:_l.push(t)}function Eq(t){Ex=!0,Y5(t)}function cu(){if(!ET&&_l!==null){ET=!0;var t=0,e=yn;try{var n=_l;for(yn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_l=null,Ex=!1}catch(i){throw _l!==null&&(_l=_l.slice(t+1)),b5(yR,cu),i}finally{yn=e,ET=!1}}return null}var Wd=[],Xd=0,Ob=null,Lb=0,ho=[],fo=0,yh=null,Cl=1,Pl="";function Du(t,e){Wd[Xd++]=Lb,Wd[Xd++]=Ob,Ob=t,Lb=e}function q5(t,e,n){ho[fo++]=Cl,ho[fo++]=Pl,ho[fo++]=yh,yh=t;var r=Cl;t=Pl;var i=32-ia(r)-1;r&=~(1<<i),n+=1;var s=32-ia(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cl=1<<32-ia(e)+i|n<<i|r,Pl=s+t}else Cl=1<<s|n<<i|r,Pl=t}function CR(t){t.return!==null&&(Du(t,1),q5(t,1,0))}function PR(t){for(;t===Ob;)Ob=Wd[--Xd],Wd[Xd]=null,Lb=Wd[--Xd],Wd[Xd]=null;for(;t===yh;)yh=ho[--fo],ho[fo]=null,Pl=ho[--fo],ho[fo]=null,Cl=ho[--fo],ho[fo]=null}var Ls=null,Rs=null,Hn=!1,Xo=null;function K5(t,e){var n=mo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ls=t,Rs=zc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ls=t,Rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yh!==null?{id:Cl,overflow:Pl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ls=t,Rs=null,!0):!1;default:return!1}}function cP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uP(t){if(Hn){var e=Rs;if(e){var n=e;if(!v3(t,e)){if(cP(t))throw Error(Ae(418));e=zc(n.nextSibling);var r=Ls;e&&v3(t,e)?K5(r,n):(t.flags=t.flags&-4097|2,Hn=!1,Ls=t)}}else{if(cP(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Hn=!1,Ls=t}}}function b3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ls=t}function mv(t){if(t!==Ls)return!1;if(!Hn)return b3(t),Hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sP(t.type,t.memoizedProps)),e&&(e=Rs)){if(cP(t))throw Z5(),Error(Ae(418));for(;e;)K5(t,e),e=zc(e.nextSibling)}if(b3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rs=zc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rs=null}}else Rs=Ls?zc(t.stateNode.nextSibling):null;return!0}function Z5(){for(var t=Rs;t;)t=zc(t.nextSibling)}function Sf(){Rs=Ls=null,Hn=!1}function AR(t){Xo===null?Xo=[t]:Xo.push(t)}var Tq=Hl.ReactCurrentBatchConfig;function Ho(t,e){if(t&&t.defaultProps){e=Qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var kb=lu(null),Db=null,Yd=null,RR=null;function IR(){RR=Yd=Db=null}function MR(t){var e=kb.current;Dn(kb),t._currentValue=e}function hP(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hf(t,e){Db=t,RR=Yd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ji=!0),t.firstContext=null)}function Eo(t){var e=t._currentValue;if(RR!==t)if(t={context:t,memoizedValue:e,next:null},Yd===null){if(Db===null)throw Error(Ae(308));Yd=t,Db.dependencies={lanes:0,firstContext:t}}else Yd=Yd.next=t;return e}var Xu=null;function OR(t){Xu===null?Xu=[t]:Xu.push(t)}function Q5(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,OR(e)):(n.next=i.next,i.next=n),e.interleaved=n,kl(t,r)}function kl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xc=!1;function LR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Uc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kl(t,n)}return i=r.interleaved,i===null?(e.next=e,OR(r)):(e.next=i.next,i.next=e),r.interleaved=e,kl(t,n)}function $1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vR(t,n)}}function _3(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nb(t,e,n,r){var i=t.updateQueue;xc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,g=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(g,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,h,f):m,f==null)break e;h=Qn({},h,f);break e;case 2:xc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=h):u=u.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bh|=o,t.lanes=o,t.memoizedState=h}}function x3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var e6=new QU.Component().refs;function dP(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tx={isMounted:function(t){return(t=t._reactInternals)?Oh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ji(),i=jc(t),s=Rl(r,i);s.payload=e,n!=null&&(s.callback=n),e=Uc(t,s,i),e!==null&&(sa(e,t,i,r),$1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ji(),i=jc(t),s=Rl(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Uc(t,s,i),e!==null&&(sa(e,t,i,r),$1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ji(),r=jc(t),i=Rl(n,r);i.tag=2,e!=null&&(i.callback=e),e=Uc(t,i,r),e!==null&&(sa(e,t,r,n),$1(e,t,r))}};function w3(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!km(n,r)||!km(i,s):!0}function t6(t,e,n){var r=!1,i=Jc,s=e.contextType;return typeof s=="object"&&s!==null?s=Eo(s):(i=rs(e)?mh:Ri.current,r=e.contextTypes,s=(r=r!=null)?Tf(t,i):Jc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function E3(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tx.enqueueReplaceState(e,e.state,null)}function fP(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=e6,LR(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Eo(s):(s=rs(e)?mh:Ri.current,i.context=Tf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dP(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tx.enqueueReplaceState(i,i.state,null),Nb(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===e6&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function yv(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T3(t){var e=t._init;return e(t._payload)}function n6(t){function e(b,w){if(t){var v=b.deletions;v===null?(b.deletions=[w],b.flags|=16):v.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Gc(b,w),b.index=0,b.sibling=null,b}function s(b,w,v){return b.index=v,t?(v=b.alternate,v!==null?(v=v.index,v<w?(b.flags|=2,w):v):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,w,v,E){return w===null||w.tag!==6?(w=IT(v,b.mode,E),w.return=b,w):(w=i(w,v),w.return=b,w)}function l(b,w,v,E){var S=v.type;return S===Ud?u(b,w,v.props.children,E,v.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_c&&T3(S)===w.type)?(E=i(w,v.props),E.ref=Wp(b,w,v),E.return=b,E):(E=X1(v.type,v.key,v.props,null,b.mode,E),E.ref=Wp(b,w,v),E.return=b,E)}function c(b,w,v,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=MT(v,b.mode,E),w.return=b,w):(w=i(w,v.children||[]),w.return=b,w)}function u(b,w,v,E,S){return w===null||w.tag!==7?(w=rh(v,b.mode,E,S),w.return=b,w):(w=i(w,v),w.return=b,w)}function h(b,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=IT(""+w,b.mode,v),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ov:return v=X1(w.type,w.key,w.props,null,b.mode,v),v.ref=Wp(b,null,w),v.return=b,v;case zd:return w=MT(w,b.mode,v),w.return=b,w;case _c:var E=w._init;return h(b,E(w._payload),v)}if(Cg(w)||$p(w))return w=rh(w,b.mode,v,null),w.return=b,w;yv(b,w)}return null}function f(b,w,v,E){var S=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(b,w,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ov:return v.key===S?l(b,w,v,E):null;case zd:return v.key===S?c(b,w,v,E):null;case _c:return S=v._init,f(b,w,S(v._payload),E)}if(Cg(v)||$p(v))return S!==null?null:u(b,w,v,E,null);yv(b,v)}return null}function g(b,w,v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return b=b.get(v)||null,a(w,b,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ov:return b=b.get(E.key===null?v:E.key)||null,l(w,b,E,S);case zd:return b=b.get(E.key===null?v:E.key)||null,c(w,b,E,S);case _c:var C=E._init;return g(b,w,v,C(E._payload),S)}if(Cg(E)||$p(E))return b=b.get(v)||null,u(w,b,E,S,null);yv(w,E)}return null}function m(b,w,v,E){for(var S=null,C=null,R=w,I=w=0,L=null;R!==null&&I<v.length;I++){R.index>I?(L=R,R=null):L=R.sibling;var O=f(b,R,v[I],E);if(O===null){R===null&&(R=L);break}t&&R&&O.alternate===null&&e(b,R),w=s(O,w,I),C===null?S=O:C.sibling=O,C=O,R=L}if(I===v.length)return n(b,R),Hn&&Du(b,I),S;if(R===null){for(;I<v.length;I++)R=h(b,v[I],E),R!==null&&(w=s(R,w,I),C===null?S=R:C.sibling=R,C=R);return Hn&&Du(b,I),S}for(R=r(b,R);I<v.length;I++)L=g(R,b,I,v[I],E),L!==null&&(t&&L.alternate!==null&&R.delete(L.key===null?I:L.key),w=s(L,w,I),C===null?S=L:C.sibling=L,C=L);return t&&R.forEach(function(B){return e(b,B)}),Hn&&Du(b,I),S}function y(b,w,v,E){var S=$p(v);if(typeof S!="function")throw Error(Ae(150));if(v=S.call(v),v==null)throw Error(Ae(151));for(var C=S=null,R=w,I=w=0,L=null,O=v.next();R!==null&&!O.done;I++,O=v.next()){R.index>I?(L=R,R=null):L=R.sibling;var B=f(b,R,O.value,E);if(B===null){R===null&&(R=L);break}t&&R&&B.alternate===null&&e(b,R),w=s(B,w,I),C===null?S=B:C.sibling=B,C=B,R=L}if(O.done)return n(b,R),Hn&&Du(b,I),S;if(R===null){for(;!O.done;I++,O=v.next())O=h(b,O.value,E),O!==null&&(w=s(O,w,I),C===null?S=O:C.sibling=O,C=O);return Hn&&Du(b,I),S}for(R=r(b,R);!O.done;I++,O=v.next())O=g(R,b,I,O.value,E),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?I:O.key),w=s(O,w,I),C===null?S=O:C.sibling=O,C=O);return t&&R.forEach(function(M){return e(b,M)}),Hn&&Du(b,I),S}function x(b,w,v,E){if(typeof v=="object"&&v!==null&&v.type===Ud&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ov:e:{for(var S=v.key,C=w;C!==null;){if(C.key===S){if(S=v.type,S===Ud){if(C.tag===7){n(b,C.sibling),w=i(C,v.props.children),w.return=b,b=w;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_c&&T3(S)===C.type){n(b,C.sibling),w=i(C,v.props),w.ref=Wp(b,C,v),w.return=b,b=w;break e}n(b,C);break}else e(b,C);C=C.sibling}v.type===Ud?(w=rh(v.props.children,b.mode,E,v.key),w.return=b,b=w):(E=X1(v.type,v.key,v.props,null,b.mode,E),E.ref=Wp(b,w,v),E.return=b,b=E)}return o(b);case zd:e:{for(C=v.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(b,w.sibling),w=i(w,v.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=MT(v,b.mode,E),w.return=b,b=w}return o(b);case _c:return C=v._init,x(b,w,C(v._payload),E)}if(Cg(v))return m(b,w,v,E);if($p(v))return y(b,w,v,E);yv(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,v),w.return=b,b=w):(n(b,w),w=IT(v,b.mode,E),w.return=b,b=w),o(b)):n(b,w)}return x}var Cf=n6(!0),r6=n6(!1),I0={},Ya=lu(I0),Bm=lu(I0),zm=lu(I0);function Yu(t){if(t===I0)throw Error(Ae(174));return t}function kR(t,e){switch(Pn(zm,e),Pn(Bm,t),Pn(Ya,I0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VC(e,t)}Dn(Ya),Pn(Ya,e)}function Pf(){Dn(Ya),Dn(Bm),Dn(zm)}function i6(t){Yu(zm.current);var e=Yu(Ya.current),n=VC(e,t.type);e!==n&&(Pn(Bm,t),Pn(Ya,n))}function DR(t){Bm.current===t&&(Dn(Ya),Dn(Bm))}var qn=lu(0);function Fb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var TT=[];function NR(){for(var t=0;t<TT.length;t++)TT[t]._workInProgressVersionPrimary=null;TT.length=0}var j1=Hl.ReactCurrentDispatcher,ST=Hl.ReactCurrentBatchConfig,vh=0,Zn=null,Lr=null,Vr=null,Bb=!1,em=!1,Um=0,Sq=0;function mi(){throw Error(Ae(321))}function FR(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ca(t[n],e[n]))return!1;return!0}function BR(t,e,n,r,i,s){if(vh=s,Zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,j1.current=t===null||t.memoizedState===null?Rq:Iq,t=n(r,i),em){s=0;do{if(em=!1,Um=0,25<=s)throw Error(Ae(301));s+=1,Vr=Lr=null,e.updateQueue=null,j1.current=Mq,t=n(r,i)}while(em)}if(j1.current=zb,e=Lr!==null&&Lr.next!==null,vh=0,Vr=Lr=Zn=null,Bb=!1,e)throw Error(Ae(300));return t}function zR(){var t=Um!==0;return Um=0,t}function Na(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Zn.memoizedState=Vr=t:Vr=Vr.next=t,Vr}function To(){if(Lr===null){var t=Zn.alternate;t=t!==null?t.memoizedState:null}else t=Lr.next;var e=Vr===null?Zn.memoizedState:Vr.next;if(e!==null)Vr=e,Lr=t;else{if(t===null)throw Error(Ae(310));Lr=t,t={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Vr===null?Zn.memoizedState=Vr=t:Vr=Vr.next=t}return Vr}function $m(t,e){return typeof e=="function"?e(t):e}function CT(t){var e=To(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Lr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((vh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zn.lanes|=u,bh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ca(r,e.memoizedState)||(Ji=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zn.lanes|=s,bh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function PT(t){var e=To(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ca(s,e.memoizedState)||(Ji=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function s6(){}function o6(t,e){var n=Zn,r=To(),i=e(),s=!ca(r.memoizedState,i);if(s&&(r.memoizedState=i,Ji=!0),r=r.queue,UR(c6.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Vr!==null&&Vr.memoizedState.tag&1){if(n.flags|=2048,jm(9,l6.bind(null,n,r,i,e),void 0,null),qr===null)throw Error(Ae(349));vh&30||a6(n,e,i)}return i}function a6(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l6(t,e,n,r){e.value=n,e.getSnapshot=r,u6(e)&&h6(t)}function c6(t,e,n){return n(function(){u6(e)&&h6(t)})}function u6(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ca(t,n)}catch{return!0}}function h6(t){var e=kl(t,1);e!==null&&sa(e,t,1,-1)}function S3(t){var e=Na();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:t},e.queue=t,t=t.dispatch=Aq.bind(null,Zn,t),[e.memoizedState,t]}function jm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zn.updateQueue,e===null?(e={lastEffect:null,stores:null},Zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function d6(){return To().memoizedState}function G1(t,e,n,r){var i=Na();Zn.flags|=t,i.memoizedState=jm(1|e,n,void 0,r===void 0?null:r)}function Sx(t,e,n,r){var i=To();r=r===void 0?null:r;var s=void 0;if(Lr!==null){var o=Lr.memoizedState;if(s=o.destroy,r!==null&&FR(r,o.deps)){i.memoizedState=jm(e,n,s,r);return}}Zn.flags|=t,i.memoizedState=jm(1|e,n,s,r)}function C3(t,e){return G1(8390656,8,t,e)}function UR(t,e){return Sx(2048,8,t,e)}function f6(t,e){return Sx(4,2,t,e)}function p6(t,e){return Sx(4,4,t,e)}function g6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m6(t,e,n){return n=n!=null?n.concat([t]):null,Sx(4,4,g6.bind(null,e,t),n)}function $R(){}function y6(t,e){var n=To();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&FR(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v6(t,e){var n=To();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&FR(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function b6(t,e,n){return vh&21?(ca(n,e)||(n=w5(),Zn.lanes|=n,bh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ji=!0),t.memoizedState=n)}function Cq(t,e){var n=yn;yn=n!==0&&4>n?n:4,t(!0);var r=ST.transition;ST.transition={};try{t(!1),e()}finally{yn=n,ST.transition=r}}function _6(){return To().memoizedState}function Pq(t,e,n){var r=jc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},x6(t))w6(e,n);else if(n=Q5(t,e,n,r),n!==null){var i=ji();sa(n,t,r,i),E6(n,e,r)}}function Aq(t,e,n){var r=jc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(x6(t))w6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ca(a,o)){var l=e.interleaved;l===null?(i.next=i,OR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Q5(t,e,i,r),n!==null&&(i=ji(),sa(n,t,r,i),E6(n,e,r))}}function x6(t){var e=t.alternate;return t===Zn||e!==null&&e===Zn}function w6(t,e){em=Bb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vR(t,n)}}var zb={readContext:Eo,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Rq={readContext:Eo,useCallback:function(t,e){return Na().memoizedState=[t,e===void 0?null:e],t},useContext:Eo,useEffect:C3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,G1(4194308,4,g6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return G1(4194308,4,t,e)},useInsertionEffect:function(t,e){return G1(4,2,t,e)},useMemo:function(t,e){var n=Na();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Na();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Pq.bind(null,Zn,t),[r.memoizedState,t]},useRef:function(t){var e=Na();return t={current:t},e.memoizedState=t},useState:S3,useDebugValue:$R,useDeferredValue:function(t){return Na().memoizedState=t},useTransition:function(){var t=S3(!1),e=t[0];return t=Cq.bind(null,t[1]),Na().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zn,i=Na();if(Hn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),qr===null)throw Error(Ae(349));vh&30||a6(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,C3(c6.bind(null,r,s,t),[t]),r.flags|=2048,jm(9,l6.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Na(),e=qr.identifierPrefix;if(Hn){var n=Pl,r=Cl;n=(r&~(1<<32-ia(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Um++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Iq={readContext:Eo,useCallback:y6,useContext:Eo,useEffect:UR,useImperativeHandle:m6,useInsertionEffect:f6,useLayoutEffect:p6,useMemo:v6,useReducer:CT,useRef:d6,useState:function(){return CT($m)},useDebugValue:$R,useDeferredValue:function(t){var e=To();return b6(e,Lr.memoizedState,t)},useTransition:function(){var t=CT($m)[0],e=To().memoizedState;return[t,e]},useMutableSource:s6,useSyncExternalStore:o6,useId:_6,unstable_isNewReconciler:!1},Mq={readContext:Eo,useCallback:y6,useContext:Eo,useEffect:UR,useImperativeHandle:m6,useInsertionEffect:f6,useLayoutEffect:p6,useMemo:v6,useReducer:PT,useRef:d6,useState:function(){return PT($m)},useDebugValue:$R,useDeferredValue:function(t){var e=To();return Lr===null?e.memoizedState=t:b6(e,Lr.memoizedState,t)},useTransition:function(){var t=PT($m)[0],e=To().memoizedState;return[t,e]},useMutableSource:s6,useSyncExternalStore:o6,useId:_6,unstable_isNewReconciler:!1};function Af(t,e){try{var n="",r=e;do n+=sY(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function AT(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pP(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Oq=typeof WeakMap=="function"?WeakMap:Map;function T6(t,e,n){n=Rl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$b||($b=!0,TP=r),pP(t,e)},n}function S6(t,e,n){n=Rl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pP(t,e),typeof r!="function"&&($c===null?$c=new Set([this]):$c.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P3(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Oq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Wq.bind(null,t,e,n),e.then(t,t))}function A3(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R3(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rl(-1,1),e.tag=2,Uc(n,e,1))),n.lanes|=1),t)}var Lq=Hl.ReactCurrentOwner,Ji=!1;function Ni(t,e,n,r){e.child=t===null?r6(e,null,n,r):Cf(e,t.child,n,r)}function I3(t,e,n,r,i){n=n.render;var s=e.ref;return hf(e,i),r=BR(t,e,n,r,s,i),n=zR(),t!==null&&!Ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dl(t,e,i)):(Hn&&n&&CR(e),e.flags|=1,Ni(t,e,r,i),e.child)}function M3(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qR(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,C6(t,e,s,r,i)):(t=X1(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:km,n(o,r)&&t.ref===e.ref)return Dl(t,e,i)}return e.flags|=1,t=Gc(s,r),t.ref=e.ref,t.return=e,e.child=t}function C6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(km(s,r)&&t.ref===e.ref)if(Ji=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ji=!0);else return e.lanes=t.lanes,Dl(t,e,i)}return gP(t,e,n,r,i)}function P6(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(Kd,Ts),Ts|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pn(Kd,Ts),Ts|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pn(Kd,Ts),Ts|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pn(Kd,Ts),Ts|=r;return Ni(t,e,i,n),e.child}function A6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gP(t,e,n,r,i){var s=rs(n)?mh:Ri.current;return s=Tf(e,s),hf(e,i),n=BR(t,e,n,r,s,i),r=zR(),t!==null&&!Ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dl(t,e,i)):(Hn&&r&&CR(e),e.flags|=1,Ni(t,e,n,i),e.child)}function O3(t,e,n,r,i){if(rs(n)){var s=!0;Mb(e)}else s=!1;if(hf(e,i),e.stateNode===null)H1(t,e),t6(e,n,r),fP(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Eo(c):(c=rs(n)?mh:Ri.current,c=Tf(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&E3(e,o,r,c),xc=!1;var f=e.memoizedState;o.state=f,Nb(e,r,o,i),l=e.memoizedState,a!==r||f!==l||ns.current||xc?(typeof u=="function"&&(dP(e,n,u,r),l=e.memoizedState),(a=xc||w3(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,J5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ho(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Eo(l):(l=rs(n)?mh:Ri.current,l=Tf(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&E3(e,o,r,l),xc=!1,f=e.memoizedState,o.state=f,Nb(e,r,o,i);var m=e.memoizedState;a!==h||f!==m||ns.current||xc?(typeof g=="function"&&(dP(e,n,g,r),m=e.memoizedState),(c=xc||w3(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return mP(t,e,n,r,s,i)}function mP(t,e,n,r,i,s){A6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&y3(e,n,!1),Dl(t,e,s);r=e.stateNode,Lq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cf(e,t.child,null,s),e.child=Cf(e,null,a,s)):Ni(t,e,a,s),e.memoizedState=r.state,i&&y3(e,n,!0),e.child}function R6(t){var e=t.stateNode;e.pendingContext?m3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m3(t,e.context,!1),kR(t,e.containerInfo)}function L3(t,e,n,r,i){return Sf(),AR(i),e.flags|=256,Ni(t,e,n,r),e.child}var yP={dehydrated:null,treeContext:null,retryLane:0};function vP(t){return{baseLanes:t,cachePool:null,transitions:null}}function I6(t,e,n){var r=e.pendingProps,i=qn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pn(qn,i&1),t===null)return uP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ax(o,r,0,null),t=rh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vP(n),e.memoizedState=yP,t):jR(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kq(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Gc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gc(a,s):(s=rh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vP(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yP,r}return s=t.child,t=s.sibling,r=Gc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jR(t,e){return e=Ax({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vv(t,e,n,r){return r!==null&&AR(r),Cf(e,t.child,null,n),t=jR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kq(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=AT(Error(Ae(422))),vv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ax({mode:"visible",children:r.children},i,0,null),s=rh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Cf(e,t.child,null,o),e.child.memoizedState=vP(o),e.memoizedState=yP,s);if(!(e.mode&1))return vv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ae(419)),r=AT(s,r,void 0),vv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ji||a){if(r=qr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kl(t,i),sa(r,t,i,-1))}return YR(),r=AT(Error(Ae(421))),vv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xq.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rs=zc(i.nextSibling),Ls=e,Hn=!0,Xo=null,t!==null&&(ho[fo++]=Cl,ho[fo++]=Pl,ho[fo++]=yh,Cl=t.id,Pl=t.overflow,yh=e),e=jR(e,r.children),e.flags|=4096,e)}function k3(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hP(t.return,e,n)}function RT(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function M6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ni(t,e,r.children,n),r=qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k3(t,n,e);else if(t.tag===19)k3(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pn(qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fb(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),RT(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fb(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}RT(e,!0,n,null,s);break;case"together":RT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function H1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Gc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Dq(t,e,n){switch(e.tag){case 3:R6(e),Sf();break;case 5:i6(e);break;case 1:rs(e.type)&&Mb(e);break;case 4:kR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pn(kb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pn(qn,qn.current&1),e.flags|=128,null):n&e.child.childLanes?I6(t,e,n):(Pn(qn,qn.current&1),t=Dl(t,e,n),t!==null?t.sibling:null);Pn(qn,qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn(qn,qn.current),r)break;return null;case 22:case 23:return e.lanes=0,P6(t,e,n)}return Dl(t,e,n)}var O6,bP,L6,k6;O6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bP=function(){};L6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yu(Ya.current);var s=null;switch(n){case"input":i=$C(t,i),r=$C(t,r),s=[];break;case"select":i=Qn({},i,{value:void 0}),r=Qn({},r,{value:void 0}),s=[];break;case"textarea":i=HC(t,i),r=HC(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rb)}WC(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&On("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};k6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xp(t,e){if(!Hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Nq(t,e,n){var r=e.pendingProps;switch(PR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return rs(e.type)&&Ib(),yi(e),null;case 3:return r=e.stateNode,Pf(),Dn(ns),Dn(Ri),NR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xo!==null&&(PP(Xo),Xo=null))),bP(t,e),yi(e),null;case 5:DR(e);var i=Yu(zm.current);if(n=e.type,t!==null&&e.stateNode!=null)L6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return yi(e),null}if(t=Yu(Ya.current),mv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[$a]=e,r[Fm]=s,t=(e.mode&1)!==0,n){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(i=0;i<Ag.length;i++)On(Ag[i],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":Gk(r,s),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},On("invalid",r);break;case"textarea":Vk(r,s),On("invalid",r)}WC(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gv(r.textContent,a,t),i=["children",""+a]):Pm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",r)}switch(n){case"input":av(r),Hk(r,s,!0);break;case"textarea":av(r),Wk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$a]=e,t[Fm]=r,O6(t,e,!1,!1),e.stateNode=t;e:{switch(o=XC(n,r),n){case"dialog":On("cancel",t),On("close",t),i=r;break;case"iframe":case"object":case"embed":On("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ag.length;i++)On(Ag[i],t);i=r;break;case"source":On("error",t),i=r;break;case"img":case"image":case"link":On("error",t),On("load",t),i=r;break;case"details":On("toggle",t),i=r;break;case"input":Gk(t,r),i=$C(t,r),On("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qn({},r,{value:void 0}),On("invalid",t);break;case"textarea":Vk(t,r),i=HC(t,r),On("invalid",t);break;default:i=r}WC(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?u5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&l5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Am(t,l):typeof l=="number"&&Am(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&On("scroll",t):l!=null&&dR(t,s,l,o))}switch(n){case"input":av(t),Hk(t,r,!1);break;case"textarea":av(t),Wk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?af(t,!!r.multiple,s,!1):r.defaultValue!=null&&af(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(t&&e.stateNode!=null)k6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Yu(zm.current),Yu(Ya.current),mv(e)){if(r=e.stateNode,n=e.memoizedProps,r[$a]=e,(s=r.nodeValue!==n)&&(t=Ls,t!==null))switch(t.tag){case 3:gv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$a]=e,e.stateNode=r}return yi(e),null;case 13:if(Dn(qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hn&&Rs!==null&&e.mode&1&&!(e.flags&128))Z5(),Sf(),e.flags|=98560,s=!1;else if(s=mv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[$a]=e}else Sf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),s=!1}else Xo!==null&&(PP(Xo),Xo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qn.current&1?kr===0&&(kr=3):YR())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return Pf(),bP(t,e),t===null&&Dm(e.stateNode.containerInfo),yi(e),null;case 10:return MR(e.type._context),yi(e),null;case 17:return rs(e.type)&&Ib(),yi(e),null;case 19:if(Dn(qn),s=e.memoizedState,s===null)return yi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xp(s,!1);else{if(kr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fb(t),o!==null){for(e.flags|=128,Xp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pn(qn,qn.current&1|2),e.child}t=t.sibling}s.tail!==null&&mr()>Rf&&(e.flags|=128,r=!0,Xp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Hn)return yi(e),null}else 2*mr()-s.renderingStartTime>Rf&&n!==1073741824&&(e.flags|=128,r=!0,Xp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mr(),e.sibling=null,n=qn.current,Pn(qn,r?n&1|2:n&1),e):(yi(e),null);case 22:case 23:return XR(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ts&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function Fq(t,e){switch(PR(e),e.tag){case 1:return rs(e.type)&&Ib(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pf(),Dn(ns),Dn(Ri),NR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return DR(e),null;case 13:if(Dn(qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Sf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dn(qn),null;case 4:return Pf(),null;case 10:return MR(e.type._context),null;case 22:case 23:return XR(),null;case 24:return null;default:return null}}var bv=!1,Si=!1,Bq=typeof WeakSet=="function"?WeakSet:Set,tt=null;function qd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ir(t,e,r)}else n.current=null}function _P(t,e,n){try{n()}catch(r){ir(t,e,r)}}var D3=!1;function zq(t,e){if(rP=Cb,t=B5(),SR(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(iP={focusedElem:t,selectionRange:n},Cb=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ho(e.type,y),x);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(E){ir(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return m=D3,D3=!1,m}function tm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_P(e,n,s)}i=i.next}while(i!==r)}}function Cx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xP(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D6(t){var e=t.alternate;e!==null&&(t.alternate=null,D6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$a],delete e[Fm],delete e[aP],delete e[xq],delete e[wq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N6(t){return t.tag===5||t.tag===3||t.tag===4}function N3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rb));else if(r!==4&&(t=t.child,t!==null))for(wP(t,e,n),t=t.sibling;t!==null;)wP(t,e,n),t=t.sibling}function EP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(EP(t,e,n),t=t.sibling;t!==null;)EP(t,e,n),t=t.sibling}var oi=null,Vo=!1;function ac(t,e,n){for(n=n.child;n!==null;)F6(t,e,n),n=n.sibling}function F6(t,e,n){if(Xa&&typeof Xa.onCommitFiberUnmount=="function")try{Xa.onCommitFiberUnmount(vx,n)}catch{}switch(n.tag){case 5:Si||qd(n,e);case 6:var r=oi,i=Vo;oi=null,ac(t,e,n),oi=r,Vo=i,oi!==null&&(Vo?(t=oi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):oi.removeChild(n.stateNode));break;case 18:oi!==null&&(Vo?(t=oi,n=n.stateNode,t.nodeType===8?wT(t.parentNode,n):t.nodeType===1&&wT(t,n),Om(t)):wT(oi,n.stateNode));break;case 4:r=oi,i=Vo,oi=n.stateNode.containerInfo,Vo=!0,ac(t,e,n),oi=r,Vo=i;break;case 0:case 11:case 14:case 15:if(!Si&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_P(n,e,o),i=i.next}while(i!==r)}ac(t,e,n);break;case 1:if(!Si&&(qd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ir(n,e,a)}ac(t,e,n);break;case 21:ac(t,e,n);break;case 22:n.mode&1?(Si=(r=Si)||n.memoizedState!==null,ac(t,e,n),Si=r):ac(t,e,n);break;default:ac(t,e,n)}}function F3(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bq),e.forEach(function(r){var i=Yq.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:oi=a.stateNode,Vo=!1;break e;case 3:oi=a.stateNode.containerInfo,Vo=!0;break e;case 4:oi=a.stateNode.containerInfo,Vo=!0;break e}a=a.return}if(oi===null)throw Error(Ae(160));F6(s,o,i),oi=null,Vo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B6(e,t),e=e.sibling}function B6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bo(e,t),Ca(t),r&4){try{tm(3,t,t.return),Cx(3,t)}catch(y){ir(t,t.return,y)}try{tm(5,t,t.return)}catch(y){ir(t,t.return,y)}}break;case 1:Bo(e,t),Ca(t),r&512&&n!==null&&qd(n,n.return);break;case 5:if(Bo(e,t),Ca(t),r&512&&n!==null&&qd(n,n.return),t.flags&32){var i=t.stateNode;try{Am(i,"")}catch(y){ir(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&s5(i,s),XC(a,o);var c=XC(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?u5(i,h):u==="dangerouslySetInnerHTML"?l5(i,h):u==="children"?Am(i,h):dR(i,u,h,c)}switch(a){case"input":jC(i,s);break;case"textarea":o5(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?af(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?af(i,!!s.multiple,s.defaultValue,!0):af(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fm]=s}catch(y){ir(t,t.return,y)}}break;case 6:if(Bo(e,t),Ca(t),r&4){if(t.stateNode===null)throw Error(Ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ir(t,t.return,y)}}break;case 3:if(Bo(e,t),Ca(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Om(e.containerInfo)}catch(y){ir(t,t.return,y)}break;case 4:Bo(e,t),Ca(t);break;case 13:Bo(e,t),Ca(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(VR=mr())),r&4&&F3(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Si=(c=Si)||u,Bo(e,t),Si=c):Bo(e,t),Ca(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(tt=t,u=t.child;u!==null;){for(h=tt=u;tt!==null;){switch(f=tt,g=f.child,f.tag){case 0:case 11:case 14:case 15:tm(4,f,f.return);break;case 1:qd(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ir(r,n,y)}}break;case 5:qd(f,f.return);break;case 22:if(f.memoizedState!==null){z3(h);continue}}g!==null?(g.return=f,tt=g):z3(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=c5("display",o))}catch(y){ir(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){ir(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bo(e,t),Ca(t),r&4&&F3(t);break;case 21:break;default:Bo(e,t),Ca(t)}}function Ca(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N6(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Am(i,""),r.flags&=-33);var s=N3(t);EP(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N3(t);wP(t,a,o);break;default:throw Error(Ae(161))}}catch(l){ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uq(t,e,n){tt=t,z6(t)}function z6(t,e,n){for(var r=(t.mode&1)!==0;tt!==null;){var i=tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Si;a=bv;var c=Si;if(bv=o,(Si=l)&&!c)for(tt=i;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?U3(i):l!==null?(l.return=o,tt=l):U3(i);for(;s!==null;)tt=s,z6(s),s=s.sibling;tt=i,bv=a,Si=c}B3(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,tt=s):B3(t)}}function B3(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Si||Cx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Si)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ho(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&x3(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Om(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Si||e.flags&512&&xP(e)}catch(f){ir(e,e.return,f)}}if(e===t){tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}}function z3(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,tt=n;break}tt=e.return}}function U3(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cx(4,e)}catch(l){ir(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ir(e,i,l)}}var s=e.return;try{xP(e)}catch(l){ir(e,s,l)}break;case 5:var o=e.return;try{xP(e)}catch(l){ir(e,o,l)}}}catch(l){ir(e,e.return,l)}if(e===t){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var $q=Math.ceil,Ub=Hl.ReactCurrentDispatcher,GR=Hl.ReactCurrentOwner,bo=Hl.ReactCurrentBatchConfig,en=0,qr=null,Tr=null,ui=0,Ts=0,Kd=lu(0),kr=0,Gm=null,bh=0,Px=0,HR=0,nm=null,Qi=null,VR=0,Rf=1/0,vl=null,$b=!1,TP=null,$c=null,_v=!1,Ic=null,jb=0,rm=0,SP=null,V1=-1,W1=0;function ji(){return en&6?mr():V1!==-1?V1:V1=mr()}function jc(t){return t.mode&1?en&2&&ui!==0?ui&-ui:Tq.transition!==null?(W1===0&&(W1=w5()),W1):(t=yn,t!==0||(t=window.event,t=t===void 0?16:R5(t.type)),t):1}function sa(t,e,n,r){if(50<rm)throw rm=0,SP=null,Error(Ae(185));P0(t,n,r),(!(en&2)||t!==qr)&&(t===qr&&(!(en&2)&&(Px|=n),kr===4&&Cc(t,ui)),is(t,r),n===1&&en===0&&!(e.mode&1)&&(Rf=mr()+500,Ex&&cu()))}function is(t,e){var n=t.callbackNode;TY(t,e);var r=Sb(t,t===qr?ui:0);if(r===0)n!==null&&qk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qk(n),e===1)t.tag===0?Eq($3.bind(null,t)):Y5($3.bind(null,t)),bq(function(){!(en&6)&&cu()}),n=null;else{switch(E5(r)){case 1:n=yR;break;case 4:n=_5;break;case 16:n=Tb;break;case 536870912:n=x5;break;default:n=Tb}n=X6(n,U6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function U6(t,e){if(V1=-1,W1=0,en&6)throw Error(Ae(327));var n=t.callbackNode;if(df()&&t.callbackNode!==n)return null;var r=Sb(t,t===qr?ui:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gb(t,r);else{e=r;var i=en;en|=2;var s=j6();(qr!==t||ui!==e)&&(vl=null,Rf=mr()+500,nh(t,e));do try{Hq();break}catch(a){$6(t,a)}while(!0);IR(),Ub.current=s,en=i,Tr!==null?e=0:(qr=null,ui=0,e=kr)}if(e!==0){if(e===2&&(i=QC(t),i!==0&&(r=i,e=CP(t,i))),e===1)throw n=Gm,nh(t,0),Cc(t,r),is(t,mr()),n;if(e===6)Cc(t,r);else{if(i=t.current.alternate,!(r&30)&&!jq(i)&&(e=Gb(t,r),e===2&&(s=QC(t),s!==0&&(r=s,e=CP(t,s))),e===1))throw n=Gm,nh(t,0),Cc(t,r),is(t,mr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Nu(t,Qi,vl);break;case 3:if(Cc(t,r),(r&130023424)===r&&(e=VR+500-mr(),10<e)){if(Sb(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ji(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oP(Nu.bind(null,t,Qi,vl),e);break}Nu(t,Qi,vl);break;case 4:if(Cc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ia(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$q(r/1960))-r,10<r){t.timeoutHandle=oP(Nu.bind(null,t,Qi,vl),r);break}Nu(t,Qi,vl);break;case 5:Nu(t,Qi,vl);break;default:throw Error(Ae(329))}}}return is(t,mr()),t.callbackNode===n?U6.bind(null,t):null}function CP(t,e){var n=nm;return t.current.memoizedState.isDehydrated&&(nh(t,e).flags|=256),t=Gb(t,e),t!==2&&(e=Qi,Qi=n,e!==null&&PP(e)),t}function PP(t){Qi===null?Qi=t:Qi.push.apply(Qi,t)}function jq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ca(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cc(t,e){for(e&=~HR,e&=~Px,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ia(e),r=1<<n;t[n]=-1,e&=~r}}function $3(t){if(en&6)throw Error(Ae(327));df();var e=Sb(t,0);if(!(e&1))return is(t,mr()),null;var n=Gb(t,e);if(t.tag!==0&&n===2){var r=QC(t);r!==0&&(e=r,n=CP(t,r))}if(n===1)throw n=Gm,nh(t,0),Cc(t,e),is(t,mr()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nu(t,Qi,vl),is(t,mr()),null}function WR(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(Rf=mr()+500,Ex&&cu())}}function _h(t){Ic!==null&&Ic.tag===0&&!(en&6)&&df();var e=en;en|=1;var n=bo.transition,r=yn;try{if(bo.transition=null,yn=1,t)return t()}finally{yn=r,bo.transition=n,en=e,!(en&6)&&cu()}}function XR(){Ts=Kd.current,Dn(Kd)}function nh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vq(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(PR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ib();break;case 3:Pf(),Dn(ns),Dn(Ri),NR();break;case 5:DR(r);break;case 4:Pf();break;case 13:Dn(qn);break;case 19:Dn(qn);break;case 10:MR(r.type._context);break;case 22:case 23:XR()}n=n.return}if(qr=t,Tr=t=Gc(t.current,null),ui=Ts=e,kr=0,Gm=null,HR=Px=bh=0,Qi=nm=null,Xu!==null){for(e=0;e<Xu.length;e++)if(n=Xu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xu=null}return t}function $6(t,e){do{var n=Tr;try{if(IR(),j1.current=zb,Bb){for(var r=Zn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bb=!1}if(vh=0,Vr=Lr=Zn=null,em=!1,Um=0,GR.current=null,n===null||n.return===null){kr=1,Gm=e,Tr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ui,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=A3(o);if(g!==null){g.flags&=-257,R3(g,o,a,s,e),g.mode&1&&P3(s,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){P3(s,c,e),YR();break e}l=Error(Ae(426))}}else if(Hn&&a.mode&1){var x=A3(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),R3(x,o,a,s,e),AR(Af(l,a));break e}}s=l=Af(l,a),kr!==4&&(kr=2),nm===null?nm=[s]:nm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=T6(s,l,e);_3(s,b);break e;case 1:a=l;var w=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($c===null||!$c.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=S6(s,a,e);_3(s,E);break e}}s=s.return}while(s!==null)}H6(n)}catch(S){e=S,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function j6(){var t=Ub.current;return Ub.current=zb,t===null?zb:t}function YR(){(kr===0||kr===3||kr===2)&&(kr=4),qr===null||!(bh&268435455)&&!(Px&268435455)||Cc(qr,ui)}function Gb(t,e){var n=en;en|=2;var r=j6();(qr!==t||ui!==e)&&(vl=null,nh(t,e));do try{Gq();break}catch(i){$6(t,i)}while(!0);if(IR(),en=n,Ub.current=r,Tr!==null)throw Error(Ae(261));return qr=null,ui=0,kr}function Gq(){for(;Tr!==null;)G6(Tr)}function Hq(){for(;Tr!==null&&!gY();)G6(Tr)}function G6(t){var e=W6(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,e===null?H6(t):Tr=e,GR.current=null}function H6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Fq(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kr=6,Tr=null;return}}else if(n=Nq(n,e,Ts),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);kr===0&&(kr=5)}function Nu(t,e,n){var r=yn,i=bo.transition;try{bo.transition=null,yn=1,Vq(t,e,n,r)}finally{bo.transition=i,yn=r}return null}function Vq(t,e,n,r){do df();while(Ic!==null);if(en&6)throw Error(Ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SY(t,s),t===qr&&(Tr=qr=null,ui=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_v||(_v=!0,X6(Tb,function(){return df(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bo.transition,bo.transition=null;var o=yn;yn=1;var a=en;en|=4,GR.current=null,zq(t,n),B6(n,t),hq(iP),Cb=!!rP,iP=rP=null,t.current=n,Uq(n),mY(),en=a,yn=o,bo.transition=s}else t.current=n;if(_v&&(_v=!1,Ic=t,jb=i),s=t.pendingLanes,s===0&&($c=null),bY(n.stateNode),is(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($b)throw $b=!1,t=TP,TP=null,t;return jb&1&&t.tag!==0&&df(),s=t.pendingLanes,s&1?t===SP?rm++:(rm=0,SP=t):rm=0,cu(),null}function df(){if(Ic!==null){var t=E5(jb),e=bo.transition,n=yn;try{if(bo.transition=null,yn=16>t?16:t,Ic===null)var r=!1;else{if(t=Ic,Ic=null,jb=0,en&6)throw Error(Ae(331));var i=en;for(en|=4,tt=t.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(tt=c;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:tm(8,u,s)}var h=u.child;if(h!==null)h.return=u,tt=h;else for(;tt!==null;){u=tt;var f=u.sibling,g=u.return;if(D6(u),u===c){tt=null;break}if(f!==null){f.return=g,tt=f;break}tt=g}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tm(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,tt=b;break e}tt=s.return}}var w=t.current;for(tt=w;tt!==null;){o=tt;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,tt=v;else e:for(o=w;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cx(9,a)}}catch(S){ir(a,a.return,S)}if(a===o){tt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,tt=E;break e}tt=a.return}}if(en=i,cu(),Xa&&typeof Xa.onPostCommitFiberRoot=="function")try{Xa.onPostCommitFiberRoot(vx,t)}catch{}r=!0}return r}finally{yn=n,bo.transition=e}}return!1}function j3(t,e,n){e=Af(n,e),e=T6(t,e,1),t=Uc(t,e,1),e=ji(),t!==null&&(P0(t,1,e),is(t,e))}function ir(t,e,n){if(t.tag===3)j3(t,t,n);else for(;e!==null;){if(e.tag===3){j3(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($c===null||!$c.has(r))){t=Af(n,t),t=S6(e,t,1),e=Uc(e,t,1),t=ji(),e!==null&&(P0(e,1,t),is(e,t));break}}e=e.return}}function Wq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ji(),t.pingedLanes|=t.suspendedLanes&n,qr===t&&(ui&n)===n&&(kr===4||kr===3&&(ui&130023424)===ui&&500>mr()-VR?nh(t,0):HR|=n),is(t,e)}function V6(t,e){e===0&&(t.mode&1?(e=uv,uv<<=1,!(uv&130023424)&&(uv=4194304)):e=1);var n=ji();t=kl(t,e),t!==null&&(P0(t,e,n),is(t,n))}function Xq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V6(t,n)}function Yq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),V6(t,n)}var W6;W6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ns.current)Ji=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ji=!1,Dq(t,e,n);Ji=!!(t.flags&131072)}else Ji=!1,Hn&&e.flags&1048576&&q5(e,Lb,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;H1(t,e),t=e.pendingProps;var i=Tf(e,Ri.current);hf(e,n),i=BR(null,e,r,t,i,n);var s=zR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(r)?(s=!0,Mb(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,LR(e),i.updater=Tx,e.stateNode=i,i._reactInternals=e,fP(e,r,t,n),e=mP(null,e,r,!0,s,n)):(e.tag=0,Hn&&s&&CR(e),Ni(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(H1(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Kq(r),t=Ho(r,t),i){case 0:e=gP(null,e,r,t,n);break e;case 1:e=O3(null,e,r,t,n);break e;case 11:e=I3(null,e,r,t,n);break e;case 14:e=M3(null,e,r,Ho(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ho(r,i),gP(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ho(r,i),O3(t,e,r,i,n);case 3:e:{if(R6(e),t===null)throw Error(Ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,J5(t,e),Nb(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Af(Error(Ae(423)),e),e=L3(t,e,r,n,i);break e}else if(r!==i){i=Af(Error(Ae(424)),e),e=L3(t,e,r,n,i);break e}else for(Rs=zc(e.stateNode.containerInfo.firstChild),Ls=e,Hn=!0,Xo=null,n=r6(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sf(),r===i){e=Dl(t,e,n);break e}Ni(t,e,r,n)}e=e.child}return e;case 5:return i6(e),t===null&&uP(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sP(r,i)?o=null:s!==null&&sP(r,s)&&(e.flags|=32),A6(t,e),Ni(t,e,o,n),e.child;case 6:return t===null&&uP(e),null;case 13:return I6(t,e,n);case 4:return kR(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cf(e,null,r,n):Ni(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ho(r,i),I3(t,e,r,i,n);case 7:return Ni(t,e,e.pendingProps,n),e.child;case 8:return Ni(t,e,e.pendingProps.children,n),e.child;case 12:return Ni(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pn(kb,r._currentValue),r._currentValue=o,s!==null)if(ca(s.value,o)){if(s.children===i.children&&!ns.current){e=Dl(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Rl(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hP(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hP(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ni(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hf(e,n),i=Eo(i),r=r(i),e.flags|=1,Ni(t,e,r,n),e.child;case 14:return r=e.type,i=Ho(r,e.pendingProps),i=Ho(r.type,i),M3(t,e,r,i,n);case 15:return C6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ho(r,i),H1(t,e),e.tag=1,rs(r)?(t=!0,Mb(e)):t=!1,hf(e,n),t6(e,r,i),fP(e,r,i,n),mP(null,e,r,!0,t,n);case 19:return M6(t,e,n);case 22:return P6(t,e,n)}throw Error(Ae(156,e.tag))};function X6(t,e){return b5(t,e)}function qq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(t,e,n,r){return new qq(t,e,n,r)}function qR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kq(t){if(typeof t=="function")return qR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pR)return 11;if(t===gR)return 14}return 2}function Gc(t,e){var n=t.alternate;return n===null?(n=mo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function X1(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ud:return rh(n.children,i,s,e);case fR:o=8,i|=8;break;case FC:return t=mo(12,n,e,i|2),t.elementType=FC,t.lanes=s,t;case BC:return t=mo(13,n,e,i),t.elementType=BC,t.lanes=s,t;case zC:return t=mo(19,n,e,i),t.elementType=zC,t.lanes=s,t;case n5:return Ax(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e5:o=10;break e;case t5:o=9;break e;case pR:o=11;break e;case gR:o=14;break e;case _c:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=mo(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function rh(t,e,n,r){return t=mo(7,t,r,e),t.lanes=n,t}function Ax(t,e,n,r){return t=mo(22,t,r,e),t.elementType=n5,t.lanes=n,t.stateNode={isHidden:!1},t}function IT(t,e,n){return t=mo(6,t,null,e),t.lanes=n,t}function MT(t,e,n){return e=mo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zq(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hT(0),this.expirationTimes=hT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KR(t,e,n,r,i,s,o,a,l){return t=new Zq(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mo(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LR(s),t}function Qq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y6(t){if(!t)return Jc;t=t._reactInternals;e:{if(Oh(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(rs(n))return X5(t,n,e)}return e}function q6(t,e,n,r,i,s,o,a,l){return t=KR(n,r,!0,t,i,s,o,a,l),t.context=Y6(null),n=t.current,r=ji(),i=jc(n),s=Rl(r,i),s.callback=e??null,Uc(n,s,i),t.current.lanes=i,P0(t,i,r),is(t,r),t}function Rx(t,e,n,r){var i=e.current,s=ji(),o=jc(i);return n=Y6(n),e.context===null?e.context=n:e.pendingContext=n,e=Rl(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Uc(i,e,o),t!==null&&(sa(t,i,o,s),$1(t,i,o)),o}function Hb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G3(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ZR(t,e){G3(t,e),(t=t.alternate)&&G3(t,e)}function Jq(){return null}var K6=typeof reportError=="function"?reportError:function(t){console.error(t)};function QR(t){this._internalRoot=t}Ix.prototype.render=QR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Rx(t,e,null,null)};Ix.prototype.unmount=QR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_h(function(){Rx(null,t,null,null)}),e[Ll]=null}};function Ix(t){this._internalRoot=t}Ix.prototype.unstable_scheduleHydration=function(t){if(t){var e=C5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sc.length&&e!==0&&e<Sc[n].priority;n++);Sc.splice(n,0,t),n===0&&A5(t)}};function JR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H3(){}function eK(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Hb(o);s.call(c)}}var o=q6(e,r,t,0,null,!1,!1,"",H3);return t._reactRootContainer=o,t[Ll]=o.current,Dm(t.nodeType===8?t.parentNode:t),_h(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Hb(l);a.call(c)}}var l=KR(t,0,!1,null,null,!1,!1,"",H3);return t._reactRootContainer=l,t[Ll]=l.current,Dm(t.nodeType===8?t.parentNode:t),_h(function(){Rx(e,l,n,r)}),l}function Ox(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Hb(o);a.call(l)}}Rx(e,o,t,i)}else o=eK(n,e,t,i,r);return Hb(o)}T5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pg(e.pendingLanes);n!==0&&(vR(e,n|1),is(e,mr()),!(en&6)&&(Rf=mr()+500,cu()))}break;case 13:_h(function(){var r=kl(t,1);if(r!==null){var i=ji();sa(r,t,1,i)}}),ZR(t,1)}};bR=function(t){if(t.tag===13){var e=kl(t,134217728);if(e!==null){var n=ji();sa(e,t,134217728,n)}ZR(t,134217728)}};S5=function(t){if(t.tag===13){var e=jc(t),n=kl(t,e);if(n!==null){var r=ji();sa(n,t,e,r)}ZR(t,e)}};C5=function(){return yn};P5=function(t,e){var n=yn;try{return yn=t,e()}finally{yn=n}};qC=function(t,e,n){switch(e){case"input":if(jC(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wx(r);if(!i)throw Error(Ae(90));i5(r),jC(r,i)}}}break;case"textarea":o5(t,n);break;case"select":e=n.value,e!=null&&af(t,!!n.multiple,e,!1)}};f5=WR;p5=_h;var tK={usingClientEntryPoint:!1,Events:[R0,Hd,wx,h5,d5,WR]},Yp={findFiberByHostInstance:Wu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nK={bundleType:Yp.bundleType,version:Yp.version,rendererPackageName:Yp.rendererPackageName,rendererConfig:Yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y5(t),t===null?null:t.stateNode},findFiberByHostInstance:Yp.findFiberByHostInstance||Jq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xv.isDisabled&&xv.supportsFiber)try{vx=xv.inject(nK),Xa=xv}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tK;Vs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JR(e))throw Error(Ae(200));return Qq(t,e,null,n)};Vs.createRoot=function(t,e){if(!JR(t))throw Error(Ae(299));var n=!1,r="",i=K6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=KR(t,1,!1,null,null,n,!1,r,i),t[Ll]=e.current,Dm(t.nodeType===8?t.parentNode:t),new QR(e)};Vs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=y5(e),t=t===null?null:t.stateNode,t};Vs.flushSync=function(t){return _h(t)};Vs.hydrate=function(t,e,n){if(!Mx(e))throw Error(Ae(200));return Ox(null,t,e,!0,n)};Vs.hydrateRoot=function(t,e,n){if(!JR(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=K6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=q6(e,null,t,1,n??null,i,!1,s,o),t[Ll]=e.current,Dm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ix(e)};Vs.render=function(t,e,n){if(!Mx(e))throw Error(Ae(200));return Ox(null,t,e,!1,n)};Vs.unmountComponentAtNode=function(t){if(!Mx(t))throw Error(Ae(40));return t._reactRootContainer?(_h(function(){Ox(null,null,t,!1,function(){t._reactRootContainer=null,t[Ll]=null})}),!0):!1};Vs.unstable_batchedUpdates=WR;Vs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mx(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return Ox(t,e,n,!1,r)};Vs.version="18.2.0-next-9e3b772b8-20220608";function Z6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z6)}catch(t){console.error(t)}}Z6(),qU.exports=Vs;var Vl=qU.exports;const Rg=Ih(Vl),rK=K2({__proto__:null,default:Rg},[Vl]);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sr.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const V3="popstate";function iK(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=il(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Hm("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:M0(s))}function r(i,s){eu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return oK(e,n,r,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sK(){return Math.random().toString(36).substr(2,8)}function W3(t,e){return{usr:t.state,key:t.key,idx:e}}function Hm(t,e,n,r){return n===void 0&&(n=null),sr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?il(e):e,{state:n,key:e&&e.key||r||sK()})}function M0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function il(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oK(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=fr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(sr({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=fr.Pop;let x=u(),b=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:b})}function f(x,b){a=fr.Push;let w=Hm(y.location,x,b);n&&n(w,x),c=u()+1;let v=W3(w,c),E=y.createHref(w);try{o.pushState(v,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:a,location:y.location,delta:1})}function g(x,b){a=fr.Replace;let w=Hm(y.location,x,b);n&&n(w,x),c=u();let v=W3(w,c),E=y.createHref(w);o.replaceState(v,"",E),s&&l&&l({action:a,location:y.location,delta:0})}function m(x){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:M0(x);return Yt(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(V3,h),l=x,()=>{i.removeEventListener(V3,h),l=null}},createHref(x){return e(i,x)},createURL:m,encodeLocation(x){let b=m(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:g,go(x){return o.go(x)}};return y}var rr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rr||(rr={}));const aK=new Set(["lazy","caseSensitive","path","id","index","children"]);function lK(t){return t.index===!0}function AP(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Yt(i.index!==!0||!i.children,"Cannot specify children on an index route"),Yt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),lK(i)){let l=sr({},i,e(i),{id:a});return r[a]=l,l}else{let l=sr({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=AP(i.children,e,o,r)),l}})}function Zd(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?il(e):e,i=O0(r.pathname||"/",n);if(i==null)return null;let s=Q6(t);uK(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=bK(s[a],wK(i));return o}function cK(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Q6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Hc([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Q6(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yK(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of J6(s.path))i(s,o,l)}),e}function J6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=J6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function uK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hK=/^:[\w-]+$/,dK=3,fK=2,pK=1,gK=10,mK=-2,X3=t=>t==="*";function yK(t,e){let n=t.split("/"),r=n.length;return n.some(X3)&&(r+=mK),e&&(r+=fK),n.filter(i=>!X3(i)).reduce((i,s)=>i+(hK.test(s)?dK:s===""?pK:gK),r)}function vK(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bK(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=_K({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let h=a.route;s.push({params:r,pathname:Hc([i,u.pathname]),pathnameBase:CK(Hc([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=Hc([i,u.pathnameBase]))}return s}function _K(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[h];return g&&!m?c[f]=void 0:c[f]=EK(m||"",f),c},{}),pathname:s,pathnameBase:o,pattern:t}}function xK(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wK(t){try{return decodeURI(t)}catch(e){return eu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function EK(t,e){try{return decodeURIComponent(t)}catch(n){return eu(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function O0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function TK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?il(t):t;return{pathname:n?n.startsWith("/")?n:SK(n,e):e,search:PK(r),hash:AK(i)}}function SK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function OT(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function t$(t,e){let n=e$(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function n$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=il(t):(i=sr({},t),Yt(!i.pathname||!i.pathname.includes("?"),OT("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),OT("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),OT("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=TK(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Hc=t=>t.join("/").replace(/\/\/+/g,"/"),CK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class eI{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function r$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const i$=["post","put","patch","delete"],RK=new Set(i$),IK=["get",...i$],MK=new Set(IK),OK=new Set([301,302,303,307,308]),LK=new Set([307,308]),LT={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},s$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DK=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),o$="remix-router-transitions";function NK(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Yt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let ee=t.detectErrorBoundary;i=ne=>({hasErrorBoundary:ee(ne)})}else i=DK;let s={},o=AP(t.routes,i,void 0,s),a,l=t.basename||"/",c=sr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,h=new Set,f=null,g=null,m=null,y=t.hydrationData!=null,x=Zd(o,t.history.location,l),b=null;if(x==null){let ee=oo(404,{pathname:t.history.location.pathname}),{matches:ne,route:ce}=tD(o);x=ne,b={[ce.id]:ee}}let w,v=x.some(ee=>ee.route.lazy),E=x.some(ee=>ee.route.loader);if(v)w=!1;else if(!E)w=!0;else if(c.v7_partialHydration){let ee=t.hydrationData?t.hydrationData.loaderData:null,ne=t.hydrationData?t.hydrationData.errors:null;w=x.every(ce=>ce.route.loader&&ce.route.loader.hydrate!==!0&&(ee&&ee[ce.route.id]!==void 0||ne&&ne[ce.route.id]!==void 0))}else w=t.hydrationData!=null;let S,C={historyAction:t.history.action,location:t.history.location,matches:x,initialized:w,navigation:LT,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},R=fr.Pop,I=!1,L,O=!1,B=new Map,M=null,D=!1,N=!1,j=[],W=[],V=new Map,U=0,X=-1,Y=new Map,Z=new Set,se=new Map,xe=new Map,de=new Set,Me=new Map,he=new Map,Se=!1;function le(){if(u=t.history.listen(ee=>{let{action:ne,location:ce,delta:De}=ee;if(Se){Se=!1;return}eu(he.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ge=on({currentLocation:C.location,nextLocation:ce,historyAction:ne});if(Ge&&De!=null){Se=!0,t.history.go(De*-1),Ht(Ge,{state:"blocked",location:ce,proceed(){Ht(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ce}),t.history.go(De)},reset(){let vt=new Map(C.blockers);vt.set(Ge,qp),oe({blockers:vt})}});return}return we(ne,ce)}),n){XK(e,B);let ee=()=>YK(e,B);e.addEventListener("pagehide",ee),M=()=>e.removeEventListener("pagehide",ee)}return C.initialized||we(fr.Pop,C.location,{initialHydration:!0}),S}function ae(){u&&u(),M&&M(),h.clear(),L&&L.abort(),C.fetchers.forEach((ee,ne)=>Ke(ne)),C.blockers.forEach((ee,ne)=>St(ne))}function me(ee){return h.add(ee),()=>h.delete(ee)}function oe(ee,ne){ne===void 0&&(ne={}),C=sr({},C,ee);let ce=[],De=[];c.v7_fetcherPersist&&C.fetchers.forEach((Ge,vt)=>{Ge.state==="idle"&&(de.has(vt)?De.push(vt):ce.push(vt))}),[...h].forEach(Ge=>Ge(C,{deletedFetchers:De,unstable_viewTransitionOpts:ne.viewTransitionOpts,unstable_flushSync:ne.flushSync===!0})),c.v7_fetcherPersist&&(ce.forEach(Ge=>C.fetchers.delete(Ge)),De.forEach(Ge=>Ke(Ge)))}function _e(ee,ne,ce){var De,Ge;let{flushSync:vt}=ce===void 0?{}:ce,ut=C.actionData!=null&&C.navigation.formMethod!=null&&Wo(C.navigation.formMethod)&&C.navigation.state==="loading"&&((De=ee.state)==null?void 0:De._isRedirect)!==!0,ht;ne.actionData?Object.keys(ne.actionData).length>0?ht=ne.actionData:ht=null:ut?ht=C.actionData:ht=null;let Je=ne.loaderData?eD(C.loaderData,ne.loaderData,ne.matches||[],ne.errors):C.loaderData,Lt=C.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((Ct,ln)=>Lt.set(ln,qp)));let an=I===!0||C.navigation.formMethod!=null&&Wo(C.navigation.formMethod)&&((Ge=ee.state)==null?void 0:Ge._isRedirect)!==!0;a&&(o=a,a=void 0),D||R===fr.Pop||(R===fr.Push?t.history.push(ee,ee.state):R===fr.Replace&&t.history.replace(ee,ee.state));let gt;if(R===fr.Pop){let Ct=B.get(C.location.pathname);Ct&&Ct.has(ee.pathname)?gt={currentLocation:C.location,nextLocation:ee}:B.has(ee.pathname)&&(gt={currentLocation:ee,nextLocation:C.location})}else if(O){let Ct=B.get(C.location.pathname);Ct?Ct.add(ee.pathname):(Ct=new Set([ee.pathname]),B.set(C.location.pathname,Ct)),gt={currentLocation:C.location,nextLocation:ee}}oe(sr({},ne,{actionData:ht,loaderData:Je,historyAction:R,location:ee,initialized:!0,navigation:LT,revalidation:"idle",restoreScrollPosition:Xs(ee,ne.matches||C.matches),preventScrollReset:an,blockers:Lt}),{viewTransitionOpts:gt,flushSync:vt===!0}),R=fr.Pop,I=!1,O=!1,D=!1,N=!1,j=[],W=[]}async function pe(ee,ne){if(typeof ee=="number"){t.history.go(ee);return}let ce=RP(C.location,C.matches,l,c.v7_prependBasename,ee,c.v7_relativeSplatPath,ne==null?void 0:ne.fromRouteId,ne==null?void 0:ne.relative),{path:De,submission:Ge,error:vt}=Y3(c.v7_normalizeFormMethod,!1,ce,ne),ut=C.location,ht=Hm(C.location,De,ne&&ne.state);ht=sr({},ht,t.history.encodeLocation(ht));let Je=ne&&ne.replace!=null?ne.replace:void 0,Lt=fr.Push;Je===!0?Lt=fr.Replace:Je===!1||Ge!=null&&Wo(Ge.formMethod)&&Ge.formAction===C.location.pathname+C.location.search&&(Lt=fr.Replace);let an=ne&&"preventScrollReset"in ne?ne.preventScrollReset===!0:void 0,gt=(ne&&ne.unstable_flushSync)===!0,Ct=on({currentLocation:ut,nextLocation:ht,historyAction:Lt});if(Ct){Ht(Ct,{state:"blocked",location:ht,proceed(){Ht(Ct,{state:"proceeding",proceed:void 0,reset:void 0,location:ht}),pe(ee,ne)},reset(){let ln=new Map(C.blockers);ln.set(Ct,qp),oe({blockers:ln})}});return}return await we(Lt,ht,{submission:Ge,pendingError:vt,preventScrollReset:an,replace:ne&&ne.replace,enableViewTransition:ne&&ne.unstable_viewTransition,flushSync:gt})}function Ce(){if(Mt(),oe({revalidation:"loading"}),C.navigation.state!=="submitting"){if(C.navigation.state==="idle"){we(C.historyAction,C.location,{startUninterruptedRevalidation:!0});return}we(R||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation})}}async function we(ee,ne,ce){L&&L.abort(),L=null,R=ee,D=(ce&&ce.startUninterruptedRevalidation)===!0,pa(C.location,C.matches),I=(ce&&ce.preventScrollReset)===!0,O=(ce&&ce.enableViewTransition)===!0;let De=a||o,Ge=ce&&ce.overrideNavigation,vt=Zd(De,ne,l),ut=(ce&&ce.flushSync)===!0;if(!vt){let ln=oo(404,{pathname:ne.pathname}),{matches:Fn,route:tn}=tD(De);Nr(),_e(ne,{matches:Fn,loaderData:{},errors:{[tn.id]:ln}},{flushSync:ut});return}if(C.initialized&&!N&&$K(C.location,ne)&&!(ce&&ce.submission&&Wo(ce.submission.formMethod))){_e(ne,{matches:vt},{flushSync:ut});return}L=new AbortController;let ht=Zp(t.history,ne,L.signal,ce&&ce.submission),Je,Lt;if(ce&&ce.pendingError)Lt={[im(vt).route.id]:ce.pendingError};else if(ce&&ce.submission&&Wo(ce.submission.formMethod)){let ln=await Ye(ht,ne,ce.submission,vt,{replace:ce.replace,flushSync:ut});if(ln.shortCircuited)return;Je=ln.pendingActionData,Lt=ln.pendingActionError,Ge=kT(ne,ce.submission),ut=!1,ht=new Request(ht.url,{signal:ht.signal})}let{shortCircuited:an,loaderData:gt,errors:Ct}=await ke(ht,ne,vt,Ge,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,ut,Je,Lt);an||(L=null,_e(ne,sr({matches:vt},Je?{actionData:Je}:{},{loaderData:gt,errors:Ct})))}async function Ye(ee,ne,ce,De,Ge){Ge===void 0&&(Ge={}),Mt();let vt=VK(ne,ce);oe({navigation:vt},{flushSync:Ge.flushSync===!0});let ut,ht=MP(De,ne);if(!ht.route.action&&!ht.route.lazy)ut={type:rr.error,error:oo(405,{method:ee.method,pathname:ne.pathname,routeId:ht.route.id})};else if(ut=await Kp("action",ee,ht,De,s,i,l,c.v7_relativeSplatPath),ee.signal.aborted)return{shortCircuited:!0};if(Ku(ut)){let Je;return Ge&&Ge.replace!=null?Je=Ge.replace:Je=ut.location===C.location.pathname+C.location.search,await He(C,ut,{submission:ce,replace:Je}),{shortCircuited:!0}}if(Qd(ut)){let Je=im(De,ht.route.id);return(Ge&&Ge.replace)!==!0&&(R=fr.Push),{pendingActionData:{},pendingActionError:{[Je.route.id]:ut.error}}}if(qu(ut))throw oo(400,{type:"defer-action"});return{pendingActionData:{[ht.route.id]:ut.data}}}async function ke(ee,ne,ce,De,Ge,vt,ut,ht,Je,Lt,an){let gt=De||kT(ne,Ge),Ct=Ge||vt||iD(gt),ln=a||o,[Fn,tn]=q3(t.history,C,ce,Ct,ne,c.v7_partialHydration&&ht===!0,N,j,W,de,se,Z,ln,l,Lt,an);if(Nr(At=>!(ce&&ce.some(bn=>bn.route.id===At))||Fn&&Fn.some(bn=>bn.route.id===At)),X=++U,Fn.length===0&&tn.length===0){let At=wt();return _e(ne,sr({matches:ce,loaderData:{},errors:an||null},Lt?{actionData:Lt}:{},At?{fetchers:new Map(C.fetchers)}:{}),{flushSync:Je}),{shortCircuited:!0}}if(!D&&(!c.v7_partialHydration||!ht)){tn.forEach(bn=>{let Zr=C.fetchers.get(bn.key),Xn=Qp(void 0,Zr?Zr.data:void 0);C.fetchers.set(bn.key,Xn)});let At=Lt||C.actionData;oe(sr({navigation:gt},At?Object.keys(At).length===0?{actionData:null}:{actionData:At}:{},tn.length>0?{fetchers:new Map(C.fetchers)}:{}),{flushSync:Je})}tn.forEach(At=>{V.has(At.key)&&Le(At.key),At.controller&&V.set(At.key,At.controller)});let Pr=()=>tn.forEach(At=>Le(At.key));L&&L.signal.addEventListener("abort",Pr);let{results:ds,loaderResults:Zt,fetcherResults:Jt}=await fn(C.matches,ce,Fn,tn,ee);if(ee.signal.aborted)return{shortCircuited:!0};L&&L.signal.removeEventListener("abort",Pr),tn.forEach(At=>V.delete(At.key));let vr=nD(ds);if(vr){if(vr.idx>=Fn.length){let At=tn[vr.idx-Fn.length].key;Z.add(At)}return await He(C,vr.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:br,errors:Wn}=J3(C,ce,Fn,Zt,an,tn,Jt,Me);Me.forEach((At,bn)=>{At.subscribe(Zr=>{(Zr||At.done)&&Me.delete(bn)})});let fs=wt(),Mi=Ot(X),Et=fs||Mi||tn.length>0;return sr({loaderData:br,errors:Wn},Et?{fetchers:new Map(C.fetchers)}:{})}function Oe(ee,ne,ce,De){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");V.has(ee)&&Le(ee);let Ge=(De&&De.unstable_flushSync)===!0,vt=a||o,ut=RP(C.location,C.matches,l,c.v7_prependBasename,ce,c.v7_relativeSplatPath,ne,De==null?void 0:De.relative),ht=Zd(vt,ut,l);if(!ht){Te(ee,ne,oo(404,{pathname:ut}),{flushSync:Ge});return}let{path:Je,submission:Lt,error:an}=Y3(c.v7_normalizeFormMethod,!0,ut,De);if(an){Te(ee,ne,an,{flushSync:Ge});return}let gt=MP(ht,Je);if(I=(De&&De.preventScrollReset)===!0,Lt&&Wo(Lt.formMethod)){rt(ee,ne,Je,gt,ht,Ge,Lt);return}se.set(ee,{routeId:ne,path:Je}),qe(ee,ne,Je,gt,ht,Ge,Lt)}async function rt(ee,ne,ce,De,Ge,vt,ut){if(Mt(),se.delete(ee),!De.route.action&&!De.route.lazy){let bn=oo(405,{method:ut.formMethod,pathname:ce,routeId:ne});Te(ee,ne,bn,{flushSync:vt});return}let ht=C.fetchers.get(ee);pt(ee,WK(ut,ht),{flushSync:vt});let Je=new AbortController,Lt=Zp(t.history,ce,Je.signal,ut);V.set(ee,Je);let an=U,gt=await Kp("action",Lt,De,Ge,s,i,l,c.v7_relativeSplatPath);if(Lt.signal.aborted){V.get(ee)===Je&&V.delete(ee);return}if(c.v7_fetcherPersist&&de.has(ee)){if(Ku(gt)||Qd(gt)){pt(ee,vc(void 0));return}}else{if(Ku(gt))if(V.delete(ee),X>an){pt(ee,vc(void 0));return}else return Z.add(ee),pt(ee,Qp(ut)),He(C,gt,{fetcherSubmission:ut});if(Qd(gt)){Te(ee,ne,gt.error);return}}if(qu(gt))throw oo(400,{type:"defer-action"});let Ct=C.navigation.location||C.location,ln=Zp(t.history,Ct,Je.signal),Fn=a||o,tn=C.navigation.state!=="idle"?Zd(Fn,C.navigation.location,l):C.matches;Yt(tn,"Didn't find any matches after fetcher action");let Pr=++U;Y.set(ee,Pr);let ds=Qp(ut,gt.data);C.fetchers.set(ee,ds);let[Zt,Jt]=q3(t.history,C,tn,ut,Ct,!1,N,j,W,de,se,Z,Fn,l,{[De.route.id]:gt.data},void 0);Jt.filter(bn=>bn.key!==ee).forEach(bn=>{let Zr=bn.key,Xn=C.fetchers.get(Zr),Ys=Qp(void 0,Xn?Xn.data:void 0);C.fetchers.set(Zr,Ys),V.has(Zr)&&Le(Zr),bn.controller&&V.set(Zr,bn.controller)}),oe({fetchers:new Map(C.fetchers)});let vr=()=>Jt.forEach(bn=>Le(bn.key));Je.signal.addEventListener("abort",vr);let{results:br,loaderResults:Wn,fetcherResults:fs}=await fn(C.matches,tn,Zt,Jt,ln);if(Je.signal.aborted)return;Je.signal.removeEventListener("abort",vr),Y.delete(ee),V.delete(ee),Jt.forEach(bn=>V.delete(bn.key));let Mi=nD(br);if(Mi){if(Mi.idx>=Zt.length){let bn=Jt[Mi.idx-Zt.length].key;Z.add(bn)}return He(C,Mi.result)}let{loaderData:Et,errors:At}=J3(C,C.matches,Zt,Wn,void 0,Jt,fs,Me);if(C.fetchers.has(ee)){let bn=vc(gt.data);C.fetchers.set(ee,bn)}Ot(Pr),C.navigation.state==="loading"&&Pr>X?(Yt(R,"Expected pending action"),L&&L.abort(),_e(C.navigation.location,{matches:tn,loaderData:Et,errors:At,fetchers:new Map(C.fetchers)})):(oe({errors:At,loaderData:eD(C.loaderData,Et,tn,At),fetchers:new Map(C.fetchers)}),N=!1)}async function qe(ee,ne,ce,De,Ge,vt,ut){let ht=C.fetchers.get(ee);pt(ee,Qp(ut,ht?ht.data:void 0),{flushSync:vt});let Je=new AbortController,Lt=Zp(t.history,ce,Je.signal);V.set(ee,Je);let an=U,gt=await Kp("loader",Lt,De,Ge,s,i,l,c.v7_relativeSplatPath);if(qu(gt)&&(gt=await c$(gt,Lt.signal,!0)||gt),V.get(ee)===Je&&V.delete(ee),!Lt.signal.aborted){if(de.has(ee)){pt(ee,vc(void 0));return}if(Ku(gt))if(X>an){pt(ee,vc(void 0));return}else{Z.add(ee),await He(C,gt);return}if(Qd(gt)){Te(ee,ne,gt.error);return}Yt(!qu(gt),"Unhandled fetcher deferred data"),pt(ee,vc(gt.data))}}async function He(ee,ne,ce){let{submission:De,fetcherSubmission:Ge,replace:vt}=ce===void 0?{}:ce;ne.revalidate&&(N=!0);let ut=Hm(ee.location,ne.location,{_isRedirect:!0});if(Yt(ut,"Expected a location on the redirect navigation"),n){let Ct=!1;if(ne.reloadDocument)Ct=!0;else if(s$.test(ne.location)){const ln=t.history.createURL(ne.location);Ct=ln.origin!==e.location.origin||O0(ln.pathname,l)==null}if(Ct){vt?e.location.replace(ne.location):e.location.assign(ne.location);return}}L=null;let ht=vt===!0?fr.Replace:fr.Push,{formMethod:Je,formAction:Lt,formEncType:an}=ee.navigation;!De&&!Ge&&Je&&Lt&&an&&(De=iD(ee.navigation));let gt=De||Ge;if(LK.has(ne.status)&&gt&&Wo(gt.formMethod))await we(ht,ut,{submission:sr({},gt,{formAction:ne.location}),preventScrollReset:I});else{let Ct=kT(ut,De);await we(ht,ut,{overrideNavigation:Ct,fetcherSubmission:Ge,preventScrollReset:I})}}async function fn(ee,ne,ce,De,Ge){let vt=await Promise.all([...ce.map(Je=>Kp("loader",Ge,Je,ne,s,i,l,c.v7_relativeSplatPath)),...De.map(Je=>Je.matches&&Je.match&&Je.controller?Kp("loader",Zp(t.history,Je.path,Je.controller.signal),Je.match,Je.matches,s,i,l,c.v7_relativeSplatPath):{type:rr.error,error:oo(404,{pathname:Je.path})})]),ut=vt.slice(0,ce.length),ht=vt.slice(ce.length);return await Promise.all([rD(ee,ce,ut,ut.map(()=>Ge.signal),!1,C.loaderData),rD(ee,De.map(Je=>Je.match),ht,De.map(Je=>Je.controller?Je.controller.signal:null),!0)]),{results:vt,loaderResults:ut,fetcherResults:ht}}function Mt(){N=!0,j.push(...Nr()),se.forEach((ee,ne)=>{V.has(ne)&&(W.push(ne),Le(ne))})}function pt(ee,ne,ce){ce===void 0&&(ce={}),C.fetchers.set(ee,ne),oe({fetchers:new Map(C.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Te(ee,ne,ce,De){De===void 0&&(De={});let Ge=im(C.matches,ne);Ke(ee),oe({errors:{[Ge.route.id]:ce},fetchers:new Map(C.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function Ne(ee){return c.v7_fetcherPersist&&(xe.set(ee,(xe.get(ee)||0)+1),de.has(ee)&&de.delete(ee)),C.fetchers.get(ee)||kK}function Ke(ee){let ne=C.fetchers.get(ee);V.has(ee)&&!(ne&&ne.state==="loading"&&Y.has(ee))&&Le(ee),se.delete(ee),Y.delete(ee),Z.delete(ee),de.delete(ee),C.fetchers.delete(ee)}function je(ee){if(c.v7_fetcherPersist){let ne=(xe.get(ee)||0)-1;ne<=0?(xe.delete(ee),de.add(ee)):xe.set(ee,ne)}else Ke(ee);oe({fetchers:new Map(C.fetchers)})}function Le(ee){let ne=V.get(ee);Yt(ne,"Expected fetch controller: "+ee),ne.abort(),V.delete(ee)}function kt(ee){for(let ne of ee){let ce=Ne(ne),De=vc(ce.data);C.fetchers.set(ne,De)}}function wt(){let ee=[],ne=!1;for(let ce of Z){let De=C.fetchers.get(ce);Yt(De,"Expected fetcher: "+ce),De.state==="loading"&&(Z.delete(ce),ee.push(ce),ne=!0)}return kt(ee),ne}function Ot(ee){let ne=[];for(let[ce,De]of Y)if(De<ee){let Ge=C.fetchers.get(ce);Yt(Ge,"Expected fetcher: "+ce),Ge.state==="loading"&&(Le(ce),Y.delete(ce),ne.push(ce))}return kt(ne),ne.length>0}function Fe(ee,ne){let ce=C.blockers.get(ee)||qp;return he.get(ee)!==ne&&he.set(ee,ne),ce}function St(ee){C.blockers.delete(ee),he.delete(ee)}function Ht(ee,ne){let ce=C.blockers.get(ee)||qp;Yt(ce.state==="unblocked"&&ne.state==="blocked"||ce.state==="blocked"&&ne.state==="blocked"||ce.state==="blocked"&&ne.state==="proceeding"||ce.state==="blocked"&&ne.state==="unblocked"||ce.state==="proceeding"&&ne.state==="unblocked","Invalid blocker state transition: "+ce.state+" -> "+ne.state);let De=new Map(C.blockers);De.set(ee,ne),oe({blockers:De})}function on(ee){let{currentLocation:ne,nextLocation:ce,historyAction:De}=ee;if(he.size===0)return;he.size>1&&eu(!1,"A router only supports one blocker at a time");let Ge=Array.from(he.entries()),[vt,ut]=Ge[Ge.length-1],ht=C.blockers.get(vt);if(!(ht&&ht.state==="proceeding")&&ut({currentLocation:ne,nextLocation:ce,historyAction:De}))return vt}function Nr(ee){let ne=[];return Me.forEach((ce,De)=>{(!ee||ee(De))&&(ce.cancel(),ne.push(De),Me.delete(De))}),ne}function Vi(ee,ne,ce){if(f=ee,m=ne,g=ce||null,!y&&C.navigation===LT){y=!0;let De=Xs(C.location,C.matches);De!=null&&oe({restoreScrollPosition:De})}return()=>{f=null,m=null,g=null}}function Mo(ee,ne){return g&&g(ee,ne.map(De=>cK(De,C.loaderData)))||ee.key}function pa(ee,ne){if(f&&m){let ce=Mo(ee,ne);f[ce]=m()}}function Xs(ee,ne){if(f){let ce=Mo(ee,ne),De=f[ce];if(typeof De=="number")return De}return null}function hs(ee){s={},a=AP(ee,i,void 0,s)}return S={get basename(){return l},get future(){return c},get state(){return C},get routes(){return o},get window(){return e},initialize:le,subscribe:me,enableScrollRestoration:Vi,navigate:pe,fetch:Oe,revalidate:Ce,createHref:ee=>t.history.createHref(ee),encodeLocation:ee=>t.history.encodeLocation(ee),getFetcher:Ne,deleteFetcher:je,dispose:ae,getBlocker:Fe,deleteBlocker:St,_internalFetchControllers:V,_internalActiveDeferreds:Me,_internalSetRoutes:hs},S}function FK(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function RP(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let u=n$(i||".",t$(l,s),O0(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!tI(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Hc([n,u.pathname])),M0(u)}function Y3(t,e,n,r){if(!r||!FK(r))return{path:n};if(r.formMethod&&!HK(r.formMethod))return{path:n,error:oo(405,{method:r.formMethod})};let i=()=>({path:n,error:oo(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=l$(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Wo(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,m)=>{let[y,x]=m;return""+g+y+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Wo(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Yt(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=IP(r.formData),c=r.formData;else if(r.body instanceof FormData)l=IP(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Q3(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Q3(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Wo(u.formMethod))return{path:n,submission:u};let h=il(n);return e&&h.search&&tI(h.search)&&l.append("index",""),h.search="?"+l,{path:M0(h),submission:u}}function BK(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function q3(t,e,n,r,i,s,o,a,l,c,u,h,f,g,m,y){let x=y?Object.values(y)[0]:m?Object.values(m)[0]:void 0,b=t.createURL(e.location),w=t.createURL(i),v=y?Object.keys(y)[0]:void 0,S=BK(n,v).filter((R,I)=>{let{route:L}=R;if(L.lazy)return!0;if(L.loader==null)return!1;if(s)return L.loader.hydrate?!0:e.loaderData[L.id]===void 0&&(!e.errors||e.errors[L.id]===void 0);if(zK(e.loaderData,e.matches[I],R)||a.some(M=>M===R.route.id))return!0;let O=e.matches[I],B=R;return K3(R,sr({currentUrl:b,currentParams:O.params,nextUrl:w,nextParams:B.params},r,{actionResult:x,defaultShouldRevalidate:o||b.pathname+b.search===w.pathname+w.search||b.search!==w.search||a$(O,B)}))}),C=[];return u.forEach((R,I)=>{if(s||!n.some(D=>D.route.id===R.routeId)||c.has(I))return;let L=Zd(f,R.path,g);if(!L){C.push({key:I,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let O=e.fetchers.get(I),B=MP(L,R.path),M=!1;h.has(I)?M=!1:l.includes(I)?M=!0:O&&O.state!=="idle"&&O.data===void 0?M=o:M=K3(B,sr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:x,defaultShouldRevalidate:o})),M&&C.push({key:I,routeId:R.routeId,path:R.path,matches:L,match:B,controller:new AbortController})}),[S,C]}function zK(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function a$(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function K3(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Z3(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Yt(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";eu(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!aK.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,sr({},e(i),{lazy:void 0}))}async function Kp(t,e,n,r,i,s,o,a,l){l===void 0&&(l={});let c,u,h,f=y=>{let x,b=new Promise((w,v)=>x=v);return h=()=>x(),e.signal.addEventListener("abort",h),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let x,b=await Promise.all([f(y).catch(w=>{x=w}),Z3(n.route,s,i)]);if(x)throw x;u=b[0]}else if(await Z3(n.route,s,i),y=n.route[t],y)u=await f(y);else if(t==="action"){let x=new URL(e.url),b=x.pathname+x.search;throw oo(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:rr.data,data:void 0};else if(y)u=await f(y);else{let x=new URL(e.url),b=x.pathname+x.search;throw oo(404,{pathname:b})}Yt(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){c=rr.error,u=y}finally{h&&e.signal.removeEventListener("abort",h)}if(GK(u)){let y=u.status;if(OK.has(y)){let b=u.headers.get("Location");if(Yt(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!s$.test(b))b=RP(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,a);else if(!l.isStaticRequest){let w=new URL(e.url),v=b.startsWith("//")?new URL(w.protocol+b):new URL(b),E=O0(v.pathname,o)!=null;v.origin===w.origin&&E&&(b=v.pathname+v.search+v.hash)}if(l.isStaticRequest)throw u.headers.set("Location",b),u;return{type:rr.redirect,status:y,location:b,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===rr.error?rr.error:rr.data,response:u};let x;try{let b=u.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?u.body==null?x=null:x=await u.json():x=await u.text()}catch(b){return{type:rr.error,error:b}}return c===rr.error?{type:c,error:new eI(y,u.statusText,x),headers:u.headers}:{type:rr.data,data:x,statusCode:u.status,headers:u.headers}}if(c===rr.error)return{type:c,error:u};if(jK(u)){var g,m;return{type:rr.deferred,deferredData:u,statusCode:(g=u.init)==null?void 0:g.status,headers:((m=u.init)==null?void 0:m.headers)&&new Headers(u.init.headers)}}return{type:rr.data,data:u}}function Zp(t,e,n,r){let i=t.createURL(l$(e)).toString(),s={signal:n};if(r&&Wo(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=IP(r.formData):s.body=r.formData}return new Request(i,s)}function IP(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Q3(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function UK(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,h)=>{let f=e[h].route.id;if(Yt(!Ku(u),"Cannot handle redirect results in processLoaderData"),Qd(u)){let g=im(t,f),m=u.error;r&&(m=Object.values(r)[0],r=void 0),o=o||{},o[g.route.id]==null&&(o[g.route.id]=m),s[f]=void 0,l||(l=!0,a=r$(u.error)?u.error.status:500),u.headers&&(c[f]=u.headers)}else qu(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function J3(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=UK(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:h,match:f,controller:g}=s[u];Yt(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let m=o[u];if(!(g&&g.signal.aborted))if(Qd(m)){let y=im(t.matches,f==null?void 0:f.route.id);c&&c[y.route.id]||(c=sr({},c,{[y.route.id]:m.error})),t.fetchers.delete(h)}else if(Ku(m))Yt(!1,"Unhandled fetcher revalidation redirect");else if(qu(m))Yt(!1,"Unhandled fetcher deferred data");else{let y=vc(m.data);t.fetchers.set(h,y)}}return{loaderData:l,errors:c}}function eD(t,e,n,r){let i=sr({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function im(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function tD(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function oo(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new eI(t||500,o,new Error(a),!0)}function nD(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ku(n))return{result:n,idx:e}}}function l$(t){let e=typeof t=="string"?il(t):t;return M0(sr({},e,{hash:""}))}function $K(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function qu(t){return t.type===rr.deferred}function Qd(t){return t.type===rr.error}function Ku(t){return(t&&t.type)===rr.redirect}function jK(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function GK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function HK(t){return MK.has(t.toLowerCase())}function Wo(t){return RK.has(t.toLowerCase())}async function rD(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(h=>h.route.id===l.route.id),u=c!=null&&!a$(c,l)&&(s&&s[l.route.id])!==void 0;if(qu(a)&&(i||u)){let h=r[o];Yt(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await c$(a,h,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function c$(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:rr.data,data:t.deferredData.unwrappedData}}catch(i){return{type:rr.error,error:i}}return{type:rr.data,data:t.deferredData.data}}}function tI(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function MP(t,e){let n=typeof e=="string"?il(e).search:e.search;if(t[t.length-1].route.index&&tI(n||""))return t[t.length-1];let r=e$(t);return r[r.length-1]}function iD(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function kT(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function VK(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Qp(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function WK(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function vc(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function XK(t,e){try{let n=t.sessionStorage.getItem(o$);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function YK(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(o$,JSON.stringify(n))}catch(r){eu(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vm.apply(this,arguments)}const Lx=P.createContext(null),u$=P.createContext(null),kx=P.createContext(null),Dx=P.createContext(null),dp=P.createContext({outlet:null,matches:[],isDataRoute:!1}),h$=P.createContext(null);function Nx(){return P.useContext(Dx)!=null}function d$(){return Nx()||Yt(!1),P.useContext(Dx).location}function f$(t){P.useContext(kx).static||P.useLayoutEffect(t)}function nI(){let{isDataRoute:t}=P.useContext(dp);return t?sZ():qK()}function qK(){Nx()||Yt(!1);let t=P.useContext(Lx),{basename:e,future:n,navigator:r}=P.useContext(kx),{matches:i}=P.useContext(dp),{pathname:s}=d$(),o=JSON.stringify(t$(i,n.v7_relativeSplatPath)),a=P.useRef(!1);return f$(()=>{a.current=!0}),P.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=n$(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Hc([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function KK(t,e,n,r){Nx()||Yt(!1);let{navigator:i}=P.useContext(kx),{matches:s}=P.useContext(dp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=d$(),u;if(e){var h;let x=typeof e=="string"?il(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||Yt(!1),u=x}else u=c;let f=u.pathname||"/",g=l==="/"?f:f.slice(l.length)||"/",m=Zd(t,{pathname:g}),y=tZ(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Hc([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Hc([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&y?P.createElement(Dx.Provider,{value:{location:Vm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:fr.Pop}},y):y}function ZK(){let t=iZ(),e=r$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,null)}const QK=P.createElement(ZK,null);class JK extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(dp.Provider,{value:this.props.routeContext},P.createElement(h$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eZ(t){let{routeContext:e,match:n,children:r}=t,i=P.useContext(Lx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(dp.Provider,{value:e},r)}function tZ(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||Yt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:g}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let g,m=!1,y=null,x=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||QK,l&&(c<0&&f===0?(oZ("route-fallback",!1),m=!0,x=null):c===f&&(m=!0,x=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),w=()=>{let v;return g?v=y:m?v=x:h.route.Component?v=P.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,P.createElement(eZ,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?P.createElement(JK,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var p$=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(p$||{}),If=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(If||{});function nZ(t){let e=P.useContext(Lx);return e||Yt(!1),e}function g$(t){let e=P.useContext(u$);return e||Yt(!1),e}function rZ(t){let e=P.useContext(dp);return e||Yt(!1),e}function rI(t){let e=rZ(),n=e.matches[e.matches.length-1];return n.route.id||Yt(!1),n.route.id}function L0(){let t=g$(If.UseLoaderData),e=rI(If.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function iZ(){var t;let e=P.useContext(h$),n=g$(If.UseRouteError),r=rI(If.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sZ(){let{router:t}=nZ(p$.UseNavigateStable),e=rI(If.UseNavigateStable),n=P.useRef(!1);return f$(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vm({fromRouteId:e},s)))},[t,e])}const sD={};function oZ(t,e,n){!e&&!sD[t]&&(sD[t]=!0)}function aZ(t){let{basename:e="/",children:n=null,location:r,navigationType:i=fr.Pop,navigator:s,static:o=!1,future:a}=t;Nx()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:s,static:o,future:Vm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=il(r));let{pathname:u="/",search:h="",hash:f="",state:g=null,key:m="default"}=r,y=P.useMemo(()=>{let x=O0(u,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:g,key:m},navigationType:i}},[l,u,h,f,g,m,i]);return y==null?null:P.createElement(kx.Provider,{value:c},P.createElement(Dx.Provider,{children:n,value:y}))}new Promise(()=>{});function lZ(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:P.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:P.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:P.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vb.apply(this,arguments)}function cZ(t,e){return NK({basename:e==null?void 0:e.basename,future:Vb({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:iK({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||uZ(),routes:t,mapRouteProperties:lZ,window:e==null?void 0:e.window}).initialize()}function uZ(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Vb({},e,{errors:hZ(e.errors)})),e}function hZ(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new eI(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const dZ=P.createContext({isTransitioning:!1}),fZ=P.createContext(new Map),pZ="startTransition",oD=bb[pZ],gZ="flushSync",aD=rK[gZ];function mZ(t){oD?oD(t):t()}function Jp(t){aD?aD(t):t()}class yZ{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function vZ(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=P.useState(n.state),[o,a]=P.useState(),[l,c]=P.useState({isTransitioning:!1}),[u,h]=P.useState(),[f,g]=P.useState(),[m,y]=P.useState(),x=P.useRef(new Map),{v7_startTransition:b}=r||{},w=P.useCallback(R=>{b?mZ(R):R()},[b]),v=P.useCallback((R,I)=>{let{deletedFetchers:L,unstable_flushSync:O,unstable_viewTransitionOpts:B}=I;L.forEach(D=>x.current.delete(D)),R.fetchers.forEach((D,N)=>{D.data!==void 0&&x.current.set(N,D.data)});let M=n.window==null||typeof n.window.document.startViewTransition!="function";if(!B||M){O?Jp(()=>s(R)):w(()=>s(R));return}if(O){Jp(()=>{f&&(u&&u.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let D=n.window.document.startViewTransition(()=>{Jp(()=>s(R))});D.finished.finally(()=>{Jp(()=>{h(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),Jp(()=>g(D));return}f?(u&&u.resolve(),f.skipTransition(),y({state:R,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(a(R),c({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[n.window,f,u,x,w]);P.useLayoutEffect(()=>n.subscribe(v),[n,v]),P.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new yZ)},[l]),P.useEffect(()=>{if(u&&o&&n.window){let R=o,I=u.promise,L=n.window.document.startViewTransition(async()=>{w(()=>s(R)),await I});L.finished.finally(()=>{h(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(L)}},[w,o,u,n.window]),P.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),P.useEffect(()=>{!l.isTransitioning&&m&&(a(m.state),c({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),y(void 0))},[l.isTransitioning,m]),P.useEffect(()=>{},[]);let E=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,I,L)=>n.navigate(R,{state:I,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(R,I,L)=>n.navigate(R,{replace:!0,state:I,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[n]),S=n.basename||"/",C=P.useMemo(()=>({router:n,navigator:E,static:!1,basename:S}),[n,E,S]);return P.createElement(P.Fragment,null,P.createElement(Lx.Provider,{value:C},P.createElement(u$.Provider,{value:i},P.createElement(fZ.Provider,{value:x.current},P.createElement(dZ.Provider,{value:l},P.createElement(aZ,{basename:S,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?P.createElement(bZ,{routes:n.routes,future:n.future,state:i}):e))))),null)}function bZ(t){let{routes:e,future:n,state:r}=t;return KK(e,void 0,r,n)}var lD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lD||(lD={}));var cD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cD||(cD={}));var m$,uD=Vl;m$=uD.createRoot,uD.hydrateRoot;var Or={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let _Z=0;function k0(t,e){const n=`atom${++_Z}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=xZ,r.write=wZ),e&&(r.write=e),r}function xZ(t){return t(this)}function wZ(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const wv=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,DT=t=>"init"in t,NT=t=>!!t.write,Wb=new WeakMap,EZ=(t,e)=>{Wb.set(t,e),t.catch(()=>{}).finally(()=>Wb.delete(t))},hD=(t,e)=>{const n=Wb.get(t);n&&(Wb.delete(t),n(e))},dD=(t,e)=>{t.status="fulfilled",t.value=e},fD=(t,e)=>{t.status="rejected",t.reason=e},TZ=t=>typeof(t==null?void 0:t.then)=="function",eg=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),pD=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),id=t=>!!t&&"v"in t&&t.v instanceof Promise,SZ=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Ev=t=>{if("e"in t)throw t.e;return t.v},CZ=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(Or?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=I=>t.get(I),o=(I,L)=>{(Or?"production":void 0)!=="production"&&Object.freeze(L);const O=t.get(I);if(t.set(I,L),n.has(I)||n.set(I,O),id(O)){const B="v"in L?L.v instanceof Promise?L.v:Promise.resolve(L.v):Promise.reject(L.e);O.v!==B&&hD(O.v,B)}},a=(I,L,O,B)=>{const M=new Map(B?L.d:null);let D=!1;O.forEach((N,j)=>{!N&&wv(I,j)&&(N=L),N?(M.set(j,N),L.d.get(j)!==N&&(D=!0)):(Or?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(D||L.d.size!==M.size)&&(L.d=M)},l=(I,L,O,B)=>{const M=s(I),D={d:(M==null?void 0:M.d)||new Map,v:L};if(O&&a(I,D,O,B),eg(M,D)&&M.d===D.d)return M;if(id(M)&&id(D)&&SZ(M,D)){if(M.d===D.d)return M;D.v=M.v}return o(I,D),D},c=(I,L,O,B)=>{if(TZ(L)){let M;const D=()=>{const j=s(I);if(!id(j)||j.v!==N)return;const W=l(I,N,O);e.has(I)&&j.d!==W.d&&S(I,W,j.d)},N=new Promise((j,W)=>{let V=!1;L.then(U=>{V||(V=!0,dD(N,U),j(U),D())},U=>{V||(V=!0,fD(N,U),W(U),D())}),M=U=>{V||(V=!0,U.then(X=>dD(N,X),X=>fD(N,X)),j(U))}});return N.orig=L,N.status="pending",EZ(N,j=>{j&&M(j),B==null||B()}),l(I,N,O,!0)}return l(I,L,O)},u=(I,L,O)=>{const B=s(I),M={d:(B==null?void 0:B.d)||new Map,e:L};return O&&a(I,M,O),pD(B,M)&&B.d===M.d?B:(o(I,M),M)},h=(I,L)=>{const O=s(I);if(!L&&O&&(e.has(I)||Array.from(O.d).every(([V,U])=>{if(wv(I,V))return!0;const X=h(V);return X===U||eg(X,U)})))return O;const B=new Map;let M=!0;const D=V=>{if(wv(I,V)){const X=s(V);if(X)return B.set(V,X),Ev(X);if(DT(V))return B.set(V,void 0),V.init;throw new Error("no atom init")}const U=h(V);return B.set(V,U),Ev(U)};let N,j;const W={get signal(){return N||(N=new AbortController),N.signal},get setSelf(){return(Or?"production":void 0)!=="production"&&!NT(I)&&console.warn("setSelf function cannot be used with read-only atom"),!j&&NT(I)&&(j=(...V)=>{if((Or?"production":void 0)!=="production"&&M&&console.warn("setSelf function cannot be called in sync"),!M)return w(I,...V)}),j}};try{const V=I.read(D,W);return c(I,V,B,()=>N==null?void 0:N.abort())}catch(V){return u(I,V,B)}finally{M=!1}},f=I=>Ev(h(I)),g=I=>{let L=e.get(I);return L||(L=v(I)),L},m=(I,L)=>!L.l.size&&(!L.t.size||L.t.size===1&&L.t.has(I)),y=I=>{const L=e.get(I);L&&m(I,L)&&E(I)},x=I=>{const L=new Map,O=new WeakMap,B=N=>{var j;const W=new Set((j=e.get(N))==null?void 0:j.t);return n.forEach((V,U)=>{var X;(X=s(U))!=null&&X.d.has(N)&&W.add(U)}),W},M=N=>{B(N).forEach(j=>{j!==N&&(L.set(j,(L.get(j)||new Set).add(N)),O.set(j,(O.get(j)||0)+1),M(j))})};M(I);const D=N=>{B(N).forEach(j=>{var W;if(j!==N){let V=O.get(j);if(V&&O.set(j,--V),!V){let U=!!((W=L.get(j))!=null&&W.size);if(U){const X=s(j),Y=h(j,!0);U=!eg(X,Y)}U||L.forEach(X=>X.delete(j))}D(j)}})};D(I)},b=(I,...L)=>{let O=!0;const B=N=>Ev(h(N)),M=(N,...j)=>{let W;if(wv(I,N)){if(!DT(N))throw new Error("atom not writable");const V=s(N),U=c(N,j[0]);eg(V,U)||x(N)}else W=b(N,...j);if(!O){const V=C();(Or?"production":void 0)!=="production"&&r.forEach(U=>U({type:"async-write",flushed:V}))}return W},D=I.write(B,M,...L);return O=!1,D},w=(I,...L)=>{const O=b(I,...L),B=C();return(Or?"production":void 0)!=="production"&&r.forEach(M=>M({type:"write",flushed:B})),O},v=(I,L,O)=>{var B;const M=O||[];(B=s(I))==null||B.d.forEach((N,j)=>{const W=e.get(j);W?W.t.add(I):j!==I&&v(j,I,M)}),h(I);const D={t:new Set(L&&[L]),l:new Set};if(e.set(I,D),(Or?"production":void 0)!=="production"&&i.add(I),NT(I)&&I.onMount){const{onMount:N}=I;M.push(()=>{const j=N((...W)=>w(I,...W));j&&(D.u=j)})}return O||M.forEach(N=>N()),D},E=I=>{var L;const O=(L=e.get(I))==null?void 0:L.u;O&&O(),e.delete(I),(Or?"production":void 0)!=="production"&&i.delete(I);const B=s(I);B?(id(B)&&hD(B.v),B.d.forEach((M,D)=>{if(D!==I){const N=e.get(D);N&&(N.t.delete(I),m(D,N)&&E(D))}})):(Or?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",I)},S=(I,L,O)=>{const B=new Set(L.d.keys()),M=new Set;O==null||O.forEach((D,N)=>{if(B.has(N)){B.delete(N);return}M.add(N);const j=e.get(N);j&&j.t.delete(I)}),B.forEach(D=>{const N=e.get(D);N?N.t.add(I):e.has(I)&&v(D,I)}),M.forEach(D=>{const N=e.get(D);N&&m(D,N)&&E(D)})},C=()=>{let I;for((Or?"production":void 0)!=="production"&&(I=new Set);n.size;){const L=Array.from(n);n.clear(),L.forEach(([O,B])=>{const M=s(O);if(M){const D=e.get(O);D&&M.d!==(B==null?void 0:B.d)&&S(O,M,B==null?void 0:B.d),D&&!(!id(B)&&(eg(B,M)||pD(B,M)))&&(D.l.forEach(N=>N()),(Or?"production":void 0)!=="production"&&I.add(O))}else(Or?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((Or?"production":void 0)!=="production")return I},R=(I,L)=>{const O=g(I),B=C(),M=O.l;return M.add(L),(Or?"production":void 0)!=="production"&&r.forEach(D=>D({type:"sub",flushed:B})),()=>{M.delete(L),y(I),(Or?"production":void 0)!=="production"&&r.forEach(D=>D({type:"unsub"}))}};return(Or?"production":void 0)!=="production"?{get:f,set:w,sub:R,dev_subscribe_store:(I,L)=>{if(L!==2)throw new Error("The current StoreListener revision is 2.");return r.add(I),()=>{r.delete(I)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:I=>t.get(I),dev_get_mounted:I=>e.get(I),dev_restore_atoms:I=>{for(const[O,B]of I)DT(O)&&(c(O,B),x(O));const L=C();r.forEach(O=>O({type:"restore",flushed:L}))}}:{get:f,set:w,sub:R}};let FT;(Or?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const PZ=()=>(FT||((Or?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),FT=CZ()),FT);var AZ={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const RZ=P.createContext(void 0),y$=t=>{const e=P.useContext(RZ);return(t==null?void 0:t.store)||e||PZ()},IZ=t=>typeof(t==null?void 0:t.then)=="function",MZ=An.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Fx(t,e){const n=y$(e),[[r,i,s],o]=P.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return P.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),P.useDebugValue(a),IZ(a)?MZ(a):a}function v$(t,e){const n=y$(e);return P.useCallback((...i)=>{if((AZ?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function iI(t,e){return[Fx(t,e),v$(t,e)]}var sI=Symbol.for("immer-nothing"),sm=Symbol.for("immer-draftable"),zs=Symbol.for("immer-state");function Ci(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var xh=Object.getPrototypeOf;function wh(t){return!!t&&!!t[zs]}function tu(t){var e;return t?b$(t)||Array.isArray(t)||!!t[sm]||!!((e=t.constructor)!=null&&e[sm])||D0(t)||N0(t):!1}var OZ=Object.prototype.constructor.toString();function b$(t){if(!t||typeof t!="object")return!1;const e=xh(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===OZ}function Mf(t,e){Eh(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function Eh(t){const e=t[zs];return e?e.type_:Array.isArray(t)?1:D0(t)?2:N0(t)?3:0}function Wm(t,e){return Eh(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function BT(t,e){return Eh(t)===2?t.get(e):t[e]}function _$(t,e,n){const r=Eh(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function LZ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function D0(t){return t instanceof Map}function N0(t){return t instanceof Set}function Fu(t){return t.copy_||t.base_}function OP(t,e){if(D0(t))return new Map(t);if(N0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&b$(t))return xh(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[zs];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(xh(t),n)}function oI(t,e=!1){return Bx(t)||wh(t)||!tu(t)||(Eh(t)>1&&(t.set=t.add=t.clear=t.delete=kZ),Object.freeze(t),e&&Mf(t,(n,r)=>oI(r,!0))),t}function kZ(){Ci(2)}function Bx(t){return Object.isFrozen(t)}var LP={};function Th(t){const e=LP[t];return e||Ci(0,t),e}function DZ(t,e){LP[t]||(LP[t]=e)}var Xm;function x$(){return Xm}function NZ(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gD(t,e){e&&(Th("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function kP(t){DP(t),t.drafts_.forEach(FZ),t.drafts_=null}function DP(t){t===Xm&&(Xm=t.parent_)}function mD(t){return Xm=NZ(Xm,t)}function FZ(t){const e=t[zs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yD(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[zs].modified_&&(kP(e),Ci(4)),tu(t)&&(t=Xb(e,t),e.parent_||Yb(e,t)),e.patches_&&Th("Patches").generateReplacementPatches_(n[zs].base_,t,e.patches_,e.inversePatches_)):t=Xb(e,n,[]),kP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==sI?t:void 0}function Xb(t,e,n){if(Bx(e))return e;const r=e[zs];if(!r)return Mf(e,(i,s)=>vD(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Yb(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Mf(s,(a,l)=>vD(t,r,i,a,l,n,o)),Yb(t,i,!1),n&&t.patches_&&Th("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function vD(t,e,n,r,i,s,o){if(wh(i)){const a=s&&e&&e.type_!==3&&!Wm(e.assigned_,r)?s.concat(r):void 0,l=Xb(t,i,a);if(_$(n,r,l),wh(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(tu(i)&&!Bx(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Xb(t,i),(!e||!e.scope_.parent_)&&Yb(t,i)}}function Yb(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&oI(e,n)}function BZ(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:x$(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=aI;n&&(i=[r],s=Ym);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var aI={get(t,e){if(e===zs)return t;const n=Fu(t);if(!Wm(n,e))return zZ(t,n,e);const r=n[e];return t.finalized_||!tu(r)?r:r===zT(t.base_,e)?(UT(t),t.copy_[e]=FP(r,t)):r},has(t,e){return e in Fu(t)},ownKeys(t){return Reflect.ownKeys(Fu(t))},set(t,e,n){const r=w$(Fu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=zT(Fu(t),e),s=i==null?void 0:i[zs];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(LZ(n,i)&&(n!==void 0||Wm(t.base_,e)))return!0;UT(t),NP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return zT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,UT(t),NP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Fu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ci(11)},getPrototypeOf(t){return xh(t.base_)},setPrototypeOf(){Ci(12)}},Ym={};Mf(aI,(t,e)=>{Ym[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ym.deleteProperty=function(t,e){return Ym.set.call(this,t,e,void 0)};Ym.set=function(t,e,n){return aI.set.call(this,t[0],e,n,t[0])};function zT(t,e){const n=t[zs];return(n?Fu(n):t)[e]}function zZ(t,e,n){var i;const r=w$(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function w$(t,e){if(!(e in t))return;let n=xh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=xh(n)}}function NP(t){t.modified_||(t.modified_=!0,t.parent_&&NP(t.parent_))}function UT(t){t.copy_||(t.copy_=OP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var UZ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Ci(6),r!==void 0&&typeof r!="function"&&Ci(7);let i;if(tu(e)){const s=mD(this),o=FP(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?kP(s):DP(s)}return gD(s,r),yD(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===sI&&(i=void 0),this.autoFreeze_&&oI(i,!0),r){const s=[],o=[];Th("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Ci(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){tu(t)||Ci(8),wh(t)&&(t=$Z(t));const e=mD(this),n=FP(t,void 0);return n[zs].isManual_=!0,DP(e),n}finishDraft(t,e){const n=t&&t[zs];(!n||!n.isManual_)&&Ci(9);const{scope_:r}=n;return gD(r,e),yD(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Th("Patches").applyPatches_;return wh(t)?r(t,e):this.produce(t,i=>r(i,e))}};function FP(t,e){const n=D0(t)?Th("MapSet").proxyMap_(t,e):N0(t)?Th("MapSet").proxySet_(t,e):BZ(t,e);return(e?e.scope_:x$()).drafts_.push(n),n}function $Z(t){return wh(t)||Ci(10,t),E$(t)}function E$(t){if(!tu(t)||Bx(t))return t;const e=t[zs];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=OP(t,e.scope_.immer_.useStrictShallowCopy_)}else n=OP(t,!0);return Mf(n,(r,i)=>{_$(n,r,E$(i))}),e&&(e.finalized_=!1),n}function T$(){const e="replace",n="add",r="remove";function i(f,g,m,y){switch(f.type_){case 0:case 2:return o(f,g,m,y);case 1:return s(f,g,m,y);case 3:return a(f,g,m,y)}}function s(f,g,m,y){let{base_:x,assigned_:b}=f,w=f.copy_;w.length<x.length&&([x,w]=[w,x],[m,y]=[y,m]);for(let v=0;v<x.length;v++)if(b[v]&&w[v]!==x[v]){const E=g.concat([v]);m.push({op:e,path:E,value:h(w[v])}),y.push({op:e,path:E,value:h(x[v])})}for(let v=x.length;v<w.length;v++){const E=g.concat([v]);m.push({op:n,path:E,value:h(w[v])})}for(let v=w.length-1;x.length<=v;--v){const E=g.concat([v]);y.push({op:r,path:E})}}function o(f,g,m,y){const{base_:x,copy_:b}=f;Mf(f.assigned_,(w,v)=>{const E=BT(x,w),S=BT(b,w),C=v?Wm(x,w)?e:n:r;if(E===S&&C===e)return;const R=g.concat(w);m.push(C===r?{op:C,path:R}:{op:C,path:R,value:S}),y.push(C===n?{op:r,path:R}:C===r?{op:n,path:R,value:h(E)}:{op:e,path:R,value:h(E)})})}function a(f,g,m,y){let{base_:x,copy_:b}=f,w=0;x.forEach(v=>{if(!b.has(v)){const E=g.concat([w]);m.push({op:r,path:E,value:v}),y.unshift({op:n,path:E,value:v})}w++}),w=0,b.forEach(v=>{if(!x.has(v)){const E=g.concat([w]);m.push({op:n,path:E,value:v}),y.unshift({op:r,path:E,value:v})}w++})}function l(f,g,m,y){m.push({op:e,path:[],value:g===sI?void 0:g}),y.push({op:e,path:[],value:f})}function c(f,g){return g.forEach(m=>{const{path:y,op:x}=m;let b=f;for(let S=0;S<y.length-1;S++){const C=Eh(b);let R=y[S];typeof R!="string"&&typeof R!="number"&&(R=""+R),(C===0||C===1)&&(R==="__proto__"||R==="constructor")&&Ci(19),typeof b=="function"&&R==="prototype"&&Ci(19),b=BT(b,R),typeof b!="object"&&Ci(18,y.join("/"))}const w=Eh(b),v=u(m.value),E=y[y.length-1];switch(x){case e:switch(w){case 2:return b.set(E,v);case 3:Ci(16);default:return b[E]=v}case n:switch(w){case 1:return E==="-"?b.push(v):b.splice(E,0,v);case 2:return b.set(E,v);case 3:return b.add(v);default:return b[E]=v}case r:switch(w){case 1:return b.splice(E,1);case 2:return b.delete(E);case 3:return b.delete(m.value);default:return delete b[E]}default:Ci(17,x)}}),f}function u(f){if(!tu(f))return f;if(Array.isArray(f))return f.map(u);if(D0(f))return new Map(Array.from(f.entries()).map(([m,y])=>[m,u(y)]));if(N0(f))return new Set(Array.from(f).map(u));const g=Object.create(xh(f));for(const m in f)g[m]=u(f[m]);return Wm(f,sm)&&(g[sm]=f[sm]),g}function h(f){return wh(f)?u(f):f}DZ("Patches",{applyPatches_:c,generatePatches_:i,generateReplacementPatches_:l})}var Us=new UZ,S$=Us.produce,jZ=Us.produceWithPatches.bind(Us);Us.setAutoFreeze.bind(Us);Us.setUseStrictShallowCopy.bind(Us);var bD=Us.applyPatches.bind(Us);Us.createDraft.bind(Us);Us.finishDraft.bind(Us);const GZ=t=>({current:t,history:[],future:[],staging:[]});function HZ(t){const e=new Set,n=new Set,r=[],i=[];for(let s=t.length-1;s>=0;s--){const o=t[s];for(let a=t[s].patch.length-1;a>=0;a--){const l=o.patch[a],c=JSON.stringify(l.path);l.op==="replace"&&e.has(c)||(e.add(c),r.push(l))}}for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<t[s].patch.length;a++){const l=o.inversePatch[a],c=JSON.stringify(l.path);l.op==="replace"&&n.has(c)||(n.add(c),i.push(l))}}return r.length===0&&i.length===0?null:{patch:r.reverse(),inversePatch:i}}const zx=(t,e=30)=>{const[{history:n,future:r,current:i,staging:s},o]=iI(t);return{set:(u,h=!0,f)=>{const[g,m,y]=jZ(i,u),x={patch:m,inversePatch:y,label:f};if(h){const b=HZ(s.length>0?s:[x]);if(b===null)return;o(w=>{const v=w.history.length>=e?[...w.history.slice(1),b]:[...w.history,b];return{current:g,history:v,future:[],staging:[]}})}else{const b=[...s,x];o(w=>({...w,current:g,staging:b}))}},undo:()=>{o(u=>{if(n.length===0||u.history.length===0)return u;const h=n[u.history.length-1];if(!h)return u;const f=bD(u.current,h.inversePatch);return{history:u.history.slice(0,-1),future:[h,...u.future],current:f,staging:[]}})},redo:()=>{o(u=>{if(r.length===0||u.future.length===0)return u;const h=u.future[0];if(!h)return u;const f=bD(u.current,h.patch);return{history:[...u.history,h],future:u.future.slice(1),current:f,staging:[]}})},history:n,future:r,staging:s,current:i}},qo={ManufactureShare:"Share of Manufacturing",AgricultureShare:"Share of Agriculture",PriceIndex:"Price Index",NominalWage:"Nominal Wage",RealWage:"Real Wage"},VZ=[qo.ManufactureShare,qo.AgricultureShare,qo.PriceIndex,qo.NominalWage,qo.RealWage];function WZ(t){const e=k0(t,(n,r,i)=>r(e,S$(n(e),typeof i=="function"?i:()=>i)));return e}function XZ(t,e){const n=v$(t,e);return P.useCallback(r=>n(S$(r)),[n])}function C$(t,e){return[Fx(t,e),XZ(t,e)]}function Tv(t,e){return t.toFixed(2).toString()}function Nl(t){return t===Number.POSITIVE_INFINITY||t>=1e9||isNaN(t)}const _D=(t,e,n)=>{const r=Math.log(t),i=Math.log(e),s=r+(1-n)*(i-r);return Math.exp(s)};var lI={exports:{}};lI.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),h=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,h&&(typeof h=="object"&&s(h,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(ts,t,!1)})(lI);var YZ=lI.exports,cI={exports:{}};cI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(ts,t,!1)})(cI);var qZ=cI.exports,uI={exports:{}};uI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(ts,t,!1)})(uI);var KZ=uI.exports,hI={exports:{}};hI.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,h=l.i,f,g;return f=u[h],f^=f>>>7,g=f^f<<24,f=u[h+1&7],g^=f^f>>>10,f=u[h+3&7],g^=f^f>>>3,f=u[h+4&7],g^=f^f<<7,f=u[h+7&7],f=f^f<<13,g^=f^f<<9,u[h]=g,l.i=h+1&7,g};function c(u,h){var f,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,f=0;f<h.length;++f)g[f&7]=g[f&7]<<15^h.charCodeAt(f)+g[f+1&7]<<13;for(;g.length<8;)g.push(0);for(f=0;f<8&&g[f]===0;++f);for(f==8?g[7]=-1:g[f],u.x=g,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.x&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(ts,t,!1)})(hI);var ZZ=hI.exports,dI={exports:{}};dI.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,h=l.X,f=l.i,g,m;return l.w=u=u+1640531527|0,m=h[f+34&127],g=h[f=f+1&127],m^=m<<13,g^=g<<17,m^=m>>>15,g^=g>>>12,m=h[f]=m^g,l.i=f,m+(u^u>>>16)|0};function c(u,h){var f,g,m,y,x,b=[],w=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,w=Math.max(w,h.length)),m=0,y=-32;y<w;++y)h&&(g^=h.charCodeAt((y+32)%h.length)),y===0&&(x=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,y>=0&&(x=x+1640531527|0,f=b[y&127]^=g+x,m=f==0?m+1:0);for(m>=128&&(b[(h&&h.length||0)&127]=-1),m=127,y=4*128;y>0;--y)g=b[m+34&127],f=b[m=m+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,b[m]=g^f;u.w=x,u.X=b,u.i=m}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(u.X&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(ts,t,!1)})(dI);var QZ=dI.exports,fI={exports:{}};fI.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var h=l.b,f=l.c,g=l.d,m=l.a;return h=h<<25^h>>>7^f,f=f-g|0,g=g<<24^g>>>8^m,m=m-h|0,l.b=h=h<<20^h>>>12^f,l.c=f=f-g|0,l.d=g<<16^f>>>16^m,l.a=m-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var f=c.next()>>>11,g=(c.next()>>>0)/4294967296,m=(f+g)/(1<<21);while(m===0);return m},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&s(u,c),h.state=function(){return s(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(ts,t,!1)})(fI);var JZ=fI.exports,P$={exports:{}};const eQ={},tQ=Object.freeze(Object.defineProperty({__proto__:null,default:eQ},Symbol.toStringTag,{value:"Module"})),A$=dn(tQ);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,h=i-1,f;function g(E,S,C){var R=[];S=S==!0?{entropy:!0}:S||{};var I=b(x(S.entropy?[E,v(n)]:E??w(),3),R),L=new m(R),O=function(){for(var B=L.g(s),M=l,D=0;B<c;)B=(B+D)*i,M*=i,D=L.g(1);for(;B>=u;)B/=2,M/=2,D>>>=1;return(B+D)/M};return O.int32=function(){return L.g(4)|0},O.quick=function(){return L.g(4)/4294967296},O.double=O,b(v(L.S),n),(S.pass||C||function(B,M,D,N){return N&&(N.S&&y(N,L),B.state=function(){return y(L,{})}),D?(r[a]=B,M):B})(O,I,"global"in S?S.global:this==r,S.state)}function m(E){var S,C=E.length,R=this,I=0,L=R.i=R.j=0,O=R.S=[];for(C||(E=[C++]);I<i;)O[I]=I++;for(I=0;I<i;I++)O[I]=O[L=h&L+E[I%C]+(S=O[I])],O[L]=S;(R.g=function(B){for(var M,D=0,N=R.i,j=R.j,W=R.S;B--;)M=W[N=h&N+1],D=D*i+W[h&(W[N]=W[j=h&j+M])+(W[j]=M)];return R.i=N,R.j=j,D})(i)}function y(E,S){return S.i=E.i,S.j=E.j,S.S=E.S.slice(),S}function x(E,S){var C=[],R=typeof E,I;if(S&&R=="object")for(I in E)try{C.push(x(E[I],S-1))}catch{}return C.length?C:R=="string"?E:E+"\0"}function b(E,S){for(var C=E+"",R,I=0;I<C.length;)S[h&I]=h&(R^=S[h&I]*19)+C.charCodeAt(I++);return v(S)}function w(){try{var E;return f&&(E=f.randomBytes)?E=E(i):(E=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(E)),v(E)}catch{var S=e.navigator,C=S&&S.plugins;return[+new Date,e,C,e.screen,v(n)]}}function v(E){return String.fromCharCode.apply(0,E)}if(b(r.random(),n),t.exports){t.exports=g;try{f=A$}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:ts,[],Math)})(P$);var nQ=P$.exports,rQ=YZ,iQ=qZ,sQ=KZ,oQ=ZZ,aQ=QZ,lQ=JZ,Lh=nQ;Lh.alea=rQ;Lh.xor128=iQ;Lh.xorwow=sQ;Lh.xorshift7=oQ;Lh.xor4096=aQ;Lh.tychei=lQ;var cQ=Lh;const uQ=Ih(cQ);class R${constructor(e){e===void 0&&(e=Math.random().toString()),this.rng=uQ(e.toString())}random(){return this.rng.double()}}const hQ=new URLSearchParams(window.location.search).get("seed")||Math.random(),qb=new R$(hQ),dQ=.05,Kb=(t,e)=>e*(1+(t.random()-.5)*dQ),I$=({id:t,label:e,point:n,share:r,randomize:i})=>{const s=i?Kb(qb,r):r,o=i?Kb(qb,r):r;return{id:t,label:e,point:n,velocity:[0,0],manufactureShare:s,manufactureShare0:s,agricultureShare:o,priceIndex:1,priceIndex0:1,nominalWage:1,nominalWage0:1,realWage:1,income:1,income0:1}};function fQ(t,e){return t.priceIndex=1,t.priceIndex0=1,t.nominalWage=1,t.nominalWage0=1,t.realWage=1,t.income=1,t.income0=1,e&&0<e&&(t.manufactureShare=Kb(qb,1/e),t.agricultureShare=Kb(qb,1/e),t.manufactureShare0=t.manufactureShare),t}function pQ(t){t.income0=t.income,t.nominalWage0=t.nominalWage,t.priceIndex0=t.priceIndex,t.manufactureShare0=t.manufactureShare}function gQ(t,e){return t*e.manufactureShare*e.nominalWage+(1-t)*e.agricultureShare}function mQ(t,e,n,r,i){const s=t.map((o,a)=>{const l=n[i][a];return Nl(l)?0:o.manufactureShare*Math.pow(o.nominalWage0*l,1-e)}).reduce((o,a)=>o+a,0);return Math.pow(s,1/(1-e))}function yQ(t,e,n,r){const i=t.map((s,o)=>{const a=n[r][o];return Nl(a)?0:s.income0*Math.pow(a,1-e)*Math.pow(s.priceIndex0,e-1)}).reduce((s,o)=>s+o,0);return Math.pow(i,1/e)}function vQ(t,e){return e.nominalWage*Math.pow(e.priceIndex,-1*t)}function bQ(t,e,n,r){return r.manufactureShare>1/t/10?e*(r.realWage-n)*r.manufactureShare:1/t/10}let Sv;const _Q=new Uint8Array(16);function xQ(){if(!Sv&&(Sv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sv(_Q)}const si=[];for(let t=0;t<256;++t)si.push((t+256).toString(16).slice(1));function wQ(t,e=0){return si[t[e+0]]+si[t[e+1]]+si[t[e+2]]+si[t[e+3]]+"-"+si[t[e+4]]+si[t[e+5]]+"-"+si[t[e+6]]+si[t[e+7]]+"-"+si[t[e+8]]+si[t[e+9]]+"-"+si[t[e+10]]+si[t[e+11]]+si[t[e+12]]+si[t[e+13]]+si[t[e+14]]+si[t[e+15]]}const EQ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xD={randomUUID:EQ};function M$(t,e,n){if(xD.randomUUID&&!e&&!t)return xD.randomUUID();t=t||{};const r=t.random||(t.rng||xQ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return wQ(r)}const fp=(t,e)=>{const n=[];for(let r=0;r<t;r++){const i=[];for(let s=0;s<t;s++)i.push(e?e(r,s):0);n.push(i)}return n};function TQ(t,e){const n=new Set(e),r=new Set(t.concat(e)),i=new Set(t.filter(s=>n.has(s)));return Array.from(r).filter(s=>!i.has(s))}const om=(t,e)=>{e||(e=t-1,t=0);const n=[];for(let r=t;r<=e;r++)n.push(r);return n};function BP(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return i}else t[i].id<e?n=i+1:r=i-1}return-1}function Of(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return t[i]}else t[i].id<e?n=i+1:r=i-1}return null}function SQ(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function wD(t){const e={};return t.forEach(([n,r])=>{e[n]=r}),e}var qi=63710088e-1,CQ={centimeters:qi*100,centimetres:qi*100,degrees:qi/111325,feet:qi*3.28084,inches:qi*39.37,kilometers:qi/1e3,kilometres:qi/1e3,meters:qi,metres:qi,miles:qi/1609.344,millimeters:qi*1e3,millimetres:qi*1e3,nauticalmiles:qi/1852,radians:1,yards:qi*1.0936};function PQ(t,e){e===void 0&&(e="kilometers");var n=CQ[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Cv(t){var e=t%360;return e*Math.PI/180}function ED(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function AQ(t,e,n){n===void 0&&(n={});var r=ED(t),i=ED(e),s=Cv(i[1]-r[1]),o=Cv(i[0]-r[0]),a=Cv(r[1]),l=Cv(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return PQ(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var pI={exports:{}};pI.exports=Ux;pI.exports.default=Ux;function Ux(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=O$(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,h,f,g;if(r&&(s=LQ(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var m=n;m<i;m+=n)h=t[m],f=t[m+1],h<a&&(a=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return qm(s,o,n,a,l,g,0),o}function O$(t,e,n,r,i){var s,o;if(i===$P(t,e,n,r)>0)for(s=e;s<n;s+=r)o=TD(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=TD(s,t[s],t[s+1],o);return o&&$x(o,o.next)&&(Zm(o),o=o.next),o}function Sh(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&($x(n,n.next)||Kn(n.prev,n,n.next)===0)){if(Zm(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function qm(t,e,n,r,i,s,o){if(t){!o&&s&&BQ(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?IQ(t,r,i,s):RQ(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Zm(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=MQ(Sh(t),e,n),qm(t,e,n,r,i,s,2)):o===2&&OQ(t,e,n,r,i,s):qm(Sh(t),e,n,r,i,s,1);break}}}}function RQ(t){var e=t.prev,n=t,r=t.next;if(Kn(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c,m=r.next;m!==e;){if(m.x>=u&&m.x<=f&&m.y>=h&&m.y<=g&&Jd(i,a,s,l,o,c,m.x,m.y)&&Kn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function IQ(t,e,n,r){var i=t.prev,s=t,o=t.next;if(Kn(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,f=o.y,g=a<l?a<c?a:c:l<c?l:c,m=u<h?u<f?u:f:h<f?h:f,y=a>l?a>c?a:c:l>c?l:c,x=u>h?u>f?u:f:h>f?h:f,b=zP(g,m,e,n,r),w=zP(y,x,e,n,r),v=t.prevZ,E=t.nextZ;v&&v.z>=b&&E&&E.z<=w;){if(v.x>=g&&v.x<=y&&v.y>=m&&v.y<=x&&v!==i&&v!==o&&Jd(a,u,l,h,c,f,v.x,v.y)&&Kn(v.prev,v,v.next)>=0||(v=v.prevZ,E.x>=g&&E.x<=y&&E.y>=m&&E.y<=x&&E!==i&&E!==o&&Jd(a,u,l,h,c,f,E.x,E.y)&&Kn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;v&&v.z>=b;){if(v.x>=g&&v.x<=y&&v.y>=m&&v.y<=x&&v!==i&&v!==o&&Jd(a,u,l,h,c,f,v.x,v.y)&&Kn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;E&&E.z<=w;){if(E.x>=g&&E.x<=y&&E.y>=m&&E.y<=x&&E!==i&&E!==o&&Jd(a,u,l,h,c,f,E.x,E.y)&&Kn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function MQ(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!$x(i,s)&&L$(i,r,r.next,s)&&Km(i,s)&&Km(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Zm(r),Zm(r.next),r=t=s),r=r.next}while(r!==t);return Sh(r)}function OQ(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&$Q(o,a)){var l=k$(o,a);o=Sh(o,o.next),l=Sh(l,l.next),qm(o,e,n,r,i,s,0),qm(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function LQ(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=O$(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(UQ(c));for(i.sort(kQ),s=0;s<i.length;s++)n=DQ(i[s],n);return n}function kQ(t,e){return t.x-e.x}function DQ(t,e){var n=NQ(t,e);if(!n)return e;var r=k$(n,t);return Sh(r,r.next),Sh(n,n.next)}function NQ(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,h=1/0,f;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&Jd(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),Km(n,t)&&(f<h||f===h&&(n.x>o.x||n.x===o.x&&FQ(o,n)))&&(o=n,h=f)),n=n.next;while(n!==l);return o}function FQ(t,e){return Kn(t.prev,t,e.prev)<0&&Kn(e.next,t,t.next)<0}function BQ(t,e,n,r){var i=t;do i.z===0&&(i.z=zP(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,zQ(i)}function zQ(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function zP(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function UQ(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Jd(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function $Q(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!jQ(t,e)&&(Km(t,e)&&Km(e,t)&&GQ(t,e)&&(Kn(t.prev,t,e.prev)||Kn(t,e.prev,e))||$x(t,e)&&Kn(t.prev,t,t.next)>0&&Kn(e.prev,e,e.next)>0)}function Kn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function $x(t,e){return t.x===e.x&&t.y===e.y}function L$(t,e,n,r){var i=Av(Kn(t,e,n)),s=Av(Kn(t,e,r)),o=Av(Kn(n,r,t)),a=Av(Kn(n,r,e));return!!(i!==s&&o!==a||i===0&&Pv(t,n,e)||s===0&&Pv(t,r,e)||o===0&&Pv(n,t,r)||a===0&&Pv(n,e,r))}function Pv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Av(t){return t>0?1:t<0?-1:0}function jQ(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&L$(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Km(t,e){return Kn(t.prev,t,t.next)<0?Kn(t,e,t.next)>=0&&Kn(t,t.prev,e)>=0:Kn(t,e,t.prev)<0||Kn(t,t.next,e)<0}function GQ(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function k$(t,e){var n=new UP(t.i,t.x,t.y),r=new UP(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function TD(t,e,n,r){var i=new UP(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Zm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function UP(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ux.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs($P(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs($P(t,c,u,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,m=r[a+2]*n;h+=Math.abs((t[f]-t[m])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[m+1]-t[f+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function $P(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Ux.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var HQ=pI.exports;const gI=Ih(HQ);var VQ=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},SD=typeof Symbol<"u"&&Symbol,WQ=VQ,XQ=function(){return typeof SD!="function"||typeof Symbol!="function"||typeof SD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:WQ()},CD={foo:{}},YQ=Object,qQ=function(){return{__proto__:CD}.foo===CD.foo&&!({__proto__:null}instanceof YQ)},KQ="Function.prototype.bind called on incompatible ",ZQ=Object.prototype.toString,QQ=Math.max,JQ="[object Function]",PD=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},eJ=function(e,n){for(var r=[],i=n||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},tJ=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},nJ=function(e){var n=this;if(typeof n!="function"||ZQ.apply(n)!==JQ)throw new TypeError(KQ+n);for(var r=eJ(arguments,1),i,s=function(){if(this instanceof i){var u=n.apply(this,PD(r,arguments));return Object(u)===u?u:this}return n.apply(e,PD(r,arguments))},o=QQ(0,n.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+tJ(a,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var c=function(){};c.prototype=n.prototype,i.prototype=new c,c.prototype=null}return i},rJ=nJ,mI=Function.prototype.bind||rJ,iJ=Function.prototype.call,sJ=Object.prototype.hasOwnProperty,oJ=mI,aJ=oJ.call(iJ,sJ),Wt,Lf=SyntaxError,D$=Function,ff=TypeError,$T=function(t){try{return D$('"use strict"; return ('+t+").constructor;")()}catch{}},ih=Object.getOwnPropertyDescriptor;if(ih)try{ih({},"")}catch{ih=null}var jT=function(){throw new ff},lJ=ih?function(){try{return arguments.callee,jT}catch{try{return ih(arguments,"callee").get}catch{return jT}}}():jT,sd=XQ(),cJ=qQ(),Hr=Object.getPrototypeOf||(cJ?function(t){return t.__proto__}:null),Rd={},uJ=typeof Uint8Array>"u"||!Hr?Wt:Hr(Uint8Array),sh={"%AggregateError%":typeof AggregateError>"u"?Wt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Wt:ArrayBuffer,"%ArrayIteratorPrototype%":sd&&Hr?Hr([][Symbol.iterator]()):Wt,"%AsyncFromSyncIteratorPrototype%":Wt,"%AsyncFunction%":Rd,"%AsyncGenerator%":Rd,"%AsyncGeneratorFunction%":Rd,"%AsyncIteratorPrototype%":Rd,"%Atomics%":typeof Atomics>"u"?Wt:Atomics,"%BigInt%":typeof BigInt>"u"?Wt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Wt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Wt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Wt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Wt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Wt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Wt:FinalizationRegistry,"%Function%":D$,"%GeneratorFunction%":Rd,"%Int8Array%":typeof Int8Array>"u"?Wt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Wt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Wt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":sd&&Hr?Hr(Hr([][Symbol.iterator]())):Wt,"%JSON%":typeof JSON=="object"?JSON:Wt,"%Map%":typeof Map>"u"?Wt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!sd||!Hr?Wt:Hr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Wt:Promise,"%Proxy%":typeof Proxy>"u"?Wt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Wt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Wt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!sd||!Hr?Wt:Hr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Wt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":sd&&Hr?Hr(""[Symbol.iterator]()):Wt,"%Symbol%":sd?Symbol:Wt,"%SyntaxError%":Lf,"%ThrowTypeError%":lJ,"%TypedArray%":uJ,"%TypeError%":ff,"%Uint8Array%":typeof Uint8Array>"u"?Wt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Wt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Wt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Wt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Wt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Wt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Wt:WeakSet};if(Hr)try{null.error}catch(t){var hJ=Hr(Hr(t));sh["%Error.prototype%"]=hJ}var dJ=function t(e){var n;if(e==="%AsyncFunction%")n=$T("async function () {}");else if(e==="%GeneratorFunction%")n=$T("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=$T("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Hr&&(n=Hr(i.prototype))}return sh[e]=n,n},AD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F0=mI,Zb=aJ,fJ=F0.call(Function.call,Array.prototype.concat),pJ=F0.call(Function.apply,Array.prototype.splice),RD=F0.call(Function.call,String.prototype.replace),Qb=F0.call(Function.call,String.prototype.slice),gJ=F0.call(Function.call,RegExp.prototype.exec),mJ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,yJ=/\\(\\)?/g,vJ=function(e){var n=Qb(e,0,1),r=Qb(e,-1);if(n==="%"&&r!=="%")throw new Lf("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Lf("invalid intrinsic syntax, expected opening `%`");var i=[];return RD(e,mJ,function(s,o,a,l){i[i.length]=a?RD(l,yJ,"$1"):o||s}),i},bJ=function(e,n){var r=e,i;if(Zb(AD,r)&&(i=AD[r],r="%"+i[0]+"%"),Zb(sh,r)){var s=sh[r];if(s===Rd&&(s=dJ(r)),typeof s>"u"&&!n)throw new ff("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new Lf("intrinsic "+e+" does not exist!")},kh=function(e,n){if(typeof e!="string"||e.length===0)throw new ff("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ff('"allowMissing" argument must be a boolean');if(gJ(/^%?[^%]*%?$/,e)===null)throw new Lf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=vJ(e),i=r.length>0?r[0]:"",s=bJ("%"+i+"%",n),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],pJ(r,fJ([0,1],c)));for(var u=1,h=!0;u<r.length;u+=1){var f=r[u],g=Qb(f,0,1),m=Qb(f,-1);if((g==='"'||g==="'"||g==="`"||m==='"'||m==="'"||m==="`")&&g!==m)throw new Lf("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(l=!0),i+="."+f,o="%"+i+"%",Zb(sh,o))a=sh[o];else if(a!=null){if(!(f in a)){if(!n)throw new ff("base intrinsic for "+e+" exists, but the property is not available.");return}if(ih&&u+1>=r.length){var y=ih(a,f);h=!!y,h&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[f]}else h=Zb(a,f),a=a[f];h&&!l&&(sh[o]=a)}}return a},N$={exports:{}},_J=kh,jP=_J("%Object.defineProperty%",!0),GP=function(){if(jP)try{return jP({},"a",{value:1}),!0}catch{return!1}return!1};GP.hasArrayLengthDefineBug=function(){if(!GP())return null;try{return jP([],"length",{value:1}).length!==1}catch{return!0}};var F$=GP,xJ=kh,Y1=xJ("%Object.getOwnPropertyDescriptor%",!0);if(Y1)try{Y1([],"length")}catch{Y1=null}var B$=Y1,wJ=F$(),yI=kh,am=wJ&&yI("%Object.defineProperty%",!0);if(am)try{am({},"a",{value:1})}catch{am=!1}var EJ=yI("%SyntaxError%"),od=yI("%TypeError%"),ID=B$,TJ=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new od("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new od("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new od("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new od("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new od("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new od("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!ID&&ID(e,n);if(am)am(e,n,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[n]=r;else throw new EJ("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},z$=kh,MD=TJ,SJ=F$(),OD=B$,LD=z$("%TypeError%"),CJ=z$("%Math.floor%"),PJ=function(e,n){if(typeof e!="function")throw new LD("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||CJ(n)!==n)throw new LD("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&OD){var o=OD(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(SJ?MD(e,"length",n,!0,!0):MD(e,"length",n)),e};(function(t){var e=mI,n=kh,r=PJ,i=n("%TypeError%"),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(o,s),l=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new i("a function is required");var g=a(e,o,arguments);return r(g,1+c(0,f.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(N$);var AJ=N$.exports,U$=kh,$$=AJ,RJ=$$(U$("String.prototype.indexOf")),IJ=function(e,n){var r=U$(e,!!n);return typeof r=="function"&&RJ(e,".prototype.")>-1?$$(r):r};const oh=.01;function Ch(t,e,n){return t&&e?n?AQ(t,e,{units:"kilometers"}):Math.sqrt(((t[0]-e[0])*oh)**2+((t[1]-e[1])*oh)**2):Number.NaN}function MJ(t,e,n){const r=Of(t,e),i=Of(t,n);return Ch(r==null?void 0:r.point,i==null?void 0:i.point,!1)}function j$(t,e){const n=t.locations.length/e;let r=t.locationSerialNumber;const i=om(e).map(a=>{const l=1/oh/(2*Math.sin(Math.PI/e)),c=-1*(2*Math.PI*a)/e-Math.PI/2,u=l*Math.cos(c),h=l*Math.sin(c);if(a===0&&e===1)return{...t.locations[0],point:[0,0],manufactureShare:1,agricultureShare:1};if(a<t.locations.length){const f=t.locations[a];return{...f,point:[u,h],manufactureShare:n*f.manufactureShare,agricultureShare:n*f.agricultureShare}}else return I$({id:r++,label:M$(),point:[u,h],share:1/e,randomize:!0})}),s=t.parameterSet.units==="degrees",o=e===1?[]:om(e).map(a=>{const[l,c]=a!==e-1?[i[a],i[a+1]]:[i[0],i[e-1]];return{source:l.id,target:c.id,distance:Ch(l.point,c.point,s)}});return{locations:i,edges:o,locationSerialNumber:r,addedIndices:e>t.locations.length?om(e-t.locations.length).map(a=>a+t.locations.length):[]}}function OJ(t,e,n,r){const i=t[t.length-1];return n.map(s=>({source:t[s].id,target:i.id,distance:Ch(t[s].point,i.point,r)}))}const LJ=.5;function kJ(t,e,n){const r="_",i=new Set(e.map(c=>`${c.source}${r}${c.target}`)),s=[];for(let c=0;c<t.length;c++)for(let u=c+1;u<t.length;u++)i.has(`${c}${r}${u}`)||s.push(c+r+u);const o=new Set(t.map(c=>c.id)),a=SQ(s).filter((c,u)=>u<t.length*LJ).map(c=>{const[u,h]=c.split(r).map(g=>parseInt(g)),f=Ch(t[u].point,t[h].point,n);return{source:t[u].id,target:t[h].id,distance:f}});a.forEach(c=>{o.delete(c.source),o.delete(c.target)}),o.size;const l=[...o].map(c=>{const u=t.filter(h=>h.id!==c).map(h=>({location:h,distance:Ch(h.point,t[c].point,n)})).reduce((h,f)=>h===null||h.distance>f.distance?f:h,null);return u?c<(u==null?void 0:u.location.id)?{source:c,target:u==null?void 0:u.location.id,id:c,distance:u==null?void 0:u.distance}:{source:u==null?void 0:u.location.id,id:c,target:c,distance:u==null?void 0:u.distance}:null}).filter(c=>c!==null);return e.concat(a).concat(l)}function G$(t,e,n){const r=n!==void 0?n:t.locations.length+1,i=new R$(t.locations.length),s=t.locations.length/r,o=t.locations.map(x=>({...x,manufactureShare:x.manufactureShare*s,agricultureShare:x.agricultureShare*s}));let a=i.random()*2*Math.PI,l=0,c=1/oh;const u=[];let h=t.locationSerialNumber;for(let x=t.locations.length;x<r;x++){l=2*i.random()-.5,a+=2*Math.PI*(i.random()-.5)/2,c=Math.min(50,Math.max(400,c+l));const{x:b,y:w}=t.locations.length===0&&x===0?{x:0,y:0}:x<t.locations.length?{x:t.locations[x].point[0],y:t.locations[x].point[1]}:x==t.locations.length?{x:t.locations[t.locations.length-1].point[0]+c*Math.cos(a),y:t.locations[t.locations.length-1].point[1]+c*Math.sin(a)}:{x:u[x-t.locations.length-1].point[0]+c*Math.cos(a),y:u[x-t.locations.length-1].point[1]+c*Math.sin(a)},v=I$({id:h++,label:M$(),point:[b,w],share:1/r,randomize:!0});u.push(v)}const f=[...o,...u],g=t.parameterSet.units==="degrees",m=n===void 0?OJ(f,t.edges,e,g):kJ(f,t.edges,g),y=[...t.edges,...m];return{locations:f,edges:y,locationSerialNumber:h,addedIndices:om(u.length).map(x=>x+o.length)}}const vI=(t,e,n)=>{switch(console.log(t),t.parameterSet.type){case"Racetrack":return j$(t,n);case"Graph":return G$(t,e,n);default:return{...t,addedIndices:[]}}};function DJ(t,e){const n=new Set(e.locations.filter((o,a)=>t<=a).map(o=>o.id)),r=e.locations.length/t,i=e.locations.filter((o,a)=>a<t).map(o=>({...o,manufactureShare:o.manufactureShare*r,agricultureShare:o.agricultureShare*r})),s=e.edges.filter(o=>!n.has(o.source)&&!n.has(o.target));return{locations:i,edges:s,locationSerialNumber:e.locationSerialNumber}}const NJ=(t,e)=>{switch(e.parameterSet.type){case"Racetrack":return j$(e,t);case"Graph":return DJ(t,e);default:throw new Error("invalid type: "+e.parameterSet.type)}},ci={Racetrack:"Racetrack",Graph:"Graph",RealWorld:"RealWorld"},kf={[ci.Racetrack]:[{caseId:"Racetrack-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-1",title:"Case i",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Racetrack-2",title:"Case ii",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-3",title:"Case iii",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[ci.Graph]:[{caseId:"Graph-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-1",title:"Case A",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Graph-2",title:"Case B",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Graph",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-3",title:"Case C",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[ci.RealWorld]:[{caseId:"RealWorld-0",title:"IDE-GSM 0",description:"sample 0",type:"RealWorld",numLocations:4,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"},{caseId:"RealWorld-1",title:"IDE-GSM 1",description:"sample 1",type:"RealWorld",numLocations:10,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"}]},GT=window.location.hash,FJ=GT.startsWith("/"+ci.Racetrack)?ci.Racetrack:GT.startsWith("/"+ci.Graph)?ci.Graph:GT.startsWith("/"+ci.RealWorld)?ci.RealWorld:ci.Racetrack,HP=kf[FJ][0];T$();const HT=vI({parameterSet:HP,locations:[],edges:[],locationSerialNumber:0},[],HP.numLocations),BJ={parameterSet:HP,locations:HT.locations,edges:HT.edges,locationSerialNumber:HT.locationSerialNumber},zJ=GZ(BJ),ah=WZ(zJ),UJ=k0({adjacencyMatrix:[],distanceMatrix:[],predecessorMatrix:[],transportationCostMatrix:[]}),$J=k0({viewportCenter:[3,0,0],focusedIndices:[],selectedIndices:[],draggingIndex:null,chartScale:1,chartType:qo.ManufactureShare,autoLayoutFinished:!0}),jJ=async function(t){const e=t.params.projectType,n=t.params.uuid,r=parseFloat(t.params.zoom),i=parseFloat(t.params.y),s=parseFloat(t.params.x);return{uuid:n,type:e,y:i,x:s,zoom:r}};class H${constructor(e,n){this.numLocations=e,this.numEdges=n}getNumLocations(){return this.numLocations}getNumEdges(){return this.numEdges}getAdjacencyMatrix(e,n,r){return this.adjacencyMatrix?Promise.resolve(this.adjacencyMatrix):this.createAdjacencyMatrix(e,n,r)}async getDistanceMatrix(e,n,r){return this.distanceMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.distanceMatrix)}async getPredecessorMatrix(e,n,r){return this.predecessorMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.predecessorMatrix)}getTransportationCostMatrix(e,n,r){return this.transportationCostMatrix?Promise.resolve(this.transportationCostMatrix):this.createTransportationCostMatrix(e,n,r)}async updateAdjacencyMatrix(e,n,r){return this.adjacencyMatrix=void 0,this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r),adjacencyMatrix:await this.getAdjacencyMatrix(e,n,r)}}async updateDistanceAndPredecessorMatrix(e,n,r){return this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r)}}async updateTransportationCostMatrix(e,n,r){return this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r)}}}const GJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let index = global_id.x;
    let totalSize = numVertices * numVertices;
    let items = max(1, totalSize / WORK_GROUP_SIZE);
    // 
    let start = index * items; // 
    let end = min((index + 1) * items, totalSize); // 

    for (var i: u32 = start; i < end; i++) {
        let rowIndex = i / numVertices;
        let colIndex = i % numVertices;
        if (rowIndex === colIndex) {
           adjacencyMatrix[i] = f32(0); // 0
        } else {
            adjacencyMatrix[i] = f32(1e10); // 1e10
        }
    }
}
`,HJ=()=>`
struct Vertex {
    x: f32,
    y: f32
};

struct Edge {
    start: u32,
    end: u32
};

fn distance(a: vec2<f32>, b:vec2<f32>) -> f32 {
    let dx: f32 = a.x - b.x;
    let dy: f32 = a.y - b.y;
    return sqrt(dx * dx + dy * dy) * ${oh};
}

fn distance4(ax: f32, ay: f32, bx: f32, by: f32) -> f32 {
    let dx: f32 = ax - bx;
    let dy: f32 = ay - by;
    return sqrt(dx * dx + dy * dy) * ${oh};
}

@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(1) var<uniform> numEdges: u32;
@group(0) @binding(2) var<storage, read> vertices: array<vec2<f32>>;
@group(0) @binding(3) var<storage, read> edges: array<u32>;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let edgeIndex: u32 = global_id.x;
    let edgeItems: u32 = max(1u, numEdges / WORK_GROUP_SIZE);
    let startEdgeIndex: u32 = edgeIndex * edgeItems; // 
    let endEdgeIndex: u32 = min((edgeIndex + 1u) * edgeItems, numEdges); // 

    for (var edgeIndex: u32 = startEdgeIndex; edgeIndex < endEdgeIndex; edgeIndex++) {
      //let edge = edges[edgeIndex * 2];
      //let startVertexIndex: u32 = edge.x;
      //let endVertexIndex: u32 = edge.y;
      //let edge = edges[edgeIndex * 2];
      let startVertexIndex: u32 = edges[edgeIndex * 2];
      let endVertexIndex: u32 = edges[edgeIndex * 2 + 1];
      
      let dx = vertices[startVertexIndex][0] - vertices[endVertexIndex][0];
      let dy = vertices[startVertexIndex][1] - vertices[endVertexIndex][1];
      let distance: f32 = sqrt(dx * dx + dy * dy) * ${oh};
      
      let matrixIndex1: u32 = (startVertexIndex * numVertices) + endVertexIndex;
      let matrixIndex2: u32 = (endVertexIndex * numVertices) + startVertexIndex;

      adjacencyMatrix[matrixIndex1] = distance;
      adjacencyMatrix[matrixIndex2] = distance;

/*
      adjacencyMatrix[edgeIndex*4+0u] = f32(startVertexIndex); 
      adjacencyMatrix[edgeIndex*4+1u] = f32(endVertexIndex);
      adjacencyMatrix[edgeIndex*4+2u] = f32(startVertexIndex * numVertices + endVertexIndex);
      adjacencyMatrix[edgeIndex*4+3u] = f32(endVertexIndex * numVertices + startVertexIndex);
      */
      //adjacencyMatrix[edgeIndex*4+3u] = distance;
    }
}
`,VJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(6) var<storage, read_write> predecessorMatrix: array<i32>;

const WORKGROUP_SIZE = 64u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let numElements = numVertices * numVertices;
    let numElementsPerThread: u32 = (numElements + WORKGROUP_SIZE - 1u) / WORKGROUP_SIZE;
    let startIndex: u32 = global_id.x * numElementsPerThread;
    let endIndex: u32 = min(startIndex + numElementsPerThread, numElements);

    // 
    for (var index: u32 = startIndex; index < endIndex; index++) {
        let i = index / numVertices;
        let j = index % numVertices;

        // distanceMatrixpredecessorMatrix
        if (i < numVertices && j < numVertices) {
            distanceMatrix[index] = adjacencyMatrix[index];
            predecessorMatrix[index] = i32(j);
        }
    }

    // Floyd-Warshall
    for (var k: u32 = 0; k < numVertices; k++) {
        workgroupBarrier(); // 

        for (var index: u32 = startIndex; index < endIndex; index++) {
            let i = index / numVertices;
            let j = index % numVertices;

            if (i < numVertices && j < numVertices) {
                let ik = i * numVertices + k;
                let kj = k * numVertices + j;
                let newDist = distanceMatrix[ik] + distanceMatrix[kj];

                if (newDist < distanceMatrix[index]) {
                    distanceMatrix[index] = newDist;
                    predecessorMatrix[index] = predecessorMatrix[ik];
                }
            }
        }
    }
}`,WJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer : array<f32>;

const WORKGROUP_SIZE = 1u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id : vec3<u32>, @builtin(local_invocation_id) local_id : vec3<u32>) {

    var max_value: f32 = -1e10;

    // 
    for (var i: u32 = 0; i < arrayLength(&distanceMatrix); i = i + 1) {
        let value = distanceMatrix[i];
        if (value !== 1e10 && value > max_value) {
            max_value = value;
        }
    }
    // 
    maxValueBuffer[0] = max_value;
}
`,XJ=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer: array<f32>;
@group(0) @binding(8) var<storage, read_write> transportationCostBuffer: array<f32>;
@group(0) @binding(9) var<storage, read_write> transportationCostMatrix: array<f32>;

@compute @workgroup_size(64)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {

  let i = global_id.x;
  if(distanceMatrix[i] != f32(1e10)) {
    let normalized = exp(transportationCostBuffer[0] * distanceMatrix[i] / maxValueBuffer[0]);
    transportationCostMatrix[i] = normalized;
  }else{
    transportationCostMatrix[i] = f32(1e10);
  }
}
 `,YJ=t=>t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:6,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:7,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:8,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage",minBindingSize:4}},{binding:9,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),qJ=async()=>{var e;const t=await((e=navigator.gpu)==null?void 0:e.requestAdapter());if(!t)throw new Error("GPU Adapter is not available");return await t.requestDevice()},kD=({device:t,vertexBuffer:e,edgeBuffer:n,transportationCostBuffer:r},i,s,o)=>{const a=new Map;i.forEach((u,h)=>{a.set(u.id,h)});const l=new Float32Array(i.length*2),c=new Uint32Array(s.length*2);if(l.set(i.flatMap(u=>u.point)),c.set(s.flatMap(u=>{const h=a.get(u.source),f=a.get(u.target);return[h!==void 0?h:-1,f!==void 0?f:-1]})),t.queue.writeBuffer(e,0,l),t.queue.writeBuffer(n,0,c),o!==void 0){const u=Math.log(o);t.queue.writeBuffer(r,0,new Float32Array([u]))}},KJ=async(t,e)=>{const n=await qJ(),r=YJ(n),i=n.createShaderModule({code:GJ()}),s=n.createShaderModule({code:HJ()}),o=n.createShaderModule({code:VJ()}),a=n.createShaderModule({code:WJ()}),l=n.createShaderModule({code:XJ()}),c=t**2*4,u=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(u,0,new Uint32Array([t]));const h=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(h,0,new Uint32Array([e]));const f=n.createBuffer({size:t*2*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),g=n.createBuffer({size:Math.max(4,e*2*4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),m=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),y=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),x=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),b=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),w=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),v=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),E=new ArrayBuffer(t*4*2),S=new ArrayBuffer(Math.max(4,e*4*2)),C=n.createBindGroup({entries:[{binding:0,resource:{buffer:u}},{binding:1,resource:{buffer:h}},{binding:2,resource:{buffer:f}},{binding:3,resource:{buffer:g}},{binding:4,resource:{buffer:m}},{binding:5,resource:{buffer:y}},{binding:6,resource:{buffer:x}},{binding:7,resource:{buffer:b}},{binding:8,resource:{buffer:w}},{binding:9,resource:{buffer:v}}],layout:r}),R=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:i,entryPoint:"main"}}),I=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:s,entryPoint:"main"}}),L=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:o,entryPoint:"main"}}),O=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:a,entryPoint:"main"}}),B=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:l,entryPoint:"main"}});return{device:n,numVertices:t,numEdges:e,matrixSize:c,vertexData:E,edgeData:S,vertexBuffer:f,edgeBuffer:g,bindGroup:C,initializeAdjacencyMatrixShaderModule:i,createAdjacencyMatrixShaderModule:s,createDistanceAndPredecessorMatrixShaderModule:o,findMaxValueShaderModule:a,createTransportationCostMatrixShaderModule:l,adjacencyMatrixBuffer:m,distanceMatrixBuffer:y,predecessorMatrixBuffer:x,maxValueBuffer:b,transportationCostBuffer:w,transportationCostMatrixBuffer:v,initializeAdjacencyMatrixPipeline:R,createAdjacencyMatrixPipeline:I,createDistanceAndPredecessorMatrixPipeline:L,findMaxValuePipeline:O,createTransportationCostMatrixPipeline:B}},Qm=(t,e,n,r,i,s,o)=>{const a=t.createCommandEncoder(),l=a.beginComputePass();return l.setPipeline(r),l.setBindGroup(e,n),l.dispatchWorkgroups(i,s,o),l.end(),a},VT=t=>{const e=[Qm(t.device,0,t.bindGroup,t.initializeAdjacencyMatrixPipeline,Math.ceil(t.matrixSize/64)),Qm(t.device,0,t.bindGroup,t.createAdjacencyMatrixPipeline,Math.max(1,Math.ceil(t.numEdges/64)))],n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return e[1].copyBufferToBuffer(t.adjacencyMatrixBuffer,0,n,0,t.matrixSize),{adjacencyMatrixReadBuffer:n,gpuCommandBuffers:e.map(r=>r.finish())}},WT=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=fp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},DD=t=>{const e=Qm(t.device,0,t.bindGroup,t.createDistanceAndPredecessorMatrixPipeline,Math.ceil(t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.distanceMatrixBuffer,0,n,0,t.matrixSize),e.copyBufferToBuffer(t.predecessorMatrixBuffer,0,r,0,t.matrixSize);const i=e.finish();return{distanceMatrixReadBuffer:n,predecessorMatrixReadBuffer:r,gpuCommandBuffer:i}},ND=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=fp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},FD=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Int32Array(t.getMappedRange()),r=fp(e,(i,s)=>n[i*e+s]);return t.unmap(),r},ZJ=t=>{const e=Qm(t.device,0,t.bindGroup,t.findMaxValuePipeline,1),n=t.device.createBuffer({size:4,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.maxValueBuffer,0,n,0,4);const r=e.finish();return{maxValueReadBuffer:n,gpuCommandBuffer:r}},QJ=t=>{const e=Qm(t.device,0,t.bindGroup,t.createTransportationCostMatrixPipeline,Math.ceil(t.numVertices*t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.transportationCostMatrixBuffer,0,n,0,t.matrixSize);const r=e.finish();return{transportationCostMatrixReadBuffer:n,gpuCommandBuffer:r}},JJ=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=fp(e,(i,s)=>n[i*e+s]);return t.unmap(),r};class eee extends H${constructor(e,n){super(e,n)}async update(e,n,r){return(!this.resources||this.resources.numVertices!==e.length||this.resources.numEdges!==n.length)&&(this.resources=await KJ(e.length,n.length)),kD(this.resources,e,n,r),this.resources}async createAdjacencyMatrix(e,n,r){const i=await this.update(e,n,r),{gpuCommandBuffers:s,adjacencyMatrixReadBuffer:o}=VT(i);i.device.queue.submit(s);const a=await WT(o,i.numVertices);return this.adjacencyMatrix=a}async createDistanceAndPredecessorMatrix(e,n,r){const i=await this.update(e,n,r);kD(i,e,n,r);const{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=VT(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=DD(i);i.device.queue.submit(o.concat(c));const u=await WT(s,i.numVertices),h=await ND(a,i.numVertices),f=await FD(l,i.numVertices);return this.adjacencyMatrix=u,this.distanceMatrix=h,this.predecessorMatrix=f,Promise.resolve([h,f])}async createTransportationCostMatrix(e,n,r){const i=await this.update(e,n,r),{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=VT(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=DD(i),{maxValueReadBuffer:u,gpuCommandBuffer:h}=ZJ(i),{transportationCostMatrixReadBuffer:f,gpuCommandBuffer:g}=QJ(i);i.device.queue.submit(o.concat(c).concat([h,g]));const m=await WT(s,i.numVertices),y=await ND(a,i.numVertices),x=await FD(l,i.numVertices),b=await JJ(f,i.numVertices);return this.adjacencyMatrix=m,this.distanceMatrix=y,this.predecessorMatrix=x,this.transportationCostMatrix=b,Promise.resolve(b)}}const ad=16;function BD(t){const e=t.length,n=new Array(e),r=new Array(e);for(let i=0;i<e;i++){n[i]=new Array(e),r[i]=new Array(e);for(let s=0;s<e;s++)n[i][s]=t[i][s],r[i][s]=s}for(let i=0;i<e;i+=ad)for(let s=0;s<e;s+=ad)for(let o=0;o<e;o+=ad)for(let a=i;a<Math.min(e,i+ad);a++)for(let l=s;l<Math.min(e,s+ad);l++)for(let c=o;c<Math.min(e,o+ad);c++)n[l][a]+n[a][c]<n[l][c]&&(n[l][c]=n[l][a]+n[a][c],r[l][c]=r[l][a]);for(let i=0;i<e;i++)for(let s=0;s<e;s++)for(let o=0;o<e;o++)n[s][i]+n[i][o]<n[s][o]&&(n[s][o]=n[s][i]+n[i][o],r[s][o]=r[s][i]);return[n,r]}function zD(t,e){const n=fp(t.length,(i,s)=>i!==s?Number.POSITIVE_INFINITY:0),r=new Map(t.map((i,s)=>[i.id,s]));return e.forEach(i=>{const s=i.distance||(i.distance=MJ(t,i.source,i.target)),o=r.get(i.source),a=r.get(i.target);o!==void 0&&a!==void 0&&(n[o][a]=s,n[a][o]=s)}),n}function UD(t,e){const n=t.length;let r=0;for(let o=0;o<n;o++)if(t&&o<t.length)for(let a=0;a<n;a++)a<t[o].length&&t[o][a]!==Number.POSITIVE_INFINITY&&(r=Math.max(t[o][a],r));const i=fp(n,(o,a)=>o!==a?Number.POSITIVE_INFINITY:0);if(r===0)return i;const s=Math.log(e);for(let o=0;o<n;o++)if(t&&o<t.length){for(let a=o;a<n;a++)if(a<t[o].length)if(t[o][a]!==Number.POSITIVE_INFINITY){const l=t[o][a]/r;i[a][o]=i[o][a]=Math.exp(s*l)}else i[a][o]=i[o][a]=Number.POSITIVE_INFINITY}return i}class $D extends H${createAdjacencyMatrix(e,n){return Promise.resolve(this.adjacencyMatrix=zD(e,n))}async createDistanceAndPredecessorMatrix(e,n,r){const[i,s]=BD(await this.getAdjacencyMatrix(e,n,r));return this.distanceMatrix=i,this.predecessorMatrix=s,Promise.resolve([this.distanceMatrix,this.predecessorMatrix])}async createTransportationCostMatrix(e,n,r){const i=UD(await this.getDistanceMatrix(e,n,r),r);return this.transportationCostMatrix=i,Promise.resolve(i)}async createMatrices(e,n,r){const i=zD(e,n),[s,o]=BD(i),a=UD(s,r);return this.adjacencyMatrix=i,this.distanceMatrix=s,this.predecessorMatrix=o,this.transportationCostMatrix=a,Promise.resolve({adjacencyMatrix:i,distanceMatrix:s,predecessorMatrix:o,transportationCostMatrix:a})}}const VP={GPUMatrixEngine:"GPUFloydWarshall",CPUMatrixEngine:"CPUFloydWarshall"},V$=VP.CPUMatrixEngine,tee=new URLSearchParams(window.location.search),jD=tee.get("engine")||V$,GD=(t,e)=>jD===VP.CPUMatrixEngine?new $D(t,e):jD===VP.GPUMatrixEngine?new eee(t,e):new $D(t,e),nee={maxRowColLength:30,matrixEngineType:V$},ree=k0(nee);function iee(t){const e=t.map(n=>n.manufactureShare).reduce((n,r)=>n+r,0);t.forEach(n=>{n.manufactureShare=n.manufactureShare/e})}const see=50;function oee(t,e){om(see).forEach(()=>{t.locations.forEach((r,i)=>{pQ(r)}),t.locations.forEach((r,i)=>{r.income=gQ(t.parameterSet.manufactureShare,r)}),t.locations.forEach((r,i)=>{r.priceIndex=mQ(t.locations,t.parameterSet.elasticitySubstitution,e,r,i)}),t.locations.forEach((r,i)=>{r.nominalWage=yQ(t.locations,t.parameterSet.elasticitySubstitution,e,i)}),t.locations.forEach((r,i)=>{r.realWage=vQ(t.parameterSet.manufactureShare,r)})});const n=t.locations.map(r=>r.realWage*r.manufactureShare).reduce((r,i)=>r+i,0);t.locations.forEach((r,i)=>{r.manufactureShare+=bQ(t.parameterSet.numLocations,t.parameterSet.elasticitySubstitution,n,r)}),iee(t.locations)}function aee(t,e){const[n,r]=P.useState(GD(t,e));return P.useEffect(()=>{r(GD(t,e))},[t,e]),n}const lee={black:"#000",white:"#fff"},Jm=lee,cee={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ld=cee,uee={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},cd=uee,hee={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ud=hee,dee={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},hd=dee,fee={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},dd=fee,pee={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},tg=pee,gee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mee=gee;function nu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const B0="$$material";function Qe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var yee=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vee=NU(function(t){return yee.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),bee=cR(function(t,e){var n=t.styles,r=gx([n],void 0,P.useContext(yx)),i=P.useRef();return zk(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),zk(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&lR(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function bI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return gx(e)}var z0=function(){var e=bI.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},_ee=vee,xee=function(e){return e!=="theme"},HD=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?_ee:xee},VD=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},wee=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return aR(n,r,i),VU(function(){return lR(n,r,i)}),null},Eee=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=VD(e,n,r),l=a||HD(i),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{h.push(u[0][0]);for(var f=u.length,g=1;g<f;g++)h.push(u[g],u[0][g])}var m=cR(function(y,x,b){var w=c&&y.as||i,v="",E=[],S=y;if(y.theme==null){S={};for(var C in y)S[C]=y[C];S.theme=P.useContext(yx)}typeof y.className=="string"?v=jU(x.registered,E,y.className):y.className!=null&&(v=y.className+" ");var R=gx(h.concat(E),x.registered,S);v+=x.key+"-"+R.name,o!==void 0&&(v+=" "+o);var I=c&&a===void 0?HD(w):l,L={};for(var O in y)c&&O==="as"||I(O)&&(L[O]=y[O]);return L.className=v,L.ref=b,P.createElement(P.Fragment,null,P.createElement(wee,{cache:x,serialized:R,isStringTag:typeof w=="string"}),P.createElement(w,L))});return m.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=h,m.__emotion_forwardProp=a,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(y,x){return t(y,$({},n,x,{shouldForwardProp:VD(m,x,!0)})).apply(void 0,h)},m}},Tee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],It=Eee.bind();Tee.forEach(function(t){It[t]=It(t)});var W$={exports:{}},See="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cee=See,Pee=Cee;function X$(){}function Y$(){}Y$.resetWarningCache=X$;var Aee=function(){function t(r,i,s,o,a,l){if(l!==Pee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Y$,resetWarningCache:X$};return n.PropTypes=n,n};W$.exports=Aee();var Wl=W$.exports;const Ln=Ih(Wl);function Ree(t){return t==null||Object.keys(t).length===0}function Iee(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Ree(i)?n:i):e;return Q.jsx(bee,{styles:r})}function q$(t,e){return It(t,e)}const Mee=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function El(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function K$(t){if(!El(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=K$(t[n])}),e}function ss(t,e,n={clone:!0}){const r=n.clone?$({},t):t;return El(t)&&El(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(El(e[i])&&i in t&&El(t[i])?r[i]=ss(t[i],e[i],n):n.clone?r[i]=El(e[i])?K$(e[i]):e[i]:r[i]=e[i])}),r}var En={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I=Symbol.for("react.element"),xI=Symbol.for("react.portal"),jx=Symbol.for("react.fragment"),Gx=Symbol.for("react.strict_mode"),Hx=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Wx=Symbol.for("react.context"),Oee=Symbol.for("react.server_context"),Xx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),qx=Symbol.for("react.suspense_list"),Kx=Symbol.for("react.memo"),Zx=Symbol.for("react.lazy"),Lee=Symbol.for("react.offscreen"),Z$;Z$=Symbol.for("react.module.reference");function Po(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _I:switch(t=t.type,t){case jx:case Hx:case Gx:case Yx:case qx:return t;default:switch(t=t&&t.$$typeof,t){case Oee:case Wx:case Xx:case Zx:case Kx:case Vx:return t;default:return e}}case xI:return e}}}En.ContextConsumer=Wx;En.ContextProvider=Vx;En.Element=_I;En.ForwardRef=Xx;En.Fragment=jx;En.Lazy=Zx;En.Memo=Kx;En.Portal=xI;En.Profiler=Hx;En.StrictMode=Gx;En.Suspense=Yx;En.SuspenseList=qx;En.isAsyncMode=function(){return!1};En.isConcurrentMode=function(){return!1};En.isContextConsumer=function(t){return Po(t)===Wx};En.isContextProvider=function(t){return Po(t)===Vx};En.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_I};En.isForwardRef=function(t){return Po(t)===Xx};En.isFragment=function(t){return Po(t)===jx};En.isLazy=function(t){return Po(t)===Zx};En.isMemo=function(t){return Po(t)===Kx};En.isPortal=function(t){return Po(t)===xI};En.isProfiler=function(t){return Po(t)===Hx};En.isStrictMode=function(t){return Po(t)===Gx};En.isSuspense=function(t){return Po(t)===Yx};En.isSuspenseList=function(t){return Po(t)===qx};En.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jx||t===Hx||t===Gx||t===Yx||t===qx||t===Lee||typeof t=="object"&&t!==null&&(t.$$typeof===Zx||t.$$typeof===Kx||t.$$typeof===Vx||t.$$typeof===Wx||t.$$typeof===Xx||t.$$typeof===Z$||t.getModuleId!==void 0)};En.typeOf=Po;function $e(t){if(typeof t!="string")throw new Error(nu(7));return t.charAt(0).toUpperCase()+t.slice(1)}function WP(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function wI(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function kee(t,e){return()=>null}function q1(t,e){var n,r;return P.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function or(t){return t&&t.ownerDocument||document}function ru(t){return or(t).defaultView||window}function Dee(t,e){return()=>null}function Jb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const $s=typeof window<"u"?P.useLayoutEffect:P.useEffect;let WD=0;function Nee(t){const[e,n]=P.useState(t),r=t||e;return P.useEffect(()=>{e==null&&(WD+=1,n(`mui-${WD}`))},[e]),r}const XD=bb.useId;function Qx(t){if(XD!==void 0){const e=XD();return t??e}return Nee(t)}function Fee(t,e,n,r,i){return null}function Df({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=P.useRef(t!==void 0),[s,o]=P.useState(e),a=i?t:s,l=P.useCallback(c=>{i||o(c)},[]);return[a,l]}function Pi(t){const e=P.useRef(t);return $s(()=>{e.current=t}),P.useRef((...n)=>(0,e.current)(...n)).current}function Vn(...t){return P.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Jb(n,e)})},t)}let Jx=!0,XP=!1,YD;const Bee={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function zee(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Bee[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Uee(t){t.metaKey||t.altKey||t.ctrlKey||(Jx=!0)}function XT(){Jx=!1}function $ee(){this.visibilityState==="hidden"&&XP&&(Jx=!0)}function jee(t){t.addEventListener("keydown",Uee,!0),t.addEventListener("mousedown",XT,!0),t.addEventListener("pointerdown",XT,!0),t.addEventListener("touchstart",XT,!0),t.addEventListener("visibilitychange",$ee,!0)}function Gee(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Jx||zee(e)}function ew(){const t=P.useCallback(i=>{i!=null&&jee(i.ownerDocument)},[]),e=P.useRef(!1);function n(){return e.current?(XP=!0,window.clearTimeout(YD),YD=window.setTimeout(()=>{XP=!1},100),e.current=!1,!0):!1}function r(i){return Gee(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Q$(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function J$(t){return P.Children.toArray(t).filter(e=>P.isValidElement(e))}const Hee={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Vee=Hee;function tw(t,e){const n=$({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=$({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=$({},s),Object.keys(i).forEach(o=>{n[r][o]=tw(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function $t(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const qD=t=>t,Wee=()=>{let t=qD;return{configure(e){t=e},generate(e){return t(e)},reset(){t=qD}}},Xee=Wee(),EI=Xee,ej={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jt(t,e,n="Mui"){const r=ej[e];return r?`${n}-${r}`:`${EI.generate(t)}-${e}`}function Bt(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=jt(t,i,n)}),r}function Id(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Yee=["values","unit","step"],qee=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>$({},n,{[r.key]:r.val}),{})};function Kee(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Qe(t,Yee),s=qee(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,g){const m=o.indexOf(g);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(m!==-1&&typeof e[o[m]]=="number"?e[o[m]]:g)-r/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function h(f){const g=o.indexOf(f);return g===0?a(o[1]):g===o.length-1?l(o[g]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return $({keys:o,values:s,up:a,down:l,between:c,only:u,not:h,unit:n},i)}const Zee={borderRadius:4},Qee=Zee;function lm(t,e){return e?ss(t,e,{clone:!1}):t}const TI={xs:0,sm:600,md:900,lg:1200,xl:1536},KD={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${TI[t]}px)`};function Fl(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||KD;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||KD;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||TI).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function Jee(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function ete(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function nw(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function e_(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=nw(t,n)||r,e&&(i=e(i,r,t)),i}function yr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=nw(l,r)||{};return Fl(o,a,h=>{let f=e_(c,i,h);return h===f&&typeof h=="string"&&(f=e_(c,i,`${e}${h==="default"?"":$e(h)}`,h)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function tte(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const nte={m:"margin",p:"padding"},rte={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ZD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ite=tte(t=>{if(t.length>2)if(ZD[t])t=ZD[t];else return[t];const[e,n]=t.split(""),r=nte[e],i=rte[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),SI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],CI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...SI,...CI];function U0(t,e,n,r){var i;const s=(i=nw(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function tj(t){return U0(t,"spacing",8)}function $0(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function ste(t,e){return n=>t.reduce((r,i)=>(r[i]=$0(e,n),r),{})}function ote(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=ite(n),s=ste(i,r),o=t[n];return Fl(t,o,s)}function nj(t,e){const n=tj(t.theme);return Object.keys(t).map(r=>ote(t,e,r,n)).reduce(lm,{})}function tr(t){return nj(t,SI)}tr.propTypes={};tr.filterProps=SI;function nr(t){return nj(t,CI)}nr.propTypes={};nr.filterProps=CI;function ate(t=8){if(t.mui)return t;const e=tj({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function rw(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?lm(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function po(t){return typeof t!="number"?t:`${t}px solid`}function Ao(t,e){return yr({prop:t,themeKey:"borders",transform:e})}const lte=Ao("border",po),cte=Ao("borderTop",po),ute=Ao("borderRight",po),hte=Ao("borderBottom",po),dte=Ao("borderLeft",po),fte=Ao("borderColor"),pte=Ao("borderTopColor"),gte=Ao("borderRightColor"),mte=Ao("borderBottomColor"),yte=Ao("borderLeftColor"),vte=Ao("outline",po),bte=Ao("outlineColor"),iw=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=U0(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:$0(e,r)});return Fl(t,t.borderRadius,n)}return null};iw.propTypes={};iw.filterProps=["borderRadius"];rw(lte,cte,ute,hte,dte,fte,pte,gte,mte,yte,iw,vte,bte);const sw=t=>{if(t.gap!==void 0&&t.gap!==null){const e=U0(t.theme,"spacing",8),n=r=>({gap:$0(e,r)});return Fl(t,t.gap,n)}return null};sw.propTypes={};sw.filterProps=["gap"];const ow=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=U0(t.theme,"spacing",8),n=r=>({columnGap:$0(e,r)});return Fl(t,t.columnGap,n)}return null};ow.propTypes={};ow.filterProps=["columnGap"];const aw=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=U0(t.theme,"spacing",8),n=r=>({rowGap:$0(e,r)});return Fl(t,t.rowGap,n)}return null};aw.propTypes={};aw.filterProps=["rowGap"];const _te=yr({prop:"gridColumn"}),xte=yr({prop:"gridRow"}),wte=yr({prop:"gridAutoFlow"}),Ete=yr({prop:"gridAutoColumns"}),Tte=yr({prop:"gridAutoRows"}),Ste=yr({prop:"gridTemplateColumns"}),Cte=yr({prop:"gridTemplateRows"}),Pte=yr({prop:"gridTemplateAreas"}),Ate=yr({prop:"gridArea"});rw(sw,ow,aw,_te,xte,wte,Ete,Tte,Ste,Cte,Pte,Ate);function pf(t,e){return e==="grey"?e:t}const Rte=yr({prop:"color",themeKey:"palette",transform:pf}),Ite=yr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:pf}),Mte=yr({prop:"backgroundColor",themeKey:"palette",transform:pf});rw(Rte,Ite,Mte);function As(t){return t<=1&&t!==0?`${t*100}%`:t}const Ote=yr({prop:"width",transform:As}),PI=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||TI[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:As(n)}};return Fl(t,t.maxWidth,e)}return null};PI.filterProps=["maxWidth"];const Lte=yr({prop:"minWidth",transform:As}),kte=yr({prop:"height",transform:As}),Dte=yr({prop:"maxHeight",transform:As}),Nte=yr({prop:"minHeight",transform:As});yr({prop:"size",cssProperty:"width",transform:As});yr({prop:"size",cssProperty:"height",transform:As});const Fte=yr({prop:"boxSizing"});rw(Ote,PI,Lte,kte,Dte,Nte,Fte);const Bte={border:{themeKey:"borders",transform:po},borderTop:{themeKey:"borders",transform:po},borderRight:{themeKey:"borders",transform:po},borderBottom:{themeKey:"borders",transform:po},borderLeft:{themeKey:"borders",transform:po},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:po},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:iw},color:{themeKey:"palette",transform:pf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:pf},backgroundColor:{themeKey:"palette",transform:pf},p:{style:nr},pt:{style:nr},pr:{style:nr},pb:{style:nr},pl:{style:nr},px:{style:nr},py:{style:nr},padding:{style:nr},paddingTop:{style:nr},paddingRight:{style:nr},paddingBottom:{style:nr},paddingLeft:{style:nr},paddingX:{style:nr},paddingY:{style:nr},paddingInline:{style:nr},paddingInlineStart:{style:nr},paddingInlineEnd:{style:nr},paddingBlock:{style:nr},paddingBlockStart:{style:nr},paddingBlockEnd:{style:nr},m:{style:tr},mt:{style:tr},mr:{style:tr},mb:{style:tr},ml:{style:tr},mx:{style:tr},my:{style:tr},margin:{style:tr},marginTop:{style:tr},marginRight:{style:tr},marginBottom:{style:tr},marginLeft:{style:tr},marginX:{style:tr},marginY:{style:tr},marginInline:{style:tr},marginInlineStart:{style:tr},marginInlineEnd:{style:tr},marginBlock:{style:tr},marginBlockStart:{style:tr},marginBlockEnd:{style:tr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:sw},rowGap:{style:aw},columnGap:{style:ow},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:As},maxWidth:{style:PI},minWidth:{transform:As},height:{transform:As},maxHeight:{transform:As},minHeight:{transform:As},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},lw=Bte;function zte(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Ute(t,e){return typeof t=="function"?t(e):t}function $te(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=nw(i,c)||{};return h?h(o):Fl(o,r,m=>{let y=e_(f,u,m);return m===y&&typeof m=="string"&&(y=e_(f,u,`${n}${m==="default"?"":$e(m)}`,m)),l===!1?y:{[l]:y}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:lw;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=Jee(s.breakpoints),h=Object.keys(u);let f=u;return Object.keys(c).forEach(g=>{const m=Ute(c[g],s);if(m!=null)if(typeof m=="object")if(o[g])f=lm(f,t(g,m,s,o));else{const y=Fl({theme:s},m,x=>({[g]:x}));zte(y,m)?f[g]=e({sx:m,theme:s}):f=lm(f,y)}else f=lm(f,t(g,m,s,o))}),ete(h,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const rj=$te();rj.filterProps=["sx"];const cw=rj,jte=["breakpoints","palette","spacing","shape"];function AI(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Qe(t,jte),a=Kee(n),l=ate(i);let c=ss({breakpoints:a,direction:"ltr",components:{},palette:$({mode:"light"},r),spacing:l,shape:$({},Qee,s)},o);return c=e.reduce((u,h)=>ss(u,h),c),c.unstable_sxConfig=$({},lw,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return cw({sx:h,theme:this})},c}function Gte(t){return Object.keys(t).length===0}function ij(t=null){const e=P.useContext(yx);return!e||Gte(e)?t:e}const Hte=AI();function uw(t=Hte){return ij(t)}function Vte({styles:t,themeId:e,defaultTheme:n={}}){const r=uw(n),i=typeof t=="function"?t(e&&r[e]||r):t;return Q.jsx(Iee,{styles:i})}const Wte=["sx"],Xte=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:lw;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function sj(t){const{sx:e}=t,n=Qe(t,Wte),{systemProps:r,otherProps:i}=Xte(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return El(a)?$({},r,a):r}:s=$({},r,e),$({},i,{sx:s})}function oj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function at(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oj(t))&&(r&&(r+=" "),r+=e);return r}const Yte=["className","component"];function qte(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=q$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(cw);return P.forwardRef(function(l,c){const u=uw(n),h=sj(l),{className:f,component:g="div"}=h,m=Qe(h,Yte);return Q.jsx(s,$({as:g,ref:c,className:at(f,i?i(r):r),theme:e&&u[e]||u},m))})}const Kte=["variant"];function QD(t){return t.length===0}function aj(t){const{variant:e}=t,n=Qe(t,Kte);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=QD(r)?t[i]:$e(t[i]):r+=`${QD(r)?i:$e(i)}${$e(t[i].toString())}`}),r}const Zte=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Qte(t){return Object.keys(t).length===0}function Jte(t){return typeof t=="string"&&t.charCodeAt(0)>96}const ene=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,t_=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=aj(r.props),n[i]=r.style}),n},tne=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),t_(n)},n_=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=$({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[aj(o.props)])),typeof o.props=="function"&&(s+=1)}),i},nne=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return n_(t,e,s)};function cm(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rne=AI(),ine=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function K1({defaultTheme:t,theme:e,themeId:n}){return Qte(e)?t:e[n]||e}function sne(t){return t?(e,n)=>n[t]:null}const JD=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t($({},e,{theme:K1($({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=n_(e,t_(s),s);return[i,...o]}return i};function one(t={}){const{themeId:e,defaultTheme:n=rne,rootShouldForwardProp:r=cm,slotShouldForwardProp:i=cm}=t,s=o=>cw($({},o,{theme:K1($({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Mee(o,E=>E.filter(S=>!(S!=null&&S.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:h,overridesResolver:f=sne(ine(c))}=a,g=Qe(a,Zte),m=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,y=h||!1;let x,b=cm;c==="Root"||c==="root"?b=r:c?b=i:Jte(o)&&(b=void 0);const w=q$(o,$({shouldForwardProp:b,label:x},g)),v=(E,...S)=>{const C=S?S.map(O=>{if(typeof O=="function"&&O.__emotion_real!==O)return B=>JD({styledArg:O,props:B,defaultTheme:n,themeId:e});if(El(O)){let B=O,M;return O&&O.variants&&(M=O.variants,delete B.variants,B=D=>{let N=O;return n_(D,t_(M),M).forEach(W=>{N=ss(N,W)}),N}),B}return O}):[];let R=E;if(El(E)){let O;E&&E.variants&&(O=E.variants,delete R.variants,R=B=>{let M=E;return n_(B,t_(O),O).forEach(N=>{M=ss(M,N)}),M})}else typeof E=="function"&&E.__emotion_real!==E&&(R=O=>JD({styledArg:E,props:O,defaultTheme:n,themeId:e}));l&&f&&C.push(O=>{const B=K1($({},O,{defaultTheme:n,themeId:e})),M=ene(l,B);if(M){const D={};return Object.entries(M).forEach(([N,j])=>{D[N]=typeof j=="function"?j($({},O,{theme:B})):j}),f(O,D)}return null}),l&&!m&&C.push(O=>{const B=K1($({},O,{defaultTheme:n,themeId:e}));return nne(O,tne(l,B),B,l)}),y||C.push(s);const I=C.length-S.length;if(Array.isArray(E)&&I>0){const O=new Array(I).fill("");R=[...E,...O],R.raw=[...E.raw,...O]}const L=w(R,...C);return o.muiName&&(L.muiName=o.muiName),L};return w.withConfig&&(v.withConfig=w.withConfig),v}}function ane(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:tw(e.components[n].defaultProps,r)}function lne({props:t,name:e,defaultTheme:n,themeId:r}){let i=uw(n);return r&&(i=i[r]||i),ane({theme:i,name:e,props:t})}function RI(t,e=0,n=1){return Id(t,e,n)}function cne(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ph(t){if(t.type)return t;if(t.charAt(0)==="#")return Ph(cne(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(nu(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(nu(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function hw(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function une(t){t=Ph(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),hw({type:a,values:l})}function eN(t){t=Ph(t);let e=t.type==="hsl"||t.type==="hsla"?Ph(une(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hne(t,e){const n=eN(t),r=eN(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Rn(t,e){return t=Ph(t),e=RI(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,hw(t)}function lj(t,e){if(t=Ph(t),e=RI(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return hw(t)}function cj(t,e){if(t=Ph(t),e=RI(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return hw(t)}function dne(t,e){return $({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const fne=["mode","contrastThreshold","tonalOffset"],tN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Jm.white,default:Jm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},YT={text:{primary:Jm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Jm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function nN(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=cj(t.main,i):e==="dark"&&(t.dark=lj(t.main,s)))}function pne(t="light"){return t==="dark"?{main:ud[200],light:ud[50],dark:ud[400]}:{main:ud[700],light:ud[400],dark:ud[800]}}function gne(t="light"){return t==="dark"?{main:cd[200],light:cd[50],dark:cd[400]}:{main:cd[500],light:cd[300],dark:cd[700]}}function mne(t="light"){return t==="dark"?{main:ld[500],light:ld[300],dark:ld[700]}:{main:ld[700],light:ld[400],dark:ld[800]}}function yne(t="light"){return t==="dark"?{main:hd[400],light:hd[300],dark:hd[700]}:{main:hd[700],light:hd[500],dark:hd[900]}}function vne(t="light"){return t==="dark"?{main:dd[400],light:dd[300],dark:dd[700]}:{main:dd[800],light:dd[500],dark:dd[900]}}function bne(t="light"){return t==="dark"?{main:tg[400],light:tg[300],dark:tg[700]}:{main:"#ed6c02",light:tg[500],dark:tg[900]}}function _ne(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Qe(t,fne),s=t.primary||pne(e),o=t.secondary||gne(e),a=t.error||mne(e),l=t.info||yne(e),c=t.success||vne(e),u=t.warning||bne(e);function h(y){return hne(y,YT.text.primary)>=n?YT.text.primary:tN.text.primary}const f=({color:y,name:x,mainShade:b=500,lightShade:w=300,darkShade:v=700})=>{if(y=$({},y),!y.main&&y[b]&&(y.main=y[b]),!y.hasOwnProperty("main"))throw new Error(nu(11,x?` (${x})`:"",b));if(typeof y.main!="string")throw new Error(nu(12,x?` (${x})`:"",JSON.stringify(y.main)));return nN(y,"light",w,r),nN(y,"dark",v,r),y.contrastText||(y.contrastText=h(y.main)),y},g={dark:YT,light:tN};return ss($({common:$({},Jm),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:mee,contrastThreshold:n,getContrastText:h,augmentColor:f,tonalOffset:r},g[e]),i)}const xne=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function wne(t){return Math.round(t*1e5)/1e5}const rN={textTransform:"uppercase"},iN='"Roboto", "Helvetica", "Arial", sans-serif';function Ene(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=iN,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,f=Qe(n,xne),g=i/14,m=h||(b=>`${b/c*g}rem`),y=(b,w,v,E,S)=>$({fontFamily:r,fontWeight:b,fontSize:m(w),lineHeight:v},r===iN?{letterSpacing:`${wne(E/w)}em`}:{},S,u),x={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,rN),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,rN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ss($({htmlFontSize:c,pxToRem:m,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},x),f,{clone:!1})}const Tne=.2,Sne=.14,Cne=.12;function $n(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Tne})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Sne})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Cne})`].join(",")}const Pne=["none",$n(0,2,1,-1,0,1,1,0,0,1,3,0),$n(0,3,1,-2,0,2,2,0,0,1,5,0),$n(0,3,3,-2,0,3,4,0,0,1,8,0),$n(0,2,4,-1,0,4,5,0,0,1,10,0),$n(0,3,5,-1,0,5,8,0,0,1,14,0),$n(0,3,5,-1,0,6,10,0,0,1,18,0),$n(0,4,5,-2,0,7,10,1,0,2,16,1),$n(0,5,5,-3,0,8,10,1,0,3,14,2),$n(0,5,6,-3,0,9,12,1,0,3,16,2),$n(0,6,6,-3,0,10,14,1,0,4,18,3),$n(0,6,7,-4,0,11,15,1,0,4,20,3),$n(0,7,8,-4,0,12,17,2,0,5,22,4),$n(0,7,8,-4,0,13,19,2,0,5,24,4),$n(0,7,9,-4,0,14,21,2,0,5,26,4),$n(0,8,9,-5,0,15,22,2,0,6,28,5),$n(0,8,10,-5,0,16,24,2,0,6,30,5),$n(0,8,11,-5,0,17,26,2,0,6,32,5),$n(0,9,11,-5,0,18,28,2,0,7,34,6),$n(0,9,12,-6,0,19,29,2,0,7,36,6),$n(0,10,13,-6,0,20,31,3,0,8,38,7),$n(0,10,13,-6,0,21,33,3,0,8,40,7),$n(0,10,14,-6,0,22,35,3,0,8,42,7),$n(0,11,14,-7,0,23,36,3,0,9,44,8),$n(0,11,15,-7,0,24,38,3,0,9,46,8)],Ane=["duration","easing","delay"],Rne={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function sN(t){return`${Math.round(t)}ms`}function Ine(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Mne(t){const e=$({},Rne,t.easing),n=$({},uj,t.duration);return $({getAutoHeightDuration:Ine,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Qe(s,Ane),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:sN(o)} ${a} ${typeof l=="string"?l:sN(l)}`).join(",")}},t,{easing:e,duration:n})}const One={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Lne=One,kne=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function hj(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Qe(t,kne);if(t.vars)throw new Error(nu(18));const a=_ne(r),l=AI(t);let c=ss(l,{mixins:dne(l.breakpoints,n),palette:a,shadows:Pne.slice(),typography:Ene(a,s),transitions:Mne(i),zIndex:$({},Lne),applyDarkStyles(u){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:u}:this.palette.mode==="dark"?u:{}}});return c=ss(c,o),c=e.reduce((u,h)=>ss(u,h),c),c.unstable_sxConfig=$({},lw,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(h){return cw({sx:h,theme:this})},c}const Dne=hj(),dw=Dne;function uu(){const t=uw(dw);return t[B0]||t}function Vt({props:t,name:e}){return lne({props:t,name:e,defaultTheme:dw,themeId:B0})}const cs=t=>cm(t)&&t!=="classes",II=cm,Be=one({themeId:B0,defaultTheme:dw,rootShouldForwardProp:cs}),oN=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Nne(t){return jt("MuiSvgIcon",t)}Bt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Fne=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Bne=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${$e(e)}`,`fontSize${$e(n)}`]};return $t(i,Nne,r)},zne=Be("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${$e(n.color)}`],e[`fontSize${$e(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,h,f,g,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(h=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?h:{action:(g=(t.vars||t).palette)==null||(g=g.action)==null?void 0:g.active,disabled:(m=(t.vars||t).palette)==null||(m=m.action)==null?void 0:m.disabled,inherit:void 0}[e.color]}}),r_=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:f="0 0 24 24"}=r,g=Qe(r,Fne),m=P.isValidElement(i)&&i.type==="svg",y=$({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:m}),x={};u||(x.viewBox=f);const b=Bne(y);return Q.jsxs(zne,$({as:a,className:at(b.root,s),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n},x,g,m&&i.props,{ownerState:y,children:[m?i.props.children:i,h?Q.jsx("title",{children:h}):null]}))});r_.muiName="SvgIcon";function Tt(t,e){function n(r,i){return Q.jsx(r_,$({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=r_.muiName,P.memo(P.forwardRef(n))}const Une={configure:t=>{EI.configure(t)}},$ne=Object.freeze(Object.defineProperty({__proto__:null,capitalize:$e,createChainedFunction:WP,createSvgIcon:Tt,debounce:wI,deprecatedPropType:kee,isMuiElement:q1,ownerDocument:or,ownerWindow:ru,requirePropFactory:Dee,setRef:Jb,unstable_ClassNameGenerator:Une,unstable_useEnhancedEffect:$s,unstable_useId:Qx,unsupportedProp:Fee,useControlled:Df,useEventCallback:Pi,useForkRef:Vn,useIsFocusVisible:ew},Symbol.toStringTag,{value:"Module"}));function YP(t,e){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YP(t,e)}function dj(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,YP(t,e)}const aN={disabled:!1},i_=An.createContext(null);var jne=function(e){return e.scrollTop},Ig="unmounted",Bu="exited",zu="entering",Md="entered",qP="exiting",Xl=function(t){dj(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Bu,s.appearStatus=zu):l=Md:r.unmountOnExit||r.mountOnEnter?l=Ig:l=Bu,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Ig?{status:Bu}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==zu&&o!==Md&&(s=zu):(o===zu||o===Md)&&(s=qP)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===zu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Rg.findDOMNode(this);o&&jne(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bu&&this.setState({status:Ig})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Rg.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),f=a?h.appear:h.enter;if(!i&&!o||aN.disabled){this.safeSetState({status:Md},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:zu},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:Md},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Rg.findDOMNode(this);if(!s||aN.disabled){this.safeSetState({status:Bu},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:qP},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Bu},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Rg.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Ig)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Qe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return An.createElement(i_.Provider,{value:null},typeof o=="function"?o(i,a):An.cloneElement(An.Children.only(o),a))},e}(An.Component);Xl.contextType=i_;Xl.propTypes={};function fd(){}Xl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fd,onEntering:fd,onEntered:fd,onExit:fd,onExiting:fd,onExited:fd};Xl.UNMOUNTED=Ig;Xl.EXITED=Bu;Xl.ENTERING=zu;Xl.ENTERED=Md;Xl.EXITING=qP;const MI=Xl;function Gne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OI(t,e){var n=function(s){return e&&P.isValidElement(s)?e(s):s},r=Object.create(null);return t&&P.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Hne(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Zu(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Vne(t,e){return OI(t.children,function(n){return P.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Zu(n,"appear",t),enter:Zu(n,"enter",t),exit:Zu(n,"exit",t)})})}function Wne(t,e,n){var r=OI(t.children),i=Hne(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=P.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Zu(o,"exit",t),enter:Zu(o,"enter",t)}):!l&&a&&!u?i[s]=P.cloneElement(o,{in:!1}):l&&a&&P.isValidElement(c)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Zu(o,"exit",t),enter:Zu(o,"enter",t)}))}}),i}var Xne=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Yne={component:"div",childFactory:function(e){return e}},LI=function(t){dj(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Gne(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Vne(i,a):Wne(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=OI(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=$({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Qe(i,["component","childFactory"]),l=this.state.contextValue,c=Xne(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?An.createElement(i_.Provider,{value:l},c):An.createElement(i_.Provider,{value:l},An.createElement(s,a,c))},e}(An.Component);LI.propTypes={};LI.defaultProps=Yne;const qne=LI,fj=t=>t.scrollTop;function Nf(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function Kne(t){return jt("MuiCollapse",t)}Bt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Zne=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Qne=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return $t(r,Kne,n)},Jne=Be("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>$({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&$({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),ere=Be("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>$({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),tre=Be("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>$({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),pj=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:h,onEntered:f,onEntering:g,onExit:m,onExited:y,onExiting:x,orientation:b="vertical",style:w,timeout:v=uj.standard,TransitionComponent:E=MI}=r,S=Qe(r,Zne),C=$({},r,{orientation:b,collapsedSize:a}),R=Qne(C),I=uu(),L=P.useRef(),O=P.useRef(null),B=P.useRef(),M=typeof a=="number"?`${a}px`:a,D=b==="horizontal",N=D?"width":"height";P.useEffect(()=>()=>{clearTimeout(L.current)},[]);const j=P.useRef(null),W=Vn(n,j),V=he=>Se=>{if(he){const le=j.current;Se===void 0?he(le):he(le,Se)}},U=()=>O.current?O.current[D?"clientWidth":"clientHeight"]:0,X=V((he,Se)=>{O.current&&D&&(O.current.style.position="absolute"),he.style[N]=M,h&&h(he,Se)}),Y=V((he,Se)=>{const le=U();O.current&&D&&(O.current.style.position="");const{duration:ae,easing:me}=Nf({style:w,timeout:v,easing:c},{mode:"enter"});if(v==="auto"){const oe=I.transitions.getAutoHeightDuration(le);he.style.transitionDuration=`${oe}ms`,B.current=oe}else he.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;he.style[N]=`${le}px`,he.style.transitionTimingFunction=me,g&&g(he,Se)}),Z=V((he,Se)=>{he.style[N]="auto",f&&f(he,Se)}),se=V(he=>{he.style[N]=`${U()}px`,m&&m(he)}),xe=V(y),de=V(he=>{const Se=U(),{duration:le,easing:ae}=Nf({style:w,timeout:v,easing:c},{mode:"exit"});if(v==="auto"){const me=I.transitions.getAutoHeightDuration(Se);he.style.transitionDuration=`${me}ms`,B.current=me}else he.style.transitionDuration=typeof le=="string"?le:`${le}ms`;he.style[N]=M,he.style.transitionTimingFunction=ae,x&&x(he)}),Me=he=>{v==="auto"&&(L.current=setTimeout(he,B.current||0)),i&&i(j.current,he)};return Q.jsx(E,$({in:u,onEnter:X,onEntered:Z,onEntering:Y,onExit:se,onExited:xe,onExiting:de,addEndListener:Me,nodeRef:j,timeout:v==="auto"?null:v},S,{children:(he,Se)=>Q.jsx(Jne,$({as:l,className:at(R.root,o,{entered:R.entered,exited:!u&&M==="0px"&&R.hidden}[he]),style:$({[D?"minWidth":"minHeight"]:M},w),ownerState:$({},C,{state:he}),ref:W},Se,{children:Q.jsx(ere,{ownerState:$({},C,{state:he}),className:R.wrapper,ref:O,children:Q.jsx(tre,{ownerState:$({},C,{state:he}),className:R.wrapperInner,children:s})})}))}))});pj.muiSupportAuto=!0;const gj=pj;function nre(t){return jt("MuiPaper",t)}Bt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rre=["className","component","elevation","square","variant"],ire=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return $t(s,nre,i)},sre=Be("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return $({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&$({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Rn("#fff",oN(e.elevation))}, ${Rn("#fff",oN(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),ore=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=Qe(r,rre),u=$({},r,{component:s,elevation:o,square:a,variant:l}),h=ire(u);return Q.jsx(sre,$({as:s,ownerState:u,className:at(h.root,i),ref:n},c))}),mj=ore;function Vc(t){return typeof t=="string"}function Mg(t,e,n){return t===void 0||Vc(t)?e:$({},e,{ownerState:$({},e.ownerState,n)})}function are(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const lre={disableDefaultClasses:!1},cre=P.createContext(lre);function ure(t){const{disableDefaultClasses:e}=P.useContext(cre);return n=>e?"":t(n)}function um(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function hre(t,e,n){return typeof t=="function"?t(e,n):t}function lN(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function dre(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const g=at(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),m=$({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),y=$({},n,i,r);return g.length>0&&(y.className=g),Object.keys(m).length>0&&(y.style=m),{props:y,internalRef:void 0}}const o=um($({},i,r)),a=lN(r),l=lN(i),c=e(o),u=at(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h=$({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=$({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(h).length>0&&(f.style=h),{props:f,internalRef:c.ref}}const fre=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Ei(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Qe(t,fre),a=s?{}:hre(r,i),{props:l,internalRef:c}=dre($({},o,{externalSlotProps:a})),u=Vn(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Mg(n,$({},l,{ref:u}),i)}function pre(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,h]=P.useState(!1),f=at(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),g={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},m=at(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&h(!0),P.useEffect(()=>{if(!a&&l!=null){const y=setTimeout(l,c);return()=>{clearTimeout(y)}}},[l,a,c]),Q.jsx("span",{className:f,style:g,children:Q.jsx("span",{className:m})})}const lo=Bt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),gre=["center","classes","className"];let fw=t=>t,cN,uN,hN,dN;const KP=550,mre=80,yre=z0(cN||(cN=fw`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),vre=z0(uN||(uN=fw`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),bre=z0(hN||(hN=fw`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),_re=Be("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),xre=Be(pre,{name:"MuiTouchRipple",slot:"Ripple"})(dN||(dN=fw`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),lo.rippleVisible,yre,KP,({theme:t})=>t.transitions.easing.easeInOut,lo.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,lo.child,lo.childLeaving,vre,KP,({theme:t})=>t.transitions.easing.easeInOut,lo.childPulsate,bre,({theme:t})=>t.transitions.easing.easeInOut),wre=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Qe(r,gre),[l,c]=P.useState([]),u=P.useRef(0),h=P.useRef(null);P.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const f=P.useRef(!1),g=P.useRef(0),m=P.useRef(null),y=P.useRef(null);P.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]);const x=P.useCallback(E=>{const{pulsate:S,rippleX:C,rippleY:R,rippleSize:I,cb:L}=E;c(O=>[...O,Q.jsx(xre,{classes:{ripple:at(s.ripple,lo.ripple),rippleVisible:at(s.rippleVisible,lo.rippleVisible),ripplePulsate:at(s.ripplePulsate,lo.ripplePulsate),child:at(s.child,lo.child),childLeaving:at(s.childLeaving,lo.childLeaving),childPulsate:at(s.childPulsate,lo.childPulsate)},timeout:KP,pulsate:S,rippleX:C,rippleY:R,rippleSize:I},u.current)]),u.current+=1,h.current=L},[s]),b=P.useCallback((E={},S={},C=()=>{})=>{const{pulsate:R=!1,center:I=i||S.pulsate,fakeElement:L=!1}=S;if((E==null?void 0:E.type)==="mousedown"&&f.current){f.current=!1;return}(E==null?void 0:E.type)==="touchstart"&&(f.current=!0);const O=L?null:y.current,B=O?O.getBoundingClientRect():{width:0,height:0,left:0,top:0};let M,D,N;if(I||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)M=Math.round(B.width/2),D=Math.round(B.height/2);else{const{clientX:j,clientY:W}=E.touches&&E.touches.length>0?E.touches[0]:E;M=Math.round(j-B.left),D=Math.round(W-B.top)}if(I)N=Math.sqrt((2*B.width**2+B.height**2)/3),N%2===0&&(N+=1);else{const j=Math.max(Math.abs((O?O.clientWidth:0)-M),M)*2+2,W=Math.max(Math.abs((O?O.clientHeight:0)-D),D)*2+2;N=Math.sqrt(j**2+W**2)}E!=null&&E.touches?m.current===null&&(m.current=()=>{x({pulsate:R,rippleX:M,rippleY:D,rippleSize:N,cb:C})},g.current=setTimeout(()=>{m.current&&(m.current(),m.current=null)},mre)):x({pulsate:R,rippleX:M,rippleY:D,rippleSize:N,cb:C})},[i,x]),w=P.useCallback(()=>{b({},{pulsate:!0})},[b]),v=P.useCallback((E,S)=>{if(clearTimeout(g.current),(E==null?void 0:E.type)==="touchend"&&m.current){m.current(),m.current=null,g.current=setTimeout(()=>{v(E,S)});return}m.current=null,c(C=>C.length>0?C.slice(1):C),h.current=S},[]);return P.useImperativeHandle(n,()=>({pulsate:w,start:b,stop:v}),[w,b,v]),Q.jsx(_re,$({className:at(lo.root,s.root,o),ref:y},a,{children:Q.jsx(qne,{component:null,exit:!0,children:l})}))}),Ere=wre;function Tre(t){return jt("MuiButtonBase",t)}const Sre=Bt("MuiButtonBase",["root","disabled","focusVisible"]),Cre=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Pre=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=$t({root:["root",e&&"disabled",n&&"focusVisible"]},Tre,i);return n&&r&&(o.root+=` ${r}`),o},Are=Be("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Sre.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Rre=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:f=!1,LinkComponent:g="a",onBlur:m,onClick:y,onContextMenu:x,onDragLeave:b,onFocus:w,onFocusVisible:v,onKeyDown:E,onKeyUp:S,onMouseDown:C,onMouseLeave:R,onMouseUp:I,onTouchEnd:L,onTouchMove:O,onTouchStart:B,tabIndex:M=0,TouchRippleProps:D,touchRippleRef:N,type:j}=r,W=Qe(r,Cre),V=P.useRef(null),U=P.useRef(null),X=Vn(U,N),{isFocusVisibleRef:Y,onFocus:Z,onBlur:se,ref:xe}=ew(),[de,Me]=P.useState(!1);c&&de&&Me(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{Me(!0),V.current.focus()}}),[]);const[he,Se]=P.useState(!1);P.useEffect(()=>{Se(!0)},[]);const le=he&&!u&&!c;P.useEffect(()=>{de&&f&&!u&&he&&U.current.pulsate()},[u,f,de,he]);function ae(Le,kt,wt=h){return Pi(Ot=>(kt&&kt(Ot),!wt&&U.current&&U.current[Le](Ot),!0))}const me=ae("start",C),oe=ae("stop",x),_e=ae("stop",b),pe=ae("stop",I),Ce=ae("stop",Le=>{de&&Le.preventDefault(),R&&R(Le)}),we=ae("start",B),Ye=ae("stop",L),ke=ae("stop",O),Oe=ae("stop",Le=>{se(Le),Y.current===!1&&Me(!1),m&&m(Le)},!1),rt=Pi(Le=>{V.current||(V.current=Le.currentTarget),Z(Le),Y.current===!0&&(Me(!0),v&&v(Le)),w&&w(Le)}),qe=()=>{const Le=V.current;return l&&l!=="button"&&!(Le.tagName==="A"&&Le.href)},He=P.useRef(!1),fn=Pi(Le=>{f&&!He.current&&de&&U.current&&Le.key===" "&&(He.current=!0,U.current.stop(Le,()=>{U.current.start(Le)})),Le.target===Le.currentTarget&&qe()&&Le.key===" "&&Le.preventDefault(),E&&E(Le),Le.target===Le.currentTarget&&qe()&&Le.key==="Enter"&&!c&&(Le.preventDefault(),y&&y(Le))}),Mt=Pi(Le=>{f&&Le.key===" "&&U.current&&de&&!Le.defaultPrevented&&(He.current=!1,U.current.stop(Le,()=>{U.current.pulsate(Le)})),S&&S(Le),y&&Le.target===Le.currentTarget&&qe()&&Le.key===" "&&!Le.defaultPrevented&&y(Le)});let pt=l;pt==="button"&&(W.href||W.to)&&(pt=g);const Te={};pt==="button"?(Te.type=j===void 0?"button":j,Te.disabled=c):(!W.href&&!W.to&&(Te.role="button"),c&&(Te["aria-disabled"]=c));const Ne=Vn(n,xe,V),Ke=$({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:f,tabIndex:M,focusVisible:de}),je=Pre(Ke);return Q.jsxs(Are,$({as:pt,className:at(je.root,a),ownerState:Ke,onBlur:Oe,onClick:y,onContextMenu:oe,onFocus:rt,onKeyDown:fn,onKeyUp:Mt,onMouseDown:me,onMouseLeave:Ce,onMouseUp:pe,onDragLeave:_e,onTouchEnd:Ye,onTouchMove:ke,onTouchStart:we,ref:Ne,tabIndex:c?-1:M,type:j},Te,W,{children:[o,le?Q.jsx(Ere,$({ref:X,center:s},D)):null]}))}),j0=Rre;function Ire(t){return jt("MuiIconButton",t)}const Mre=Bt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Ore=["edge","children","className","color","disabled","disableFocusRipple","size"],Lre=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${$e(r)}`,i&&`edge${$e(i)}`,`size${$e(s)}`]};return $t(o,Ire,e)},kre=Be(j0,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${$e(n.color)}`],n.edge&&e[`edge${$e(n.edge)}`],e[`size${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>$({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return $({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&$({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":$({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Mre.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Dre=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,h=Qe(r,Ore),f=$({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),g=Lre(f);return Q.jsx(kre,$({className:at(g.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:f},h,{children:s}))}),Wc=Dre;function Nre(t){return jt("MuiTypography",t)}Bt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Fre=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Bre=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${$e(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return $t(a,Nre,o)},zre=Be("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${$e(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>$({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),fN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ure={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},$re=t=>Ure[t]||t,jre=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiTypography"}),i=$re(r.color),s=sj($({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:h=!1,variant:f="body1",variantMapping:g=fN}=s,m=Qe(s,Fre),y=$({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:h,variant:f,variantMapping:g}),x=l||(h?"p":g[f]||fN[f])||"span",b=Bre(y);return Q.jsx(zre,$({as:x,ref:n,ownerState:y,className:at(b.root,a)},m))}),es=jre,yj="base";function Gre(t){return`${yj}--${t}`}function Hre(t,e){return`${yj}-${t}-${e}`}function vj(t,e){const n=ej[e];return n?Gre(n):Hre(t,e)}function Vre(t,e){const n={};return e.forEach(r=>{n[r]=vj(t,r)}),n}const Wre=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Xre(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function Yre(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function qre(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Yre(t))}function Kre(t){const e=[],n=[];return Array.from(t.querySelectorAll(Wre)).forEach((r,i)=>{const s=Xre(r);s===-1||!qre(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Zre(){return!0}function Qre(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Kre,isEnabled:o=Zre,open:a}=t,l=P.useRef(!1),c=P.useRef(null),u=P.useRef(null),h=P.useRef(null),f=P.useRef(null),g=P.useRef(!1),m=P.useRef(null),y=Vn(e.ref,m),x=P.useRef(null);P.useEffect(()=>{!a||!m.current||(g.current=!n)},[n,a]),P.useEffect(()=>{if(!a||!m.current)return;const v=or(m.current);return m.current.contains(v.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),g.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),P.useEffect(()=>{if(!a||!m.current)return;const v=or(m.current),E=R=>{x.current=R,!(r||!o()||R.key!=="Tab")&&v.activeElement===m.current&&R.shiftKey&&(l.current=!0,u.current&&u.current.focus())},S=()=>{const R=m.current;if(R===null)return;if(!v.hasFocus()||!o()||l.current){l.current=!1;return}if(R.contains(v.activeElement)||r&&v.activeElement!==c.current&&v.activeElement!==u.current)return;if(v.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!g.current)return;let I=[];if((v.activeElement===c.current||v.activeElement===u.current)&&(I=s(m.current)),I.length>0){var L,O;const B=!!((L=x.current)!=null&&L.shiftKey&&((O=x.current)==null?void 0:O.key)==="Tab"),M=I[0],D=I[I.length-1];typeof M!="string"&&typeof D!="string"&&(B?D.focus():M.focus())}else R.focus()};v.addEventListener("focusin",S),v.addEventListener("keydown",E,!0);const C=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&S()},50);return()=>{clearInterval(C),v.removeEventListener("focusin",S),v.removeEventListener("keydown",E,!0)}},[n,r,i,o,a,s]);const b=v=>{h.current===null&&(h.current=v.relatedTarget),g.current=!0,f.current=v.target;const E=e.props.onFocus;E&&E(v)},w=v=>{h.current===null&&(h.current=v.relatedTarget),g.current=!0};return Q.jsxs(P.Fragment,{children:[Q.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:c,"data-testid":"sentinelStart"}),P.cloneElement(e,{ref:y,onFocus:b}),Q.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:u,"data-testid":"sentinelEnd"})]})}var os="top",So="bottom",Co="right",as="left",kI="auto",G0=[os,So,Co,as],Ff="start",e0="end",Jre="clippingParents",bj="viewport",ng="popper",eie="reference",pN=G0.reduce(function(t,e){return t.concat([e+"-"+Ff,e+"-"+e0])},[]),_j=[].concat(G0,[kI]).reduce(function(t,e){return t.concat([e,e+"-"+Ff,e+"-"+e0])},[]),tie="beforeRead",nie="read",rie="afterRead",iie="beforeMain",sie="main",oie="afterMain",aie="beforeWrite",lie="write",cie="afterWrite",uie=[tie,nie,rie,iie,sie,oie,aie,lie,cie];function Za(t){return t?(t.nodeName||"").toLowerCase():null}function js(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ah(t){var e=js(t).Element;return t instanceof e||t instanceof Element}function _o(t){var e=js(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function DI(t){if(typeof ShadowRoot>"u")return!1;var e=js(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function hie(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!_o(s)||!Za(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function die(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!_o(i)||!Za(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const fie={name:"applyStyles",enabled:!0,phase:"write",fn:hie,effect:die,requires:["computeStyles"]};function qa(t){return t.split("-")[0]}var lh=Math.max,s_=Math.min,Bf=Math.round;function ZP(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xj(){return!/^((?!chrome|android).)*safari/i.test(ZP())}function zf(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&_o(t)&&(i=t.offsetWidth>0&&Bf(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Bf(r.height)/t.offsetHeight||1);var o=Ah(t)?js(t):window,a=o.visualViewport,l=!xj()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,f=r.height/s;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function NI(t){var e=zf(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function wj(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&DI(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Bl(t){return js(t).getComputedStyle(t)}function pie(t){return["table","td","th"].indexOf(Za(t))>=0}function hu(t){return((Ah(t)?t.ownerDocument:t.document)||window.document).documentElement}function pw(t){return Za(t)==="html"?t:t.assignedSlot||t.parentNode||(DI(t)?t.host:null)||hu(t)}function gN(t){return!_o(t)||Bl(t).position==="fixed"?null:t.offsetParent}function gie(t){var e=/firefox/i.test(ZP()),n=/Trident/i.test(ZP());if(n&&_o(t)){var r=Bl(t);if(r.position==="fixed")return null}var i=pw(t);for(DI(i)&&(i=i.host);_o(i)&&["html","body"].indexOf(Za(i))<0;){var s=Bl(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function H0(t){for(var e=js(t),n=gN(t);n&&pie(n)&&Bl(n).position==="static";)n=gN(n);return n&&(Za(n)==="html"||Za(n)==="body"&&Bl(n).position==="static")?e:n||gie(t)||e}function FI(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function hm(t,e,n){return lh(t,s_(e,n))}function mie(t,e,n){var r=hm(t,e,n);return r>n?n:r}function Ej(){return{top:0,right:0,bottom:0,left:0}}function Tj(t){return Object.assign({},Ej(),t)}function Sj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var yie=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Tj(typeof e!="number"?e:Sj(e,G0))};function vie(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=qa(n.placement),l=FI(a),c=[as,Co].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var h=yie(i.padding,n),f=NI(s),g=l==="y"?os:as,m=l==="y"?So:Co,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],x=o[l]-n.rects.reference[l],b=H0(s),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,v=y/2-x/2,E=h[g],S=w-f[u]-h[m],C=w/2-f[u]/2+v,R=hm(E,C,S),I=l;n.modifiersData[r]=(e={},e[I]=R,e.centerOffset=R-C,e)}}function bie(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||wj(e.elements.popper,i)&&(e.elements.arrow=i))}const _ie={name:"arrow",enabled:!0,phase:"main",fn:vie,effect:bie,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Uf(t){return t.split("-")[1]}var xie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wie(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Bf(n*i)/i||0,y:Bf(r*i)/i||0}}function mN(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,g=f===void 0?0:f,m=o.y,y=m===void 0?0:m,x=typeof u=="function"?u({x:g,y}):{x:g,y};g=x.x,y=x.y;var b=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),v=as,E=os,S=window;if(c){var C=H0(n),R="clientHeight",I="clientWidth";if(C===js(n)&&(C=hu(n),Bl(C).position!=="static"&&a==="absolute"&&(R="scrollHeight",I="scrollWidth")),C=C,i===os||(i===as||i===Co)&&s===e0){E=So;var L=h&&C===S&&S.visualViewport?S.visualViewport.height:C[R];y-=L-r.height,y*=l?1:-1}if(i===as||(i===os||i===So)&&s===e0){v=Co;var O=h&&C===S&&S.visualViewport?S.visualViewport.width:C[I];g-=O-r.width,g*=l?1:-1}}var B=Object.assign({position:a},c&&xie),M=u===!0?wie({x:g,y},js(n)):{x:g,y};if(g=M.x,y=M.y,l){var D;return Object.assign({},B,(D={},D[E]=w?"0":"",D[v]=b?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",D))}return Object.assign({},B,(e={},e[E]=w?y+"px":"",e[v]=b?g+"px":"",e.transform="",e))}function Eie(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:qa(e.placement),variation:Uf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mN(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mN(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Tie={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Eie,data:{}};var Rv={passive:!0};function Sie(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=js(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Rv)}),a&&l.addEventListener("resize",n.update,Rv),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Rv)}),a&&l.removeEventListener("resize",n.update,Rv)}}const Cie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Sie,data:{}};var Pie={left:"right",right:"left",bottom:"top",top:"bottom"};function Z1(t){return t.replace(/left|right|bottom|top/g,function(e){return Pie[e]})}var Aie={start:"end",end:"start"};function yN(t){return t.replace(/start|end/g,function(e){return Aie[e]})}function BI(t){var e=js(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function zI(t){return zf(hu(t)).left+BI(t).scrollLeft}function Rie(t,e){var n=js(t),r=hu(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=xj();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+zI(t),y:l}}function Iie(t){var e,n=hu(t),r=BI(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=lh(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=lh(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+zI(t),l=-r.scrollTop;return Bl(i||n).direction==="rtl"&&(a+=lh(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function UI(t){var e=Bl(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Cj(t){return["html","body","#document"].indexOf(Za(t))>=0?t.ownerDocument.body:_o(t)&&UI(t)?t:Cj(pw(t))}function dm(t,e){var n;e===void 0&&(e=[]);var r=Cj(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=js(r),o=i?[s].concat(s.visualViewport||[],UI(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(dm(pw(o)))}function QP(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Mie(t,e){var n=zf(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function vN(t,e,n){return e===bj?QP(Rie(t,n)):Ah(e)?Mie(e,n):QP(Iie(hu(t)))}function Oie(t){var e=dm(pw(t)),n=["absolute","fixed"].indexOf(Bl(t).position)>=0,r=n&&_o(t)?H0(t):t;return Ah(r)?e.filter(function(i){return Ah(i)&&wj(i,r)&&Za(i)!=="body"}):[]}function Lie(t,e,n,r){var i=e==="clippingParents"?Oie(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=vN(t,c,r);return l.top=lh(u.top,l.top),l.right=s_(u.right,l.right),l.bottom=s_(u.bottom,l.bottom),l.left=lh(u.left,l.left),l},vN(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Pj(t){var e=t.reference,n=t.element,r=t.placement,i=r?qa(r):null,s=r?Uf(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case os:l={x:o,y:e.y-n.height};break;case So:l={x:o,y:e.y+e.height};break;case Co:l={x:e.x+e.width,y:a};break;case as:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?FI(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Ff:l[c]=l[c]-(e[u]/2-n[u]/2);break;case e0:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function t0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Jre:a,c=n.rootBoundary,u=c===void 0?bj:c,h=n.elementContext,f=h===void 0?ng:h,g=n.altBoundary,m=g===void 0?!1:g,y=n.padding,x=y===void 0?0:y,b=Tj(typeof x!="number"?x:Sj(x,G0)),w=f===ng?eie:ng,v=t.rects.popper,E=t.elements[m?w:f],S=Lie(Ah(E)?E:E.contextElement||hu(t.elements.popper),l,u,o),C=zf(t.elements.reference),R=Pj({reference:C,element:v,strategy:"absolute",placement:i}),I=QP(Object.assign({},v,R)),L=f===ng?I:C,O={top:S.top-L.top+b.top,bottom:L.bottom-S.bottom+b.bottom,left:S.left-L.left+b.left,right:L.right-S.right+b.right},B=t.modifiersData.offset;if(f===ng&&B){var M=B[i];Object.keys(O).forEach(function(D){var N=[Co,So].indexOf(D)>=0?1:-1,j=[os,So].indexOf(D)>=0?"y":"x";O[D]+=M[j]*N})}return O}function kie(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?_j:l,u=Uf(r),h=u?a?pN:pN.filter(function(m){return Uf(m)===u}):G0,f=h.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=h);var g=f.reduce(function(m,y){return m[y]=t0(t,{placement:y,boundary:i,rootBoundary:s,padding:o})[qa(y)],m},{});return Object.keys(g).sort(function(m,y){return g[m]-g[y]})}function Die(t){if(qa(t)===kI)return[];var e=Z1(t);return[yN(t),e,yN(e)]}function Nie(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,g=n.flipVariations,m=g===void 0?!0:g,y=n.allowedAutoPlacements,x=e.options.placement,b=qa(x),w=b===x,v=l||(w||!m?[Z1(x)]:Die(x)),E=[x].concat(v).reduce(function(de,Me){return de.concat(qa(Me)===kI?kie(e,{placement:Me,boundary:u,rootBoundary:h,padding:c,flipVariations:m,allowedAutoPlacements:y}):Me)},[]),S=e.rects.reference,C=e.rects.popper,R=new Map,I=!0,L=E[0],O=0;O<E.length;O++){var B=E[O],M=qa(B),D=Uf(B)===Ff,N=[os,So].indexOf(M)>=0,j=N?"width":"height",W=t0(e,{placement:B,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),V=N?D?Co:as:D?So:os;S[j]>C[j]&&(V=Z1(V));var U=Z1(V),X=[];if(s&&X.push(W[M]<=0),a&&X.push(W[V]<=0,W[U]<=0),X.every(function(de){return de})){L=B,I=!1;break}R.set(B,X)}if(I)for(var Y=m?3:1,Z=function(Me){var he=E.find(function(Se){var le=R.get(Se);if(le)return le.slice(0,Me).every(function(ae){return ae})});if(he)return L=he,"break"},se=Y;se>0;se--){var xe=Z(se);if(xe==="break")break}e.placement!==L&&(e.modifiersData[r]._skip=!0,e.placement=L,e.reset=!0)}}const Fie={name:"flip",enabled:!0,phase:"main",fn:Nie,requiresIfExists:["offset"],data:{_skip:!1}};function bN(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function _N(t){return[os,Co,So,as].some(function(e){return t[e]>=0})}function Bie(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=t0(e,{elementContext:"reference"}),a=t0(e,{altBoundary:!0}),l=bN(o,r),c=bN(a,i,s),u=_N(l),h=_N(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const zie={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Bie};function Uie(t,e,n){var r=qa(t),i=[as,os].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[as,Co].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function $ie(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=_j.reduce(function(u,h){return u[h]=Uie(h,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const jie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$ie};function Gie(t){var e=t.state,n=t.name;e.modifiersData[n]=Pj({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Hie={name:"popperOffsets",enabled:!0,phase:"read",fn:Gie,data:{}};function Vie(t){return t==="x"?"y":"x"}function Wie(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,g=f===void 0?!0:f,m=n.tetherOffset,y=m===void 0?0:m,x=t0(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),b=qa(e.placement),w=Uf(e.placement),v=!w,E=FI(b),S=Vie(E),C=e.modifiersData.popperOffsets,R=e.rects.reference,I=e.rects.popper,L=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,O=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(C){if(s){var D,N=E==="y"?os:as,j=E==="y"?So:Co,W=E==="y"?"height":"width",V=C[E],U=V+x[N],X=V-x[j],Y=g?-I[W]/2:0,Z=w===Ff?R[W]:I[W],se=w===Ff?-I[W]:-R[W],xe=e.elements.arrow,de=g&&xe?NI(xe):{width:0,height:0},Me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ej(),he=Me[N],Se=Me[j],le=hm(0,R[W],de[W]),ae=v?R[W]/2-Y-le-he-O.mainAxis:Z-le-he-O.mainAxis,me=v?-R[W]/2+Y+le+Se+O.mainAxis:se+le+Se+O.mainAxis,oe=e.elements.arrow&&H0(e.elements.arrow),_e=oe?E==="y"?oe.clientTop||0:oe.clientLeft||0:0,pe=(D=B==null?void 0:B[E])!=null?D:0,Ce=V+ae-pe-_e,we=V+me-pe,Ye=hm(g?s_(U,Ce):U,V,g?lh(X,we):X);C[E]=Ye,M[E]=Ye-V}if(a){var ke,Oe=E==="x"?os:as,rt=E==="x"?So:Co,qe=C[S],He=S==="y"?"height":"width",fn=qe+x[Oe],Mt=qe-x[rt],pt=[os,as].indexOf(b)!==-1,Te=(ke=B==null?void 0:B[S])!=null?ke:0,Ne=pt?fn:qe-R[He]-I[He]-Te+O.altAxis,Ke=pt?qe+R[He]+I[He]-Te-O.altAxis:Mt,je=g&&pt?mie(Ne,qe,Ke):hm(g?Ne:fn,qe,g?Ke:Mt);C[S]=je,M[S]=je-qe}e.modifiersData[r]=M}}const Xie={name:"preventOverflow",enabled:!0,phase:"main",fn:Wie,requiresIfExists:["offset"]};function Yie(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function qie(t){return t===js(t)||!_o(t)?BI(t):Yie(t)}function Kie(t){var e=t.getBoundingClientRect(),n=Bf(e.width)/t.offsetWidth||1,r=Bf(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Zie(t,e,n){n===void 0&&(n=!1);var r=_o(e),i=_o(e)&&Kie(e),s=hu(e),o=zf(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Za(e)!=="body"||UI(s))&&(a=qie(e)),_o(e)?(l=zf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=zI(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Qie(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Jie(t){var e=Qie(t);return uie.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function ese(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function tse(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var xN={placement:"bottom",modifiers:[],strategy:"absolute"};function wN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function nse(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?xN:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},xN,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,g={state:u,setOptions:function(b){var w=typeof b=="function"?b(u.options):b;y(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ah(a)?dm(a):a.contextElement?dm(a.contextElement):[],popper:dm(l)};var v=Jie(tse([].concat(r,u.options.modifiers)));return u.orderedModifiers=v.filter(function(E){return E.enabled}),m(),g.update()},forceUpdate:function(){if(!f){var b=u.elements,w=b.reference,v=b.popper;if(wN(w,v)){u.rects={reference:Zie(w,H0(v),u.options.strategy==="fixed"),popper:NI(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var S=u.orderedModifiers[E],C=S.fn,R=S.options,I=R===void 0?{}:R,L=S.name;typeof C=="function"&&(u=C({state:u,options:I,name:L,instance:g})||u)}}}},update:ese(function(){return new Promise(function(x){g.forceUpdate(),x(u)})}),destroy:function(){y(),f=!0}};if(!wN(a,l))return g;g.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function m(){u.orderedModifiers.forEach(function(x){var b=x.name,w=x.options,v=w===void 0?{}:w,E=x.effect;if(typeof E=="function"){var S=E({state:u,name:b,instance:g,options:v}),C=function(){};h.push(S||C)}})}function y(){h.forEach(function(x){return x()}),h=[]}return g}}var rse=[Cie,Hie,Tie,fie,jie,Fie,Xie,_ie,zie],ise=nse({defaultModifiers:rse});function sse(t){return typeof t=="function"?t():t}const Aj=P.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=P.useState(null),l=Vn(P.isValidElement(r)?r.ref:null,n);if($s(()=>{s||a(sse(i)||document.body)},[i,s]),$s(()=>{if(o&&!s)return Jb(n,o),()=>{Jb(n,null)}},[n,o,s]),s){if(P.isValidElement(r)){const c={ref:l};return P.cloneElement(r,c)}return Q.jsx(P.Fragment,{children:r})}return Q.jsx(P.Fragment,{children:o&&Vl.createPortal(r,o)})}),Rj="Popper";function ose(t){return vj(Rj,t)}Vre(Rj,["root"]);const ase=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],lse=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function cse(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function JP(t){return typeof t=="function"?t():t}function use(t){return t.nodeType!==void 0}const hse=()=>$t({root:["root"]},ure(ose)),dse={},fse=P.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:h,popperRef:f,slotProps:g={},slots:m={},TransitionProps:y}=e,x=Qe(e,ase),b=P.useRef(null),w=Vn(b,n),v=P.useRef(null),E=Vn(v,f),S=P.useRef(E);$s(()=>{S.current=E},[E]),P.useImperativeHandle(f,()=>v.current,[]);const C=cse(u,o),[R,I]=P.useState(C),[L,O]=P.useState(JP(i));P.useEffect(()=>{v.current&&v.current.forceUpdate()}),P.useEffect(()=>{i&&O(JP(i))},[i]),$s(()=>{if(!L||!c)return;const j=U=>{I(U.placement)};let W=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:U})=>{j(U)}}];l!=null&&(W=W.concat(l)),h&&h.modifiers!=null&&(W=W.concat(h.modifiers));const V=ise(L,b.current,$({placement:C},h,{modifiers:W}));return S.current(V),()=>{V.destroy(),S.current(null)}},[L,a,l,c,h,C]);const B={placement:R};y!==null&&(B.TransitionProps=y);const M=hse(),D=(r=m.root)!=null?r:"div",N=Ei({elementType:D,externalSlotProps:g.root,externalForwardedProps:x,additionalProps:{role:"tooltip",ref:w},ownerState:e,className:M.root});return Q.jsx(D,$({},N,{children:typeof s=="function"?s(B):s}))}),pse=P.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:h="bottom",popperOptions:f=dse,popperRef:g,style:m,transition:y=!1,slotProps:x={},slots:b={}}=e,w=Qe(e,lse),[v,E]=P.useState(!0),S=()=>{E(!1)},C=()=>{E(!0)};if(!l&&!u&&(!y||v))return null;let R;if(s)R=s;else if(r){const O=JP(r);R=O&&use(O)?or(O).body:or(null).body}const I=!u&&l&&(!y||v)?"none":void 0,L=y?{in:u,onEnter:S,onExited:C}:void 0;return Q.jsx(Aj,{disablePortal:a,container:R,children:Q.jsx(fse,$({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:y?!v:u,placement:h,popperOptions:f,popperRef:g,slotProps:x,slots:b},w,{style:$({position:"fixed",top:0,left:0,display:I},m),TransitionProps:L,children:i}))})});function gse(t){const e=or(t);return e.body===t?ru(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function fm(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function EN(t){return parseInt(ru(t).getComputedStyle(t).paddingRight,10)||0}function mse(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function TN(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!mse(o);a&&l&&fm(o,i)})}function qT(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function yse(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(gse(r)){const o=Q$(or(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${EN(r)+o}px`;const a=or(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${EN(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=or(r).body;else{const o=r.parentElement,a=ru(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function vse(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class bse{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&fm(e.modalRef,!1);const i=vse(n);TN(n,e.mount,e.modalRef,i,!0);const s=qT(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=qT(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=yse(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=qT(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&fm(e.modalRef,n),TN(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&fm(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function _se(t){return typeof t=="function"?t():t}function xse(t){return t?t.props.hasOwnProperty("in"):!1}const wse=new bse;function Ese(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=wse,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:h}=t,f=P.useRef({}),g=P.useRef(null),m=P.useRef(null),y=Vn(m,h),[x,b]=P.useState(!u),w=xse(l);let v=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(v=!1);const E=()=>or(g.current),S=()=>(f.current.modalRef=m.current,f.current.mount=g.current,f.current),C=()=>{i.mount(S(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},R=Pi(()=>{const W=_se(e)||E().body;i.add(S(),W),m.current&&C()}),I=P.useCallback(()=>i.isTopModal(S()),[i]),L=Pi(W=>{g.current=W,W&&(u&&I()?C():m.current&&fm(m.current,v))}),O=P.useCallback(()=>{i.remove(S(),v)},[v,i]);P.useEffect(()=>()=>{O()},[O]),P.useEffect(()=>{u?R():(!w||!s)&&O()},[u,O,w,s,R]);const B=W=>V=>{var U;(U=W.onKeyDown)==null||U.call(W,V),!(V.key!=="Escape"||V.which===229||!I())&&(n||(V.stopPropagation(),c&&c(V,"escapeKeyDown")))},M=W=>V=>{var U;(U=W.onClick)==null||U.call(W,V),V.target===V.currentTarget&&c&&c(V,"backdropClick")};return{getRootProps:(W={})=>{const V=um(t);delete V.onTransitionEnter,delete V.onTransitionExited;const U=$({},V,W);return $({role:"presentation"},U,{onKeyDown:B(U),ref:y})},getBackdropProps:(W={})=>{const V=W;return $({"aria-hidden":!0},V,{onClick:M(V),open:u})},getTransitionProps:()=>{const W=()=>{b(!1),o&&o()},V=()=>{b(!0),a&&a(),s&&O()};return{onEnter:WP(W,l==null?void 0:l.props.onEnter),onExited:WP(V,l==null?void 0:l.props.onExited)}},rootRef:y,portalRef:L,isTopModal:I,exited:x,hasTransition:w}}const Tse=2;function Ij(t,e){return t-e}function SN(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function Iv(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function o_(t,e,n){return(t-e)*100/(n-e)}function Sse(t,e,n){return(n-e)*t+e}function Cse(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Pse(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Cse(e)))}function CN({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(Ij)}function Mv({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=or(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function Ov(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?are(t,e):!1}const Ase={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Rse=t=>t;let Lv;function PN(){return Lv===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Lv=CSS.supports("touch-action","none"):Lv=!0),Lv}function Ise(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:h,orientation:f="horizontal",rootRef:g,scale:m=Rse,step:y=1,tabIndex:x,value:b}=t,w=P.useRef(),[v,E]=P.useState(-1),[S,C]=P.useState(-1),[R,I]=P.useState(!1),L=P.useRef(0),[O,B]=Df({controlled:b,default:n??l,name:"Slider"}),M=u&&((Te,Ne,Ke)=>{const je=Te.nativeEvent||Te,Le=new je.constructor(je.type,je);Object.defineProperty(Le,"target",{writable:!0,value:{value:Ne,name:c}}),u(Le,Ne,Ke)}),D=Array.isArray(O);let N=D?O.slice().sort(Ij):[O];N=N.map(Te=>Te==null?l:Id(Te,l,a));const j=o===!0&&y!==null?[...Array(Math.floor((a-l)/y)+1)].map((Te,Ne)=>({value:l+y*Ne})):o||[],W=j.map(Te=>Te.value),{isFocusVisibleRef:V,onBlur:U,onFocus:X,ref:Y}=ew(),[Z,se]=P.useState(-1),xe=P.useRef(),de=Vn(Y,xe),Me=Vn(g,de),he=Te=>Ne=>{var Ke;const je=Number(Ne.currentTarget.getAttribute("data-index"));X(Ne),V.current===!0&&se(je),C(je),Te==null||(Ke=Te.onFocus)==null||Ke.call(Te,Ne)},Se=Te=>Ne=>{var Ke;U(Ne),V.current===!1&&se(-1),C(-1),Te==null||(Ke=Te.onBlur)==null||Ke.call(Te,Ne)};$s(()=>{if(r&&xe.current.contains(document.activeElement)){var Te;(Te=document.activeElement)==null||Te.blur()}},[r]),r&&v!==-1&&E(-1),r&&Z!==-1&&se(-1);const le=Te=>Ne=>{var Ke;(Ke=Te.onChange)==null||Ke.call(Te,Ne);const je=Number(Ne.currentTarget.getAttribute("data-index")),Le=N[je],kt=W.indexOf(Le);let wt=Ne.target.valueAsNumber;if(j&&y==null){const Ot=W[W.length-1];wt>Ot?wt=Ot:wt<W[0]?wt=W[0]:wt=wt<Le?W[kt-1]:W[kt+1]}if(wt=Id(wt,l,a),D){i&&(wt=Id(wt,N[je-1]||-1/0,N[je+1]||1/0));const Ot=wt;wt=CN({values:N,newValue:wt,index:je});let Fe=je;i||(Fe=wt.indexOf(Ot)),Mv({sliderRef:xe,activeIndex:Fe})}B(wt),se(je),M&&!Ov(wt,O)&&M(Ne,wt,je),h&&h(Ne,wt)},ae=P.useRef();let me=f;s&&f==="horizontal"&&(me+="-reverse");const oe=({finger:Te,move:Ne=!1})=>{const{current:Ke}=xe,{width:je,height:Le,bottom:kt,left:wt}=Ke.getBoundingClientRect();let Ot;me.indexOf("vertical")===0?Ot=(kt-Te.y)/Le:Ot=(Te.x-wt)/je,me.indexOf("-reverse")!==-1&&(Ot=1-Ot);let Fe;if(Fe=Sse(Ot,l,a),y)Fe=Pse(Fe,y,l);else{const Ht=SN(W,Fe);Fe=W[Ht]}Fe=Id(Fe,l,a);let St=0;if(D){Ne?St=ae.current:St=SN(N,Fe),i&&(Fe=Id(Fe,N[St-1]||-1/0,N[St+1]||1/0));const Ht=Fe;Fe=CN({values:N,newValue:Fe,index:St}),i&&Ne||(St=Fe.indexOf(Ht),ae.current=St)}return{newValue:Fe,activeIndex:St}},_e=Pi(Te=>{const Ne=Iv(Te,w);if(!Ne)return;if(L.current+=1,Te.type==="mousemove"&&Te.buttons===0){pe(Te);return}const{newValue:Ke,activeIndex:je}=oe({finger:Ne,move:!0});Mv({sliderRef:xe,activeIndex:je,setActive:E}),B(Ke),!R&&L.current>Tse&&I(!0),M&&!Ov(Ke,O)&&M(Te,Ke,je)}),pe=Pi(Te=>{const Ne=Iv(Te,w);if(I(!1),!Ne)return;const{newValue:Ke}=oe({finger:Ne,move:!0});E(-1),Te.type==="touchend"&&C(-1),h&&h(Te,Ke),w.current=void 0,we()}),Ce=Pi(Te=>{if(r)return;PN()||Te.preventDefault();const Ne=Te.changedTouches[0];Ne!=null&&(w.current=Ne.identifier);const Ke=Iv(Te,w);if(Ke!==!1){const{newValue:Le,activeIndex:kt}=oe({finger:Ke});Mv({sliderRef:xe,activeIndex:kt,setActive:E}),B(Le),M&&!Ov(Le,O)&&M(Te,Le,kt)}L.current=0;const je=or(xe.current);je.addEventListener("touchmove",_e,{passive:!0}),je.addEventListener("touchend",pe,{passive:!0})}),we=P.useCallback(()=>{const Te=or(xe.current);Te.removeEventListener("mousemove",_e),Te.removeEventListener("mouseup",pe),Te.removeEventListener("touchmove",_e),Te.removeEventListener("touchend",pe)},[pe,_e]);P.useEffect(()=>{const{current:Te}=xe;return Te.addEventListener("touchstart",Ce,{passive:PN()}),()=>{Te.removeEventListener("touchstart",Ce),we()}},[we,Ce]),P.useEffect(()=>{r&&we()},[r,we]);const Ye=Te=>Ne=>{var Ke;if((Ke=Te.onMouseDown)==null||Ke.call(Te,Ne),r||Ne.defaultPrevented||Ne.button!==0)return;Ne.preventDefault();const je=Iv(Ne,w);if(je!==!1){const{newValue:kt,activeIndex:wt}=oe({finger:je});Mv({sliderRef:xe,activeIndex:wt,setActive:E}),B(kt),M&&!Ov(kt,O)&&M(Ne,kt,wt)}L.current=0;const Le=or(xe.current);Le.addEventListener("mousemove",_e,{passive:!0}),Le.addEventListener("mouseup",pe)},ke=o_(D?N[0]:l,l,a),Oe=o_(N[N.length-1],l,a)-ke,rt=(Te={})=>{const Ne=um(Te),Ke={onMouseDown:Ye(Ne||{})},je=$({},Ne,Ke);return $({},Te,{ref:Me},je)},qe=Te=>Ne=>{var Ke;(Ke=Te.onMouseOver)==null||Ke.call(Te,Ne);const je=Number(Ne.currentTarget.getAttribute("data-index"));C(je)},He=Te=>Ne=>{var Ke;(Ke=Te.onMouseLeave)==null||Ke.call(Te,Ne),C(-1)};return{active:v,axis:me,axisProps:Ase,dragging:R,focusedThumbIndex:Z,getHiddenInputProps:(Te={})=>{var Ne;const Ke=um(Te),je={onChange:le(Ke||{}),onFocus:he(Ke||{}),onBlur:Se(Ke||{})},Le=$({},Ke,je);return $({tabIndex:x,"aria-labelledby":e,"aria-orientation":f,"aria-valuemax":m(a),"aria-valuemin":m(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(Ne=t.step)!=null?Ne:void 0,disabled:r},Te,Le,{style:$({},Vee,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:rt,getThumbProps:(Te={})=>{const Ne=um(Te),Ke={onMouseOver:qe(Ne||{}),onMouseLeave:He(Ne||{})};return $({},Te,Ne,Ke)},marks:j,open:S,range:D,rootRef:Me,trackLeap:Oe,trackOffset:ke,values:N,getThumbStyle:Te=>({pointerEvents:v!==-1&&v!==Te?"none":void 0})}}const Mse=["onChange","maxRows","minRows","style","value"];function kv(t){return parseInt(t,10)||0}const Ose={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function AN(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const Lse=P.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=Qe(e,Mse),{current:c}=P.useRef(a!=null),u=P.useRef(null),h=Vn(n,u),f=P.useRef(null),g=P.useRef(0),[m,y]=P.useState({outerHeightStyle:0}),x=P.useCallback(()=>{const E=u.current,C=ru(E).getComputedStyle(E);if(C.width==="0px")return{outerHeightStyle:0};const R=f.current;R.style.width=C.width,R.value=E.value||e.placeholder||"x",R.value.slice(-1)===`
`&&(R.value+=" ");const I=C.boxSizing,L=kv(C.paddingBottom)+kv(C.paddingTop),O=kv(C.borderBottomWidth)+kv(C.borderTopWidth),B=R.scrollHeight;R.value="x";const M=R.scrollHeight;let D=B;s&&(D=Math.max(Number(s)*M,D)),i&&(D=Math.min(Number(i)*M,D)),D=Math.max(D,M);const N=D+(I==="border-box"?L+O:0),j=Math.abs(D-B)<=1;return{outerHeightStyle:N,overflow:j}},[i,s,e.placeholder]),b=(E,S)=>{const{outerHeightStyle:C,overflow:R}=S;return g.current<20&&(C>0&&Math.abs((E.outerHeightStyle||0)-C)>1||E.overflow!==R)?(g.current+=1,{overflow:R,outerHeightStyle:C}):E},w=P.useCallback(()=>{const E=x();AN(E)||y(S=>b(S,E))},[x]);$s(()=>{const E=()=>{const B=x();AN(B)||Vl.flushSync(()=>{y(M=>b(M,B))})},S=()=>{g.current=0,E()};let C;const R=wI(S),I=u.current,L=ru(I);L.addEventListener("resize",R);let O;return typeof ResizeObserver<"u"&&(O=new ResizeObserver(S),O.observe(I)),()=>{R.clear(),cancelAnimationFrame(C),L.removeEventListener("resize",R),O&&O.disconnect()}},[x]),$s(()=>{w()}),P.useEffect(()=>{g.current=0},[a]);const v=E=>{g.current=0,c||w(),r&&r(E)};return Q.jsxs(P.Fragment,{children:[Q.jsx("textarea",$({value:a,onChange:v,ref:h,rows:s,style:$({height:m.outerHeightStyle,overflow:m.overflow?"hidden":void 0},o)},l)),Q.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:$({},Ose.shadow,o,{paddingTop:0,paddingBottom:0})})]})}),kse=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Dse=Be(pse,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Nse=P.forwardRef(function(e,n){var r;const i=ij(),s=Vt({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:h,keepMounted:f,modifiers:g,open:m,placement:y,popperOptions:x,popperRef:b,transition:w,slots:v,slotProps:E}=s,S=Qe(s,kse),C=(r=v==null?void 0:v.root)!=null?r:l==null?void 0:l.Root,R=$({anchorEl:o,container:u,disablePortal:h,keepMounted:f,modifiers:g,open:m,placement:y,popperOptions:x,popperRef:b,transition:w},S);return Q.jsx(Dse,$({as:a,direction:i==null?void 0:i.direction,slots:{root:C},slotProps:E??c},R,{ref:n}))}),Mj=Nse;function V0({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const Fse=P.createContext(void 0),$I=Fse;function pp(){return P.useContext($I)}function Bse(t){return Q.jsx(Vte,$({},t,{defaultTheme:dw,themeId:B0}))}function RN(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function a_(t,e=!1){return t&&(RN(t.value)&&t.value!==""||e&&RN(t.defaultValue)&&t.defaultValue!=="")}function zse(t){return t.startAdornment}function Use(t){return jt("MuiInputBase",t)}const $se=Bt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),$f=$se,jse=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],gw=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${$e(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},mw=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Gse=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:f,startAdornment:g,type:m}=t,y={root:["root",`color${$e(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${$e(f)}`,u&&"multiline",g&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",m==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",g&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return $t(y,Use,e)},yw=Be("div",{name:"MuiInputBase",slot:"Root",overridesResolver:gw})(({theme:t,ownerState:e})=>$({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${$f.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&$({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),vw=Be("input",{name:"MuiInputBase",slot:"Input",overridesResolver:mw})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=$({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return $({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${$f.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${$f.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Hse=Q.jsx(Bse,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Vse=P.forwardRef(function(e,n){var r;const i=Vt({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:h,disabled:f,disableInjectingGlobalStyles:g,endAdornment:m,fullWidth:y=!1,id:x,inputComponent:b="input",inputProps:w={},inputRef:v,maxRows:E,minRows:S,multiline:C=!1,name:R,onBlur:I,onChange:L,onClick:O,onFocus:B,onKeyDown:M,onKeyUp:D,placeholder:N,readOnly:j,renderSuffix:W,rows:V,slotProps:U={},slots:X={},startAdornment:Y,type:Z="text",value:se}=i,xe=Qe(i,jse),de=w.value!=null?w.value:se,{current:Me}=P.useRef(de!=null),he=P.useRef(),Se=P.useCallback(je=>{},[]),le=Vn(he,v,w.ref,Se),[ae,me]=P.useState(!1),oe=pp(),_e=V0({props:i,muiFormControl:oe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_e.focused=oe?oe.focused:ae,P.useEffect(()=>{!oe&&f&&ae&&(me(!1),I&&I())},[oe,f,ae,I]);const pe=oe&&oe.onFilled,Ce=oe&&oe.onEmpty,we=P.useCallback(je=>{a_(je)?pe&&pe():Ce&&Ce()},[pe,Ce]);$s(()=>{Me&&we({value:de})},[de,we,Me]);const Ye=je=>{if(_e.disabled){je.stopPropagation();return}B&&B(je),w.onFocus&&w.onFocus(je),oe&&oe.onFocus?oe.onFocus(je):me(!0)},ke=je=>{I&&I(je),w.onBlur&&w.onBlur(je),oe&&oe.onBlur?oe.onBlur(je):me(!1)},Oe=(je,...Le)=>{if(!Me){const kt=je.target||he.current;if(kt==null)throw new Error(nu(1));we({value:kt.value})}w.onChange&&w.onChange(je,...Le),L&&L(je,...Le)};P.useEffect(()=>{we(he.current)},[]);const rt=je=>{he.current&&je.currentTarget===je.target&&he.current.focus(),O&&O(je)};let qe=b,He=w;C&&qe==="input"&&(V?He=$({type:void 0,minRows:V,maxRows:V},He):He=$({type:void 0,maxRows:E,minRows:S},He),qe=Lse);const fn=je=>{we(je.animationName==="mui-auto-fill-cancel"?he.current:{value:"x"})};P.useEffect(()=>{oe&&oe.setAdornedStart(!!Y)},[oe,Y]);const Mt=$({},i,{color:_e.color||"primary",disabled:_e.disabled,endAdornment:m,error:_e.error,focused:_e.focused,formControl:oe,fullWidth:y,hiddenLabel:_e.hiddenLabel,multiline:C,size:_e.size,startAdornment:Y,type:Z}),pt=Gse(Mt),Te=X.root||c.Root||yw,Ne=U.root||u.root||{},Ke=X.input||c.Input||vw;return He=$({},He,(r=U.input)!=null?r:u.input),Q.jsxs(P.Fragment,{children:[!g&&Hse,Q.jsxs(Te,$({},Ne,!Vc(Te)&&{ownerState:$({},Mt,Ne.ownerState)},{ref:n,onClick:rt},xe,{className:at(pt.root,Ne.className,l,j&&"MuiInputBase-readOnly"),children:[Y,Q.jsx($I.Provider,{value:null,children:Q.jsx(Ke,$({ownerState:Mt,"aria-invalid":_e.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:h,disabled:_e.disabled,id:x,onAnimationStart:fn,name:R,placeholder:N,readOnly:j,required:_e.required,rows:V,value:de,onKeyDown:M,onKeyUp:D,type:Z},He,!Vc(Ke)&&{as:qe,ownerState:$({},Mt,He.ownerState)},{ref:le,className:at(pt.input,He.className,j&&"MuiInputBase-readOnly"),onBlur:ke,onChange:Oe,onFocus:Ye}))}),m,W?W($({},_e,{startAdornment:Y})):null]}))]})}),jI=Vse;function Wse(t){return jt("MuiInput",t)}const Xse=$({},$f,Bt("MuiInput",["root","underline","input"])),rg=Xse;function Yse(t){return jt("MuiOutlinedInput",t)}const qse=$({},$f,Bt("MuiOutlinedInput",["root","notchedOutline","input"])),lc=qse;function Kse(t){return jt("MuiFilledInput",t)}const Zse=$({},$f,Bt("MuiFilledInput",["root","underline","input"])),Cu=Zse,Qse=Tt(Q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Jse=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],eoe={entering:{opacity:1},entered:{opacity:1}},toe=P.forwardRef(function(e,n){const r=uu(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:f,onExit:g,onExited:m,onExiting:y,style:x,timeout:b=i,TransitionComponent:w=MI}=e,v=Qe(e,Jse),E=P.useRef(null),S=Vn(E,a.ref,n),C=N=>j=>{if(N){const W=E.current;j===void 0?N(W):N(W,j)}},R=C(f),I=C((N,j)=>{fj(N);const W=Nf({style:x,timeout:b,easing:l},{mode:"enter"});N.style.webkitTransition=r.transitions.create("opacity",W),N.style.transition=r.transitions.create("opacity",W),u&&u(N,j)}),L=C(h),O=C(y),B=C(N=>{const j=Nf({style:x,timeout:b,easing:l},{mode:"exit"});N.style.webkitTransition=r.transitions.create("opacity",j),N.style.transition=r.transitions.create("opacity",j),g&&g(N)}),M=C(m),D=N=>{s&&s(E.current,N)};return Q.jsx(w,$({appear:o,in:c,nodeRef:E,onEnter:I,onEntered:L,onEntering:R,onExit:B,onExited:M,onExiting:O,addEndListener:D,timeout:b},v,{children:(N,j)=>P.cloneElement(a,$({style:$({opacity:0,visibility:N==="exited"&&!c?"hidden":void 0},eoe[N],x,a.props.style),ref:S},j))}))}),noe=toe;function roe(t){return jt("MuiBackdrop",t)}Bt("MuiBackdrop",["root","invisible"]);const ioe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],soe=t=>{const{classes:e,invisible:n}=t;return $t({root:["root",n&&"invisible"]},roe,e)},ooe=Be("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>$({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),aoe=P.forwardRef(function(e,n){var r,i,s;const o=Vt({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:h={},invisible:f=!1,open:g,slotProps:m={},slots:y={},TransitionComponent:x=noe,transitionDuration:b}=o,w=Qe(o,ioe),v=$({},o,{component:c,invisible:f}),E=soe(v),S=(r=m.root)!=null?r:h.root;return Q.jsx(x,$({in:g,timeout:b},w,{children:Q.jsx(ooe,$({"aria-hidden":!0},S,{as:(i=(s=y.root)!=null?s:u.Root)!=null?i:c,className:at(E.root,l,S==null?void 0:S.className),ownerState:$({},v,S==null?void 0:S.ownerState),classes:E,ref:n,children:a}))}))}),Oj=aoe,loe=Bt("MuiBox",["root"]),coe=loe,uoe=hj(),hoe=qte({themeId:B0,defaultTheme:uoe,defaultClassName:coe.root,generateClassName:EI.generate}),ar=hoe;function doe(t){return jt("MuiButton",t)}const foe=Bt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Dv=foe,poe=P.createContext({}),Lj=poe,goe=P.createContext(void 0),kj=goe,moe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],yoe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${$e(e)}`,`size${$e(i)}`,`${s}Size${$e(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${$e(i)}`],endIcon:["endIcon",`iconSize${$e(i)}`]},l=$t(a,doe,o);return $({},o,l)},Dj=t=>$({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),voe=Be(j0,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${$e(n.color)}`],e[`size${$e(n.size)}`],e[`${n.variant}Size${$e(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return $({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":$({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Dv.focusVisible}`]:$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Dv.disabled}`]:$({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Rn(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Dv.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Dv.disabled}`]:{boxShadow:"none"}}),boe=Be("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${$e(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Dj(t))),_oe=Be("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${$e(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Dj(t))),xoe=P.forwardRef(function(e,n){const r=P.useContext(Lj),i=P.useContext(kj),s=tw(r,e),o=Vt({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:h=!1,disableElevation:f=!1,disableFocusRipple:g=!1,endIcon:m,focusVisibleClassName:y,fullWidth:x=!1,size:b="medium",startIcon:w,type:v,variant:E="text"}=o,S=Qe(o,moe),C=$({},o,{color:l,component:c,disabled:h,disableElevation:f,disableFocusRipple:g,fullWidth:x,size:b,type:v,variant:E}),R=yoe(C),I=w&&Q.jsx(boe,{className:R.startIcon,ownerState:C,children:w}),L=m&&Q.jsx(_oe,{className:R.endIcon,ownerState:C,children:m}),O=i||"";return Q.jsxs(voe,$({ownerState:C,className:at(r.className,R.root,u,O),component:c,disabled:h,focusRipple:!g,focusVisibleClassName:at(R.focusVisible,y),ref:n,type:v},S,{classes:R,children:[I,a,L]}))}),eA=xoe;function woe(t){return jt("MuiButtonGroup",t)}const ai=Bt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Eoe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Toe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${ai.grouped}`]:e.grouped},{[`& .${ai.grouped}`]:e[`grouped${$e(n.orientation)}`]},{[`& .${ai.grouped}`]:e[`grouped${$e(n.variant)}`]},{[`& .${ai.grouped}`]:e[`grouped${$e(n.variant)}${$e(n.orientation)}`]},{[`& .${ai.grouped}`]:e[`grouped${$e(n.variant)}${$e(n.color)}`]},{[`& .${ai.firstButton}`]:e.firstButton},{[`& .${ai.lastButton}`]:e.lastButton},{[`& .${ai.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},Soe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:o,variant:a}=t,l={root:["root",a,o==="vertical"&&"vertical",s&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${$e(o)}`,`grouped${$e(a)}`,`grouped${$e(a)}${$e(o)}`,`grouped${$e(a)}${$e(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return $t(l,woe,e)},Coe=Be("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Toe})(({theme:t,ownerState:e})=>$({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${ai.grouped}`]:$({minWidth:40,"&:hover":$({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${ai.firstButton},& .${ai.middleButton}`]:$({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ai.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ai.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Rn(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${ai.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${ai.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":$({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${ai.lastButton},& .${ai.middleButton}`]:$({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),Poe=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:h=!1,fullWidth:f=!1,orientation:g="horizontal",size:m="medium",variant:y="outlined"}=r,x=Qe(r,Eoe),b=$({},r,{color:o,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:h,fullWidth:f,orientation:g,size:m,variant:y}),w=Soe(b),v=P.useMemo(()=>({className:w.grouped,color:o,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:h,fullWidth:f,size:m,variant:y}),[o,l,c,u,h,f,m,y,w.grouped]),E=J$(i),S=E.length,C=R=>{const I=R===0,L=R===S-1;return I&&L?"":I?w.firstButton:L?w.lastButton:w.middleButton};return Q.jsx(Coe,$({as:a,role:"group",className:at(w.root,s),ref:n,ownerState:b},x,{children:Q.jsx(Lj.Provider,{value:v,children:E.map((R,I)=>Q.jsx(kj.Provider,{value:C(I),children:R},I))})}))}),Aoe=Poe;function Roe(t){return jt("MuiCard",t)}Bt("MuiCard",["root"]);const Ioe=["className","raised"],Moe=t=>{const{classes:e}=t;return $t({root:["root"]},Roe,e)},Ooe=Be(mj,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Loe=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=Qe(r,Ioe),a=$({},r,{raised:s}),l=Moe(a);return Q.jsx(Ooe,$({className:at(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),koe=Loe;function Doe(t){return jt("MuiCardActions",t)}Bt("MuiCardActions",["root","spacing"]);const Noe=["disableSpacing","className"],Foe=t=>{const{classes:e,disableSpacing:n}=t;return $t({root:["root",!n&&"spacing"]},Doe,e)},Boe=Be("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>$({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),zoe=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=Qe(r,Noe),a=$({},r,{disableSpacing:i}),l=Foe(a);return Q.jsx(Boe,$({className:at(l.root,s),ownerState:a,ref:n},o))}),Uoe=zoe;function $oe(t){return jt("MuiCardContent",t)}Bt("MuiCardContent",["root"]);const joe=["className","component"],Goe=t=>{const{classes:e}=t;return $t({root:["root"]},$oe,e)},Hoe=Be("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Voe=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=Qe(r,joe),a=$({},r,{component:s}),l=Goe(a);return Q.jsx(Hoe,$({as:s,className:at(l.root,i),ownerState:a,ref:n},o))}),Nj=Voe;function Woe(t){return jt("MuiCardHeader",t)}const Xoe=Bt("MuiCardHeader",["root","avatar","action","content","title","subheader"]),IN=Xoe,Yoe=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],qoe=t=>{const{classes:e}=t;return $t({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Woe,e)},Koe=Be("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>$({[`& .${IN.title}`]:e.title,[`& .${IN.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),Zoe=Be("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Qoe=Be("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Joe=Be("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),eae=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCardHeader"}),{action:i,avatar:s,className:o,component:a="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:h,titleTypographyProps:f}=r,g=Qe(r,Yoe),m=$({},r,{component:a,disableTypography:l}),y=qoe(m);let x=h;x!=null&&x.type!==es&&!l&&(x=Q.jsx(es,$({variant:s?"body2":"h5",className:y.title,component:"span",display:"block"},f,{children:x})));let b=c;return b!=null&&b.type!==es&&!l&&(b=Q.jsx(es,$({variant:s?"body2":"body1",className:y.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:b}))),Q.jsxs(Koe,$({className:at(y.root,o),as:a,ref:n,ownerState:m},g,{children:[s&&Q.jsx(Zoe,{className:y.avatar,ownerState:m,children:s}),Q.jsxs(Joe,{className:y.content,ownerState:m,children:[x,b]}),i&&Q.jsx(Qoe,{className:y.action,ownerState:m,children:i})]}))}),tae=eae;function nae(t){return jt("PrivateSwitchBase",t)}Bt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],iae=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${$e(i)}`],input:["input"]};return $t(s,nae,e)},sae=Be(j0)(({ownerState:t})=>$({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),oae=Be("input",{shouldForwardProp:cs})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),aae=P.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:f,inputProps:g,inputRef:m,name:y,onBlur:x,onChange:b,onFocus:w,readOnly:v,required:E=!1,tabIndex:S,type:C,value:R}=e,I=Qe(e,rae),[L,O]=Df({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),B=pp(),M=X=>{w&&w(X),B&&B.onFocus&&B.onFocus(X)},D=X=>{x&&x(X),B&&B.onBlur&&B.onBlur(X)},N=X=>{if(X.nativeEvent.defaultPrevented)return;const Y=X.target.checked;O(Y),b&&b(X,Y)};let j=l;B&&typeof j>"u"&&(j=B.disabled);const W=C==="checkbox"||C==="radio",V=$({},e,{checked:L,disabled:j,disableFocusRipple:c,edge:u}),U=iae(V);return Q.jsxs(sae,$({component:"span",className:at(U.root,o),centerRipple:!0,focusRipple:!c,disabled:j,tabIndex:null,role:void 0,onFocus:M,onBlur:D,ownerState:V,ref:n},I,{children:[Q.jsx(oae,$({autoFocus:r,checked:i,defaultChecked:a,className:U.input,disabled:j,id:W?f:void 0,name:y,onChange:N,readOnly:v,ref:m,required:E,ownerState:V,tabIndex:S,type:C},C==="checkbox"&&R===void 0?{}:{value:R},g)),L?s:h]}))}),lae=aae,cae=Tt(Q.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),uae=Tt(Q.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),hae=Tt(Q.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function dae(t){return jt("MuiCheckbox",t)}const fae=Bt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),KT=fae,pae=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],gae=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${$e(r)}`,`size${$e(i)}`]},o=$t(s,dae,e);return $({},e,o)},mae=Be(lae,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${$e(n.size)}`],n.color!=="default"&&e[`color${$e(n.color)}`]]}})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${KT.checked}, &.${KT.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${KT.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),yae=Q.jsx(uae,{}),vae=Q.jsx(cae,{}),bae=Q.jsx(hae,{}),_ae=P.forwardRef(function(e,n){var r,i;const s=Vt({props:e,name:"MuiCheckbox"}),{checkedIcon:o=yae,color:a="primary",icon:l=vae,indeterminate:c=!1,indeterminateIcon:u=bae,inputProps:h,size:f="medium",className:g}=s,m=Qe(s,pae),y=c?u:l,x=c?u:o,b=$({},s,{color:a,indeterminate:c,size:f}),w=gae(b);return Q.jsx(mae,$({type:"checkbox",inputProps:$({"data-indeterminate":c},h),icon:P.cloneElement(y,{fontSize:(r=y.props.fontSize)!=null?r:f}),checkedIcon:P.cloneElement(x,{fontSize:(i=x.props.fontSize)!=null?i:f}),ownerState:b,ref:n,className:at(w.root,g)},m,{classes:w}))}),xae=_ae;function wae(t){return jt("MuiCircularProgress",t)}Bt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Eae=["className","color","disableShrink","size","style","thickness","value","variant"];let bw=t=>t,MN,ON,LN,kN;const cc=44,Tae=z0(MN||(MN=bw`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Sae=z0(ON||(ON=bw`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Cae=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${$e(r)}`],svg:["svg"],circle:["circle",`circle${$e(n)}`,i&&"circleDisableShrink"]};return $t(s,wae,e)},Pae=Be("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${$e(n.color)}`]]}})(({ownerState:t,theme:e})=>$({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&bI(LN||(LN=bw`
      animation: ${0} 1.4s linear infinite;
    `),Tae)),Aae=Be("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Rae=Be("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${$e(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>$({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&bI(kN||(kN=bw`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Sae)),Iae=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate"}=r,f=Qe(r,Eae),g=$({},r,{color:s,disableShrink:o,size:a,thickness:c,value:u,variant:h}),m=Cae(g),y={},x={},b={};if(h==="determinate"){const w=2*Math.PI*((cc-c)/2);y.strokeDasharray=w.toFixed(3),b["aria-valuenow"]=Math.round(u),y.strokeDashoffset=`${((100-u)/100*w).toFixed(3)}px`,x.transform="rotate(-90deg)"}return Q.jsx(Pae,$({className:at(m.root,i),style:$({width:a,height:a},x,l),ownerState:g,ref:n,role:"progressbar"},b,f,{children:Q.jsx(Aae,{className:m.svg,ownerState:g,viewBox:`${cc/2} ${cc/2} ${cc} ${cc}`,children:Q.jsx(Rae,{className:m.circle,style:y,ownerState:g,cx:cc,cy:cc,r:(cc-c)/2,fill:"none",strokeWidth:c})})}))}),GI=Iae;function Mae(t){return jt("MuiModal",t)}Bt("MuiModal",["root","hidden","backdrop"]);const Oae=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Lae=t=>{const{open:e,exited:n,classes:r}=t;return $t({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Mae,r)},kae=Be("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>$({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Dae=Be(Oj,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Nae=P.forwardRef(function(e,n){var r,i,s,o,a,l;const c=Vt({name:"MuiModal",props:e}),{BackdropComponent:u=Dae,BackdropProps:h,className:f,closeAfterTransition:g=!1,children:m,container:y,component:x,components:b={},componentsProps:w={},disableAutoFocus:v=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:S=!1,disablePortal:C=!1,disableRestoreFocus:R=!1,disableScrollLock:I=!1,hideBackdrop:L=!1,keepMounted:O=!1,onBackdropClick:B,open:M,slotProps:D,slots:N}=c,j=Qe(c,Oae),W=$({},c,{closeAfterTransition:g,disableAutoFocus:v,disableEnforceFocus:E,disableEscapeKeyDown:S,disablePortal:C,disableRestoreFocus:R,disableScrollLock:I,hideBackdrop:L,keepMounted:O}),{getRootProps:V,getBackdropProps:U,getTransitionProps:X,portalRef:Y,isTopModal:Z,exited:se,hasTransition:xe}=Ese($({},W,{rootRef:n})),de=$({},W,{exited:se}),Me=Lae(de),he={};if(m.props.tabIndex===void 0&&(he.tabIndex="-1"),xe){const{onEnter:pe,onExited:Ce}=X();he.onEnter=pe,he.onExited=Ce}const Se=(r=(i=N==null?void 0:N.root)!=null?i:b.Root)!=null?r:kae,le=(s=(o=N==null?void 0:N.backdrop)!=null?o:b.Backdrop)!=null?s:u,ae=(a=D==null?void 0:D.root)!=null?a:w.root,me=(l=D==null?void 0:D.backdrop)!=null?l:w.backdrop,oe=Ei({elementType:Se,externalSlotProps:ae,externalForwardedProps:j,getSlotProps:V,additionalProps:{ref:n,as:x},ownerState:de,className:at(f,ae==null?void 0:ae.className,Me==null?void 0:Me.root,!de.open&&de.exited&&(Me==null?void 0:Me.hidden))}),_e=Ei({elementType:le,externalSlotProps:me,additionalProps:h,getSlotProps:pe=>U($({},pe,{onClick:Ce=>{B&&B(Ce),pe!=null&&pe.onClick&&pe.onClick(Ce)}})),className:at(me==null?void 0:me.className,h==null?void 0:h.className,Me==null?void 0:Me.backdrop),ownerState:de});return!O&&!M&&(!xe||se)?null:Q.jsx(Aj,{ref:Y,container:y,disablePortal:C,children:Q.jsxs(Se,$({},oe,{children:[!L&&u?Q.jsx(le,$({},_e)):null,Q.jsx(Qre,{disableEnforceFocus:E,disableAutoFocus:v,disableRestoreFocus:R,isEnabled:Z,open:M,children:P.cloneElement(m,he)})]}))})}),Fae=Nae,Bae=Bt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),DN=Bae,zae=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Uae=t=>{const{classes:e,disableUnderline:n}=t,i=$t({root:["root",!n&&"underline"],input:["input"]},Kse,e);return $({},e,i)},$ae=Be(yw,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...gw(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return $({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Cu.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Cu.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cu.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cu.disabled}, .${Cu.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Cu.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&$({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),jae=Be(vw,{name:"MuiFilledInput",slot:"Input",overridesResolver:mw})(({theme:t,ownerState:e})=>$({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),Fj=P.forwardRef(function(e,n){var r,i,s,o;const a=Vt({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:f=!1,slotProps:g,slots:m={},type:y="text"}=a,x=Qe(a,zae),b=$({},a,{fullWidth:u,inputComponent:h,multiline:f,type:y}),w=Uae(a),v={root:{ownerState:b},input:{ownerState:b}},E=g??c?ss(v,g??c):v,S=(r=(i=m.root)!=null?i:l.Root)!=null?r:$ae,C=(s=(o=m.input)!=null?o:l.Input)!=null?s:jae;return Q.jsx(jI,$({slots:{root:S,input:C},componentsProps:E,fullWidth:u,inputComponent:h,multiline:f,ref:n,type:y},x,{classes:w}))});Fj.muiName="Input";const Gae=Fj;function Hae(t){return jt("MuiFormControl",t)}Bt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Vae=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Wae=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${$e(n)}`,r&&"fullWidth"]};return $t(i,Hae,e)},Xae=Be("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,e[`margin${$e(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>$({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),Yae=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:f=!1,margin:g="none",required:m=!1,size:y="medium",variant:x="outlined"}=r,b=Qe(r,Vae),w=$({},r,{color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:f,margin:g,required:m,size:y,variant:x}),v=Wae(w),[E,S]=P.useState(()=>{let D=!1;return i&&P.Children.forEach(i,N=>{if(!q1(N,["Input","Select"]))return;const j=q1(N,["Select"])?N.props.input:N;j&&zse(j.props)&&(D=!0)}),D}),[C,R]=P.useState(()=>{let D=!1;return i&&P.Children.forEach(i,N=>{q1(N,["Input","Select"])&&(a_(N.props,!0)||a_(N.props.inputProps,!0))&&(D=!0)}),D}),[I,L]=P.useState(!1);l&&I&&L(!1);const O=u!==void 0&&!l?u:I;let B;const M=P.useMemo(()=>({adornedStart:E,setAdornedStart:S,color:o,disabled:l,error:c,filled:C,focused:O,fullWidth:h,hiddenLabel:f,size:y,onBlur:()=>{L(!1)},onEmpty:()=>{R(!1)},onFilled:()=>{R(!0)},onFocus:()=>{L(!0)},registerEffect:B,required:m,variant:x}),[E,o,l,c,C,O,h,f,B,m,y,x]);return Q.jsx($I.Provider,{value:M,children:Q.jsx(Xae,$({as:a,ownerState:w,className:at(v.root,s),ref:n},b,{children:i}))})}),qae=Yae;function Kae(t){return jt("MuiFormLabel",t)}const Zae=Bt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),pm=Zae,Qae=["children","className","color","component","disabled","error","filled","focused","required"],Jae=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${$e(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return $t(l,Kae,e)},ele=Be("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${pm.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${pm.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${pm.error}`]:{color:(t.vars||t).palette.error.main}})),tle=Be("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${pm.error}`]:{color:(t.vars||t).palette.error.main}})),nle=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=Qe(r,Qae),l=pp(),c=V0({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=$({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),h=Jae(u);return Q.jsxs(ele,$({as:o,ownerState:u,className:at(h.root,s),ref:n},a,{children:[i,c.required&&Q.jsxs(tle,{ownerState:u,"aria-hidden":!0,className:h.asterisk,children:["","*"]})]}))}),rle=nle,ile=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function tA(t){return`scale(${t}, ${t**2})`}const sle={entering:{opacity:1,transform:tA(1)},entered:{opacity:1,transform:"none"}},ZT=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Bj=P.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:f,onExiting:g,style:m,timeout:y="auto",TransitionComponent:x=MI}=e,b=Qe(e,ile),w=P.useRef(),v=P.useRef(),E=uu(),S=P.useRef(null),C=Vn(S,s.ref,n),R=j=>W=>{if(j){const V=S.current;W===void 0?j(V):j(V,W)}},I=R(u),L=R((j,W)=>{fj(j);const{duration:V,delay:U,easing:X}=Nf({style:m,timeout:y,easing:o},{mode:"enter"});let Y;y==="auto"?(Y=E.transitions.getAutoHeightDuration(j.clientHeight),v.current=Y):Y=V,j.style.transition=[E.transitions.create("opacity",{duration:Y,delay:U}),E.transitions.create("transform",{duration:ZT?Y:Y*.666,delay:U,easing:X})].join(","),l&&l(j,W)}),O=R(c),B=R(g),M=R(j=>{const{duration:W,delay:V,easing:U}=Nf({style:m,timeout:y,easing:o},{mode:"exit"});let X;y==="auto"?(X=E.transitions.getAutoHeightDuration(j.clientHeight),v.current=X):X=W,j.style.transition=[E.transitions.create("opacity",{duration:X,delay:V}),E.transitions.create("transform",{duration:ZT?X:X*.666,delay:ZT?V:V||X*.333,easing:U})].join(","),j.style.opacity=0,j.style.transform=tA(.75),h&&h(j)}),D=R(f),N=j=>{y==="auto"&&(w.current=setTimeout(j,v.current||0)),r&&r(S.current,j)};return P.useEffect(()=>()=>{clearTimeout(w.current)},[]),Q.jsx(x,$({appear:i,in:a,nodeRef:S,onEnter:L,onEntered:O,onEntering:I,onExit:M,onExited:D,onExiting:B,addEndListener:N,timeout:y==="auto"?null:y},b,{children:(j,W)=>P.cloneElement(s,$({style:$({opacity:0,transform:tA(.75),visibility:j==="exited"&&!a?"hidden":void 0},sle[j],m,s.props.style),ref:C},W))}))});Bj.muiSupportAuto=!0;const nA=Bj,ole=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],ale=t=>{const{classes:e,disableUnderline:n}=t,i=$t({root:["root",!n&&"underline"],input:["input"]},Wse,e);return $({},e,i)},lle=Be(yw,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...gw(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),$({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${rg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${rg.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${rg.disabled}, .${rg.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${rg.disabled}:before`]:{borderBottomStyle:"dotted"}})}),cle=Be(vw,{name:"MuiInput",slot:"Input",overridesResolver:mw})({}),zj=P.forwardRef(function(e,n){var r,i,s,o;const a=Vt({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:h=!1,inputComponent:f="input",multiline:g=!1,slotProps:m,slots:y={},type:x="text"}=a,b=Qe(a,ole),w=ale(a),E={root:{ownerState:{disableUnderline:l}}},S=m??u?ss(m??u,E):E,C=(r=(i=y.root)!=null?i:c.Root)!=null?r:lle,R=(s=(o=y.input)!=null?o:c.Input)!=null?s:cle;return Q.jsx(jI,$({slots:{root:C,input:R},slotProps:S,fullWidth:h,inputComponent:f,multiline:g,ref:n,type:x},b,{classes:w}))});zj.muiName="Input";const ule=zj;function hle(t){return jt("MuiInputLabel",t)}Bt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const dle=["disableAnimation","margin","shrink","variant","className"],fle=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${$e(r)}`,o],asterisk:[a&&"asterisk"]},c=$t(l,hle,e);return $({},e,c)},ple=Be(rle,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${pm.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>$({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&$({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&$({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&$({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),gle=P.forwardRef(function(e,n){const r=Vt({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=Qe(r,dle),l=pp();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=V0({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),h=$({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=fle(h);return Q.jsx(ple,$({"data-shrink":c,ownerState:h,ref:n,className:at(f.root,o)},a,{classes:f}))}),mle=gle,yle=P.createContext({}),l_=yle;function vle(t){return jt("MuiList",t)}Bt("MuiList",["root","padding","dense","subheader"]);const ble=["children","className","component","dense","disablePadding","subheader"],_le=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return $t({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},vle,e)},xle=Be("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>$({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),wle=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=Qe(r,ble),h=P.useMemo(()=>({dense:a}),[a]),f=$({},r,{component:o,dense:a,disablePadding:l}),g=_le(f);return Q.jsx(l_.Provider,{value:h,children:Q.jsxs(xle,$({as:o,className:at(g.root,s),ref:n,ownerState:f},u,{children:[c,i]}))})}),Ele=wle,Tle=Bt("MuiListItemIcon",["root","alignItemsFlexStart"]),NN=Tle;function Sle(t){return jt("MuiListItemText",t)}const Cle=Bt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),c_=Cle,Ple=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ale=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return $t({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Sle,e)},Rle=Be("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${c_.primary}`]:e.primary},{[`& .${c_.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>$({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Ile=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:h}=r,f=Qe(r,Ple),{dense:g}=P.useContext(l_);let m=l??i,y=u;const x=$({},r,{disableTypography:o,inset:a,primary:!!m,secondary:!!y,dense:g}),b=Ale(x);return m!=null&&m.type!==es&&!o&&(m=Q.jsx(es,$({variant:g?"body2":"body1",className:b.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:m}))),y!=null&&y.type!==es&&!o&&(y=Q.jsx(es,$({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},h,{children:y}))),Q.jsxs(Rle,$({className:at(b.root,s),ownerState:x,ref:n},f,{children:[m,y]}))}),Mle=Ile,Ole=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function QT(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function FN(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Uj(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function ig(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Uj(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const Lle=P.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,f=Qe(e,Ole),g=P.useRef(null),m=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$s(()=>{i&&g.current.focus()},[i]),P.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(v,E)=>{const S=!g.current.style.width;if(v.clientHeight<g.current.clientHeight&&S){const C=`${Q$(or(v))}px`;g.current.style[E.direction==="rtl"?"paddingLeft":"paddingRight"]=C,g.current.style.width=`calc(100% + ${C})`}return g.current}}),[]);const y=v=>{const E=g.current,S=v.key,C=or(E).activeElement;if(S==="ArrowDown")v.preventDefault(),ig(E,C,c,l,QT);else if(S==="ArrowUp")v.preventDefault(),ig(E,C,c,l,FN);else if(S==="Home")v.preventDefault(),ig(E,null,c,l,QT);else if(S==="End")v.preventDefault(),ig(E,null,c,l,FN);else if(S.length===1){const R=m.current,I=S.toLowerCase(),L=performance.now();R.keys.length>0&&(L-R.lastTime>500?(R.keys=[],R.repeating=!0,R.previousKeyMatched=!0):R.repeating&&I!==R.keys[0]&&(R.repeating=!1)),R.lastTime=L,R.keys.push(I);const O=C&&!R.repeating&&Uj(C,R);R.previousKeyMatched&&(O||ig(E,C,!1,l,QT,R))?v.preventDefault():R.previousKeyMatched=!1}u&&u(v)},x=Vn(g,n);let b=-1;P.Children.forEach(o,(v,E)=>{if(!P.isValidElement(v)){b===E&&(b+=1,b>=o.length&&(b=-1));return}v.props.disabled||(h==="selectedMenu"&&v.props.selected||b===-1)&&(b=E),b===E&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const w=P.Children.map(o,(v,E)=>{if(E===b){const S={};return s&&(S.autoFocus=!0),v.props.tabIndex===void 0&&h==="selectedMenu"&&(S.tabIndex=0),P.cloneElement(v,S)}return v});return Q.jsx(Ele,$({role:"menu",ref:x,className:a,onKeyDown:y,tabIndex:i?0:-1},f,{children:w}))}),kle=Lle;function Dle(t){return jt("MuiPopover",t)}Bt("MuiPopover",["root","paper"]);const Nle=["onEntering"],Fle=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Ble=["slotProps"];function BN(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function zN(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function UN(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function JT(t){return typeof t=="function"?t():t}const zle=t=>{const{classes:e}=t;return $t({root:["root"],paper:["paper"]},Dle,e)},Ule=Be(Fae,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),$j=Be(mj,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),$le=P.forwardRef(function(e,n){var r,i,s;const o=Vt({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:h="anchorEl",children:f,className:g,container:m,elevation:y=8,marginThreshold:x=16,open:b,PaperProps:w={},slots:v,slotProps:E,transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:C=nA,transitionDuration:R="auto",TransitionProps:{onEntering:I}={},disableScrollLock:L=!1}=o,O=Qe(o.TransitionProps,Nle),B=Qe(o,Fle),M=(r=E==null?void 0:E.paper)!=null?r:w,D=P.useRef(),N=Vn(D,M.ref),j=$({},o,{anchorOrigin:c,anchorReference:h,elevation:y,marginThreshold:x,externalPaperSlotProps:M,transformOrigin:S,TransitionComponent:C,transitionDuration:R,TransitionProps:O}),W=zle(j),V=P.useCallback(()=>{if(h==="anchorPosition")return u;const pe=JT(l),we=(pe&&pe.nodeType===1?pe:or(D.current).body).getBoundingClientRect();return{top:we.top+BN(we,c.vertical),left:we.left+zN(we,c.horizontal)}},[l,c.horizontal,c.vertical,u,h]),U=P.useCallback(pe=>({vertical:BN(pe,S.vertical),horizontal:zN(pe,S.horizontal)}),[S.horizontal,S.vertical]),X=P.useCallback(pe=>{const Ce={width:pe.offsetWidth,height:pe.offsetHeight},we=U(Ce);if(h==="none")return{top:null,left:null,transformOrigin:UN(we)};const Ye=V();let ke=Ye.top-we.vertical,Oe=Ye.left-we.horizontal;const rt=ke+Ce.height,qe=Oe+Ce.width,He=ru(JT(l)),fn=He.innerHeight-x,Mt=He.innerWidth-x;if(x!==null&&ke<x){const pt=ke-x;ke-=pt,we.vertical+=pt}else if(x!==null&&rt>fn){const pt=rt-fn;ke-=pt,we.vertical+=pt}if(x!==null&&Oe<x){const pt=Oe-x;Oe-=pt,we.horizontal+=pt}else if(qe>Mt){const pt=qe-Mt;Oe-=pt,we.horizontal+=pt}return{top:`${Math.round(ke)}px`,left:`${Math.round(Oe)}px`,transformOrigin:UN(we)}},[l,h,V,U,x]),[Y,Z]=P.useState(b),se=P.useCallback(()=>{const pe=D.current;if(!pe)return;const Ce=X(pe);Ce.top!==null&&(pe.style.top=Ce.top),Ce.left!==null&&(pe.style.left=Ce.left),pe.style.transformOrigin=Ce.transformOrigin,Z(!0)},[X]);P.useEffect(()=>(L&&window.addEventListener("scroll",se),()=>window.removeEventListener("scroll",se)),[l,L,se]);const xe=(pe,Ce)=>{I&&I(pe,Ce),se()},de=()=>{Z(!1)};P.useEffect(()=>{b&&se()}),P.useImperativeHandle(a,()=>b?{updatePosition:()=>{se()}}:null,[b,se]),P.useEffect(()=>{if(!b)return;const pe=wI(()=>{se()}),Ce=ru(l);return Ce.addEventListener("resize",pe),()=>{pe.clear(),Ce.removeEventListener("resize",pe)}},[l,b,se]);let Me=R;R==="auto"&&!C.muiSupportAuto&&(Me=void 0);const he=m||(l?or(JT(l)).body:void 0),Se=(i=v==null?void 0:v.root)!=null?i:Ule,le=(s=v==null?void 0:v.paper)!=null?s:$j,ae=Ei({elementType:le,externalSlotProps:$({},M,{style:Y?M.style:$({},M.style,{opacity:0})}),additionalProps:{elevation:y,ref:N},ownerState:j,className:at(W.paper,M==null?void 0:M.className)}),me=Ei({elementType:Se,externalSlotProps:(E==null?void 0:E.root)||{},externalForwardedProps:B,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:he,open:b},ownerState:j,className:at(W.root,g)}),{slotProps:oe}=me,_e=Qe(me,Ble);return Q.jsx(Se,$({},_e,!Vc(Se)&&{slotProps:oe,disableScrollLock:L},{children:Q.jsx(C,$({appear:!0,in:b,onEntering:xe,onExited:de,timeout:Me},O,{children:Q.jsx(le,$({},ae,{children:f}))}))}))}),jle=$le;function Gle(t){return jt("MuiMenu",t)}Bt("MuiMenu",["root","paper","list"]);const Hle=["onEntering"],Vle=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Wle={vertical:"top",horizontal:"right"},Xle={vertical:"top",horizontal:"left"},Yle=t=>{const{classes:e}=t;return $t({root:["root"],paper:["paper"],list:["list"]},Gle,e)},qle=Be(jle,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Kle=Be($j,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Zle=Be(kle,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Qle=P.forwardRef(function(e,n){var r,i;const s=Vt({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:h,open:f,PaperProps:g={},PopoverClasses:m,transitionDuration:y="auto",TransitionProps:{onEntering:x}={},variant:b="selectedMenu",slots:w={},slotProps:v={}}=s,E=Qe(s.TransitionProps,Hle),S=Qe(s,Vle),C=uu(),R=C.direction==="rtl",I=$({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:x,PaperProps:g,transitionDuration:y,TransitionProps:E,variant:b}),L=Yle(I),O=o&&!c&&f,B=P.useRef(null),M=(X,Y)=>{B.current&&B.current.adjustStyleForScrollbar(X,C),x&&x(X,Y)},D=X=>{X.key==="Tab"&&(X.preventDefault(),h&&h(X,"tabKeyDown"))};let N=-1;P.Children.map(a,(X,Y)=>{P.isValidElement(X)&&(X.props.disabled||(b==="selectedMenu"&&X.props.selected||N===-1)&&(N=Y))});const j=(r=w.paper)!=null?r:Kle,W=(i=v.paper)!=null?i:g,V=Ei({elementType:w.root,externalSlotProps:v.root,ownerState:I,className:[L.root,l]}),U=Ei({elementType:j,externalSlotProps:W,ownerState:I,className:L.paper});return Q.jsx(qle,$({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:R?"right":"left"},transformOrigin:R?Wle:Xle,slots:{paper:j,root:w.root},slotProps:{root:V,paper:U},open:f,ref:n,transitionDuration:y,TransitionProps:$({onEntering:M},E),ownerState:I},S,{classes:m,children:Q.jsx(Zle,$({onKeyDown:D,actions:B,autoFocus:o&&(N===-1||c),autoFocusItem:O,variant:b},u,{className:at(L.list,u.className),children:a}))}))}),Jle=Qle;function ece(t){return jt("MuiMenuItem",t)}const tce=Bt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),sg=tce,nce=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],rce=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},ice=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=$t({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},ece,o);return $({},o,l)},sce=Be(j0,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:rce})(({theme:t,ownerState:e})=>$({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${sg.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${sg.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${sg.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${sg.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${sg.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${DN.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${DN.inset}`]:{marginLeft:52},[`& .${c_.root}`]:{marginTop:0,marginBottom:0},[`& .${c_.inset}`]:{paddingLeft:36},[`& .${NN.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&$({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${NN.root} svg`]:{fontSize:"1.25rem"}}))),oce=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:h,className:f}=r,g=Qe(r,nce),m=P.useContext(l_),y=P.useMemo(()=>({dense:o||m.dense||!1,disableGutters:l}),[m.dense,o,l]),x=P.useRef(null);$s(()=>{i&&x.current&&x.current.focus()},[i]);const b=$({},r,{dense:y.dense,divider:a,disableGutters:l}),w=ice(r),v=Vn(x,n);let E;return r.disabled||(E=h!==void 0?h:-1),Q.jsx(l_.Provider,{value:y,children:Q.jsx(sce,$({ref:v,role:u,tabIndex:E,component:s,focusVisibleClassName:at(w.focusVisible,c),className:at(w.root,f)},g,{ownerState:b,classes:w}))})}),ace=oce;function lce(t){return jt("MuiNativeSelect",t)}const cce=Bt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),HI=cce,uce=["className","disabled","error","IconComponent","inputRef","variant"],hce=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${$e(n)}`,s&&"iconOpen",r&&"disabled"]};return $t(a,lce,e)},jj=({ownerState:t,theme:e})=>$({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":$({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${HI.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),dce=Be("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cs,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${HI.multiple}`]:e.multiple}]}})(jj),Gj=({ownerState:t,theme:e})=>$({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${HI.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),fce=Be("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${$e(n.variant)}`],n.open&&e.iconOpen]}})(Gj),pce=P.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=Qe(e,uce),u=$({},e,{disabled:i,variant:l,error:s}),h=hce(u);return Q.jsxs(P.Fragment,{children:[Q.jsx(dce,$({ownerState:u,className:at(h.select,r),disabled:i,ref:a||n},c)),e.multiple?null:Q.jsx(fce,{as:o,ownerState:u,className:h.icon})]})}),gce=pce;var $N;const mce=["children","classes","className","label","notched"],yce=Be("fieldset",{shouldForwardProp:cs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),vce=Be("legend",{shouldForwardProp:cs})(({ownerState:t,theme:e})=>$({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&$({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function bce(t){const{className:e,label:n,notched:r}=t,i=Qe(t,mce),s=n!=null&&n!=="",o=$({},t,{notched:r,withLabel:s});return Q.jsx(yce,$({"aria-hidden":!0,className:e,ownerState:o},i,{children:Q.jsx(vce,{ownerState:o,children:s?Q.jsx("span",{children:n}):$N||($N=Q.jsx("span",{className:"notranslate",children:""}))})}))}const _ce=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],xce=t=>{const{classes:e}=t,r=$t({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Yse,e);return $({},e,r)},wce=Be(yw,{shouldForwardProp:t=>cs(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:gw})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return $({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${lc.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${lc.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${lc.focused} .${lc.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${lc.error} .${lc.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${lc.disabled} .${lc.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&$({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Ece=Be(bce,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Tce=Be(vw,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:mw})(({theme:t,ownerState:e})=>$({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Hj=P.forwardRef(function(e,n){var r,i,s,o,a;const l=Vt({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:h="input",label:f,multiline:g=!1,notched:m,slots:y={},type:x="text"}=l,b=Qe(l,_ce),w=xce(l),v=pp(),E=V0({props:l,muiFormControl:v,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=$({},l,{color:E.color||"primary",disabled:E.disabled,error:E.error,focused:E.focused,formControl:v,fullWidth:u,hiddenLabel:E.hiddenLabel,multiline:g,size:E.size,type:x}),C=(r=(i=y.root)!=null?i:c.Root)!=null?r:wce,R=(s=(o=y.input)!=null?o:c.Input)!=null?s:Tce;return Q.jsx(jI,$({slots:{root:C,input:R},renderSuffix:I=>Q.jsx(Ece,{ownerState:S,className:w.notchedOutline,label:f!=null&&f!==""&&E.required?a||(a=Q.jsxs(P.Fragment,{children:[f,"","*"]})):f,notched:typeof m<"u"?m:!!(I.startAdornment||I.filled||I.focused)}),fullWidth:u,inputComponent:h,multiline:g,ref:n,type:x},b,{classes:$({},w,{notchedOutline:null})}))});Hj.muiName="Input";const Sce=Hj;function Cce(t){return jt("MuiSelect",t)}const og=Bt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var jN;const Pce=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Ace=Be("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${og.select}`]:e.select},{[`&.${og.select}`]:e[n.variant]},{[`&.${og.error}`]:e.error},{[`&.${og.multiple}`]:e.multiple}]}})(jj,{[`&.${og.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Rce=Be("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${$e(n.variant)}`],n.open&&e.iconOpen]}})(Gj),Ice=Be("input",{shouldForwardProp:t=>II(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function GN(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Mce(t){return t==null||typeof t=="string"&&!t.trim()}const Oce=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${$e(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return $t(a,Cce,e)},Lce=P.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:h,disabled:f,displayEmpty:g,error:m=!1,IconComponent:y,inputRef:x,labelId:b,MenuProps:w={},multiple:v,name:E,onBlur:S,onChange:C,onClose:R,onFocus:I,onOpen:L,open:O,readOnly:B,renderValue:M,SelectDisplayProps:D={},tabIndex:N,value:j,variant:W="standard"}=e,V=Qe(e,Pce),[U,X]=Df({controlled:j,default:h,name:"Select"}),[Y,Z]=Df({controlled:O,default:u,name:"Select"}),se=P.useRef(null),xe=P.useRef(null),[de,Me]=P.useState(null),{current:he}=P.useRef(O!=null),[Se,le]=P.useState(),ae=Vn(n,x),me=P.useCallback(Fe=>{xe.current=Fe,Fe&&Me(Fe)},[]),oe=de==null?void 0:de.parentNode;P.useImperativeHandle(ae,()=>({focus:()=>{xe.current.focus()},node:se.current,value:U}),[U]),P.useEffect(()=>{u&&Y&&de&&!he&&(le(a?null:oe.clientWidth),xe.current.focus())},[de,a]),P.useEffect(()=>{o&&xe.current.focus()},[o]),P.useEffect(()=>{if(!b)return;const Fe=or(xe.current).getElementById(b);if(Fe){const St=()=>{getSelection().isCollapsed&&xe.current.focus()};return Fe.addEventListener("click",St),()=>{Fe.removeEventListener("click",St)}}},[b]);const _e=(Fe,St)=>{Fe?L&&L(St):R&&R(St),he||(le(a?null:oe.clientWidth),Z(Fe))},pe=Fe=>{Fe.button===0&&(Fe.preventDefault(),xe.current.focus(),_e(!0,Fe))},Ce=Fe=>{_e(!1,Fe)},we=P.Children.toArray(l),Ye=Fe=>{const St=we.find(Ht=>Ht.props.value===Fe.target.value);St!==void 0&&(X(St.props.value),C&&C(Fe,St))},ke=Fe=>St=>{let Ht;if(St.currentTarget.hasAttribute("tabindex")){if(v){Ht=Array.isArray(U)?U.slice():[];const on=U.indexOf(Fe.props.value);on===-1?Ht.push(Fe.props.value):Ht.splice(on,1)}else Ht=Fe.props.value;if(Fe.props.onClick&&Fe.props.onClick(St),U!==Ht&&(X(Ht),C)){const on=St.nativeEvent||St,Nr=new on.constructor(on.type,on);Object.defineProperty(Nr,"target",{writable:!0,value:{value:Ht,name:E}}),C(Nr,Fe)}v||_e(!1,St)}},Oe=Fe=>{B||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Fe.key)!==-1&&(Fe.preventDefault(),_e(!0,Fe))},rt=de!==null&&Y,qe=Fe=>{!rt&&S&&(Object.defineProperty(Fe,"target",{writable:!0,value:{value:U,name:E}}),S(Fe))};delete V["aria-invalid"];let He,fn;const Mt=[];let pt=!1;(a_({value:U})||g)&&(M?He=M(U):pt=!0);const Te=we.map(Fe=>{if(!P.isValidElement(Fe))return null;let St;if(v){if(!Array.isArray(U))throw new Error(nu(2));St=U.some(Ht=>GN(Ht,Fe.props.value)),St&&pt&&Mt.push(Fe.props.children)}else St=GN(U,Fe.props.value),St&&pt&&(fn=Fe.props.children);return P.cloneElement(Fe,{"aria-selected":St?"true":"false",onClick:ke(Fe),onKeyUp:Ht=>{Ht.key===" "&&Ht.preventDefault(),Fe.props.onKeyUp&&Fe.props.onKeyUp(Ht)},role:"option",selected:St,value:void 0,"data-value":Fe.props.value})});pt&&(v?Mt.length===0?He=null:He=Mt.reduce((Fe,St,Ht)=>(Fe.push(St),Ht<Mt.length-1&&Fe.push(", "),Fe),[]):He=fn);let Ne=Se;!a&&he&&de&&(Ne=oe.clientWidth);let Ke;typeof N<"u"?Ke=N:Ke=f?null:0;const je=D.id||(E?`mui-component-select-${E}`:void 0),Le=$({},e,{variant:W,value:U,open:rt,error:m}),kt=Oce(Le),wt=$({},w.PaperProps,(r=w.slotProps)==null?void 0:r.paper),Ot=Qx();return Q.jsxs(P.Fragment,{children:[Q.jsx(Ace,$({ref:me,tabIndex:Ke,role:"combobox","aria-controls":Ot,"aria-disabled":f?"true":void 0,"aria-expanded":rt?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[b,je].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Oe,onMouseDown:f||B?null:pe,onBlur:qe,onFocus:I},D,{ownerState:Le,className:at(D.className,kt.select,c),id:je,children:Mce(He)?jN||(jN=Q.jsx("span",{className:"notranslate",children:""})):He})),Q.jsx(Ice,$({"aria-invalid":m,value:Array.isArray(U)?U.join(","):U,name:E,ref:se,"aria-hidden":!0,onChange:Ye,tabIndex:-1,disabled:f,className:kt.nativeInput,autoFocus:o,ownerState:Le},V)),Q.jsx(Rce,{as:y,className:kt.icon,ownerState:Le}),Q.jsx(Jle,$({id:`menu-${E||""}`,anchorEl:oe,open:rt,onClose:Ce,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},w,{MenuListProps:$({"aria-labelledby":b,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:Ot},w.MenuListProps),slotProps:$({},w.slotProps,{paper:$({},wt,{style:$({minWidth:Ne},wt!=null?wt.style:null)})}),children:Te}))]})}),kce=Lce,Dce=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Nce=["root"],Fce=t=>{const{classes:e}=t;return e},VI={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>cs(t)&&t!=="variant",slot:"Root"},Bce=Be(ule,VI)(""),zce=Be(Sce,VI)(""),Uce=Be(Gae,VI)(""),Vj=P.forwardRef(function(e,n){const r=Vt({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Qse,id:h,input:f,inputProps:g,label:m,labelId:y,MenuProps:x,multiple:b=!1,native:w=!1,onClose:v,onOpen:E,open:S,renderValue:C,SelectDisplayProps:R,variant:I="outlined"}=r,L=Qe(r,Dce),O=w?gce:kce,B=pp(),M=V0({props:r,muiFormControl:B,states:["variant","error"]}),D=M.variant||I,N=$({},r,{variant:D,classes:o}),j=Fce(N),W=Qe(j,Nce),V=f||{standard:Q.jsx(Bce,{ownerState:N}),outlined:Q.jsx(zce,{label:m,ownerState:N}),filled:Q.jsx(Uce,{ownerState:N})}[D],U=Vn(n,V.ref);return Q.jsx(P.Fragment,{children:P.cloneElement(V,$({inputComponent:O,inputProps:$({children:s,error:M.error,IconComponent:u,variant:D,type:void 0,multiple:b},w?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:y,MenuProps:x,onClose:v,onOpen:E,open:S,renderValue:C,SelectDisplayProps:$({id:h},R)},g,{classes:g?ss(W,g.classes):W},f?f.props.inputProps:{})},b&&w&&D==="outlined"?{notched:!0}:{},{ref:U,className:at(V.props.className,a,j.root)},!f&&{variant:D},L))})});Vj.muiName="Select";const $ce=Vj,jce=t=>!t||!Vc(t);function Gce(t){return jt("MuiSlider",t)}const Ko=Bt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Hce=t=>{const{open:e}=t;return{offset:at(e&&Ko.valueLabelOpen),circle:Ko.valueLabelCircle,label:Ko.valueLabelLabel}};function Vce(t){const{children:e,className:n,value:r}=t,i=Hce(t);return e?P.cloneElement(e,{className:at(e.props.className)},Q.jsxs(P.Fragment,{children:[e.props.children,Q.jsx("span",{className:at(i.offset,n),"aria-hidden":!0,children:Q.jsx("span",{className:i.circle,children:Q.jsx("span",{className:i.label,children:r})})})]})):null}const Wce=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function HN(t){return t}const Xce=Be("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${$e(n.color)}`],n.size!=="medium"&&e[`size${$e(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t,ownerState:e})=>$({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(t.vars||t).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&$({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&$({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${Ko.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ko.dragging}`]:{[`& .${Ko.thumb}, & .${Ko.track}`]:{transition:"none"}}})),Yce=Be("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})(({ownerState:t})=>$({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},t.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track==="inverted"&&{opacity:1})),qce=Be("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?cj(t.palette[e.color].main,.62):lj(t.palette[e.color].main,.5);return $({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n,borderColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n})}),Kce=Be("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${$e(n.color)}`],n.size!=="medium"&&e[`thumbSize${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>$({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&::before":$({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${Ko.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:Rn(t.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Ko.active}`]:{boxShadow:`0px 0px 0px 14px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:Rn(t.palette[e.color].main,.16)}`},[`&.${Ko.disabled}`]:{"&:hover":{boxShadow:"none"}}})),Zce=Be(Vce,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t,ownerState:e})=>$({[`&.${Ko.valueLabelOpen}`]:{transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:e.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},e.size==="small"&&{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),Qce=Be("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>II(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t,ownerState:e,markActive:n})=>$({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})),Jce=Be("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>II(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t,ownerState:e,markLabelActive:n})=>$({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})),eue=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${$e(a)}`,l&&`size${$e(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${$e(l)}`,a&&`thumbColor${$e(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return $t(c,Gce,o)},tue=({children:t})=>t,nue=P.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,h,f,g,m,y,x,b,w,v,E,S,C,R,I,L,O;const B=Vt({props:e,name:"MuiSlider"}),D=uu().direction==="rtl",{"aria-label":N,"aria-valuetext":j,"aria-labelledby":W,component:V="span",components:U={},componentsProps:X={},color:Y="primary",classes:Z,className:se,disableSwap:xe=!1,disabled:de=!1,getAriaLabel:Me,getAriaValueText:he,marks:Se=!1,max:le=100,min:ae=0,orientation:me="horizontal",size:oe="medium",step:_e=1,scale:pe=HN,slotProps:Ce,slots:we,track:Ye="normal",valueLabelDisplay:ke="off",valueLabelFormat:Oe=HN}=B,rt=Qe(B,Wce),qe=$({},B,{isRtl:D,max:le,min:ae,classes:Z,disabled:de,disableSwap:xe,orientation:me,marks:Se,color:Y,size:oe,step:_e,scale:pe,track:Ye,valueLabelDisplay:ke,valueLabelFormat:Oe}),{axisProps:He,getRootProps:fn,getHiddenInputProps:Mt,getThumbProps:pt,open:Te,active:Ne,axis:Ke,focusedThumbIndex:je,range:Le,dragging:kt,marks:wt,values:Ot,trackOffset:Fe,trackLeap:St,getThumbStyle:Ht}=Ise($({},qe,{rootRef:n}));qe.marked=wt.length>0&&wt.some(Zt=>Zt.label),qe.dragging=kt,qe.focusedThumbIndex=je;const on=eue(qe),Nr=(r=(i=we==null?void 0:we.root)!=null?i:U.Root)!=null?r:Xce,Vi=(s=(o=we==null?void 0:we.rail)!=null?o:U.Rail)!=null?s:Yce,Mo=(a=(l=we==null?void 0:we.track)!=null?l:U.Track)!=null?a:qce,pa=(c=(u=we==null?void 0:we.thumb)!=null?u:U.Thumb)!=null?c:Kce,Xs=(h=(f=we==null?void 0:we.valueLabel)!=null?f:U.ValueLabel)!=null?h:Zce,hs=(g=(m=we==null?void 0:we.mark)!=null?m:U.Mark)!=null?g:Qce,ee=(y=(x=we==null?void 0:we.markLabel)!=null?x:U.MarkLabel)!=null?y:Jce,ne=(b=(w=we==null?void 0:we.input)!=null?w:U.Input)!=null?b:"input",ce=(v=Ce==null?void 0:Ce.root)!=null?v:X.root,De=(E=Ce==null?void 0:Ce.rail)!=null?E:X.rail,Ge=(S=Ce==null?void 0:Ce.track)!=null?S:X.track,vt=(C=Ce==null?void 0:Ce.thumb)!=null?C:X.thumb,ut=(R=Ce==null?void 0:Ce.valueLabel)!=null?R:X.valueLabel,ht=(I=Ce==null?void 0:Ce.mark)!=null?I:X.mark,Je=(L=Ce==null?void 0:Ce.markLabel)!=null?L:X.markLabel,Lt=(O=Ce==null?void 0:Ce.input)!=null?O:X.input,an=Ei({elementType:Nr,getSlotProps:fn,externalSlotProps:ce,externalForwardedProps:rt,additionalProps:$({},jce(Nr)&&{as:V}),ownerState:$({},qe,ce==null?void 0:ce.ownerState),className:[on.root,se]}),gt=Ei({elementType:Vi,externalSlotProps:De,ownerState:qe,className:on.rail}),Ct=Ei({elementType:Mo,externalSlotProps:Ge,additionalProps:{style:$({},He[Ke].offset(Fe),He[Ke].leap(St))},ownerState:$({},qe,Ge==null?void 0:Ge.ownerState),className:on.track}),ln=Ei({elementType:pa,getSlotProps:pt,externalSlotProps:vt,ownerState:$({},qe,vt==null?void 0:vt.ownerState),className:on.thumb}),Fn=Ei({elementType:Xs,externalSlotProps:ut,ownerState:$({},qe,ut==null?void 0:ut.ownerState),className:on.valueLabel}),tn=Ei({elementType:hs,externalSlotProps:ht,ownerState:qe,className:on.mark}),Pr=Ei({elementType:ee,externalSlotProps:Je,ownerState:qe,className:on.markLabel}),ds=Ei({elementType:ne,getSlotProps:Mt,externalSlotProps:Lt,ownerState:qe});return Q.jsxs(Nr,$({},an,{children:[Q.jsx(Vi,$({},gt)),Q.jsx(Mo,$({},Ct)),wt.filter(Zt=>Zt.value>=ae&&Zt.value<=le).map((Zt,Jt)=>{const vr=o_(Zt.value,ae,le),br=He[Ke].offset(vr);let Wn;return Ye===!1?Wn=Ot.indexOf(Zt.value)!==-1:Wn=Ye==="normal"&&(Le?Zt.value>=Ot[0]&&Zt.value<=Ot[Ot.length-1]:Zt.value<=Ot[0])||Ye==="inverted"&&(Le?Zt.value<=Ot[0]||Zt.value>=Ot[Ot.length-1]:Zt.value>=Ot[0]),Q.jsxs(P.Fragment,{children:[Q.jsx(hs,$({"data-index":Jt},tn,!Vc(hs)&&{markActive:Wn},{style:$({},br,tn.style),className:at(tn.className,Wn&&on.markActive)})),Zt.label!=null?Q.jsx(ee,$({"aria-hidden":!0,"data-index":Jt},Pr,!Vc(ee)&&{markLabelActive:Wn},{style:$({},br,Pr.style),className:at(on.markLabel,Pr.className,Wn&&on.markLabelActive),children:Zt.label})):null]},Jt)}),Ot.map((Zt,Jt)=>{const vr=o_(Zt,ae,le),br=He[Ke].offset(vr),Wn=ke==="off"?tue:Xs;return Q.jsx(Wn,$({},!Vc(Wn)&&{valueLabelFormat:Oe,valueLabelDisplay:ke,value:typeof Oe=="function"?Oe(pe(Zt),Jt):Oe,index:Jt,open:Te===Jt||Ne===Jt||ke==="on",disabled:de},Fn,{children:Q.jsx(pa,$({"data-index":Jt},ln,{className:at(on.thumb,ln.className,Ne===Jt&&on.active,je===Jt&&on.focusVisible),style:$({},br,Ht(Jt),ln.style),children:Q.jsx(ne,$({"data-index":Jt,"aria-label":Me?Me(Jt):N,"aria-valuenow":pe(Zt),"aria-labelledby":W,"aria-valuetext":he?he(pe(Zt),Jt):j,value:Ot[Jt]},ds))}))}),Jt)})]}))}),_w=nue;function rue(t){return jt("MuiTooltip",t)}const iue=Bt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Mc=iue,sue=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function oue(t){return Math.round(t*1e5)/1e5}const aue=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${$e(s.split("-")[0])}`],arrow:["arrow"]};return $t(o,rue,e)},lue=Be(Mj,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>$({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Mc.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Mc.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Mc.arrow}`]:$({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Mc.arrow}`]:$({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),cue=Be("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${$e(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>$({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Rn(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${oue(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Mc.popper}[data-popper-placement*="left"] &`]:$({transformOrigin:"right center"},e.isRtl?$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):$({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Mc.popper}[data-popper-placement*="right"] &`]:$({transformOrigin:"left center"},e.isRtl?$({marginRight:"14px"},e.touch&&{marginRight:"24px"}):$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Mc.popper}[data-popper-placement*="top"] &`]:$({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Mc.popper}[data-popper-placement*="bottom"] &`]:$({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),uue=Be("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Rn(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Nv=!1,eS=null,ag={x:0,y:0};function Fv(t,e){return n=>{e&&e(n),t(n)}}const hue=P.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,h,f,g,m,y,x,b,w,v,E,S;const C=Vt({props:e,name:"MuiTooltip"}),{arrow:R=!1,children:I,components:L={},componentsProps:O={},describeChild:B=!1,disableFocusListener:M=!1,disableHoverListener:D=!1,disableInteractive:N=!1,disableTouchListener:j=!1,enterDelay:W=100,enterNextDelay:V=0,enterTouchDelay:U=700,followCursor:X=!1,id:Y,leaveDelay:Z=0,leaveTouchDelay:se=1500,onClose:xe,onOpen:de,open:Me,placement:he="bottom",PopperComponent:Se,PopperProps:le={},slotProps:ae={},slots:me={},title:oe,TransitionComponent:_e=nA,TransitionProps:pe}=C,Ce=Qe(C,sue),we=P.isValidElement(I)?I:Q.jsx("span",{children:I}),Ye=uu(),ke=Ye.direction==="rtl",[Oe,rt]=P.useState(),[qe,He]=P.useState(null),fn=P.useRef(!1),Mt=N||X,pt=P.useRef(),Te=P.useRef(),Ne=P.useRef(),Ke=P.useRef(),[je,Le]=Df({controlled:Me,default:!1,name:"Tooltip",state:"open"});let kt=je;const wt=Qx(Y),Ot=P.useRef(),Fe=P.useCallback(()=>{Ot.current!==void 0&&(document.body.style.WebkitUserSelect=Ot.current,Ot.current=void 0),clearTimeout(Ke.current)},[]);P.useEffect(()=>()=>{clearTimeout(pt.current),clearTimeout(Te.current),clearTimeout(Ne.current),Fe()},[Fe]);const St=Et=>{clearTimeout(eS),Nv=!0,Le(!0),de&&!kt&&de(Et)},Ht=Pi(Et=>{clearTimeout(eS),eS=setTimeout(()=>{Nv=!1},800+Z),Le(!1),xe&&kt&&xe(Et),clearTimeout(pt.current),pt.current=setTimeout(()=>{fn.current=!1},Ye.transitions.duration.shortest)}),on=Et=>{fn.current&&Et.type!=="touchstart"||(Oe&&Oe.removeAttribute("title"),clearTimeout(Te.current),clearTimeout(Ne.current),W||Nv&&V?Te.current=setTimeout(()=>{St(Et)},Nv?V:W):St(Et))},Nr=Et=>{clearTimeout(Te.current),clearTimeout(Ne.current),Ne.current=setTimeout(()=>{Ht(Et)},Z)},{isFocusVisibleRef:Vi,onBlur:Mo,onFocus:pa,ref:Xs}=ew(),[,hs]=P.useState(!1),ee=Et=>{Mo(Et),Vi.current===!1&&(hs(!1),Nr(Et))},ne=Et=>{Oe||rt(Et.currentTarget),pa(Et),Vi.current===!0&&(hs(!0),on(Et))},ce=Et=>{fn.current=!0;const At=we.props;At.onTouchStart&&At.onTouchStart(Et)},De=on,Ge=Nr,vt=Et=>{ce(Et),clearTimeout(Ne.current),clearTimeout(pt.current),Fe(),Ot.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ke.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ot.current,on(Et)},U)},ut=Et=>{we.props.onTouchEnd&&we.props.onTouchEnd(Et),Fe(),clearTimeout(Ne.current),Ne.current=setTimeout(()=>{Ht(Et)},se)};P.useEffect(()=>{if(!kt)return;function Et(At){(At.key==="Escape"||At.key==="Esc")&&Ht(At)}return document.addEventListener("keydown",Et),()=>{document.removeEventListener("keydown",Et)}},[Ht,kt]);const ht=Vn(we.ref,Xs,rt,n);!oe&&oe!==0&&(kt=!1);const Je=P.useRef(),Lt=Et=>{const At=we.props;At.onMouseMove&&At.onMouseMove(Et),ag={x:Et.clientX,y:Et.clientY},Je.current&&Je.current.update()},an={},gt=typeof oe=="string";B?(an.title=!kt&&gt&&!D?oe:null,an["aria-describedby"]=kt?wt:null):(an["aria-label"]=gt?oe:null,an["aria-labelledby"]=kt&&!gt?wt:null);const Ct=$({},an,Ce,we.props,{className:at(Ce.className,we.props.className),onTouchStart:ce,ref:ht},X?{onMouseMove:Lt}:{}),ln={};j||(Ct.onTouchStart=vt,Ct.onTouchEnd=ut),D||(Ct.onMouseOver=Fv(De,Ct.onMouseOver),Ct.onMouseLeave=Fv(Ge,Ct.onMouseLeave),Mt||(ln.onMouseOver=De,ln.onMouseLeave=Ge)),M||(Ct.onFocus=Fv(ne,Ct.onFocus),Ct.onBlur=Fv(ee,Ct.onBlur),Mt||(ln.onFocus=ne,ln.onBlur=ee));const Fn=P.useMemo(()=>{var Et;let At=[{name:"arrow",enabled:!!qe,options:{element:qe,padding:4}}];return(Et=le.popperOptions)!=null&&Et.modifiers&&(At=At.concat(le.popperOptions.modifiers)),$({},le.popperOptions,{modifiers:At})},[qe,le]),tn=$({},C,{isRtl:ke,arrow:R,disableInteractive:Mt,placement:he,PopperComponentProp:Se,touch:fn.current}),Pr=aue(tn),ds=(r=(i=me.popper)!=null?i:L.Popper)!=null?r:lue,Zt=(s=(o=(a=me.transition)!=null?a:L.Transition)!=null?o:_e)!=null?s:nA,Jt=(l=(c=me.tooltip)!=null?c:L.Tooltip)!=null?l:cue,vr=(u=(h=me.arrow)!=null?h:L.Arrow)!=null?u:uue,br=Mg(ds,$({},le,(f=ae.popper)!=null?f:O.popper,{className:at(Pr.popper,le==null?void 0:le.className,(g=(m=ae.popper)!=null?m:O.popper)==null?void 0:g.className)}),tn),Wn=Mg(Zt,$({},pe,(y=ae.transition)!=null?y:O.transition),tn),fs=Mg(Jt,$({},(x=ae.tooltip)!=null?x:O.tooltip,{className:at(Pr.tooltip,(b=(w=ae.tooltip)!=null?w:O.tooltip)==null?void 0:b.className)}),tn),Mi=Mg(vr,$({},(v=ae.arrow)!=null?v:O.arrow,{className:at(Pr.arrow,(E=(S=ae.arrow)!=null?S:O.arrow)==null?void 0:E.className)}),tn);return Q.jsxs(P.Fragment,{children:[P.cloneElement(we,Ct),Q.jsx(ds,$({as:Se??Mj,placement:he,anchorEl:X?{getBoundingClientRect:()=>({top:ag.y,left:ag.x,right:ag.x,bottom:ag.y,width:0,height:0})}:Oe,popperRef:Je,open:Oe?kt:!1,id:wt,transition:!0},ln,br,{popperOptions:Fn,children:({TransitionProps:Et})=>Q.jsx(Zt,$({timeout:Ye.transitions.duration.shorter},Et,Wn,{children:Q.jsxs(Jt,$({},fs,{children:[oe,R?Q.jsx(vr,$({},Mi,{ref:He})):null]}))}))}))]})}),u_=hue;function due(t){return jt("MuiToggleButton",t)}const fue=Bt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ef=fue,pue=P.createContext({}),Wj=pue,gue=P.createContext(void 0),Xj=gue;function mue(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const yue=["value"],vue=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],bue=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${$e(s)}`,o]};return $t(a,due,e)},_ue=Be(j0,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${$e(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),$({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${ef.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ef.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:Rn(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:Rn(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),xue=P.forwardRef(function(e,n){const r=P.useContext(Wj),{value:i}=r,s=Qe(r,yue),o=P.useContext(Xj),a=tw($({},s,{selected:mue(e.value,i)}),e),l=Vt({props:a,name:"MuiToggleButton"}),{children:c,className:u,color:h="standard",disabled:f=!1,disableFocusRipple:g=!1,fullWidth:m=!1,onChange:y,onClick:x,selected:b,size:w="medium",value:v}=l,E=Qe(l,vue),S=$({},l,{color:h,disabled:f,disableFocusRipple:g,fullWidth:m,size:w}),C=bue(S),R=L=>{x&&(x(L,v),L.defaultPrevented)||y&&y(L,v)},I=o||"";return Q.jsx(_ue,$({className:at(s.className,C.root,u,I),disabled:f,focusRipple:!g,ref:n,onClick:R,onChange:y,value:v,ownerState:S,"aria-pressed":b},E,{children:c}))}),wue=xue;function Eue(t){return jt("MuiToggleButtonGroup",t)}const Tue=Bt("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),jn=Tue,Sue=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Cue=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${$e(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return $t(s,Eue,e)},Pue=Be("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${jn.grouped}`]:e.grouped},{[`& .${jn.grouped}`]:e[`grouped${$e(n.orientation)}`]},{[`& .${jn.firstButton}`]:e.firstButton},{[`& .${jn.lastButton}`]:e.lastButton},{[`& .${jn.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>$({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${jn.grouped}`]:$({},t.orientation==="horizontal"?{[`&.${jn.selected} + .${jn.grouped}.${jn.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${jn.selected} + .${jn.grouped}.${jn.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${jn.firstButton},& .${jn.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${jn.lastButton},& .${jn.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${jn.firstButton},& .${jn.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${jn.lastButton},& .${jn.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${jn.lastButton}.${ef.disabled},& .${jn.middleButton}.${ef.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${jn.lastButton}.${ef.disabled},& .${jn.middleButton}.${ef.disabled}`]:{borderTop:"1px solid transparent"}})),Aue=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:o="standard",disabled:a=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:h="horizontal",size:f="medium",value:g}=r,m=Qe(r,Sue),y=$({},r,{disabled:a,fullWidth:c,orientation:h,size:f}),x=Cue(y),b=P.useCallback((R,I)=>{if(!u)return;const L=g&&g.indexOf(I);let O;g&&L>=0?(O=g.slice(),O.splice(L,1)):O=g?g.concat(I):[I],u(R,O)},[u,g]),w=P.useCallback((R,I)=>{u&&u(R,g===I?null:I)},[u,g]),v=P.useMemo(()=>({className:x.grouped,onChange:l?w:b,value:g,size:f,fullWidth:c,color:o,disabled:a}),[x.grouped,l,w,b,g,f,c,o,a]),E=J$(i),S=E.length,C=R=>{const I=R===0,L=R===S-1;return I&&L?"":I?x.firstButton:L?x.lastButton:x.middleButton};return Q.jsx(Pue,$({role:"group",className:at(x.root,s),ref:n,ownerState:y},m,{children:Q.jsx(Wj.Provider,{value:v,children:E.map((R,I)=>Q.jsx(Xj.Provider,{value:C(I),children:R},I))})}))}),Rue=Aue;var Yj={exports:{}},W0={},rA={exports:{}};(function(t,e){(function(n,r){r(e)})(ts,function(n){function r(le){return function(me,oe,_e,pe,Ce,we,Ye){return le(me,oe,Ye)}}function i(le){return function(me,oe,_e,pe){if(!me||!oe||typeof me!="object"||typeof oe!="object")return le(me,oe,_e,pe);var Ce=pe.get(me),we=pe.get(oe);if(Ce&&we)return Ce===oe&&we===me;pe.set(me,oe),pe.set(oe,me);var Ye=le(me,oe,_e,pe);return pe.delete(me),pe.delete(oe),Ye}}function s(le,ae){var me={};for(var oe in le)me[oe]=le[oe];for(var oe in ae)me[oe]=ae[oe];return me}function o(le){return le.constructor===Object||le.constructor==null}function a(le){return typeof le.then=="function"}function l(le,ae){return le===ae||le!==le&&ae!==ae}var c="[object Arguments]",u="[object Boolean]",h="[object Date]",f="[object RegExp]",g="[object Map]",m="[object Number]",y="[object Object]",x="[object Set]",b="[object String]",w=Object.prototype.toString;function v(le){var ae=le.areArraysEqual,me=le.areDatesEqual,oe=le.areMapsEqual,_e=le.areObjectsEqual,pe=le.areRegExpsEqual,Ce=le.areSetsEqual,we=le.createIsNestedEqual,Ye=we(ke);function ke(Oe,rt,qe){if(Oe===rt)return!0;if(!Oe||!rt||typeof Oe!="object"||typeof rt!="object")return Oe!==Oe&&rt!==rt;if(o(Oe)&&o(rt))return _e(Oe,rt,Ye,qe);var He=Array.isArray(Oe),fn=Array.isArray(rt);if(He||fn)return He===fn&&ae(Oe,rt,Ye,qe);var Mt=w.call(Oe);return Mt!==w.call(rt)?!1:Mt===h?me(Oe,rt,Ye,qe):Mt===f?pe(Oe,rt,Ye,qe):Mt===g?oe(Oe,rt,Ye,qe):Mt===x?Ce(Oe,rt,Ye,qe):Mt===y||Mt===c?a(Oe)||a(rt)?!1:_e(Oe,rt,Ye,qe):Mt===u||Mt===m||Mt===b?l(Oe.valueOf(),rt.valueOf()):!1}return ke}function E(le,ae,me,oe){var _e=le.length;if(ae.length!==_e)return!1;for(;_e-- >0;)if(!me(le[_e],ae[_e],_e,_e,le,ae,oe))return!1;return!0}var S=i(E);function C(le,ae){return l(le.valueOf(),ae.valueOf())}function R(le,ae,me,oe){var _e=le.size===ae.size;if(!_e)return!1;if(!le.size)return!0;var pe={},Ce=0;return le.forEach(function(we,Ye){if(_e){var ke=!1,Oe=0;ae.forEach(function(rt,qe){!ke&&!pe[Oe]&&(ke=me(Ye,qe,Ce,Oe,le,ae,oe)&&me(we,rt,Ye,qe,le,ae,oe))&&(pe[Oe]=!0),Oe++}),Ce++,_e=ke}}),_e}var I=i(R),L="_owner",O=Object.prototype.hasOwnProperty;function B(le,ae,me,oe){var _e=Object.keys(le),pe=_e.length;if(Object.keys(ae).length!==pe)return!1;for(var Ce;pe-- >0;){if(Ce=_e[pe],Ce===L){var we=!!le.$$typeof,Ye=!!ae.$$typeof;if((we||Ye)&&we!==Ye)return!1}if(!O.call(ae,Ce)||!me(le[Ce],ae[Ce],Ce,Ce,le,ae,oe))return!1}return!0}var M=i(B);function D(le,ae){return le.source===ae.source&&le.flags===ae.flags}function N(le,ae,me,oe){var _e=le.size===ae.size;if(!_e)return!1;if(!le.size)return!0;var pe={};return le.forEach(function(Ce,we){if(_e){var Ye=!1,ke=0;ae.forEach(function(Oe,rt){!Ye&&!pe[ke]&&(Ye=me(Ce,Oe,we,rt,le,ae,oe))&&(pe[ke]=!0),ke++}),_e=Ye}}),_e}var j=i(N),W=Object.freeze({areArraysEqual:E,areDatesEqual:C,areMapsEqual:R,areObjectsEqual:B,areRegExpsEqual:D,areSetsEqual:N,createIsNestedEqual:r}),V=Object.freeze({areArraysEqual:S,areDatesEqual:C,areMapsEqual:I,areObjectsEqual:M,areRegExpsEqual:D,areSetsEqual:j,createIsNestedEqual:r}),U=v(W);function X(le,ae){return U(le,ae,void 0)}var Y=v(s(W,{createIsNestedEqual:function(){return l}}));function Z(le,ae){return Y(le,ae,void 0)}var se=v(V);function xe(le,ae){return se(le,ae,new WeakMap)}var de=v(s(V,{createIsNestedEqual:function(){return l}}));function Me(le,ae){return de(le,ae,new WeakMap)}function he(le){return v(s(W,le(W)))}function Se(le){var ae=v(s(V,le(V)));return function(me,oe,_e){return _e===void 0&&(_e=new WeakMap),ae(me,oe,_e)}}n.circularDeepEqual=xe,n.circularShallowEqual=Me,n.createCustomCircularEqual=Se,n.createCustomEqual=he,n.deepEqual=X,n.sameValueZeroEqual=l,n.shallowEqual=Z,Object.defineProperty(n,"__esModule",{value:!0})})})(rA,rA.exports);var WI=rA.exports,iA={exports:{}};function qj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=qj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function VN(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=qj(t))&&(r&&(r+=" "),r+=e);return r}iA.exports=VN,iA.exports.clsx=VN;var XI=iA.exports,Gt={},Iue=function(e,n,r){return e===n?!0:e.className===n.className&&r(e.style,n.style)&&e.width===n.width&&e.autoSize===n.autoSize&&e.cols===n.cols&&e.draggableCancel===n.draggableCancel&&e.draggableHandle===n.draggableHandle&&r(e.verticalCompact,n.verticalCompact)&&r(e.compactType,n.compactType)&&r(e.layout,n.layout)&&r(e.margin,n.margin)&&r(e.containerPadding,n.containerPadding)&&e.rowHeight===n.rowHeight&&e.maxRows===n.maxRows&&e.isBounded===n.isBounded&&e.isDraggable===n.isDraggable&&e.isResizable===n.isResizable&&e.allowOverlap===n.allowOverlap&&e.preventCollision===n.preventCollision&&e.useCSSTransforms===n.useCSSTransforms&&e.transformScale===n.transformScale&&e.isDroppable===n.isDroppable&&r(e.resizeHandles,n.resizeHandles)&&r(e.resizeHandle,n.resizeHandle)&&e.onLayoutChange===n.onLayoutChange&&e.onDragStart===n.onDragStart&&e.onDrag===n.onDrag&&e.onDragStop===n.onDragStop&&e.onResizeStart===n.onResizeStart&&e.onResize===n.onResize&&e.onResizeStop===n.onResizeStop&&e.onDrop===n.onDrop&&r(e.droppingItem,n.droppingItem)&&r(e.innerRef,n.innerRef)};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.bottom=YI;Gt.childrenEqual=Lue;Gt.cloneLayout=Kj;Gt.cloneLayoutItem=ch;Gt.collides=xw;Gt.compact=Qj;Gt.compactItem=Jj;Gt.compactType=Xue;Gt.correctBounds=e8;Gt.fastPositionEqual=kue;Gt.fastRGLPropsEqual=void 0;Gt.getAllCollisions=t8;Gt.getFirstCollision=Qu;Gt.getLayoutItem=qI;Gt.getStatics=KI;Gt.modifyLayout=Zj;Gt.moveElement=Lg;Gt.moveElementAwayFromCollision=oA;Gt.noop=void 0;Gt.perc=Nue;Gt.resizeItemInDirection=jue;Gt.setTopLeft=Hue;Gt.setTransform=Gue;Gt.sortLayoutItems=nM;Gt.sortLayoutItemsByColRow=o8;Gt.sortLayoutItemsByRowCol=s8;Gt.synchronizeLayoutWithChildren=Vue;Gt.validateLayout=Wue;Gt.withLayoutItem=Oue;var WN=WI,Og=Mue(P);function Mue(t){return t&&t.__esModule?t:{default:t}}function YI(t){let e=0,n;for(let r=0,i=t.length;r<i;r++)n=t[r].y+t[r].h,n>e&&(e=n);return e}function Kj(t){const e=Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=ch(t[n]);return e}function Zj(t,e){const n=Array(t.length);for(let r=0,i=t.length;r<i;r++)e.i===t[r].i?n[r]=e:n[r]=t[r];return n}function Oue(t,e,n){let r=qI(t,e);return r?(r=n(ch(r)),t=Zj(t,r),[t,r]):[t,null]}function ch(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function Lue(t,e){return(0,WN.deepEqual)(Og.default.Children.map(t,n=>n==null?void 0:n.key),Og.default.Children.map(e,n=>n==null?void 0:n.key))&&(0,WN.deepEqual)(Og.default.Children.map(t,n=>n==null?void 0:n.props["data-grid"]),Og.default.Children.map(e,n=>n==null?void 0:n.props["data-grid"]))}Gt.fastRGLPropsEqual=Iue;function kue(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function xw(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function Qj(t,e,n,r){const i=KI(t),s=nM(t,e),o=Array(t.length);for(let a=0,l=s.length;a<l;a++){let c=ch(s[a]);c.static||(c=Jj(i,c,e,n,s,r),i.push(c)),o[t.indexOf(s[a])]=c,c.moved=!1}return o}const Due={x:"w",y:"h"};function sA(t,e,n,r){const i=Due[r];e[r]+=1;const s=t.map(o=>o.i).indexOf(e.i);for(let o=s+1;o<t.length;o++){const a=t[o];if(!a.static){if(a.y>e.y+e.h)break;xw(e,a)&&sA(t,a,n+e[i],r)}}e[r]=n}function Jj(t,e,n,r,i,s){const o=n==="vertical",a=n==="horizontal";if(o)for(e.y=Math.min(YI(t),e.y);e.y>0&&!Qu(t,e);)e.y--;else if(a)for(;e.x>0&&!Qu(t,e);)e.x--;let l;for(;(l=Qu(t,e))&&!(n===null&&s);)if(a?sA(i,e,l.x+l.w,"x"):sA(i,e,l.y+l.h,"y"),a&&e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!Qu(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function e8(t,e){const n=KI(t);for(let r=0,i=t.length;r<i;r++){const s=t[r];if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)n.push(s);else for(;Qu(n,s);)s.y++}return t}function qI(t,e){for(let n=0,r=t.length;n<r;n++)if(t[n].i===e)return t[n]}function Qu(t,e){for(let n=0,r=t.length;n<r;n++)if(xw(t[n],e))return t[n]}function t8(t,e){return t.filter(n=>xw(n,e))}function KI(t){return t.filter(e=>e.static)}function Lg(t,e,n,r,i,s,o,a,l){if(e.static&&e.isDraggable!==!0||e.y===r&&e.x===n)return t;`${e.i}${String(n)}${String(r)}${e.x}${e.y}`;const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof r=="number"&&(e.y=r),e.moved=!0;let h=nM(t,o);(o==="vertical"&&typeof r=="number"?u>=r:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(h=h.reverse());const g=t8(h,e),m=g.length>0;if(m&&l)return Kj(t);if(m&&s)return`${e.i}`,e.x=c,e.y=u,e.moved=!1,t;for(let y=0,x=g.length;y<x;y++){const b=g[y];`${e.i}${e.x}${e.y}${b.i}${b.x}${b.y}`,!b.moved&&(b.static?t=oA(t,b,e,i,o):t=oA(t,e,b,i,o))}return t}function oA(t,e,n,r,i,s){const o=i==="horizontal",a=i==="vertical",l=e.static;if(r){r=!1;const h={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},f=Qu(t,h),g=f&&f.y+f.h>e.y,m=f&&e.x+e.w>f.x;if(f){if(g&&a)return Lg(t,n,void 0,e.y+1,r,l,i);if(g&&i==null)return e.y=n.y,n.y=n.y+n.h,t;if(m&&o)return Lg(t,e,n.x,void 0,r,l,i)}else return`${n.i}${h.x}${h.y}`,Lg(t,n,o?h.x:void 0,a?h.y:void 0,r,l,i)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c==null&&u==null?t:Lg(t,n,o?n.x+1:void 0,a?n.y+1:void 0,r,l,i)}function Nue(t){return t*100+"%"}const n8=(t,e,n,r)=>t+n>r?e:n,r8=(t,e,n)=>t<0?e:n,i8=t=>Math.max(0,t),ZI=t=>Math.max(0,t),QI=(t,e,n)=>{let{left:r,height:i,width:s}=e;const o=t.top-(i-t.height);return{left:r,width:s,height:r8(o,t.height,i),top:ZI(o)}},JI=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{top:r,height:s,width:n8(t.left,t.width,o,n),left:i8(i)}},eM=(t,e,n)=>{let{top:r,height:i,width:s}=e;const o=t.left-(s-t.width);return{height:i,width:o<0?t.width:n8(t.left,t.width,s,n),top:ZI(r),left:i8(o)}},tM=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{width:o,left:i,height:r8(r,t.height,s),top:ZI(r)}},Fue=function(){return QI(arguments.length<=0?void 0:arguments[0],JI(...arguments))},Bue=function(){return QI(arguments.length<=0?void 0:arguments[0],eM(...arguments))},zue=function(){return tM(arguments.length<=0?void 0:arguments[0],JI(...arguments))},Uue=function(){return tM(arguments.length<=0?void 0:arguments[0],eM(...arguments))},$ue={n:QI,ne:Fue,e:JI,se:zue,s:tM,sw:Uue,w:eM,nw:Bue};function jue(t,e,n,r){const i=$ue[t];return i?i(e,{...e,...n},r):n}function Gue(t){let{top:e,left:n,width:r,height:i}=t;const s=`translate(${n}px,${e}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function Hue(t){let{top:e,left:n,width:r,height:i}=t;return{top:`${e}px`,left:`${n}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function nM(t,e){return e==="horizontal"?o8(t):e==="vertical"?s8(t):t}function s8(t){return t.slice(0).sort(function(e,n){return e.y>n.y||e.y===n.y&&e.x>n.x?1:e.y===n.y&&e.x===n.x?0:-1})}function o8(t){return t.slice(0).sort(function(e,n){return e.x>n.x||e.x===n.x&&e.y>n.y?1:-1})}function Vue(t,e,n,r,i){t=t||[];const s=[];Og.default.Children.forEach(e,a=>{if((a==null?void 0:a.key)==null)return;const l=qI(t,String(a.key)),c=a.props["data-grid"];l&&c==null?s.push(ch(l)):c?s.push(ch({...c,i:a.key})):s.push(ch({w:1,h:1,x:0,y:YI(s),i:String(a.key)}))});const o=e8(s,{cols:n});return i?o:Qj(o,r,n)}function Wue(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,i=t.length;r<i;r++){const s=t[r];for(let o=0;o<n.length;o++)if(typeof s[n[o]]!="number")throw new Error("ReactGridLayout: "+e+"["+r+"]."+n[o]+" must be a number!")}}function Xue(t){const{verticalCompact:e,compactType:n}=t||{};return e===!1?null:n}const Yue=()=>{};Gt.noop=Yue;var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.calcGridColWidth=ww;sl.calcGridItemPosition=que;sl.calcGridItemWHPx=aA;sl.calcWH=Zue;sl.calcXY=Kue;sl.clamp=Ju;function ww(t){const{margin:e,containerPadding:n,containerWidth:r,cols:i}=t;return(r-e[0]*(i-1)-n[0]*2)/i}function aA(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function que(t,e,n,r,i,s){const{margin:o,containerPadding:a,rowHeight:l}=t,c=ww(t),u={};return s&&s.resizing?(u.width=Math.round(s.resizing.width),u.height=Math.round(s.resizing.height)):(u.width=aA(r,c,o[0]),u.height=aA(i,l,o[1])),s&&s.dragging?(u.top=Math.round(s.dragging.top),u.left=Math.round(s.dragging.left)):s&&s.resizing&&typeof s.resizing.top=="number"&&typeof s.resizing.left=="number"?(u.top=Math.round(s.resizing.top),u.left=Math.round(s.resizing.left)):(u.top=Math.round((l+o[1])*n+a[1]),u.left=Math.round((c+o[0])*e+a[0])),u}function Kue(t,e,n,r,i){const{margin:s,cols:o,rowHeight:a,maxRows:l}=t,c=ww(t);let u=Math.round((n-s[0])/(c+s[0])),h=Math.round((e-s[1])/(a+s[1]));return u=Ju(u,0,o-r),h=Ju(h,0,l-i),{x:u,y:h}}function Zue(t,e,n,r,i,s){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=ww(t);let h=Math.round((e+o[0])/(u+o[0])),f=Math.round((n+o[1])/(c+o[1])),g=Ju(h,0,l-r),m=Ju(f,0,a-i);return["sw","w","nw"].indexOf(s)!==-1&&(g=Ju(h,0,l)),["nw","n","ne"].indexOf(s)!==-1&&(m=Ju(f,0,a)),{w:g,h:m}}function Ju(t,e,n){return Math.max(Math.min(t,n),e)}var Ew={},Tw={exports:{}},a8={};function l8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=l8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function XN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=l8(t))&&(r&&(r+=" "),r+=e);return r}const Que=Object.freeze(Object.defineProperty({__proto__:null,clsx:XN,default:XN},Symbol.toStringTag,{value:"Module"})),Jue=dn(Que);var ur={},ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.dontSetMe=ihe;ol.findInArray=ehe;ol.int=rhe;ol.isFunction=the;ol.isNum=nhe;function ehe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function the(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function nhe(t){return typeof t=="number"&&!isNaN(t)}function rhe(t){return parseInt(t,10)}function ihe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});Dh.browserPrefixToKey=u8;Dh.browserPrefixToStyle=she;Dh.default=void 0;Dh.getPrefix=c8;const tS=["Moz","Webkit","O","ms"];function c8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<tS.length;r++)if(u8(e,tS[r])in n)return tS[r];return""}function u8(t,e){return e?"".concat(e).concat(ohe(t)):t}function she(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function ohe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Dh.default=c8();Object.defineProperty(ur,"__esModule",{value:!0});ur.addClassName=f8;ur.addEvent=che;ur.addUserSelectStyles=_he;ur.createCSSTransform=mhe;ur.createSVGTransform=yhe;ur.getTouch=vhe;ur.getTouchIdentifier=bhe;ur.getTranslation=rM;ur.innerHeight=fhe;ur.innerWidth=phe;ur.matchesSelector=d8;ur.matchesSelectorAndParentsTo=lhe;ur.offsetXYFromParent=ghe;ur.outerHeight=hhe;ur.outerWidth=dhe;ur.removeClassName=p8;ur.removeEvent=uhe;ur.removeUserSelectStyles=xhe;var ks=ol,YN=ahe(Dh);function h8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(h8=function(r){return r?n:e})(t)}function ahe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=h8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}let Bv="";function d8(t,e){return Bv||(Bv=(0,ks.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ks.isFunction)(t[n])})),(0,ks.isFunction)(t[Bv])?t[Bv](e):!1}function lhe(t,e,n){let r=t;do{if(d8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function che(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function uhe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function hhe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ks.int)(n.borderTopWidth),e+=(0,ks.int)(n.borderBottomWidth),e}function dhe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ks.int)(n.borderLeftWidth),e+=(0,ks.int)(n.borderRightWidth),e}function fhe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ks.int)(n.paddingTop),e-=(0,ks.int)(n.paddingBottom),e}function phe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ks.int)(n.paddingLeft),e-=(0,ks.int)(n.paddingRight),e}function ghe(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:s,y:o}}function mhe(t,e){const n=rM(t,e,"px");return{[(0,YN.browserPrefixToKey)("transform",YN.default)]:n}}function yhe(t,e){return rM(t,e,"")}function rM(t,e,n){let{x:r,y:i}=t,s="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);s="translate(".concat(o,", ").concat(a,")")+s}return s}function vhe(t,e){return t.targetTouches&&(0,ks.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ks.findInArray)(t.changedTouches,n=>e===n.identifier)}function bhe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function _he(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&f8(t.body,"react-draggable-transparent-selection")}function xhe(t){if(t)try{if(t.body&&p8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function f8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function p8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var al={};Object.defineProperty(al,"__esModule",{value:!0});al.canDragX=The;al.canDragY=She;al.createCoreData=Phe;al.createDraggableData=Ahe;al.getBoundPosition=whe;al.getControlPosition=Che;al.snapToGrid=Ehe;var xs=ol,tf=ur;function whe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Rhe(r);const i=iM(t);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,xs.int)(u.paddingLeft)+(0,xs.int)(c.marginLeft),top:-i.offsetTop+(0,xs.int)(u.paddingTop)+(0,xs.int)(c.marginTop),right:(0,tf.innerWidth)(l)-(0,tf.outerWidth)(i)-i.offsetLeft+(0,xs.int)(u.paddingRight)-(0,xs.int)(c.marginRight),bottom:(0,tf.innerHeight)(l)-(0,tf.outerHeight)(i)-i.offsetTop+(0,xs.int)(u.paddingBottom)-(0,xs.int)(c.marginBottom)}}return(0,xs.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,xs.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,xs.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,xs.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Ehe(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function The(t){return t.props.axis==="both"||t.props.axis==="x"}function She(t){return t.props.axis==="both"||t.props.axis==="y"}function Che(t,e,n){const r=typeof e=="number"?(0,tf.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=iM(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,tf.offsetXYFromParent)(r||t,s,n.props.scale)}function Phe(t,e,n){const r=!(0,xs.isNum)(t.lastX),i=iM(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Ahe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Rhe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function iM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Sw={},Cw={};Object.defineProperty(Cw,"__esModule",{value:!0});Cw.default=Ihe;function Ihe(){}Object.defineProperty(Sw,"__esModule",{value:!0});Sw.default=void 0;var nS=Ohe(P),Ki=sM(Wl),Mhe=sM(Vl),vi=ur,uc=al,rS=ol,lg=sM(Cw);function sM(t){return t&&t.__esModule?t:{default:t}}function g8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(g8=function(r){return r?n:e})(t)}function Ohe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=g8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Di(t,e,n){return e=Lhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lhe(t){var e=khe(t,"string");return typeof e=="symbol"?e:String(e)}function khe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const $o={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let hc=$o.mouse,Pw=class extends nS.Component{constructor(){super(...arguments),Di(this,"dragging",!1),Di(this,"lastX",NaN),Di(this,"lastY",NaN),Di(this,"touchIdentifier",null),Di(this,"mounted",!1),Di(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,vi.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,vi.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,vi.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,uc.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,uc.createCoreData)(this,o,a);(0,lg.default)("DraggableCore: handleDragStart: %j",l),(0,lg.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,vi.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,vi.addEvent)(r,hc.move,this.handleDrag),(0,vi.addEvent)(r,hc.stop,this.handleDragStop))}),Di(this,"handleDrag",e=>{const n=(0,uc.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,uc.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,uc.createCoreData)(this,r,i);if((0,lg.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Di(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,uc.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,uc.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,uc.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,vi.removeUserSelectStyles)(a.ownerDocument),(0,lg.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,lg.default)("DraggableCore: Removing handlers"),(0,vi.removeEvent)(a.ownerDocument,hc.move,this.handleDrag),(0,vi.removeEvent)(a.ownerDocument,hc.stop,this.handleDragStop))}),Di(this,"onMouseDown",e=>(hc=$o.mouse,this.handleDragStart(e))),Di(this,"onMouseUp",e=>(hc=$o.mouse,this.handleDragStop(e))),Di(this,"onTouchStart",e=>(hc=$o.touch,this.handleDragStart(e))),Di(this,"onTouchEnd",e=>(hc=$o.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,vi.addEvent)(e,$o.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,vi.removeEvent)(n,$o.mouse.move,this.handleDrag),(0,vi.removeEvent)(n,$o.touch.move,this.handleDrag),(0,vi.removeEvent)(n,$o.mouse.stop,this.handleDragStop),(0,vi.removeEvent)(n,$o.touch.stop,this.handleDragStop),(0,vi.removeEvent)(e,$o.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,vi.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Mhe.default.findDOMNode(this)}render(){return nS.cloneElement(nS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Sw.default=Pw;Di(Pw,"displayName","DraggableCore");Di(Pw,"propTypes",{allowAnyClick:Ki.default.bool,children:Ki.default.node.isRequired,disabled:Ki.default.bool,enableUserSelectHack:Ki.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ki.default.arrayOf(Ki.default.number),handle:Ki.default.string,cancel:Ki.default.string,nodeRef:Ki.default.object,onStart:Ki.default.func,onDrag:Ki.default.func,onStop:Ki.default.func,onMouseDown:Ki.default.func,scale:Ki.default.number,className:rS.dontSetMe,style:rS.dontSetMe,transform:rS.dontSetMe});Di(Pw,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=f(P),n=u(Wl),r=u(Vl),i=u(Jue),s=ur,o=al,a=ol,l=u(Sw),c=u(Cw);function u(w){return w&&w.__esModule?w:{default:w}}function h(w){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(h=function(S){return S?E:v})(w)}function f(w,v){if(!v&&w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var E=h(v);if(E&&E.has(w))return E.get(w);var S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in w)if(R!=="default"&&Object.prototype.hasOwnProperty.call(w,R)){var I=C?Object.getOwnPropertyDescriptor(w,R):null;I&&(I.get||I.set)?Object.defineProperty(S,R,I):S[R]=w[R]}return S.default=w,E&&E.set(w,S),S}function g(){return g=Object.assign?Object.assign.bind():function(w){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(w[S]=E[S])}return w},g.apply(this,arguments)}function m(w,v,E){return v=y(v),v in w?Object.defineProperty(w,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[v]=E,w}function y(w){var v=x(w,"string");return typeof v=="symbol"?v:String(v)}function x(w,v){if(typeof w!="object"||w===null)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var S=E.call(w,v||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(w)}class b extends e.Component{static getDerivedStateFromProps(v,E){let{position:S}=v,{prevPropsPosition:C}=E;return S&&(!C||S.x!==C.x||S.y!==C.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:C}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(v){super(v),m(this,"onDragStart",(E,S)=>{if((0,c.default)("Draggable: onDragStart: %j",S),this.props.onStart(E,(0,o.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(E,S)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",S);const C=(0,o.createDraggableData)(this,S),R={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:L,y:O}=R;R.x+=this.state.slackX,R.y+=this.state.slackY;const[B,M]=(0,o.getBoundPosition)(this,R.x,R.y);R.x=B,R.y=M,R.slackX=this.state.slackX+(L-R.x),R.slackY=this.state.slackY+(O-R.y),C.x=R.x,C.y=R.y,C.deltaX=R.x-this.state.x,C.deltaY=R.y-this.state.y}if(this.props.onDrag(E,C)===!1)return!1;this.setState(R)}),m(this,"onDragStop",(E,S)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,S))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",S);const R={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:L,y:O}=this.props.position;R.x=L,R.y=O}this.setState(R)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:S,defaultPosition:C,defaultClassName:R,defaultClassNameDragging:I,defaultClassNameDragged:L,position:O,positionOffset:B,scale:M,...D}=this.props;let N={},j=null;const V=!!!O||this.state.dragging,U=O||C,X={x:(0,o.canDragX)(this)&&V?this.state.x:U.x,y:(0,o.canDragY)(this)&&V?this.state.y:U.y};this.state.isElementSVG?j=(0,s.createSVGTransform)(X,B):N=(0,s.createCSSTransform)(X,B);const Y=(0,i.default)(S.props.className||"",R,{[I]:this.state.dragging,[L]:this.state.dragged});return e.createElement(l.default,g({},D,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:Y,style:{...S.props.style,...N},transform:j}))}}t.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(a8);const{default:m8,DraggableCore:Dhe}=a8;Tw.exports=m8;Tw.exports.default=m8;Tw.exports.DraggableCore=Dhe;var y8=Tw.exports,Aw={exports:{}},X0={},oM={};oM.__esModule=!0;oM.cloneElement=$he;var Nhe=Fhe(P);function Fhe(t){return t&&t.__esModule?t:{default:t}}function qN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(n),!0).forEach(function(r){Bhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bhe(t,e,n){return e=zhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zhe(t){var e=Uhe(t,"string");return typeof e=="symbol"?e:String(e)}function Uhe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $he(t,e){return e.style&&t.props.style&&(e.style=KN(KN({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),Nhe.default.cloneElement(t,e)}var Y0={};Y0.__esModule=!0;Y0.resizableProps=void 0;var Nt=jhe(Wl);function jhe(t){return t&&t.__esModule?t:{default:t}}var Ghe={axis:Nt.default.oneOf(["both","x","y","none"]),className:Nt.default.string,children:Nt.default.element.isRequired,draggableOpts:Nt.default.shape({allowAnyClick:Nt.default.bool,cancel:Nt.default.string,children:Nt.default.node,disabled:Nt.default.bool,enableUserSelectHack:Nt.default.bool,offsetParent:Nt.default.node,grid:Nt.default.arrayOf(Nt.default.number),handle:Nt.default.string,nodeRef:Nt.default.object,onStart:Nt.default.func,onDrag:Nt.default.func,onStop:Nt.default.func,onMouseDown:Nt.default.func,scale:Nt.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var s;return(s=Nt.default.number).isRequired.apply(s,n)}return Nt.default.number.apply(Nt.default,n)},handle:Nt.default.oneOfType([Nt.default.node,Nt.default.func]),handleSize:Nt.default.arrayOf(Nt.default.number),lockAspectRatio:Nt.default.bool,maxConstraints:Nt.default.arrayOf(Nt.default.number),minConstraints:Nt.default.arrayOf(Nt.default.number),onResizeStop:Nt.default.func,onResizeStart:Nt.default.func,onResize:Nt.default.func,resizeHandles:Nt.default.arrayOf(Nt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Nt.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var s;return(s=Nt.default.number).isRequired.apply(s,n)}return Nt.default.number.apply(Nt.default,n)}};Y0.resizableProps=Ghe;X0.__esModule=!0;X0.default=void 0;var cg=Yhe(P),Hhe=y8,Vhe=oM,Whe=Y0,Xhe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function v8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(v8=function(i){return i?n:e})(t)}function Yhe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=v8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lA.apply(this,arguments)}function qhe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ZN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZN(Object(n),!0).forEach(function(r){Khe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Khe(t,e,n){return e=Zhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zhe(t){var e=Qhe(t,"string");return typeof e=="symbol"?e:String(e)}function Qhe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jhe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cA(t,e)}function cA(t,e){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cA(t,e)}var aM=function(t){Jhe(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,s){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[i,s];if(c){var u=this.props.width/this.props.height,h=i-this.props.width,f=s-this.props.height;Math.abs(h)>Math.abs(f*u)?s=i/u:i=s*u}var g=i,m=s,y=this.slack||[0,0],x=y[0],b=y[1];return i+=x,s+=b,a&&(i=Math.max(a[0],i),s=Math.max(a[1],s)),l&&(i=Math.min(l[0],i),s=Math.min(l[1],s)),this.slack=[x+(g-i),b+(m-s)],[i,s]},n.resizeHandler=function(i,s){var o=this;return function(a,l){var c=l.node,u=l.deltaX,h=l.deltaY;i==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&s!=="n"&&s!=="s",g=(o.props.axis==="both"||o.props.axis==="y")&&s!=="e"&&s!=="w";if(!(!f&&!g)){var m=s[0],y=s[s.length-1],x=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(y==="w"){var b=x.left-o.lastHandleRect.left;u+=b}if(m==="n"){var w=x.top-o.lastHandleRect.top;h+=w}}o.lastHandleRect=x,y==="w"&&(u=-u),m==="n"&&(h=-h);var v=o.props.width+(f?u/o.props.transformScale:0),E=o.props.height+(g?h/o.props.transformScale:0),S=o.runConstraints(v,E);v=S[0],E=S[1];var C=v!==o.props.width||E!==o.props.height,R=typeof o.props[i]=="function"?o.props[i]:null,I=i==="onResize"&&!C;R&&!I&&(a.persist==null||a.persist(),R(a,{node:c,size:{width:v,height:E},handle:s})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,s){var o=this.props.handle;if(!o)return cg.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:s});if(typeof o=="function")return o(i,s);var a=typeof o.type=="string",l=iS({ref:s},a?{}:{handleAxis:i});return cg.cloneElement(o,l)},n.render=function(){var i=this,s=this.props,o=s.children,a=s.className,l=s.draggableOpts;s.width,s.height,s.handle,s.handleSize,s.lockAspectRatio,s.axis,s.minConstraints,s.maxConstraints,s.onResize,s.onResizeStop,s.onResizeStart;var c=s.resizeHandles;s.transformScale;var u=qhe(s,Xhe);return(0,Vhe.cloneElement)(o,iS(iS({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(h){var f,g=(f=i.handleRefs[h])!=null?f:i.handleRefs[h]=cg.createRef();return cg.createElement(Hhe.DraggableCore,lA({},l,{nodeRef:g,key:"resizableHandle-"+h,onStop:i.resizeHandler("onResizeStop",h),onStart:i.resizeHandler("onResizeStart",h),onDrag:i.resizeHandler("onResize",h)}),i.renderResizeHandle(h,g))}))}))},e}(cg.Component);X0.default=aM;aM.propTypes=Whe.resizableProps;aM.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Rw={};Rw.__esModule=!0;Rw.default=void 0;var sS=ide(P),ede=b8(Wl),tde=b8(X0),nde=Y0,rde=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function b8(t){return t&&t.__esModule?t:{default:t}}function _8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(_8=function(i){return i?n:e})(t)}function ide(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=_8(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(this,arguments)}function QN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QN(Object(n),!0).forEach(function(r){sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sde(t,e,n){return e=ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=ade(t,"string");return typeof e=="symbol"?e:String(e)}function ade(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cde(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hA(t,e)}var x8=function(t){cde(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(a,l){var c=l.size;r.props.onResize?(a.persist==null||a.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(a,l)})):r.setState(c)},r}e.getDerivedStateFromProps=function(i,s){return s.propsWidth!==i.width||s.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,s=i.handle,o=i.handleSize;i.onResize;var a=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,u=i.minConstraints,h=i.maxConstraints,f=i.lockAspectRatio,g=i.axis;i.width,i.height;var m=i.resizeHandles,y=i.style,x=i.transformScale,b=lde(i,rde);return sS.createElement(tde.default,{axis:g,draggableOpts:c,handle:s,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:h,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:m,transformScale:x,width:this.state.width},sS.createElement("div",uA({},b,{style:h_(h_({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(sS.Component);Rw.default=x8;x8.propTypes=h_(h_({},nde.resizableProps),{},{children:ede.default.element});Aw.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};Aw.exports.Resizable=X0.default;Aw.exports.ResizableBox=Rw.default;var ude=Aw.exports,Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.resizeHandleType=Il.resizeHandleAxesType=Il.default=void 0;var Ut=w8(Wl),hde=w8(P);function w8(t){return t&&t.__esModule?t:{default:t}}const dde=Il.resizeHandleAxesType=Ut.default.arrayOf(Ut.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),fde=Il.resizeHandleType=Ut.default.oneOfType([Ut.default.node,Ut.default.func]);Il.default={className:Ut.default.string,style:Ut.default.object,width:Ut.default.number,autoSize:Ut.default.bool,cols:Ut.default.number,draggableCancel:Ut.default.string,draggableHandle:Ut.default.string,verticalCompact:function(t){t.verticalCompact},compactType:Ut.default.oneOf(["vertical","horizontal"]),layout:function(t){var e=t.layout;e!==void 0&&Gt.validateLayout(e,"layout")},margin:Ut.default.arrayOf(Ut.default.number),containerPadding:Ut.default.arrayOf(Ut.default.number),rowHeight:Ut.default.number,maxRows:Ut.default.number,isBounded:Ut.default.bool,isDraggable:Ut.default.bool,isResizable:Ut.default.bool,allowOverlap:Ut.default.bool,preventCollision:Ut.default.bool,useCSSTransforms:Ut.default.bool,transformScale:Ut.default.number,isDroppable:Ut.default.bool,resizeHandles:dde,resizeHandle:fde,onLayoutChange:Ut.default.func,onDragStart:Ut.default.func,onDrag:Ut.default.func,onDragStop:Ut.default.func,onResizeStart:Ut.default.func,onResize:Ut.default.func,onResizeStop:Ut.default.func,onDrop:Ut.default.func,droppingItem:Ut.default.shape({i:Ut.default.string.isRequired,w:Ut.default.number.isRequired,h:Ut.default.number.isRequired}),children:function(t,e){const n=t[e],r={};hde.default.Children.forEach(n,function(i){if((i==null?void 0:i.key)!=null){if(r[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');r[i.key]=!0}})},innerRef:Ut.default.any};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.default=void 0;var pd=lM(P),cn=lM(Wl),pde=y8,gde=ude,gd=Gt,ni=sl,JN=Il,mde=lM(XI);function lM(t){return t&&t.__esModule?t:{default:t}}function Fa(t,e,n){return e=yde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=vde(t,"string");return typeof e=="symbol"?e:String(e)}function vde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class cM extends pd.default.Component{constructor(){super(...arguments),Fa(this,"state",{resizing:null,dragging:null,className:""}),Fa(this,"elementRef",pd.default.createRef()),Fa(this,"onDragStart",(e,n)=>{let{node:r}=n;const{onDragStart:i,transformScale:s}=this.props;if(!i)return;const o={top:0,left:0},{offsetParent:a}=r;if(!a)return;const l=a.getBoundingClientRect(),c=r.getBoundingClientRect(),u=c.left/s,h=l.left/s,f=c.top/s,g=l.top/s;o.left=u-h+a.scrollLeft,o.top=f-g+a.scrollTop,this.setState({dragging:o});const{x:m,y}=(0,ni.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return i.call(this,this.props.i,m,y,{e,node:r,newPosition:o})}),Fa(this,"onDrag",(e,n)=>{let{node:r,deltaX:i,deltaY:s}=n;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let a=this.state.dragging.top+s,l=this.state.dragging.left+i;const{isBounded:c,i:u,w:h,h:f,containerWidth:g}=this.props,m=this.getPositionParams();if(c){const{offsetParent:v}=r;if(v){const{margin:E,rowHeight:S,containerPadding:C}=this.props,R=v.clientHeight-(0,ni.calcGridItemWHPx)(f,S,E[1]);a=(0,ni.clamp)(a-C[1],0,R);const I=(0,ni.calcGridColWidth)(m),L=g-(0,ni.calcGridItemWHPx)(h,I,E[0]);l=(0,ni.clamp)(l-C[0],0,L)}}const y={top:a,left:l};this.setState({dragging:y});const{containerPadding:x}=this.props,{x:b,y:w}=(0,ni.calcXY)(m,a-x[1],l-x[0],h,f);return o.call(this,u,b,w,{e,node:r,newPosition:y})}),Fa(this,"onDragStop",(e,n)=>{let{node:r}=n;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:s,h:o,i:a,containerPadding:l}=this.props,{left:c,top:u}=this.state.dragging,h={top:u,left:c};this.setState({dragging:null});const{x:f,y:g}=(0,ni.calcXY)(this.getPositionParams(),u-l[1],c-l[0],s,o);return i.call(this,a,f,g,{e,node:r,newPosition:h})}),Fa(this,"onResizeStop",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStop")),Fa(this,"onResizeStart",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStart")),Fa(this,"onResize",(e,n,r)=>this.onResizeHandler(e,n,r,"onResize"))}shouldComponentUpdate(e,n){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,ni.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,ni.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,n);return!(0,gd.fastPositionEqual)(r,i)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:n}=this.props;if(!n)return;const r=this.elementRef.current;if(!r)return;const i=e.droppingPosition||{left:0,top:0},{dragging:s}=this.state,o=s&&n.left!==i.left||n.top!==i.top;if(!s)this.onDragStart(n.e,{node:r,deltaX:n.left,deltaY:n.top});else if(o){const a=n.left-s.left,l=n.top-s.top;this.onDrag(n.e,{node:r,deltaX:a,deltaY:l})}}getPositionParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:n,containerWidth:r,useCSSTransforms:i}=this.props;let s;return i?s=(0,gd.setTransform)(e):(s=(0,gd.setTopLeft)(e),n&&(s.left=(0,gd.perc)(e.left/r),s.width=(0,gd.perc)(e.width/r))),s}mixinDraggable(e,n){return pd.default.createElement(pde.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,n){return(r,i)=>n(r,i,e)}mixinResizable(e,n,r){const{cols:i,minW:s,minH:o,maxW:a,maxH:l,transformScale:c,resizeHandles:u,resizeHandle:h}=this.props,f=this.getPositionParams(),g=(0,ni.calcGridItemPosition)(f,0,0,i,0).width,m=(0,ni.calcGridItemPosition)(f,0,0,s,o),y=(0,ni.calcGridItemPosition)(f,0,0,a,l),x=[m.width,m.height],b=[Math.min(y.width,g),Math.min(y.height,1/0)];return pd.default.createElement(gde.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:x,maxConstraints:b,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:c,resizeHandles:u,handle:h},e)}onResizeHandler(e,n,r,i){let{node:s,size:o,handle:a}=n;const l=this.props[i];if(!l)return;const{x:c,y:u,i:h,maxH:f,minH:g,containerWidth:m}=this.props,{minW:y,maxW:x}=this.props;let b=o;s&&(b=(0,gd.resizeItemInDirection)(a,r,o,m),this.setState({resizing:i==="onResizeStop"?null:b}));let{w,h:v}=(0,ni.calcWH)(this.getPositionParams(),b.width,b.height,c,u,a);w=(0,ni.clamp)(w,Math.max(y,1),x),v=(0,ni.clamp)(v,g,f),l.call(this,h,w,v,{e,node:s,size:b,handle:a})}render(){const{x:e,y:n,w:r,h:i,isDraggable:s,isResizable:o,droppingPosition:a,useCSSTransforms:l}=this.props,c=(0,ni.calcGridItemPosition)(this.getPositionParams(),e,n,r,i,this.state),u=pd.default.Children.only(this.props.children);let h=pd.default.cloneElement(u,{ref:this.elementRef,className:(0,mde.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":s,"react-draggable-dragging":!!this.state.dragging,dropping:!!a,cssTransforms:l}),style:{...this.props.style,...u.props.style,...this.createStyle(c)}});return h=this.mixinResizable(h,c,o),h=this.mixinDraggable(h,s),h}}Ew.default=cM;Fa(cM,"propTypes",{children:cn.default.element,cols:cn.default.number.isRequired,containerWidth:cn.default.number.isRequired,rowHeight:cn.default.number.isRequired,margin:cn.default.array.isRequired,maxRows:cn.default.number.isRequired,containerPadding:cn.default.array.isRequired,x:cn.default.number.isRequired,y:cn.default.number.isRequired,w:cn.default.number.isRequired,h:cn.default.number.isRequired,minW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minWidth not Number");if(n>t.w||n>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxWidth not Number");if(n<t.w||n<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minHeight not Number");if(n>t.h||n>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxHeight not Number");if(n<t.h||n<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:cn.default.string.isRequired,resizeHandles:JN.resizeHandleAxesType,resizeHandle:JN.resizeHandleType,onDragStop:cn.default.func,onDragStart:cn.default.func,onDrag:cn.default.func,onResizeStop:cn.default.func,onResizeStart:cn.default.func,onResize:cn.default.func,isDraggable:cn.default.bool.isRequired,isResizable:cn.default.bool.isRequired,isBounded:cn.default.bool.isRequired,static:cn.default.bool,useCSSTransforms:cn.default.bool.isRequired,transformScale:cn.default.number,className:cn.default.string,handle:cn.default.string,cancel:cn.default.string,droppingPosition:cn.default.shape({e:cn.default.object.isRequired,left:cn.default.number.isRequired,top:cn.default.number.isRequired})});Fa(cM,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(W0,"__esModule",{value:!0});W0.default=void 0;var Pu=wde(P),oS=WI,bde=uM(XI),Pt=Gt,_de=sl,eF=uM(Ew),xde=uM(Il);function uM(t){return t&&t.__esModule?t:{default:t}}function E8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(E8=function(r){return r?n:e})(t)}function wde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=E8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function xi(t,e,n){return e=Ede(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ede(t){var e=Tde(t,"string");return typeof e=="symbol"?e:String(e)}function Tde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const tF="react-grid-layout";let T8=!1;try{T8=/firefox/i.test(navigator.userAgent)}catch{}class Iw extends Pu.Component{constructor(){super(...arguments),xi(this,"state",{activeDrag:null,layout:(0,Pt.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Pt.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),xi(this,"dragEnterCounter",0),xi(this,"onDragStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Pt.getLayoutItem)(a,e);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,Pt.cloneLayoutItem)(l),oldLayout:a,activeDrag:c}),this.props.onDragStart(a,l,l,null,s,o)}),xi(this,"onDrag",(e,n,r,i)=>{let{e:s,node:o}=i;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:u,preventCollision:h}=this.props,f=(0,Pt.getLayoutItem)(l,e);if(!f)return;const g={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:e};l=(0,Pt.moveElement)(l,f,n,r,!0,h,(0,Pt.compactType)(this.props),c,u),this.props.onDrag(l,a,f,g,s,o),this.setState({layout:u?l:(0,Pt.compact)(l,(0,Pt.compactType)(this.props),c),activeDrag:g})}),xi(this,"onDragStop",(e,n,r,i)=>{let{e:s,node:o}=i;if(!this.state.activeDrag)return;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:u,allowOverlap:h}=this.props,f=(0,Pt.getLayoutItem)(l,e);if(!f)return;l=(0,Pt.moveElement)(l,f,n,r,!0,u,(0,Pt.compactType)(this.props),c,h);const m=h?l:(0,Pt.compact)(l,(0,Pt.compactType)(this.props),c);this.props.onDragStop(m,a,f,null,s,o);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(m,y)}),xi(this,"onResizeStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Pt.getLayoutItem)(a,e);l&&(this.setState({oldResizeItem:(0,Pt.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(a,l,l,null,s,o))}),xi(this,"onResize",(e,n,r,i)=>{let{e:s,node:o,size:a,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:u}=this.state,{cols:h,preventCollision:f,allowOverlap:g}=this.props;let m=!1,y,x,b;const[w,v]=(0,Pt.withLayoutItem)(u,e,S=>{let C;return x=S.x,b=S.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(x=S.x+(S.w-n),n=S.x!==x&&x<0?S.w:n,x=x<0?0:x),["ne","n","nw"].indexOf(l)!==-1&&(b=S.y+(S.h-r),r=S.y!==b&&b<0?S.h:r,b=b<0?0:b),m=!0),f&&!g&&(C=(0,Pt.getAllCollisions)(u,{...S,w:n,h:r,x,y:b}).filter(I=>I.i!==S.i).length>0,C&&(b=S.y,r=S.h,x=S.x,n=S.w,m=!1)),S.w=n,S.h=r,S});if(!v)return;y=w,m&&(y=(0,Pt.moveElement)(w,v,x,b,!0,this.props.preventCollision,(0,Pt.compactType)(this.props),h,g));const E={w:v.w,h:v.h,x:v.x,y:v.y,static:!0,i:e};this.props.onResize(y,c,v,E,s,o),this.setState({layout:g?y:(0,Pt.compact)(y,(0,Pt.compactType)(this.props),h),activeDrag:E})}),xi(this,"onResizeStop",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a,oldResizeItem:l}=this.state,{cols:c,allowOverlap:u}=this.props,h=(0,Pt.getLayoutItem)(a,e),f=u?a:(0,Pt.compact)(a,(0,Pt.compactType)(this.props),c);this.props.onResizeStop(f,l,h,null,s,o);const{oldLayout:g}=this.state;this.setState({activeDrag:null,layout:f,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(f,g)}),xi(this,"onDragOver",e=>{var w;if(e.preventDefault(),e.stopPropagation(),T8&&!((w=e.nativeEvent.target)!=null&&w.classList.contains(tF)))return!1;const{droppingItem:n,onDropDragOver:r,margin:i,cols:s,rowHeight:o,maxRows:a,width:l,containerPadding:c,transformScale:u}=this.props,h=r==null?void 0:r(e);if(h===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const f={...n,...h},{layout:g}=this.state,m=e.currentTarget.getBoundingClientRect(),y=e.clientX-m.left,x=e.clientY-m.top,b={left:y/u,top:x/u,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:v,top:E}=this.state.droppingPosition;(v!=y||E!=x)&&this.setState({droppingPosition:b})}}else{const v={cols:s,margin:i,maxRows:a,rowHeight:o,containerWidth:l,containerPadding:c||i},E=(0,_de.calcXY)(v,x,y,f.w,f.h);this.setState({droppingDOMNode:Pu.createElement("div",{key:f.i}),droppingPosition:b,layout:[...g,{...f,x:E.x,y:E.y,static:!1,isDraggable:!0}]})}}),xi(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:n}=this.props,{layout:r}=this.state,i=(0,Pt.compact)(r.filter(s=>s.i!==e.i),(0,Pt.compactType)(this.props),n,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),xi(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),xi(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),xi(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:n}=this.props,{layout:r}=this.state,i=r.find(s=>s.i===n.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,i,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let r;return n.activeDrag?null:(!(0,oS.deepEqual)(e.layout,n.propsLayout)||e.compactType!==n.compactType?r=e.layout:(0,Pt.childrenEqual)(e.children,n.children)||(r=n.layout),r?{layout:(0,Pt.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,Pt.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,Pt.fastRGLPropsEqual)(this.props,e,oS.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,n){if(!this.state.activeDrag){const r=this.state.layout,i=n.layout;this.onLayoutMaybeChanged(r,i)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,Pt.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+n*2+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,oS.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:n,cols:r,margin:i,containerPadding:s,rowHeight:o,maxRows:a,useCSSTransforms:l,transformScale:c}=this.props;return Pu.createElement(eF.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:n,cols:r,margin:i,containerPadding:s||i,maxRows:a,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Pu.createElement("div",null))}processGridItem(e,n){if(!e||!e.key)return;const r=(0,Pt.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:i,cols:s,margin:o,containerPadding:a,rowHeight:l,maxRows:c,isDraggable:u,isResizable:h,isBounded:f,useCSSTransforms:g,transformScale:m,draggableCancel:y,draggableHandle:x,resizeHandles:b,resizeHandle:w}=this.props,{mounted:v,droppingPosition:E}=this.state,S=typeof r.isDraggable=="boolean"?r.isDraggable:!r.static&&u,C=typeof r.isResizable=="boolean"?r.isResizable:!r.static&&h,R=r.resizeHandles||b,I=S&&f&&r.isBounded!==!1;return Pu.createElement(eF.default,{containerWidth:i,cols:s,margin:o,containerPadding:a||o,maxRows:c,rowHeight:l,cancel:y,handle:x,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:S,isResizable:C,isBounded:I,useCSSTransforms:g&&v,usePercentages:!v,transformScale:m,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:n?E:void 0,resizeHandles:R,resizeHandle:w},e)}render(){const{className:e,style:n,isDroppable:r,innerRef:i}=this.props,s=(0,bde.default)(tF,e),o={height:this.containerHeight(),...n};return Pu.createElement("div",{ref:i,className:s,style:o,onDrop:r?this.onDrop:Pt.noop,onDragLeave:r?this.onDragLeave:Pt.noop,onDragEnter:r?this.onDragEnter:Pt.noop,onDragOver:r?this.onDragOver:Pt.noop},Pu.Children.map(this.props.children,a=>this.processGridItem(a)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}W0.default=Iw;xi(Iw,"displayName","ReactGridLayout");xi(Iw,"propTypes",xde.default);xi(Iw,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Pt.noop,onDragStart:Pt.noop,onDrag:Pt.noop,onDragStop:Pt.noop,onResizeStart:Pt.noop,onResize:Pt.noop,onResizeStop:Pt.noop,onDrop:Pt.noop,onDropDragOver:Pt.noop});var Mw={},Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.findOrGenerateResponsiveLayout=Pde;Nh.getBreakpointFromWidth=Sde;Nh.getColsFromBreakpoint=Cde;Nh.sortBreakpoints=hM;var zv=Gt;function Sde(t,e){const n=hM(t);let r=n[0];for(let i=1,s=n.length;i<s;i++){const o=n[i];e>t[o]&&(r=o)}return r}function Cde(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function Pde(t,e,n,r,i,s){if(t[n])return(0,zv.cloneLayout)(t[n]);let o=t[r];const a=hM(e),l=a.slice(a.indexOf(n));for(let c=0,u=l.length;c<u;c++){const h=l[c];if(t[h]){o=t[h];break}}return o=(0,zv.cloneLayout)(o||[]),(0,zv.compact)((0,zv.correctBounds)(o,{cols:i}),s,i)}function hM(t){return Object.keys(t).sort(function(n,r){return t[n]-t[r]})}Object.defineProperty(Mw,"__esModule",{value:!0});Mw.default=void 0;var nF=Rde(P),Zi=S8(Wl),aS=WI,gf=Gt,Au=Nh,Ade=S8(W0);function S8(t){return t&&t.__esModule?t:{default:t}}function C8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(C8=function(r){return r?n:e})(t)}function Rde(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=C8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function dA(){return dA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dA.apply(this,arguments)}function d_(t,e,n){return e=Ide(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ide(t){var e=Mde(t,"string");return typeof e=="symbol"?e:String(e)}function Mde(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const rF=t=>Object.prototype.toString.call(t);function Uv(t,e){return t==null?null:Array.isArray(t)?t:t[e]}class dM extends nF.Component{constructor(){super(...arguments),d_(this,"state",this.generateInitialState()),d_(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){const{width:e,breakpoints:n,layouts:r,cols:i}=this.props,s=(0,Au.getBreakpointFromWidth)(n,e),o=(0,Au.getColsFromBreakpoint)(s,i),a=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,Au.findOrGenerateResponsiveLayout)(r,n,s,s,o,a),breakpoint:s,cols:o}}static getDerivedStateFromProps(e,n){if(!(0,aS.deepEqual)(e.layouts,n.layouts)){const{breakpoint:r,cols:i}=n;return{layout:(0,Au.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,i,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,aS.deepEqual)(this.props.breakpoints,e.breakpoints)||!(0,aS.deepEqual)(this.props.cols,e.cols))&&this.onWidthChange(e)}onWidthChange(e){const{breakpoints:n,cols:r,layouts:i,compactType:s}=this.props,o=this.props.breakpoint||(0,Au.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),a=this.state.breakpoint,l=(0,Au.getColsFromBreakpoint)(o,r),c={...i};if(a!==o||e.breakpoints!==n||e.cols!==r){a in c||(c[a]=(0,gf.cloneLayout)(this.state.layout));let f=(0,Au.findOrGenerateResponsiveLayout)(c,n,o,a,l,s);f=(0,gf.synchronizeLayoutWithChildren)(f,this.props.children,l,s,this.props.allowOverlap),c[o]=f,this.props.onLayoutChange(f,c),this.props.onBreakpointChange(o,l),this.setState({breakpoint:o,layout:f,cols:l})}const u=Uv(this.props.margin,o),h=Uv(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,l,h)}render(){const{breakpoint:e,breakpoints:n,cols:r,layouts:i,margin:s,containerPadding:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,...u}=this.props;return nF.createElement(Ade.default,dA({},u,{margin:Uv(s,this.state.breakpoint),containerPadding:Uv(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}Mw.default=dM;d_(dM,"propTypes",{breakpoint:Zi.default.string,breakpoints:Zi.default.object,allowOverlap:Zi.default.bool,cols:Zi.default.object,margin:Zi.default.oneOfType([Zi.default.array,Zi.default.object]),containerPadding:Zi.default.oneOfType([Zi.default.array,Zi.default.object]),layouts(t,e){if(rF(t[e])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+rF(t[e]));Object.keys(t[e]).forEach(n=>{if(!(n in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,gf.validateLayout)(t.layouts[n],"layouts."+n)})},width:Zi.default.number.isRequired,onBreakpointChange:Zi.default.func,onLayoutChange:Zi.default.func,onWidthChange:Zi.default.func});d_(dM,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:gf.noop,onLayoutChange:gf.noop,onWidthChange:gf.noop});var fM={},P8=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];n.call(r,o[1],o[0])}},e}()}(),fA=typeof window<"u"&&typeof document<"u"&&window.document===document,f_=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Ode=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(f_):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Lde=2;function kde(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&a()}function o(){Ode(s)}function a(){var l=Date.now();if(n){if(l-i<Lde)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return a}var Dde=20,Nde=["top","right","bottom","left","width","height","size","weight"],Fde=typeof MutationObserver<"u",Bde=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=kde(this.refresh.bind(this),Dde)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!fA||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Fde?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!fA||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=Nde.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),A8=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},jf=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||f_},R8=Ow(0,0,0,0);function p_(t){return parseFloat(t)||0}function iF(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var s=t["border-"+i+"-width"];return r+p_(s)},0)}function zde(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var s=i[r],o=t["padding-"+s];n[s]=p_(o)}return n}function Ude(t){var e=t.getBBox();return Ow(0,0,e.width,e.height)}function $de(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return R8;var r=jf(t).getComputedStyle(t),i=zde(r),s=i.left+i.right,o=i.top+i.bottom,a=p_(r.width),l=p_(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=iF(r,"left","right")+s),Math.round(l+o)!==n&&(l-=iF(r,"top","bottom")+o)),!Gde(t)){var c=Math.round(a+s)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return Ow(i.left,i.top,a,l)}var jde=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof jf(t).SVGGraphicsElement}:function(t){return t instanceof jf(t).SVGElement&&typeof t.getBBox=="function"}}();function Gde(t){return t===jf(t).document.documentElement}function Hde(t){return fA?jde(t)?Ude(t):$de(t):R8}function Vde(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return A8(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function Ow(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Wde=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ow(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Hde(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Xde=function(){function t(e,n){var r=Vde(n);A8(this,{target:e,contentRect:r})}return t}(),Yde=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new P8,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof jf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new Wde(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof jf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Xde(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),I8=typeof WeakMap<"u"?new WeakMap:new P8,M8=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Bde.getInstance(),r=new Yde(e,n,this);I8.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){M8.prototype[t]=function(){var e;return(e=I8.get(this))[t].apply(e,arguments)}});var qde=function(){return typeof f_.ResizeObserver<"u"?f_.ResizeObserver:M8}();const Kde=Object.freeze(Object.defineProperty({__proto__:null,default:qde},Symbol.toStringTag,{value:"Module"})),Zde=dn(Kde);Object.defineProperty(fM,"__esModule",{value:!0});fM.default=sfe;var $v=tfe(P),Qde=pM(Wl),Jde=pM(Zde),efe=pM(XI);function pM(t){return t&&t.__esModule?t:{default:t}}function O8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(O8=function(r){return r?n:e})(t)}function tfe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=O8(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pA.apply(this,arguments)}function md(t,e,n){return e=nfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nfe(t){var e=rfe(t,"string");return typeof e=="symbol"?e:String(e)}function rfe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ife="react-grid-layout";function sfe(t){var e;return e=class extends $v.Component{constructor(){super(...arguments),md(this,"state",{width:1280}),md(this,"elementRef",$v.createRef()),md(this,"mounted",!1),md(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new Jde.default(i=>{if(this.elementRef.current instanceof HTMLElement){const o=i[0].contentRect.width;this.setState({width:o})}});const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.observe(r)}componentWillUnmount(){this.mounted=!1;const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.unobserve(r),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:r,...i}=this.props;return r&&!this.mounted?$v.createElement("div",{className:(0,efe.default)(this.props.className,ife),style:this.props.style,ref:this.elementRef}):$v.createElement(t,pA({innerRef:this.elementRef},i,this.state))}},md(e,"defaultProps",{measureBeforeMount:!1}),md(e,"propTypes",{measureBeforeMount:Qde.default.bool}),e}(function(t){t.exports=W0.default,t.exports.utils=Gt,t.exports.calculateUtils=sl,t.exports.Responsive=Mw.default,t.exports.Responsive.utils=Nh,t.exports.WidthProvider=fM.default})(Yj);var ofe=Yj.exports;function sF(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}function gM(){const[t,e]=P.useState(sF());return P.useEffect(()=>{function n(){e(sF())}return window.addEventListener("load",n),window.addEventListener("resize",n),()=>{window.removeEventListener("load",n),window.removeEventListener("resize",n)}},[]),t}const L8=It(ar)`
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  white-space: nowrap;
`,afe=It.div`
  width: 6px;
  height: 32px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  margin-right: 2px;
`,lfe=P.forwardRef((t,e)=>{const[n,r]=P.useState(null),i=P.useCallback(a=>{r(a),t.onMouseDown&&t.onMouseDown(a)},[]),s=P.useCallback(a=>{n&&n.clientX===a.clientX&&n.clientY===a.clientY&&!t.disabled?t.onClick():t.onMouseUp&&t.onMouseUp(a),r(null)},[n]),o=P.useCallback(a=>{t.onTouchEnd&&t.onTouchEnd(a)},[]);return K(ar,{id:t.id,style:{...t.style,width:40,left:-8},onMouseDown:i,onTouchEnd:o,onMouseUp:s,ref:e,children:Ft(L8,{children:[K(afe,{className:"draggable",style:{userSelect:"none",paddingTop:5,width:"8px",height:"32px",cursor:"move"},children:K(es,{style:{color:"blue"}})}),t.disabled?K(Wc,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},disabled:!0,children:K(ar,{style:{marginTop:"4px"},children:t.children})}):K(u_,{title:t.tooltip,placement:"right",children:K(Wc,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},children:K(ar,{style:{marginTop:"4px"},children:t.children})})})]})},t.key)}),cfe=Tt([Q.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),Q.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),ufe=Tt(Q.jsx("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2zM18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2z"}),"AddRoad"),hfe=Tt([Q.jsx("path",{d:"M19.5 12c.93 0 1.78.28 2.5.76V8c0-1.1-.9-2-2-2h-6.29l-1.06-1.06 1.41-1.41-.71-.71-3.53 3.53.71.71 1.41-1.41L13 6.71V9c0 1.1-.9 2-2 2h-.54c.95 1.06 1.54 2.46 1.54 4 0 .34-.04.67-.09 1h3.14c.25-2.25 2.14-4 4.45-4"},"0"),Q.jsx("path",{d:"M19.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M4 9h5c0-1.1-.9-2-2-2H4c-.55 0-1 .45-1 1s.45 1 1 1m5.83 4.82-.18-.47.93-.35c-.46-1.06-1.28-1.91-2.31-2.43l-.4.89-.46-.21.4-.9C7.26 10.13 6.64 10 6 10c-.53 0-1.04.11-1.52.26l.34.91-.47.18-.35-.93c-1.06.46-1.91 1.28-2.43 2.31l.89.4-.21.46-.9-.4C1.13 13.74 1 14.36 1 15c0 .53.11 1.04.26 1.52l.91-.34.18.47-.93.35c.46 1.06 1.28 1.91 2.31 2.43l.4-.89.46.21-.4.9c.55.22 1.17.35 1.81.35.53 0 1.04-.11 1.52-.26l-.34-.91.47-.18.35.93c1.06-.46 1.91-1.28 2.43-2.31l-.89-.4.21-.46.9.4c.22-.55.35-1.17.35-1.81 0-.53-.11-1.04-.26-1.52zm-2.68 3.95c-1.53.63-3.29-.09-3.92-1.62-.63-1.53.09-3.29 1.62-3.92 1.53-.63 3.29.09 3.92 1.62.64 1.53-.09 3.29-1.62 3.92"},"1")],"Agriculture"),dfe=Tt(Q.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.42 0 2.13.54 2.39 1.4.12.4.45.7.87.7h.3c.66 0 1.13-.65.9-1.27-.42-1.18-1.4-2.16-2.96-2.54V4.5c0-.83-.67-1.5-1.5-1.5S10 3.67 10 4.5v.66c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-1.65 0-2.5-.59-2.83-1.43-.15-.39-.49-.67-.9-.67h-.28c-.67 0-1.14.68-.89 1.3.57 1.39 1.9 2.21 3.4 2.53v.67c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-.65c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoneyRounded"),k8=Tt(Q.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),oF=Tt(Q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ffe=Tt(Q.jsx("path",{d:"M22 3.41 16.71 8.7 20 12h-8V4l3.29 3.29L20.59 2zM3.41 22l5.29-5.29L12 20v-8H4l3.29 3.29L2 20.59z"}),"CloseFullscreen"),pfe=Tt(Q.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Domain"),gfe=Tt(Q.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"}),"DomainAdd"),D8=Tt(Q.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),N8=Tt(Q.jsx("path",{d:"M22 10v12H2V10l7-3v2l5-2v3zm-4.8-1.5L18 2h3l.8 6.5zM11 18h2v-4h-2zm-4 0h2v-4H7zm10-4h-2v4h2z"}),"Factory"),mfe=Tt(Q.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),yfe=Tt(Q.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),vfe=Tt(Q.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),bfe=Tt(Q.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"}),"FitScreen"),_fe=Tt(Q.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),F8=Tt(Q.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),B8=Tt(Q.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),xfe=Tt(Q.jsx("path",{d:"M17.2 3H6.8l-5.2 9 5.2 9h10.4l5.2-9z"}),"Hexagon"),z8=Tt(Q.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),wfe=Tt(Q.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),U8=Tt(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),$8=Tt(Q.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),j8=Tt(Q.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),Efe=Tt(Q.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),aF=Tt(Q.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull"),Tfe=Tt(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"}),"PauseCircle"),Sfe=Tt(Q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle"),Cfe=Tt(Q.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m-8 6H8v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1H8v-1H6v-2h4v-1H7c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2zm4 6.25-2-2h4zM14 10l2-2 2 2z"}),"PriceChange"),Pfe=Tt(Q.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),Afe=Tt(Q.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Rfe=Tt(Q.jsx("path",{d:"M18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2zm11.5.41L21.09 15 19 17.09 16.91 15l-1.41 1.41 2.09 2.09-2.09 2.09L16.91 22 19 19.91 21.09 22l1.41-1.41-2.09-2.09z"}),"RemoveRoad"),Ife=Tt(Q.jsx("path",{d:"m19.41 7.41-4.83-4.83c-.37-.37-.88-.58-1.41-.58H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.42M14 13c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1c0 .55-.45 1-1 1s-1-.45-1-1h-1c-.55 0-1-.45-1-1s.45-1 1-1h3v-1h-3c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-.55.45-1 1-1s1 .45 1 1h1c.55 0 1 .45 1 1s-.45 1-1 1h-3v1zm0-5c-.55 0-1-.45-1-1V3.5L17.5 8z"}),"RequestQuoteRounded"),Mfe=Tt(Q.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),G8=Tt(Q.jsx("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82"}),"Route"),Ofe=Tt(Q.jsx("path",{d:"M3 3h18v18H3z"}),"Square"),H8=Tt(Q.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer"),Lfe=Tt(Q.jsx("path",{d:"m22 12-4-4v3H3v2h15v3z"}),"TrendingFlat"),V8=Tt(Q.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),kfe=Tt(Q.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo"),W8=Tt([Q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),Q.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),Dfe=Tt(Q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),Nfe=It(koe)`
  background-color: rgba(255, 255, 255, 0.95);
`,lS=It(Wc)`
  padding: 2px;
  height: 18px;
  margin: 7px 4px 3px 0;
  border-radius: 16px;
  border: 1px solid rgba(0, 0, 0, 0.2);

  .MuiSvgIcon-root {
    width: 12px;
    height: 12px;
  }
`,Ffe=It(ar)`
  margin-top: 4px;
`,Bfe=P.forwardRef(({id:t,key:e,title:n,icon:r,rowHeight:i,subheader:s,children:o,style:a,onMouseDown:l,onMouseUp:c,onTouchEnd:u,setToFront:h,onClose:f,maximized:g,onMaximize:m,onDemaximize:y,titleBarMode:x},b)=>{const w=()=>{f&&f()},v=()=>{m&&m()},E=()=>{y&&y()},C=26*(x==="win"?2:0);return Ft(Nfe,{id:t,ref:b,style:{...a,borderRadius:"8px"},onMouseDown:R=>{const I=document.getElementById(t).getBoundingClientRect();C<I.right-R.clientX&&R.clientY-I.top<26&&(h(),l&&l(R))},onMouseUp:c,onTouchEnd:u,children:[K(tae,{title:Ft(ar,{style:{userSelect:"none",position:"absolute",top:0,left:0,width:"100%",height:i+"px",display:"flex",flexDirection:"row",marginLeft:"8px"},children:[x==="mac"&&Ft(DC,{children:[K(lS,{size:"small",onClick:()=>{console.log("close")},children:K(oF,{})}),K(lS,{size:"small",onClick:()=>{console.log("remove")},children:K(Afe,{})}),K(lS,{size:"small",onClick:()=>{console.log("open in full")},children:K(aF,{})})]}),Ft(L8,{className:"draggable",children:[K(Ffe,{children:r}),K(es,{style:{marginLeft:"4px",marginTop:"4px"},children:n})]}),x==="win"&&Ft(DC,{children:[g?K(Wc,{size:"small",style:{margin:0,padding:0},"aria-label":"demaximize",title:"demaximize",onClick:E,children:K(ffe,{style:{width:"18px",height:"18px"}})}):K(Wc,{size:"small",style:{margin:0,padding:0},"aria-label":"maximize",title:"maximize",onClick:v,children:K(aF,{style:{width:"18px",height:"18px"}})}),K(Wc,{size:"small","aria-label":"close",style:{marginRight:"6px"},onClick:w,title:"close",children:K(oF,{})})]})]}),style:{cursor:"move",height:"16px",backgroundColor:"rgba(255,255,255,0.90)",padding:"8px",borderBottom:"1px solid rgba(0,0,0,0.1)"},titleTypographyProps:{fontSize:"16px"}}),o,K(Uoe,{})]},e)}),In={BackgroundPanel:"BackgroundPanel",FloatingButton:"FloatingButton",FloatingPanel:"FloatingPanel"},gA=32,cS=32,zfe=It(Nj)`
  padding: 8px;
  margin: 0;
  overflow: hidden;
`,Ufe=It(ofe.Responsive)`
  .react-grid-item.react-grid-placeholder {
    background: grey !important;
  }
`,$fe=t=>{const e=nI(),{width:n,height:r}=gM(),i=Math.floor((r-10)/cS-3),[s,o]=P.useState(""),[a,l]=P.useState([...t.initialLayouts.map(O=>({...O,y:t.resources[O.i].shown?O.y:O.y+i*2}))]),[c,u]=P.useState(null),[h,f]=P.useState(wD(a.map(O=>{t.resources[O.i]||console.error("ERROR",O.i,t.resources);const B=t.resources[O.i].shown||!1,M=t.resources[O.i].type===In.FloatingButton?t.resources[O.i].enabled:!0;return[O.i,{shown:B,enabled:M}]}))),[g,m]=P.useState(null),y=(O,B)=>{const M=B.findIndex(j=>j.i===O);if(M<0)return B;const D=B[M],N=new Array(B.length);for(let j=0;j<M;j++)N[j]=B[j];for(let j=M;j<B.length-1;j++)N[j]=B[j+1];return N[B.length-1]=D,N},x=O=>{const B=O[O.length-1];u({...B});const M=[...O];return M[O.length-1]={...B,x:0,y:0,w:gA,h:Math.floor((r-10)/cS-3)},M},b=()=>{if(c){const O=[...a];O[a.length-1]=c,l(O),u(null)}},w=O=>{l(M=>M.map(D=>D.i!==O?D:{...D,y:D.y-i}));const B=t.resources[O].bindToButtonId;B&&f(M=>({...M,[O]:{...M[O],shown:!0},[B]:{...M[B],enabled:!1}}))},v=O=>{a.find(D=>D.i===O)&&l(D=>D.map(N=>N.i!==O?N:{...N,y:N.y+i}));const M=t.resources[O].bindToButtonId;M&&f(D=>({...D,[O]:{...D[O],shown:!1},[M]:{...D[M],enabled:!0}}))},E=O=>{o(O),l(B=>y(O,B))},S=O=>{o(O),l(B=>x(y(O,B)))},C=(O,B,M,D,N,j)=>{const W=y(B.i,O);l(W)},R=(O,B,M,D,N,j)=>{const W=y(B.i,O);l(W)},I=O=>{if(O.length===0)return;const B=y(s,O);l(B)},L=(O,B,M)=>{var D;if(!B)return null;switch(B.type){case"FloatingButton":{const N=B;return K(lfe,{id:O,tooltip:B.tooltip,onClick:()=>{N.bindToPanelId?(w(N.bindToPanelId),E(N.bindToPanelId)):N.onClick?N.onClick():N.navigateTo&&e(N.navigateTo)},disabled:!((D=h[O])!=null&&D.enabled),children:B.icon},O)}case"FloatingPanel":return K(Bfe,{id:O,title:B.title,icon:B.icon,setToFront:()=>E(O),rowHeight:B.rowHeight,titleBarMode:B.titleBarMode,onClose:()=>{v(B.id)},onMaximize:()=>{S(O)},onDemaximize:()=>{b()},maximized:(c==null?void 0:c.i)===O,children:K(zfe,{children:M})},O);case"BackgroundPanel":default:return K("div",{id:O},O)}};return P.useEffect(()=>{a.length>0&&Object.keys(t.resources).length>0&&m(wD(a.map(O=>[O.i,L(O.i,t.resources[O.i],t.gridItemChildrenMap[O.i])])))},[a,t.resources,t.gridItemChildrenMap]),K(ar,{style:{margin:0,padding:0,border:"none"},children:n===0||a.length===0||g===null?K(ar,{sx:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",backgroundColor:"#ccc"},children:K(GI,{variant:"indeterminate",size:100})}):Ft(Ufe,{style:{backgroundColor:t.backgroundColor,margin:0,padding:0},compactType:"vertical",autoSize:!0,allowOverlap:!0,isResizable:!1,isBounded:!1,width:n,draggableHandle:".draggable",breakpoints:{lg:1140},cols:{lg:gA},rowHeight:cS,margin:[4,4],containerPadding:[8,2],layouts:{lg:a},onLayoutChange:I,onDragStop:R,onResizeStop:C,children:[K(ar,{sx:{position:"absolute",top:"-2px",left:"-8px"},children:t.children},"BackgroundPanel"),a.filter(O=>O.i!=="BackgroundPanel").map((O,B)=>g[O.i])]})})};function jfe(t){return{layout:{i:"HomeButton",x:0,y:0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"HomeButton",type:In.FloatingButton,tooltip:"Home",icon:K(wfe,{}),navigateTo:"/",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function lF(t){return{layout:{i:"ZoomInButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomInButton",type:In.FloatingButton,tooltip:"zoom in",icon:K(W8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function cF(t){return{layout:{i:"ZoomOutButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomOutButton",type:In.FloatingButton,tooltip:"zoom out",icon:K(Dfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function uF(t){return{layout:{i:"FitScreenButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.w)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"FitScreenButton",type:In.FloatingButton,tooltip:"fit to screen",icon:K(bfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Gfe(t){return{layout:{i:"InputOutputButton",x:0,y:(t==null?void 0:t.y)??1,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InputOutputButton",type:In.FloatingButton,bindToPanelId:"InputOutputPanel",tooltip:"Open Input/Output Panel",icon:K(F8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Hfe(t){return{layout:{i:"InputOutputPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??3,minW:5,minH:2,resizeHandles:Yl,isDraggable:!0,isResizable:!0},resource:{id:"InputOutputPanel",type:In.FloatingPanel,title:"Input/Output",icon:K(F8,{}),titleBarMode:"win",rowHeight:ll,shown:t==null?void 0:t.shown,bindToButtonId:"InputOutputButton"}}}function Vfe(t){return{layout:{i:"ChartPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??10,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"ChartPanel",type:In.FloatingPanel,title:"Chart",icon:K(k8,{}),titleBarMode:"win",rowHeight:ll,shown:!0,bindToButtonId:"ChartButton"}}}function hF(t){return t.parameterSet.units==="degrees"}const Wfe=({sessionState:t,setSessionState:e,uiState:n,setUIState:r,matrices:i,updateAndSetMatrices:s})=>{var O,B;const[o,a]=P.useState(null),l=P.useCallback((M,D)=>{requestAnimationFrame(()=>{const{locations:N,edges:j,locationSerialNumber:W}=NJ(M,t);e(V=>{V.locations=N,V.edges=j,V.parameterSet.numLocations=M,V.locationSerialNumber=W},D||!1,"removeBulkLocations"),s(N,j),r(V=>{V.selectedIndices=[]})})},[t==null?void 0:t.locations,t==null?void 0:t.edges,(O=t==null?void 0:t.parameterSet)==null?void 0:O.transportationCost]),c=P.useCallback(()=>{u(t,n)},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,t==null?void 0:t.locationSerialNumber]),u=P.useCallback((M,D)=>{requestAnimationFrame(()=>{const{locations:N,edges:j,locationSerialNumber:W,addedIndices:V}=G$(M,D.selectedIndices);e(U=>{U.locations=N,U.edges=j,U.parameterSet.numLocations=U.parameterSet.numLocations+1,U.locationSerialNumber=W},!0,"addLocation"),s(N,j),r(U=>{U.focusedIndices=[...D.selectedIndices],U.selectedIndices=[...V]})})},[s,r]),h=P.useCallback((M,D)=>{requestAnimationFrame(()=>{e(N=>{const{locations:j,edges:W,locationSerialNumber:V,addedIndices:U}=vI(t,n.selectedIndices,M);N.locations=j,N.edges=W,N.parameterSet.numLocations=M,N.locationSerialNumber=V,s(j,W),r(X=>{X.selectedIndices=[],X.focusedIndices=U})},D||!1,"addBulkLocations")})},[n,t,r,e]),f=P.useCallback((M,D,N)=>{if(!N)return[];const j=new Set(M.map(W=>{var V;return(V=t.locations[W])==null?void 0:V.id}));return D.filter(W=>!j.has(W.source)&&!j.has(W.target))},[t]),g=P.useCallback((M,D,N,j)=>{if(!j)return[];const W=new Set;function V(U,X){return U<X?`${U},${X}`:`${X},${U}`}for(let U=0;M!==D&&U<j.length;U++){const X=j[M][D];if(X===-1)break;W.add(V(t.locations[M].id,t.locations[X].id)),M=X}return N.filter((U,X)=>!W.has(V(U.source,U.target)))},[t]),m=P.useCallback(()=>{requestAnimationFrame(()=>{e(M=>{const D=[];for(let N=0;N<n.selectedIndices.length;N++)for(let j=N+1;j<n.selectedIndices.length;j++){const W=n.selectedIndices[N],V=t.locations[W],U=n.selectedIndices[j],X=t.locations[U];if(Nl(i.adjacencyMatrix[W][U])){const Y=Ch(V.point,X.point,hF(t)),Z={source:V.id,target:X.id,distance:Y};D.push(Z)}}M.edges=[...M.edges,...D],s(t.locations,t.edges)},!0,"addEdge")})},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,(B=t==null?void 0:t.parameterSet)==null?void 0:B.transportationCost,e,i==null?void 0:i.adjacencyMatrix,r]),y=P.useCallback(()=>{if(n.selectedIndices.length===2){const M=g(n.selectedIndices[0],n.selectedIndices[1],t.edges,i.predecessorMatrix);e(D=>{D.edges=M},!0,"removePath")}else{const M=f(n.selectedIndices,t.edges,i.predecessorMatrix);e(D=>{D.edges=M||[]},!0,"removeEdge")}},[n==null?void 0:n.selectedIndices,t==null?void 0:t.edges,i==null?void 0:i.predecessorMatrix]),x=P.useCallback(()=>{requestAnimationFrame(()=>{const M=f(n.selectedIndices,t.edges,i.predecessorMatrix)||[],D=(t.locations.length+n.selectedIndices.length)/t.locations.length,N=t.locations.filter((j,W)=>!n.selectedIndices.includes(W)).map(j=>({...j,manufactureShare:j.manufactureShare*D,agricultureShare:j.agricultureShare*D}));e(j=>{j.locations=N,j.edges=M,j.parameterSet.numLocations=N.length},!0,"removeLocation"),s(N,M),r(j=>{j.selectedIndices=[]})})},[]),b=P.useCallback((M,D,N)=>{a({x:M,y:D}),r(j=>{j.draggingIndex=N})},[a,r]),w=P.useCallback((M,D,N)=>{o===null||Math.abs(o.x-M)<=1&&Math.abs(o.y-D)<=1||requestAnimationFrame(()=>{r(j=>{j.draggingIndex=null,j.focusedIndices=[]}),a(null),e(j=>{},!0,"dragEnd"),s(t.locations,t.edges)})},[t,e,r,a,s]),v=P.useCallback((M,D,N)=>{(M!==0||D!==0)&&o!==null&&requestAnimationFrame(()=>{const W=n.selectedIndices.includes(N)?n.selectedIndices:[...n.selectedIndices,N];e(V=>{W.forEach(U=>{const X=V.locations[U].id,Y=V.locations[U];Y.point[0]+=M,Y.point[1]+=D,i.adjacencyMatrix&&V.edges.filter(Z=>Z.source===X||Z.target===X).forEach(Z=>{const se=Z.source===X?Z.target:Z.source,xe=BP(t.locations,se);Z.distance=Ch(Y.point,t.locations[xe].point,hF(t))})})},!1,"drag")})},[n==null?void 0:n.selectedIndices,i==null?void 0:i.adjacencyMatrix,t,o]),E=P.useCallback(M=>{const D=M.filter(N=>N!==-1);r(N=>{N.focusedIndices=D})},[]),S=P.useCallback(M=>{r(D=>{D.focusedIndices=[]})},[]),C=P.useCallback((M,D)=>{r(N=>{const j=TQ(M,D).sort();N.selectedIndices=j,N.draggingIndex=null})},[r]),R=P.useCallback((M,D)=>{r(N=>{const j=M.filter(W=>!D.includes(W));N.selectedIndices=j,N.draggingIndex=null})},[r]),I=P.useCallback((M,D,N)=>{N>=0&&(o===null||o.x===M&&o.y===D)&&(n.selectedIndices.includes(N)?R(n.selectedIndices,[N]):C(n.selectedIndices,[N]))},[o,C,R,n==null?void 0:n.selectedIndices]),L=P.useCallback(()=>{R(n.selectedIndices,n.selectedIndices)},[n==null?void 0:n.selectedIndices]);return{onAddLocation:c,onAddBulkLocations:h,onRemoveLocation:x,onRemoveBulkLocations:l,onAddEdge:m,onRemoveEdge:y,onDragStart:b,onDrag:v,onDragEnd:w,onFocus:E,onUnfocus:S,onSelect:C,onUnselect:R,onPointerUp:I,onClearSelection:L}},Xfe=({setUIState:t})=>{const e=P.useCallback(r=>{t(i=>{i.chartType=r})},[t]);return{setSessionChartScale:P.useCallback(r=>{t(i=>{i.chartScale=r})},[t]),setSessionChartType:e}};function X8(t){if(!t||t.length===0)return{top:Number.NEGATIVE_INFINITY,left:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY,right:Number.POSITIVE_INFINITY};let e=t[0].point[0],n=t[0].point[0],r=t[0].point[1],i=t[0].point[1];for(let s=1;s<t.length;s++)e=Math.min(e,t[s].point[0]),n=Math.max(n,t[s].point[0]),r=Math.min(r,t[s].point[1]),i=Math.max(i,t[s].point[1]);return{top:r,left:e,bottom:i,right:n}}const Y8=t=>{const e=(t.left+t.right)/2,n=(t.top+t.bottom)/2,r=t.width/(t.right-t.left)*t.paddingMarginRatio,i=t.height/(t.bottom-t.top)*t.paddingMarginRatio;return[Math.min(r,i),n,e]},q8=16448250,Yfe=400,K8=.4,qfe=({width:t,height:e,locations:n,uiState:r,setUIState:i})=>{const s=P.useCallback((a,l)=>{if((l==null?void 0:l.length)>1){const c=X8(l);return Y8({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:t,height:e,paddingMarginRatio:a.viewportCenter&&a.viewportCenter[0]<1.7?K8:.5})}return a.viewportCenter},[e,t]);return{onFit:P.useCallback(()=>s(r,n),[s,r,n])}};function Kfe(t){return{layout:{i:"ChartButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??6,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ChartButton",type:In.FloatingButton,bindToPanelId:"ChartPanel",tooltip:"Open Chart Panel",icon:K(k8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Zfe(){return window.matchMedia("(hover: hover)").matches}const Qfe=It(Wc)`
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  right: 10px;
  border-radius: 20px;
  border: 1px solid gray;
`,Jfe=It(Qfe)`
  top: 40px;
`,epe=It(_w)`
  width: 120px;
  padding: 18px;
  margin-right: 5px;
  margin-left: 20px;
`,tpe=It.div`
  position: absolute;
  width: 210px;
  height: 50px;
  top: 40px;
  right: 55px;
  background-color: white;
  border-radius: 20px;
  border: 1px solid gray;
  box-shadow: 0 0 1px gray;
`,npe=t=>{const[e,n]=P.useState(!1);return t.shown?Ft(DC,{children:[K(Jfe,{color:"primary",title:"Change scale of display chart",onClick:()=>n(!e),children:K(W8,{})}),K(Oj,{open:e,onClick:()=>{setTimeout(()=>{n(!1)},Yfe)},sx:{backgroundColor:"#00000030",zIndex:r=>r.zIndex.drawer+1},children:K(tpe,{children:K(epe,{"aria-label":"Change scale of display chart",value:t.scale,min:1,max:21,step:null,marks:[{value:1,label:"1"},{value:2,label:""},{value:3,label:"3"},{value:5,label:"5"},{value:8,label:"8"},{value:13,label:"13"},{value:21,label:"21"}],onChange:(r,i)=>t.onChangeScale(i)})})})]}):null},rpe=It.div`
  width: 100%;
  height: 100%;
  border-radius: 8px;
`,ipe=It(ar)`
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  justify-content: center;
  align-items: center;
  align-content: center;
  border-radius: 8px;
  background-color: #f5f5f5;
`,spe=It(ar)`
  position: absolute;
  bottom: 5px;
  width: 100%;
  display: flex;
  justify-content: center;
`,ope={[qo.ManufactureShare]:K(N8,{}),[qo.AgricultureShare]:K(hfe,{}),[qo.PriceIndex]:K(Cfe,{}),[qo.NominalWage]:K(Ife,{}),[qo.RealWage]:K(dfe,{})},ape=Object.values(VZ).map(t=>({label:t,icon:ope[t],value:t})),lpe=It(ar)`
  display: flex;
  align-items: center;
  margin: 0;
`,cpe=It(ar)`
  justify-content: center;
  margin-right: 8px;
  vertical-align: middle;
`;function upe(t){return Ft(qae,{size:"small",children:[K(mle,{id:"select-label",children:"Chart"}),K($ce,{labelId:"select-label",id:"chart-title-select",value:t.chartType,label:"title",onChange:e=>t.onChangeChartType(e.target.value),children:ape.map(e=>K(ace,{value:e.value,children:Ft(lpe,{children:[K(cpe,{children:e.icon}),K(Mle,{children:e.label})]})},e.value))})]})}const hpe=An.memo(t=>{const[e,n]=P.useState(!1);return Ft(rpe,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[K(npe,{shown:e||!Zfe(),scale:t.scale,onChangeScale:t.onChangeScale}),K(ipe,{children:t.children}),K(spe,{children:K(upe,{chartType:t.chartType,onChangeChartType:t.onChangeChartType})})]})}),dpe={"Share of Manufacturing":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.01,lineDash:[3,3]}],bar:t=>t.manufactureShare,toFixed:2},"Share of Agriculture":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.25,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.02,lineDash:[5,3]}],bar:t=>t.agricultureShare,toFixed:2},"Price Index":{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]}],line:t=>t.priceIndex,toFixed:2},"Nominal Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.95,max:1.05,step:.005,lineDash:[5,5]}],line:t=>t.nominalWage,toFixed:3},"Real Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.9,max:1.1,step:.01,lineDash:[5,5]},{min:.95,max:1.05,step:.005,lineDash:[3,3]}],line:t=>t.realWage,toFixed:3}},jv=32,Ir=48,Gv=32,ri=95,dF="#f5f5f5",fpe=(t,e,n,r,i,s,o)=>{if(t.textAlign="left",r<=20)for(let l=0;l<r;l+=1){const c=n+(l+.5)*e-(l<10?4:8);s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}else for(let l=10;l<r;l+=10){const c=n/2+l*e;s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}},ppe=An.memo(({width:t,height:e,chartTypeKey:n,scale:r,locations:i,focusedIndices:s,selectedIndices:o,onFocus:a,onUnfocus:l,onSelect:c,onUnselect:u})=>{const h=P.useRef(null),[f,g]=P.useState(null),m=v=>{if(!i||i.length===0)return null;const E=(t-Ir-Gv)/i.length;if(v){if(v.x<Ir)return null;for(let S=0;S<i.length;S++)if(v.x<Ir+(S+1)*E)return S}return null},y=(v,E)=>{E.clearRect(0,0,v.width,v.height),E.fillStyle=dF,E.fillRect(Ir,0,v.width-Ir-Gv,v.height-ri);const S=dpe[n];if(!S)throw new Error("ERROR ChartTypeKey="+n);if(!i||i.length===0)return;const C=(v.width-Ir-Gv)/i.length;E.textAlign="right";const R=v.width-Ir-Gv,I=v.height-jv-ri,L=j=>O(j,S.max,S.min,I,S.oy,r),O=(j,W,V,U,X=0,Y=1)=>{const Z=(j-X)/(W-V);return U*Y*Z+X*U/2};(()=>{for(let j=0;j<S.ticks.length;j++){const{min:W,max:V,step:U,lineDash:X}=S.ticks[j];E.lineWidth=1,E.setLineDash(X),E.strokeStyle="#ddd";let Y=0;for(let Z=W;Z<=V;Z+=U){const se=v.height-ri-L(Z);0<=se&&se<=v.height-ri&&(E.beginPath(),E.moveTo(Ir,se),E.lineTo(Ir+R,se),E.stroke(),Y++)}if(Y>3)break}E.setLineDash([])})(),i.forEach((j,W)=>{function V(){s.includes(W)&&(E.fillStyle="rgb(255,255,0,0.3)",E.fillRect(Ir+W*C,0,Math.max(C-1,1),v.height-ri))}function U(Z,se){const xe=s.includes(W),de=o.includes(W);(xe||de)&&(E.lineWidth=2,E.strokeStyle=de?"#f83":"#ff0",0<=Z&&Z<=v.height-ri?E.strokeRect(Ir+W*C+2,v.height-ri-Z+2,Math.max(C-1,1)-4,Z-4):v.height-ri<Z&&E.strokeRect(Ir+W*C,0,Math.max(C-1,1),v.height-ri),E.strokeStyle=se)}function X(Z){0<=Z&&Z<=v.height-ri?E.fillRect(Ir+W*C,v.height-ri-Z,Math.max(C-1,1),Z):v.height-ri<Z&&E.fillRect(Ir+W*C,0,Math.max(C-1,1),v.height-ri)}function Y(){const Z=o.includes(W),se=S.bar?S.bar(j):null;if(se!==null){const xe=se<0?"#88e":Z?"#ff8":"rgb(25,118,210)";E.strokeStyle=E.fillStyle=xe;const de=L(se);X(de),U(de,xe)}}V(),Y()});function M(){E.beginPath(),i.forEach((j,W)=>{const V=S.line?S.line(j):null;if(V!==null){const U=v.height-ri-L(V);E.strokeStyle="#88e",E.lineWidth=2,W===0?E.moveTo(Ir+(W+.5)*C,U):E.lineTo(Ir+(W+.5)*C,U);const X=s.includes(W),Y=o.includes(W);(X||Y)&&(E.save(),E.fillStyle=X&&Y?"red":"blue",E.fillRect(Ir+(W+.5)*C-3,U-3,6,6),E.restore())}}),E.stroke()}M();const D=()=>{for(let j=0;j<S.ticks.length;j++){const{min:W,max:V,step:U}=S.ticks[j];let X=0;for(let Y=W;Y<=V;Y+=U){const Z=v.height-ri-L(Y);if(jv<=Z&&Z<=v.height-jv+ri){E.fillStyle="#888";const se=Y.toFixed(S.toFixed);E.fillText(se,Ir-6,Z),X++}}if(X>3)break}};E.fillStyle=dF,E.fillRect(0,0,v.width,jv),D(),fpe(E,C,Ir,i.length,v.height-ri+13,s,o);function N(j){j!==null&&s.includes(j)&&f!==null&&(E.fillStyle="rgb(10,10,10,0.3)",E.fillRect(Math.min(t-230,f.x),f.y+12,230,20),E.fillStyle="rgb(255,255,255,1)",E.textAlign="left",E.fillText(i[j].label,Math.min(t-230+16,f.x+8),f.y+26))}N(m(f))},x=P.useCallback(v=>{const E=h.current,S=m({x:v.offsetX,y:v.offsetY});S===null?l(s):s.includes(S)?E.style.cursor="pointer":(E.style.cursor="pointer",l(s),a([S])),g({x:v.offsetX,y:v.offsetY})},[h.current,s]),b=P.useCallback(v=>{h.current,m({x:v.offsetX,y:v.offsetY}),s.length>0&&l(s)},[h.current,s]),w=P.useCallback(v=>{h.current;const E=m({x:v.offsetX,y:v.offsetY});E!==null&&(o.includes(E)?u(o,[E]):c(o,[E]))},[h.current,o]);return P.useEffect(()=>{const v=h.current;v.onmousemove=x,v.onmouseleave=b,v.onmousedown=w},[h.current,x,b,w]),P.useEffect(()=>{const E=h.current.getContext("2d");if(!E)throw new Error("Canvas2D is not supported");y(h.current,E)},[r,t,e,n,s,o,i]),K("canvas",{ref:h,width:t,height:e})}),fF=({sessionState:t,uiState:e,setSessionChartType:n,setSessionChartScale:r,onSelect:i,onUnselect:s,onFocus:o,onUnfocus:a})=>K(hpe,{onChangeChartType:n,onChangeScale:r,scale:e==null?void 0:e.chartScale,chartType:e==null?void 0:e.chartType,children:K(ppe,{width:300,height:300,chartTypeKey:e==null?void 0:e.chartType,scale:e==null?void 0:e.chartScale,locations:t==null?void 0:t.locations,focusedIndices:e==null?void 0:e.focusedIndices,selectedIndices:e==null?void 0:e.selectedIndices,onFocus:o,onUnfocus:a,onSelect:i,onUnselect:s})}),gpe=()=>Ft(ar,{style:{display:"flex",gap:"10px"},children:[K(eA,{variant:"contained",startIcon:K(vfe,{}),title:"Import a simulation from a file",children:"Import"}),K(eA,{variant:"contained",startIcon:K(yfe,{}),title:"Export a simulation from a file",children:"Export"})]}),Lw=It(Wc)`
  background-color: rgba(255, 255, 255, 0.5);
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  border-radius: 20px;
  border: 1px solid gray;
  z-index: 101;
`,mpe=It(Lw)``,ype=It(Lw)``,vpe=It(Lw)``,bpe=It(Lw)``,_pe=t=>{var e,n,r,i;return Ft(ar,{style:{display:"flex",gap:"10px"},children:[K(mpe,{id:"addNodeButton",disabled:!((e=t.state)!=null&&e.addLocation),color:"primary",title:"Add a location",onClick:t.onAddLocation,children:K(gfe,{})}),K(ype,{id:"removeNodeButton",disabled:!((n=t.state)!=null&&n.removeLocation),color:"primary",title:"Remove selected location(s)",onClick:t.onRemoveLocation,children:Ft(r_,{children:[K("path",{d:"M18 11h-2v2h2z"}),K("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2z"}),K("path",{d:"m21.398 15.596-1.662 1.664-1.63-1.631-1.413 1.41 1.631 1.63-1.795 1.798 1.41 1.41 1.795-1.795 1.83 1.828 1.41-1.412-1.828-1.828 1.665-1.664-1.413-1.41z"})]})}),K(vpe,{id:"addEdgeButton",disabled:!((r=t.state)!=null&&r.addEdge),color:"primary",title:"Add edge(s) between selected locations",onClick:t.onAddEdge,children:K(ufe,{})}),K(bpe,{id:"removeEdgeButton",disabled:!((i=t.state)!=null&&i.removeEdge),color:"primary",title:"Remove edge(s) between selected locations",onClick:t.onRemoveEdge,children:K(Rfe,{})})]})};function xpe(t){return{layout:{i:"BackgroundPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],static:!0},resource:{id:"BackgroundPanel",type:In.BackgroundPanel,shown:!0}}}const wpe=({type:t,sessionState:e,setSessionState:n,onAddBulkLocations:r,onRemoveBulkLocations:i})=>{const s=P.useCallback(u=>{n(h=>(h.parameterSet=kf[t].find(f=>f.caseId===u)||h.parameterSet,h),!0,"changeCase")},[n]),o=P.useCallback((u,h)=>{n(f=>{f.parameterSet.manufactureShare=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),a=P.useCallback((u,h)=>{n(f=>{f.parameterSet.transportationCost=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),l=P.useCallback((u,h)=>{n(f=>{f.parameterSet.elasticitySubstitution=u},h||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),c=P.useCallback((u,h)=>{u<e.locations.length?i(u,h):e.locations.length<u&&(console.log("onAddBulkLocations",u),r(u,h))},[]);return{onParameterSetChange:s,setManufactureShare:o,setTransportationCost:a,setElasticitySubstitution:l,setNumLocations:c}};class Epe{constructor(){this.controller=null}async runAsyncFunction(e){this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal,e()}async cancelAll(){this.controller&&this.controller.abort()}}const Tpe=()=>K(ar,{style:{display:"flex",gap:"10px"}});var Z8={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Z8);var Q8=Z8.exports;const Spe=["element"];function Cpe(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}function Ppe(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2);if(t[i].element===e)return i;t[i].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?r=i-1:n=i+1}return n}const J8=P.createContext({});function Ape(t){const e=P.useRef(null);return P.useEffect(()=>{e.current=t},[t]),e.current}const pF=()=>{};function Rpe(t){const[,e]=P.useState(),{registerDescendant:n=pF,unregisterDescendant:r=pF,descendants:i=[],parentId:s=null}=P.useContext(J8),o=Cpe(i,c=>c.element===t.element),a=Ape(i),l=i.some((c,u)=>a&&a[u]&&a[u].element!==c.element);return $s(()=>{if(t.element)return n($({},t,{index:o})),()=>{r(t.element)};e({})},[n,r,o,l,t]),{parentId:s,index:o}}function eG(t){const{children:e,id:n}=t,[r,i]=P.useState([]),s=P.useCallback(l=>{let{element:c}=l,u=Qe(l,Spe);i(h=>{if(h.length===0)return[$({},u,{element:c,index:0})];const f=Ppe(h,c);let g;if(h[f]&&h[f].element===c)g=h;else{const m=$({},u,{element:c,index:f});g=h.slice(),g.splice(f,0,m)}return g.forEach((m,y)=>{m.index=y}),g})},[]),o=P.useCallback(l=>{i(c=>c.filter(u=>l!==u.element))},[]),a=P.useMemo(()=>({descendants:r,registerDescendant:s,unregisterDescendant:o,parentId:n}),[r,s,o,n]);return Q.jsx(J8.Provider,{value:a,children:e})}const tG={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},nG=P.createContext(tG),rG=()=>P.useContext(nG);function Ipe(t){const{instance:e,multiSelect:n}=rG(),r=e?e.isNodeExpandable(t):!1,i=e?e.isNodeExpanded(t):!1,s=e?e.isNodeFocused(t):!1,o=e?e.isNodeSelected(t):!1,a=e?e.isNodeDisabled(t):!1;return{disabled:a,expanded:i,selected:o,focused:s,handleExpansion:h=>{if(e&&!a){s||e.focusNode(h,t);const f=n&&(h.shiftKey||h.ctrlKey||h.metaKey);r&&!(f&&e.isNodeExpanded(t))&&e.toggleNodeExpansion(h,t)}},handleSelection:h=>{e&&!a&&(s||e.focusNode(h,t),n&&(h.shiftKey||h.ctrlKey||h.metaKey)?h.shiftKey?e.selectRange(h,{end:t}):e.selectNode(h,t,!0):e.selectNode(h,t))},preventSelection:h=>{(h.shiftKey||h.ctrlKey||h.metaKey||a)&&h.preventDefault()}}}const Mpe=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],iG=P.forwardRef(function(e,n){const{classes:r,className:i,displayIcon:s,expansionIcon:o,icon:a,label:l,nodeId:c,onClick:u,onMouseDown:h}=e,f=Qe(e,Mpe),{disabled:g,expanded:m,selected:y,focused:x,handleExpansion:b,handleSelection:w,preventSelection:v}=Ipe(c),E=a||o||s,S=R=>{v(R),h&&h(R)},C=R=>{b(R),w(R),u&&u(R)};return Q.jsxs("div",$({},f,{className:at(i,r.root,m&&r.expanded,y&&r.selected,x&&r.focused,g&&r.disabled),onClick:C,onMouseDown:S,ref:n,children:[Q.jsx("div",{className:r.iconContainer,children:E}),Q.jsx("div",{className:r.label,children:l})]}))});function Ope(t){return jt("MuiTreeItem",t)}const ao=Bt("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),Lpe=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],kpe=t=>{const{classes:e}=t;return $t({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},Ope,e)},Dpe=Be("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),Npe=Be(iG,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${ao.iconContainer}`]:e.iconContainer},e.label&&{[`& .${ao.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ao.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${ao.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ao.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${ao.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${ao.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${ao.label}`]:$({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1)})),Fpe=Be(gj,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),Bpe=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiTreeItem"}),{children:i,className:s,collapseIcon:o,ContentComponent:a=iG,ContentProps:l,endIcon:c,expandIcon:u,disabled:h,icon:f,id:g,label:m,nodeId:y,onClick:x,onMouseDown:b,TransitionComponent:w=gj,TransitionProps:v}=r,E=Qe(r,Lpe),{icons:S,multiSelect:C,disabledItemsFocusable:R,treeId:I,instance:L}=rG();let O;g!=null?O=g:I&&y&&(O=`${I}-${y}`);const[B,M]=P.useState(null),D=P.useRef(null),N=Vn(M,n),j=P.useMemo(()=>({element:B,id:y}),[y,B]),{index:W,parentId:V}=Rpe(j),U=!!(Array.isArray(i)?i.length:i),X=L?L.isNodeExpanded(y):!1,Y=L?L.isNodeFocused(y):!1,Z=L?L.isNodeSelected(y):!1,se=L?L.isNodeDisabled(y):!1,xe=$({},r,{expanded:X,focused:Y,selected:Z,disabled:se}),de=kpe(xe);let Me,he;U&&(X?he=o||S.defaultCollapseIcon:he=u||S.defaultExpandIcon),U?Me=S.defaultParentIcon:Me=c||S.defaultEndIcon,P.useEffect(()=>{if(L&&W!==-1)return L.updateNode({id:y,idAttribute:O,index:W,parentId:V,expandable:U,disabled:h}),()=>L.removeNode(y)},[L,V,W,y,U,h,O]),P.useEffect(()=>{if(L&&m){var ae,me;return L.mapFirstChar(y,((ae=(me=D.current)==null?void 0:me.textContent)!=null?ae:"").substring(0,1).toLowerCase())}},[L,y,m]);let Se;C?Se=Z:Z&&(Se=!0);function le(ae){if(ae.target===ae.currentTarget){let oe;typeof ae.target.getRootNode=="function"?oe=ae.target.getRootNode():oe=or(ae.target),oe.getElementById(I).focus({preventScroll:!0})}const me=!R&&se;L&&!Y&&ae.currentTarget===ae.target&&!me&&L.focusNode(ae,y)}return Q.jsxs(Dpe,$({className:at(de.root,s),role:"treeitem","aria-expanded":U?X:void 0,"aria-selected":Se,"aria-disabled":se||void 0,id:O,tabIndex:-1},E,{ownerState:xe,onFocus:le,ref:N,children:[Q.jsx(Npe,$({as:a,ref:D,classes:{root:de.content,expanded:de.expanded,selected:de.selected,focused:de.focused,disabled:de.disabled,iconContainer:de.iconContainer,label:de.label},label:m,nodeId:y,onClick:x,onMouseDown:b,icon:f,expansionIcon:he,displayIcon:Me,ownerState:xe},l)),i&&Q.jsx(eG,{id:y,children:Q.jsx(Fpe,$({as:w,unmountOnExit:!0,className:de.group,in:X,component:"ul",role:"group"},v,{children:i}))})]}))});function zpe(t){return jt("MuiTreeView",t)}Bt("MuiTreeView",["root"]);const Upe=(t,e)=>{const n=P.useRef({}),[r,i]=P.useState(()=>{const o={};return t.forEach(a=>{a.models&&Object.entries(a.models).forEach(([l,c])=>{n.current[l]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:e[c.controlledProp]!==void 0},o[l]=e[c.defaultProp]})}),o});return Object.fromEntries(Object.entries(n.current).map(([o,a])=>{const l=a.isControlled?e[a.controlledProp]:r[o];return[o,{value:l,setValue:c=>{a.isControlled||i(u=>$({},u,{[o]:c}))}}]}))};let $pe=class{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,n,r={}){let i=this.events[e];i||(i={highPriority:new Map,regular:new Map},this.events[e]=i),r.isFirst?i.highPriority.set(n,!0):i.regular.set(n,!0)}removeListener(e,n){this.events[e]&&(this.events[e].regular.delete(n),this.events[e].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(e,...n){const r=this.events[e];if(!r)return;const i=Array.from(r.highPriority.keys()),s=Array.from(r.regular.keys());for(let o=i.length-1;o>=0;o-=1){const a=i[o];r.highPriority.has(a)&&a.apply(this,n)}for(let o=0;o<s.length;o+=1){const a=s[o];r.regular.has(a)&&a.apply(this,n)}}once(e,n){const r=this;this.on(e,function i(...s){r.removeListener(e,i),n.apply(r,s)})}};const uS=(t,e)=>{const n=t.getNode(e),r=t.getNavigableChildrenIds(n.parentId),i=r.indexOf(e);if(i===0)return n.parentId;let s=r[i-1];for(;t.isNodeExpanded(s)&&t.getNavigableChildrenIds(s).length>0;)s=t.getNavigableChildrenIds(s).pop();return s},kg=(t,e)=>{if(t.isNodeExpanded(e)&&t.getNavigableChildrenIds(e).length>0)return t.getNavigableChildrenIds(e)[0];let n=t.getNode(e);for(;n!=null;){const r=t.getNavigableChildrenIds(n.parentId),i=r[r.indexOf(n.id)+1];if(i)return i;n=t.getNode(n.parentId)}return null},mA=t=>{let e=t.getNavigableChildrenIds(null).pop();for(;t.isNodeExpanded(e);)e=t.getNavigableChildrenIds(e).pop();return e},yA=t=>t.getNavigableChildrenIds(null)[0],gp=(t,e)=>{Object.assign(t,e)},jpe=t=>t.isPropagationStopped!==void 0,Gpe=({instance:t})=>{const[e]=P.useState(()=>new $pe),n=P.useCallback((...i)=>{const[s,o,a={}]=i;a.defaultMuiPrevented=!1,!(jpe(a)&&a.isPropagationStopped())&&e.emit(s,o,a)},[e]),r=P.useCallback((i,s)=>(e.on(i,s),()=>{e.removeListener(i,s)}),[e]);gp(t,{$$publishEvent:n,$$subscribeEvent:r})},Hpe=[Gpe],Vpe=t=>{const e=[...Hpe,...t.plugins],n=e.reduce((m,y)=>y.getDefaultizedParams?y.getDefaultizedParams(m):m,t),r=Upe(e,n),s=P.useRef({}).current,o=P.useRef(null),a=Vn(o,t.rootRef),[l,c]=P.useState(()=>{const m={};return e.forEach(y=>{y.getInitialState&&Object.assign(m,y.getInitialState(n))}),m}),u=[];let h=tG;const f=m=>{const y=m({instance:s,params:n,state:l,setState:c,rootRef:o,models:r})||{};y.getRootProps&&u.push(y.getRootProps),y.contextValue&&(h=y.contextValue)};return e.forEach(f),{getRootProps:(m={})=>{const y=$({role:"tree",tabIndex:0},m,{ref:a});return u.forEach(x=>{Object.assign(y,x(m))}),y},rootRef:a,contextValue:h}};function Wpe(t){const{value:e,children:n}=t;return Q.jsx(nG.Provider,{value:e,children:Q.jsx(eG,{children:n})})}const Xpe=(t,e,n)=>{t.$$publishEvent(e,n)},Ype=({instance:t,params:e})=>{const n=P.useRef({}),r=P.useCallback(c=>n.current[c],[]),i=P.useCallback(c=>{n.current[c.id]=c},[]),s=P.useCallback(c=>{const u=$({},n.current);delete u[c],n.current=u,Xpe(t,"removeNode",{id:c})},[t]),o=P.useCallback(c=>{if(c==null)return!1;let u=t.getNode(c);if(!u)return!1;if(u.disabled)return!0;for(;u.parentId!=null;)if(u=t.getNode(u.parentId),u.disabled)return!0;return!1},[t]),a=Pi(c=>Object.values(n.current).filter(u=>u.parentId===c).sort((u,h)=>u.index-h.index).map(u=>u.id));gp(t,{getNode:r,updateNode:i,removeNode:s,getChildrenIds:a,getNavigableChildrenIds:c=>{let u=t.getChildrenIds(c);return e.disabledItemsFocusable||(u=u.filter(h=>!t.isNodeDisabled(h))),u},isNodeDisabled:o})},mM=({instance:t,params:e,models:n})=>{const r=P.useCallback(a=>Array.isArray(n.expanded.value)?n.expanded.value.indexOf(a)!==-1:!1,[n.expanded.value]),i=P.useCallback(a=>{var l;return!!((l=t.getNode(a))!=null&&l.expandable)},[t]),s=Pi((a,l)=>{if(l==null)return;let c;n.expanded.value.indexOf(l)!==-1?c=n.expanded.value.filter(u=>u!==l):c=[l].concat(n.expanded.value),e.onNodeToggle&&e.onNodeToggle(a,c),n.expanded.setValue(c)});gp(t,{isNodeExpanded:r,isNodeExpandable:i,toggleNodeExpansion:s,expandAllSiblings:(a,l)=>{const c=t.getNode(l),h=t.getChildrenIds(c.parentId).filter(g=>t.isNodeExpandable(g)&&!t.isNodeExpanded(g)),f=n.expanded.value.concat(h);h.length>0&&(n.expanded.setValue(f),e.onNodeToggle&&e.onNodeToggle(a,f))}})};mM.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const qpe=[];mM.getDefaultizedParams=t=>{var e;return $({},t,{defaultExpanded:(e=t.defaultExpanded)!=null?e:qpe})};const Kpe=(t,e,n)=>{if(e===n)return[e,n];const r=t.getNode(e),i=t.getNode(n);if(r.parentId===i.id||i.parentId===r.id)return i.parentId===r.id?[r.id,i.id]:[i.id,r.id];const s=[r.id],o=[i.id];let a=r.parentId,l=i.parentId,c=o.indexOf(a)!==-1,u=s.indexOf(l)!==-1,h=!0,f=!0;for(;!u&&!c;)h&&(s.push(a),c=o.indexOf(a)!==-1,h=a!==null,!c&&h&&(a=t.getNode(a).parentId)),f&&!c&&(o.push(l),u=s.indexOf(l)!==-1,f=l!==null,!u&&f&&(l=t.getNode(l).parentId));const g=c?a:l,m=t.getChildrenIds(g),y=s[s.indexOf(g)-1],x=o[o.indexOf(g)-1];return m.indexOf(y)<m.indexOf(x)?[e,n]:[n,e]},yM=({instance:t,params:e,models:n})=>{const r=P.useRef(null),i=P.useRef(!1),s=P.useRef([]),o=m=>Array.isArray(n.selected.value)?n.selected.value.indexOf(m)!==-1:n.selected.value===m,a=(m,y,x=!1)=>{if(!e.disableSelection){if(x){if(Array.isArray(n.selected.value)){let b;n.selected.value.indexOf(y)!==-1?b=n.selected.value.filter(w=>w!==y):b=[y].concat(n.selected.value),e.onNodeSelect&&e.onNodeSelect(m,b),n.selected.setValue(b)}}else{const b=e.multiSelect?[y]:y;e.onNodeSelect&&e.onNodeSelect(m,b),n.selected.setValue(b)}r.current=y,i.current=!1,s.current=[]}},l=(m,y)=>{const[x,b]=Kpe(t,m,y),w=[x];let v=x;for(;v!==b;)v=kg(t,v),w.push(v);return w},c=(m,y)=>{let x=n.selected.value.slice();const{start:b,next:w,current:v}=y;!w||!v||(s.current.indexOf(v)===-1&&(s.current=[]),i.current?s.current.indexOf(w)!==-1?(x=x.filter(E=>E===b||E!==v),s.current=s.current.filter(E=>E===b||E!==v)):(x.push(w),s.current.push(w)):(x.push(w),s.current.push(v,w)),e.onNodeSelect&&e.onNodeSelect(m,x),n.selected.setValue(x))},u=(m,y)=>{let x=n.selected.value.slice();const{start:b,end:w}=y;i.current&&(x=x.filter(S=>s.current.indexOf(S)===-1));let v=l(b,w);v=v.filter(S=>!t.isNodeDisabled(S)),s.current=v;let E=x.concat(v);E=E.filter((S,C)=>E.indexOf(S)===C),e.onNodeSelect&&e.onNodeSelect(m,E),n.selected.setValue(E)};return gp(t,{isNodeSelected:o,selectNode:a,selectRange:(m,y,x=!1)=>{if(e.disableSelection)return;const{start:b=r.current,end:w,current:v}=y;x?c(m,{start:b,next:w,current:v}):b!=null&&w!=null&&u(m,{start:b,end:w}),i.current=!0},rangeSelectToLast:(m,y)=>{r.current||(r.current=y);const x=i.current?r.current:y;t.selectRange(m,{start:x,end:mA(t)})},rangeSelectToFirst:(m,y)=>{r.current||(r.current=y);const x=i.current?r.current:y;t.selectRange(m,{start:x,end:yA(t)})}}),{getRootProps:()=>({"aria-multiselectable":e.multiSelect})}};yM.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const Zpe=[];yM.getDefaultizedParams=t=>{var e,n,r;return $({},t,{disableSelection:(e=t.disableSelection)!=null?e:!1,multiSelect:(n=t.multiSelect)!=null?n:!1,defaultSelected:(r=t.defaultSelected)!=null?r:t.multiSelect?Zpe:null})};const gF=1e3;class Qpe{constructor(e=gF){this.timeouts=new Map,this.cleanupTimeout=gF,this.cleanupTimeout=e}register(e,n,r){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,i)}unregister(e){const n=this.timeouts.get(e.cleanupToken);n&&(this.timeouts.delete(e.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((e,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Jpe{constructor(){this.registry=new FinalizationRegistry(e=>{typeof e=="function"&&e()})}register(e,n,r){this.registry.register(e,n,r)}unregister(e){this.registry.unregister(e)}reset(){}}class ege{}function tge(t){let e=0;return function(r,i,s){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new Jpe:new Qpe);const[o]=P.useState(new ege),a=P.useRef(null),l=P.useRef();l.current=s;const c=P.useRef(null);if(!a.current&&l.current){const u=(h,f)=>{if(!f.defaultMuiPrevented){var g;(g=l.current)==null||g.call(l,h,f)}};a.current=r.$$subscribeEvent(i,u),e+=1,c.current={cleanupToken:e},t.registry.register(o,()=>{var h;(h=a.current)==null||h.call(a),a.current=null,c.current=null},c.current)}else!l.current&&a.current&&(a.current(),a.current=null,c.current&&(t.registry.unregister(c.current),c.current=null));P.useEffect(()=>{if(!a.current&&l.current){const u=(h,f)=>{if(!f.defaultMuiPrevented){var g;(g=l.current)==null||g.call(l,h,f)}};a.current=r.$$subscribeEvent(i,u)}return c.current&&t.registry&&(t.registry.unregister(c.current),c.current=null),()=>{var u;(u=a.current)==null||u.call(a),a.current=null}},[r,i])}}const nge={registry:null},rge=tge(nge),vM=({instance:t,params:e,state:n,setState:r,models:i,rootRef:s})=>{const o=Pi(g=>{const m=typeof g=="function"?g(n.focusedNodeId):g;r(y=>$({},y,{focusedNodeId:m}))}),a=P.useCallback(g=>n.focusedNodeId===g,[n.focusedNodeId]),l=Pi((g,m)=>{m&&(o(m),e.onNodeFocus&&e.onNodeFocus(g,m))});gp(t,{isNodeFocused:a,focusNode:l}),rge(t,"removeNode",({id:g})=>{o(m=>m===g&&s.current===or(s.current).activeElement?t.getChildrenIds(null)[0]:m)});const c=g=>m=>{var y;if((y=g.onFocus)==null||y.call(g,m),m.target===m.currentTarget){const x=w=>{const v=t.getNode(w);return v&&(v.parentId==null||t.isNodeExpanded(v.parentId))};let b;Array.isArray(i.selected.value)?b=i.selected.value.find(x):i.selected.value!=null&&x(i.selected.value)&&(b=i.selected.value),b==null&&(b=t.getNavigableChildrenIds(null)[0]),t.focusNode(m,b)}},u=g=>m=>{var y;(y=g.onBlur)==null||y.call(g,m),o(null)},h=t.getNode(n.focusedNodeId),f=h?h.idAttribute:null;return{getRootProps:g=>({onFocus:c(g),onBlur:u(g),"aria-activedescendant":f??void 0})}};vM.getInitialState=()=>({focusedNodeId:null});vM.getDefaultizedParams=t=>{var e;return $({},t,{disabledItemsFocusable:(e=t.disabledItemsFocusable)!=null?e:!1})};function ige(t){return t&&t.length===1&&t.match(/\S/)}function mF(t,e,n){for(let r=e;r<t.length;r+=1)if(n===t[r])return r;return-1}const sge=({instance:t,params:e,state:n})=>{const i=uu().direction==="rtl",s=P.useRef({}),o=Pi((g,m)=>(s.current[g]=m,()=>{const y=$({},s.current);delete y[g],s.current=y}));gp(t,{mapFirstChar:o});const a=g=>(n.focusedNodeId!=null&&t.isNodeExpandable(n.focusedNodeId)&&(t.isNodeExpanded(n.focusedNodeId)?t.focusNode(g,kg(t,n.focusedNodeId)):t.isNodeDisabled(n.focusedNodeId)||t.toggleNodeExpansion(g,n.focusedNodeId)),!0),l=g=>{if(n.focusedNodeId==null)return!1;if(t.isNodeExpanded(n.focusedNodeId)&&!t.isNodeDisabled(n.focusedNodeId))return t.toggleNodeExpansion(g,n.focusedNodeId),!0;const m=t.getNode(n.focusedNodeId).parentId;return m?(t.focusNode(g,m),!0):!1},c=(g,m,y)=>{let x,b;const w=y.toLowerCase(),v=[],E=[];Object.keys(s.current).forEach(S=>{const C=t.getNode(S),R=C.parentId?t.isNodeExpanded(C.parentId):!0,I=e.disabledItemsFocusable?!1:t.isNodeDisabled(S);R&&!I&&(v.push(S),E.push(s.current[S]))}),x=v.indexOf(m)+1,x>=v.length&&(x=0),b=mF(E,x,w),b===-1&&(b=mF(E,0,w)),b>-1&&t.focusNode(g,v[b])},u=(g,m)=>{t.isNodeDisabled(kg(t,m))||t.selectRange(g,{end:kg(t,m),current:m},!0)},h=(g,m)=>{t.isNodeDisabled(uS(t,m))||t.selectRange(g,{end:uS(t,m),current:m},!0)},f=g=>m=>{var y;(y=g.onKeyDown)==null||y.call(g,m);let x=!1;const b=m.key;if(m.altKey||m.currentTarget!==m.target||n.focusedNodeId==null)return;const w=m.ctrlKey||m.metaKey;switch(b){case" ":!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&(x=!0,e.multiSelect&&m.shiftKey?t.selectRange(m,{end:n.focusedNodeId}):e.multiSelect?t.selectNode(m,n.focusedNodeId,!0):t.selectNode(m,n.focusedNodeId)),m.stopPropagation();break;case"Enter":t.isNodeDisabled(n.focusedNodeId)||(t.isNodeExpandable(n.focusedNodeId)?(t.toggleNodeExpansion(m,n.focusedNodeId),x=!0):e.disableSelection||(x=!0,e.multiSelect?t.selectNode(m,n.focusedNodeId,!0):t.selectNode(m,n.focusedNodeId))),m.stopPropagation();break;case"ArrowDown":e.multiSelect&&m.shiftKey&&!e.disableSelection&&u(m,n.focusedNodeId),t.focusNode(m,kg(t,n.focusedNodeId)),x=!0;break;case"ArrowUp":e.multiSelect&&m.shiftKey&&!e.disableSelection&&h(m,n.focusedNodeId),t.focusNode(m,uS(t,n.focusedNodeId)),x=!0;break;case"ArrowRight":i?x=l(m):x=a(m);break;case"ArrowLeft":i?x=a(m):x=l(m);break;case"Home":e.multiSelect&&w&&m.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToFirst(m,n.focusedNodeId),t.focusNode(m,yA(t)),x=!0;break;case"End":e.multiSelect&&w&&m.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToLast(m,n.focusedNodeId),t.focusNode(m,mA(t)),x=!0;break;default:b==="*"?(t.expandAllSiblings(m,n.focusedNodeId),x=!0):e.multiSelect&&w&&b.toLowerCase()==="a"&&!e.disableSelection?(t.selectRange(m,{start:yA(t),end:mA(t)}),x=!0):!w&&!m.shiftKey&&ige(b)&&(c(m,n.focusedNodeId,b),x=!0)}x&&(m.preventDefault(),m.stopPropagation())};return{getRootProps:g=>({onKeyDown:f(g)})}},oge=({instance:t,params:e})=>{const n=Qx(e.id);return{getRootProps:()=>({id:n}),contextValue:{treeId:n,instance:t,multiSelect:e.multiSelect,disabledItemsFocusable:e.disabledItemsFocusable,icons:{defaultCollapseIcon:e.defaultCollapseIcon,defaultEndIcon:e.defaultEndIcon,defaultExpandIcon:e.defaultExpandIcon,defaultParentIcon:e.defaultParentIcon}}}},age=[Ype,mM,yM,vM,sge,oge],lge=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],cge=t=>{const{classes:e}=t;return $t({root:["root"]},zpe,e)},yF=Be("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0}),uge=P.forwardRef(function(e,n){const r=Vt({props:e,name:"MuiTreeView"}),i=r,s=r,{disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:h,defaultSelected:f,selected:g,multiSelect:m,onNodeSelect:y,id:x,defaultCollapseIcon:b,defaultEndIcon:w,defaultExpandIcon:v,defaultParentIcon:E,children:S}=s,C=Qe(s,lge),{getRootProps:R,contextValue:I}=Vpe({disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:h,defaultSelected:f,selected:g,multiSelect:m,onNodeSelect:y,id:x,defaultCollapseIcon:b,defaultEndIcon:w,defaultExpandIcon:v,defaultParentIcon:E,plugins:age,rootRef:n}),L=cge(r),O=Ei({elementType:yF,externalSlotProps:{},externalForwardedProps:C,className:L.root,getSlotProps:R,ownerState:i});return Q.jsx(Wpe,{value:I,children:Q.jsx(yF,$({},O,{children:S}))})});var bM={},hS={};const hge=dn($ne);var vF;function sG(){return vF||(vF=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=hge}(hS)),hS}var dge=Q8;Object.defineProperty(bM,"__esModule",{value:!0});var oG=bM.default=void 0,fge=dge(sG()),pge=Q;oG=bM.default=(0,fge.default)((0,pge.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var _M={},gge=Q8;Object.defineProperty(_M,"__esModule",{value:!0});var aG=_M.default=void 0,mge=gge(sG()),yge=Q;aG=_M.default=(0,mge.default)((0,yge.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const vge=Be(Bpe)(({theme:t})=>({color:t.palette.text.secondary,[`& .${ao.content}`]:{color:t.palette.text.secondary,borderTopRightRadius:t.spacing(2),borderBottomRightRadius:t.spacing(2),paddingRight:t.spacing(1),fontWeight:t.typography.fontWeightMedium,"&.Mui-expanded":{fontWeight:t.typography.fontWeightRegular},"&:hover":{backgroundColor:t.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:`var(--tree-view-bg-color, ${t.palette.action.selected})`,color:"var(--tree-view-color)"},[`& .${ao.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${ao.group}`]:{marginLeft:0,[`& .${ao.content}`]:{paddingLeft:t.spacing(1)}}})),ug=An.forwardRef(function(e,n){const r=uu(),{bgColor:i,color:s,level:o=1,labelIcon:a,labelInfo:l,labelText:c,colorForDarkMode:u,bgColorForDarkMode:h,...f}=e,g={"--tree-view-color":r.palette.mode!=="dark"?s:u,"--tree-view-bg-color":r.palette.mode!=="dark"?i:h};return K(vge,{label:Ft(ar,{sx:{display:"flex",alignItems:"center",p:.1,marginLeft:(e.level-1)*2,pr:0},children:[K(xae,{onClick:m=>m.stopPropagation()}),K(ar,{component:a,color:"inherit",sx:{mr:.1}}),K(es,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:c}),K(es,{variant:"caption",color:"inherit",children:l})]}),style:g,...f,ref:n})}),bge=()=>K(Nj,{style:{height:"300px",overflowY:"scroll"},children:Ft(uge,{defaultCollapseIcon:K(oG,{}),defaultExpandIcon:K(aG,{}),defaultExpanded:["1","2"],children:[K(ug,{nodeId:"1",level:1,labelText:"Country Shapes",labelIcon:_fe,children:K(ug,{nodeId:"1-1",level:2,labelText:"Region1 Shapes",labelIcon:xfe,children:K(ug,{nodeId:"1-1-1",level:3,labelText:"Region2 Shapes",labelIcon:Ofe})})}),K(ug,{nodeId:"2",level:1,labelText:"Cities",labelIcon:Efe}),K(ug,{nodeId:"3",level:1,labelText:"Routes",labelIcon:G8})]})}),_ge=It.div`
  display: flex;
  gap: 10px;
  align-content: center;
  align-items: center;
`,xge=It.div`
  display: flex;
  gap: 4px;
  margin-top: -5px;
  vertical-align: top;
`,wge=It.div`
  padding-top: 4px;
  margin-left: 10px;
  text-align: center;
  width: 100px;
`,Ege=It(_w)`
  margin-top: 2px;
`;function Hv(t){return Ft(_ge,{children:[K(u_,{title:t.title,children:Ft(wge,{children:[t.icon,Ft(xge,{children:[Ft(es,{children:[t.label," ="]}),K(es,{children:t.value})]})]})}),K(Ege,{"aria-label":t.label,value:t.value,getAriaValueText:e=>`${e}`,step:t.step,marks:t.marks,min:t.min,max:t.max,valueLabelDisplay:"auto",onChange:t.onChange,onChangeCommitted:t.onChangeCommitted})]})}const Tge=It.div`
  margin-left: 0;
  margin-right: 10px;
`,Sge=P.forwardRef((t,e)=>{const{set:n,current:r}=zx(ah);P.useImperativeHandle(e,()=>({resetToDefault(){const g=kf[t.type].find(m=>r.parameterSet.caseId===m.caseId);n(m=>{m.parameterSet.numLocations=g.numLocations,m.parameterSet.manufactureShare=g.manufactureShare,m.parameterSet.transportationCost=g.transportationCost,m.parameterSet.elasticitySubstitution=g.elasticitySubstitution},!0,"resetToDefault")}}));const i=kf[t.type],s=P.useCallback((g,m)=>{t.setNumLocations(m,!1)},[n]),o=P.useCallback((g,m)=>{t.setNumLocations(m,!0)},[n]),a=P.useCallback((g,m)=>{n(y=>{y.parameterSet.manufactureShare=m},!1,"set parameter")},[n]),l=P.useCallback((g,m)=>{n(y=>{y.parameterSet.manufactureShare=m},!0,"set parameter")},[n]),c=P.useCallback((g,m)=>{n(y=>{y.parameterSet.transportationCost=m},!1,"set parameter")},[n]),u=P.useCallback((g,m)=>{n(y=>{y.parameterSet.transportationCost=m},!0,"set parameter")},[n]),h=P.useCallback((g,m)=>{n(y=>{y.parameterSet.elasticitySubstitution=m},!1,"set parameter")},[n]),f=P.useCallback((g,m)=>{n(y=>{y.parameterSet.elasticitySubstitution=m},!0,"set parameter")},[n]);return Ft(Tge,{children:[K(Rue,{exclusive:!0,value:r.parameterSet.caseId,onChange:(g,m)=>{m!==null&&t.onParameterSetChange(m,!0)},sx:{display:"flex",justifyContent:"center",marginTop:"4px",marginBottom:"8px"},children:i.map((g,m)=>K(wue,{size:"small",title:g.title+": "+g.description,value:g.caseId,children:g.title},m))}),K(Hv,{title:"K: The number of locations connected by transportation network.",icon:K(pfe,{}),label:"K",step:1,marks:[{value:1,label:"1"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"60"},{value:80,label:"80"},{value:100,label:"100"}],value:r.parameterSet.numLocations||0,onChange:s,onChangeCommitted:o,min:1,max:100}),K(Hv,{title:": The share of manufacturing goods in expenditure.",icon:K(N8,{}),label:"",step:.01,marks:[{value:0,label:"0"},{value:.2,label:"0.2"},{value:.4,label:"0.4"},{value:.6,label:"0.6"},{value:.8,label:"0.8"},{value:1,label:"1.0"}],value:r.parameterSet.manufactureShare||0,onChange:a,onChangeCommitted:l,min:0,max:1}),K(Hv,{title:": The level of transportation cost among locations. A value of 1 represents no transportation cost, while a value of 10 represents significant transportation cost.",icon:K(j8,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:4,label:"4"},{value:7,label:"7"},{value:10,label:"10"}],value:r.parameterSet.transportationCost||0,onChange:c,onChangeCommitted:u,min:1,max:10}),K(Hv,{title:": The elasticity of substitution among manufactured goods. A value of 1 represents a strong love of variety, while a value of 20 represents a limited love of variety.",icon:K(mfe,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"}],value:r.parameterSet.elasticitySubstitution||0,onChange:h,onChangeCommitted:f,min:1,max:20})]})});function bF({type:t,onParameterSetChange:e,setNumLocations:n}){return K(Sge,{type:t,onParameterSetChange:e,setNumLocations:n})}const Cge=It.div`
  color: black;
  width: 33%;
`,Pge=It.h3`
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 0;
  margin-bottom: 10px;
`,Age=It.div`
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: auto;
`,Rge=It.table`
  border-collapse: collapse;
  border: 0 solid black;
  text-align: center;
  box-shadow: 1px 1px 1px 3px #ccc inset;
  max-height: 40vh;

  th,
  td {
    border: 0 solid white;
    cursor: pointer;
  }

  th {
    background-color: #e0e0e0;

    position: sticky;
    left: 0;
    top: 0; /* Don't forget this, required for the stickiness */
    box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.4);
  }

  th.selected,
  td.selected {
    border: 0 solid #e0e0e0 !important;
  }

  .selected.focused {
    color: red;
  }

  th.focused,
  td.focused {
    color: rgba(100, 100, 0, 1);
  }

  tr:first-of-type > th.selected,
  tr > th:first-of-type.selected {
    border: 0 solid yellow !important;
    background-color: #dd1 !important;
  }

  tr:first-of-type > th.focused,
  tr > th:first-of-type.focused {
    background-color: rgb(255, 255, 0, 1) !important;
  }

  tr:first-of-type > th.focused.selected,
  tr > th:first-of-type.focused.selected {
    background-color: #ff0 !important;
  }
`,Ige=It(ar)`
  flex: 1;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
`;function Mge(t,e,n,r,i){return Nl(e)?i?r?{style:{backgroundColor:"#eee",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#ccc",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#bbb",color:"#ccc"},valueString:""}:e===0?i?{style:{backgroundColor:"#ddd",color:"#833"},valueString:Tv(e)}:{style:{backgroundColor:"#888",color:"#ccc"},valueString:Tv(e)}:i?{style:{backgroundColor:`rgba(${t.r},${t.g},${t.b},${e/n})`,color:"#f33"},valueString:Tv(e)}:{style:{backgroundColor:`rgba(${t.r*.9},${t.g*.9},${t.b*.9},${e/n})`,color:"#ccc"},valueString:Tv(e)}}const dS=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},Vv=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},_F=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},fS=t=>{const e=t.data&&t.data.reduce((r,i)=>Math.max(r,...i.filter(s=>!Nl(s))),0)||0;function n(r){return[r.some(i=>t.focusedIndices.includes(i))?"focused":"",r.some(i=>t.selectedIndices.includes(i))?"selected":""].filter(i=>i!=="").join(" ")}return Ft(Cge,{children:[Ft(Pge,{children:[t.icon,t.title]}),t.data===null?K(Ige,{children:K(GI,{})}):K(Age,{children:K(ar,{className:"fog-added",children:Ft(Rge,{id:t.matrixId,className:t.focused?"focused":"",ref:t.tableRef,children:[K("thead",{children:Ft("tr",{children:[K("th",{}),t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&K("th",{title:t.locations[i].label,onMouseEnter:()=>dS(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseEnter),onMouseLeave:()=>Vv(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseLeave),onMouseDown:()=>_F(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i},i))]})}),K("tbody",{children:t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&Ft("tr",{title:t.locations[i].label,children:[K("th",{onMouseEnter:()=>dS(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseEnter),onMouseLeave:()=>Vv(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseLeave),onMouseDown:()=>Vv(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i}),r.filter((s,o)=>o<=t.maxRowColLength).map((s,o)=>{const{style:a,valueString:l}=i==t.maxRowColLength||o==t.maxRowColLength?{style:{},valueString:"..."}:Mge(t.rgb,s,e,[o,i].some(c=>t.focusedIndices.includes(c)),[o,i].some(c=>t.selectedIndices.includes(c)));return K("td",{title:`(${o}, ${i}) = ${l}`,onMouseEnter:()=>dS(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseEnter),onMouseLeave:()=>Vv(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseLeave),onMouseDown:()=>_F(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseDown),className:i<t.maxRowColLength?n([i,o]):"",style:a,children:l},o+1)})]},i))})]})})})]})},Oge=It.div`
  div.focused > div > table > tbody > tr > td:not(.focused) {
    background-color: #e0e0e0 !important;
    color: #333;
  }
`,Lge=It(ar)`
  font-size: 75%;
  display: flex;
  gap: 20px;
`,kge=P.forwardRef((t,e)=>{var v;const[n,r]=P.useState(null),[i,s]=P.useState([]),o=[P.useRef(null),P.useRef(null),P.useRef(null)],a=(E,S,C)=>{E&&E.rows&&C.forEach(R=>{var I,L,O;R<=S&&((I=E.rows[0].cells[R+1])==null||I.classList.add("selected"),(O=(L=E.rows[R+1])==null?void 0:L.cells[0])==null||O.classList.add("selected"))})},l=(E,S,C)=>{E&&E.rows&&C.forEach(R=>{var I,L,O;R<=S&&((I=E.rows[0].cells[R+1])==null||I.classList.remove("selected"),(O=(L=E.rows[R+1])==null?void 0:L.cells[0])==null||O.classList.remove("selected"))})},c=E=>{y(null,E)},u=E=>{x(null,E)},h=E=>{g(E)},f=E=>{m(E)};P.useImperativeHandle(e,()=>({onFocus:c,onUnfocus:u,onSelect:h,onUnselect:f}));const g=E=>{o.forEach(S=>{a(S.current,t.maxRowColLength,E)})},m=E=>{o.forEach(S=>{l(S.current,t.maxRowColLength,E)})},y=(E,S)=>{r(E),E&&t.onFocus(S.map(C=>C-1))},x=(E,S)=>{r(null),E&&t.onUnfocus(S.map(C=>C-1))},b=(E,S)=>{const C=i,R=S.map(N=>N-1).filter(N=>N>=0),I=new Set(R),L=C.filter(N=>I.has(N)),O=new Set(L),B=C.filter(N=>!O.has(N)),M=R.filter(N=>!O.has(N)),D=B.concat(M);L.length>0&&m(L.map(N=>N)),M.length>0&&g(M.map(N=>N)),s(D)},w=(E,S)=>{o.forEach(R=>{b(R.current,S)});const C=S.map(R=>R-1).filter(R=>0<=R);E&&t.onSelected(i,C)};return K(Oge,{children:Ft(Lge,{className:((v=t.focusedIndices)==null?void 0:v.length)>0?"focused":"",children:[K(fS,{matrixId:"adjacencyMatrix",locations:t.locations,focused:n==="adjacencyMatrix",tableRef:o[0],icon:K(Lfe,{}),title:"Adjacency distances",maxRowColLength:t.maxRowColLength,data:t.adjacencyMatrix,rgb:t.rgb,onMouseEnter:(E,S,C)=>y(E,[S,C]),onMouseLeave:(E,S,C)=>x(E,[S,C]),onMouseDown:(E,S,C)=>w(E,[S,C]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),K(fS,{matrixId:"distanceMatrix",locations:t.locations,focused:n==="distanceMatrix",tableRef:o[1],icon:K(G8,{}),title:"Path distances",maxRowColLength:t.maxRowColLength,data:t.distanceMatrix,rgb:t.rgb,onMouseEnter:(E,S,C)=>y(E,[S,C]),onMouseLeave:(E,S,C)=>x(E,[S,C]),onMouseDown:(E,S,C)=>w(E,[S,C]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),K(fS,{matrixId:"transportationCostMatrix",locations:t.locations,focused:n==="transportationCostMatrix",tableRef:o[2],icon:K(j8,{}),title:"Transportation costs",maxRowColLength:t.maxRowColLength,data:t.transportationCostMatrix,rgb:t.rgb,onMouseEnter:(E,S,C)=>y(E,[S,C]),onMouseLeave:(E,S,C)=>x(E,[S,C]),onMouseDown:(E,S,C)=>w(E,[S,C]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices})]})})}),xF=({sessionState:t,matrices:e,uiState:n,preferences:r,onSelect:i,onFocus:s,onUnfocus:o})=>K(kge,{locations:t==null?void 0:t.locations,maxRowColLength:r==null?void 0:r.maxRowColLength,adjacencyMatrix:e==null?void 0:e.adjacencyMatrix,distanceMatrix:e==null?void 0:e.distanceMatrix,transportationCostMatrix:e==null?void 0:e.transportationCostMatrix,rgb:{r:23,g:111,b:203},selectedIndices:n==null?void 0:n.selectedIndices,focusedIndices:n==null?void 0:n.focusedIndices,onSelected:i,onFocus:s,onUnfocus:o}),Dge=It.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  vertical-align: middle;
  align-content: center;
  align-items: center;
  margin-left: 0;
  margin-right: 8px;
  gap: 8px;
`,Nge=It(Aoe)``,pS=It(eA)`
  border-radius: 24px;
  padding-left: 20px;
  padding-right: 20px;
`,Fge=It.div`
  display: flex;
  gap: 5px;
`,Bge=It.div`
  display: flex;
  align-items: flex-end;
  margin-left: 8px;
  margin-right: 8px;
  font-size: 1em;
  white-space: nowrap;
  gap: 8px;

  input {
    text-align: right;
  }
`,zge=It(_w)``,Uge=It.div`
  display: flex;
  width: 95%;
  gap: 15px;
  align-content: center;
  align-items: center;
`,wF=t=>({animation:`blinking ${1.5-t}s ease-in-out infinite alternate; @keyframes blinking { 0% { background-color: rgb(230,138,35);} 100% { background-color: rgb(180,88,25); }}`,color:"#444"});function $ge(t){return Ft(Dge,{children:[Ft(Fge,{children:[Ft(Nge,{variant:"outlined","aria-label":"outlined primary button group",children:[K(pS,{variant:"contained",color:"primary",onClick:t.start,disabled:t.isStarted,startIcon:K(Sfe,{}),children:"Start"}),K(pS,{variant:"contained",color:"primary",onClick:t.stop,disabled:!t.isStarted,sx:{...t.isStarted?wF(t.intervalScale):{}},startIcon:K(Tfe,{}),children:"Stop"})]}),K(pS,{onClick:t.reset,variant:"contained",color:"primary",sx:{...t.isStarted?wF(t.intervalScale):{}},startIcon:K(Mfe,{}),children:"Reset"})]}),Ft(Uge,{children:[K(u_,{title:"Elapsed time",children:Ft(Bge,{children:[K(cfe,{}),K("input",{type:"text",value:t.counter,size:6,disabled:!0})]})}),K(u_,{title:"Simulation Speed",children:K(zge,{"aria-label":"Simulation speed",value:t.intervalScale,step:.01,marks:[{value:0,label:""},{value:.2,label:"20%"},{value:.4,label:"40%"},{value:.6,label:"60%"},{value:.8,label:"80%"},{value:1,label:""}],onChange:(e,n)=>{t.changeIntervalScale(n)},min:0,max:1,valueLabelDisplay:"auto",sx:{"& .MuiSlider-markLabel":{fontSize:"70%"}}})})]})]})}const jge={interval:0,isStarted:!1,counter:0},lG=k0(jge),Gge=t=>{const[e,n]=C$(lG),r=P.useRef(Number.POSITIVE_INFINITY),i=P.useRef(null),s=c=>{n(u=>(u.interval=c,u))},o=()=>{n(c=>(c.isStarted=!0,c)),t.onStarted()},a=()=>{n(c=>(c.isStarted=!1,c))},l=()=>{n(c=>(c.counter=0,c)),t.onReset()};return P.useEffect(()=>(!e.isStarted&&i.current&&(clearInterval(i.current),i.current=null),e.isStarted&&r.current!==e.interval&&(r.current=e.interval,i.current=setInterval(()=>{t.tick(),n(c=>(c.counter++,c))},e.interval)),()=>{i.current&&(clearInterval(i.current),r.current=Number.POSITIVE_INFINITY)}),[e.counter,e.isStarted,e.interval]),{changeInterval:s,start:o,stop:a,reset:l}};function Hge(t){const[e,n]=P.useState(t.initialIntervalScale),r=_D(t.minInterval,t.maxInterval,e),{changeInterval:i,start:s,stop:o,reset:a}=Gge({tick:t.tick,onStarted:t.onStarted,onReset:t.onReset,onStopped:t.onStopped});return{changeIntervalScale:c=>{n(c);const u=_D(t.minInterval,t.maxInterval,c);i(u)},start:s,stop:o,reset:a,interval:r,intervalScale:e}}const Vge=({simulation:t})=>{const{counter:e,isStarted:n}=Fx(lG);return K($ge,{isStarted:n,counter:e,intervalScale:t.intervalScale,start:t.start,stop:t.stop,reset:t.reset,changeIntervalScale:t.changeIntervalScale})};function Wge(t){return{layout:{i:"EditButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??2,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"EditButton",type:In.FloatingButton,bindToPanelId:"EditPanel",tooltip:"Open Edit Panel",icon:K(D8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Xge(t){return{layout:{i:"ParametersButton",x:0,y:(t==null?void 0:t.y)??3,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ParametersButton",type:In.FloatingButton,bindToPanelId:"ParametersPanel",tooltip:"Open Parameters Panel",icon:K(V8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Yge(t){return{layout:{i:"ParametersPanel",x:1,y:(t==null?void 0:t.y)??3,w:9,h:9,minW:9,minH:9,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"ParametersPanel",type:In.FloatingPanel,title:"Parameters",icon:K(V8,{}),titleBarMode:"win",rowHeight:ll,bindToButtonId:"ParametersButton",shown:(t==null?void 0:t.shown)??!0}}}function qge(t){return{layout:{i:"TimerControlButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??4,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimerControlButton",type:In.FloatingButton,bindToPanelId:"TimerControlPanel",tooltip:"Open TimerControl Panel",icon:K(H8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function Kge(t){return{layout:{i:"TimerControlPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??9,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??4,minW:8,minH:4,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"TimerControlPanel",type:In.FloatingPanel,title:"Timer Control",icon:K(H8,{}),titleBarMode:"win",rowHeight:ll,shown:!0,bindToButtonId:"TimerControlButton"}}}function Zge(t){return{layout:{i:"MatricesButton",x:0,y:(t==null?void 0:t.y)??5,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"MatricesButton",type:In.FloatingButton,bindToPanelId:"MatricesPanel",tooltip:"Open Matrices Panel",icon:K(B8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function Qge(t){return{layout:{i:"MatricesPanel",x:(t==null?void 0:t.x)??10,y:(t==null?void 0:t.y)??5,w:(t==null?void 0:t.w)??23,h:(t==null?void 0:t.h)??9,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"MatricesPanel",type:In.FloatingPanel,title:"Matrices",icon:K(B8,{}),titleBarMode:"win",rowHeight:ll,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"MatricesButton"}}}function Jge(t){return{layout:{i:"LayersButton",x:0,y:(t==null?void 0:t.y)??7,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"LayersButton",type:In.FloatingButton,bindToPanelId:"LayersPanel",tooltip:"Open Layers Panel",icon:K($8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function eme(t){return{layout:{i:"LayersPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??7,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??8,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"LayersPanel",type:In.FloatingPanel,title:"Layers",icon:K($8,{}),titleBarMode:"win",rowHeight:ll,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"LayersButton"}}}function tme(t){return{layout:{i:"InfoButton",x:0,y:8,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InfoButton",type:In.FloatingButton,tooltip:"Info",icon:K(U8,{}),bindToPanelId:"InfoPanel",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function nme(t){return{layout:{i:"InfoPanel",x:10,y:(t==null?void 0:t.y)??0,w:5,h:3,minW:5,minH:3,resizeHandles:Yl,isDraggable:!0,isResizable:!0},resource:{id:"InfoPanel",type:In.FloatingPanel,title:"Information",icon:K(U8,{}),titleBarMode:"win",rowHeight:ll,bindToButtonId:"InfoButton",shown:!1}}}function rme(t){return{layout:{i:"UndoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"UndoButton",type:In.FloatingButton,tooltip:"undo",icon:K(kfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function ime(t){return{layout:{i:"RedoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"RedoButton",type:In.FloatingButton,tooltip:"redo",icon:K(Pfe,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function sme(t){return{layout:{i:"EditPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??9,h:(t==null?void 0:t.h)??3,resizeHandles:Yl,isDraggable:!0,isResizable:!0},resource:{id:"EditPanel",type:In.FloatingPanel,title:"Edit Panel",icon:K(D8,{}),titleBarMode:"win",rowHeight:ll,shown:(t==null?void 0:t.shown)||!1,bindToButtonId:"EditButton"}}}function ome(t){return{layout:{i:"TimeMachineButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??8,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimeMachineButton",type:In.FloatingButton,bindToPanelId:"TimeMachinePanel",tooltip:"Open TimeMachine Panel",icon:K(z8,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function ame(t){return{layout:{i:"TimeMachinePanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??20,w:(t==null?void 0:t.w)??12,h:(t==null?void 0:t.h)??3,minW:12,minH:3,isDraggable:!0,isResizable:!0,resizeHandles:Yl},resource:{id:"TimeMachinePanel",type:In.FloatingPanel,title:"Time Machine",icon:K(z8,{}),titleBarMode:"win",rowHeight:ll,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"TimeMachineButton"}}}const lme=It(ar)`
  margin-top: 30px;
  margin-right: 20px;
  margin-left: 20px;
`,cme=[{value:0,label:"0"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"40"}],ume=()=>K(lme,{children:K(_w,{defaultValue:0,step:1,marks:cme,min:0,max:60,valueLabelDisplay:"on"})}),ll=32,Yl=["se","sw","nw"],hme=t=>t&&t>0?Math.floor(t/ll)-3:0,dme=(t,e)=>t.x?t.x>=0?t.x:gA+t.x:0,fme=(t,e)=>{if(t.y){if(t.y>=0)return t.y;if(e.height&&e.height>0)return hme(e.height)+t.y}return 0},EF=new Epe,pme=t=>{const e=nI(),{width:n,height:r}=gM(),{backgroundColor:i,type:s,uuid:o,uiState:a,setUIState:l,matrices:c,preferences:u,updateAndSetMatrices:h}=t,{set:f,current:g,undo:m,redo:y,history:x,future:b}=zx(ah),{setSessionChartScale:w,setSessionChartType:v}=Xfe({setUIState:l}),[E,S]=P.useState([]),[C,R]=P.useState({}),[I,L]=P.useState({}),O=({zoom:ke,y:Oe,x:rt})=>{},B=({zoom:ke,y:Oe,x:rt})=>{l(qe=>{qe.viewportCenter=[ke,Oe,rt],me(qe.viewportCenter)})},{onFit:M}=qfe({width:n,height:r,locations:g==null?void 0:g.locations,uiState:a,setUIState:l}),D=P.useCallback(ke=>{l(Oe=>{Oe.viewportCenter=ke,me(Oe.viewportCenter)})},[l]),{onAddBulkLocations:N,onRemoveBulkLocations:j,onDragStart:W,onDrag:V,onDragEnd:U,onFocus:X,onUnfocus:Y,onSelect:Z,onUnselect:se,onPointerUp:xe,onClearSelection:de}=Wfe({sessionState:g,setSessionState:f,uiState:a,setUIState:l,matrices:c,updateAndSetMatrices:h}),{onParameterSetChange:Me,setManufactureShare:he,setTransportationCost:Se,setElasticitySubstitution:le,setNumLocations:ae}=wpe({type:s,sessionState:g,setSessionState:f,onAddBulkLocations:N,onRemoveBulkLocations:j}),me=P.useCallback(ke=>{const Oe=ke.map(qe=>parseFloat(qe.toFixed(4))),rt=`/${s}/${o}/${Oe[0]}/${Oe[1]}/${Oe[2]}/`;EF.runAsyncFunction(()=>{e(rt,{replace:!0})})},[e,s,o]),oe=P.useCallback(ke=>{l(Oe=>(Oe.viewportCenter[0]+=ke,me(Oe.viewportCenter),Oe))},[l]),_e=P.useCallback(()=>oe(.25),[oe]),pe=P.useCallback(()=>oe(-.25),[oe]),Ce=P.useCallback(()=>{const ke=M();l(Oe=>(Oe.viewportCenter=ke,me(ke),Oe))},[M,me,l]),we={BackgroundPanel:{},HomeButton:{},ChartButton:{enabled:!1},ChartPanel:{},InputOutputButton:{enabled:!1},InputOutputPanel:{shown:!1},EditButton:{enabled:!1},EditPanel:{shown:!1},ParametersButton:{enabled:!1},ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},TimerControlButton:{enabled:!1},TimerControlPanel:{y:9},MatricesButton:{enabled:!1},MatricesPanel:{height:r,y:-9},LayersButton:{enabled:!1},LayersPanel:{shown:!1},TimeMachineButton:{enabled:!1},TimeMachinePanel:{shown:!0,x:-1,y:-4,height:r,w:27,h:3},InfoButton:{shown:!1},InfoPanel:{shown:!1},UndoButton:{height:r,y:-6,onClick:m,enabled:x.length>0},RedoButton:{height:r,y:-5,onClick:y,enabled:b.length>0},ZoomInButton:{height:r,y:-3,onClick:_e},ZoomOutButton:{height:r,y:-2,onClick:pe},FitScreenButton:{height:r,y:-1,onClick:Ce}},Ye={[ci.Racetrack]:{...we},[ci.Graph]:{...we,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0}},[ci.RealWorld]:{...we,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0},LayersPanel:{x:-1,y:10,shown:!0},MatricesButton:{enabled:!0},MatricesPanel:{height:r,y:-9,shown:!1}}};if(P.useEffect(()=>{const ke=[],Oe={};return[xpe,jfe,Gfe,Hfe,Kfe,Vfe,Wge,sme,Xge,Yge,qge,Kge,ome,ame,Zge,Qge,Jge,eme,tme,nme,rme,ime,lF,cF,uF].forEach((rt,qe)=>{const He=Ye[s][rt.name]&&rt(Ye[s][rt.name]);He&&(He.layout&&(He.layout.x=dme(He.layout,Ye[s][rt.name]),He.layout.y=fme(He.layout,Ye[s][rt.name]),ke.push({...He.layout})),He.resource&&(Oe[He.resource.id]=He.resource))}),S(ke),R(Oe),L(rt=>({ChartPanel:K(fF,{sessionState:g,uiState:a,setSessionChartType:v,setSessionChartScale:w,onSelect:Z,onUnselect:se,onFocus:X,onUnfocus:Y}),ParametersPanel:K(bF,{type:t.type,parameterSet:g.parameterSet,sessionStateAtom:ah,onParameterSetChange:Me,setNumLocations:ae}),InputOutputPanel:K(gpe,{}),EditPanel:K(_pe,{state:{addLocation:!1,removeLocation:!1,addEdge:!1,removeEdge:!1,autoGraphLayout:!1,undo:!1,redo:!1},onAddLocation:function(){throw new Error("Function not implemented.")},onRemoveLocation:function(){throw new Error("Function not implemented.")},onAddEdge:function(){throw new Error("Function not implemented.")},onRemoveEdge:function(){throw new Error("Function not implemented.")}}),InfoPanel:K(Tpe,{}),LayersPanel:K(bge,{}),MatricesPanel:K(xF,{sessionState:g,matrices:c,uiState:a,preferences:u,onSelect:Z,onFocus:X,onUnfocus:Y})})),()=>{EF.cancelAll(),console.warn("TODO: store viewportCenter in DB "+JSON.stringify(a.viewportCenter))}},[]),P.useEffect(()=>{R(ke=>(ke.ZoomInButton=lF({height:r,onClick:_e}).resource,ke))},[pe]),P.useEffect(()=>{R(ke=>(ke.ZoomOutButton=cF({height:r,onClick:pe}).resource,ke))},[_e]),P.useEffect(()=>{R(ke=>(ke.FitScreenButton=uF({height:r,onClick:Ce}).resource,ke))},[Ce]),P.useEffect(()=>{L(ke=>({...ke,ParametersPanel:K(bF,{type:t.type,sessionStateAtom:ah,parameterSet:g.parameterSet,onParameterSetChange:Me,setNumLocations:ae,setManufactureShare:he,setTransportationCost:Se,setElasticitySubstitution:le})}))},[g.parameterSet]),P.useEffect(()=>{L(ke=>({...ke,ChartPanel:K(fF,{sessionState:g,uiState:a,setSessionChartType:v,setSessionChartScale:w,onSelect:Z,onUnselect:se,onFocus:X,onUnfocus:Y})}))},[g.locations,a]),P.useEffect(()=>{L(ke=>({...ke,MatricesPanel:K(xF,{sessionState:g,matrices:c,uiState:a,preferences:u,onSelect:Z,onFocus:X,onUnfocus:Y})}))},[c]),P.useEffect(()=>{L(ke=>{const Oe={...ke};return Oe.TimerControlPanel=K(Vge,{simulation:t.simulation}),Oe})},[t.simulation]),P.useEffect(()=>{L(ke=>({...ke,TimeMachinePanel:K(ume,{})}))},[a]),!(E.length===0||Object.keys(C).length===0||Object.keys(I).length===0))return K($fe,{initialLayouts:E,resources:C,gridItemChildrenMap:I,backgroundColor:i,children:t.backgroundPanel({width:n,height:r,sessionState:g,uiState:a,matrices:c,onDragStart:W,onDragEnd:U,onDrag:V,onFocus:X,onUnfocus:Y,onPointerUp:xe,onClearSelection:de,onMoved:O,onMovedEnd:B,overrideViewportCenter:D})})},gme=({startSimulation:t,stopSimulation:e,resetSimulation:n,tickSimulation:r})=>Hge({onStarted:()=>{requestAnimationFrame(()=>{t()})},onReset:()=>{requestAnimationFrame(()=>{n()})},onStopped:()=>{e()},tick:()=>{requestAnimationFrame(()=>{r()})},minInterval:5,maxInterval:2e3,initialIntervalScale:.5});function mme(){const[t,e]=P.useState({open:!1,vertical:"top",horizontal:"center",message:""}),n=P.useCallback(i=>{e({...t,open:!0,message:i})},[t,e]),r=P.useCallback(()=>{e({...t,open:!1})},[t,e]);return{openSnackBar:n,closeSnackBar:r}}const yme=function(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})},vme=function(t){var e=[];return t.ctrlKey&&e.push("ctrlKey"),t.shiftKey&&e.push("shiftKey"),t.altKey&&e.push("altKey"),t.metaKey&&e.push("metaKey"),e};var bme=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};const TF=function(t){var e=t.toLowerCase();return e.length===1?[e]:e.includes("+")?e.replace(/\s+/g,"").split(/\b\+/g):bme([],e.match(/[^\s"']+|"([^"]*)"|'([^']*)'/g)||[],!0).map(function(n){return n.replace(/("|').*?("|')/," ")})},_me=function(t,e){return t.length===e.length&&t.every(function(n){return e.includes(n)})};var xme={control:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"};const wme=function(t){return t.map(function(e){return xme[e]})},vA=function(t){return t.altKey||t.ctrlKey||t.shiftKey||t.metaKey},Eme=function(t){return t[t.length-1]},Tme=function(t){return t.slice(0,-1)};var Sme=["INPUT","TEXTAREA"];const Cme=function(t,e,n){if(!t.key&&!vA(t))return!0;var r=t.target||{};return r.isContentEditable&&!e?!0:Sme.includes(r.nodeName)&&!(n!=null&&n.includes(r.nodeName))};(function(){if(!(typeof self>"u"||!self.document)){var t=KeyboardEvent.prototype,e=Object.getOwnPropertyDescriptor(t,"key");if(e){var n={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};Object.defineProperty(t,"key",{get:function(){var r=e.get.call(this);return n.hasOwnProperty(r)?n[r]:r}})}}})();var Pme=1e3,Ame="*",Wv=function(t,e,n){var r=P.useMemo(function(){return Array.isArray(t)?t.map(TF):[TF(t)]},[t]);P.useEffect(function(){var i={},s={},o=n||{},a=o.enabled,l=o.enableOnContentEditable,c=o.ignoredElementWhitelist,u=o.eventListenerOptions,h=function(x){clearTimeout(s[x])},f=function(x){h(x),i[x]=[]},g=function(x,b,w){h(w),i[w]=i[w]||[],s[w]=window.setTimeout(function(){f(w)},Pme);var v=i[w];v.push(x.key.toLowerCase()),yme(v,b)&&(f(w),e(x))},m=function(x,b){var w=Eme(b),v=wme(Tme(b)),E=vme(x),S=_me(v,E);S&&x.key.toLowerCase()===w&&e(x)},y=function(x){Cme(x,l,c)||r.forEach(function(b,w){if(b.length===1&&b[0]===Ame){e(x);return}if(vA(x)){m(x,b);return}if(b.length>1&&!vA(x)){g(x,b,w);return}x.key.toLowerCase()===b[0]&&e(x)})};return a!==!1&&window.addEventListener("keydown",y,u),function(){window.removeEventListener("keydown",y,u)}},[r,e,n==null?void 0:n.enabled,n==null?void 0:n.enableOnContentEditable,n==null?void 0:n.ignoredElementWhitelist,n==null?void 0:n.eventListenerOptions])};const Rme=({sessionStateAtom:t,openSnackBar:e,closeSnackBar:n,uiState:r,setUIState:i})=>{const{undo:s,redo:o,current:a,history:l,future:c,staging:u}=zx(t),h=P.useCallback(()=>{requestAnimationFrame(()=>{i(g=>{g.focusedIndices=[],g.selectedIndices=[]}),s()})},[s,i]),f=P.useCallback(()=>{requestAnimationFrame(()=>{i(g=>{g.focusedIndices=[],g.selectedIndices=[]}),o()})},[o,i]);Wv(["Meta+z","Control+z"],()=>{if(l.length===0){e("No more undo!");return}h()}),Wv(["Shift+Meta+z","Shift+Control+z"],()=>{if(c.length===0){e("No more redo!");return}f()}),Wv(["h"],()=>{console.log({numLocations:a.locations.length,locations:a.locations,selectedIndices:r.selectedIndices}),console.log({sessionState:a,history:l,staging:u,future:c})}),Wv(["e"],()=>{console.log(JSON.stringify(a.edges,null," "))})};T$();const xM=t=>{var I,L,O,B;const{type:e,uuid:n,backgroundPanel:r,backgroundColor:i,viewportCenter:s}=t,{set:o,current:a}=zx(ah),[l,c]=C$($J),{openSnackBar:u,closeSnackBar:h}=mme();Rme({uiState:l,setUIState:c,openSnackBar:u,closeSnackBar:h,sessionStateAtom:ah});const f=Fx(ree),[g,m]=iI(UJ);P.useEffect(()=>{c(M=>(M.viewportCenter=s,M))},[c,s]);const y=()=>{const M=kf[e].find(D=>a.parameterSet.caseId===D.caseId);M&&o(D=>{D.parameterSet.numLocations=M.numLocations,D.parameterSet.manufactureShare=M.manufactureShare,D.parameterSet.transportationCost=M.transportationCost,D.parameterSet.elasticitySubstitution=M.elasticitySubstitution})};function x(){o(M=>{},!0,"simulationStart")}function b(){o(M=>{},!0,"simulationStop")}function w(){o(M=>{M.locations.forEach(D=>fQ(D,M.locations.length)),y()},!0,"resetSimulation")}function v(){o(M=>{oee(M,g.transportationCostMatrix)},!1,"tick")}const E=gme({startSimulation:x,stopSimulation:b,resetSimulation:w,tickSimulation:v}),S=aee((I=a==null?void 0:a.locations)==null?void 0:I.length,(L=a==null?void 0:a.edges)==null?void 0:L.length),C=(M,D,N)=>{if(!S)throw new Error;return S.updateAdjacencyMatrix(M,D,N)},R=(M,D)=>{C(M,D,a.parameterSet.transportationCost).then(N=>{m({adjacencyMatrix:N.adjacencyMatrix,distanceMatrix:N.distanceMatrix,predecessorMatrix:N.predecessorMatrix,transportationCostMatrix:N.transportationCostMatrix})})};return P.useEffect(()=>{R(a==null?void 0:a.locations,a==null?void 0:a.edges)},[a==null?void 0:a.locations,a==null?void 0:a.edges,(O=a==null?void 0:a.parameterSet)==null?void 0:O.transportationCost]),P.useEffect(()=>{var M,D;(M=a==null?void 0:a.parameterSet)!=null&&M.title?document.title=`Eco-Geo - ${(D=a==null?void 0:a.parameterSet)==null?void 0:D.title}`:document.title="Eco-Geo - Geological Economics Modeling Simulator"},[(B=a==null?void 0:a.parameterSet)==null?void 0:B.title]),K(pme,{backgroundColor:i,type:e,uuid:n,simulation:E,matrices:g,setMatrices:m,uiState:l,setUIState:c,preferences:f,updateMatrices:C,updateAndSetMatrices:R,backgroundPanel:r})};var cG={exports:{}},du=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(du||{}),wM=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(wM||{}),g_=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(g_||{}),mt=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(mt||{}),yo=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(yo||{}),Re=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Re||{}),uh=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(uh||{}),lt=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(lt||{}),We=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(We||{}),Ga=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Ga||{}),Ka=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ka||{}),ua=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ua||{}),$i=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))($i||{}),Yo=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Yo||{}),kw=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(kw||{}),Is=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Is||{}),xr=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(xr||{}),uG=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(uG||{}),gr=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(gr||{}),oa=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(oa||{});const hG={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},Xe={ADAPTER:hG,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var gS=/iPhone/i,SF=/iPod/i,CF=/iPad/i,PF=/\biOS-universal(?:.+)Mac\b/i,mS=/\bAndroid(?:.+)Mobile\b/i,AF=/Android/i,yd=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Xv=/Silk/i,pl=/Windows Phone/i,RF=/\bWindows(?:.+)ARM\b/i,IF=/BlackBerry/i,MF=/BB10/i,OF=/Opera Mini/i,LF=/\b(CriOS|Chrome)(?:.+)Mobile/i,kF=/Mobile(?:.+)Firefox\b/i,DF=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Ime(t){return function(e){return e.test(t)}}function NF(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=Ime(n),s={apple:{phone:i(gS)&&!i(pl),ipod:i(SF),tablet:!i(gS)&&(i(CF)||DF(e))&&!i(pl),universal:i(PF),device:(i(gS)||i(SF)||i(CF)||i(PF)||DF(e))&&!i(pl)},amazon:{phone:i(yd),tablet:!i(yd)&&i(Xv),device:i(yd)||i(Xv)},android:{phone:!i(pl)&&i(yd)||!i(pl)&&i(mS),tablet:!i(pl)&&!i(yd)&&!i(mS)&&(i(Xv)||i(AF)),device:!i(pl)&&(i(yd)||i(Xv)||i(mS)||i(AF))||i(/\bokhttp\b/i)},windows:{phone:i(pl),tablet:i(RF),device:i(pl)||i(RF)},other:{blackberry:i(IF),blackberry10:i(MF),opera:i(OF),firefox:i(kF),chrome:i(LF),device:i(IF)||i(MF)||i(OF)||i(kF)||i(LF)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Mme=NF.default??NF,Zo=Mme(globalThis.navigator);Xe.RETINA_PREFIX=/@([0-9\.]+)x/;Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var dG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||l,f),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],g]:l._events[m].push(g):(l._events[m]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,m=new Array(g);f<g;f++)m[f]=h[f].fn;return m},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,f,g,m){var y=n?n+c:c;if(!this._events[y])return!1;var x=this._events[y],b=arguments.length,w,v;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,h),!0;case 4:return x.fn.call(x.context,u,h,f),!0;case 5:return x.fn.call(x.context,u,h,f,g),!0;case 6:return x.fn.call(x.context,u,h,f,g,m),!0}for(v=1,w=new Array(b-1);v<b;v++)w[v-1]=arguments[v];x.fn.apply(x.context,w)}else{var E=x.length,S;for(v=0;v<E;v++)switch(x[v].once&&this.removeListener(c,x[v].fn,void 0,!0),b){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,u);break;case 3:x[v].fn.call(x[v].context,u,h);break;case 4:x[v].fn.call(x[v].context,u,h,f);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];x[v].fn.apply(x[v].context,w)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,f){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var m=this._events[g];if(m.fn)m.fn===u&&(!f||m.once)&&(!h||m.context===h)&&o(this,g);else{for(var y=0,x=[],b=m.length;y<b;y++)(m[y].fn!==u||f&&!m[y].once||h&&m[y].context!==h)&&x.push(m[y]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(dG);var Ome=dG.exports;const mp=Ih(Ome);var m_={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */m_.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof ts=="object"&&ts;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,c=1,u=26,h=38,f=700,g=72,m=128,y="-",x=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-c,S=Math.floor,C=String.fromCharCode,R;function I(Y){throw new RangeError(v[Y])}function L(Y,Z){for(var se=Y.length,xe=[];se--;)xe[se]=Z(Y[se]);return xe}function O(Y,Z){var se=Y.split("@"),xe="";se.length>1&&(xe=se[0]+"@",Y=se[1]),Y=Y.replace(w,".");var de=Y.split("."),Me=L(de,Z).join(".");return xe+Me}function B(Y){for(var Z=[],se=0,xe=Y.length,de,Me;se<xe;)de=Y.charCodeAt(se++),de>=55296&&de<=56319&&se<xe?(Me=Y.charCodeAt(se++),(Me&64512)==56320?Z.push(((de&1023)<<10)+(Me&1023)+65536):(Z.push(de),se--)):Z.push(de);return Z}function M(Y){return L(Y,function(Z){var se="";return Z>65535&&(Z-=65536,se+=C(Z>>>10&1023|55296),Z=56320|Z&1023),se+=C(Z),se}).join("")}function D(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:l}function N(Y,Z){return Y+22+75*(Y<26)-((Z!=0)<<5)}function j(Y,Z,se){var xe=0;for(Y=se?S(Y/f):Y>>1,Y+=S(Y/Z);Y>E*u>>1;xe+=l)Y=S(Y/E);return S(xe+(E+1)*Y/(Y+h))}function W(Y){var Z=[],se=Y.length,xe,de=0,Me=m,he=g,Se,le,ae,me,oe,_e,pe,Ce,we;for(Se=Y.lastIndexOf(y),Se<0&&(Se=0),le=0;le<Se;++le)Y.charCodeAt(le)>=128&&I("not-basic"),Z.push(Y.charCodeAt(le));for(ae=Se>0?Se+1:0;ae<se;){for(me=de,oe=1,_e=l;ae>=se&&I("invalid-input"),pe=D(Y.charCodeAt(ae++)),(pe>=l||pe>S((a-de)/oe))&&I("overflow"),de+=pe*oe,Ce=_e<=he?c:_e>=he+u?u:_e-he,!(pe<Ce);_e+=l)we=l-Ce,oe>S(a/we)&&I("overflow"),oe*=we;xe=Z.length+1,he=j(de-me,xe,me==0),S(de/xe)>a-Me&&I("overflow"),Me+=S(de/xe),de%=xe,Z.splice(de++,0,Me)}return M(Z)}function V(Y){var Z,se,xe,de,Me,he,Se,le,ae,me,oe,_e=[],pe,Ce,we,Ye;for(Y=B(Y),pe=Y.length,Z=m,se=0,Me=g,he=0;he<pe;++he)oe=Y[he],oe<128&&_e.push(C(oe));for(xe=de=_e.length,de&&_e.push(y);xe<pe;){for(Se=a,he=0;he<pe;++he)oe=Y[he],oe>=Z&&oe<Se&&(Se=oe);for(Ce=xe+1,Se-Z>S((a-se)/Ce)&&I("overflow"),se+=(Se-Z)*Ce,Z=Se,he=0;he<pe;++he)if(oe=Y[he],oe<Z&&++se>a&&I("overflow"),oe==Z){for(le=se,ae=l;me=ae<=Me?c:ae>=Me+u?u:ae-Me,!(le<me);ae+=l)Ye=le-me,we=l-me,_e.push(C(N(me+Ye%we,0))),le=S(Ye/we);_e.push(C(N(le,0))),Me=j(se,Ce,xe==de),se=0,++xe}++se,++Z}return _e.join("")}function U(Y){return O(Y,function(Z){return x.test(Z)?W(Z.slice(4).toLowerCase()):Z})}function X(Y){return O(Y,function(Z){return b.test(Z)?"xn--"+V(Z):Z})}if(o={version:"1.4.1",ucs2:{decode:B,encode:M},decode:W,encode:V,toASCII:X,toUnicode:U},r&&i)if(t.exports==r)i.exports=o;else for(R in o)o.hasOwnProperty(R)&&(r[R]=o[R]);else n.punycode=o})(ts)})(m_,m_.exports);var Lme=m_.exports,EM=typeof Map=="function"&&Map.prototype,yS=Object.getOwnPropertyDescriptor&&EM?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,y_=EM&&yS&&typeof yS.get=="function"?yS.get:null,FF=EM&&Map.prototype.forEach,TM=typeof Set=="function"&&Set.prototype,vS=Object.getOwnPropertyDescriptor&&TM?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,v_=TM&&vS&&typeof vS.get=="function"?vS.get:null,BF=TM&&Set.prototype.forEach,kme=typeof WeakMap=="function"&&WeakMap.prototype,gm=kme?WeakMap.prototype.has:null,Dme=typeof WeakSet=="function"&&WeakSet.prototype,mm=Dme?WeakSet.prototype.has:null,Nme=typeof WeakRef=="function"&&WeakRef.prototype,zF=Nme?WeakRef.prototype.deref:null,Fme=Boolean.prototype.valueOf,Bme=Object.prototype.toString,zme=Function.prototype.toString,Ume=String.prototype.match,SM=String.prototype.slice,Oc=String.prototype.replace,$me=String.prototype.toUpperCase,UF=String.prototype.toLowerCase,fG=RegExp.prototype.test,$F=Array.prototype.concat,Ua=Array.prototype.join,jme=Array.prototype.slice,jF=Math.floor,bA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,bS=Object.getOwnPropertySymbols,_A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ii=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Gf||!0)?Symbol.toStringTag:null,pG=Object.prototype.propertyIsEnumerable,GF=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function HF(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||fG.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-jF(-t):jF(t);if(r!==t){var i=String(r),s=SM.call(e,i.length+1);return Oc.call(i,n,"$&_")+"."+Oc.call(Oc.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Oc.call(e,n,"$&_")}var xA=A$,VF=xA.custom,WF=mG(VF)?VF:null,Gme=function t(e,n,r,i){var s=n||{};if(wc(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(wc(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=wc(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(wc(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(wc(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return vG(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?HF(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?HF(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return wA(e)?"[Array]":"[Object]";var h=a0e(s,r);if(typeof i>"u")i=[];else if(yG(i,e)>=0)return"[Circular]";function f(D,N,j){if(N&&(i=jme.call(i),i.push(N)),j){var W={depth:s.depth};return wc(s,"quoteStyle")&&(W.quoteStyle=s.quoteStyle),t(D,W,r+1,i)}return t(D,s,r+1,i)}if(typeof e=="function"&&!XF(e)){var g=Qme(e),m=Yv(e,f);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(m.length>0?" { "+Ua.call(m,", ")+" }":"")}if(mG(e)){var y=Gf?Oc.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):_A.call(e);return typeof e=="object"&&!Gf?hg(y):y}if(i0e(e)){for(var x="<"+UF.call(String(e.nodeName)),b=e.attributes||[],w=0;w<b.length;w++)x+=" "+b[w].name+"="+gG(Hme(b[w].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+UF.call(String(e.nodeName))+">",x}if(wA(e)){if(e.length===0)return"[]";var v=Yv(e,f);return h&&!o0e(v)?"["+EA(v,h)+"]":"[ "+Ua.call(v,", ")+" ]"}if(Wme(e)){var E=Yv(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!pG.call(e,"cause")?"{ ["+String(e)+"] "+Ua.call($F.call("[cause]: "+f(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ua.call(E,", ")+" }"}if(typeof e=="object"&&o){if(WF&&typeof e[WF]=="function"&&xA)return xA(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Jme(e)){var S=[];return FF&&FF.call(e,function(D,N){S.push(f(N,e,!0)+" => "+f(D,e))}),YF("Map",y_.call(e),S,h)}if(n0e(e)){var C=[];return BF&&BF.call(e,function(D){C.push(f(D,e))}),YF("Set",v_.call(e),C,h)}if(e0e(e))return _S("WeakMap");if(r0e(e))return _S("WeakSet");if(t0e(e))return _S("WeakRef");if(Yme(e))return hg(f(Number(e)));if(Kme(e))return hg(f(bA.call(e)));if(qme(e))return hg(Fme.call(e));if(Xme(e))return hg(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===ts)return"{ [object globalThis] }";if(!Vme(e)&&!XF(e)){var R=Yv(e,f),I=GF?GF(e)===Object.prototype:e instanceof Object||e.constructor===Object,L=e instanceof Object?"":"null prototype",O=!I&&Ii&&Object(e)===e&&Ii in e?SM.call(fu(e),8,-1):L?"Object":"",B=I||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=B+(O||L?"["+Ua.call($F.call([],O||[],L||[]),": ")+"] ":"");return R.length===0?M+"{}":h?M+"{"+EA(R,h)+"}":M+"{ "+Ua.call(R,", ")+" }"}return String(e)};function gG(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function Hme(t){return Oc.call(String(t),/"/g,"&quot;")}function wA(t){return fu(t)==="[object Array]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function Vme(t){return fu(t)==="[object Date]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function XF(t){return fu(t)==="[object RegExp]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function Wme(t){return fu(t)==="[object Error]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function Xme(t){return fu(t)==="[object String]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function Yme(t){return fu(t)==="[object Number]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function qme(t){return fu(t)==="[object Boolean]"&&(!Ii||!(typeof t=="object"&&Ii in t))}function mG(t){if(Gf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!_A)return!1;try{return _A.call(t),!0}catch{}return!1}function Kme(t){if(!t||typeof t!="object"||!bA)return!1;try{return bA.call(t),!0}catch{}return!1}var Zme=Object.prototype.hasOwnProperty||function(t){return t in this};function wc(t,e){return Zme.call(t,e)}function fu(t){return Bme.call(t)}function Qme(t){if(t.name)return t.name;var e=Ume.call(zme.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function yG(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function Jme(t){if(!y_||!t||typeof t!="object")return!1;try{y_.call(t);try{v_.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function e0e(t){if(!gm||!t||typeof t!="object")return!1;try{gm.call(t,gm);try{mm.call(t,mm)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function t0e(t){if(!zF||!t||typeof t!="object")return!1;try{return zF.call(t),!0}catch{}return!1}function n0e(t){if(!v_||!t||typeof t!="object")return!1;try{v_.call(t);try{y_.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function r0e(t){if(!mm||!t||typeof t!="object")return!1;try{mm.call(t,mm);try{gm.call(t,gm)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function i0e(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function vG(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return vG(SM.call(t,0,e.maxStringLength),e)+r}var i=Oc.call(Oc.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,s0e);return gG(i,"single",e)}function s0e(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$me.call(e.toString(16))}function hg(t){return"Object("+t+")"}function _S(t){return t+" { ? }"}function YF(t,e,n,r){var i=r?EA(n,r):Ua.call(n,", ");return t+" ("+e+") {"+i+"}"}function o0e(t){for(var e=0;e<t.length;e++)if(yG(t[e],`
`)>=0)return!1;return!0}function a0e(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Ua.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Ua.call(Array(e+1),n)}}function EA(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Ua.call(t,","+n)+`
`+e.prev}function Yv(t,e){var n=wA(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=wc(t,i)?e(t[i],t):""}var s=typeof bS=="function"?bS(t):[],o;if(Gf){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)wc(t,l)&&(n&&String(Number(l))===l&&l<t.length||Gf&&o["$"+l]instanceof Symbol||(fG.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof bS=="function")for(var c=0;c<s.length;c++)pG.call(t,s[c])&&r.push("["+e(s[c])+"]: "+e(t[s[c]],t));return r}var CM=kh,yp=IJ,l0e=Gme,c0e=CM("%TypeError%"),qv=CM("%WeakMap%",!0),Kv=CM("%Map%",!0),u0e=yp("WeakMap.prototype.get",!0),h0e=yp("WeakMap.prototype.set",!0),d0e=yp("WeakMap.prototype.has",!0),f0e=yp("Map.prototype.get",!0),p0e=yp("Map.prototype.set",!0),g0e=yp("Map.prototype.has",!0),PM=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},m0e=function(t,e){var n=PM(t,e);return n&&n.value},y0e=function(t,e,n){var r=PM(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},v0e=function(t,e){return!!PM(t,e)},b0e=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new c0e("Side channel does not contain "+l0e(s))},get:function(s){if(qv&&s&&(typeof s=="object"||typeof s=="function")){if(e)return u0e(e,s)}else if(Kv){if(n)return f0e(n,s)}else if(r)return m0e(r,s)},has:function(s){if(qv&&s&&(typeof s=="object"||typeof s=="function")){if(e)return d0e(e,s)}else if(Kv){if(n)return g0e(n,s)}else if(r)return v0e(r,s);return!1},set:function(s,o){qv&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new qv),h0e(e,s,o)):Kv?(n||(n=new Kv),p0e(n,s,o)):(r||(r={key:{},next:null}),y0e(r,s,o))}};return i},_0e=String.prototype.replace,x0e=/%20/g,xS={RFC1738:"RFC1738",RFC3986:"RFC3986"},AM={default:xS.RFC3986,formatters:{RFC1738:function(t){return _0e.call(t,x0e,"+")},RFC3986:function(t){return String(t)}},RFC1738:xS.RFC1738,RFC3986:xS.RFC3986},w0e=AM,wS=Object.prototype.hasOwnProperty,Vu=Array.isArray,Pa=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),E0e=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Vu(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},bG=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},T0e=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Vu(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!wS.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Vu(e)&&!Vu(n)&&(i=bG(e,r)),Vu(e)&&Vu(n)?(n.forEach(function(s,o){if(wS.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return wS.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},S0e=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},C0e=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},P0e=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===w0e.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+Pa[c];continue}if(c<2048){a=a+(Pa[192|c>>6]+Pa[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Pa[224|c>>12]+Pa[128|c>>6&63]+Pa[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=Pa[240|c>>18]+Pa[128|c>>12&63]+Pa[128|c>>6&63]+Pa[128|c&63]}return a},A0e=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(n.push({obj:o,prop:c}),r.push(u))}return E0e(n),e},R0e=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},I0e=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},M0e=function(e,n){return[].concat(e,n)},O0e=function(e,n){if(Vu(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},_G={arrayToObject:bG,assign:S0e,combine:M0e,compact:A0e,decode:C0e,encode:P0e,isBuffer:I0e,isRegExp:R0e,maybeMap:O0e,merge:T0e},xG=b0e,Q1=_G,ym=AM,L0e=Object.prototype.hasOwnProperty,qF={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},xl=Array.isArray,k0e=Array.prototype.push,wG=function(t,e){k0e.apply(t,xl(e)?e:[e])},D0e=Date.prototype.toISOString,KF=ym.default,wi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Q1.encode,encodeValuesOnly:!1,format:KF,formatter:ym.formatters[KF],indices:!1,serializeDate:function(e){return D0e.call(e)},skipNulls:!1,strictNullHandling:!1},N0e=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ES={},F0e=function t(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){for(var b=e,w=x,v=0,E=!1;(w=w.get(ES))!==void 0&&!E;){var S=w.get(e);if(v+=1,typeof S<"u"){if(S===v)throw new RangeError("Cyclic object value");E=!0}typeof w.get(ES)>"u"&&(v=0)}if(typeof l=="function"?b=l(n,b):b instanceof Date?b=h(b):r==="comma"&&xl(b)&&(b=Q1.maybeMap(b,function(W){return W instanceof Date?h(W):W})),b===null){if(s)return a&&!m?a(n,wi.encoder,y,"key",f):n;b=""}if(N0e(b)||Q1.isBuffer(b)){if(a){var C=m?n:a(n,wi.encoder,y,"key",f);return[g(C)+"="+g(a(b,wi.encoder,y,"value",f))]}return[g(n)+"="+g(String(b))]}var R=[];if(typeof b>"u")return R;var I;if(r==="comma"&&xl(b))m&&a&&(b=Q1.maybeMap(b,a)),I=[{value:b.length>0?b.join(",")||null:void 0}];else if(xl(l))I=l;else{var L=Object.keys(b);I=c?L.sort(c):L}for(var O=i&&xl(b)&&b.length===1?n+"[]":n,B=0;B<I.length;++B){var M=I[B],D=typeof M=="object"&&typeof M.value<"u"?M.value:b[M];if(!(o&&D===null)){var N=xl(b)?typeof r=="function"?r(O,M):O:O+(u?"."+M:"["+M+"]");x.set(e,v);var j=xG();j.set(ES,x),wG(R,t(D,N,r,i,s,o,r==="comma"&&m&&xl(b)?null:a,l,c,u,h,f,g,m,y,j))}}return R},B0e=function(e){if(!e)return wi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||wi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=ym.default;if(typeof e.format<"u"){if(!L0e.call(ym.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=ym.formatters[r],s=wi.filter;return(typeof e.filter=="function"||xl(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:wi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?wi.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:wi.charsetSentinel,delimiter:typeof e.delimiter>"u"?wi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:wi.encode,encoder:typeof e.encoder=="function"?e.encoder:wi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:wi.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:wi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:wi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:wi.strictNullHandling}},z0e=function(t,e){var n=t,r=B0e(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):xl(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in qF?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=qF[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=xG(),h=0;h<i.length;++h){var f=i[h];r.skipNulls&&n[f]===null||wG(o,F0e(n[f],f,l,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var g=o.join(r.delimiter),m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""},Hf=_G,TA=Object.prototype.hasOwnProperty,U0e=Array.isArray,jr={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Hf.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},$0e=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},EG=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},j0e="utf8=%26%2310003%3B",G0e="utf8=%E2%9C%93",H0e=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,l,c=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===G0e?c="utf-8":o[l]===j0e&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],h=u.indexOf("]="),f=h===-1?u.indexOf("="):h+1,g,m;f===-1?(g=n.decoder(u,jr.decoder,c,"key"),m=n.strictNullHandling?null:""):(g=n.decoder(u.slice(0,f),jr.decoder,c,"key"),m=Hf.maybeMap(EG(u.slice(f+1),n),function(y){return n.decoder(y,jr.decoder,c,"value")})),m&&n.interpretNumericEntities&&c==="iso-8859-1"&&(m=$0e(m)),u.indexOf("[]=")>-1&&(m=U0e(m)?[m]:m),TA.call(r,g)?r[g]=Hf.combine(r[g],m):r[g]=m}return r},V0e=function(t,e,n,r){for(var i=r?e:EG(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!n.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},W0e=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!r.plainObjects&&TA.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var h=0;r.depth>0&&(l=a.exec(s))!==null&&h<r.depth;){if(h+=1,!r.plainObjects&&TA.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),V0e(u,n,r,i)}},X0e=function(e){if(!e)return jr;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?jr.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?jr.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:jr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:jr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:jr.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:jr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:jr.comma,decoder:typeof e.decoder=="function"?e.decoder:jr.decoder,delimiter:typeof e.delimiter=="string"||Hf.isRegExp(e.delimiter)?e.delimiter:jr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:jr.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:jr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:jr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:jr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:jr.strictNullHandling}},Y0e=function(t,e){var n=X0e(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?H0e(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=W0e(a,r[a],n,typeof t=="string");i=Hf.merge(i,l,n)}return n.allowSparse===!0?i:Hf.compact(i)},q0e=z0e,K0e=Y0e,Z0e=AM,Q0e={formats:Z0e,parse:K0e,stringify:q0e},J0e=Lme;function aa(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var eye=/^([a-z0-9.+-]+:)/i,tye=/:[0-9]*$/,nye=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,rye=["<",">",'"',"`"," ","\r",`
`,"	"],iye=["{","}","|","\\","^","`"].concat(rye),SA=["'"].concat(iye),ZF=["%","/","?",";","#"].concat(SA),QF=["/","?","#"],sye=255,JF=/^[+a-z0-9A-Z_-]{0,63}$/,oye=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,aye={javascript:!0,"javascript:":!0},CA={javascript:!0,"javascript:":!0},mf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},PA=Q0e;function Dw(t,e,n){if(t&&typeof t=="object"&&t instanceof aa)return t;var r=new aa;return r.parse(t,e,n),r}aa.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=nye.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=PA.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=eye.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(c&&CA[c])&&(a=a.substr(2),this.slashes=!0)}if(!CA[c]&&(h||c&&!mf[c])){for(var f=-1,g=0;g<QF.length;g++){var m=a.indexOf(QF[g]);m!==-1&&(f===-1||m<f)&&(f=m)}var y,x;f===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",f),x!==-1&&(y=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(y)),f=-1;for(var g=0;g<ZF.length;g++){var m=a.indexOf(ZF[g]);m!==-1&&(f===-1||m<f)&&(f=m)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var w=this.hostname.split(/\./),g=0,v=w.length;g<v;g++){var E=w[g];if(E&&!E.match(JF)){for(var S="",C=0,R=E.length;C<R;C++)E.charCodeAt(C)>127?S+="x":S+=E[C];if(!S.match(JF)){var I=w.slice(0,g),L=w.slice(g+1),O=E.match(oye);O&&(I.push(O[1]),L.unshift(O[2])),L.length&&(a="/"+L.join(".")+a),this.hostname=I.join(".");break}}}this.hostname.length>sye?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=J0e.toASCII(this.hostname));var B=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+B,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!aye[u])for(var g=0,v=SA.length;g<v;g++){var D=SA[g];if(a.indexOf(D)!==-1){var N=encodeURIComponent(D);N===D&&(N=escape(D)),a=a.split(D).join(N)}}var j=a.indexOf("#");j!==-1&&(this.hash=a.substr(j),a=a.slice(0,j));var W=a.indexOf("?");if(W!==-1?(this.search=a.substr(W),this.query=a.substr(W+1),e&&(this.query=PA.parse(this.query)),a=a.slice(0,W)):e&&(this.search="",this.query={}),a&&(this.pathname=a),mf[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",V=this.search||"";this.path=B+V}return this.href=this.format(),this};function lye(t){return typeof t=="string"&&(t=Dw(t)),t instanceof aa?t.format():aa.prototype.format.call(t)}aa.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=PA.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||mf[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function cye(t,e){return Dw(t,!1,!0).resolve(e)}aa.prototype.resolve=function(t){return this.resolveObject(Dw(t,!1,!0)).format()};aa.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new aa;e.parse(t,!1,!0),t=e}for(var n=new aa,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return mf[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!mf[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var h=c[u];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!CA[t.protocol]){for(var v=(t.pathname||"").split("/");v.length&&!(t.host=v.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),n.pathname=v.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",g=n.search||"";n.path=f+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&n.pathname.charAt(0)==="/",y=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=y||m||n.host&&t.pathname,b=x,w=n.pathname&&n.pathname.split("/")||[],v=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!mf[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(w[0]===""?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host=null),x=x&&(v[0]===""||w[0]==="")),y)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=v;else if(v.length)w||(w=[]),w.pop(),w=w.concat(v),n.search=t.search,n.query=t.query;else if(t.search!=null){if(E){n.host=w.shift(),n.hostname=n.host;var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.hostname=S.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=w.slice(-1)[0],R=(n.host||t.host||w.length>1)&&(C==="."||C==="..")||C==="",I=0,L=w.length;L>=0;L--)C=w[L],C==="."?w.splice(L,1):C===".."?(w.splice(L,1),I++):I&&(w.splice(L,1),I--);if(!x&&!b)for(;I--;I)w.unshift("..");x&&w[0]!==""&&(!w[0]||w[0].charAt(0)!=="/")&&w.unshift(""),R&&w.join("/").substr(-1)!=="/"&&w.push("");var O=w[0]===""||w[0]&&w[0].charAt(0)==="/";if(E){n.hostname=O?"":w.length?w.shift():"",n.host=n.hostname;var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.hostname=S.shift(),n.host=n.hostname)}return x=x||n.host&&w.length,x&&!O&&w.unshift(""),w.length>0?n.pathname=w.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};aa.prototype.parseHost=function(){var t=this.host,e=tye.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var uye=Dw,hye=cye,dye=lye;const eB={};function _t(t,e,n=3){if(eB[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),eB[e]=!0}const fye={get parse(){return _t("7.3.0","utils.url.parse is deprecated, use native URL API instead."),uye},get format(){return _t("7.3.0","utils.url.format is deprecated, use native URL API instead."),dye},get resolve(){return _t("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),hye}};function zo(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function dg(t){return t.split("?")[0].split("#")[0]}function pye(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gye(t,e,n){return t.replace(new RegExp(pye(e),"g"),n)}function mye(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Cr={toPosix(t){return gye(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){zo(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(zo(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const r=dg(this.toPosix(e??Xe.ADAPTER.getBaseUrl())),i=dg(this.toPosix(n??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?Cr.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(zo(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=mye(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return zo(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(zo(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(zo(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){zo(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){zo(t),e&&zo(e),t=dg(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){zo(t),t=dg(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){zo(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=dg(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let TS;async function TG(){return TS??(TS=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return $i.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return $i.UNPACK;const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(r),t.deleteTexture(n),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?$i.PMA:$i.UNPACK})()),TS}function yye(){_t("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function vye(){_t("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let SS;function SG(){return typeof SS>"u"&&(SS=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Xe.ADAPTER.getWebGLRenderingContext())return!1;const n=Xe.ADAPTER.createCanvas();let r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const i=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),SS}var bye={grad:.9,turn:360,rad:360/(2*Math.PI)},gl=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Wr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},vo=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},CG=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},tB=function(t){return{r:vo(t.r,0,255),g:vo(t.g,0,255),b:vo(t.b,0,255),a:vo(t.a)}},CS=function(t){return{r:Wr(t.r),g:Wr(t.g),b:Wr(t.b),a:Wr(t.a,3)}},_ye=/^#([0-9a-f]{3,8})$/i,Zv=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},PG=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},AG=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},nB=function(t){return{h:CG(t.h),s:vo(t.s,0,100),l:vo(t.l,0,100),a:vo(t.a)}},rB=function(t){return{h:Wr(t.h),s:Wr(t.s),l:Wr(t.l),a:Wr(t.a,3)}},iB=function(t){return AG((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},vm=function(t){return{h:(e=PG(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},xye=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wye=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Eye=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tye=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AA={string:[[function(t){var e=_ye.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Wr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Wr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Eye.exec(t)||Tye.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:tB({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=xye.exec(t)||wye.exec(t);if(!e)return null;var n,r,i=nB({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(bye[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return iB(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return gl(e)&&gl(n)&&gl(r)?tB({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!gl(e)||!gl(n)||!gl(r))return null;var o=nB({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return iB(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!gl(e)||!gl(n)||!gl(r))return null;var o=function(a){return{h:CG(a.h),s:vo(a.s,0,100),v:vo(a.v,0,100),a:vo(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return AG(o)},"hsv"]]},sB=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},Sye=function(t){return typeof t=="string"?sB(t.trim(),AA.string):typeof t=="object"&&t!==null?sB(t,AA.object):[null,void 0]},PS=function(t,e){var n=vm(t);return{h:n.h,s:vo(n.s+100*e,0,100),l:n.l,a:n.a}},AS=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},oB=function(t,e){var n=vm(t);return{h:n.h,s:n.s,l:vo(n.l+100*e,0,100),a:n.a}},RA=function(){function t(e){this.parsed=Sye(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Wr(AS(this.rgba),2)},t.prototype.isDark=function(){return AS(this.rgba)<.5},t.prototype.isLight=function(){return AS(this.rgba)>=.5},t.prototype.toHex=function(){return e=CS(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Zv(Wr(255*s)):"","#"+Zv(n)+Zv(r)+Zv(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return CS(this.rgba)},t.prototype.toRgbString=function(){return e=CS(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return rB(vm(this.rgba))},t.prototype.toHslString=function(){return e=rB(vm(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=PG(this.rgba),{h:Wr(e.h),s:Wr(e.s),v:Wr(e.v),a:Wr(e.a,3)};var e},t.prototype.invert=function(){return Oa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Oa(PS(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Oa(PS(this.rgba,-e))},t.prototype.grayscale=function(){return Oa(PS(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Oa(oB(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Oa(oB(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Oa({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Wr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=vm(this.rgba);return typeof e=="number"?Oa({h:e,s:n.s,l:n.l,a:n.a}):Wr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Oa(e).toHex()},t}(),Oa=function(t){return t instanceof RA?t:new RA(t)},aB=[],Cye=function(t){t.forEach(function(e){aB.indexOf(e)<0&&(e(RA,AA),aB.push(e))})};function Pye(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,f="black";if(!s.length)for(var g in n)s[g]=new t(n[g]).toRgb();for(var m in n){var y=(a=u,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));y<h&&(h=y,f=m)}return f}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}Cye([Pye]);const Od=class J1{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof J1)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,n){const r=typeof e;if(r!==typeof n)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((i,s)=>i===n[s]);if(e!==null&&n!==null){const i=Object.keys(e),s=Object.keys(n);return i.length!==s.length?!1:i.every(o=>e[o]===n[o])}return e===n}toRgba(){const[e,n,r,i]=this._components;return{r:e,g:n,b:r,a:i}}toRgb(){const[e,n,r]=this._components;return{r:e,g:n,b:r}}toRgbaString(){const[e,n,r]=this.toUint8RgbArray();return`rgba(${e},${n},${r},${this.alpha})`}toUint8RgbArray(e){const[n,r,i]=this._components;return e=e??[],e[0]=Math.round(n*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,r,i,s]=J1.temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return n&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[n,r,i]=this._components;return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[n,r,i,s]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let n,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;n=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,r,i,s=255]=e,n/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=J1.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Oa(e);o.isValid()&&({r:n,g:r,b:i,a:s}=o.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,n,r]=this._components;this._int=(e*255<<16)+(n*255<<8)+(r*255|0)}_clamp(e,n=0,r=1){return typeof e=="number"?Math.min(Math.max(e,n),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,n),r)}),e)}};Od.shared=new Od,Od.temp=new Od,Od.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let sn=Od;function Aye(t,e=[]){return _t("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),sn.shared.setValue(t).toRgbArray(e)}function RG(t){return _t("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),sn.shared.setValue(t).toHex()}function Rye(t){return _t("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),sn.shared.setValue(t).toNumber()}function IG(t){return _t("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),sn.shared.setValue(t).toNumber()}function Iye(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[mt.NORMAL_NPM]=mt.NORMAL,t[mt.ADD_NPM]=mt.ADD,t[mt.SCREEN_NPM]=mt.SCREEN,e[mt.NORMAL]=mt.NORMAL_NPM,e[mt.ADD]=mt.ADD_NPM,e[mt.SCREEN]=mt.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const RM=Iye();function IM(t,e){return RM[e?1:0][t]}function Mye(t,e,n,r=!0){return _t("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),sn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}function Oye(t,e){return _t("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),sn.shared.setValue(t).toPremultiplied(e)}function Lye(t,e,n,r=!0){return _t("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),sn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}const MG=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function OG(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function Nw(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}const kye={Float32Array,Uint32Array,Int32Array,Uint8Array};function Dye(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],h=Nw(u);i[h]||(i[h]=new kye[h](s)),o=i[h];for(let f=0;f<u.length;f++){const g=(f/c|0)*r+a,m=f%c;o[g+m]=u[f]}a+=c}return new Float32Array(s)}function n0(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function IA(t){return!(t&t-1)&&!!t}function MA(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function hh(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function Al(t){return t===0?0:t<0?-1:1}let Nye=0;function iu(){return++Nye}const OA=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};OA.EMPTY=new OA(0,0,0,0);let LA=OA;const kA={},Fi=Object.create(null),Ss=Object.create(null);function Fye(){let t;for(t in Fi)Fi[t].destroy();for(t in Ss)Ss[t].destroy()}function Bye(){let t;for(t in Fi)delete Fi[t];for(t in Ss)delete Ss[t]}class LG{constructor(e,n,r){this._canvas=Xe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Xe.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function lB(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function cB(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function kG(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,e,n).data;let s=0,o=0,a=e-1,l=n-1;for(;o<n&&lB(i,e,o);)++o;if(o===n)return LA.EMPTY;for(;lB(i,e,l);)--l;for(;cB(i,e,s,o,l);)++s;for(;cB(i,e,a,o,l);)--a;return++a,++l,new LA(s,o,a,l)}function DG(t){const e=kG(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}function zye(t){const e=MG.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function NG(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}function Qa(t,e=1){var r;const n=(r=Xe.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}const Uye=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ss,BoundingBox:LA,CanvasRenderTarget:LG,DATA_URI:MG,EventEmitter:mp,ProgramCache:kA,TextureCache:Fi,clearTextureCache:Bye,correctBlendMode:IM,createIndicesForQuads:OG,decomposeDataUri:zye,deprecation:_t,destroyTextureCache:Fye,detectVideoAlphaMode:TG,determineCrossOrigin:NG,earcut:gI,getBufferType:Nw,getCanvasBoundingBox:kG,getResolutionOfUrl:Qa,hex2rgb:Aye,hex2string:RG,interleaveTypedArrays:Dye,isMobile:Zo,isPow2:IA,isWebGLSupported:SG,log2:MA,nextPow2:n0,path:Cr,premultiplyBlendMode:RM,premultiplyRgba:Mye,premultiplyTint:Oye,premultiplyTintToRgba:Lye,removeItems:hh,rgb2hex:IG,sayHello:vye,sign:Al,skipHello:yye,string2hex:Rye,trimCanvas:DG,uid:iu,url:fye},Symbol.toStringTag,{value:"Module"}));var Ue=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Ue||{});const DA=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},uB=(t,e)=>DA(t).priority??e,nt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(DA).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map(DA).forEach(e=>{e.type.forEach(n=>{var s,o;const r=this._addHandlers,i=this._queue;r[n]?(s=r[n])==null||s.call(r,e):(i[n]=i[n]||[],(o=i[n])==null||o.push(e))})}),this},handle(t,e,n){var o;const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>uB(s,n)-uB(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class b_{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const $ye=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function jye(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function FG(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=$ye.replace(/%forloop%/gi,jye(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const RS=0,IS=1,MS=2,OS=3,LS=4,kS=5;class da{constructor(){this.data=0,this.blendMode=mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<RS)}set blend(e){!!(this.data&1<<RS)!==e&&(this.data^=1<<RS)}get offsets(){return!!(this.data&1<<IS)}set offsets(e){!!(this.data&1<<IS)!==e&&(this.data^=1<<IS)}get culling(){return!!(this.data&1<<MS)}set culling(e){!!(this.data&1<<MS)!==e&&(this.data^=1<<MS)}get depthTest(){return!!(this.data&1<<OS)}set depthTest(e){!!(this.data&1<<OS)!==e&&(this.data^=1<<OS)}get depthMask(){return!!(this.data&1<<kS)}set depthMask(e){!!(this.data&1<<kS)!==e&&(this.data^=1<<kS)}get clockwiseFrontFace(){return!!(this.data&1<<LS)}set clockwiseFrontFace(e){!!(this.data&1<<LS)!==e&&(this.data^=1<<LS)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==mt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new da;return e.depthTest=!1,e.blend=!0,e}}da.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const __=[];function MM(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=__.length-1;r>=0;--r){const i=__[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ds{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let h=0,f=u.length;h<f;h++)u[h][c](e,n,r,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ds.prototype,{dispatch:{value:Ds.prototype.emit},run:{value:Ds.prototype.emit}});let Vf=class{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Ds("setRealSize"),this.onUpdate=new Ds("update"),this.onError=new Ds("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}};class q0 extends Vf{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=n.unpackAlignment??4}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===$i.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Gye={scaleMode:Ga.NEAREST,alphaMode:$i.NPM},NA=class Ld extends mp{constructor(e=null,n=null){super(),n=Object.assign({},Ld.defaultOptions,n);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:h,target:f,resolution:g,resourceOptions:m}=n;e&&!(e instanceof Vf)&&(e=MM(e,m),e.internal=!0),this.resolution=g||Xe.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=h,this.target=f,this.alphaMode=r,this.uid=iu(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,n){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,r=!0),r&&this.dirtyStyleId++,this}setSize(e,n,r){return r=r||this.resolution,this.setRealSize(e*r,n*r,r)}setRealSize(e,n,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=IA(this.realWidth)&&IA(this.realHeight)}setResolution(e){const n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ss[this.cacheId],delete Fi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Ld.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,n,r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${iu()}`}s=e._pixiId}let o=Ss[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Ld(e,n),o.cacheId=s,Ld.addToCache(o,s)),o}static fromBuffer(e,n,r,i){e=e||new Float32Array(n*r*4);const s=new q0(e,{width:n,height:r,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=Re.RGBA,a=lt.FLOAT):e instanceof Int32Array?(o=Re.RGBA_INTEGER,a=lt.INT):e instanceof Uint32Array?(o=Re.RGBA_INTEGER,a=lt.UNSIGNED_INT):e instanceof Int16Array?(o=Re.RGBA_INTEGER,a=lt.SHORT):e instanceof Uint16Array?(o=Re.RGBA_INTEGER,a=lt.UNSIGNED_SHORT):e instanceof Int8Array?(o=Re.RGBA,a=lt.BYTE):(o=Re.RGBA,a=lt.UNSIGNED_BYTE),s.internal=!0,new Ld(s,Object.assign({},Gye,{type:a,format:o},i))}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Ss[n]&&Ss[n]!==e&&console.warn(`BaseTexture added to the cache with an id [${n}] that already had an entry`),Ss[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=Ss[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Ss[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)delete Ss[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}};NA.defaultOptions={mipmap:ua.POW2,anisotropicLevel:0,scaleMode:Ga.LINEAR,wrapMode:Ka.CLAMP,alphaMode:$i.UNPACK,target:uh.TEXTURE_2D,format:Re.RGBA,type:lt.UNSIGNED_BYTE},NA._globalBatch=0;let Rt=NA;class x_{constructor(){this.texArray=null,this.blend=0,this.type=yo.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Hye=0,wr=class BG{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=Hye++,this.disposeRunner=new Ds("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?oa.ELEMENT_ARRAY_BUFFER:oa.ARRAY_BUFFER}get index(){return this.type===oa.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new BG(e)}},FA=class zG{constructor(e,n=0,r=!1,i=lt.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new zG(e,n,r,i,s)}};const Vye={Float32Array,Uint32Array,Int32Array,Uint8Array};function Wye(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],h=Nw(u);i[h]||(i[h]=new Vye[h](s)),o=i[h];for(let f=0;f<u.length;f++){const g=(f/c|0)*r+a,m=f%c;o[g+m]=u[f]}a+=c}return new Float32Array(s)}const hB={5126:4,5123:2,5121:1};let Xye=0;const Yye={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let vp=class BA{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=Xye++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ds("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof wr||(n instanceof Array&&(n=new Float32Array(n)),n=new wr(n));const c=e.split("|");if(c.length>1){for(let h=0;h<c.length;h++)this.addAttribute(c[h],n,r,i,s);return this}let u=this.buffers.indexOf(n);return u===-1&&(this.buffers.push(n),u=this.buffers.length-1),this.attributes[e]=new FA(u,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof wr||(e instanceof Array&&(e=new Uint16Array(e)),e=new wr(e)),e.type=oa.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new wr;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*hB[s.type]/4),s.buffer=0}for(r.data=Wye(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new BA;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new wr(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new FA(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=oa.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new BA,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new Yye[Nw(o.buffers[a].data)](i[a]),n.buffers[a]=new wr(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=oa.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){u=h;break}for(const h in o.attributes){const f=o.attributes[h];(f.buffer|0)===u&&(l+=f.size*hB[f.type]/4)}for(let h=0;h<e.length;h++){const f=e[h].indexBuffer.data;for(let g=0;g<f.length;g++)n.indexBuffer.data[g+c]+=a;a+=e[h].buffers[u].data.length/l,c+=f.length}}return n}};class OM extends vp{constructor(e=!1){super(),this._buffer=new wr(null,e,!1),this._indexBuffer=new wr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,lt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,lt.FLOAT).addAttribute("aColor",this._buffer,4,!0,lt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,lt.FLOAT).addIndex(this._indexBuffer)}}const r0=Math.PI*2,UG=180/Math.PI,$G=Math.PI/180;var Yr=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Yr||{});class ft{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new ft(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}}ft.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Qv=[new ft,new ft,new ft,new ft];class xt{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=Yr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new xt(0,0,0,0)}clone(){return new xt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const I=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=I)return!1;const L=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>L}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=Qv[0].set(e.left,e.top),l=Qv[1].set(e.left,e.bottom),c=Qv[2].set(e.right,e.top),u=Qv[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(n.a*n.d-n.b*n.c);if(h===0||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=r||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const f=h*(l.y-a.y),g=h*(a.x-l.x),m=f*r+g*s,y=f*i+g*s,x=f*r+g*o,b=f*i+g*o;if(Math.max(m,y,x,b)<=f*a.x+g*a.y||Math.min(m,y,x,b)>=f*u.x+g*u.y)return!1;const w=h*(a.y-c.y),v=h*(c.x-a.x),E=w*r+v*s,S=w*i+v*s,C=w*r+v*o,R=w*i+v*o;return!(Math.max(E,S,C,R)<=w*a.x+v*a.y||Math.min(E,S,C,R)>=w*u.x+v*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}}xt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class K0{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=Yr.CIRC}clone(){return new K0(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new xt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}K0.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Z0{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=Yr.ELIP}clone(){return new Z0(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new xt(this.x-this.width,this.y-this.height,this.width,this.height)}}Z0.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Xc{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=Yr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Xc(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>n!=u>n&&e<(c-a)*((n-l)/(u-l))+a&&(r=!r)}return r}}Xc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class Q0{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=Yr.RREC}clone(){return new Q0(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}}Q0.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let cr=class eb{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new ft;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new ft;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(a+l);return c<1e-5||Math.abs(r0-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new eb;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new eb}static get TEMP_MATRIX(){return new eb}};cr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Uu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],$u=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ju=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gu=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],zA=[],jG=[],Jv=Math.sign;function qye(){for(let t=0;t<16;t++){const e=[];zA.push(e);for(let n=0;n<16;n++){const r=Jv(Uu[t]*Uu[n]+ju[t]*$u[n]),i=Jv($u[t]*Uu[n]+Gu[t]*$u[n]),s=Jv(Uu[t]*ju[n]+ju[t]*Gu[n]),o=Jv($u[t]*ju[n]+Gu[t]*Gu[n]);for(let a=0;a<16;a++)if(Uu[a]===r&&$u[a]===i&&ju[a]===s&&Gu[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new cr;e.set(Uu[t],$u[t],ju[t],Gu[t],0,0),jG.push(e)}}qye();const Gn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Uu[t],uY:t=>$u[t],vX:t=>ju[t],vY:t=>Gu[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>zA[t][e],sub:(t,e)=>zA[t][Gn.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Gn.S:Gn.N:Math.abs(e)*2<=Math.abs(t)?t>0?Gn.E:Gn.W:e>0?t>0?Gn.SE:Gn.SW:t>0?Gn.NE:Gn.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=jG[Gn.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class Qo{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new Qo(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Qo.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const UA=class{constructor(){this.worldTransform=new cr,this.localTransform=new cr,this.position=new Qo(this.onChange,this,0,0),this.scale=new Qo(this.onChange,this,1,1),this.pivot=new Qo(this.onChange,this,0,0),this.skew=new Qo(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};UA.IDENTITY=new UA;let J0=UA;J0.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Kye=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Zye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function dB(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function DS(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function GG(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return DS(2*e);case"bvec3":return DS(3*e);case"bvec4":return DS(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const dh=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],Qye={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Jye={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function eve(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((r=t.uniforms[i])==null?void 0:r.group)===!0&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<dh.length;l++)if(dh[l].test(s,o)){n.push(dh[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?Qye:Jye)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const HG={};let vd=HG;function VG(){if(vd===HG||vd!=null&&vd.isContextLost()){const t=Xe.ADAPTER.createCanvas();let e;Xe.PREFER_ENV>=du.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),vd=e}return vd}let e1;function tve(){if(!e1){e1=Is.MEDIUM;const t=VG();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(e1=e.precision?Is.HIGH:Is.MEDIUM)}}return e1}function fB(t,e){const n=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function nve(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||fB(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||fB(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const rve={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function WG(t){return rve[t]}let t1=null;const pB={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function XG(t,e){if(!t1){const n=Object.keys(pB);t1={};for(let r=0;r<n.length;++r){const i=n[r];t1[t[i]]=pB[i]}}return t1[e]}function gB(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===Is.HIGH&&n!==Is.HIGH&&(r=Is.MEDIUM),`precision ${r} float;
${t}`}else if(n!==Is.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let fg;function YG(){if(typeof fg=="boolean")return fg;try{fg=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{fg=!1}return fg}let ive=0;const n1={},$A=class kd{constructor(e,n,r="pixi-shader",i={}){this.extra={},this.id=ive++,this.vertexSrc=e||kd.defaultVertexSrc,this.fragmentSrc=n||kd.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),n1[r]?(n1[r]++,r+=`-${n1[r]}`):n1[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=gB(this.vertexSrc,kd.defaultVertexPrecision,Is.HIGH),this.fragmentSrc=gB(this.fragmentSrc,kd.defaultFragmentPrecision,tve())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Zye}static get defaultFragmentSrc(){return Kye}static from(e,n,r){const i=e+n;let s=kA[i];return s||(kA[i]=s=new kd(e,n,r)),s}};$A.defaultVertexPrecision=Is.HIGH,$A.defaultFragmentPrecision=Zo.apple.device?Is.HIGH:Is.MEDIUM;let Ha=$A,sve=0;class xo{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=sve++,this.static=!!n,this.ubo=!!r,e instanceof wr?(this.buffer=e,this.buffer.type=oa.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new wr(new Float32Array(1)),this.buffer.type=oa.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new xo(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new xo(e,n,r)}static uboFrom(e,n){return new xo(e,n??!0,!0)}}let Ml=class qG{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof xo?this.uniformGroup=n:this.uniformGroup=new xo(n):this.uniformGroup=new xo({}),this.disposeRunner=new Ds("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Ha.from(e,n);return new qG(i,r)}};class KG{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=xo.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ha(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new cr,default:this.defaultGroupCache[e]};return new Ml(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class w_{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function ove(){return!Zo.apple.device}function ave(t){let e=!0;const n=Xe.ADAPTER.getNavigator();if(Zo.tablet||Zo.phone){if(Zo.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Zo.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class ey{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var lve=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,cve=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Dg=class jo extends ey{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=OM,this.vertexSize=6,this.state=da.for2d(),this.size=jo.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??ave(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??ove(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return _t("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return cve}static get defaultFragmentTemplate(){return lve}setShaderGenerator({vertex:e=jo.defaultVertexSrc,fragment:n=jo.defaultFragmentTemplate}={}){this.shaderGenerator=new KG(e,n)}contextChange(){const e=this.renderer.gl;Xe.PREFER_ENV===du.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),jo.defaultMaxTextures),this.maxTextures=FG(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:n}=jo,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new x_);for(;n.length<i;)n.push(new w_);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:n}=this,r=jo._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Rt._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(s,n);for(let h=0;h<this._bufferSize;++h){const f=e[h];e[h]=null,f._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++a),f._batchEnabled=a,f.touched=o,c.elements[c.count++]=f)}c.count>0&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;Rt._globalBatch=a}buildDrawCalls(e,n,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=jo._drawCallPool;let c=this._dcIndex,u=this._aIndex,h=this._iIndex,f=l[c];f.start=this._iIndex,f.texArray=e;for(let g=n;g<r;++g){const m=i[g],y=m._texture.baseTexture,x=RM[y.alphaMode?1:0][m.blendMode];i[g]=null,n<g&&f.blend!==x&&(f.size=h-f.start,n=g,f=l[++c],f.texArray=e,f.start=h),this.packInterleavedGeometry(m,s,o,u,h),u+=m.vertexData.length/2*a,h+=m.indices.length,f.blend=x}n<r&&(f.size=h-f.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){const n=this.renderer.texture;for(let r=0;r<e.count;r++)n.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:n,_indexBuffer:r}=this;jo.canUploadSameBuffer?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:n,state:r}=this.renderer,i=jo._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,r.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),jo.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const n=n0(Math.ceil(e/8)),r=MA(n),i=n*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new b_(i*this.vertexSize*4)),s}getIndexBuffer(e){const n=n0(Math.ceil(e/12)),r=MA(n),i=n*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,n,r,i,s){const{uint32View:o,float32View:a}=n,l=i/this.vertexSize,c=e.uvs,u=e.indices,h=e.vertexData,f=e._texture.baseTexture._batchLocation,g=Math.min(e.worldAlpha,1),m=sn.shared.setValue(e._tintRGB).toPremultiplied(g,e._texture.baseTexture.alphaMode>0);for(let y=0;y<h.length;y+=2)a[i++]=h[y],a[i++]=h[y+1],a[i++]=c[y],a[i++]=c[y+1],o[i++]=m,a[i++]=f;for(let y=0;y<u.length;y++)r[s++]=l+u[y]}};Dg.defaultBatchSize=4096,Dg.extension={name:"batch",type:Ue.RendererPlugin},Dg._drawCallPool=[],Dg._textureArrayPool=[];let Ec=Dg;nt.add(Ec);var uve=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,hve=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const jA=class Ng extends Ml{constructor(e,n,r){const i=Ha.from(e||Ng.defaultVertexSrc,n||Ng.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=Ng.defaultResolution,this.multisample=Ng.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new da}apply(e,n,r,i,s){e.applyFilter(this,n,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return hve}static get defaultFragmentSrc(){return uve}};jA.defaultResolution=1,jA.defaultMultisample=gr.NONE;let Ai=jA;class i0{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new sn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}i0.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},i0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"background"};nt.add(i0);class LM{constructor(e){this.renderer=e,this.emptyRenderer=new ey(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],h=u._batchLocation;if(h>=0&&h<i&&n[h]===u){o[c]=h;continue}for(;l<i;){const f=n[l];if(f&&f._batchEnabled===r&&f._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,n[l]=u;break}}}destroy(){this.renderer=null}}LM.extension={type:Ue.RendererSystem,name:"batch"};nt.add(LM);let mB=0;class s0{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=mB++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=mB++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(Xe.PREFER_ENV>=du.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}s0.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},s0.extension={type:Ue.RendererSystem,name:"context"};nt.add(s0);let E_=class{constructor(e,n){if(this.width=Math.round(e),this.height=Math.round(n),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ds("disposeFramebuffer"),this.multisample=gr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Rt(null,{scaleMode:Ga.NEAREST,resolution:1,mipmap:ua.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Rt(null,{scaleMode:Ga.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ua.OFF,format:Re.DEPTH_COMPONENT,type:lt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!e||!n)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};class kM extends Rt{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=gr.NONE),super(null,e),this.mipmap=ua.OFF,this.valid=!0,this._clear=new sn([0,0,0,0]),this.framebuffer=new E_(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ja extends Vf{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.displayWidth||n.width,i=n.naturalHeight||n.videoHeight||n.displayHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=NG(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===$i.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class DM extends Ja{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;Ja.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??Xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$i.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Fw{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=Gn.add(r,Gn.NW),this.x0=l+o*Gn.uX(r),this.y0=c+a*Gn.uY(r),r=Gn.add(r,2),this.x1=l+o*Gn.uX(r),this.y1=c+a*Gn.uY(r),r=Gn.add(r,2),this.x2=l+o*Gn.uX(r),this.y2=c+a*Gn.uY(r),r=Gn.add(r,2),this.x3=l+o*Gn.uX(r),this.y3=c+a*Gn.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Fw.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const yB=new Fw;function r1(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}let yt=class Cn extends mp{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new xt(0,0,1,1)),e instanceof Cn&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=yB,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ft(o.x,o.y):new ft(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&Fi[n.url]&&Cn.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Cn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new Cn(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===yB&&(this._uvs=new Fw),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Rt){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${iu()}`,Rt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${iu()}`}s=e._pixiId}let o=Fi[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Rt)?(n.resolution||(n.resolution=Qa(e)),o=new Cn(new Rt(e,n)),o.baseTexture.cacheId=s,Rt.addToCache(o.baseTexture,s),Cn.addToCache(o,s)):!o&&e instanceof Rt&&(o=new Cn(e),Cn.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=Cn.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new Cn(Rt.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Rt(e,Object.assign({scaleMode:Rt.defaultOptions.scaleMode,resolution:Qa(n)},i)),{resource:o}=s;o instanceof DM&&(o.url=n);const a=new Cn(s);return r||(r=n),Rt.addToCache(a.baseTexture,r),Cn.addToCache(a,r),r!==n&&(Rt.addToCache(a.baseTexture,n),Cn.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Fi[n]&&Fi[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),Fi[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=Fi[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Fi[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)Fi[e.textureCacheIds[n]]===e&&delete Fi[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Cn._EMPTY||(Cn._EMPTY=new Cn(new Rt),r1(Cn._EMPTY),r1(Cn._EMPTY.baseTexture)),Cn._EMPTY}static get WHITE(){if(!Cn._WHITE){const e=Xe.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),Cn._WHITE=new Cn(Rt.from(e)),r1(Cn._WHITE),r1(Cn._WHITE.baseTexture)}return Cn._WHITE}};class pu extends yt{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new pu(new kM(e))}}class NM{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=gr.NONE){const i=new kM(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new pu(i)}getOptimalTexture(e,n,r=1,i=gr.NONE){let s;e=Math.max(Math.ceil(e*r-1e-6),1),n=Math.max(Math.ceil(n*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=n0(e),n=n0(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||gr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}NM.SCREEN_KEY=-1;class ZG extends vp{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class FM extends vp{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new wr(this.vertices),this.uvBuffer=new wr(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class QG{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=gr.NONE,this.sourceFrame=new xt,this.destinationFrame=new xt,this.bindingSourceFrame=new xt,this.bindingDestinationFrame=new xt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const i1=[new ft,new ft,new ft,new ft],NS=new cr;class BM{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new NM,this.statePool=[],this.quad=new ZG,this.quadUv=new FM,this.tempRect=new xt,this.activeState={},this.globalUniforms=new xo({outputFrame:new xt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new QG,o=r.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=r.resolution,l=r.multisample;let c=n[0].resolution||a,u=n[0].multisample??l,h=n[0].padding,f=n[0].autoFit,g=n[0].legacy??!0;for(let x=1;x<n.length;x++){const b=n[x];c=Math.min(c,b.resolution||a),u=Math.min(u,b.multisample??l),h=this.useMaxPadding?Math.max(h,b.padding):h+b.padding,f=f&&b.autoFit,g=g||(b.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=g,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const m=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(NS.copyFrom(r.projection.transform).invert(),m),f?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,y),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=i.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,l.renderTexture,Yo.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,n.resolution);u.filterFrame=c.filterFrame;let h=0;for(h=0;h<r.length-1;++h){h===1&&n.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,n.resolution),u.filterFrame=c.filterFrame),r[h].apply(this,c,u,Yo.CLEAR,n);const f=c;c=u,u=f}r[h].apply(this,c,l.renderTexture,Yo.BLEND,n),h>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Yo.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Yo.CLEAR||n===Yo.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yo.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yo.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(cr.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=gr.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||gr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=i1[0],i=i1[1],s=i1[2],o=i1[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),u=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=u-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?NS.copyFrom(s):NS.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}BM.extension={type:Ue.RendererSystem,name:"filter"};nt.add(BM);class JG{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=gr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const dve=new xt;class zM{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new E_(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Xe.PREFER_ENV===du.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=g_.COLOR|g_.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new JG(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){n.bindRenderbuffer(n.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=n.DEPTH_STENCIL:e.depth&&e.stencil?o=n.DEPTH24_STENCIL8:e.depth?o=n.DEPTH_COMPONENT24:o=n.STENCIL_INDEX8,r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,o,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,n)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,c=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,c=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,c,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=gr.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=gr.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new E_(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=dve,n.width=i.width,n.height=i.height),r||(r=n);const c=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=n.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new xt}destroy(){this.renderer=null}}zM.extension={type:Ue.RendererSystem,name:"framebuffer"};nt.add(zM);const FS={5126:4,5123:2,5121:1};class UM{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Xe.PREFER_ENV===du.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const h=e.buffers,f=e.attributes,g={},m={};for(const y in h)g[y]=0,m[y]=0;for(const y in f)!f[y].size&&a.attributeData[y]?f[y].size=a.attributeData[y].size:f[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),g[f[y].buffer]+=f[y].size*FS[f[y].type];for(const y in f){const x=f[y],b=x.size;x.stride===void 0&&(g[x.buffer]===b*FS[x.type]?x.stride=0:x.stride=g[x.buffer]),x.start===void 0&&(x.start=m[x.buffer],m[x.buffer]+=b*FS[x.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let y=0;y<h.length;y++){const x=h[y];o.bind(x),r&&x._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(oa.ARRAY_BUFFER),u}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!n&&o.dispose(s[l],n))}if(!n){for(const l in r)if(l[0]==="g"){const c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],h=o[u.buffer],f=h._glBuffers[i];if(n.attributeData[c]){l!==f&&(s.bind(h),l=f);const g=n.attributeData[c].location;if(r.enableVertexAttribArray(g),r.vertexAttribPointer(g,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(g,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}UM.extension={type:Ue.RendererSystem,name:"geometry"};nt.add(UM);const vB=new cr;class Bw{constructor(e,n){this._texture=e,this.mapCoord=new cr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(vB.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(vB));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var fve=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,pve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class eH extends Ai{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||pve,n||fve,r),this.maskSprite=i,this.maskMatrix=new cr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Bw(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class tH{constructor(e=null){this.type=xr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ai.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=xr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class $M{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new tH;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==xr.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case xr.SCISSOR:this.renderer.scissor.push(r);break;case xr.STENCIL:this.renderer.stencil.push(r);break;case xr.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case xr.COLOR:this.pushColorMask(r);break}r.type===xr.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case xr.SCISSOR:this.renderer.scissor.pop(n);break;case xr.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case xr.SPRITE:this.popSpriteMask(n);break;case xr.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===xr.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=xr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=xr.SCISSOR:e.type=xr.STENCIL:e.type=xr.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new eH])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=n;const s=r.filterArea;r.filterArea=n.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}$M.extension={type:Ue.RendererSystem,name:"mask"};nt.add($M);class nH{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const bB=new cr,_B=[],rH=class tb extends nH{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const n=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,_B.pop()??new xt);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),n&&o.fit(n),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:n,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:n}=e;if(!n.isFastRect||!n.isFastRect()||tb.isMatrixRotated(n.worldTransform)||tb.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,n,r,i,s){tb.isMatrixRotated(s)||(s=s?bB.copyFrom(s):bB.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:n}=this.renderer;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:n}=this.renderer;e&&_B.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)}};rH.extension={type:Ue.RendererSystem,name:"scissor"};let iH=rH;nt.add(iH);class jM extends nH{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}jM.extension={type:Ue.RendererSystem,name:"stencil"};nt.add(jM);class GM{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return _t("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}GM.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"_plugin"};nt.add(GM);class HM{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new cr,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}HM.extension={type:Ue.RendererSystem,name:"projection"};nt.add(HM);const gve=new J0,xB=new xt;class VM{constructor(e){this.renderer=e,this._tempMatrix=new cr}generateTexture(e,n){const{region:r,...i}=n||{},s=(r==null?void 0:r.copyTo(xB))||e.getLocalBounds(xB,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=pu.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=gve,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}VM.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"textureGenerator"};nt.add(VM);const Ru=new xt,pg=new xt;class WM{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xt,this.destinationFrame=new xt,this.viewportFrame=new xt}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(Ru.width=e.frame.width,Ru.height=e.frame.height,n=Ru),r||(pg.x=e.frame.x,pg.y=e.frame.y,pg.width=n.width,pg.height=n.height,r=pg),o=s.framebuffer):(a=i.resolution,n||(Ru.width=i._view.screen.width,Ru.height=i._view.screen.height,n=Ru),r||(r=Ru,r.width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=sn.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:h}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}WM.extension={type:Ue.RendererSystem,name:"renderTexture"};nt.add(WM);class mve{}class sH{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function yve(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=XG(e,s.type),a={type:o,name:s.name,size:WG(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function vve(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=XG(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:GG(l,s.size)}}return n}function oH(t,e){var a;const n=dB(t,t.VERTEX_SHADER,e.vertexSrc),r=dB(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||nve(t,i,n,r),e.attributeData=yve(i,t),e.uniformData=vve(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(i,c,l[c]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:GG(c.type,c.size)}}return new sH(i,o)}function bve(t,e,n,r,i){n.buffer.update(i)}const _ve={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},aH={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function lH(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=aH[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function cH(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function uH(t,e){if(!t.autoManage)return{size:0,syncFunc:bve};const n=cH(t.uniforms,e),{uboElements:r,size:i}=lH(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let h=0;h<dh.length;h++){const f=dh[h];if(f.codeUbo&&f.test(a.data,l)){s.push(`offset = ${a.offset/4};`,dh[h].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const h=WG(a.data.type),f=Math.max(aH[a.data.type]/16,1),g=h/f,m=(4-g%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${g}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const h=_ve[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let xve=0;const s1={textureCount:0,uboCount:0};class XM{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xve++}systemCheck(){if(!YG())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(s1.textureCount=0,s1.uboCount=0,this.syncUniformGroup(e.uniformGroup,s1)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=eve(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,s1,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=uH(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=oH(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}XM.extension={type:Ue.RendererSystem,name:"shader"};nt.add(XM);class o0{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.4.0 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}o0.defaultOptions={hello:!1},o0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"startup"};nt.add(o0);function wve(t,e=[]){return e[mt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.ADD]=[t.ONE,t.ONE],e[mt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.NONE]=[0,0],e[mt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[mt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[mt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[mt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[mt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[mt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[mt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[mt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[mt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[mt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const Eve=0,Tve=1,Sve=2,Cve=3,Pve=4,Ave=5,hH=class GA{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=mt.NONE,this._blendEq=!1,this.map=[],this.map[Eve]=this.setBlend,this.map[Tve]=this.setOffset,this.map[Sve]=this.setCullFace,this.map[Cve]=this.setDepthTest,this.map[Pve]=this.setFrontFace,this.map[Ave]=this.setDepthMask,this.checks=[],this.defaultState=new da,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=wve(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let n=this.stateId^e.data,r=0;for(;n;)n&1&&this.map[r].call(this,!!(e.data&1<<r)),n=n>>1,r++;this.stateId=e.data}for(let n=0;n<this.checks.length;n++)this.checks[n](this,e)}forceState(e){e=e||this.defaultState;for(let n=0;n<this.map.length;n++)this.map[n].call(this,!!(e.data&1<<n));for(let n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(GA.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(GA.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const n=this.blendModes[e],r=this.gl;n.length===2?r.blendFunc(n[0],n[1]):r.blendFuncSeparate(n[0],n[1],n[2],n[3]),n.length===6?(this._blendEq=!0,r.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,n){this.gl.polygonOffset(e,n)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,n){const r=this.checks.indexOf(e);n&&r===-1?this.checks.push(e):!n&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,n){e.setBlendMode(n.blendMode)}static checkPolygonOffset(e,n){e.setPolygonOffset(1,n.polygonOffset)}destroy(){this.gl=null}};hH.extension={type:Ue.RendererSystem,name:"state"};let dH=hH;nt.add(dH);class fH extends mp{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new Ds(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Fg=class nb{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=nb.defaultMaxIdle,this.checkCountMax=nb.defaultCheckCountMax,this.mode=nb.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==kw.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let r=!1;for(let i=0;i<n.length;i++){const s=n[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<n.length;s++)n[s]!==null&&(n[i++]=n[s]);n.length=i}}unload(e){const n=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&n.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Fg.defaultMode=kw.AUTO,Fg.defaultMaxIdle=60*60,Fg.defaultCheckCountMax=60*10,Fg.extension={type:Ue.RendererSystem,name:"textureGC"};let Tc=Fg;nt.add(Tc);class rb{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=lt.UNSIGNED_BYTE,this.internalFormat=Re.RGBA,this.samplerType=0}}function Rve(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:We.FLOAT,[t.RGBA]:We.FLOAT,[t.ALPHA]:We.FLOAT,[t.LUMINANCE]:We.FLOAT,[t.LUMINANCE_ALPHA]:We.FLOAT,[t.R8]:We.FLOAT,[t.R8_SNORM]:We.FLOAT,[t.RG8]:We.FLOAT,[t.RG8_SNORM]:We.FLOAT,[t.RGB8]:We.FLOAT,[t.RGB8_SNORM]:We.FLOAT,[t.RGB565]:We.FLOAT,[t.RGBA4]:We.FLOAT,[t.RGB5_A1]:We.FLOAT,[t.RGBA8]:We.FLOAT,[t.RGBA8_SNORM]:We.FLOAT,[t.RGB10_A2]:We.FLOAT,[t.RGB10_A2UI]:We.FLOAT,[t.SRGB8]:We.FLOAT,[t.SRGB8_ALPHA8]:We.FLOAT,[t.R16F]:We.FLOAT,[t.RG16F]:We.FLOAT,[t.RGB16F]:We.FLOAT,[t.RGBA16F]:We.FLOAT,[t.R32F]:We.FLOAT,[t.RG32F]:We.FLOAT,[t.RGB32F]:We.FLOAT,[t.RGBA32F]:We.FLOAT,[t.R11F_G11F_B10F]:We.FLOAT,[t.RGB9_E5]:We.FLOAT,[t.R8I]:We.INT,[t.R8UI]:We.UINT,[t.R16I]:We.INT,[t.R16UI]:We.UINT,[t.R32I]:We.INT,[t.R32UI]:We.UINT,[t.RG8I]:We.INT,[t.RG8UI]:We.UINT,[t.RG16I]:We.INT,[t.RG16UI]:We.UINT,[t.RG32I]:We.INT,[t.RG32UI]:We.UINT,[t.RGB8I]:We.INT,[t.RGB8UI]:We.UINT,[t.RGB16I]:We.INT,[t.RGB16UI]:We.UINT,[t.RGB32I]:We.INT,[t.RGB32UI]:We.UINT,[t.RGBA8I]:We.INT,[t.RGBA8UI]:We.UINT,[t.RGBA16I]:We.INT,[t.RGBA16UI]:We.UINT,[t.RGBA32I]:We.INT,[t.RGBA32UI]:We.UINT,[t.DEPTH_COMPONENT16]:We.FLOAT,[t.DEPTH_COMPONENT24]:We.FLOAT,[t.DEPTH_COMPONENT32F]:We.FLOAT,[t.DEPTH_STENCIL]:We.FLOAT,[t.DEPTH24_STENCIL8]:We.FLOAT,[t.DEPTH32F_STENCIL8]:We.FLOAT}:e={[t.RGB]:We.FLOAT,[t.RGBA]:We.FLOAT,[t.ALPHA]:We.FLOAT,[t.LUMINANCE]:We.FLOAT,[t.LUMINANCE_ALPHA]:We.FLOAT,[t.DEPTH_STENCIL]:We.FLOAT},e}function Ive(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[lt.UNSIGNED_BYTE]:{[Re.RGBA]:t.RGBA8,[Re.RGB]:t.RGB8,[Re.RG]:t.RG8,[Re.RED]:t.R8,[Re.RGBA_INTEGER]:t.RGBA8UI,[Re.RGB_INTEGER]:t.RGB8UI,[Re.RG_INTEGER]:t.RG8UI,[Re.RED_INTEGER]:t.R8UI,[Re.ALPHA]:t.ALPHA,[Re.LUMINANCE]:t.LUMINANCE,[Re.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[lt.BYTE]:{[Re.RGBA]:t.RGBA8_SNORM,[Re.RGB]:t.RGB8_SNORM,[Re.RG]:t.RG8_SNORM,[Re.RED]:t.R8_SNORM,[Re.RGBA_INTEGER]:t.RGBA8I,[Re.RGB_INTEGER]:t.RGB8I,[Re.RG_INTEGER]:t.RG8I,[Re.RED_INTEGER]:t.R8I},[lt.UNSIGNED_SHORT]:{[Re.RGBA_INTEGER]:t.RGBA16UI,[Re.RGB_INTEGER]:t.RGB16UI,[Re.RG_INTEGER]:t.RG16UI,[Re.RED_INTEGER]:t.R16UI,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[lt.SHORT]:{[Re.RGBA_INTEGER]:t.RGBA16I,[Re.RGB_INTEGER]:t.RGB16I,[Re.RG_INTEGER]:t.RG16I,[Re.RED_INTEGER]:t.R16I},[lt.UNSIGNED_INT]:{[Re.RGBA_INTEGER]:t.RGBA32UI,[Re.RGB_INTEGER]:t.RGB32UI,[Re.RG_INTEGER]:t.RG32UI,[Re.RED_INTEGER]:t.R32UI,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[lt.INT]:{[Re.RGBA_INTEGER]:t.RGBA32I,[Re.RGB_INTEGER]:t.RGB32I,[Re.RG_INTEGER]:t.RG32I,[Re.RED_INTEGER]:t.R32I},[lt.FLOAT]:{[Re.RGBA]:t.RGBA32F,[Re.RGB]:t.RGB32F,[Re.RG]:t.RG32F,[Re.RED]:t.R32F,[Re.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[lt.HALF_FLOAT]:{[Re.RGBA]:t.RGBA16F,[Re.RGB]:t.RGB16F,[Re.RG]:t.RG16F,[Re.RED]:t.R16F},[lt.UNSIGNED_SHORT_5_6_5]:{[Re.RGB]:t.RGB565},[lt.UNSIGNED_SHORT_4_4_4_4]:{[Re.RGBA]:t.RGBA4},[lt.UNSIGNED_SHORT_5_5_5_1]:{[Re.RGBA]:t.RGB5_A1},[lt.UNSIGNED_INT_2_10_10_10_REV]:{[Re.RGBA]:t.RGB10_A2,[Re.RGBA_INTEGER]:t.RGB10_A2UI},[lt.UNSIGNED_INT_10F_11F_11F_REV]:{[Re.RGB]:t.R11F_G11F_B10F},[lt.UNSIGNED_INT_5_9_9_9_REV]:{[Re.RGB]:t.RGB9_E5},[lt.UNSIGNED_INT_24_8]:{[Re.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[lt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Re.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[lt.UNSIGNED_BYTE]:{[Re.RGBA]:t.RGBA,[Re.RGB]:t.RGB,[Re.ALPHA]:t.ALPHA,[Re.LUMINANCE]:t.LUMINANCE,[Re.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[lt.UNSIGNED_SHORT_5_6_5]:{[Re.RGB]:t.RGB},[lt.UNSIGNED_SHORT_4_4_4_4]:{[Re.RGBA]:t.RGBA},[lt.UNSIGNED_SHORT_5_5_5_1]:{[Re.RGBA]:t.RGBA}},e}class YM{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Rt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Ive(e),this.samplerTypes=Rve(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new rb(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new rb(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==We.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new rb(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,n.samplerType=this.samplerTypes[n.internalFormat]??We.FLOAT,this.webGLVersion===2&&e.type===lt.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)==null?void 0:i.upload(r,e,n))n.samplerType!==We.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&hh(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===ua.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=Ka.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==ua.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Ga.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Ga.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Ga.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Ga.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}YM.extension={type:Ue.RendererSystem,name:"texture"};nt.add(YM);class qM{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}qM.extension={type:Ue.RendererSystem,name:"transformFeedback"};nt.add(qM);class a0{constructor(e){this.renderer=e}init(e){this.screen=new xt(0,0,e.width,e.height),this.element=e.view||Xe.ADAPTER.createCanvas(),this.resolution=e.resolution||Xe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}a0.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},a0.extension={type:[Ue.RendererSystem,Ue.CanvasRendererSystem],name:"_view"};nt.add(a0);Xe.PREFER_ENV=du.WEBGL2;Xe.STRICT_TEXTURE_CACHE=!1;Xe.RENDER_OPTIONS={...s0.defaultOptions,...i0.defaultOptions,...a0.defaultOptions,...o0.defaultOptions};Object.defineProperties(Xe,{WRAP_MODE:{get(){return Rt.defaultOptions.wrapMode},set(t){_t("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Rt.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Rt.defaultOptions.scaleMode},set(t){_t("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Rt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Rt.defaultOptions.mipmap},set(t){_t("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Rt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Rt.defaultOptions.anisotropicLevel},set(t){_t("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Rt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return _t("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ai.defaultResolution},set(t){Ai.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return _t("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ai.defaultMultisample},set(t){Ai.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Ec.defaultMaxTextures},set(t){_t("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ec.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Ec.defaultBatchSize},set(t){_t("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ec.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ec.canUploadSameBuffer},set(t){_t("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ec.canUploadSameBuffer=t}},GC_MODE:{get(){return Tc.defaultMode},set(t){_t("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Tc.defaultMode=t}},GC_MAX_IDLE:{get(){return Tc.defaultMaxIdle},set(t){_t("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Tc.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Tc.defaultCheckCountMax},set(t){_t("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Tc.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Ha.defaultVertexPrecision},set(t){_t("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ha.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Ha.defaultFragmentPrecision},set(t){_t("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ha.defaultFragmentPrecision=t}}});var zl=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(zl||{});class BS{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const pH=class ws{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new BS(null,null,1/0),this.deltaMS=1/ws.targetFPMS,this.elapsedMS=1/ws.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,r=zl.NORMAL){return this._addListener(new BS(e,n,r))}addOnce(e,n,r=zl.NORMAL){return this._addListener(new BS(e,n,r,!0))}_addListener(e){let n=this._head.next,r=this._head;if(!n)e.connect(r);else{for(;n;){if(e.priority>n.priority){e.connect(r);break}r=n,n=n.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,n){let r=this._head.next;for(;r;)r.match(e,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*ws.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,n)/1e3,ws.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!ws._shared){const e=ws._shared=new ws;e.autoStart=!0,e._protected=!0}return ws._shared}static get system(){if(!ws._system){const e=ws._system=new ws;e.autoStart=!0,e._protected=!0}return ws._system}};pH.targetFPMS=.06;let Sr=pH;Object.defineProperties(Xe,{TARGET_FPMS:{get(){return Sr.targetFPMS},set(t){_t("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Sr.targetFPMS=t}}});class KM{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,zl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Sr.shared:new Sr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}KM.extension=Ue.Application;nt.add(KM);const gH=[];nt.handleByList(Ue.Renderer,gH);function mH(t){for(const e of gH)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var Mve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ove=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const yH=Mve,ZM=Ove;class QM{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=gr.HIGH?this.multisample=gr.HIGH:n>=gr.MEDIUM?this.multisample=gr.MEDIUM:n>=gr.LOW?this.multisample=gr.LOW:this.multisample=gr.NONE}destroy(){}}QM.extension={type:Ue.RendererSystem,name:"_multisample"};nt.add(QM);class Lve{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class JM{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new Lve(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}JM.extension={type:Ue.RendererSystem,name:"buffer"};nt.add(JM);class eO{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}eO.extension={type:Ue.RendererSystem,name:"objectRenderer"};nt.add(eO);const ib=class HA extends fH{constructor(e){super(),this.type=wM.WEBGL,e=Object.assign({},Xe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new xo({projectionMatrix:new cr},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:HA.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in e&&(_t("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=HA.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:SG()}render(e,n){this.objectRenderer.render(e,n)}resize(e,n){this._view.resizeView(e,n)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return _t("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return _t("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return _t("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return _t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){_t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return _t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){_t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return _t("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,n){return this.textureGenerator.generateTexture(e,n)}};ib.extension={type:Ue.Renderer,priority:1},ib.__plugins={},ib.__systems={};let zw=ib;nt.handleByMap(Ue.RendererPlugin,zw.__plugins);nt.handleByMap(Ue.RendererSystem,zw.__systems);nt.add(zw);class tO extends Vf{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Rt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Vf?this.addResourceAt(e[r],r):this.addResourceAt(MM(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(e).then(()=>{const{realWidth:n,realHeight:r}=this.items[0];return this.resize(n,r),this.update(),Promise.resolve(this)}),this._load}}class vH extends tO{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=uh.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,r.type,c.resource.source))}return!0}}class bH extends Ja{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const _H=class Bg extends tO{constructor(e,n){const{width:r,height:i,autoLoad:s,linkBaseTexture:o}=n||{};if(e&&e.length!==Bg.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<Bg.SIDES;a++)this.items[a].target=uh.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,n),s!==!1&&this.load()}bind(e){super.bind(e),e.target=uh.TEXTURE_CUBE_MAP}addBaseTextureAt(e,n,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[n])throw new Error(`Index ${n} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=uh.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this}upload(e,n,r){const i=this.itemDirtyIds;for(let s=0;s<Bg.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<n.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Bg.SIDES}};_H.SIDES=6;let xH=_H;class eh extends Ja{constructor(e,n){n=n||{};let r,i,s;typeof e=="string"?(r=eh.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.ownsImageBitmap=n.ownsImageBitmap??s,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await Xe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$i.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return eh._EMPTY=eh._EMPTY??Xe.ADAPTER.createCanvas(0,0),eh._EMPTY}}const VA=class sb extends Ja{constructor(e,n){n=n||{},super(Xe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=n.scale||1,this._overrideWidth=n.width,this._overrideHeight=n.height,this._resolve=null,this._crossorigin=n.crossorigin,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},sb.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ja.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=n=>{this._resolve&&(e.onerror=null,this.onError.emit(n))},e.onload=()=>{if(!this._resolve)return;const n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=n*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*n,s=this._overrideHeight||this._overrideWidth/n*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${iu()}`,o.getContext("2d").drawImage(e,0,0,n,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const n=sb.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,n){return n==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&sb.SVG_XML.test(e)}};VA.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,VA.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let T_=VA;class kve extends Ja{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const WA=class XA extends Ja{constructor(e,n){if(n=n||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");n.autoLoad!==!1&&r.setAttribute("preload","auto"),n.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),n.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),n.loop===!0&&r.setAttribute("loop",""),n.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Ja.crossOrigin(r,i,n.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||XA.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=n.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),n.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const n=Sr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((n,r)=>{this.valid?n(this):(this._resolve=n,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const n=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!n&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Sr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Sr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Sr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||XA.TYPES.includes(n)}};WA.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],WA.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let nO=WA;__.push(eh,DM,bH,nO,kve,T_,q0,xH,vH);let Dve=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Ds("disposeTransformFeedback")}bindBuffer(e,n){this.buffers[e]=n}destroy(){this.disposeRunner.emit(this,!1)}};const Nve="7.4.0",Fve=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:$i,AbstractMultiResource:tO,ArrayResource:vH,Attribute:FA,BLEND_MODES:mt,BUFFER_BITS:g_,BUFFER_TYPE:oa,BackgroundSystem:i0,BaseImageResource:Ja,BaseRenderTexture:kM,BaseTexture:Rt,BatchDrawCall:x_,BatchGeometry:OM,BatchRenderer:Ec,BatchShaderGenerator:KG,BatchSystem:LM,BatchTextureArray:w_,BrowserAdapter:hG,Buffer:wr,BufferResource:q0,BufferSystem:JM,CLEAR_MODES:Yo,COLOR_MASK_BITS:uG,CanvasResource:bH,Circle:K0,Color:sn,ContextSystem:s0,CubeResource:xH,DEG_TO_RAD:$G,DRAW_MODES:yo,ENV:du,Ellipse:Z0,ExtensionType:Ue,FORMATS:Re,Filter:Ai,FilterState:QG,FilterSystem:BM,Framebuffer:E_,FramebufferSystem:zM,GC_MODES:kw,GLFramebuffer:JG,GLProgram:sH,GLTexture:rb,GenerateTextureSystem:VM,Geometry:vp,GeometrySystem:UM,IGLUniformData:mve,INSTALLED:__,ImageBitmapResource:eh,ImageResource:DM,MASK_TYPES:xr,MIPMAP_MODES:ua,MSAA_QUALITY:gr,MaskData:tH,MaskSystem:$M,Matrix:cr,MultisampleSystem:QM,ObjectRenderer:ey,ObjectRendererSystem:eO,ObservablePoint:Qo,PI_2:r0,PRECISION:Is,PluginSystem:GM,Point:ft,Polygon:Xc,Program:Ha,ProjectionSystem:HM,Quad:ZG,QuadUv:FM,RAD_TO_DEG:UG,RENDERER_TYPE:wM,Rectangle:xt,RenderTexture:pu,RenderTexturePool:NM,RenderTextureSystem:WM,Renderer:zw,Resource:Vf,RoundedRectangle:Q0,Runner:Ds,SAMPLER_TYPES:We,SCALE_MODES:Ga,SHAPES:Yr,SVGResource:T_,ScissorSystem:iH,Shader:Ml,ShaderSystem:XM,SpriteMaskFilter:eH,StartupSystem:o0,State:da,StateSystem:dH,StencilSystem:jM,SystemManager:fH,TARGETS:uh,TYPES:lt,Texture:yt,TextureGCSystem:Tc,TextureMatrix:Bw,TextureSystem:YM,TextureUvs:Fw,Ticker:Sr,TickerPlugin:KM,Transform:J0,TransformFeedback:Dve,TransformFeedbackSystem:qM,UPDATE_PRIORITY:zl,UniformGroup:xo,VERSION:Nve,VideoResource:nO,ViewSystem:a0,ViewableBuffer:b_,WRAP_MODES:Ka,autoDetectRenderer:mH,autoDetectResource:MM,checkMaxIfStatementsInShader:FG,createUBOElements:lH,defaultFilterVertex:ZM,defaultVertex:yH,extensions:nt,generateProgram:oH,generateUniformBufferSync:uH,getTestContext:VG,getUBOData:cH,groupD8:Gn,isMobile:Zo,settings:Xe,uniformParsers:dh,unsafeEvalSupported:YG,utils:Uye},Symbol.toStringTag,{value:"Module"}));class l0{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?xt.EMPTY:(e=e||new xt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*n.x+s*n.y+a,u=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty;let f=this.minX,g=this.minY,m=this.maxX,y=this.maxY,x=o*n+l*r+u,b=a*n+c*r+h;f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*i+l*r+u,b=a*i+c*r+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*n+l*s+u,b=a*n+c*s+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,x=o*i+l*s+u,b=a*i+c*s+h,f=x<f?x:f,g=b<g?b:g,m=x>m?x:m,y=b>y?b:y,this.minX=f,this.minY=g,this.maxX=m,this.maxY=y}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,h=e.tx,f=e.ty;let g=this.minX,m=this.minY,y=this.maxX,x=this.maxY;for(let b=r;b<i;b+=2){const w=n[b],v=n[b+1],E=a*w+c*v+h,S=u*v+l*w+f;g=Math.min(g,E-s),y=Math.max(y,E+s),m=Math.min(m,S-o),x=Math.max(x,S+o)}this.minX=g,this.minY=m,this.maxX=y,this.maxY=x}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class Nn extends mp{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new J0,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new l0,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(Nn.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new xt),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new l0);const n=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new wH),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*UG}set angle(e){this.transform.rotation=e*$G}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class wH extends Nn{constructor(){super(...arguments),this.sortDirty=null}}Nn.prototype.displayObjectUpdateTransform=Nn.prototype.updateTransform;const Bve=new cr;function zve(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const EH=class YA extends Nn{constructor(){super(),this.children=[],this.sortableChildren=YA.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const r=this.getChildIndex(e),i=this.getChildIndex(n);this.children[r]=n,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);hh(this.children,r,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],r=this.children.indexOf(n);if(r===-1)return null;n.parent=null,n.transform._parentID=-1,hh(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,hh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const r=e,i=n,s=i-r;let o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,r=this.children.length;n<r;++n){const i=this.children[n];i._lastSortedIndex=n,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(zve),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){const r=n._mask.isMaskData?n._mask.maskObject:n._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(n._bounds,r._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const r=super.getLocalBounds(e);if(!n)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==YA.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=Bve.copyFrom(i),i.prepend(s)):i=s),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var n;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(n=this.filters)!=null&&n.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,o,a;const n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<n.length;l++)n[l].enabled&&this._enabledFilters.push(n[l])}const i=n&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==xr.NONE));if(i&&e.batch.flush(),n&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),n&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(n)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e}};EH.defaultSortableChildren=!1;let di=EH;di.prototype.containerUpdateTransform=di.prototype.updateTransform;Object.defineProperties(Xe,{SORTABLE_CHILDREN:{get(){return di.defaultSortableChildren},set(t){_t("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),di.defaultSortableChildren=t}}});const Uve=Object.freeze(Object.defineProperty({__proto__:null,Bounds:l0,Container:di,DisplayObject:Nn,TemporaryDisplayObject:wH},Symbol.toStringTag,{value:"Module"}));var ty=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(ty||{});const gg=new ft,$ve=new Uint16Array([0,1,2,0,2,3]);class fa extends di{constructor(e){super(),this._anchor=new Qo(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new sn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||yt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=$ve,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Xe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Al(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Al(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,u=e.trim,h=e.orig,f=this._anchor;let g=0,m=0,y=0,x=0;if(u?(m=u.x-f._x*h.width,g=m+u.width,x=u.y-f._y*h.height,y=x+u.height):(m=-f._x*h.width,g=m+h.width,x=-f._y*h.height,y=x+h.height),c[0]=r*m+s*x+a,c[1]=o*x+i*m+l,c[2]=r*g+s*x+a,c[3]=o*x+i*g+l,c[4]=r*g+s*y+a,c[5]=o*y+i*g+l,c[6]=r*m+s*y+a,c[7]=o*y+i*m+l,this._roundPixels){const b=Xe.RESOLUTION;for(let w=0;w<c.length;++w)c[w]=Math.round(c[w]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,h=s.ty,f=-i._x*r.width,g=f+r.width,m=-i._y*r.height,y=m+r.height;if(n[0]=o*f+l*m+u,n[1]=c*m+a*f+h,n[2]=o*g+l*m+u,n[3]=c*m+a*g+h,n[4]=o*g+l*y+u,n[5]=c*y+a*g+h,n[6]=o*f+l*y+u,n[7]=c*y+a*f+h,this._roundPixels){const x=Xe.RESOLUTION;for(let b=0;b<n.length;++b)n[b]=Math.round(n[b]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new l0),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,gg);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return gg.x>=i&&gg.x<i+n&&(s=-r*this.anchor.y,gg.y>=s&&gg.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,n){const r=e instanceof yt?e:yt.from(e,n);return new fa(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Al(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Al(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||yt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const jve=Object.freeze(Object.defineProperty({__proto__:null,Sprite:fa},Symbol.toStringTag,{value:"Module"})),o1={willReadFrequently:!0},La=class ot{static get experimentalLetterSpacingSupported(){let e=ot._experimentalLetterSpacingSupported;if(e!==void 0){const n=Xe.ADAPTER.getCanvasRenderingContext2D().prototype;e=ot._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,r,i,s,o,a,l,c){this.text=e,this.style=n,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,n,r,i=ot._canvas){r=r??n.wordWrap;const s=n.toFontString(),o=ot.measureFont(s);o.fontSize===0&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);const a=i.getContext("2d",o1);a.font=s;const l=(r?ot.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let m=0;m<l.length;m++){const y=ot._measureText(l[m],n.letterSpacing,a);c[m]=y,u=Math.max(u,y)}let h=u+n.strokeThickness;n.dropShadow&&(h+=n.dropShadowDistance);const f=n.lineHeight||o.fontSize+n.strokeThickness;let g=Math.max(f,o.fontSize+n.strokeThickness*2)+n.leading+(l.length-1)*(f+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new ot(e,n,h,g,l,c,f+n.leading,u,o)}static _measureText(e,n,r){let i=!1;ot.experimentalLetterSpacingSupported&&(ot.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=n:s+=(ot.graphemeSegmenter(e).length-1)*n),s}static wordWrap(e,n,r=ot._canvas){const i=r.getContext("2d",o1);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=n,h=ot.collapseSpaces(u),f=ot.collapseNewlines(u);let g=!h;const m=n.wordWrapWidth+c,y=ot.tokenize(e);for(let x=0;x<y.length;x++){let b=y[x];if(ot.isNewline(b)){if(!f){a+=ot.addLine(o),g=!h,o="",s=0;continue}b=" "}if(h){const v=ot.isBreakingSpace(b),E=ot.isBreakingSpace(o[o.length-1]);if(v&&E)continue}const w=ot.getFromCache(b,c,l,i);if(w>m)if(o!==""&&(a+=ot.addLine(o),o="",s=0),ot.canBreakWords(b,n.breakWords)){const v=ot.wordWrapSplit(b);for(let E=0;E<v.length;E++){let S=v[E],C=S,R=1;for(;v[E+R];){const L=v[E+R];if(!ot.canBreakChars(C,L,b,E,n.breakWords))S+=L;else break;C=L,R++}E+=R-1;const I=ot.getFromCache(S,c,l,i);I+s>m&&(a+=ot.addLine(o),g=!1,o="",s=0),o+=S,s+=I}}else{o.length>0&&(a+=ot.addLine(o),o="",s=0);const v=x===y.length-1;a+=ot.addLine(b,!v),g=!1,o="",s=0}else w+s>m&&(g=!1,a+=ot.addLine(o),o="",s=0),(o.length>0||!ot.isBreakingSpace(b)||g)&&(o+=b,s+=w)}return a+=ot.addLine(o,!1),a}static addLine(e,n=!0){return e=ot.trimRight(e),e=n?`${e}
`:e,e}static getFromCache(e,n,r,i){let s=r[e];return typeof s!="number"&&(s=ot._measureText(e,n,i)+n,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const r=e[n];if(!ot.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ot._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:ot._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const n=[];let r="";if(typeof e!="string")return n;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ot.isBreakingSpace(s,o)||ot.isNewline(s)){r!==""&&(n.push(r),r=""),n.push(s);continue}r+=s}return r!==""&&n.push(r),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,r,i,s){return!0}static wordWrapSplit(e){return ot.graphemeSegmenter(e)}static measureFont(e){if(ot._fonts[e])return ot._fonts[e];const n={ascent:0,descent:0,fontSize:0},r=ot._canvas,i=ot._context;i.font=e;const s=ot.METRICS_STRING+ot.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ot.BASELINE_SYMBOL).width);const l=Math.ceil(ot.HEIGHT_MULTIPLIER*a);if(a=a*ot.BASELINE_MULTIPLIER|0,o===0||l===0)return ot._fonts[e]=n,n;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,h=o*4;let f=0,g=0,m=!1;for(f=0;f<a;++f){for(let y=0;y<h;y+=4)if(c[g+y]!==255){m=!0;break}if(!m)g+=h;else break}for(n.ascent=a-f,g=u-h,m=!1,f=l;f>a;--f){for(let y=0;y<h;y+=4)if(c[g+y]!==255){m=!0;break}if(!m)g-=h;else break}return n.descent=f-a,n.fontSize=n.ascent+n.descent,ot._fonts[e]=n,n}static clearMetrics(e=""){e?delete ot._fonts[e]:ot._fonts={}}static get _canvas(){var e;if(!ot.__canvas){let n;try{const r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",o1))!=null&&e.measureText)return ot.__canvas=r,r;n=Xe.ADAPTER.createCanvas()}catch{n=Xe.ADAPTER.createCanvas()}n.width=n.height=10,ot.__canvas=n}return ot.__canvas}static get _context(){return ot.__context||(ot.__context=ot._canvas.getContext("2d",o1)),ot.__context}};La.METRICS_STRING="|q",La.BASELINE_SYMBOL="M",La.BASELINE_MULTIPLIER=1.4,La.HEIGHT_MULTIPLIER=2,La.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})(),La.experimentalLetterSpacing=!1,La._fonts={},La._newlines=[10,13],La._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let wl=La;const Gve=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TH=class zg{constructor(e){this.styleID=0,this.reset(),US(this,e,e)}clone(){const e={};return US(e,this,zg.defaultStyle),new zg(e)}reset(){US(this,zg.defaultStyle,zg.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=zS(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=zS(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){Hve(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=zS(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let r=n.length-1;r>=0;r--){let i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!Gve.includes(i)&&(i=`"${i}"`),n[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}};TH.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ty.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Gs=TH;function zS(t){const e=sn.shared,n=r=>{const i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(n):n(t)}function Hve(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function US(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const Vve={texture:!0,children:!1,baseTexture:!0},SH=class qA extends fa{constructor(e,n,r){let i=!1;r||(r=Xe.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=yt.from(r);s.orig=new xt,s.trim=new xt,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=qA.defaultResolution??Xe.RESOLUTION,this._autoResolution=qA.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return wl.experimentalLetterSpacing}static set experimentalLetterSpacing(e){_t("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),wl.experimentalLetterSpacing=e}updateText(e){const n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=wl.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=n.strokeThickness,r.textBaseline=n.textBaseline,r.lineJoin=n.lineJoin,r.miterLimit=n.miterLimit;let f,g;const m=n.dropShadow?2:1;for(let y=0;y<m;++y){const x=n.dropShadow&&y===0,b=x?Math.ceil(Math.max(1,o)+n.padding*2):0,w=b*this._resolution;if(x){r.fillStyle="black",r.strokeStyle="black";const E=n.dropShadowColor,S=n.dropShadowBlur*this._resolution,C=n.dropShadowDistance*this._resolution;r.shadowColor=sn.shared.setValue(E).setAlpha(n.dropShadowAlpha).toRgbaString(),r.shadowBlur=S,r.shadowOffsetX=Math.cos(n.dropShadowAngle)*C,r.shadowOffsetY=Math.sin(n.dropShadowAngle)*C+w}else r.fillStyle=this._generateFillStyle(n,a,i),r.strokeStyle=n.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let v=(l-h.fontSize)/2;l-h.fontSize<0&&(v=0);for(let E=0;E<a.length;E++)f=n.strokeThickness/2,g=n.strokeThickness/2+E*l+h.ascent+v,n.align==="right"?f+=u-c[E]:n.align==="center"&&(f+=(u-c[E])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(a[E],f+n.padding,g+n.padding-b,!0),n.fill&&this.drawLetterSpacing(a[E],f+n.padding,g+n.padding-b)}this.updateTexture()}drawLetterSpacing(e,n,r,i=!1){const s=this._style.letterSpacing;let o=!1;if(wl.experimentalLetterSpacingSupported&&(wl.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r);return}let a=n;const l=wl.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let h=0;h<l.length;++h){const f=l[h];i?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let g="";for(let m=h+1;m<l.length;++m)g+=l[m];u=this.context.measureText(g).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=DG(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const n=this._texture,r=this._style,i=r.trim?0:r.padding,s=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-i*2,n.orig.height=n._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,n){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,n)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,n,r){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),h=e.fillGradientStops.slice();if(!h.length){const f=u.length+1;for(let g=1;g<f;++g)h.push(g/f)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),e.fillGradientType===ty.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const f=r.fontProperties.fontSize+e.strokeThickness;for(let g=0;g<n.length;g++){const m=r.lineHeight*(g-1)+f,y=r.lineHeight*g;let x=y;g>0&&m>y&&(x=(y+m)/2);const b=y+f,w=r.lineHeight*(g+1);let v=b;g+1<n.length&&w<b&&(v=(b+w)/2);const E=(v-x)/c;for(let S=0;S<u.length;S++){let C=0;typeof h[S]=="number"?C=h[S]:C=S/u.length;let R=Math.min(1,Math.max(0,x/c+C*E));R=Number(R.toFixed(5)),s.addColorStop(R,u[S])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const f=u.length+1;let g=1;for(let m=0;m<u.length;m++){let y;typeof h[m]=="number"?y=h[m]:y=g/f,s.addColorStop(y,u[m]),g++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Vve,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const n=Al(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const n=Al(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Gs?this._style=e:this._style=new Gs(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};SH.defaultAutoResolution=!0;let Uw=SH;const Wve=Object.freeze(Object.defineProperty({__proto__:null,TEXT_GRADIENT:ty,Text:Uw,TextMetrics:wl,TextStyle:Gs},Symbol.toStringTag,{value:"Module"}));class c0{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class bm{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),h=u[0],f=u[1].replace(/"/gm,""),g=parseFloat(f),m=isNaN(g)?f:g;l[h]=m}r[o].push(l)}const i=new c0;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class S_{static test(e){const n=e;return typeof e!="string"&&"getElementsByTagName"in e&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new c0,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)n.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)n.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];n.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class C_{static test(e){return typeof e=="string"&&e.includes("<font>")?S_.test(Xe.ADAPTER.parseXML(e)):!1}static parse(e){return S_.parse(Xe.ADAPTER.parseXML(e))}}const $S=[bm,S_,C_];function CH(t){for(let e=0;e<$S.length;e++)if($S[e].test(t))return $S[e];return null}function Xve(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=t.width/r-l-c*2,h=t.height/r-l-c*2,f=o.slice(),g=n.fillGradientStops.slice();if(!g.length){const m=f.length+1;for(let y=1;y<m;++y)g.push(y/m)}if(f.unshift(o[0]),g.unshift(0),f.push(o[o.length-1]),g.push(1),n.fillGradientType===ty.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,h+c);let m=0;const y=(s.fontProperties.fontSize+n.strokeThickness)/h;for(let x=0;x<i.length;x++){const b=s.lineHeight*x;for(let w=0;w<f.length;w++){let v=0;typeof g[w]=="number"?v=g[w]:v=w/f.length;const E=b/h+v*y;let S=Math.max(m,E);S=Math.min(S,1),a.addColorStop(S,f[w]),m=S}}}else{a=e.createLinearGradient(c,h/2,u+c,h/2);const m=f.length+1;let y=1;for(let x=0;x<f.length;x++){let b;typeof g[x]=="number"?b=g[x]:b=y/m,a.addColorStop(b,f[x]),y++}}return a}function Yve(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Xve(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,f=o.dropShadowBlur*s,g=o.dropShadowDistance*s;e.shadowColor=sn.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=f,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function ob(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function PH(t){return Array.from?Array.from(t):t.split("")}function qve(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...PH(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const bc=class ka{constructor(e,n,r){var u;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Qa(o.file),c={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let h=0;h<e.page.length;h++){const{id:f,file:g}=e.page[h];c[f]=n instanceof Array?n[h]:n[g],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[f].baseTexture.alphaMode=$i.NO_PREMULTIPLIED_ALPHA,c[f].baseTexture.mipmap=ua.OFF)}for(let h=0;h<e.char.length;h++){const{id:f,page:g}=e.char[h];let{x:m,y,width:x,height:b,xoffset:w,yoffset:v,xadvance:E}=e.char[h];m/=l,y/=l,x/=l,b/=l,w/=l,v/=l,E/=l;const S=new xt(m+c[g].frame.x/l,y+c[g].frame.y/l,x,b);this.chars[f]={xOffset:w,yOffset:v,xAdvance:E,kerning:{},texture:new yt(c[g].baseTexture,S),page:g}}for(let h=0;h<e.kerning.length;h++){let{first:f,second:g,amount:m}=e.kerning[h];f/=l,g/=l,m/=l,this.chars[g]&&(this.chars[g].kerning[f]=m)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((u=a==null?void 0:a.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,n,r){let i;if(e instanceof c0)i=e;else{const o=CH(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof yt&&(n=[n]);const s=new ka(i,n,r);return ka.available[s.font]=s,s}static uninstall(e){const n=ka.available[e];if(!n)throw new Error(`No font found named '${e}'`);n.destroy(),delete ka.available[e]}static from(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},ka.defaultOptions,r),u=qve(i),h=n instanceof Gs?n:new Gs(n),f=a,g=new c0;g.info[0]={face:h.fontFamily,size:h.fontSize},g.common[0]={lineHeight:h.fontSize};let m=0,y=0,x,b,w,v=0;const E=[];for(let C=0;C<u.length;C++){x||(x=Xe.ADAPTER.createCanvas(),x.width=a,x.height=l,b=x.getContext("2d"),w=new Rt(x,{resolution:o,...c}),E.push(new yt(w)),g.page.push({id:E.length-1,file:""}));const R=u[C],I=wl.measureText(R,h,!1,x),L=I.width,O=Math.ceil(I.height),B=Math.ceil((h.fontStyle==="italic"?2:1)*L);if(y>=l-O*o){if(y===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${R}')`);--C,x=null,b=null,w=null,y=0,m=0,v=0;continue}if(v=Math.max(O+I.fontProperties.descent,v),B*o+m>=f){if(m===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${R}')`);--C,y+=v*o,y=Math.ceil(y),m=0,v=0;continue}Yve(x,b,I,m,y,o,h);const M=ob(I.text);g.char.push({id:M,page:E.length-1,x:m/o,y:y/o,width:B,height:O,xoffset:0,yoffset:0,xadvance:L-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),m+=(B+2*s)*o,m=Math.ceil(m)}if(!(r!=null&&r.skipKerning))for(let C=0,R=u.length;C<R;C++){const I=u[C];for(let L=0;L<R;L++){const O=u[L],B=b.measureText(I).width,M=b.measureText(O).width,D=b.measureText(I+O).width-(B+M);D&&g.kerning.push({first:ob(I),second:ob(O),amount:D})}}const S=new ka(g,E,!0);return ka.available[e]!==void 0&&ka.uninstall(e),ka.available[e]=S,S}};bc.ALPHA=[["a","z"],["A","Z"]," "],bc.NUMERIC=[["0","9"]],bc.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],bc.ASCII=[[" ","~"]],bc.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:bc.ALPHANUMERIC},bc.available={};let bl=bc;class AH{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const jS=new ft,wB=new Xc,RH=class IH extends di{constructor(e,n,r,i=yo.TRIANGLES){super(),this.geometry=e,this.shader=n,this.state=r||da.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Xe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===yo.TRIANGLES&&n.length<IH.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const n=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,h=this.vertexData;for(let f=0;f<h.length/2;f++){const g=n[f*2],m=n[f*2+1];h[f*2]=s*g+a*m+c,h[f*2+1]=o*g+l*m+u}if(this._roundPixels){const f=Xe.RESOLUTION;for(let g=0;g<h.length;++g)h[g]=Math.round(h[g]*f)/f}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new AH(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,jS);const n=this.geometry.getBuffer("aVertexPosition").data,r=wB.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(r[0]=n[l],r[1]=n[l+1],r[2]=n[c],r[3]=n[c+1],r[4]=n[u],r[5]=n[u+1],wB.contains(jS.x,jS.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};RH.BATCHABLE_SIZE=100;let Wf=RH;class ny extends vp{constructor(e,n,r){super();const i=new wr(e),s=new wr(n,!0),o=new wr(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,lt.FLOAT).addAttribute("aTextureCoord",s,2,!1,lt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var Kve=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Zve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Xf extends Ml{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:cr.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Ha.from(Zve,Kve),r),this._colorDirty=!1,this.uvMatrix=new Bw(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new sn(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;sn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}const Qve=Object.freeze(Object.defineProperty({__proto__:null,Mesh:Wf,MeshBatchUvs:AH,MeshGeometry:ny,MeshMaterial:Xf},Symbol.toStringTag,{value:"Module"}));var Jve=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,e1e=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const EB=[],TB=[],SB=[],MH=class OH extends di{constructor(e,n={}){super();const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},OH.styleDefaults,n);if(!bl.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new sn(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Qo(()=>{this.dirty=!0},this,0,0),this._roundPixels=Xe.ROUND_PIXELS,this.dirty=!0,this._resolution=Xe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var B;const e=bl.available[this._fontName],n=this.fontSize,r=n/e.size,i=new ft,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=PH(l),u=this._maxWidth*e.size/n,h=e.distanceFieldType==="none"?EB:TB;let f=null,g=0,m=0,y=0,x=-1,b=0,w=0,v=0,E=0;for(let M=0;M<c.length;M++){const D=c[M],N=ob(D);if(/(?:\s)/.test(D)&&(x=M,b=g,E++),D==="\r"||D===`
`){o.push(g),a.push(-1),m=Math.max(m,g),++y,++w,i.x=0,i.y+=e.lineHeight,f=null,E=0;continue}const j=e.chars[N];if(!j)continue;f&&j.kerning[f]&&(i.x+=j.kerning[f]);const W=SB.pop()||{texture:yt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ft};W.texture=j.texture,W.line=y,W.charCode=N,W.position.x=Math.round(i.x+j.xOffset+this._letterSpacing/2),W.position.y=Math.round(i.y+j.yOffset),W.prevSpaces=E,s.push(W),g=W.position.x+Math.max(j.xAdvance-j.xOffset,j.texture.orig.width),i.x+=j.xAdvance+this._letterSpacing,v=Math.max(v,j.yOffset+j.texture.height),f=N,x!==-1&&u>0&&i.x>u&&(++w,hh(s,1+x-w,1+M-x),M=x,x=-1,o.push(b),a.push(s.length>0?s[s.length-1].prevSpaces:0),m=Math.max(m,b),y++,i.x=0,i.y+=e.lineHeight,f=null,E=0)}const S=c[c.length-1];S!=="\r"&&S!==`
`&&(/(?:\s)/.test(S)&&(g=b),o.push(g),m=Math.max(m,g),a.push(-1));const C=[];for(let M=0;M<=y;M++){let D=0;this._align==="right"?D=m-o[M]:this._align==="center"?D=(m-o[M])/2:this._align==="justify"&&(D=a[M]<0?0:(m-o[M])/a[M]),C.push(D)}const R=s.length,I={},L=[],O=this._activePagesMeshData;h.push(...O);for(let M=0;M<R;M++){const D=s[M].texture,N=D.baseTexture.uid;if(!I[N]){let j=h.pop();if(!j){const V=new ny;let U,X;e.distanceFieldType==="none"?(U=new Xf(yt.EMPTY),X=mt.NORMAL):(U=new Xf(yt.EMPTY,{program:Ha.from(e1e,Jve),uniforms:{uFWidth:0}}),X=mt.NORMAL_NPM);const Y=new Wf(V,U);Y.blendMode=X,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;const{_textureCache:W}=this;W[N]=W[N]||new yt(D.baseTexture),j.mesh.texture=W[N],j.mesh.tint=this._tintColor.value,L.push(j),I[N]=j}I[N].total++}for(let M=0;M<O.length;M++)L.includes(O[M])||this.removeChild(O[M].mesh);for(let M=0;M<L.length;M++)L[M].mesh.parent!==this&&this.addChild(L[M].mesh);this._activePagesMeshData=L;for(const M in I){const D=I[M],N=D.total;if(!(((B=D.indices)==null?void 0:B.length)>6*N)||D.vertices.length<Wf.BATCHABLE_SIZE*2)D.vertices=new Float32Array(4*2*N),D.uvs=new Float32Array(4*2*N),D.indices=new Uint16Array(6*N);else{const j=D.total,W=D.vertices;for(let V=j*4*2;V<W.length;V++)W[V]=0}D.mesh.size=6*N}for(let M=0;M<R;M++){const D=s[M];let N=D.position.x+C[D.line]*(this._align==="justify"?D.prevSpaces:1);this._roundPixels&&(N=Math.round(N));const j=N*r,W=D.position.y*r,V=D.texture,U=I[V.baseTexture.uid],X=V.frame,Y=V._uvs,Z=U.index++;U.indices[Z*6+0]=0+Z*4,U.indices[Z*6+1]=1+Z*4,U.indices[Z*6+2]=2+Z*4,U.indices[Z*6+3]=0+Z*4,U.indices[Z*6+4]=2+Z*4,U.indices[Z*6+5]=3+Z*4,U.vertices[Z*8+0]=j,U.vertices[Z*8+1]=W,U.vertices[Z*8+2]=j+X.width*r,U.vertices[Z*8+3]=W,U.vertices[Z*8+4]=j+X.width*r,U.vertices[Z*8+5]=W+X.height*r,U.vertices[Z*8+6]=j,U.vertices[Z*8+7]=W+X.height*r,U.uvs[Z*8+0]=Y.x0,U.uvs[Z*8+1]=Y.y0,U.uvs[Z*8+2]=Y.x1,U.uvs[Z*8+3]=Y.y1,U.uvs[Z*8+4]=Y.x2,U.uvs[Z*8+5]=Y.y2,U.uvs[Z*8+6]=Y.x3,U.uvs[Z*8+7]=Y.y3}this._textWidth=m*r,this._textHeight=(i.y+e.lineHeight)*r;for(const M in I){const D=I[M];if(this.anchor.x!==0||this.anchor.y!==0){let V=0;const U=this._textWidth*this.anchor.x,X=this._textHeight*this.anchor.y;for(let Y=0;Y<D.total;Y++)D.vertices[V++]-=U,D.vertices[V++]-=X,D.vertices[V++]-=U,D.vertices[V++]-=X,D.vertices[V++]-=U,D.vertices[V++]-=X,D.vertices[V++]-=U,D.vertices[V++]-=X}this._maxLineHeight=v*r;const N=D.mesh.geometry.getBuffer("aVertexPosition"),j=D.mesh.geometry.getBuffer("aTextureCoord"),W=D.mesh.geometry.getIndex();N.data=D.vertices,j.data=D.uvs,W.data=D.indices,N.update(),j.update(),W.update()}for(let M=0;M<s.length;M++)SB.push(s[M]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:n,distanceFieldType:r,size:i}=bl.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),h=(Math.abs(c)+Math.abs(u))/2,f=this.fontSize/i,g=e._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=h*n*f*g}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=bl.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!bl.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??bl.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:n}=this,r=bl.available[this._fontName].distanceFieldType==="none"?EB:TB;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>n[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=yt.EMPTY});for(const i in n)n[i].destroy(),delete n[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};MH.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let LH=MH;const CB={loader:Ue.LoadParser,resolver:Ue.ResolveParser,cache:Ue.CacheParser,detection:Ue.DetectionParser};nt.handle(Ue.Asset,t=>{const e=t.ref;Object.entries(CB).filter(([n])=>!!e[n]).forEach(([n,r])=>nt.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(CB).filter(n=>!!e[n]).forEach(n=>nt.remove(e[n]))});class t1e{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Fh(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function ql(t,e){const n=t.split("?")[0],r=Cr.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const go=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||n?e(r):r):t),P_=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function kH(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?kH(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function DH(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),kH(t,i,0,n,r)}else r.push(t);return r}const u0=t=>!Array.isArray(t);class n1e{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=go(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof yt){const a=n;r.forEach(l=>{a.baseTexture!==yt.EMPTY.baseTexture&&Rt.addToCache(a.baseTexture,l),yt.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Pc=new n1e;class r1e{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,n,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,i,n,this))&&(i=await c.parse(i,n,this)||i,r.parser=c)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=u0(e),o=go(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=Cr.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,n&&n(++r/a)}catch(h){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${h}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const n=go(e,r=>({alias:[r],src:r})).map(async r=>{var o,a;const i=Cr.toAbsolute(r.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var Ro=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Ro||{});const i1e=".json",s1e="application/json",NH={extension:{type:Ue.LoadParser,priority:Ro.Low},name:"loadJson",test(t){return Fh(t,s1e)||ql(t,i1e)},async load(t){return await(await Xe.ADAPTER.fetch(t)).json()}};nt.add(NH);const o1e=".txt",a1e="text/plain",FH={name:"loadTxt",extension:{type:Ue.LoadParser,priority:Ro.Low},test(t){return Fh(t,a1e)||ql(t,o1e)},async load(t){return await(await Xe.ADAPTER.fetch(t)).text()}};nt.add(FH);const l1e=["normal","bold","100","200","300","400","500","600","700","800","900"],c1e=[".ttf",".otf",".woff",".woff2"],u1e=["font/ttf","font/otf","font/woff","font/woff2"],h1e=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function BH(t){const e=Cr.extname(t),n=Cr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=n.length>0;for(const s of n)if(!s.match(h1e)){r=!1;break}let i=n.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const d1e=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function f1e(t){return d1e.test(t)?t:encodeURI(t)}const zH={extension:{type:Ue.LoadParser,priority:Ro.Low},name:"loadWebFont",test(t){return Fh(t,u1e)||ql(t,c1e)},async load(t,e){var r,i,s;const n=Xe.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??BH(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(u=>l1e.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const h=l[u],f=new FontFace(a,`url(${f1e(t)})`,{...c,weight:h});await f.load(),n.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>Xe.ADAPTER.getFontFaceSet().delete(e))}};nt.add(zH);const p1e=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let yf=null,KA=class extends Worker{constructor(){yf||(yf=URL.createObjectURL(new Blob([p1e],{type:"application/javascript"}))),super(yf)}};KA.revokeObjectURL=function(){yf&&(URL.revokeObjectURL(yf),yf=null)};const g1e=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let vf=null;class UH extends Worker{constructor(){vf||(vf=URL.createObjectURL(new Blob([g1e],{type:"application/javascript"}))),super(vf)}}UH.revokeObjectURL=function(){vf&&(URL.revokeObjectURL(vf),vf=null)};let PB=0,GS;class m1e{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=new KA;n.addEventListener("message",r=>{n.terminate(),KA.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){GS===void 0&&(GS=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<GS&&(this._createdWorkers++,e=new UH,e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[PB]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:PB++,id:r})}}const AB=new m1e;function bp(t,e,n){t.resource.internal=!0;const r=new yt(t),i=()=>{delete e.promiseCache[n],Pc.has(n)&&Pc.remove(n)};return r.baseTexture.once("destroyed",()=>{n in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const y1e=[".jpeg",".jpg",".png",".webp",".avif"],v1e=["image/jpeg","image/png","image/webp","image/avif"];async function $H(t){const e=await Xe.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const ry={name:"loadTextures",extension:{type:Ue.LoadParser,priority:Ro.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Fh(t,v1e)||ql(t,y1e)},async load(t,e,n){var a;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;r?this.config.preferWorkers&&await AB.isImageBitmapSupported()?i=await AB.loadImageBitmap(t):i=await $H(t):i=await new Promise((l,c)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=t,u.complete?l(u):(u.onload=()=>l(u),u.onerror=h=>c(h))});const s={...e.data};s.resolution??(s.resolution=Qa(t)),r&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Rt(i,s);return o.resource.src=t,bp(o,n,t)},unload(t){t.destroy(!0)}};nt.add(ry);const b1e=".svg",_1e="image/svg+xml",jH={extension:{type:Ue.LoadParser,priority:Ro.High},name:"loadSVG",test(t){return Fh(t,_1e)||ql(t,b1e)},async testParse(t){return T_.test(t)},async parse(t,e,n){var s;const r=new T_(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await r.load();const i=new Rt(r,{resolution:Qa(t),...e==null?void 0:e.data});return i.resource.src=e.src,bp(i,n,e.src)},async load(t,e){return(await Xe.ADAPTER.fetch(t)).text()},unload:ry.unload};nt.add(jH);const x1e=[".mp4",".m4v",".webm",".ogv"],w1e=["video/mp4","video/webm","video/ogg"],GH={name:"loadVideo",extension:{type:Ue.LoadParser,priority:Ro.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Fh(t,w1e)||ql(t,x1e)},async load(t,e,n){var o;let r;const i=await(await Xe.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new nO(s,a);await l.load();const c=new Rt(l,{alphaMode:await TG(),resolution:Qa(t),...e==null?void 0:e.data});c.resource.src=t,r=bp(c,n,t),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return r},unload(t){t.destroy(!0)}};nt.add(GH);class E1e{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}getAlias(e){const{alias:n,name:r,src:i,srcs:s}=e;return go(n||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));r.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(n).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof n[i]=="string")this.add({alias:s,src:n[i]});else if(Array.isArray(n[i]))this.add({alias:s,src:n[i]});else{const o=n[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}r.push(...s)}),this._bundles[e]=r}add(e,n,r,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(_t("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:n,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},go(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:h,format:f,loadParser:g}=l;const m=go(c||u).map(b=>typeof b=="string"?DH(b):Array.isArray(b)?b:[b]),y=this.getAlias(l);Array.isArray(y)?y.forEach(a):a(y);const x=[];m.forEach(b=>{b.forEach(w=>{let v={};if(typeof w!="object"){v.src=w;for(let E=0;E<this._parsers.length;E++){const S=this._parsers[E];if(S.test(w)){v=S.parse(w);break}}}else h=w.data??h,f=w.format??f,g=w.loadParser??g,v={...v,...w};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${v.src}`);v=this.buildResolvedAsset(v,{aliases:y,data:h,format:f,loadParser:g}),x.push(v)})}),y.forEach(b=>{this._assetMap[b]=x})})}resolveBundle(e){const n=u0(e);e=go(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=u0(e);e=go(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(h=>h[l]?h[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}buildResolvedAsset(e,n){const{aliases:r,data:i,loadParser:s,format:o}=n;return(this._basePath||this._rootPath)&&(e.src=Cr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??Cr.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class HH{constructor(){this._detections=[],this._initialized=!1,this.resolver=new E1e,this.loader=new r1e,this.cache=Pc,this._backgroundLoader=new t1e(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r,i,s){this.resolver.add(e,n,r,i,s)}async load(e,n){this._initialized||await this.init();const r=u0(e),i=go(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{n==null||n(++a/l)},u=o.map(h=>{const f=i[h];return l+=Object.keys(f).length,this._mapLoadToResolve(f,c).then(g=>{s[h]=g})});return await Promise.all(u),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Pc.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Pc.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Pc.set(u,c)}),o}async unload(e){this._initialized||await this.init();const n=go(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=go(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Pc.remove(r.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?n=await r.add(n):e.skipDetections||(n=await r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n}get detections(){return this._detections}get preferWorkers(){return ry.config.preferWorkers}set preferWorkers(e){_t("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const Ug=new HH;nt.handleByList(Ue.LoadParser,Ug.loader.parsers).handleByList(Ue.ResolveParser,Ug.resolver.parsers).handleByList(Ue.CacheParser,Ug.cache.parsers).handleByList(Ue.DetectionParser,Ug.detections);const VH={extension:Ue.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof yt),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};nt.add(VH);async function WH(t){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const XH={extension:{type:Ue.DetectionParser,priority:1},test:async()=>WH("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};nt.add(XH);const YH={extension:{type:Ue.DetectionParser,priority:0},test:async()=>WH("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};nt.add(YH);const RB=["png","jpg","jpeg"],qH={extension:{type:Ue.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...RB],remove:async t=>t.filter(e=>!RB.includes(e))};nt.add(qH);const T1e="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function rO(t){return T1e?!1:document.createElement("video").canPlayType(t)!==""}const KH={extension:{type:Ue.DetectionParser,priority:0},test:async()=>rO("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};nt.add(KH);const ZH={extension:{type:Ue.DetectionParser,priority:0},test:async()=>rO("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};nt.add(ZH);const QH={extension:{type:Ue.DetectionParser,priority:0},test:async()=>rO("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};nt.add(QH);const JH={extension:Ue.ResolveParser,test:ry.test,parse:t=>{var e;return{resolution:parseFloat(((e=Xe.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Cr.extname(t).slice(1),src:t}}};nt.add(JH);const S1e=Object.freeze(Object.defineProperty({__proto__:null,Assets:Ug,AssetsClass:HH,Cache:Pc,LoaderParserPriority:Ro,cacheTextureArray:VH,checkDataUrl:Fh,checkExtension:ql,convertToList:go,copySearchParams:P_,createStringVariations:DH,createTexture:bp,detectAvif:XH,detectDefaults:qH,detectMp4:ZH,detectOgv:QH,detectWebm:KH,detectWebp:YH,getFontFamilyName:BH,isSingleItem:u0,loadImageBitmap:$H,loadJson:NH,loadSVG:jH,loadTextures:ry,loadTxt:FH,loadVideo:GH,loadWebFont:zH,resolveTextureUrl:JH},Symbol.toStringTag,{value:"Module"})),C1e=[".xml",".fnt"],eV={extension:{type:Ue.LoadParser,priority:Ro.Normal},name:"loadBitmapFont",test(t){return C1e.includes(Cr.extname(t).toLowerCase())},async testParse(t){return bm.test(t)||C_.test(t)},async parse(t,e,n){const r=bm.test(t)?bm.parse(t):C_.parse(t),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let h=Cr.join(Cr.dirname(i),u);h=P_(h,i),o.push(h)}const a=await n.load(o),l=o.map(c=>a[c]);return bl.install(r,l,!0)},async load(t,e){return(await Xe.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};nt.add(eV);const P1e=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:bl,BitmapFontData:c0,BitmapText:LH,TextFormat:bm,XMLFormat:S_,XMLStringFormat:C_,autoDetectFormat:CH,loadBitmapFont:eV},Symbol.toStringTag,{value:"Module"})),h0={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===Yr.CIRC){const m=t.shape;n=m.x,r=m.y,o=a=m.radius,i=s=0}else if(t.type===Yr.ELIP){const m=t.shape;n=m.x,r=m.y,o=m.width,a=m.height,i=s=0}else{const m=t.shape,y=m.width/2,x=m.height/2;n=m.x+y,r=m.y+x,o=a=Math.max(0,Math.min(m.radius,Math.min(y,x))),i=y-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let u=0,h=l*4+(i?2:0)+2,f=h,g=c;{const m=i+o,y=s,x=n+m,b=n-m,w=r+y;if(e[u++]=x,e[u++]=w,e[--h]=w,e[--h]=b,s){const v=r-y;e[f++]=b,e[f++]=v,e[--g]=v,e[--g]=x}}for(let m=1;m<l;m++){const y=Math.PI/2*(m/l),x=i+Math.cos(y)*o,b=s+Math.sin(y)*a,w=n+x,v=n-x,E=r+b,S=r-b;e[u++]=w,e[u++]=E,e[--h]=E,e[--h]=v,e[f++]=v,e[f++]=S,e[--g]=S,e[--g]=w}{const m=i,y=s+a,x=n+m,b=n-m,w=r+y,v=r-y;e[u++]=x,e[u++]=w,e[--g]=v,e[--g]=x,i&&(e[u++]=b,e[u++]=w,e[--g]=v,e[--g]=b)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,l;if(t.type!==Yr.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;r.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(n[0],n[1]);for(let u=2;u<n.length;u+=2)r.push(n[u],n[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function IB(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const iO={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){IB(n,!1);const o=[];for(let c=0;c<r.length;c++){const u=r[c];IB(u.points,!0),o.push(n.length/2),n=n.concat(u.points)}const a=gI(n,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)i.push(n[c])}}},tV={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},nV={build(t){h0.build(t)},triangulate(t,e){h0.triangulate(t,e)}};var Bi=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Bi||{}),Jo=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(Jo||{});const su={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},A1e=su;class ZA{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],l=o[o.length-1]-n,c=a-e,u=i-n,h=r-e,f=Math.abs(l*h-c*u);if(f<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const g=l*l+c*c,m=u*u+h*h,y=l*u+c*h,x=s*Math.sqrt(g)/f,b=s*Math.sqrt(m)/f,w=x*y/g,v=b*y/m,E=x*h+b*c,S=x*u+b*l,C=c*(b+w),R=l*(b+w),I=h*(x+v),L=u*(x+v),O=Math.atan2(R-S,C-E),B=Math.atan2(L-S,I-E);return{cx:E+e,cy:S+n,radius:s,startAngle:O,endAngle:B,anticlockwise:c*u>h*l}}static arc(e,n,r,i,s,o,a,l,c){const u=a-o,h=su._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/r0)*40),f=u/(h*2),g=f*2,m=Math.cos(f),y=Math.sin(f),x=h-1,b=x%1/x;for(let w=0;w<=x;++w){const v=w+b*w,E=f+o+g*v,S=Math.cos(E),C=-Math.sin(E);c.push((m*S+y*C)*s+r,(m*-C+y*S)*s+i)}}}class rV{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class $w{static curveLength(e,n,r,i,s,o,a,l){let c=0,u=0,h=0,f=0,g=0,m=0,y=0,x=0,b=0,w=0,v=0,E=e,S=n;for(let C=1;C<=10;++C)u=C/10,h=u*u,f=h*u,g=1-u,m=g*g,y=m*g,x=y*e+3*m*u*r+3*g*h*s+f*a,b=y*n+3*m*u*i+3*g*h*o+f*l,w=E-x,v=S-b,E=x,S=b,c+=Math.sqrt(w*w+v*v);return c}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=su._segmentsCount($w.curveLength(l,c,e,n,r,i,s,o));let h=0,f=0,g=0,m=0,y=0;a.push(l,c);for(let x=1,b=0;x<=u;++x)b=x/u,h=1-b,f=h*h,g=f*h,m=b*b,y=m*b,a.push(g*l+3*f*b*e+3*h*m*r+y*s,g*c+3*f*b*n+3*h*m*i+y*o)}}function MB(t,e,n,r,i,s,o,a){const l=t-n*i,c=e-r*i,u=t+n*s,h=e+r*s;let f,g;o?(f=r,g=-n):(f=-r,g=n);const m=l+f,y=c+g,x=u+f,b=h+g;return a.push(m,y,x,b),2}function Iu(t,e,n,r,i,s,o,a){const l=n-t,c=r-e;let u=Math.atan2(l,c),h=Math.atan2(i-t,s-e);a&&u<h?u+=Math.PI*2:!a&&u>h&&(h+=Math.PI*2);let f=u;const g=h-u,m=Math.abs(g),y=Math.sqrt(l*l+c*c),x=(15*m*Math.sqrt(y)/Math.PI>>0)+1,b=g/x;if(f+=b,a){o.push(t,e,n,r);for(let w=1,v=f;w<x;w++,v+=b)o.push(t,e,t+Math.sin(v)*y,e+Math.cos(v)*y);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let w=1,v=f;w<x;w++,v+=b)o.push(t+Math.sin(v)*y,e+Math.cos(v)*y,t,e);o.push(i,s,t,e)}return x*2}function R1e(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new ft(r[0],r[1]),a=new ft(r[r.length-2],r[r.length-1]),l=n.type!==Yr.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const V=(o.x+a.x)*.5,U=(a.y+o.y)*.5;r.unshift(V,U),r.push(V,U)}const u=e.points,h=r.length/2;let f=r.length;const g=u.length/2,m=s.width/2,y=m*m,x=s.miterLimit*s.miterLimit;let b=r[0],w=r[1],v=r[2],E=r[3],S=0,C=0,R=-(w-E),I=b-v,L=0,O=0,B=Math.sqrt(R*R+I*I);R/=B,I/=B,R*=m,I*=m;const M=s.alignment,D=(1-M)*2,N=M*2;l||(s.cap===Jo.ROUND?f+=Iu(b-R*(D-N)*.5,w-I*(D-N)*.5,b-R*D,w-I*D,b+R*N,w+I*N,u,!0)+2:s.cap===Jo.SQUARE&&(f+=MB(b,w,R,I,D,N,!0,u))),u.push(b-R*D,w-I*D,b+R*N,w+I*N);for(let V=1;V<h-1;++V){b=r[(V-1)*2],w=r[(V-1)*2+1],v=r[V*2],E=r[V*2+1],S=r[(V+1)*2],C=r[(V+1)*2+1],R=-(w-E),I=b-v,B=Math.sqrt(R*R+I*I),R/=B,I/=B,R*=m,I*=m,L=-(E-C),O=v-S,B=Math.sqrt(L*L+O*O),L/=B,O/=B,L*=m,O*=m;const U=v-b,X=w-E,Y=v-S,Z=C-E,se=U*Y+X*Z,xe=X*Y-Z*U,de=xe<0;if(Math.abs(xe)<.001*Math.abs(se)){u.push(v-R*D,E-I*D,v+R*N,E+I*N),se>=0&&(s.join===Bi.ROUND?f+=Iu(v,E,v-R*D,E-I*D,v-L*D,E-O*D,u,!1)+4:f+=2,u.push(v-L*N,E-O*N,v+L*D,E+O*D));continue}const Me=(-R+b)*(-I+E)-(-R+v)*(-I+w),he=(-L+S)*(-O+E)-(-L+v)*(-O+C),Se=(U*he-Y*Me)/xe,le=(Z*Me-X*he)/xe,ae=(Se-v)*(Se-v)+(le-E)*(le-E),me=v+(Se-v)*D,oe=E+(le-E)*D,_e=v-(Se-v)*N,pe=E-(le-E)*N,Ce=Math.min(U*U+X*X,Y*Y+Z*Z),we=de?D:N,Ye=Ce+we*we*y,ke=ae<=Ye;let Oe=s.join;if(Oe===Bi.MITER&&ae/y>x&&(Oe=Bi.BEVEL),ke)switch(Oe){case Bi.MITER:{u.push(me,oe,_e,pe);break}case Bi.BEVEL:{de?u.push(me,oe,v+R*N,E+I*N,me,oe,v+L*N,E+O*N):u.push(v-R*D,E-I*D,_e,pe,v-L*D,E-O*D,_e,pe),f+=2;break}case Bi.ROUND:{de?(u.push(me,oe,v+R*N,E+I*N),f+=Iu(v,E,v+R*N,E+I*N,v+L*N,E+O*N,u,!0)+4,u.push(me,oe,v+L*N,E+O*N)):(u.push(v-R*D,E-I*D,_e,pe),f+=Iu(v,E,v-R*D,E-I*D,v-L*D,E-O*D,u,!1)+4,u.push(v-L*D,E-O*D,_e,pe));break}}else{switch(u.push(v-R*D,E-I*D,v+R*N,E+I*N),Oe){case Bi.MITER:{de?u.push(_e,pe,_e,pe):u.push(me,oe,me,oe),f+=2;break}case Bi.ROUND:{de?f+=Iu(v,E,v+R*N,E+I*N,v+L*N,E+O*N,u,!0)+2:f+=Iu(v,E,v-R*D,E-I*D,v-L*D,E-O*D,u,!1)+2;break}}u.push(v-L*D,E-O*D,v+L*N,E+O*N),f+=2}}b=r[(h-2)*2],w=r[(h-2)*2+1],v=r[(h-1)*2],E=r[(h-1)*2+1],R=-(w-E),I=b-v,B=Math.sqrt(R*R+I*I),R/=B,I/=B,R*=m,I*=m,u.push(v-R*D,E-I*D,v+R*N,E+I*N),l||(s.cap===Jo.ROUND?f+=Iu(v-R*(D-N)*.5,E-I*(D-N)*.5,v-R*D,E-I*D,v+R*N,E+I*N,u,!1)+2:s.cap===Jo.SQUARE&&(f+=MB(v,E,R,I,D,N,!1,u)));const j=e.indices,W=su.epsilon*su.epsilon;for(let V=g;V<f+g-2;++V)b=u[V*2],w=u[V*2+1],v=u[(V+1)*2],E=u[(V+1)*2+1],S=u[(V+2)*2],C=u[(V+2)*2+1],!(Math.abs(b*(E-C)+v*(C-w)+S*(w-E))<W)&&j.push(V,V+1,V+2)}function I1e(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==Yr.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[n*2],i[n*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function QA(t,e){t.lineStyle.native?I1e(t,e):R1e(t,e)}class jw{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,c=2*r-2*e,u=2*i-2*n,h=4*(a*a+l*l),f=4*(a*c+l*u),g=c*c+u*u,m=2*Math.sqrt(h+f+g),y=Math.sqrt(h),x=2*h*y,b=2*Math.sqrt(g),w=f/y;return(x*m+y*f*(m-b)+(4*g*h-f*f)*Math.log((2*y+w+m)/(w+b)))/(4*x)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=su._segmentsCount(jw.curveLength(o,a,e,n,r,i));let c=0,u=0;for(let h=1;h<=l;++h){const f=h/l;c=o+(e-o)*f,u=a+(n-a)*f,s.push(c+(e+(r-e)*f-c)*f,u+(n+(i-n)*f-u)*f)}}}const ab={[Yr.POLY]:iO,[Yr.CIRC]:h0,[Yr.ELIP]:h0,[Yr.RECT]:tV,[Yr.RREC]:nV},JA=[],$g=[];class d0{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new d0(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const bd=new ft,iV=class sV extends OM{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new l0,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),$g.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n.reset(),JA.push(n)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,n=null,r=null,i=null){const s=new d0(e,n,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,n=null){if(!this.graphicsData.length)return null;const r=new d0(e,null,null,n),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const n=this.graphicsData;for(let r=0;r<n.length;++r){const i=n[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,bd):bd.copyFrom(e),i.shape.contains(bd.x,bd.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(bd.x,bd.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,n=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;const c=n[l],u=c.fillStyle,h=c.lineStyle;ab[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||h.visible)&&this.processHoles(c.holes);for(let f=0;f<2;f++){const g=f===0?u:h;if(!g.visible)continue;const m=g.texture.baseTexture,y=this.indices.length,x=this.points.length/2;m.wrapMode=Ka.REPEAT,f===0?this.processFill(c):this.processLine(c);const b=this.points.length/2-x;b!==0&&(r&&!this._compareStyles(i,g)&&(r.end(y,x),r=null),r||(r=JA.pop()||new rV,r.begin(g,y,x),this.batches.push(r),i=g),this.addUvs(this.points,e,g.texture,x,b,g.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,n=this.graphicsData.length;e<n;e++){const r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let n=0,r=e.length;n<r;n++){const i=e[n];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<sV.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Rt._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),$g.push(this.drawCalls[h]);this.drawCalls.length=0;const n=this.colors,r=this.textureIds;let i=$g.pop();i||(i=new x_,i.texArray=new w_),i.texArray.count=0,i.start=0,i.size=0,i.type=yo.TRIANGLES;let s=0,o=null,a=0,l=!1,c=yo.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const f=this.batches[h],g=8,m=f.style,y=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,c=l?yo.LINES:yo.TRIANGLES,o=null,s=g,e++),o!==y&&(o=y,y._batchEnabled!==e&&(s===g&&(e++,s=0,i.size>0&&(i=$g.pop(),i||(i=new x_,i.texArray=new w_),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),y.touched=1,y._batchEnabled=e,y._batchLocation=s,y.wrapMode=Ka.REPEAT,i.texArray.elements[i.texArray.count++]=y,s++)),i.size+=f.size,u+=f.size,a=y._batchLocation,this.addColors(n,m.color,m.alpha,f.attribSize,f.attribStart),this.addTextureIds(r,a,f.attribSize,f.attribStart)}Rt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,n=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=n[c*2],o[l++]=n[c*2+1],a[l++]=r[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?iO.triangulate(e,this):ab[e.type].triangulate(e,this)}processLine(e){QA(e,this);for(let n=0;n<e.holes.length;n++)QA(e.holes[n],this)}processHoles(e){for(let n=0;n<e.length;n++){const r=e[n];ab[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,n){for(let r=0;r<e.length/2;r++){const i=e[r*2],s=e[r*2+1];e[r*2]=n.a*i+n.c*s+n.tx,e[r*2+1]=n.b*i+n.d*s+n.ty}}addColors(e,n,r,i,s=0){const o=sn.shared.setValue(n).toLittleEndianNumber(),a=sn.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,n,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=n}addUvs(e,n,r,i,s,o=null){let a=0;const l=n.length,c=r.frame;for(;a<s;){let h=e[(i+a)*2],f=e[(i+a)*2+1];if(o){const g=o.a*h+o.c*f+o.tx;f=o.b*h+o.d*f+o.ty,h=g}a++,n.push(h/c.width,f/c.height)}const u=r.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(n,r,l,s)}adjustUvs(e,n,r,i){const s=n.baseTexture,o=1e-6,a=r+i*2,l=n.frame,c=l.width/s.width,u=l.height/s.height;let h=l.x/l.width,f=l.y/l.height,g=Math.floor(e[r]+o),m=Math.floor(e[r+1]+o);for(let y=r+2;y<a;y+=2)g=Math.min(g,Math.floor(e[y]+o)),m=Math.min(m,Math.floor(e[y+1]+o));h-=g,f-=m;for(let y=r;y<a;y+=2)e[y]=(e[y]+h)*c,e[y+1]=(e[y+1]+f)*u}};iV.BATCHABLE_SIZE=100;let oV=iV;class iy{constructor(){this.color=16777215,this.alpha=1,this.texture=yt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new iy;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=yt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Gw extends iy{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Jo.BUTT,this.join=Bi.MITER,this.miterLimit=10}clone(){const e=new Gw;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Jo.BUTT,this.join=Bi.MITER,this.miterLimit=10}}const HS={},e2=class lb extends di{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new iy,this._lineStyle=new Gw,this._matrix=null,this._holeMode=!1,this.state=da.for2d(),this._geometry=e||new oV,this._geometry.refCount++,this._transformID=-1,this._tintColor=new sn(16777215),this.blendMode=mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new lb(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,n=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:n,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const n={width:0,texture:yt.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Jo.BUTT,join:Bi.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Xc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new Xc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this}lineTo(e,n){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==n)&&r.push(e,n),this}_initCurve(e=0,n=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)}quadraticCurveTo(e,n,r,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),jw.curveTo(e,n,r,i,s),this}bezierCurveTo(e,n,r,i,s,o){return this._initCurve(),$w.curveTo(e,n,r,i,s,o,this.currentPath.points),this}arcTo(e,n,r,i,s){this._initCurve(e,n);const o=this.currentPath.points,a=ZA.curveTo(e,n,r,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:h,endAngle:f,anticlockwise:g}=a;this.arc(l,c,u,h,f,g)}return this}arc(e,n,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=r0:o&&i<=s&&(i+=r0),s-i===0)return this;const a=e+Math.cos(i)*r,l=n+Math.sin(i)*r,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const h=Math.abs(u[u.length-2]-a),f=Math.abs(u[u.length-1]-l);h<c&&f<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return ZA.arc(a,l,e,n,r,i,s,o,u),this}beginFill(e=0,n){return this.beginTextureFill({texture:yt.WHITE,color:e,alpha:n})}normalizeColor(e){const n=sn.shared.setValue(e.color??0);e.color=n.toNumber(),e.alpha??(e.alpha=n.alpha)}beginTextureFill(e){const n={texture:yt.WHITE,color:16777215,matrix:null};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,n,r,i){return this.drawShape(new xt(e,n,r,i))}drawRoundedRect(e,n,r,i,s){return this.drawShape(new Q0(e,n,r,i,s))}drawCircle(e,n,r){return this.drawShape(new K0(e,n,r))}drawEllipse(e,n,r,i){return this.drawShape(new Z0(e,n,r,i))}drawPolygon(...e){let n,r=!0;const i=e[0];i.points?(r=i.closeStroke,n=i.points):Array.isArray(e[0])?n=e[0]:n=e;const s=new Xc(n);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Yr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,n=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:n,indices:c,uvs:l,_batchRGB:sn.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let n=0,r=this.batches.length;n<r;n++){const i=this.batches[n];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const n=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=n.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,sn.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(n),e.geometry.bind(r,n),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,n){const{texArray:r,type:i,size:s,start:o}=n,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let n=this.shader;const r=this.pluginName;if(!n){if(!HS[r]){const{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new cr,default:xo.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;HS[r]=new Ml(a,o)}n=HS[r]}return n}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:n,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,n,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,lb._TEMP_POINT),this._geometry.containsPoint(lb._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n._tintRGB=sn.shared.setValue(this._tintColor).multiply(n._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this._geometry.points,u=this.vertexData;let h=0;for(let f=0;f<c.length;f+=2){const g=c[f],m=c[f+1];u[h++]=r*g+s*m+a,u[h++]=o*m+i*g+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};e2.curves=su,e2._TEMP_POINT=new ft;let bf=e2;const M1e={buildPoly:iO,buildCircle:h0,buildRectangle:tV,buildRoundedRectangle:nV,buildLine:QA,ArcUtils:ZA,BezierUtils:$w,QuadraticUtils:jw,BatchPart:rV,FILL_COMMANDS:ab,BATCH_POOL:JA,DRAW_CALL_POOL:$g},O1e=Object.freeze(Object.defineProperty({__proto__:null,FillStyle:iy,GRAPHICS_CURVES:A1e,Graphics:bf,GraphicsData:d0,GraphicsGeometry:oV,LINE_CAP:Jo,LINE_JOIN:Bi,LineStyle:Gw,curves:su,graphicsUtils:M1e},Symbol.toStringTag,{value:"Module"}));class aV extends ny{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let u=0;u<e;u++){const h=u%this.segWidth,f=u/this.segWidth|0;n.push(h*a,f*l),r.push(h/s,f/o)}const c=s*o;for(let u=0;u<c;u++){const h=u%s,f=u/s|0,g=f*this.segWidth+h,m=f*this.segWidth+h+1,y=(f+1)*this.segWidth+h,x=(f+1)*this.segWidth+h+1;i.push(g,m,y,m,x,y)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class lV extends ny{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const c=this._width*this.textureScale,u=e.length;for(let f=0;f<u;f++){const g=f*4;if(this.textureScale>0){const m=l.x-e[f].x,y=l.y-e[f].y,x=Math.sqrt(m*m+y*y);l=e[f],a+=x/c}else a=f/(u-1);s[g]=a,s[g+1]=0,s[g+2]=a,s[g+3]=1}let h=0;for(let f=0;f<u-1;f++){const g=f*2;o[h++]=g,o[h++]=g+1,o[h++]=g+2,o[h++]=g+2,o[h++]=g+1,o[h++]=g+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<a;c++){const u=e[c],h=c*4;c<e.length-1?r=e[c+1]:r=u,s=-(r.x-n.x),i=r.y-n.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=l,s*=l),o[h]=u.x+i,o[h+1]=u.y+s,o[h+2]=u.x-i,o[h+3]=u.y-s,n=u}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class cV extends Wf{constructor(e,n,r){const i=new aV(e.width,e.height,n,r),s=new Xf(yt.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const a1=10;class uV extends cV{constructor(e,n,r,i,s){var o,a,l,c;super(yt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??a1,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??a1,this._topHeight=r??((l=e.defaultBorders)==null?void 0:l.top)??a1,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??a1,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class hV extends Wf{constructor(e=yt.EMPTY,n,r,i,s){const o=new ny(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new Xf(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class dV extends Wf{constructor(e,n,r=0){const i=new lV(e.height,n,r),s=new Xf(e);r>0&&(e.baseTexture.wrapMode=Ka.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}const L1e=Object.freeze(Object.defineProperty({__proto__:null,NineSlicePlane:uV,PlaneGeometry:aV,RopeGeometry:lV,SimpleMesh:hV,SimplePlane:cV,SimpleRope:dV},Symbol.toStringTag,{value:"Module"}));class fV extends di{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=mt.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new sn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class OB{constructor(e,n,r){this.geometry=new vp,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||lt.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new wr(OG(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new wr(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new wr(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===lt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===lt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===lt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===lt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var k1e=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,D1e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class sO extends ey{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new cr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:lt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ml.from(D1e,k1e,{}),this.state=da.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=IM(e.blendMode,c),s.state.set(this.state);const u=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=sn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let g=0,m=0;g<o;g+=i,m+=1){let y=o-g;y>i&&(y=i),m>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[m];x.uploadDynamic(n,g,y);const b=e._bufferUpdateIDs[m]||0;f=f||x._updateID<b,f&&(x._updateID=e._updateID,x.uploadStatic(n,g,y)),s.geometry.bind(x.geometry),u.drawElements(u.TRIANGLES,y*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new OB(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new OB(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,c=0,u=0;for(let h=0;h<r;++h){const f=e[n+h],g=f._texture,m=f.scale.x,y=f.scale.y,x=g.trim,b=g.orig;x?(l=x.x-f.anchor.x*b.width,a=l+x.width,u=x.y-f.anchor.y*b.height,c=u+x.height):(a=b.width*(1-f.anchor.x),l=b.width*-f.anchor.x,c=b.height*(1-f.anchor.y),u=b.height*-f.anchor.y),i[o]=l*m,i[o+1]=u*y,i[o+s]=a*m,i[o+s+1]=u*y,i[o+s*2]=a*m,i[o+s*2+1]=c*y,i[o+s*3]=l*m,i[o+s*3+1]=c*y,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],c=sn.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}sO.extension={name:"particle",type:Ue.RendererPlugin};nt.add(sO);const N1e=Object.freeze(Object.defineProperty({__proto__:null,ParticleContainer:fV,ParticleRenderer:sO},Symbol.toStringTag,{value:"Module"}));class Yf extends fa{constructor(e,n=!0){super(e[0]instanceof yt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Sr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Sr.shared.add(this.update,this,zl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(yt.from(e[r]));return new Yf(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(yt.from(e[r]));return new Yf(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof yt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Sr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Sr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const F1e=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Yf},Symbol.toStringTag,{value:"Module"})),mg=new ft;class Hw extends fa{constructor(e,n=100,r=100){super(e),this.tileTransform=new J0,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new Bw(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,mg);const n=this._width,r=this._height,i=-n*this.anchor._x;if(mg.x>=i&&mg.x<i+n){const s=-r*this.anchor._y;if(mg.y>=s&&mg.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof yt?e:yt.from(e,n);return new Hw(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var B1e=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,z1e=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,U1e=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,LB=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$1e=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const l1=new cr;class oO extends ey{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new FM,this.state=da.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Ml.from(LB,$1e,n),this.shader=e.context.webGLVersion>1?Ml.from(z1e,B1e,n):Ml.from(LB,U1e,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,h=e.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[n.CONTEXT_UID]?f=l.wrapMode!==Ka.CLAMP:l.wrapMode===Ka.CLAMP&&(l.wrapMode=Ka.REPEAT));const g=f?this.simpleShader:this.shader,m=a.width,y=a.height,x=e._width,b=e._height;l1.set(u.a*m/x,u.b*m/b,u.c*y/x,u.d*y/b,u.tx/x,u.ty/b),l1.invert(),f?l1.prepend(h.mapCoord):(g.uniforms.uMapCoord=h.mapCoord.toArray(!0),g.uniforms.uClampFrame=h.uClampFrame,g.uniforms.uClampOffset=h.uClampOffset),g.uniforms.uTransform=l1.toArray(!0),g.uniforms.uColor=sn.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,n.shader.bind(g),n.geometry.bind(r),this.state.blendMode=IM(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}oO.extension={name:"tilingSprite",type:Ue.RendererPlugin};nt.add(oO);const j1e=Object.freeze(Object.defineProperty({__proto__:null,TilingSprite:Hw,TilingSpriteRenderer:oO},Symbol.toStringTag,{value:"Module"})),pV=class t2{constructor(e){this.stage=new di,e=Object.assign({forceCanvas:!1},e),this.renderer=mH(e),t2._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,n){const r=t2._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};pV._plugins=[];let sy=pV;nt.handleByList(Ue.Application,sy._plugins);class aO{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}aO.extension=Ue.Application;nt.add(aO);const G1e=Object.freeze(Object.defineProperty({__proto__:null,Application:sy,ResizePlugin:aO},Symbol.toStringTag,{value:"Module"}));function Ns(t){return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(t)}function gV(t){var e=function(n,r){if(Ns(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(Ns(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return Ns(e)==="symbol"?e:String(e)}function pr(t,e,n){return(e=gV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ul(t){return function(e){if(Array.isArray(e))return VS(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return VS(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VS(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lr(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var H1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W1e=function(t){return t==null};function jg(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=Ul(t);else{if(t===null||Ns(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!W1e(n)&&!isNaN(n)}).map(Number)}function kB(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WS(t){return t instanceof ft||t instanceof Qo}var A_=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function XS(t,e,n){if(WS(t[e])&&WS(n))t[e].copyFrom(n);else if(WS(t[e])){var r=jg(n);lr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),Ns(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var _d,mV=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},yV=function(t){return function(){return!t.apply(void 0,arguments)}},n2="children",X1e=(pr(_d={},n2,!0),pr(_d,"parent",!0),pr(_d,"worldAlpha",!0),pr(_d,"worldTransform",!0),pr(_d,"worldVisible",!0),_d),r2={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},el=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var l,c;a==null||(l=a.__reactpixi)===null||l===void 0||(c=l.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(n.hasOwnProperty(a))return lr(l.typeofs.some(function(c){return Ns(n[a])===c})||l.instanceofs.some(function(c){return n[a]instanceof c}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return lr(n.texture instanceof yt,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,yt]});lr(!!s,"".concat(t," could not get texture from props"));var o=yt.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},Y1e=yV(mV([].concat(Ul(Object.keys(X1e)),Ul(A_))));function tl(t,e,n){var r=!1;if(lr(Nn.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Ns(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<A_.length;o++){var a=A_[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var l=Object.keys(n||{});if(n.overwriteProps){for(var c=0;c<l.length;c++){var u=l[c];e[u]!==n[u]&&(r=!0,XS(t,u,n[u]))}return r}for(var h=l.filter(Y1e),f=0;f<h.length;f++){var g=h[f],m=n[g];n[g]!==e[g]&&(r=!0),m!==void 0?XS(t,g,m):g in r2?(console.warn("setting default value: ".concat(g,", from: ").concat(t[g]," to: ").concat(m," for"),t),r=!0,XS(t,g,r2[g])):console.warn("ignoring prop: ".concat(g,", from ").concat(t[g]," to ").concat(m," for"),t)}return r}var q1e=function(t,e){var n=e.text,r=e.style;return new LH(n,r)},K1e=function(){return new di};function gu(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},h=Object.keys(o);for(c=0;c<h.length;c++)l=h[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Z1e=["draw","geometry"],Q1e=function(t,e){var n=e.geometry;lr(!n||n instanceof bf,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new bf(n.geometry):new bf;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=tl(i,s,gu(o,Z1e));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(r,r)),l},r},J1e=["image","texture"],ebe=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,c=l===void 0?10:l,u=el("NineSlicePlane",t,e),h=new uV(u,r,s,a,c);return h.applyProps=function(f,g,m){var y=m.image,x=m.texture,b=tl(f,g,gu(m,J1e));return(y||x)&&(x!==g.texture&&(b=!0),f.texture=el("NineSlicePlane",t,m)),b},h};function DB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DB(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tbe=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=c1(c1({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=c1(c1({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),u=new fV(r,l,s,a);return u.willUnmount=function(h,f,g){h.destroy(c)},u},nbe=["image","texture"],rbe=function(t,e){var n=new fa(el("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,l=tl(r,i,gu(s,nbe));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),r.texture=el("Sprite",t,s)),l},n},ibe=["textures","isPlaying","initialFrame","images"],sbe=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(c){return c.map(function(u){return lr(u instanceof yt||(u==null?void 0:u.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),u})},l=r?Yf.fromImages(r):new Yf(a(n));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(c,u,h){var f=h.textures,g=h.isPlaying,m=h.initialFrame,y=h.images,x=tl(c,u,gu(h,ibe));if(y&&u.images!==y){for(var b=[],w=0;w<y.length;++w)b.push(yt.from(y[w]));c.textures=b,x=!0}if(f&&u.textures!==f&&(c.textures=a(f),x=!0),g!==u.isPlaying||m!==u.initialFrame){var v=typeof m=="number"?m:l.currentFrame||0;l[g?"gotoAndPlay":"gotoAndStop"](v),x=!0}return x},l},obe=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new Uw(r,s);return o?(a.updateText(),new fa(a.texture)):a},abe=["tileScale","tilePosition","image","texture"],lbe=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=el("TilingSprite",t,e),a=new Hw(o,r,s);return a.applyProps=function(l,c,u){var h=u.tileScale,f=u.tilePosition,g=u.image,m=u.texture,y=tl(l,c,gu(u,abe));if(f){var x,b=jg(f);(x=l.tilePosition).set.apply(x,Ul(b)),y=!kB(jg(c.tilePosition),b)||y}if(h){var w,v=jg(h);(w=l.tileScale).set.apply(w,Ul(v)),y=!kB(jg(c.tileScale),v)||y}return(g||m)&&(m!==c.texture&&(y=!0),l.texture=el("Sprite",t,u)),y},a},cbe=["image","texture"],ube=function(t,e){var n=el("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?yo.TRIANGLES:o,l=new hV(n,r,i,s,a);return l.applyProps=function(c,u,h){var f=h.image,g=h.texture,m=tl(c,u,gu(h,cbe));return(f||g)&&(g!==u.texture&&(m=!0),c.texture=el("Mesh",t,h)),m},l},hbe=["image","texture"],dbe=function(t,e){var n=el("SimpleRope",t,e),r=e.points,i=new dV(n,r);return i.applyProps=function(s,o,a){var l=a.image,c=a.texture,u=gu(a,hbe);lr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var h=tl(s,o,u);return(l||c)&&(c!==o.texture&&(h=!0),s.texture=el("SimpleRope",t,a)),h},i},fbe=Object.freeze({__proto__:null,BitmapText:q1e,Container:K1e,Graphics:Q1e,NineSlicePlane:ebe,ParticleContainer:tbe,Sprite:rbe,Text:obe,TilingSprite:lbe,SimpleMesh:ube,SimpleRope:dbe,AnimatedSprite:sbe});function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var us={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},pbe=Object.keys(us).reduce(function(t,e){return FB(FB({},t),{},pr({},e,fbe[e]))},{}),vV={};function gbe(t,e){return lr(!!t,"Expect type to be defined, got `%s`",t),lr(!us[t],"Component `%s` could not be created, already exists in default components.",t),vV[t]=e,t}var BB,zB,UB,$B,i2={},s2={},mbe={get exports(){return s2},set exports(t){s2=t}},jB={};function ybe(){return zB||(zB=1,mbe.exports=(BB||(BB=1,function(t){function e(U,X){var Y=U.length;U.push(X);e:for(;0<Y;){var Z=Y-1>>>1,se=U[Z];if(!(0<i(se,X)))break e;U[Z]=X,U[Y]=se,Y=Z}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],Y=U.pop();if(Y!==X){U[0]=Y;e:for(var Z=0,se=U.length,xe=se>>>1;Z<xe;){var de=2*(Z+1)-1,Me=U[de],he=de+1,Se=U[he];if(0>i(Me,Y))he<se&&0>i(Se,Me)?(U[Z]=Se,U[he]=Y,Z=he):(U[Z]=Me,U[de]=Y,Z=de);else{if(!(he<se&&0>i(Se,Y)))break e;U[Z]=Se,U[he]=Y,Z=he}}}return X}function i(U,X){var Y=U.sortIndex-X.sortIndex;return Y!==0?Y:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function v(U){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else{if(!(X.startTime<=U))break;r(c),X.sortIndex=X.expirationTime,e(l,X)}X=n(c)}}function E(U){if(y=!1,v(U),!m)if(n(l)!==null)m=!0,W(S);else{var X=n(c);X!==null&&V(E,X.startTime-U)}}function S(U,X){m=!1,y&&(y=!1,b(L),L=-1),g=!0;var Y=f;try{for(v(X),h=n(l);h!==null&&(!(h.expirationTime>X)||U&&!M());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var se=Z(h.expirationTime<=X);X=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),v(X)}else r(l);h=n(l)}if(h!==null)var xe=!0;else{var de=n(c);de!==null&&V(E,de.startTime-X),xe=!1}return xe}finally{h=null,f=Y,g=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,R=!1,I=null,L=-1,O=5,B=-1;function M(){return!(t.unstable_now()-B<O)}function D(){if(I!==null){var U=t.unstable_now();B=U;var X=!0;try{X=I(!0,U)}finally{X?C():(R=!1,I=null)}}else R=!1}if(typeof w=="function")C=function(){w(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=D,C=function(){j.postMessage(null)}}else C=function(){x(D,0)};function W(U){I=U,R||(R=!0,C())}function V(U,X){L=x(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,W(S))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var Y=f;f=X;try{return U()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=f;f=U;try{return X()}finally{f=Y}},t.unstable_scheduleCallback=function(U,X,Y){var Z=t.unstable_now();switch(Y=typeof Y=="object"&&Y!==null&&typeof(Y=Y.delay)=="number"&&0<Y?Z+Y:Z,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return U={id:u++,callback:X,priorityLevel:U,startTime:Y,expirationTime:se=Y+se,sortIndex:-1},Y>Z?(U.sortIndex=Y,e(c,U),n(l)===null&&U===n(c)&&(y?(b(L),L=-1):y=!0,V(E,Y-Z))):(U.sortIndex=se,e(l,U),m||g||(m=!0,W(S))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var X=f;return function(){var Y=f;f=X;try{return U.apply(this,arguments)}finally{f=Y}}}}(jB)),jB)),s2}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function vbe(){return $B||($B=1,UB=function(t){var e={},n=An,r=ybe(),i=Object.assign;function s(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,_=1;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),E=Symbol.iterator;function S(d){return d===null||typeof d!="object"?null:typeof(d=E&&d[E]||d["@@iterator"])=="function"?d:null}function C(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case l:return"Portal";case h:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case f:return(d._context.displayName||"Context")+".Provider";case m:var p=d.render;return(d=d.displayName)||(d=(d=p.displayName||p.name||"")!==""?"ForwardRef("+d+")":"ForwardRef"),d;case b:return(p=d.displayName||null)!==null?p:C(d.type)||"Memo";case w:p=d._payload,d=d._init;try{return C(d(p))}catch{}}return null}function R(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=(d=p.render).displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(p);case 8:return p===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function I(d){var p=d,_=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do 4098&(p=d).flags&&(_=p.return),d=p.return;while(d)}return p.tag===3?_:null}function L(d){if(I(d)!==d)throw Error(s(188))}function O(d){var p=d.alternate;if(!p){if((p=I(d))===null)throw Error(s(188));return p!==d?null:d}for(var _=d,T=p;;){var A=_.return;if(A===null)break;var k=A.alternate;if(k===null){if((T=A.return)!==null){_=T;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===_)return L(A),d;if(k===T)return L(A),p;k=k.sibling}throw Error(s(188))}if(_.return!==T.return)_=A,T=k;else{for(var H=!1,J=A.child;J;){if(J===_){H=!0,_=A,T=k;break}if(J===T){H=!0,T=A,_=k;break}J=J.sibling}if(!H){for(J=k.child;J;){if(J===_){H=!0,_=k,T=A;break}if(J===T){H=!0,T=k,_=A;break}J=J.sibling}if(!H)throw Error(s(189))}}if(_.alternate!==T)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?d:p}function B(d){return(d=O(d))!==null?M(d):null}function M(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=M(d);if(p!==null)return p;d=d.sibling}return null}function D(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=D(d);if(p!==null)return p}d=d.sibling}return null}var N,j=Array.isArray,W=t.getPublicInstance,V=t.getRootHostContext,U=t.getChildHostContext,X=t.prepareForCommit,Y=t.resetAfterCommit,Z=t.createInstance,se=t.appendInitialChild,xe=t.finalizeInitialChildren,de=t.prepareUpdate,Me=t.shouldSetTextContent,he=t.createTextInstance,Se=t.scheduleTimeout,le=t.cancelTimeout,ae=t.noTimeout,me=t.isPrimaryRenderer,oe=t.supportsMutation,_e=t.supportsPersistence,pe=t.supportsHydration,Ce=t.getInstanceFromNode,we=t.preparePortalMount,Ye=t.getCurrentEventPriority,ke=t.detachDeletedInstance,Oe=t.supportsMicrotasks,rt=t.scheduleMicrotask,qe=t.supportsTestSelectors,He=t.findFiberRoot,fn=t.getBoundingRect,Mt=t.getTextContent,pt=t.isHiddenSubtree,Te=t.matchAccessibilityRole,Ne=t.setFocusIfFocusable,Ke=t.setupIntersectionObserver,je=t.appendChild,Le=t.appendChildToContainer,kt=t.commitTextUpdate,wt=t.commitMount,Ot=t.commitUpdate,Fe=t.insertBefore,St=t.insertInContainerBefore,Ht=t.removeChild,on=t.removeChildFromContainer,Nr=t.resetTextContent,Vi=t.hideInstance,Mo=t.hideTextInstance,pa=t.unhideInstance,Xs=t.unhideTextInstance,hs=t.clearContainer,ee=t.cloneInstance,ne=t.createContainerChildSet,ce=t.appendChildToContainerChildSet,De=t.finalizeContainerChildren,Ge=t.replaceContainerChildren,vt=t.cloneHiddenInstance,ut=t.cloneHiddenTextInstance,ht=t.canHydrateInstance,Je=t.canHydrateTextInstance,Lt=t.canHydrateSuspenseInstance,an=t.isSuspenseInstancePending,gt=t.isSuspenseInstanceFallback,Ct=t.getSuspenseInstanceFallbackErrorDetails,ln=t.registerSuspenseInstanceRetry,Fn=t.getNextHydratableSibling,tn=t.getFirstHydratableChild,Pr=t.getFirstHydratableChildWithinContainer,ds=t.getFirstHydratableChildWithinSuspenseInstance,Zt=t.hydrateInstance,Jt=t.hydrateTextInstance,vr=t.hydrateSuspenseInstance,br=t.getNextHydratableInstanceAfterSuspenseInstance,Wn=t.commitHydratedContainer,fs=t.commitHydratedSuspenseInstance,Mi=t.clearSuspenseBoundary,Et=t.clearSuspenseBoundaryFromContainer,At=t.shouldDeleteUnhydratedTailInstances,bn=t.didNotMatchHydratedContainerTextInstance,Zr=t.didNotMatchHydratedTextInstance;function Xn(d){if(N===void 0)try{throw Error()}catch(_){var p=_.stack.trim().match(/\n( *(at )?)/);N=p&&p[1]||""}return`
`+N+d}var Ys=!1;function qs(d,p){if(!d||Ys)return"";Ys=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(fe){var T=fe}Reflect.construct(d,[],p)}else{try{p.call()}catch(fe){T=fe}d.call(p.prototype)}else{try{throw Error()}catch(fe){T=fe}d()}}catch(fe){if(fe&&T&&typeof fe.stack=="string"){for(var A=fe.stack.split(`
`),k=T.stack.split(`
`),H=A.length-1,J=k.length-1;1<=H&&0<=J&&A[H]!==k[J];)J--;for(;1<=H&&0<=J;H--,J--)if(A[H]!==k[J]){if(H!==1||J!==1)do if(H--,0>--J||A[H]!==k[J]){var re=`
`+A[H].replace(" at new "," at ");return d.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",d.displayName)),re}while(1<=H&&0<=J);break}}}finally{Ys=!1,Error.prepareStackTrace=_}return(d=d?d.displayName||d.name:"")?Xn(d):""}var Oo=Object.prototype.hasOwnProperty,cl=[],Qr=-1;function Fr(d){return{current:d}}function Tn(d){0>Qr||(d.current=cl[Qr],cl[Qr]=null,Qr--)}function mn(d,p){Qr++,cl[Qr]=d.current,d.current=p}var ps={},_n=Fr(ps),Ar=Fr(!1),Lo=ps;function ga(d,p){var _=d.type.contextTypes;if(!_)return ps;var T=d.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===p)return T.__reactInternalMemoizedMaskedChildContext;var A,k={};for(A in _)k[A]=p[A];return T&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=k),k}function Jr(d){return(d=d.childContextTypes)!=null}function mu(){Tn(Ar),Tn(_n)}function yu(d,p,_){if(_n.current!==ps)throw Error(s(168));mn(_n,p),mn(Ar,_)}function Ks(d,p,_){var T=d.stateNode;if(p=p.childContextTypes,typeof T.getChildContext!="function")return _;for(var A in T=T.getChildContext())if(!(A in p))throw Error(s(108,R(d)||"Unknown",A));return i({},_,T)}function Gh(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||ps,Lo=_n.current,mn(_n,d),mn(Ar,Ar.current),!0}function wp(d,p,_){var T=d.stateNode;if(!T)throw Error(s(169));_?(d=Ks(d,p,Lo),T.__reactInternalMemoizedMergedChildContext=d,Tn(Ar),Tn(_n),mn(_n,d)):Tn(Ar),mn(Ar,_)}var Oi=Math.clz32?Math.clz32:function(d){return(d>>>=0)===0?32:31-(yy(d)/tE|0)|0},yy=Math.log,tE=Math.LN2,Ep=64,z=4194304;function G(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&d;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&d;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function q(d,p){var _=d.pendingLanes;if(_===0)return 0;var T=0,A=d.suspendedLanes,k=d.pingedLanes,H=268435455&_;if(H!==0){var J=H&~A;J!==0?T=G(J):(k&=H)!==0&&(T=G(k))}else(H=_&~A)!==0?T=G(H):k!==0&&(T=G(k));if(T===0)return 0;if(p!==0&&p!==T&&!(p&A)&&((A=T&-T)>=(k=p&-p)||A===16&&4194240&k))return p;if(4&T&&(T|=16&_),(p=d.entangledLanes)!==0)for(d=d.entanglements,p&=T;0<p;)A=1<<(_=31-Oi(p)),T|=d[_],p&=~A;return T}function ie(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;default:return-1}}function Ee(d){return(d=-1073741825&d.pendingLanes)!==0?d:1073741824&d?1073741824:0}function Ve(){var d=Ep;return!(4194240&(Ep<<=1))&&(Ep=64),d}function Dt(d){for(var p=[],_=0;31>_;_++)p.push(d);return p}function Bn(d,p,_){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),(d=d.eventTimes)[p=31-Oi(p)]=_}function hr(d,p){var _=d.entangledLanes|=p;for(d=d.entanglements;_;){var T=31-Oi(_),A=1<<T;A&p|d[T]&p&&(d[T]|=p),_&=~A}}var bt=0;function gs(d){return 1<(d&=-d)?4<d?268435455&d?16:536870912:4:1}var nE=r.unstable_scheduleCallback,ZO=r.unstable_cancelCallback,h7=r.unstable_shouldYield,d7=r.unstable_requestPaint,Br=r.unstable_now,rE=r.unstable_ImmediatePriority,f7=r.unstable_UserBlockingPriority,QO=r.unstable_NormalPriority,p7=r.unstable_IdlePriority,vy=null,ma=null,ko=typeof Object.is=="function"?Object.is:function(d,p){return d===p&&(d!==0||1/d==1/p)||d!=d&&p!=p},ul=null,by=!1,iE=!1;function JO(d){ul===null?ul=[d]:ul.push(d)}function ya(){if(!iE&&ul!==null){iE=!0;var d=0,p=bt;try{var _=ul;for(bt=1;d<_.length;d++){var T=_[d];do T=T(!0);while(T!==null)}ul=null,by=!1}catch(A){throw ul!==null&&(ul=ul.slice(d+1)),nE(rE,ya),A}finally{bt=p,iE=!1}}return null}var Hh=[],Vh=0,_y=null,xy=0,Zs=[],Qs=0,vu=null,va=1,hl="";function bu(d,p){Hh[Vh++]=xy,Hh[Vh++]=_y,_y=d,xy=p}function eL(d,p,_){Zs[Qs++]=va,Zs[Qs++]=hl,Zs[Qs++]=vu,vu=d;var T=va;d=hl;var A=32-Oi(T)-1;T&=~(1<<A),_+=1;var k=32-Oi(p)+A;if(30<k){var H=A-A%5;k=(T&(1<<H)-1).toString(32),T>>=H,A-=H,va=1<<32-Oi(p)+A|_<<A|T,hl=k+d}else va=1<<k|_<<A|T,hl=d}function sE(d){d.return!==null&&(bu(d,1),eL(d,1,0))}function oE(d){for(;d===_y;)_y=Hh[--Vh],Hh[Vh]=null,xy=Hh[--Vh],Hh[Vh]=null;for(;d===vu;)vu=Zs[--Qs],Zs[Qs]=null,hl=Zs[--Qs],Zs[Qs]=null,va=Zs[--Qs],Zs[Qs]=null}var ms=null,Js=null,zn=!1,Tp=!1,Do=null;function tL(d,p){var _=io(5,null,null,0);_.elementType="DELETED",_.stateNode=p,_.return=d,(p=d.deletions)===null?(d.deletions=[_],d.flags|=16):p.push(_)}function nL(d,p){switch(d.tag){case 5:return(p=ht(p,d.type,d.pendingProps))!==null&&(d.stateNode=p,ms=d,Js=tn(p),!0);case 6:return(p=Je(p,d.pendingProps))!==null&&(d.stateNode=p,ms=d,Js=null,!0);case 13:if((p=Lt(p))!==null){var _=vu!==null?{id:va,overflow:hl}:null;return d.memoizedState={dehydrated:p,treeContext:_,retryLane:1073741824},(_=io(18,null,null,0)).stateNode=p,_.return=d,d.child=_,ms=d,Js=null,!0}return!1;default:return!1}}function aE(d){return(1&d.mode)!=0&&(128&d.flags)==0}function lE(d){if(zn){var p=Js;if(p){var _=p;if(!nL(d,p)){if(aE(d))throw Error(s(418));p=Fn(_);var T=ms;p&&nL(d,p)?tL(T,_):(d.flags=-4097&d.flags|2,zn=!1,ms=d)}}else{if(aE(d))throw Error(s(418));d.flags=-4097&d.flags|2,zn=!1,ms=d}}}function rL(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;ms=d}function wy(d){if(!pe||d!==ms)return!1;if(!zn)return rL(d),zn=!0,!1;if(d.tag!==3&&(d.tag!==5||At(d.type)&&!Me(d.type,d.memoizedProps))){var p=Js;if(p){if(aE(d))throw iL(),Error(s(418));for(;p;)tL(d,p),p=Fn(p)}}if(rL(d),d.tag===13){if(!pe)throw Error(s(316));if(!(d=(d=d.memoizedState)!==null?d.dehydrated:null))throw Error(s(317));Js=br(d)}else Js=ms?Fn(d.stateNode):null;return!0}function iL(){for(var d=Js;d;)d=Fn(d)}function Wh(){pe&&(Js=ms=null,Tp=zn=!1)}function cE(d){Do===null?Do=[d]:Do.push(d)}var g7=o.ReactCurrentBatchConfig;function Ey(d,p){if(ko(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var _=Object.keys(d),T=Object.keys(p);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var A=_[T];if(!Oo.call(p,A)||!ko(d[A],p[A]))return!1}return!0}function m7(d){switch(d.tag){case 5:return Xn(d.type);case 16:return Xn("Lazy");case 13:return Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 2:case 15:return d=qs(d.type,!1);case 11:return d=qs(d.type.render,!1);case 1:return d=qs(d.type,!0);default:return""}}function No(d,p){if(d&&d.defaultProps){for(var _ in p=i({},p),d=d.defaultProps)p[_]===void 0&&(p[_]=d[_]);return p}return p}var Ty=Fr(null),Sy=null,Xh=null,uE=null;function hE(){uE=Xh=Sy=null}function sL(d,p,_){me?(mn(Ty,p._currentValue),p._currentValue=_):(mn(Ty,p._currentValue2),p._currentValue2=_)}function dE(d){var p=Ty.current;Tn(Ty),me?d._currentValue=p:d._currentValue2=p}function fE(d,p,_){for(;d!==null;){var T=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),d===_)break;d=d.return}}function Yh(d,p){Sy=d,uE=Xh=null,(d=d.dependencies)!==null&&d.firstContext!==null&&(d.lanes&p&&(Wi=!0),d.firstContext=null)}function eo(d){var p=me?d._currentValue:d._currentValue2;if(uE!==d)if(d={context:d,memoizedValue:p,next:null},Xh===null){if(Sy===null)throw Error(s(308));Xh=d,Sy.dependencies={lanes:0,firstContext:d}}else Xh=Xh.next=d;return p}var _u=null;function pE(d){_u===null?_u=[d]:_u.push(d)}function oL(d,p,_,T){var A=p.interleaved;return A===null?(_.next=_,pE(p)):(_.next=A.next,A.next=_),p.interleaved=_,ba(d,T)}function ba(d,p){d.lanes|=p;var _=d.alternate;for(_!==null&&(_.lanes|=p),_=d,d=d.return;d!==null;)d.childLanes|=p,(_=d.alternate)!==null&&(_.childLanes|=p),_=d,d=d.return;return _.tag===3?_.stateNode:null}var Ql=!1;function gE(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aL(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function dl(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Jl(d,p,_){var T=d.updateQueue;if(T===null)return null;if(T=T.shared,(2&Qt)!=0){var A=T.pending;return A===null?p.next=p:(p.next=A.next,A.next=p),T.pending=p,ba(d,_)}return(A=T.interleaved)===null?(p.next=p,pE(T)):(p.next=A.next,A.next=p),T.interleaved=p,ba(d,_)}function Cy(d,p,_){if((p=p.updateQueue)!==null&&(p=p.shared,(4194240&_)!=0)){var T=p.lanes;_|=T&=d.pendingLanes,p.lanes=_,hr(d,_)}}function lL(d,p){var _=d.updateQueue,T=d.alternate;if(T!==null&&_===(T=T.updateQueue)){var A=null,k=null;if((_=_.firstBaseUpdate)!==null){do{var H={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};k===null?A=k=H:k=k.next=H,_=_.next}while(_!==null);k===null?A=k=p:k=k.next=p}else A=k=p;return _={baseState:T.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:T.shared,effects:T.effects},void(d.updateQueue=_)}(d=_.lastBaseUpdate)===null?_.firstBaseUpdate=p:d.next=p,_.lastBaseUpdate=p}function Py(d,p,_,T){var A=d.updateQueue;Ql=!1;var k=A.firstBaseUpdate,H=A.lastBaseUpdate,J=A.shared.pending;if(J!==null){A.shared.pending=null;var re=J,fe=re.next;re.next=null,H===null?k=fe:H.next=fe,H=re;var ve=d.alternate;ve!==null&&(J=(ve=ve.updateQueue).lastBaseUpdate)!==H&&(J===null?ve.firstBaseUpdate=fe:J.next=fe,ve.lastBaseUpdate=re)}if(k!==null){var ze=A.baseState;for(H=0,ve=fe=re=null,J=k;;){var ye=J.lane,Ie=J.eventTime;if((T&ye)===ye){ve!==null&&(ve=ve.next={eventTime:Ie,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var it=d,zt=J;switch(ye=p,Ie=_,zt.tag){case 1:if(typeof(it=zt.payload)=="function"){ze=it.call(Ie,ze,ye);break e}ze=it;break e;case 3:it.flags=-65537&it.flags|128;case 0:if((ye=typeof(it=zt.payload)=="function"?it.call(Ie,ze,ye):it)==null)break e;ze=i({},ze,ye);break e;case 2:Ql=!0}}J.callback!==null&&J.lane!==0&&(d.flags|=64,(ye=A.effects)===null?A.effects=[J]:ye.push(J))}else Ie={eventTime:Ie,lane:ye,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ve===null?(fe=ve=Ie,re=ze):ve=ve.next=Ie,H|=ye;if((J=J.next)===null){if((J=A.shared.pending)===null)break;J=(ye=J).next,ye.next=null,A.lastBaseUpdate=ye,A.shared.pending=null}}if(ve===null&&(re=ze),A.baseState=re,A.firstBaseUpdate=fe,A.lastBaseUpdate=ve,(p=A.shared.interleaved)!==null){A=p;do H|=A.lane,A=A.next;while(A!==p)}else k===null&&(A.shared.lanes=0);wu|=H,d.lanes=H,d.memoizedState=ze}}function cL(d,p,_){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var T=d[p],A=T.callback;if(A!==null){if(T.callback=null,T=_,typeof A!="function")throw Error(s(191,A));A.call(T)}}}var uL=new n.Component().refs;function mE(d,p,_,T){_=(_=_(T,p=d.memoizedState))==null?p:i({},p,_),d.memoizedState=_,d.lanes===0&&(d.updateQueue.baseState=_)}var Ay={isMounted:function(d){return!!(d=d._reactInternals)&&I(d)===d},enqueueSetState:function(d,p,_){d=d._reactInternals;var T=gi(),A=rc(d),k=dl(T,A);k.payload=p,_!=null&&(k.callback=_),(p=Jl(d,k,A))!==null&&(ro(p,d,A,T),Cy(p,d,A))},enqueueReplaceState:function(d,p,_){d=d._reactInternals;var T=gi(),A=rc(d),k=dl(T,A);k.tag=1,k.payload=p,_!=null&&(k.callback=_),(p=Jl(d,k,A))!==null&&(ro(p,d,A,T),Cy(p,d,A))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var _=gi(),T=rc(d),A=dl(_,T);A.tag=2,p!=null&&(A.callback=p),(p=Jl(d,A,T))!==null&&(ro(p,d,T,_),Cy(p,d,T))}};function hL(d,p,_,T,A,k,H){return typeof(d=d.stateNode).shouldComponentUpdate=="function"?d.shouldComponentUpdate(T,k,H):!p.prototype||!p.prototype.isPureReactComponent||!Ey(_,T)||!Ey(A,k)}function dL(d,p,_){var T=!1,A=ps,k=p.contextType;return typeof k=="object"&&k!==null?k=eo(k):(A=Jr(p)?Lo:_n.current,k=(T=(T=p.contextTypes)!=null)?ga(d,A):ps),p=new p(_,k),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ay,d.stateNode=p,p._reactInternals=d,T&&((d=d.stateNode).__reactInternalMemoizedUnmaskedChildContext=A,d.__reactInternalMemoizedMaskedChildContext=k),p}function fL(d,p,_,T){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(_,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(_,T),p.state!==d&&Ay.enqueueReplaceState(p,p.state,null)}function yE(d,p,_,T){var A=d.stateNode;A.props=_,A.state=d.memoizedState,A.refs=uL,gE(d);var k=p.contextType;typeof k=="object"&&k!==null?A.context=eo(k):(k=Jr(p)?Lo:_n.current,A.context=ga(d,k)),A.state=d.memoizedState,typeof(k=p.getDerivedStateFromProps)=="function"&&(mE(d,p,k,_),A.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(p=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),p!==A.state&&Ay.enqueueReplaceState(A,A.state,null),Py(d,_,A,T),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308)}function Sp(d,p,_){if((d=_.ref)!==null&&typeof d!="function"&&typeof d!="object"){if(_._owner){if(_=_._owner){if(_.tag!==1)throw Error(s(309));var T=_.stateNode}if(!T)throw Error(s(147,d));var A=T,k=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===k?p.ref:(p=function(H){var J=A.refs;J===uL&&(J=A.refs={}),H===null?delete J[k]:J[k]=H},p._stringRef=k,p)}if(typeof d!="string")throw Error(s(284));if(!_._owner)throw Error(s(290,d))}return d}function Ry(d,p){throw d=Object.prototype.toString.call(p),Error(s(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function pL(d){return(0,d._init)(d._payload)}function gL(d){function p(be,te){if(d){var ue=be.deletions;ue===null?(be.deletions=[te],be.flags|=16):ue.push(te)}}function _(be,te){if(!d)return null;for(;te!==null;)p(be,te),te=te.sibling;return null}function T(be,te){for(be=new Map;te!==null;)te.key!==null?be.set(te.key,te):be.set(te.index,te),te=te.sibling;return be}function A(be,te){return(be=sc(be,te)).index=0,be.sibling=null,be}function k(be,te,ue){return be.index=ue,d?(ue=be.alternate)!==null?(ue=ue.index)<te?(be.flags|=2,te):ue:(be.flags|=2,te):(be.flags|=1048576,te)}function H(be){return d&&be.alternate===null&&(be.flags|=2),be}function J(be,te,ue,Pe){return te===null||te.tag!==6?((te=rT(ue,be.mode,Pe)).return=be,te):((te=A(te,ue)).return=be,te)}function re(be,te,ue,Pe){var dt=ue.type;return dt===c?ve(be,te,ue.props.children,Pe,ue.key):te!==null&&(te.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===w&&pL(dt)===te.type)?((Pe=A(te,ue.props)).ref=Sp(be,te,ue),Pe.return=be,Pe):((Pe=tv(ue.type,ue.key,ue.props,null,be.mode,Pe)).ref=Sp(be,te,ue),Pe.return=be,Pe)}function fe(be,te,ue,Pe){return te===null||te.tag!==4||te.stateNode.containerInfo!==ue.containerInfo||te.stateNode.implementation!==ue.implementation?((te=iT(ue,be.mode,Pe)).return=be,te):((te=A(te,ue.children||[])).return=be,te)}function ve(be,te,ue,Pe,dt){return te===null||te.tag!==7?((te=Su(ue,be.mode,Pe,dt)).return=be,te):((te=A(te,ue)).return=be,te)}function ze(be,te,ue){if(typeof te=="string"&&te!==""||typeof te=="number")return(te=rT(""+te,be.mode,ue)).return=be,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case a:return(ue=tv(te.type,te.key,te.props,null,be.mode,ue)).ref=Sp(be,null,te),ue.return=be,ue;case l:return(te=iT(te,be.mode,ue)).return=be,te;case w:return ze(be,(0,te._init)(te._payload),ue)}if(j(te)||S(te))return(te=Su(te,be.mode,ue,null)).return=be,te;Ry(be,te)}return null}function ye(be,te,ue,Pe){var dt=te!==null?te.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return dt!==null?null:J(be,te,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case a:return ue.key===dt?re(be,te,ue,Pe):null;case l:return ue.key===dt?fe(be,te,ue,Pe):null;case w:return ye(be,te,(dt=ue._init)(ue._payload),Pe)}if(j(ue)||S(ue))return dt!==null?null:ve(be,te,ue,Pe,null);Ry(be,ue)}return null}function Ie(be,te,ue,Pe,dt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return J(te,be=be.get(ue)||null,""+Pe,dt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case a:return re(te,be=be.get(Pe.key===null?ue:Pe.key)||null,Pe,dt);case l:return fe(te,be=be.get(Pe.key===null?ue:Pe.key)||null,Pe,dt);case w:return Ie(be,te,ue,(0,Pe._init)(Pe._payload),dt)}if(j(Pe)||S(Pe))return ve(te,be=be.get(ue)||null,Pe,dt,null);Ry(te,Pe)}return null}function it(be,te,ue,Pe){for(var dt=null,pn=null,st=te,nn=te=0,ti=null;st!==null&&nn<ue.length;nn++){st.index>nn?(ti=st,st=null):ti=st.sibling;var gn=ye(be,st,ue[nn],Pe);if(gn===null){st===null&&(st=ti);break}d&&st&&gn.alternate===null&&p(be,st),te=k(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn,st=ti}if(nn===ue.length)return _(be,st),zn&&bu(be,nn),dt;if(st===null){for(;nn<ue.length;nn++)(st=ze(be,ue[nn],Pe))!==null&&(te=k(st,te,nn),pn===null?dt=st:pn.sibling=st,pn=st);return zn&&bu(be,nn),dt}for(st=T(be,st);nn<ue.length;nn++)(ti=Ie(st,be,nn,ue[nn],Pe))!==null&&(d&&ti.alternate!==null&&st.delete(ti.key===null?nn:ti.key),te=k(ti,te,nn),pn===null?dt=ti:pn.sibling=ti,pn=ti);return d&&st.forEach(function(oc){return p(be,oc)}),zn&&bu(be,nn),dt}function zt(be,te,ue,Pe){var dt=S(ue);if(typeof dt!="function")throw Error(s(150));if((ue=dt.call(ue))==null)throw Error(s(151));for(var pn=dt=null,st=te,nn=te=0,ti=null,gn=ue.next();st!==null&&!gn.done;nn++,gn=ue.next()){st.index>nn?(ti=st,st=null):ti=st.sibling;var oc=ye(be,st,gn.value,Pe);if(oc===null){st===null&&(st=ti);break}d&&st&&oc.alternate===null&&p(be,st),te=k(oc,te,nn),pn===null?dt=oc:pn.sibling=oc,pn=oc,st=ti}if(gn.done)return _(be,st),zn&&bu(be,nn),dt;if(st===null){for(;!gn.done;nn++,gn=ue.next())(gn=ze(be,gn.value,Pe))!==null&&(te=k(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn);return zn&&bu(be,nn),dt}for(st=T(be,st);!gn.done;nn++,gn=ue.next())(gn=Ie(st,be,nn,gn.value,Pe))!==null&&(d&&gn.alternate!==null&&st.delete(gn.key===null?nn:gn.key),te=k(gn,te,nn),pn===null?dt=gn:pn.sibling=gn,pn=gn);return d&&st.forEach(function(U7){return p(be,U7)}),zn&&bu(be,nn),dt}return function be(te,ue,Pe,dt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===c&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case a:e:{for(var pn=Pe.key,st=ue;st!==null;){if(st.key===pn){if((pn=Pe.type)===c){if(st.tag===7){_(te,st.sibling),(ue=A(st,Pe.props.children)).return=te,te=ue;break e}}else if(st.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===w&&pL(pn)===st.type){_(te,st.sibling),(ue=A(st,Pe.props)).ref=Sp(te,st,Pe),ue.return=te,te=ue;break e}_(te,st);break}p(te,st),st=st.sibling}Pe.type===c?((ue=Su(Pe.props.children,te.mode,dt,Pe.key)).return=te,te=ue):((dt=tv(Pe.type,Pe.key,Pe.props,null,te.mode,dt)).ref=Sp(te,ue,Pe),dt.return=te,te=dt)}return H(te);case l:e:{for(st=Pe.key;ue!==null;){if(ue.key===st){if(ue.tag===4&&ue.stateNode.containerInfo===Pe.containerInfo&&ue.stateNode.implementation===Pe.implementation){_(te,ue.sibling),(ue=A(ue,Pe.children||[])).return=te,te=ue;break e}_(te,ue);break}p(te,ue),ue=ue.sibling}(ue=iT(Pe,te.mode,dt)).return=te,te=ue}return H(te);case w:return be(te,ue,(st=Pe._init)(Pe._payload),dt)}if(j(Pe))return it(te,ue,Pe,dt);if(S(Pe))return zt(te,ue,Pe,dt);Ry(te,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"?(Pe=""+Pe,ue!==null&&ue.tag===6?(_(te,ue.sibling),(ue=A(ue,Pe)).return=te,te=ue):(_(te,ue),(ue=rT(Pe,te.mode,dt)).return=te,te=ue),H(te)):_(te,ue)}}var qh=gL(!0),mL=gL(!1),Cp={},to=Fr(Cp),Pp=Fr(Cp),Kh=Fr(Cp);function _a(d){if(d===Cp)throw Error(s(174));return d}function vE(d,p){mn(Kh,p),mn(Pp,d),mn(to,Cp),d=V(p),Tn(to),mn(to,d)}function Zh(){Tn(to),Tn(Pp),Tn(Kh)}function yL(d){var p=_a(Kh.current),_=_a(to.current);_!==(p=U(_,d.type,p))&&(mn(Pp,d),mn(to,p))}function bE(d){Pp.current===d&&(Tn(to),Tn(Pp))}var Jn=Fr(0);function Iy(d){for(var p=d;p!==null;){if(p.tag===13){var _=p.memoizedState;if(_!==null&&((_=_.dehydrated)===null||an(_)||gt(_)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(128&p.flags)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var _E=[];function xE(){for(var d=0;d<_E.length;d++){var p=_E[d];me?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}_E.length=0}var My=o.ReactCurrentDispatcher,wE=o.ReactCurrentBatchConfig,xu=0,Yn=null,zr=null,Ur=null,Oy=!1,Ap=!1,Rp=0,y7=0;function fi(){throw Error(s(321))}function EE(d,p){if(p===null)return!1;for(var _=0;_<p.length&&_<d.length;_++)if(!ko(d[_],p[_]))return!1;return!0}function TE(d,p,_,T,A,k){if(xu=k,Yn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,My.current=d===null||d.memoizedState===null?x7:w7,d=_(T,A),Ap){k=0;do{if(Ap=!1,Rp=0,25<=k)throw Error(s(301));k+=1,Ur=zr=null,p.updateQueue=null,My.current=E7,d=_(T,A)}while(Ap)}if(My.current=Dy,p=zr!==null&&zr.next!==null,xu=0,Ur=zr=Yn=null,Oy=!1,p)throw Error(s(300));return d}function SE(){var d=Rp!==0;return Rp=0,d}function xa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Yn.memoizedState=Ur=d:Ur=Ur.next=d,Ur}function no(){if(zr===null){var d=Yn.alternate;d=d!==null?d.memoizedState:null}else d=zr.next;var p=Ur===null?Yn.memoizedState:Ur.next;if(p!==null)Ur=p,zr=d;else{if(d===null)throw Error(s(310));d={memoizedState:(zr=d).memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},Ur===null?Yn.memoizedState=Ur=d:Ur=Ur.next=d}return Ur}function Ip(d,p){return typeof p=="function"?p(d):p}function CE(d){var p=no(),_=p.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=d;var T=zr,A=T.baseQueue,k=_.pending;if(k!==null){if(A!==null){var H=A.next;A.next=k.next,k.next=H}T.baseQueue=A=k,_.pending=null}if(A!==null){k=A.next,T=T.baseState;var J=H=null,re=null,fe=k;do{var ve=fe.lane;if((xu&ve)===ve)re!==null&&(re=re.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),T=fe.hasEagerState?fe.eagerState:d(T,fe.action);else{var ze={lane:ve,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};re===null?(J=re=ze,H=T):re=re.next=ze,Yn.lanes|=ve,wu|=ve}fe=fe.next}while(fe!==null&&fe!==k);re===null?H=T:re.next=J,ko(T,p.memoizedState)||(Wi=!0),p.memoizedState=T,p.baseState=H,p.baseQueue=re,_.lastRenderedState=T}if((d=_.interleaved)!==null){A=d;do k=A.lane,Yn.lanes|=k,wu|=k,A=A.next;while(A!==d)}else A===null&&(_.lanes=0);return[p.memoizedState,_.dispatch]}function PE(d){var p=no(),_=p.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=d;var T=_.dispatch,A=_.pending,k=p.memoizedState;if(A!==null){_.pending=null;var H=A=A.next;do k=d(k,H.action),H=H.next;while(H!==A);ko(k,p.memoizedState)||(Wi=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),_.lastRenderedState=k}return[k,T]}function vL(){}function bL(d,p){var _=Yn,T=no(),A=p(),k=!ko(T.memoizedState,A);if(k&&(T.memoizedState=A,Wi=!0),T=T.queue,AE(wL.bind(null,_,T,d),[d]),T.getSnapshot!==p||k||Ur!==null&&1&Ur.memoizedState.tag){if(_.flags|=2048,Mp(9,xL.bind(null,_,T,A,p),void 0,null),$r===null)throw Error(s(349));30&xu||_L(_,p,A)}return A}function _L(d,p,_){d.flags|=16384,d={getSnapshot:p,value:_},(p=Yn.updateQueue)===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.stores=[d]):(_=p.stores)===null?p.stores=[d]:_.push(d)}function xL(d,p,_,T){p.value=_,p.getSnapshot=T,EL(p)&&TL(d)}function wL(d,p,_){return _(function(){EL(p)&&TL(d)})}function EL(d){var p=d.getSnapshot;d=d.value;try{var _=p();return!ko(d,_)}catch{return!0}}function TL(d){var p=ba(d,1);p!==null&&ro(p,d,1,-1)}function SL(d){var p=xa();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:d},p.queue=d,d=d.dispatch=_7.bind(null,Yn,d),[p.memoizedState,d]}function Mp(d,p,_,T){return d={tag:d,create:p,destroy:_,deps:T,next:null},(p=Yn.updateQueue)===null?(p={lastEffect:null,stores:null},Yn.updateQueue=p,p.lastEffect=d.next=d):(_=p.lastEffect)===null?p.lastEffect=d.next=d:(T=_.next,_.next=d,d.next=T,p.lastEffect=d),d}function CL(){return no().memoizedState}function Ly(d,p,_,T){var A=xa();Yn.flags|=d,A.memoizedState=Mp(1|p,_,void 0,T===void 0?null:T)}function ky(d,p,_,T){var A=no();T=T===void 0?null:T;var k=void 0;if(zr!==null){var H=zr.memoizedState;if(k=H.destroy,T!==null&&EE(T,H.deps))return void(A.memoizedState=Mp(p,_,k,T))}Yn.flags|=d,A.memoizedState=Mp(1|p,_,k,T)}function PL(d,p){return Ly(8390656,8,d,p)}function AE(d,p){return ky(2048,8,d,p)}function AL(d,p){return ky(4,2,d,p)}function RL(d,p){return ky(4,4,d,p)}function IL(d,p){return typeof p=="function"?(d=d(),p(d),function(){p(null)}):p!=null?(d=d(),p.current=d,function(){p.current=null}):void 0}function ML(d,p,_){return _=_!=null?_.concat([d]):null,ky(4,4,IL.bind(null,p,d),_)}function RE(){}function OL(d,p){var _=no();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&EE(p,T[1])?T[0]:(_.memoizedState=[d,p],d)}function LL(d,p){var _=no();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&EE(p,T[1])?T[0]:(d=d(),_.memoizedState=[d,p],d)}function kL(d,p,_){return 21&xu?(ko(_,p)||(_=Ve(),Yn.lanes|=_,wu|=_,d.baseState=!0),p):(d.baseState&&(d.baseState=!1,Wi=!0),d.memoizedState=_)}function v7(d,p){var _=bt;bt=_!==0&&4>_?_:4,d(!0);var T=wE.transition;wE.transition={};try{d(!1),p()}finally{bt=_,wE.transition=T}}function DL(){return no().memoizedState}function b7(d,p,_){var T=rc(d);_={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null},NL(d)?FL(p,_):(_=oL(d,p,_,T))!==null&&(ro(_,d,T,gi()),BL(_,p,T))}function _7(d,p,_){var T=rc(d),A={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null};if(NL(d))FL(p,A);else{var k=d.alternate;if(d.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer)!==null)try{var H=p.lastRenderedState,J=k(H,_);if(A.hasEagerState=!0,A.eagerState=J,ko(J,H)){var re=p.interleaved;return re===null?(A.next=A,pE(p)):(A.next=re.next,re.next=A),void(p.interleaved=A)}}catch{}(_=oL(d,p,A,T))!==null&&(ro(_,d,T,A=gi()),BL(_,p,T))}}function NL(d){var p=d.alternate;return d===Yn||p!==null&&p===Yn}function FL(d,p){Ap=Oy=!0;var _=d.pending;_===null?p.next=p:(p.next=_.next,_.next=p),d.pending=p}function BL(d,p,_){if(4194240&_){var T=p.lanes;_|=T&=d.pendingLanes,p.lanes=_,hr(d,_)}}var Dy={readContext:eo,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},x7={readContext:eo,useCallback:function(d,p){return xa().memoizedState=[d,p===void 0?null:p],d},useContext:eo,useEffect:PL,useImperativeHandle:function(d,p,_){return _=_!=null?_.concat([d]):null,Ly(4194308,4,IL.bind(null,p,d),_)},useLayoutEffect:function(d,p){return Ly(4194308,4,d,p)},useInsertionEffect:function(d,p){return Ly(4,2,d,p)},useMemo:function(d,p){var _=xa();return p=p===void 0?null:p,d=d(),_.memoizedState=[d,p],d},useReducer:function(d,p,_){var T=xa();return p=_!==void 0?_(p):p,T.memoizedState=T.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},T.queue=d,d=d.dispatch=b7.bind(null,Yn,d),[T.memoizedState,d]},useRef:function(d){return d={current:d},xa().memoizedState=d},useState:SL,useDebugValue:RE,useDeferredValue:function(d){return xa().memoizedState=d},useTransition:function(){var d=SL(!1),p=d[0];return d=v7.bind(null,d[1]),xa().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,_){var T=Yn,A=xa();if(zn){if(_===void 0)throw Error(s(407));_=_()}else{if(_=p(),$r===null)throw Error(s(349));30&xu||_L(T,p,_)}A.memoizedState=_;var k={value:_,getSnapshot:p};return A.queue=k,PL(wL.bind(null,T,k,d),[d]),T.flags|=2048,Mp(9,xL.bind(null,T,k,_,p),void 0,null),_},useId:function(){var d=xa(),p=$r.identifierPrefix;if(zn){var _=hl;p=":"+p+"R"+(_=(va&~(1<<32-Oi(va)-1)).toString(32)+_),0<(_=Rp++)&&(p+="H"+_.toString(32)),p+=":"}else p=":"+p+"r"+(_=y7++).toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},w7={readContext:eo,useCallback:OL,useContext:eo,useEffect:AE,useImperativeHandle:ML,useInsertionEffect:AL,useLayoutEffect:RL,useMemo:LL,useReducer:CE,useRef:CL,useState:function(){return CE(Ip)},useDebugValue:RE,useDeferredValue:function(d){return kL(no(),zr.memoizedState,d)},useTransition:function(){return[CE(Ip)[0],no().memoizedState]},useMutableSource:vL,useSyncExternalStore:bL,useId:DL,unstable_isNewReconciler:!1},E7={readContext:eo,useCallback:OL,useContext:eo,useEffect:AE,useImperativeHandle:ML,useInsertionEffect:AL,useLayoutEffect:RL,useMemo:LL,useReducer:PE,useRef:CL,useState:function(){return PE(Ip)},useDebugValue:RE,useDeferredValue:function(d){var p=no();return zr===null?p.memoizedState=d:kL(p,zr.memoizedState,d)},useTransition:function(){return[PE(Ip)[0],no().memoizedState]},useMutableSource:vL,useSyncExternalStore:bL,useId:DL,unstable_isNewReconciler:!1};function Qh(d,p){try{var _="",T=p;do _+=m7(T),T=T.return;while(T);var A=_}catch(k){A=`
Error generating stack: `+k.message+`
`+k.stack}return{value:d,source:p,stack:A,digest:null}}function IE(d,p,_){return{value:d,source:null,stack:_??null,digest:p??null}}function ME(d,p){try{console.error(p.value)}catch(_){setTimeout(function(){throw _})}}var T7=typeof WeakMap=="function"?WeakMap:Map;function zL(d,p,_){(_=dl(-1,_)).tag=3,_.payload={element:null};var T=p.value;return _.callback=function(){qy||(qy=!0,KE=T),ME(0,p)},_}function UL(d,p,_){(_=dl(-1,_)).tag=3;var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var A=p.value;_.payload=function(){return T(A)},_.callback=function(){ME(0,p)}}var k=d.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(_.callback=function(){ME(0,p),typeof T!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var H=p.stack;this.componentDidCatch(p.value,{componentStack:H!==null?H:""})}),_}function $L(d,p,_){var T=d.pingCache;if(T===null){T=d.pingCache=new T7;var A=new Set;T.set(p,A)}else(A=T.get(p))===void 0&&(A=new Set,T.set(p,A));A.has(_)||(A.add(_),d=L7.bind(null,d,p,_),p.then(d,d))}function jL(d){do{var p;if((p=d.tag===13)&&(p=(p=d.memoizedState)===null||p.dehydrated!==null),p)return d;d=d.return}while(d!==null);return null}function GL(d,p,_,T,A){return 1&d.mode?(d.flags|=65536,d.lanes=A,d):(d===p?d.flags|=65536:(d.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:((p=dl(-1,1)).tag=2,Jl(_,p,1))),_.lanes|=1),d)}var S7=o.ReactCurrentOwner,Wi=!1;function Xi(d,p,_,T){p.child=d===null?mL(p,null,_,T):qh(p,d.child,_,T)}function HL(d,p,_,T,A){_=_.render;var k=p.ref;return Yh(p,A),T=TE(d,p,_,T,k,A),_=SE(),d===null||Wi?(zn&&_&&sE(p),p.flags|=1,Xi(d,p,T,A),p.child):(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~A,fl(d,p,A))}function VL(d,p,_,T,A){if(d===null){var k=_.type;return typeof k!="function"||nT(k)||k.defaultProps!==void 0||_.compare!==null||_.defaultProps!==void 0?((d=tv(_.type,null,T,p,p.mode,A)).ref=p.ref,d.return=p,p.child=d):(p.tag=15,p.type=k,WL(d,p,k,T,A))}if(k=d.child,(d.lanes&A)==0){var H=k.memoizedProps;if((_=(_=_.compare)!==null?_:Ey)(H,T)&&d.ref===p.ref)return fl(d,p,A)}return p.flags|=1,(d=sc(k,T)).ref=p.ref,d.return=p,p.child=d}function WL(d,p,_,T,A){if(d!==null){var k=d.memoizedProps;if(Ey(k,T)&&d.ref===p.ref){if(Wi=!1,p.pendingProps=T=k,(d.lanes&A)==0)return p.lanes=d.lanes,fl(d,p,A);131072&d.flags&&(Wi=!0)}}return OE(d,p,_,T,A)}function XL(d,p,_){var T=p.pendingProps,A=T.children,k=d!==null?d.memoizedState:null;if(T.mode==="hidden")if(!(1&p.mode))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(ed,ys),ys|=_;else{if(!(1073741824&_))return d=k!==null?k.baseLanes|_:_,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,mn(ed,ys),ys|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=k!==null?k.baseLanes:_,mn(ed,ys),ys|=T}else k!==null?(T=k.baseLanes|_,p.memoizedState=null):T=_,mn(ed,ys),ys|=T;return Xi(d,p,A,_),p.child}function YL(d,p){var _=p.ref;(d===null&&_!==null||d!==null&&d.ref!==_)&&(p.flags|=512,p.flags|=2097152)}function OE(d,p,_,T,A){var k=Jr(_)?Lo:_n.current;return k=ga(p,k),Yh(p,A),_=TE(d,p,_,T,k,A),T=SE(),d===null||Wi?(zn&&T&&sE(p),p.flags|=1,Xi(d,p,_,A),p.child):(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~A,fl(d,p,A))}function qL(d,p,_,T,A){if(Jr(_)){var k=!0;Gh(p)}else k=!1;if(Yh(p,A),p.stateNode===null)zy(d,p),dL(p,_,T),yE(p,_,T,A),T=!0;else if(d===null){var H=p.stateNode,J=p.memoizedProps;H.props=J;var re=H.context,fe=_.contextType;typeof fe=="object"&&fe!==null?fe=eo(fe):fe=ga(p,fe=Jr(_)?Lo:_n.current);var ve=_.getDerivedStateFromProps,ze=typeof ve=="function"||typeof H.getSnapshotBeforeUpdate=="function";ze||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(J!==T||re!==fe)&&fL(p,H,T,fe),Ql=!1;var ye=p.memoizedState;H.state=ye,Py(p,T,H,A),re=p.memoizedState,J!==T||ye!==re||Ar.current||Ql?(typeof ve=="function"&&(mE(p,_,ve,T),re=p.memoizedState),(J=Ql||hL(p,_,J,T,ye,re,fe))?(ze||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(p.flags|=4194308)):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=re),H.props=T,H.state=re,H.context=fe,T=J):(typeof H.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{H=p.stateNode,aL(d,p),J=p.memoizedProps,fe=p.type===p.elementType?J:No(p.type,J),H.props=fe,ze=p.pendingProps,ye=H.context,typeof(re=_.contextType)=="object"&&re!==null?re=eo(re):re=ga(p,re=Jr(_)?Lo:_n.current);var Ie=_.getDerivedStateFromProps;(ve=typeof Ie=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(J!==ze||ye!==re)&&fL(p,H,T,re),Ql=!1,ye=p.memoizedState,H.state=ye,Py(p,T,H,A);var it=p.memoizedState;J!==ze||ye!==it||Ar.current||Ql?(typeof Ie=="function"&&(mE(p,_,Ie,T),it=p.memoizedState),(fe=Ql||hL(p,_,fe,T,ye,it,re)||!1)?(ve||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(T,it,re),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(T,it,re)),typeof H.componentDidUpdate=="function"&&(p.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof H.componentDidUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=it),H.props=T,H.state=it,H.context=re,T=fe):(typeof H.componentDidUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ye===d.memoizedState||(p.flags|=1024),T=!1)}return LE(d,p,_,T,k,A)}function LE(d,p,_,T,A,k){YL(d,p);var H=(128&p.flags)!=0;if(!T&&!H)return A&&wp(p,_,!1),fl(d,p,k);T=p.stateNode,S7.current=p;var J=H&&typeof _.getDerivedStateFromError!="function"?null:T.render();return p.flags|=1,d!==null&&H?(p.child=qh(p,d.child,null,k),p.child=qh(p,null,J,k)):Xi(d,p,J,k),p.memoizedState=T.state,A&&wp(p,_,!0),p.child}function KL(d){var p=d.stateNode;p.pendingContext?yu(0,p.pendingContext,p.pendingContext!==p.context):p.context&&yu(0,p.context,!1),vE(d,p.containerInfo)}function ZL(d,p,_,T,A){return Wh(),cE(A),p.flags|=256,Xi(d,p,_,T),p.child}var Op,Lp,Ny,Fy,kE={dehydrated:null,treeContext:null,retryLane:0};function DE(d){return{baseLanes:d,cachePool:null,transitions:null}}function QL(d,p,_){var T,A=p.pendingProps,k=Jn.current,H=!1,J=(128&p.flags)!=0;if((T=J)||(T=(d===null||d.memoizedState!==null)&&(2&k)!=0),T?(H=!0,p.flags&=-129):d!==null&&d.memoizedState===null||(k|=1),mn(Jn,1&k),d===null)return lE(p),(d=p.memoizedState)!==null&&(d=d.dehydrated)!==null?(1&p.mode?gt(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(J=A.children,d=A.fallback,H?(A=p.mode,H=p.child,J={mode:"hidden",children:J},!(1&A)&&H!==null?(H.childLanes=0,H.pendingProps=J):H=nv(J,A,0,null),d=Su(d,A,_,null),H.return=p,d.return=p,H.sibling=d,p.child=H,p.child.memoizedState=DE(_),p.memoizedState=kE,d):NE(p,J));if((k=d.memoizedState)!==null&&(T=k.dehydrated)!==null)return function(fe,ve,ze,ye,Ie,it,zt){if(ze)return 256&ve.flags?(ve.flags&=-257,By(fe,ve,zt,ye=IE(Error(s(422))))):ve.memoizedState!==null?(ve.child=fe.child,ve.flags|=128,null):(it=ye.fallback,Ie=ve.mode,ye=nv({mode:"visible",children:ye.children},Ie,0,null),(it=Su(it,Ie,zt,null)).flags|=2,ye.return=ve,it.return=ve,ye.sibling=it,ve.child=ye,1&ve.mode&&qh(ve,fe.child,null,zt),ve.child.memoizedState=DE(zt),ve.memoizedState=kE,it);if(!(1&ve.mode))return By(fe,ve,zt,null);if(gt(Ie))return ye=Ct(Ie).digest,it=Error(s(419)),ye=IE(it,ye,void 0),By(fe,ve,zt,ye);if(ze=(zt&fe.childLanes)!=0,Wi||ze){if((ye=$r)!==null){switch(zt&-zt){case 4:Ie=2;break;case 16:Ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ie=32;break;case 536870912:Ie=268435456;break;default:Ie=0}(Ie=Ie&(ye.suspendedLanes|zt)?0:Ie)!==0&&Ie!==it.retryLane&&(it.retryLane=Ie,ba(fe,Ie),ro(ye,fe,Ie,-1))}return tT(),By(fe,ve,zt,ye=IE(Error(s(421))))}return an(Ie)?(ve.flags|=128,ve.child=fe.child,ve=k7.bind(null,fe),ln(Ie,ve),null):(fe=it.treeContext,pe&&(Js=ds(Ie),ms=ve,zn=!0,Do=null,Tp=!1,fe!==null&&(Zs[Qs++]=va,Zs[Qs++]=hl,Zs[Qs++]=vu,va=fe.id,hl=fe.overflow,vu=ve)),ve=NE(ve,ye.children),ve.flags|=4096,ve)}(d,p,J,A,T,k,_);if(H){H=A.fallback,J=p.mode,T=(k=d.child).sibling;var re={mode:"hidden",children:A.children};return!(1&J)&&p.child!==k?((A=p.child).childLanes=0,A.pendingProps=re,p.deletions=null):(A=sc(k,re)).subtreeFlags=14680064&k.subtreeFlags,T!==null?H=sc(T,H):(H=Su(H,J,_,null)).flags|=2,H.return=p,A.return=p,A.sibling=H,p.child=A,A=H,H=p.child,J=(J=d.child.memoizedState)===null?DE(_):{baseLanes:J.baseLanes|_,cachePool:null,transitions:J.transitions},H.memoizedState=J,H.childLanes=d.childLanes&~_,p.memoizedState=kE,A}return d=(H=d.child).sibling,A=sc(H,{mode:"visible",children:A.children}),!(1&p.mode)&&(A.lanes=_),A.return=p,A.sibling=null,d!==null&&((_=p.deletions)===null?(p.deletions=[d],p.flags|=16):_.push(d)),p.child=A,p.memoizedState=null,A}function NE(d,p){return(p=nv({mode:"visible",children:p},d.mode,0,null)).return=d,d.child=p}function By(d,p,_,T){return T!==null&&cE(T),qh(p,d.child,null,_),(d=NE(p,p.pendingProps.children)).flags|=2,p.memoizedState=null,d}function JL(d,p,_){d.lanes|=p;var T=d.alternate;T!==null&&(T.lanes|=p),fE(d.return,p,_)}function FE(d,p,_,T,A){var k=d.memoizedState;k===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:A}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=T,k.tail=_,k.tailMode=A)}function ek(d,p,_){var T=p.pendingProps,A=T.revealOrder,k=T.tail;if(Xi(d,p,T.children,_),(2&(T=Jn.current))!=0)T=1&T|2,p.flags|=128;else{if(d!==null&&128&d.flags)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&JL(d,_,p);else if(d.tag===19)JL(d,_,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}T&=1}if(mn(Jn,T),(1&p.mode)==0)p.memoizedState=null;else switch(A){case"forwards":for(_=p.child,A=null;_!==null;)(d=_.alternate)!==null&&Iy(d)===null&&(A=_),_=_.sibling;(_=A)===null?(A=p.child,p.child=null):(A=_.sibling,_.sibling=null),FE(p,!1,A,_,k);break;case"backwards":for(_=null,A=p.child,p.child=null;A!==null;){if((d=A.alternate)!==null&&Iy(d)===null){p.child=A;break}d=A.sibling,A.sibling=_,_=A,A=d}FE(p,!0,_,null,k);break;case"together":FE(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function zy(d,p){!(1&p.mode)&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function fl(d,p,_){if(d!==null&&(p.dependencies=d.dependencies),wu|=p.lanes,(_&p.childLanes)==0)return null;if(d!==null&&p.child!==d.child)throw Error(s(153));if(p.child!==null){for(_=sc(d=p.child,d.pendingProps),p.child=_,_.return=p;d.sibling!==null;)d=d.sibling,(_=_.sibling=sc(d,d.pendingProps)).return=p;_.sibling=null}return p.child}function wa(d){d.flags|=4}function tk(d,p){if(d!==null&&d.child===p.child)return!0;if(16&p.flags)return!1;for(d=p.child;d!==null;){if(12854&d.flags||12854&d.subtreeFlags)return!1;d=d.sibling}return!0}if(oe)Op=function(d,p){for(var _=p.child;_!==null;){if(_.tag===5||_.tag===6)se(d,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Lp=function(){},Ny=function(d,p,_,T,A){if((d=d.memoizedProps)!==T){var k=p.stateNode,H=_a(to.current);_=de(k,_,d,T,A,H),(p.updateQueue=_)&&wa(p)}},Fy=function(d,p,_,T){_!==T&&wa(p)};else if(_e){Op=function(d,p,_,T){for(var A=p.child;A!==null;){if(A.tag===5){var k=A.stateNode;_&&T&&(k=vt(k,A.type,A.memoizedProps,A)),se(d,k)}else if(A.tag===6)k=A.stateNode,_&&T&&(k=ut(k,A.memoizedProps,A)),se(d,k);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)(k=A.child)!==null&&(k.return=A),Op(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var nk=function(d,p,_,T){for(var A=p.child;A!==null;){if(A.tag===5){var k=A.stateNode;_&&T&&(k=vt(k,A.type,A.memoizedProps,A)),ce(d,k)}else if(A.tag===6)k=A.stateNode,_&&T&&(k=ut(k,A.memoizedProps,A)),ce(d,k);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)(k=A.child)!==null&&(k.return=A),nk(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Lp=function(d,p){var _=p.stateNode;if(!tk(d,p)){d=_.containerInfo;var T=ne(d);nk(T,p,!1,!1),_.pendingChildren=T,wa(p),De(d,T)}},Ny=function(d,p,_,T,A){var k=d.stateNode,H=d.memoizedProps;if((d=tk(d,p))&&H===T)p.stateNode=k;else{var J=p.stateNode,re=_a(to.current),fe=null;H!==T&&(fe=de(J,_,H,T,A,re)),d&&fe===null?p.stateNode=k:(k=ee(k,fe,_,H,T,p,d,J),xe(k,_,T,A,re)&&wa(p),p.stateNode=k,d?wa(p):Op(k,p,!1,!1))}},Fy=function(d,p,_,T){_!==T?(d=_a(Kh.current),_=_a(to.current),p.stateNode=he(T,d,_,p),wa(p)):p.stateNode=d.stateNode}}else Lp=function(){},Ny=function(){},Fy=function(){};function kp(d,p){if(!zn)switch(d.tailMode){case"hidden":p=d.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?d.tail=null:_.sibling=null;break;case"collapsed":_=d.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:T.sibling=null}}function Li(d){var p=d.alternate!==null&&d.alternate.child===d.child,_=0,T=0;if(p)for(var A=d.child;A!==null;)_|=A.lanes|A.childLanes,T|=14680064&A.subtreeFlags,T|=14680064&A.flags,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)_|=A.lanes|A.childLanes,T|=A.subtreeFlags,T|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=T,d.childLanes=_,p}function C7(d,p,_){var T=p.pendingProps;switch(oE(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(p),null;case 1:case 17:return Jr(p.type)&&mu(),Li(p),null;case 3:return _=p.stateNode,Zh(),Tn(Ar),Tn(_n),xE(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),d!==null&&d.child!==null||(wy(p)?wa(p):d===null||d.memoizedState.isDehydrated&&!(256&p.flags)||(p.flags|=1024,Do!==null&&(JE(Do),Do=null))),Lp(d,p),Li(p),null;case 5:bE(p),_=_a(Kh.current);var A=p.type;if(d!==null&&p.stateNode!=null)Ny(d,p,A,T,_),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!T){if(p.stateNode===null)throw Error(s(166));return Li(p),null}if(d=_a(to.current),wy(p)){if(!pe)throw Error(s(175));d=Zt(p.stateNode,p.type,p.memoizedProps,_,d,p,!Tp),p.updateQueue=d,d!==null&&wa(p)}else{var k=Z(A,T,_,d,p);Op(k,p,!1,!1),p.stateNode=k,xe(k,A,T,_,d)&&wa(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Li(p),null;case 6:if(d&&p.stateNode!=null)Fy(d,p,d.memoizedProps,T);else{if(typeof T!="string"&&p.stateNode===null)throw Error(s(166));if(d=_a(Kh.current),_=_a(to.current),wy(p)){if(!pe)throw Error(s(176));if(d=p.stateNode,_=p.memoizedProps,(T=Jt(d,_,p,!Tp))&&(A=ms)!==null)switch(A.tag){case 3:bn(A.stateNode.containerInfo,d,_,(1&A.mode)!=0);break;case 5:Zr(A.type,A.memoizedProps,A.stateNode,d,_,(1&A.mode)!=0)}T&&wa(p)}else p.stateNode=he(T,d,_,p)}return Li(p),null;case 13:if(Tn(Jn),T=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(zn&&Js!==null&&1&p.mode&&!(128&p.flags))iL(),Wh(),p.flags|=98560,A=!1;else if(A=wy(p),T!==null&&T.dehydrated!==null){if(d===null){if(!A)throw Error(s(318));if(!pe)throw Error(s(344));if(!(A=(A=p.memoizedState)!==null?A.dehydrated:null))throw Error(s(317));vr(A,p)}else Wh(),!(128&p.flags)&&(p.memoizedState=null),p.flags|=4;Li(p),A=!1}else Do!==null&&(JE(Do),Do=null),A=!0;if(!A)return 65536&p.flags?p:null}return 128&p.flags?(p.lanes=_,p):((_=T!==null)!=(d!==null&&d.memoizedState!==null)&&_&&(p.child.flags|=8192,1&p.mode&&(d===null||1&Jn.current?Rr===0&&(Rr=3):tT())),p.updateQueue!==null&&(p.flags|=4),Li(p),null);case 4:return Zh(),Lp(d,p),d===null&&we(p.stateNode.containerInfo),Li(p),null;case 10:return dE(p.type._context),Li(p),null;case 19:if(Tn(Jn),(A=p.memoizedState)===null)return Li(p),null;if(T=(128&p.flags)!=0,(k=A.rendering)===null)if(T)kp(A,!1);else{if(Rr!==0||d!==null&&128&d.flags)for(d=p.child;d!==null;){if((k=Iy(d))!==null){for(p.flags|=128,kp(A,!1),(d=k.updateQueue)!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=_,_=p.child;_!==null;)A=d,(T=_).flags&=14680066,(k=T.alternate)===null?(T.childLanes=0,T.lanes=A,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=k.childLanes,T.lanes=k.lanes,T.child=k.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=k.memoizedProps,T.memoizedState=k.memoizedState,T.updateQueue=k.updateQueue,T.type=k.type,A=k.dependencies,T.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),_=_.sibling;return mn(Jn,1&Jn.current|2),p.child}d=d.sibling}A.tail!==null&&Br()>qE&&(p.flags|=128,T=!0,kp(A,!1),p.lanes=4194304)}else{if(!T)if((d=Iy(k))!==null){if(p.flags|=128,T=!0,(d=d.updateQueue)!==null&&(p.updateQueue=d,p.flags|=4),kp(A,!0),A.tail===null&&A.tailMode==="hidden"&&!k.alternate&&!zn)return Li(p),null}else 2*Br()-A.renderingStartTime>qE&&_!==1073741824&&(p.flags|=128,T=!0,kp(A,!1),p.lanes=4194304);A.isBackwards?(k.sibling=p.child,p.child=k):((d=A.last)!==null?d.sibling=k:p.child=k,A.last=k)}return A.tail!==null?(p=A.tail,A.rendering=p,A.tail=p.sibling,A.renderingStartTime=Br(),p.sibling=null,d=Jn.current,mn(Jn,T?1&d|2:1&d),p):(Li(p),null);case 22:case 23:return eT(),_=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==_&&(p.flags|=8192),_&&1&p.mode?1073741824&ys&&(Li(p),oe&&6&p.subtreeFlags&&(p.flags|=8192)):Li(p),null;case 24:case 25:return null}throw Error(s(156,p.tag))}function P7(d,p){switch(oE(p),p.tag){case 1:return Jr(p.type)&&mu(),65536&(d=p.flags)?(p.flags=-65537&d|128,p):null;case 3:return Zh(),Tn(Ar),Tn(_n),xE(),65536&(d=p.flags)&&!(128&d)?(p.flags=-65537&d|128,p):null;case 5:return bE(p),null;case 13:if(Tn(Jn),(d=p.memoizedState)!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(s(340));Wh()}return 65536&(d=p.flags)?(p.flags=-65537&d|128,p):null;case 19:return Tn(Jn),null;case 4:return Zh(),null;case 10:return dE(p.type._context),null;case 22:case 23:return eT(),null;default:return null}}var Uy=!1,pi=!1,A7=typeof WeakSet=="function"?WeakSet:Set,et=null;function Jh(d,p){var _=d.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(T){Un(d,p,T)}else _.current=null}function rk(d,p,_){try{_()}catch(T){Un(d,p,T)}}var ik=!1;function Dp(d,p,_){var T=p.updateQueue;if((T=T!==null?T.lastEffect:null)!==null){var A=T=T.next;do{if((A.tag&d)===d){var k=A.destroy;A.destroy=void 0,k!==void 0&&rk(p,_,k)}A=A.next}while(A!==T)}}function $y(d,p){if((p=(p=p.updateQueue)!==null?p.lastEffect:null)!==null){var _=p=p.next;do{if((_.tag&d)===d){var T=_.create;_.destroy=T()}_=_.next}while(_!==p)}}function BE(d){var p=d.ref;if(p!==null){var _=d.stateNode;d.tag===5?d=W(_):d=_,typeof p=="function"?p(d):p.current=d}}function sk(d){var p=d.alternate;p!==null&&(d.alternate=null,sk(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode)!==null&&ke(p),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function ok(d){return d.tag===5||d.tag===3||d.tag===4}function ak(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||ok(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(2&d.flags||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(2&d.flags))return d.stateNode}}function zE(d,p,_){var T=d.tag;if(T===5||T===6)d=d.stateNode,p?St(_,d,p):Le(_,d);else if(T!==4&&(d=d.child)!==null)for(zE(d,p,_),d=d.sibling;d!==null;)zE(d,p,_),d=d.sibling}function UE(d,p,_){var T=d.tag;if(T===5||T===6)d=d.stateNode,p?Fe(_,d,p):je(_,d);else if(T!==4&&(d=d.child)!==null)for(UE(d,p,_),d=d.sibling;d!==null;)UE(d,p,_),d=d.sibling}var ki=null,Ea=!1;function Ta(d,p,_){for(_=_.child;_!==null;)$E(d,p,_),_=_.sibling}function $E(d,p,_){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(vy,_)}catch{}switch(_.tag){case 5:pi||Jh(_,p);case 6:if(oe){var T=ki,A=Ea;ki=null,Ta(d,p,_),Ea=A,(ki=T)!==null&&(Ea?on(ki,_.stateNode):Ht(ki,_.stateNode))}else Ta(d,p,_);break;case 18:oe&&ki!==null&&(Ea?Et(ki,_.stateNode):Mi(ki,_.stateNode));break;case 4:oe?(T=ki,A=Ea,ki=_.stateNode.containerInfo,Ea=!0,Ta(d,p,_),ki=T,Ea=A):(_e&&(T=_.stateNode.containerInfo,A=ne(T),Ge(T,A)),Ta(d,p,_));break;case 0:case 11:case 14:case 15:if(!pi&&(T=_.updateQueue)!==null&&(T=T.lastEffect)!==null){A=T=T.next;do{var k=A,H=k.destroy;k=k.tag,H!==void 0&&(2&k||4&k)&&rk(_,p,H),A=A.next}while(A!==T)}Ta(d,p,_);break;case 1:if(!pi&&(Jh(_,p),typeof(T=_.stateNode).componentWillUnmount=="function"))try{T.props=_.memoizedProps,T.state=_.memoizedState,T.componentWillUnmount()}catch(J){Un(_,p,J)}Ta(d,p,_);break;case 21:Ta(d,p,_);break;case 22:1&_.mode?(pi=(T=pi)||_.memoizedState!==null,Ta(d,p,_),pi=T):Ta(d,p,_);break;default:Ta(d,p,_)}}function lk(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var _=d.stateNode;_===null&&(_=d.stateNode=new A7),p.forEach(function(T){var A=D7.bind(null,d,T);_.has(T)||(_.add(T),T.then(A,A))})}}function Fo(d,p){var _=p.deletions;if(_!==null)for(var T=0;T<_.length;T++){var A=_[T];try{var k=d,H=p;if(oe){var J=H;e:for(;J!==null;){switch(J.tag){case 5:ki=J.stateNode,Ea=!1;break e;case 3:case 4:ki=J.stateNode.containerInfo,Ea=!0;break e}J=J.return}if(ki===null)throw Error(s(160));$E(k,H,A),ki=null,Ea=!1}else $E(k,H,A);var re=A.alternate;re!==null&&(re.return=null),A.return=null}catch(fe){Un(A,p,fe)}}if(12854&p.subtreeFlags)for(p=p.child;p!==null;)ck(p,d),p=p.sibling}function ck(d,p){var _=d.alternate,T=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Fo(p,d),Sa(d),4&T){try{Dp(3,d,d.return),$y(3,d)}catch(ye){Un(d,d.return,ye)}try{Dp(5,d,d.return)}catch(ye){Un(d,d.return,ye)}}break;case 1:Fo(p,d),Sa(d),512&T&&_!==null&&Jh(_,_.return);break;case 5:if(Fo(p,d),Sa(d),512&T&&_!==null&&Jh(_,_.return),oe){if(32&d.flags){var A=d.stateNode;try{Nr(A)}catch(ye){Un(d,d.return,ye)}}if(4&T&&(A=d.stateNode)!=null){var k=d.memoizedProps;if(_=_!==null?_.memoizedProps:k,T=d.type,p=d.updateQueue,d.updateQueue=null,p!==null)try{Ot(A,p,T,_,k,d)}catch(ye){Un(d,d.return,ye)}}}break;case 6:if(Fo(p,d),Sa(d),4&T&&oe){if(d.stateNode===null)throw Error(s(162));A=d.stateNode,k=d.memoizedProps,_=_!==null?_.memoizedProps:k;try{kt(A,_,k)}catch(ye){Un(d,d.return,ye)}}break;case 3:if(Fo(p,d),Sa(d),4&T){if(oe&&pe&&_!==null&&_.memoizedState.isDehydrated)try{Wn(p.containerInfo)}catch(ye){Un(d,d.return,ye)}if(_e){A=p.containerInfo,k=p.pendingChildren;try{Ge(A,k)}catch(ye){Un(d,d.return,ye)}}}break;case 4:if(Fo(p,d),Sa(d),4&T&&_e){A=(k=d.stateNode).containerInfo,k=k.pendingChildren;try{Ge(A,k)}catch(ye){Un(d,d.return,ye)}}break;case 13:Fo(p,d),Sa(d),8192&(A=d.child).flags&&(k=A.memoizedState!==null,A.stateNode.isHidden=k,!k||A.alternate!==null&&A.alternate.memoizedState!==null||(YE=Br())),4&T&&lk(d);break;case 22:var H=_!==null&&_.memoizedState!==null;if(1&d.mode?(pi=(_=pi)||H,Fo(p,d),pi=_):Fo(p,d),Sa(d),8192&T){if(_=d.memoizedState!==null,(d.stateNode.isHidden=_)&&!H&&(1&d.mode)!=0)for(et=d,T=d.child;T!==null;){for(p=et=T;et!==null;){var J=(H=et).child;switch(H.tag){case 0:case 11:case 14:case 15:Dp(4,H,H.return);break;case 1:Jh(H,H.return);var re=H.stateNode;if(typeof re.componentWillUnmount=="function"){var fe=H,ve=H.return;try{var ze=fe;re.props=ze.memoizedProps,re.state=ze.memoizedState,re.componentWillUnmount()}catch(ye){Un(fe,ve,ye)}}break;case 5:Jh(H,H.return);break;case 22:if(H.memoizedState!==null){dk(p);continue}}J!==null?(J.return=H,et=J):dk(p)}T=T.sibling}if(oe){e:if(T=null,oe)for(p=d;;){if(p.tag===5){if(T===null){T=p;try{A=p.stateNode,_?Vi(A):pa(p.stateNode,p.memoizedProps)}catch(ye){Un(d,d.return,ye)}}}else if(p.tag===6){if(T===null)try{k=p.stateNode,_?Mo(k):Xs(k,p.memoizedProps)}catch(ye){Un(d,d.return,ye)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;T===p&&(T=null),p=p.return}T===p&&(T=null),p.sibling.return=p.return,p=p.sibling}}}break;case 19:Fo(p,d),Sa(d),4&T&&lk(d);break;case 21:break;default:Fo(p,d),Sa(d)}}function Sa(d){var p=d.flags;if(2&p){try{if(oe){e:{for(var _=d.return;_!==null;){if(ok(_)){var T=_;break e}_=_.return}throw Error(s(160))}switch(T.tag){case 5:var A=T.stateNode;32&T.flags&&(Nr(A),T.flags&=-33),UE(d,ak(d),A);break;case 3:case 4:var k=T.stateNode.containerInfo;zE(d,ak(d),k);break;default:throw Error(s(161))}}}catch(H){Un(d,d.return,H)}d.flags&=-3}4096&p&&(d.flags&=-4097)}function R7(d,p,_){et=d,uk(d)}function uk(d,p,_){for(var T=(1&d.mode)!=0;et!==null;){var A=et,k=A.child;if(A.tag===22&&T){var H=A.memoizedState!==null||Uy;if(!H){var J=A.alternate,re=J!==null&&J.memoizedState!==null||pi;J=Uy;var fe=pi;if(Uy=H,(pi=re)&&!fe)for(et=A;et!==null;)re=(H=et).child,H.tag===22&&H.memoizedState!==null?fk(A):re!==null?(re.return=H,et=re):fk(A);for(;k!==null;)et=k,uk(k),k=k.sibling;et=A,Uy=J,pi=fe}hk(d)}else 8772&A.subtreeFlags&&k!==null?(k.return=A,et=k):hk(d)}}function hk(d){for(;et!==null;){var p=et;if(8772&p.flags){var _=p.alternate;try{if(8772&p.flags)switch(p.tag){case 0:case 11:case 15:pi||$y(5,p);break;case 1:var T=p.stateNode;if(4&p.flags&&!pi)if(_===null)T.componentDidMount();else{var A=p.elementType===p.type?_.memoizedProps:No(p.type,_.memoizedProps);T.componentDidUpdate(A,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var k=p.updateQueue;k!==null&&cL(p,k,T);break;case 3:var H=p.updateQueue;if(H!==null){if(_=null,p.child!==null)switch(p.child.tag){case 5:_=W(p.child.stateNode);break;case 1:_=p.child.stateNode}cL(p,H,_)}break;case 5:var J=p.stateNode;_===null&&4&p.flags&&wt(J,p.type,p.memoizedProps,p);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(pe&&p.memoizedState===null){var re=p.alternate;if(re!==null){var fe=re.memoizedState;if(fe!==null){var ve=fe.dehydrated;ve!==null&&fs(ve)}}}break;default:throw Error(s(163))}pi||512&p.flags&&BE(p)}catch(ze){Un(p,p.return,ze)}}if(p===d){et=null;break}if((_=p.sibling)!==null){_.return=p.return,et=_;break}et=p.return}}function dk(d){for(;et!==null;){var p=et;if(p===d){et=null;break}var _=p.sibling;if(_!==null){_.return=p.return,et=_;break}et=p.return}}function fk(d){for(;et!==null;){var p=et;try{switch(p.tag){case 0:case 11:case 15:var _=p.return;try{$y(4,p)}catch(re){Un(p,_,re)}break;case 1:var T=p.stateNode;if(typeof T.componentDidMount=="function"){var A=p.return;try{T.componentDidMount()}catch(re){Un(p,A,re)}}var k=p.return;try{BE(p)}catch(re){Un(p,k,re)}break;case 5:var H=p.return;try{BE(p)}catch(re){Un(p,H,re)}}}catch(re){Un(p,p.return,re)}if(p===d){et=null;break}var J=p.sibling;if(J!==null){J.return=p.return,et=J;break}et=p.return}}var jy=0,Gy=1,Hy=2,Vy=3,Wy=4;if(typeof Symbol=="function"&&Symbol.for){var Np=Symbol.for;jy=Np("selector.component"),Gy=Np("selector.has_pseudo_class"),Hy=Np("selector.role"),Vy=Np("selector.test_id"),Wy=Np("selector.text")}function jE(d){var p=Ce(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if((d=He(d))===null)throw Error(s(362));return d.stateNode.current}function GE(d,p){switch(p.$$typeof){case jy:if(d.type===p.value)return!0;break;case Gy:e:{p=p.value,d=[d,0];for(var _=0;_<d.length;){var T=d[_++],A=d[_++],k=p[A];if(T.tag!==5||!pt(T)){for(;k!=null&&GE(T,k);)k=p[++A];if(A===p.length){p=!0;break e}for(T=T.child;T!==null;)d.push(T,A),T=T.sibling}}p=!1}return p;case Hy:if(d.tag===5&&Te(d.stateNode,p.value))return!0;break;case Wy:if((d.tag===5||d.tag===6)&&(d=Mt(d))!==null&&0<=d.indexOf(p.value))return!0;break;case Vy:if(d.tag===5&&typeof(d=d.memoizedProps["data-testname"])=="string"&&d.toLowerCase()===p.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function HE(d){switch(d.$$typeof){case jy:return"<"+(C(d.value)||"Unknown")+">";case Gy:return":has("+(HE(d)||"")+")";case Hy:return'[role="'+d.value+'"]';case Wy:return'"'+d.value+'"';case Vy:return'[data-testname="'+d.value+'"]';default:throw Error(s(365))}}function pk(d,p){var _=[];d=[d,0];for(var T=0;T<d.length;){var A=d[T++],k=d[T++],H=p[k];if(A.tag!==5||!pt(A)){for(;H!=null&&GE(A,H);)H=p[++k];if(k===p.length)_.push(A);else for(A=A.child;A!==null;)d.push(A,k),A=A.sibling}}return _}function VE(d,p){if(!qe)throw Error(s(363));d=pk(d=jE(d),p),p=[],d=Array.from(d);for(var _=0;_<d.length;){var T=d[_++];if(T.tag===5)pt(T)||p.push(T.stateNode);else for(T=T.child;T!==null;)d.push(T),T=T.sibling}return p}var I7=Math.ceil,Xy=o.ReactCurrentDispatcher,WE=o.ReactCurrentOwner,dr=o.ReactCurrentBatchConfig,Qt=0,$r=null,_r=null,ei=0,ys=0,ed=Fr(0),Rr=0,Fp=null,wu=0,Yy=0,XE=0,Bp=null,vs=null,YE=0,qE=1/0,ec=null;function td(){qE=Br()+500}var gk,qy=!1,KE=null,tc=null,Ky=!1,nc=null,Zy=0,zp=0,ZE=null,Qy=-1,Jy=0;function gi(){return 6&Qt?Br():Qy!==-1?Qy:Qy=Br()}function rc(d){return 1&d.mode?2&Qt&&ei!==0?ei&-ei:g7.transition!==null?(Jy===0&&(Jy=Ve()),Jy):(d=bt)!==0?d:Ye():1}function ro(d,p,_,T){if(50<zp)throw zp=0,ZE=null,Error(s(185));Bn(d,_,T),2&Qt&&d===$r||(d===$r&&(!(2&Qt)&&(Yy|=_),Rr===4&&ic(d,ei)),Yi(d,T),_===1&&Qt===0&&!(1&p.mode)&&(td(),by&&ya()))}function Yi(d,p){var _=d.callbackNode;(function(A,k){for(var H=A.suspendedLanes,J=A.pingedLanes,re=A.expirationTimes,fe=A.pendingLanes;0<fe;){var ve=31-Oi(fe),ze=1<<ve,ye=re[ve];ye===-1?ze&H&&!(ze&J)||(re[ve]=ie(ze,k)):ye<=k&&(A.expiredLanes|=ze),fe&=~ze}})(d,p);var T=q(d,d===$r?ei:0);if(T===0)_!==null&&ZO(_),d.callbackNode=null,d.callbackPriority=0;else if(p=T&-T,d.callbackPriority!==p){if(_!=null&&ZO(_),p===1)d.tag===0?function(A){by=!0,JO(A)}(yk.bind(null,d)):JO(yk.bind(null,d)),Oe?rt(function(){!(6&Qt)&&ya()}):nE(rE,ya),_=null;else{switch(gs(T)){case 1:_=rE;break;case 4:_=f7;break;case 16:default:_=QO;break;case 536870912:_=p7}_=Sk(_,mk.bind(null,d))}d.callbackPriority=p,d.callbackNode=_}}function mk(d,p){if(Qy=-1,Jy=0,(6&Qt)!=0)throw Error(s(327));var _=d.callbackNode;if(Tu()&&d.callbackNode!==_)return null;var T=q(d,d===$r?ei:0);if(T===0)return null;if(30&T||T&d.expiredLanes||p)p=ev(d,T);else{p=T;var A=Qt;Qt|=2;var k=_k();for($r===d&&ei===p||(ec=null,td(),Eu(d,p));;)try{O7();break}catch(J){bk(d,J)}hE(),Xy.current=k,Qt=A,_r!==null?p=0:($r=null,ei=0,p=Rr)}if(p!==0){if(p===2&&(A=Ee(d))!==0&&(T=A,p=QE(d,A)),p===1)throw _=Fp,Eu(d,0),ic(d,T),Yi(d,Br()),_;if(p===6)ic(d,T);else{if(A=d.current.alternate,(30&T)==0&&!function(J){for(var re=J;;){if(16384&re.flags){var fe=re.updateQueue;if(fe!==null&&(fe=fe.stores)!==null)for(var ve=0;ve<fe.length;ve++){var ze=fe[ve],ye=ze.getSnapshot;ze=ze.value;try{if(!ko(ye(),ze))return!1}catch{return!1}}}if(fe=re.child,16384&re.subtreeFlags&&fe!==null)fe.return=re,re=fe;else{if(re===J)break;for(;re.sibling===null;){if(re.return===null||re.return===J)return!0;re=re.return}re.sibling.return=re.return,re=re.sibling}}return!0}(A)&&((p=ev(d,T))===2&&(k=Ee(d))!==0&&(T=k,p=QE(d,k)),p===1))throw _=Fp,Eu(d,0),ic(d,T),Yi(d,Br()),_;switch(d.finishedWork=A,d.finishedLanes=T,p){case 0:case 1:throw Error(s(345));case 2:case 5:nd(d,vs,ec);break;case 3:if(ic(d,T),(130023424&T)===T&&10<(p=YE+500-Br())){if(q(d,0)!==0)break;if(((A=d.suspendedLanes)&T)!==T){gi(),d.pingedLanes|=d.suspendedLanes&A;break}d.timeoutHandle=Se(nd.bind(null,d,vs,ec),p);break}nd(d,vs,ec);break;case 4:if(ic(d,T),(4194240&T)===T)break;for(p=d.eventTimes,A=-1;0<T;){var H=31-Oi(T);k=1<<H,(H=p[H])>A&&(A=H),T&=~k}if(T=A,10<(T=(120>(T=Br()-T)?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*I7(T/1960))-T)){d.timeoutHandle=Se(nd.bind(null,d,vs,ec),T);break}nd(d,vs,ec);break;default:throw Error(s(329))}}}return Yi(d,Br()),d.callbackNode===_?mk.bind(null,d):null}function QE(d,p){var _=Bp;return d.current.memoizedState.isDehydrated&&(Eu(d,p).flags|=256),(d=ev(d,p))!==2&&(p=vs,vs=_,p!==null&&JE(p)),d}function JE(d){vs===null?vs=d:vs.push.apply(vs,d)}function ic(d,p){for(p&=~XE,p&=~Yy,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var _=31-Oi(p),T=1<<_;d[_]=-1,p&=~T}}function yk(d){if(6&Qt)throw Error(s(327));Tu();var p=q(d,0);if(!(1&p))return Yi(d,Br()),null;var _=ev(d,p);if(d.tag!==0&&_===2){var T=Ee(d);T!==0&&(p=T,_=QE(d,T))}if(_===1)throw _=Fp,Eu(d,0),ic(d,p),Yi(d,Br()),_;if(_===6)throw Error(s(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,nd(d,vs,ec),Yi(d,Br()),null}function vk(d){nc!==null&&nc.tag===0&&!(6&Qt)&&Tu();var p=Qt;Qt|=1;var _=dr.transition,T=bt;try{if(dr.transition=null,bt=1,d)return d()}finally{bt=T,dr.transition=_,!(6&(Qt=p))&&ya()}}function eT(){ys=ed.current,Tn(ed)}function Eu(d,p){d.finishedWork=null,d.finishedLanes=0;var _=d.timeoutHandle;if(_!==ae&&(d.timeoutHandle=ae,le(_)),_r!==null)for(_=_r.return;_!==null;){var T=_;switch(oE(T),T.tag){case 1:(T=T.type.childContextTypes)!=null&&mu();break;case 3:Zh(),Tn(Ar),Tn(_n),xE();break;case 5:bE(T);break;case 4:Zh();break;case 13:case 19:Tn(Jn);break;case 10:dE(T.type._context);break;case 22:case 23:eT()}_=_.return}if($r=d,_r=d=sc(d.current,null),ei=ys=p,Rr=0,Fp=null,XE=Yy=wu=0,vs=Bp=null,_u!==null){for(p=0;p<_u.length;p++)if((T=(_=_u[p]).interleaved)!==null){_.interleaved=null;var A=T.next,k=_.pending;if(k!==null){var H=k.next;k.next=A,T.next=H}_.pending=T}_u=null}return d}function bk(d,p){for(;;){var _=_r;try{if(hE(),My.current=Dy,Oy){for(var T=Yn.memoizedState;T!==null;){var A=T.queue;A!==null&&(A.pending=null),T=T.next}Oy=!1}if(xu=0,Ur=zr=Yn=null,Ap=!1,Rp=0,WE.current=null,_===null||_.return===null){Rr=1,Fp=p,_r=null;break}e:{var k=d,H=_.return,J=_,re=p;if(p=ei,J.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var fe=re,ve=J,ze=ve.tag;if(!(1&ve.mode)&&(ze===0||ze===11||ze===15)){var ye=ve.alternate;ye?(ve.updateQueue=ye.updateQueue,ve.memoizedState=ye.memoizedState,ve.lanes=ye.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Ie=jL(H);if(Ie!==null){Ie.flags&=-257,GL(Ie,H,J,0,p),1&Ie.mode&&$L(k,fe,p),re=fe;var it=(p=Ie).updateQueue;if(it===null){var zt=new Set;zt.add(re),p.updateQueue=zt}else it.add(re);break e}if(!(1&p)){$L(k,fe,p),tT();break e}re=Error(s(426))}else if(zn&&1&J.mode){var be=jL(H);if(be!==null){!(65536&be.flags)&&(be.flags|=256),GL(be,H,J,0,p),cE(Qh(re,J));break e}}k=re=Qh(re,J),Rr!==4&&(Rr=2),Bp===null?Bp=[k]:Bp.push(k),k=H;do{switch(k.tag){case 3:k.flags|=65536,p&=-p,k.lanes|=p,lL(k,zL(0,re,p));break e;case 1:J=re;var te=k.type,ue=k.stateNode;if(!(128&k.flags)&&(typeof te.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(tc===null||!tc.has(ue)))){k.flags|=65536,p&=-p,k.lanes|=p,lL(k,UL(k,J,p));break e}}k=k.return}while(k!==null)}wk(_)}catch(Pe){p=Pe,_r===_&&_!==null&&(_r=_=_.return);continue}break}}function _k(){var d=Xy.current;return Xy.current=Dy,d===null?Dy:d}function tT(){Rr!==0&&Rr!==3&&Rr!==2||(Rr=4),$r===null||!(268435455&wu)&&!(268435455&Yy)||ic($r,ei)}function ev(d,p){var _=Qt;Qt|=2;var T=_k();for($r===d&&ei===p||(ec=null,Eu(d,p));;)try{M7();break}catch(A){bk(d,A)}if(hE(),Qt=_,Xy.current=T,_r!==null)throw Error(s(261));return $r=null,ei=0,Rr}function M7(){for(;_r!==null;)xk(_r)}function O7(){for(;_r!==null&&!h7();)xk(_r)}function xk(d){var p=gk(d.alternate,d,ys);d.memoizedProps=d.pendingProps,p===null?wk(d):_r=p,WE.current=null}function wk(d){var p=d;do{var _=p.alternate;if(d=p.return,(32768&p.flags)==0){if((_=C7(_,p,ys))!==null)return void(_r=_)}else{if((_=P7(_,p))!==null)return _.flags&=32767,void(_r=_);if(d===null)return Rr=6,void(_r=null);d.flags|=32768,d.subtreeFlags=0,d.deletions=null}if((p=p.sibling)!==null)return void(_r=p);_r=p=d}while(p!==null);Rr===0&&(Rr=5)}function nd(d,p,_){var T=bt,A=dr.transition;try{dr.transition=null,bt=1,function(k,H,J,re){do Tu();while(nc!==null);if(6&Qt)throw Error(s(327));J=k.finishedWork;var fe=k.finishedLanes;if(J===null)return null;if(k.finishedWork=null,k.finishedLanes=0,J===k.current)throw Error(s(177));k.callbackNode=null,k.callbackPriority=0;var ve=J.lanes|J.childLanes;if(function(Ie,it){var zt=Ie.pendingLanes&~it;Ie.pendingLanes=it,Ie.suspendedLanes=0,Ie.pingedLanes=0,Ie.expiredLanes&=it,Ie.mutableReadLanes&=it,Ie.entangledLanes&=it,it=Ie.entanglements;var be=Ie.eventTimes;for(Ie=Ie.expirationTimes;0<zt;){var te=31-Oi(zt),ue=1<<te;it[te]=0,be[te]=-1,Ie[te]=-1,zt&=~ue}}(k,ve),k===$r&&(_r=$r=null,ei=0),!(2064&J.subtreeFlags)&&!(2064&J.flags)||Ky||(Ky=!0,Sk(QO,function(){return Tu(),null})),ve=(15990&J.flags)!=0,(15990&J.subtreeFlags)!=0||ve){ve=dr.transition,dr.transition=null;var ze=bt;bt=1;var ye=Qt;Qt|=4,WE.current=null,function(Ie,it){for(X(Ie.containerInfo),et=it;et!==null;)if(it=(Ie=et).child,(1028&Ie.subtreeFlags)!=0&&it!==null)it.return=Ie,et=it;else for(;et!==null;){Ie=et;try{var zt=Ie.alternate;if(1024&Ie.flags)switch(Ie.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(zt!==null){var be=zt.memoizedProps,te=zt.memoizedState,ue=Ie.stateNode,Pe=ue.getSnapshotBeforeUpdate(Ie.elementType===Ie.type?be:No(Ie.type,be),te);ue.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:oe&&hs(Ie.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(dt){Un(Ie,Ie.return,dt)}if((it=Ie.sibling)!==null){it.return=Ie.return,et=it;break}et=Ie.return}zt=ik,ik=!1}(k,J),ck(J,k),Y(k.containerInfo),k.current=J,R7(J),d7(),Qt=ye,bt=ze,dr.transition=ve}else k.current=J;if(Ky&&(Ky=!1,nc=k,Zy=fe),ve=k.pendingLanes,ve===0&&(tc=null),function(Ie){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(vy,Ie,void 0,(128&Ie.current.flags)==128)}catch{}}(J.stateNode),Yi(k,Br()),H!==null)for(re=k.onRecoverableError,J=0;J<H.length;J++)fe=H[J],re(fe.value,{componentStack:fe.stack,digest:fe.digest});if(qy)throw qy=!1,k=KE,KE=null,k;1&Zy&&k.tag!==0&&Tu(),ve=k.pendingLanes,1&ve?k===ZE?zp++:(zp=0,ZE=k):zp=0,ya()}(d,p,_,T)}finally{dr.transition=A,bt=T}return null}function Tu(){if(nc!==null){var d=gs(Zy),p=dr.transition,_=bt;try{if(dr.transition=null,bt=16>d?16:d,nc===null)var T=!1;else{if(d=nc,nc=null,Zy=0,(6&Qt)!=0)throw Error(s(331));var A=Qt;for(Qt|=4,et=d.current;et!==null;){var k=et,H=k.child;if(16&et.flags){var J=k.deletions;if(J!==null){for(var re=0;re<J.length;re++){var fe=J[re];for(et=fe;et!==null;){var ve=et;switch(ve.tag){case 0:case 11:case 15:Dp(8,ve,k)}var ze=ve.child;if(ze!==null)ze.return=ve,et=ze;else for(;et!==null;){var ye=(ve=et).sibling,Ie=ve.return;if(sk(ve),ve===fe){et=null;break}if(ye!==null){ye.return=Ie,et=ye;break}et=Ie}}}var it=k.alternate;if(it!==null){var zt=it.child;if(zt!==null){it.child=null;do{var be=zt.sibling;zt.sibling=null,zt=be}while(zt!==null)}}et=k}}if(2064&k.subtreeFlags&&H!==null)H.return=k,et=H;else e:for(;et!==null;){if(2048&(k=et).flags)switch(k.tag){case 0:case 11:case 15:Dp(9,k,k.return)}var te=k.sibling;if(te!==null){te.return=k.return,et=te;break e}et=k.return}}var ue=d.current;for(et=ue;et!==null;){var Pe=(H=et).child;if(2064&H.subtreeFlags&&Pe!==null)Pe.return=H,et=Pe;else e:for(H=ue;et!==null;){if(2048&(J=et).flags)try{switch(J.tag){case 0:case 11:case 15:$y(9,J)}}catch(pn){Un(J,J.return,pn)}if(J===H){et=null;break e}var dt=J.sibling;if(dt!==null){dt.return=J.return,et=dt;break e}et=J.return}}if(Qt=A,ya(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(vy,d)}catch{}T=!0}return T}finally{bt=_,dr.transition=p}}return!1}function Ek(d,p,_){d=Jl(d,p=zL(0,p=Qh(_,p),1),1),p=gi(),d!==null&&(Bn(d,1,p),Yi(d,p))}function Un(d,p,_){if(d.tag===3)Ek(d,d,_);else for(;p!==null;){if(p.tag===3){Ek(p,d,_);break}if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(tc===null||!tc.has(T))){p=Jl(p,d=UL(p,d=Qh(_,d),1),1),d=gi(),p!==null&&(Bn(p,1,d),Yi(p,d));break}}p=p.return}}function L7(d,p,_){var T=d.pingCache;T!==null&&T.delete(p),p=gi(),d.pingedLanes|=d.suspendedLanes&_,$r===d&&(ei&_)===_&&(Rr===4||Rr===3&&(130023424&ei)===ei&&500>Br()-YE?Eu(d,0):XE|=_),Yi(d,p)}function Tk(d,p){p===0&&(1&d.mode?(p=z,!(130023424&(z<<=1))&&(z=4194304)):p=1);var _=gi();(d=ba(d,p))!==null&&(Bn(d,p,_),Yi(d,_))}function k7(d){var p=d.memoizedState,_=0;p!==null&&(_=p.retryLane),Tk(d,_)}function D7(d,p){var _=0;switch(d.tag){case 13:var T=d.stateNode,A=d.memoizedState;A!==null&&(_=A.retryLane);break;case 19:T=d.stateNode;break;default:throw Error(s(314))}T!==null&&T.delete(p),Tk(d,_)}function Sk(d,p){return nE(d,p)}function N7(d,p,_,T){this.tag=d,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(d,p,_,T){return new N7(d,p,_,T)}function nT(d){return!(!(d=d.prototype)||!d.isReactComponent)}function sc(d,p){var _=d.alternate;return _===null?((_=io(d.tag,p,d.key,d.mode)).elementType=d.elementType,_.type=d.type,_.stateNode=d.stateNode,_.alternate=d,d.alternate=_):(_.pendingProps=p,_.type=d.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=14680064&d.flags,_.childLanes=d.childLanes,_.lanes=d.lanes,_.child=d.child,_.memoizedProps=d.memoizedProps,_.memoizedState=d.memoizedState,_.updateQueue=d.updateQueue,p=d.dependencies,_.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},_.sibling=d.sibling,_.index=d.index,_.ref=d.ref,_}function tv(d,p,_,T,A,k){var H=2;if(T=d,typeof d=="function")nT(d)&&(H=1);else if(typeof d=="string")H=5;else e:switch(d){case c:return Su(_.children,A,k,p);case u:H=8,A|=8;break;case h:return(d=io(12,_,p,2|A)).elementType=h,d.lanes=k,d;case y:return(d=io(13,_,p,A)).elementType=y,d.lanes=k,d;case x:return(d=io(19,_,p,A)).elementType=x,d.lanes=k,d;case v:return nv(_,A,k,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case f:H=10;break e;case g:H=9;break e;case m:H=11;break e;case b:H=14;break e;case w:H=16,T=null;break e}throw Error(s(130,d==null?d:typeof d,""))}return(p=io(H,_,p,A)).elementType=d,p.type=T,p.lanes=k,p}function Su(d,p,_,T){return(d=io(7,d,T,p)).lanes=_,d}function nv(d,p,_,T){return(d=io(22,d,T,p)).elementType=v,d.lanes=_,d.stateNode={isHidden:!1},d}function rT(d,p,_){return(d=io(6,d,null,p)).lanes=_,d}function iT(d,p,_){return(p=io(4,d.children!==null?d.children:[],d.key,p)).lanes=_,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function F7(d,p,_,T,A){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.identifierPrefix=T,this.onRecoverableError=A,pe&&(this.mutableSourceEagerHydrationData=null)}function Ck(d,p,_,T,A,k,H,J,re){return d=new F7(d,p,_,J,re),p===1?(p=1,k===!0&&(p|=8)):p=0,k=io(3,null,null,p),d.current=k,k.stateNode=d,k.memoizedState={element:T,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},gE(k),d}function Pk(d){if(!d)return ps;e:{if(I(d=d._reactInternals)!==d||d.tag!==1)throw Error(s(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Jr(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(s(171))}if(d.tag===1){var _=d.type;if(Jr(_))return Ks(d,_,p)}return p}function Ak(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(s(188)):(d=Object.keys(d).join(","),Error(s(268,d)));return(d=B(p))===null?null:d.stateNode}function Rk(d,p){if((d=d.memoizedState)!==null&&d.dehydrated!==null){var _=d.retryLane;d.retryLane=_!==0&&_<p?_:p}}function rv(d,p){Rk(d,p),(d=d.alternate)&&Rk(d,p)}function B7(d){return(d=B(d))===null?null:d.stateNode}function z7(){return null}return gk=function(d,p,_){if(d!==null)if(d.memoizedProps!==p.pendingProps||Ar.current)Wi=!0;else{if(!(d.lanes&_)&&!(128&p.flags))return Wi=!1,function(ze,ye,Ie){switch(ye.tag){case 3:KL(ye),Wh();break;case 5:yL(ye);break;case 1:Jr(ye.type)&&Gh(ye);break;case 4:vE(ye,ye.stateNode.containerInfo);break;case 10:sL(0,ye.type._context,ye.memoizedProps.value);break;case 13:var it=ye.memoizedState;if(it!==null)return it.dehydrated!==null?(mn(Jn,1&Jn.current),ye.flags|=128,null):Ie&ye.child.childLanes?QL(ze,ye,Ie):(mn(Jn,1&Jn.current),(ze=fl(ze,ye,Ie))!==null?ze.sibling:null);mn(Jn,1&Jn.current);break;case 19:if(it=(Ie&ye.childLanes)!=0,(128&ze.flags)!=0){if(it)return ek(ze,ye,Ie);ye.flags|=128}var zt=ye.memoizedState;if(zt!==null&&(zt.rendering=null,zt.tail=null,zt.lastEffect=null),mn(Jn,Jn.current),it)break;return null;case 22:case 23:return ye.lanes=0,XL(ze,ye,Ie)}return fl(ze,ye,Ie)}(d,p,_);Wi=(131072&d.flags)!=0}else Wi=!1,zn&&1048576&p.flags&&eL(p,xy,p.index);switch(p.lanes=0,p.tag){case 2:var T=p.type;zy(d,p),d=p.pendingProps;var A=ga(p,_n.current);Yh(p,_),A=TE(null,p,T,d,A,_);var k=SE();return p.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Jr(T)?(k=!0,Gh(p)):k=!1,p.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,gE(p),A.updater=Ay,p.stateNode=A,A._reactInternals=p,yE(p,T,d,_),p=LE(null,p,T,!0,k,_)):(p.tag=0,zn&&k&&sE(p),Xi(null,p,A,_),p=p.child),p;case 16:T=p.elementType;e:{switch(zy(d,p),d=p.pendingProps,T=(A=T._init)(T._payload),p.type=T,A=p.tag=function(ze){if(typeof ze=="function")return nT(ze)?1:0;if(ze!=null){if((ze=ze.$$typeof)===m)return 11;if(ze===b)return 14}return 2}(T),d=No(T,d),A){case 0:p=OE(null,p,T,d,_);break e;case 1:p=qL(null,p,T,d,_);break e;case 11:p=HL(null,p,T,d,_);break e;case 14:p=VL(null,p,T,No(T.type,d),_);break e}throw Error(s(306,T,""))}return p;case 0:return T=p.type,A=p.pendingProps,OE(d,p,T,A=p.elementType===T?A:No(T,A),_);case 1:return T=p.type,A=p.pendingProps,qL(d,p,T,A=p.elementType===T?A:No(T,A),_);case 3:e:{if(KL(p),d===null)throw Error(s(387));T=p.pendingProps,A=(k=p.memoizedState).element,aL(d,p),Py(p,T,null,_);var H=p.memoizedState;if(T=H.element,pe&&k.isDehydrated){if(k={element:T,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},p.updateQueue.baseState=k,p.memoizedState=k,256&p.flags){p=ZL(d,p,T,_,A=Qh(Error(s(423)),p));break e}if(T!==A){p=ZL(d,p,T,_,A=Qh(Error(s(424)),p));break e}for(pe&&(Js=Pr(p.stateNode.containerInfo),ms=p,zn=!0,Do=null,Tp=!1),_=mL(p,null,T,_),p.child=_;_;)_.flags=-3&_.flags|4096,_=_.sibling}else{if(Wh(),T===A){p=fl(d,p,_);break e}Xi(d,p,T,_)}p=p.child}return p;case 5:return yL(p),d===null&&lE(p),T=p.type,A=p.pendingProps,k=d!==null?d.memoizedProps:null,H=A.children,Me(T,A)?H=null:k!==null&&Me(T,k)&&(p.flags|=32),YL(d,p),Xi(d,p,H,_),p.child;case 6:return d===null&&lE(p),null;case 13:return QL(d,p,_);case 4:return vE(p,p.stateNode.containerInfo),T=p.pendingProps,d===null?p.child=qh(p,null,T,_):Xi(d,p,T,_),p.child;case 11:return T=p.type,A=p.pendingProps,HL(d,p,T,A=p.elementType===T?A:No(T,A),_);case 7:return Xi(d,p,p.pendingProps,_),p.child;case 8:case 12:return Xi(d,p,p.pendingProps.children,_),p.child;case 10:e:{if(T=p.type._context,A=p.pendingProps,k=p.memoizedProps,sL(0,T,H=A.value),k!==null)if(ko(k.value,H)){if(k.children===A.children&&!Ar.current){p=fl(d,p,_);break e}}else for((k=p.child)!==null&&(k.return=p);k!==null;){var J=k.dependencies;if(J!==null){H=k.child;for(var re=J.firstContext;re!==null;){if(re.context===T){if(k.tag===1){(re=dl(-1,_&-_)).tag=2;var fe=k.updateQueue;if(fe!==null){var ve=(fe=fe.shared).pending;ve===null?re.next=re:(re.next=ve.next,ve.next=re),fe.pending=re}}k.lanes|=_,(re=k.alternate)!==null&&(re.lanes|=_),fE(k.return,_,p),J.lanes|=_;break}re=re.next}}else if(k.tag===10)H=k.type===p.type?null:k.child;else if(k.tag===18){if((H=k.return)===null)throw Error(s(341));H.lanes|=_,(J=H.alternate)!==null&&(J.lanes|=_),fE(H,_,p),H=k.sibling}else H=k.child;if(H!==null)H.return=k;else for(H=k;H!==null;){if(H===p){H=null;break}if((k=H.sibling)!==null){k.return=H.return,H=k;break}H=H.return}k=H}Xi(d,p,A.children,_),p=p.child}return p;case 9:return A=p.type,T=p.pendingProps.children,Yh(p,_),T=T(A=eo(A)),p.flags|=1,Xi(d,p,T,_),p.child;case 14:return A=No(T=p.type,p.pendingProps),VL(d,p,T,A=No(T.type,A),_);case 15:return WL(d,p,p.type,p.pendingProps,_);case 17:return T=p.type,A=p.pendingProps,A=p.elementType===T?A:No(T,A),zy(d,p),p.tag=1,Jr(T)?(d=!0,Gh(p)):d=!1,Yh(p,_),dL(p,T,A),yE(p,T,A,_),LE(null,p,T,!0,d,_);case 19:return ek(d,p,_);case 22:return XL(d,p,_)}throw Error(s(156,p.tag))},e.attemptContinuousHydration=function(d){if(d.tag===13){var p=ba(d,134217728);p!==null&&ro(p,d,134217728,gi()),rv(d,134217728)}},e.attemptDiscreteHydration=function(d){if(d.tag===13){var p=ba(d,1);p!==null&&ro(p,d,1,gi()),rv(d,1)}},e.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=rc(d),_=ba(d,p);_!==null&&ro(_,d,p,gi()),rv(d,p)}},e.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var _=G(p.pendingLanes);_!==0&&(hr(p,1|_),Yi(p,Br()),!(6&Qt)&&(td(),ya()))}break;case 13:vk(function(){var T=ba(d,1);if(T!==null){var A=gi();ro(T,d,1,A)}}),rv(d,1)}},e.batchedUpdates=function(d,p){var _=Qt;Qt|=1;try{return d(p)}finally{(Qt=_)===0&&(td(),by&&ya())}},e.createComponentSelector=function(d){return{$$typeof:jy,value:d}},e.createContainer=function(d,p,_,T,A,k,H){return Ck(d,p,!1,null,0,T,0,k,H)},e.createHasPseudoClassSelector=function(d){return{$$typeof:Gy,value:d}},e.createHydrationContainer=function(d,p,_,T,A,k,H,J,re){return(d=Ck(_,T,!0,d,0,k,0,J,re)).context=Pk(null),_=d.current,(k=dl(T=gi(),A=rc(_))).callback=p??null,Jl(_,k,A),d.current.lanes=A,Bn(d,A,T),Yi(d,T),d},e.createPortal=function(d,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:d,containerInfo:p,implementation:_}},e.createRoleSelector=function(d){return{$$typeof:Hy,value:d}},e.createTestNameSelector=function(d){return{$$typeof:Vy,value:d}},e.createTextSelector=function(d){return{$$typeof:Wy,value:d}},e.deferredUpdates=function(d){var p=bt,_=dr.transition;try{return dr.transition=null,bt=16,d()}finally{bt=p,dr.transition=_}},e.discreteUpdates=function(d,p,_,T,A){var k=bt,H=dr.transition;try{return dr.transition=null,bt=1,d(p,_,T,A)}finally{bt=k,dr.transition=H,Qt===0&&td()}},e.findAllNodes=VE,e.findBoundingRects=function(d,p){if(!qe)throw Error(s(363));p=VE(d,p),d=[];for(var _=0;_<p.length;_++)d.push(fn(p[_]));for(p=d.length-1;0<p;p--)for(var T=(_=d[p]).x,A=T+_.width,k=_.y,H=k+_.height,J=p-1;0<=J;J--)if(p!==J){var re=d[J],fe=re.x,ve=fe+re.width,ze=re.y,ye=ze+re.height;if(T>=fe&&k>=ze&&A<=ve&&H<=ye){d.splice(p,1);break}if(!(T!==fe||_.width!==re.width||ye<k||ze>H)){ze>k&&(re.height+=ze-k,re.y=k),ye<H&&(re.height=H-ze),d.splice(p,1);break}if(!(k!==ze||_.height!==re.height||ve<T||fe>A)){fe>T&&(re.width+=fe-T,re.x=T),ve<A&&(re.width=A-fe),d.splice(p,1);break}}return d},e.findHostInstance=Ak,e.findHostInstanceWithNoPortals=function(d){return(d=(d=O(d))!==null?D(d):null)===null?null:d.stateNode},e.findHostInstanceWithWarning=function(d){return Ak(d)},e.flushControlled=function(d){var p=Qt;Qt|=1;var _=dr.transition,T=bt;try{dr.transition=null,bt=1,d()}finally{bt=T,dr.transition=_,(Qt=p)===0&&(td(),ya())}},e.flushPassiveEffects=Tu,e.flushSync=vk,e.focusWithin=function(d,p){if(!qe)throw Error(s(363));for(p=pk(d=jE(d),p),p=Array.from(p),d=0;d<p.length;){var _=p[d++];if(!pt(_)){if(_.tag===5&&Ne(_.stateNode))return!0;for(_=_.child;_!==null;)p.push(_),_=_.sibling}}return!1},e.getCurrentUpdatePriority=function(){return bt},e.getFindAllNodesFailureDescription=function(d,p){if(!qe)throw Error(s(363));var _=0,T=[];d=[jE(d),0];for(var A=0;A<d.length;){var k=d[A++],H=d[A++],J=p[H];if((k.tag!==5||!pt(k))&&(GE(k,J)&&(T.push(HE(J)),++H>_&&(_=H)),H<p.length))for(k=k.child;k!==null;)d.push(k,H),k=k.sibling}if(_<p.length){for(d=[];_<p.length;_++)d.push(HE(p[_]));return`findAllNodes was able to match part of the selector:
  `+T.join(" > ")+`

No matching component was found for:
  `+d.join(" > ")}return null},e.getPublicRootInstance=function(d){return(d=d.current).child?d.child.tag===5?W(d.child.stateNode):d.child.stateNode:null},e.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:B7,findFiberByHostInstance:d.findFiberByHostInstance||z7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{vy=p.inject(d),ma=p}catch{}d=!!p.checkDCE}}return d},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(d,p,_,T){if(!qe)throw Error(s(363));d=VE(d,p);var A=Ke(d,_,T).disconnect;return{disconnect:function(){A()}}},e.registerMutableSourceForHydration=function(d,p){var _=p._getVersion;_=_(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,_]:d.mutableSourceEagerHydrationData.push(p,_)},e.runWithPriority=function(d,p){var _=bt;try{return bt=d,p()}finally{bt=_}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(d,p,_,T){var A=p.current,k=gi(),H=rc(A);return _=Pk(_),p.context===null?p.context=_:p.pendingContext=_,(p=dl(k,H)).payload={element:d},(T=T===void 0?null:T)!==null&&(p.callback=T),(d=Jl(A,p,H))!==null&&(ro(d,A,H,k),Cy(d,A,H)),H},e}),UB}({get exports(){return i2},set exports(t){i2=t}}).exports=vbe();var bbe=V1e(i2),bV={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},o2={},u1={get exports(){return o2},set exports(t){o2=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?u1.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(u1.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(u1.exports=function(){return Date.now()-n},n=Date.now()):(u1.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(H1e);var GB,nf={},Mu={};({get exports(){return nf},set exports(t){nf=t}}).exports=(GB||(GB=1,Mu.ConcurrentRoot=1,Mu.ContinuousEventPriority=4,Mu.DefaultEventPriority=16,Mu.DiscreteEventPriority=1,Mu.IdleEventPriority=536870912,Mu.LegacyRoot=0),Mu);var _be={};function YS(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function _V(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&Ul(t.children).forEach(function(s){_V(s,t)})}function HB(t,e){var n;_V(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,l=r.destroyTexture,c=l!==void 0&&l,u=r.destroyBaseTexture,h=u!==void 0&&u;s&&e.destroy({children:a,texture:c,baseTexture:h})}function VB(t,e,n){lr(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var WB=null,ea=bbe({getRootHostContext:function(){return _be},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return nf.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nf.ContinuousEventPriority;default:return nf.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=pbe[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=vV[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:tl)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return WB=function(o,a,l,c){var u=null;for(var h in l)!c.hasOwnProperty(h)&&l.hasOwnProperty(h)&&l[h]!==null&&(h===n2||(u||(u=[]),u.push(h,null)));for(var f in c){var g=c[f],m=l!==null?l[f]:void 0;!c.hasOwnProperty(f)||g===m||g===null&&m===null||f===n2||(u||(u=[]),u.push(f,g))}return u}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){lr(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:o2,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=YS.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=YS.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=YS.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=HB.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=HB.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:VB,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=VB.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=tl),(a(t,r,i)||WB)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),xbe=bV.dependencies["react-dom"].replace(/[^0-9.]/g,""),wbe=bV.name;ea.injectIntoDevTools({bundleType:0,version:xbe,rendererPackageName:wbe,findHostInstanceByFiber:ea.findHostInstance});var Yc=new Map;function xV(t){if(lr(di.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),Yc.has(t)){var e=Yc.get(t).pixiFiberContainer;ea.updateContainer(null,e,void 0,function(){Yc.delete(t)})}}function wV(t){lr(di.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=Yc.get(t);if(lr(!e,"Pixi React: createRoot should only be called once"),!e){var n=ea.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return ea.updateContainer(r,n,void 0),ea.getPublicRootInstance(n)},unmount:function(){xV(t),Yc.delete(t)}}},Yc.set(t,e)}return e.reactRoot}function Ebe(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Yc.has(e)?r=Yc.get(e).reactRoot:r=wV(e),r.render(t)}function Tbe(t){xV(t)}function f0(){return f0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f0.apply(this,arguments)}function Sbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gV(r.key),r)}}function yl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R_(t,e){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},R_(t,e)}function Pbe(t,e){if(e&&(Ns(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yl(t)}function I_(t){return I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I_(t)}var Vw=An.createContext(null),EV=Vw.Provider,TV=Vw.Consumer,Abe=function(t){var e=An.forwardRef(function(n,r){return An.createElement(TV,null,function(i){return An.createElement(t,f0({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function Rbe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=I_(t);if(e){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pbe(this,n)}}function XB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var YB=function(){},SV={width:Ln.number,height:Ln.number,onMount:Ln.func,onUnmount:Ln.func,raf:Ln.bool,renderOnComponentChange:Ln.bool,children:Ln.node,options:Ln.shape({autoStart:Ln.bool,width:Ln.number,height:Ln.number,useContextAlpha:Ln.bool,backgroundAlpha:Ln.number,autoDensity:Ln.bool,antialias:Ln.bool,preserveDrawingBuffer:Ln.bool,resolution:Ln.number,forceCanvas:Ln.bool,backgroundColor:Ln.number,clearBeforeRender:Ln.bool,powerPreference:Ln.string,sharedTicker:Ln.bool,sharedLoader:Ln.bool,resizeTo:function(t,e){var n=t[e];n&&lr(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ns(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&lr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ns(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},Ibe={width:800,height:600,onMount:YB,onUnmount:YB,raf:!0,renderOnComponentChange:!0},a2=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&R_(s,o)})(i,An.Component);var e,n,r=Rbe(i);function i(){var s;Sbe(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return pr(yl(s=r.call.apply(r,[this].concat(a))),"_canvas",null),pr(yl(s),"_mediaQuery",null),pr(yl(s),"_ticker",null),pr(yl(s),"_needsUpdate",!0),pr(yl(s),"app",null),pr(yl(s),"updateSize",function(){var c=s.props,u=c.width,h=c.height,f=c.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(u,h)}),pr(yl(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),pr(yl(s),"renderStage",function(){var c=s.props,u=c.renderOnComponentChange;!c.raf&&u&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,c=s.options,u=s.raf,h=s.renderOnComponentChange;this.app=new sy(h1(h1({width:a,height:l,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[u?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=ea.createContainer(this.app.stage),ea.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),h&&!u&&(this._ticker=new Sr,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,c=this.props,u=c.width,h=c.height,f=c.raf,g=c.renderOnComponentChange,m=c.options;(m==null?void 0:m.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(m==null?void 0:m.resolution)&&(this.app.renderer.resolution=m.resolution,this.resetInteractionManager()),s.height===h&&s.width===u&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(m==null?void 0:m.resolution)||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),ea.updateContainer(this.getChildren(),this.mountNode,this),s.width===u&&s.height===h&&s.raf===f&&s.renderOnComponentChange===g&&s.options===m||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return An.createElement(EV,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),ea.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(lr(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):An.createElement("canvas",f0({},(s=this.props,o=[].concat(Ul(Object.keys(SV)),Ul(Object.keys(r2))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,u){return h1(h1({},c),{},pr({},u,s[u]))},{})),{ref:function(c){return a._canvas=c}}))}}])&&Cbe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();a2.propTypes=SV,a2.defaultProps=Ibe;var Mbe=a2;function CV(){var t=P.useContext(Vw);return lr(t instanceof sy,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function Obe(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=CV();lr(typeof t=="function","`useTick` needs a callback function."),lr(n instanceof sy,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=P.useRef(null);P.useEffect(function(){r.current=t},[t]),P.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function Lbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l2(t,e,n){return l2=Lbe()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&R_(a,s.prototype),a},l2.apply(null,arguments)}var kbe=["children","apply"];function qB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Dbe=function(t,e){lr(Ns(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=gu(i,kbe),l=P.useRef(P.useMemo(function(){return n.map(function(h){var f,g=(a==null||(f=a[h])===null||f===void 0?void 0:f.construct)||[];return l2(e[h],Ul(g))})},[n])),c=P.useMemo(function(){return n.reduce(function(h,f,g){return d1(d1({},h),{},pr({},f,l.current[g]))},{})},[n]),u=P.useMemo(function(){return Object.keys(a).filter(yV(mV(n))).reduce(function(h,f){return d1(d1({},h),{},pr({},f,a[f]))},{})},[a,n]);return n.forEach(function(h,f){return Object.assign(l.current[f],a[h])}),o&&function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return f.every(function(m){return typeof m=="function"})}(o)&&o.call(t,c),An.createElement(t,f0({},u,{filters:l.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:Ln.node,apply:Ln.func},r},Nbe=us.BitmapText,Fbe=us.Container,Bbe=us.Graphics,zbe=us.NineSlicePlane,Ube=us.ParticleContainer,$be=us.Sprite,jbe=us.AnimatedSprite,Gbe=us.Text,Hbe=us.TilingSprite,Vbe=us.SimpleMesh,Wbe=us.SimpleRope;const Xbe=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:jbe,AppConsumer:TV,AppContext:Vw,AppProvider:EV,BitmapText:Nbe,Container:Fbe,Graphics:Bbe,NineSlicePlane:zbe,ParticleContainer:Ube,PixiComponent:gbe,PixiFiber:ea,SimpleMesh:Vbe,SimpleRope:Wbe,Sprite:$be,Stage:Mbe,TYPES:us,Text:Gbe,TilingSprite:Hbe,applyDefaultProps:tl,createRoot:wV,eventHandlers:A_,render:Ebe,unmountComponentAtNode:Tbe,useApp:CV,useTick:Obe,withFilters:Dbe,withPixiApp:Abe},Symbol.toStringTag,{value:"Module"})),Ybe=dn(Xbe);cG.exports=Ybe;var Xt=cG.exports,qbe=Object.defineProperty,Kbe=(t,e,n)=>e in t?qbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ge=(t,e,n)=>(Kbe(t,typeof e!="symbol"?e+"":e,n),n);class Io{constructor(e){ge(this,"parent"),ge(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var Zbe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PV={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s},easeOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-u)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=n.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=n.easeInBounce(i*2,0,o,a),l*.5+s):(l=n.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(n)}).call(Zbe)})(PV);const KB=PV.exports;function Ww(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return KB[t]}else return KB[e]}const Qbe={removeOnInterrupt:!1,ease:"linear",time:1e3};class Jbe extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"startX"),ge(this,"startY"),ge(this,"deltaX"),ge(this,"deltaY"),ge(this,"keepCenter"),ge(this,"startWidth",null),ge(this,"startHeight",null),ge(this,"deltaWidth",null),ge(this,"deltaHeight",null),ge(this,"width",null),ge(this,"height",null),ge(this,"time",0),this.options=Object.assign({},Qbe,n),this.options.ease=Ww(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new ft(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new ft(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const e_e={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class t_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"left"),ge(this,"top"),ge(this,"right"),ge(this,"bottom"),ge(this,"underflowX"),ge(this,"underflowY"),ge(this,"ease"),ge(this,"toX"),ge(this,"toY"),this.options=Object.assign({},e_e,n),this.ease=Ww(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new ft(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new ft(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new ft(0,0),bottomRight:new ft(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,l=r.bottomRight;if(!this.toX&&!i.x){let c=null;r.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let c=null;r.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const n_e={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class r_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"last"),ge(this,"noUnderflow"),ge(this,"underflowX"),ge(this,"underflowY"),this.options=Object.assign({},n_e,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new ft(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const i_e={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class s_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),this.options=Object.assign({},i_e,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const o_e={friction:.98,bounce:.8,minSpeed:.01},dc=16;class a_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"x"),ge(this,"y"),ge(this,"percentChangeX"),ge(this,"percentChangeY"),ge(this,"saved"),ge(this,"timeSinceRelease"),this.options=Object.assign({},o_e,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*dc/o*(Math.pow(s,i/dc)-Math.pow(s,r/dc)),this.x*=Math.pow(this.percentChangeX,e/dc)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*dc/o*(Math.pow(s,i/dc)-Math.pow(s,r/dc)),this.y*=Math.pow(this.percentChangeY,e/dc)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const l_e={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class c_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"moved"),ge(this,"reverse"),ge(this,"xDirection"),ge(this,"yDirection"),ge(this,"keyIsPressed"),ge(this,"mouse"),ge(this,"underflowX"),ge(this,"underflowY"),ge(this,"last"),ge(this,"current"),ge(this,"windowEventHandlers",[]),this.options=Object.assign({},l_e,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new ft(this.last.x,this.last.y),world:this.parent.toWorld(new ft(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new ft(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const u_e={speed:0,acceleration:null,radius:null};class h_e extends Io{constructor(e,n,r={}){super(e),ge(this,"options"),ge(this,"target"),ge(this,"velocity"),this.target=n,this.options=Object.assign({},u_e,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,h=Math.sin(a)*this.velocity.y,f=Math.abs(u)>Math.abs(s)?r:n.x+u,g=Math.abs(h)>Math.abs(o)?i:n.y+h;this.parent.moveCenter(f,g),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?r:n.x+l,h=Math.abs(c)>Math.abs(o)?i:n.y+c;this.parent.moveCenter(u,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const d_e={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class f_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"reverse"),ge(this,"radiusSquared"),ge(this,"left"),ge(this,"top"),ge(this,"right"),ge(this,"bottom"),ge(this,"horizontal"),ge(this,"vertical"),this.options=Object.assign({},d_e,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const p_e={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class g_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"active",!1),ge(this,"pinching",!1),ge(this,"moved",!1),ge(this,"lastCenter"),this.options=Object.assign({},p_e,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let l;const c=new ft(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const h=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=h),this.isAxisY()&&(this.parent.scale.y+=h),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const g=this.parent.toGlobal(l);this.parent.x+=(c.x-g.x)*this.options.factor,this.parent.y+=(c.y-g.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const m_e={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class y_e extends Io{constructor(e,n,r,i={}){super(e),ge(this,"options"),ge(this,"ease"),ge(this,"x"),ge(this,"y"),ge(this,"percent"),ge(this,"snapping"),ge(this,"deltaX"),ge(this,"deltaY"),ge(this,"startX"),ge(this,"startY"),this.options=Object.assign({},m_e,i),this.ease=Ww(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(n.time>this.options.time)r=!0,i=o+l,s=a+c;else{const u=this.ease(n.time,0,1,this.options.time);i=o+l*u,s=a+c*u}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const v_e={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class b_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"ease"),ge(this,"xScale"),ge(this,"yScale"),ge(this,"xIndependent"),ge(this,"yIndependent"),ge(this,"snapping"),this.options=Object.assign({},v_e,n),this.ease=Ww(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const __e={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class x_e extends Io{constructor(e,n={}){super(e),ge(this,"options"),ge(this,"smoothing"),ge(this,"smoothingCenter"),ge(this,"smoothingCount"),ge(this,"keyIsPressed"),this.options=Object.assign({},__e,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class w_e{constructor(e){ge(this,"viewport"),ge(this,"clickedAvailable"),ge(this,"isMouseDown"),ge(this,"last"),ge(this,"wheelFunction"),ge(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new xt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new ft;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const yg=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class E_e{constructor(e){ge(this,"plugins"),ge(this,"list"),ge(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=yg.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=yg.indexOf(e);s!==-1&&yg.splice(s,1),yg.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of yg)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const T_e={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Sr.shared,allowPreserveDragOutside:!1};class S_e extends di{constructor(e){super(),ge(this,"moving"),ge(this,"screenWidth"),ge(this,"screenHeight"),ge(this,"threshold"),ge(this,"input"),ge(this,"plugins"),ge(this,"zooming"),ge(this,"lastViewport"),ge(this,"options"),ge(this,"_dirty"),ge(this,"_forceHitArea"),ge(this,"_hitAreaDefault"),ge(this,"_pause"),ge(this,"tickerFunction"),ge(this,"_worldWidth"),ge(this,"_worldHeight"),ge(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...T_e,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new w_e(this),this.plugins=new E_e(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new xt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new xt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new ft(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new ft(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new ft(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new ft(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new b_e(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new ft(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new xt(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new c_e(this,e)),this}clamp(e){return this.plugins.add("clamp",new r_e(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new a_e(this,e)),this}bounce(e){return this.plugins.add("bounce",new t_e(this,e)),this}pinch(e){return this.plugins.add("pinch",new g_e(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new y_e(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new h_e(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new x_e(this,e)),this}animate(e){return this.plugins.add("animate",new Jbe(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new s_e(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new f_e(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const C_e=t=>{const e=new S_e({passiveWheel:!1,events:t.app.renderer.events,stopPropagation:!0,screenWidth:t.screenWidth,screenHeight:t.screenHeight,worldWidth:1e3,worldHeight:1e3});return e.moveCenter(t.viewportCenter[2]||0,t.viewportCenter[1]||0),e.setZoom(t.viewportCenter[0]||1,!0),e.drag({wheel:!1}).wheel({wheelZoom:!0}).pinch().clampZoom({maxScale:5,minScale:.1}),t.onDragStart&&e.on("drag-start",t.onDragStart),t.onDragEnd&&e.on("drag-end",t.onDragEnd),t.onPinchStart&&e.on("pinch-start",t.onPinchStart),t.onPinchEnd&&e.on("pinch-end",t.onPinchEnd),t.onSnapStart&&e.on("snap-start",t.onSnapStart),t.onSnapEnd&&e.on("snap-end",t.onSnapEnd),t.onSnapZoomStart&&e.on("snap-zoom-start",t.onSnapZoomStart),t.onSnapZoomEnd&&e.on("snap-zoom-end",t.onSnapZoomEnd),t.onZoomed&&e.on("zoomed",t.onZoomed),t.onZoomedEnd&&e.on("zoomed-end",t.onZoomedEnd),t.onMouseUp&&e.on("mouseup",t.onMouseUp),t.onMoved&&e.on("moved",t.onMoved),t.onMovedEnd&&e.on("moved-end",n=>{t.onMovedEnd&&t.onMovedEnd({x:n.center.x,y:n.center.y,zoom:n.lastViewport.scaleX})}),e},P_e=t=>{const e=Xt.useApp(),n=({left:i,top:s,right:o,bottom:a,paddingMarginRatio:l})=>{if(t.screenWidth===0)return;const c=e.stage.getChildAt(0),u=Y8({left:i,top:s,right:o,bottom:a,width:t.screenWidth,height:t.screenHeight,paddingMarginRatio:l});c.moveCenter(u[2],u[1]),c.setZoom(u[0],!0),requestAnimationFrame(()=>{t.onSetViewportCenter(u)})};P.useEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);t.screenWidth>0&&t.screenHeight>0&&(t.viewportCenter?(i.moveCenter(t.viewportCenter[2],t.viewportCenter[1]),i.setZoom(t.viewportCenter[0],!0)):n(t.boundingBox))})},[t.viewportCenter]),P.useLayoutEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);i.pause=t.pause})},[t.pause]);const r=Xt.PixiComponent("Viewport",{create:i=>{const s=C_e(i);return s.options.events.domElement=i.app.renderer.view,s},didMount(i,s){},willUnmount:i=>{i.destroy({children:!0})}});return K(r,{app:e,...t})},A_e='<svg xmlns="http://www.w3.org/2000/svg" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-kaxv2e" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DomainIcon"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></svg>',R_e=new Blob([A_e],{type:"image/svg+xml"}),AV=URL.createObjectURL(R_e),RV=new cr;Nn.prototype._cacheAsBitmap=!1;Nn.prototype._cacheData=null;Nn.prototype._cacheAsBitmapResolution=null;Nn.prototype._cacheAsBitmapMultisample=null;class I_e{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new I_e),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Nn.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Nn.prototype._initCachedDisplayObject=function(t){var f,g;if((f=this._cacheData)!=null&&f.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(new xt,!0);if((g=this.filters)!=null&&g.length){const m=this.filters[0].padding;n.pad(m)}const r=this.cacheAsBitmapResolution||t.resolution;n.ceil(r),n.width=Math.max(n.width,1/r),n.height=Math.max(n.height,1/r);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=pu.create({width:n.width,height:n.height,resolution:r,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${iu()}`;this._cacheData.textureCacheId=c,Rt.addToCache(l.baseTexture,c),yt.addToCache(l,c);const u=this.transform.localTransform.copyTo(RV).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new fa(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};Nn.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Nn.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const e=this.getLocalBounds(new xt,!0),n=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=pu.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${iu()}`;this._cacheData.textureCacheId=a,Rt.addToCache(o.baseTexture,a),yt.addToCache(o,a);const l=RV;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new fa(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};Nn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Nn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Nn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Rt.removeFromCache(this._cacheData.textureCacheId),yt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Nn.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Nn.prototype.name=null;di.prototype.getChildByName=function(t,e){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(let n=0,r=this.children.length;n<r;n++){const i=this.children[n];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};Nn.prototype.getGlobalPosition=function(t=new ft,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var M_e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class IV extends Ai{constructor(e=1){super(yH,M_e,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const O_e=Object.freeze(Object.defineProperty({__proto__:null,AlphaFilter:IV},Symbol.toStringTag,{value:"Module"})),L_e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},k_e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function D_e(t){const e=L_e[t],n=e.length;let r=k_e,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const N_e=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function F_e(t,e){const n=Math.ceil(t/2);let r=N_e,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class M_ extends Ai{constructor(e,n=8,r=4,i=Ai.defaultResolution,s=5){const o=F_e(s,e),a=D_e(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Yo.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Yo.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class MV extends Ai{constructor(e=8,n=4,r=Ai.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new M_(!0,e,n,r,i),this.blurYFilter=new M_(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Yo.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}const B_e=Object.freeze(Object.defineProperty({__proto__:null,BlurFilter:MV,BlurFilterPass:M_},Symbol.toStringTag,{value:"Module"}));var z_e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class O_ extends Ai{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(ZM,z_e,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=sn.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,u=o*(1-r)+a*i,h=o*(1-r)+a*i,f=r+o*(1-r),g=o*(1-r)-a*i,m=o*(1-r)-a*i,y=o*(1-r)+a*i,x=r+o*(1-r),b=[l,c,u,0,0,h,f,g,0,0,m,y,x,0,0,0,0,0,1,0];this._loadMatrix(b,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=sn.shared,[a,l,c]=o.setValue(r).toArray(),[u,h,f]=o.setValue(i).toArray(),g=[.3,.59,.11,0,0,a,l,c,e,0,u,h,f,n,0,a-u,l-h,c-f,0,0];this._loadMatrix(g,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}O_.prototype.grayscale=O_.prototype.greyscale;const U_e=Object.freeze(Object.defineProperty({__proto__:null,ColorMatrixFilter:O_},Symbol.toStringTag,{value:"Module"}));var $_e=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,j_e=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class OV extends Ai{constructor(e,n){const r=new cr;e.renderable=!1,super(j_e,$_e,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new ft(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}const G_e=Object.freeze(Object.defineProperty({__proto__:null,DisplacementFilter:OV},Symbol.toStringTag,{value:"Module"}));var H_e=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,V_e=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class LV extends Ai{constructor(){super(V_e,H_e)}}const W_e=Object.freeze(Object.defineProperty({__proto__:null,FXAAFilter:LV},Symbol.toStringTag,{value:"Module"}));var X_e=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class kV extends Ai{constructor(e=.5,n=Math.random()){super(ZM,X_e,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Y_e=Object.freeze(Object.defineProperty({__proto__:null,NoiseFilter:kV},Symbol.toStringTag,{value:"Module"})),ZB={AlphaFilter:IV,BlurFilter:MV,BlurFilterPass:M_,ColorMatrixFilter:O_,DisplacementFilter:OV,FXAAFilter:LV,NoiseFilter:kV};Object.entries(ZB).forEach(([t,e])=>{Object.defineProperty(ZB,t,{get(){return _t("7.1.0",`filters.${t} has moved to ${t}`),e}})});class q_e{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Sr.system.add(this.tickerUpdate,this,zl.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Sr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ac=new q_e;class _p{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=_p.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ft,this.page=new ft,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class p0 extends _p{constructor(){super(...arguments),this.client=new ft,this.movement=new ft,this.offset=new ft,this.global=new ft,this.screen=new ft}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y){throw new Error("Method not implemented.")}}class so extends p0{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fh extends p0{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}fh.DOM_DELTA_PIXEL=0,fh.DOM_DELTA_LINE=1,fh.DOM_DELTA_PAGE=2;const K_e=2048,Z_e=new ft,qS=new ft;class DV{constructor(e){this.dispatch=new mp,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Ac.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,Z_e.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<K_e&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Ac.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const f=u[h],g=this.hitTestMoveRecursive(f,this._isInteractive(n)?n:f.eventMode,r,i,s,o||s(e,r));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const m=e.isInteractive();(g.length>0||m)&&(m&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),a=!0}}}const l=this._isInteractive(n),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Ac.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],h=this.hitTestRecursive(u,this._isInteractive(n)?n:u.eventMode,r,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const f=e.isInteractive();return(h.length>0||f)&&h.push(e),h}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,qS),!e.hitArea.contains(qS.x,qS.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var l,c;if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==n.target){const u=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,u,s);if(this.dispatchEvent(h,"pointerout"),r&&this.dispatchEvent(h,"mouseout"),!n.composedPath().includes(s)){const f=this.createPointerEvent(e,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!n.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}if(s!==n.target){const u=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(n,u);this.dispatchEvent(h,"pointerover"),r&&this.dispatchEvent(h,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==n.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(n,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),r&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=n.target)==null?void 0:c.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof so)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof fh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(so);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(fh);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(so);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof so&&n instanceof so&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof p0&&n instanceof p0&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const Q_e=1,J_e={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},c2=class u2{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new DV(null),Ac.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new so(null),this.rootWheelEvent=new fh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...u2.defaultEventFeatures},{set:(n,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),n[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:n,resolution:r}=this.renderer;this.setTargetElement(n),this.resolution=r,u2._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":n&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":n&&Object.assign(this.domElement.style,r);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=n.length;r<i;r++){const s=n[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ac.pointerMoved();const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const r=n!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,Ac.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ac.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ac.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(n-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Q_e),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,n.push(r)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,n.deltaMode=e.deltaMode,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=J_e[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}};c2.extension={name:"events",type:[Ue.RendererSystem,Ue.CanvasRendererSystem]},c2.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let L_=c2;nt.add(L_);function QB(t){return t==="dynamic"||t==="static"}const NV={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??QB(L_.defaultEventMode)},set interactive(t){_t("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??L_.defaultEventMode},set eventMode(t){this._internalInteractive=QB(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof n=="object"?n.signal:void 0,s=typeof n=="object"?n.once===!0:!1,o=typeof e=="function"?void 0:e;t=r?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof _p))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Nn.mixin(NV);const exe=Object.freeze(Object.defineProperty({__proto__:null,EventBoundary:DV,EventSystem:L_,FederatedDisplayObject:NV,FederatedEvent:_p,FederatedMouseEvent:p0,FederatedPointerEvent:so,FederatedWheelEvent:fh},Symbol.toStringTag,{value:"Module"})),FV={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nn.mixin(FV);const txe=9,f1=100,nxe=0,rxe=0,JB=2,e4=1,ixe=-1e3,sxe=-1e3,oxe=2;class lO{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Zo.tablet||Zo.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${f1}px`,n.style.height=`${f1}px`,n.style.position="absolute",n.style.top=`${nxe}px`,n.style.left=`${rxe}px`,n.style.zIndex=JB.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${e4}px`,e.style.height=`${e4}px`,e.style.position="absolute",e.style.top=`${ixe}px`,e.style.left=`${sxe}px`,e.style.zIndex=oxe.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Zo.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let h=this.div;h.style.left=`${n}px`,h.style.top=`${r}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const g=this.children[f];if(g.renderId!==this.renderId)g._accessibleActive=!1,hh(this.children,f,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,f--;else{h=g._accessibleDiv;let m=g.hitArea;const y=g.worldTransform;g.hitArea?(h.style.left=`${(y.tx+m.x*y.a)*c}px`,h.style.top=`${(y.ty+m.y*y.d)*u}px`,h.style.width=`${m.width*y.a*c}px`,h.style.height=`${m.height*y.d*u}px`):(m=g.getBounds(),this.capHitArea(m),h.style.left=`${m.x*c}px`,h.style.top=`${m.y*u}px`,h.style.width=`${m.width*c}px`,h.style.height=`${m.height*u}px`,h.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(h.title=g.accessibleTitle),h.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&h.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==h.title||g.tabIndex!==h.tabIndex)&&(h.title=g.accessibleTitle,h.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${f1}px`,n.style.height=`${f1}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=JB.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new _p(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===txe&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}lO.extension={name:"accessibility",type:[Ue.RendererPlugin,Ue.CanvasRendererPlugin]};nt.add(lO);const axe=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityManager:lO,accessibleTarget:FV},Symbol.toStringTag,{value:"Module"}));var Gr=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(Gr||{});const g0={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Da,Dd;function t4(){Dd={s3tc:Da.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Da.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Da.getExtension("WEBGL_compressed_texture_etc"),etc1:Da.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Da.getExtension("WEBGL_compressed_texture_pvrtc")||Da.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Da.getExtension("WEBGL_compressed_texture_atc"),astc:Da.getExtension("WEBGL_compressed_texture_astc"),bptc:Da.getExtension("EXT_texture_compression_bptc")}}const BV={extension:{type:Ue.DetectionParser,priority:2},test:async()=>{const t=Xe.ADAPTER.createCanvas().getContext("webgl");return t?(Da=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Dd||t4();const e=[];for(const n in Dd)Dd[n]&&e.push(n);return[...e,...t]},remove:async t=>(Dd||t4(),t.filter(e=>!(e in Dd)))};nt.add(BV);class zV extends q0{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new b_(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new b_(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class qc extends zV{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=qc._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||qc._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=qc._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let c=e.byteOffset,u=o,h=a,f=u+i-1&~(i-1),g=h+s-1&~(s-1),m=f*g*g0[n];for(let y=0;y<r;y++)l[y]={levelID:y,levelWidth:r>1?u:f,levelHeight:r>1?h:g,levelBuffer:new Uint8Array(e.buffer,c,m)},c+=m,u=u>>1||1,h=h>>1||1,f=u+i-1&~(i-1),g=h+s-1&~(s-1),m=f*g*g0[n];return l}}const KS=4,p1=124,lxe=32,n4=20,cxe=542327876,g1={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},uxe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},m1={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},hxe=1,dxe=2,fxe=4,pxe=64,gxe=512,mxe=131072,yxe=827611204,vxe=861165636,bxe=894720068,_xe=808540228,xxe=4,wxe={[yxe]:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[vxe]:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[bxe]:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT},Exe={70:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Gr.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Gr.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Gr.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Gr.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function UV(t){const e=new Uint32Array(t);if(e[0]!==cxe)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,p1/Uint32Array.BYTES_PER_ELEMENT),r=n[g1.HEIGHT],i=n[g1.WIDTH],s=n[g1.MIPMAP_COUNT],o=new Uint32Array(t,g1.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,lxe/Uint32Array.BYTES_PER_ELEMENT),a=o[hxe];if(a&fxe){const l=o[uxe.FOURCC];if(l!==_xe){const w=wxe[l],v=KS+p1,E=new Uint8Array(t,v);return[new qc(E,{format:w,width:i,height:r,levels:s})]}const c=KS+p1,u=new Uint32Array(e.buffer,c,n4/Uint32Array.BYTES_PER_ELEMENT),h=u[m1.DXGI_FORMAT],f=u[m1.RESOURCE_DIMENSION],g=u[m1.MISC_FLAG],m=u[m1.ARRAY_SIZE],y=Exe[h];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(g===xxe)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,b=KS+p1+n4;if(m===1)x.push(new Uint8Array(t,b));else{const w=g0[y];let v=0,E=i,S=r;for(let R=0;R<s;R++){const I=Math.max(1,E+3&-4),L=Math.max(1,S+3&-4),O=I*L*w;v+=O,E=E>>>1,S=S>>>1}let C=b;for(let R=0;R<m;R++)x.push(new Uint8Array(t,C,v)),C+=v}return x.map(w=>new qc(w,{format:y,width:i,height:r,levels:s}))}throw a&pxe?new Error("DDSParser does not support uncompressed texture data."):a&gxe?new Error("DDSParser does not supported YUV uncompressed texture data."):a&mxe?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&dxe?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const r4=[171,75,84,88,32,49,49,187,13,10,26,10],Txe=67305985,Uo={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},h2=64,d2={[lt.UNSIGNED_BYTE]:1,[lt.UNSIGNED_SHORT]:2,[lt.INT]:4,[lt.UNSIGNED_INT]:4,[lt.FLOAT]:4,[lt.HALF_FLOAT]:8},$V={[Re.RGBA]:4,[Re.RGB]:3,[Re.RG]:2,[Re.RED]:1,[Re.LUMINANCE]:1,[Re.LUMINANCE_ALPHA]:2,[Re.ALPHA]:1},jV={[lt.UNSIGNED_SHORT_4_4_4_4]:2,[lt.UNSIGNED_SHORT_5_5_5_1]:2,[lt.UNSIGNED_SHORT_5_6_5]:2};function GV(t,e,n=!1){const r=new DataView(e);if(!Sxe(t,r))return null;const i=r.getUint32(Uo.ENDIANNESS,!0)===Txe,s=r.getUint32(Uo.GL_TYPE,i),o=r.getUint32(Uo.GL_FORMAT,i),a=r.getUint32(Uo.GL_INTERNAL_FORMAT,i),l=r.getUint32(Uo.PIXEL_WIDTH,i),c=r.getUint32(Uo.PIXEL_HEIGHT,i)||1,u=r.getUint32(Uo.PIXEL_DEPTH,i)||1,h=r.getUint32(Uo.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=r.getUint32(Uo.NUMBER_OF_FACES,i),g=r.getUint32(Uo.NUMBER_OF_MIPMAP_LEVELS,i),m=r.getUint32(Uo.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const y=4,x=4,b=l+3&-4,w=c+3&-4,v=new Array(h);let E=l*c;s===0&&(E=b*w);let S;if(s!==0?d2[s]?S=d2[s]*$V[o]:S=jV[s]:S=g0[a],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const C=n?Pxe(r,m,i):null;let R=E*S,I=l,L=c,O=b,B=w,M=h2+m;for(let D=0;D<g;D++){const N=r.getUint32(M,i);let j=M+4;for(let W=0;W<h;W++){let V=v[W];V||(V=v[W]=new Array(g)),V[D]={levelID:D,levelWidth:g>1||s!==0?I:O,levelHeight:g>1||s!==0?L:B,levelBuffer:new Uint8Array(e,j,R)},j+=R}M+=N+4,M=M%4!==0?M+4-M%4:M,I=I>>1||1,L=L>>1||1,O=I+y-1&~(y-1),B=L+x-1&~(x-1),R=O*B*S}return s!==0?{uncompressed:v.map(D=>{let N=D[0].levelBuffer,j=!1;return s===lt.FLOAT?N=new Float32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4):s===lt.UNSIGNED_INT?(j=!0,N=new Uint32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)):s===lt.INT&&(j=!0,N=new Int32Array(D[0].levelBuffer.buffer,D[0].levelBuffer.byteOffset,D[0].levelBuffer.byteLength/4)),{resource:new q0(N,{width:D[0].levelWidth,height:D[0].levelHeight}),type:s,format:j?Cxe(o):o}}),kvData:C}:{compressed:v.map(D=>new qc(null,{format:a,width:l,height:c,levels:g,levelBuffers:D})),kvData:C}}function Sxe(t,e){for(let n=0;n<r4.length;n++)if(e.getUint8(n)!==r4[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function Cxe(t){switch(t){case Re.RGBA:return Re.RGBA_INTEGER;case Re.RGB:return Re.RGB_INTEGER;case Re.RG:return Re.RG_INTEGER;case Re.RED:return Re.RED_INTEGER;default:return t}}function Pxe(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(h2+i,n),o=h2+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);r.set(c,u),i+=4+s+a}return r}const HV={extension:{type:Ue.LoadParser,priority:Ro.High},name:"loadDDS",test(t){return ql(t,".dds")},async load(t,e,n){const r=await(await Xe.ADAPTER.fetch(t)).arrayBuffer(),i=UV(r).map(s=>{const o=new Rt(s,{mipmap:ua.OFF,alphaMode:$i.NO_PREMULTIPLIED_ALPHA,resolution:Qa(t),...e.data});return bp(o,n,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};nt.add(HV);const VV={extension:{type:Ue.LoadParser,priority:Ro.High},name:"loadKTX",test(t){return ql(t,".ktx")},async load(t,e,n){const r=await(await Xe.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=GV(t,r),a=i??s,l={mipmap:ua.OFF,alphaMode:$i.NO_PREMULTIPLIED_ALPHA,resolution:Qa(t),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const h=u.resource??u,f=new Rt(h,l);return f.ktxKeyValueData=o,bp(f,n,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};nt.add(VV);const WV={extension:Ue.ResolveParser,test:t=>{const e=Cr.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,r;const e=Cr.extname(t).slice(1);if(e==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(i.some(s=>t.endsWith(s)))return{resolution:parseFloat(((n=Xe.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:i.find(s=>t.endsWith(s)),src:t}}return{resolution:parseFloat(((r=Xe.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e,src:t}}};nt.add(WV);const Axe=Object.freeze(Object.defineProperty({__proto__:null,BlobResource:zV,CompressedTextureResource:qc,FORMATS_TO_COMPONENTS:$V,INTERNAL_FORMATS:Gr,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:g0,TYPES_TO_BYTES_PER_COMPONENT:d2,TYPES_TO_BYTES_PER_PIXEL:jV,detectCompressedTextures:BV,loadDDS:HV,loadKTX:VV,parseDDS:UV,parseKTX:GV,resolveCompressedTextureUrl:WV},Symbol.toStringTag,{value:"Module"})),y1=new xt,Rxe=4,XV=class Gg{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,n,r,i){const s=new Image;return s.src=await this.base64(e,n,r,i),s}async base64(e,n,r,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},n,r)});if(s.toDataURL!==void 0)return s.toDataURL(n,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:n,quality:r});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);o&&Gg._flipY(r,i,s),a&&Gg._unpremultiplyAlpha(r);const l=new LG(i,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);return o&&Gg._flipY(r,i,s),a&&Gg._unpremultiplyAlpha(r),r}_rawPixels(e,n){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof pu?a=e:(a=r.generateTexture(e,{region:n,resolution:r.resolution,multisample:r.multisample}),l=!0,n&&(y1.width=n.width,y1.height=n.height,n=y1)));const c=r.gl;if(a){if(i=a.baseTexture.resolution,n=n??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===Re.RGBA,!l){r.renderTexture.bind(a);const g=a.framebuffer.glFramebuffers[r.CONTEXT_UID];g.blitFramebuffer&&r.framebuffer.bind(g.blitFramebuffer)}}else i=r.resolution,n||(n=y1,n.width=r.width/i,n.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(n.width*i),1),h=Math.max(Math.round(n.height*i),1),f=new Uint8Array(Rxe*u*h);return c.readPixels(Math.round(n.x*i),Math.round(n.y*i),u,h,c.RGBA,c.UNSIGNED_BYTE,f),l&&(a==null||a.destroy(!0)),{pixels:f,width:u,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,n,r){const i=n<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==0){const s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};XV.extension={name:"extract",type:Ue.RendererSystem};let YV=XV;nt.add(YV);const Ixe=Object.freeze(Object.defineProperty({__proto__:null,Extract:YV},Symbol.toStringTag,{value:"Module"}));class qV{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Mxe(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof yt){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function Oxe(t,e){if(t.baseTexture instanceof Rt){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Lxe(t,e){if(t._texture&&t._texture instanceof yt){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function kxe(t,e){return e instanceof Uw?(e.updateText(!0),!0):!1}function Dxe(t,e){if(e instanceof Gs){const n=e.toFontString();return wl.measureFont(n),!0}return!1}function Nxe(t,e){if(t instanceof Uw){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Fxe(t,e){return t instanceof Gs?(e.includes(t)||e.push(t),!0):!1}const KV=class ZV{constructor(e){this.limiter=new qV(ZV.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Nxe),this.registerFindHook(Fxe),this.registerFindHook(Mxe),this.registerFindHook(Oxe),this.registerFindHook(Lxe),this.registerUploadHook(kxe),this.registerUploadHook(Dxe)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,Sr.system.addOnce(this.tick,this,zl.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)Sr.system.addOnce(this.tick,this,zl.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,r=e.length;n<r;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,r=this.addHooks.length;n<r&&!this.addHooks[n](e,this.queue);n++);if(e instanceof di)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&Sr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};KV.uploadsPerFrame=4;let k_=KV;Object.defineProperties(Xe,{UPLOADS_PER_FRAME:{get(){return k_.uploadsPerFrame},set(t){_t("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),k_.uploadsPerFrame=t}}});function QV(t,e){return e instanceof Rt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function Bxe(t,e){if(!(e instanceof bf))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&QV(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function zxe(t,e){return t instanceof bf?(e.push(t),!0):!1}class cO extends k_{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(zxe),this.registerUploadHook(QV),this.registerUploadHook(Bxe)}}cO.extension={name:"prepare",type:Ue.RendererSystem};nt.add(cO);class Uxe{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const $xe=Object.freeze(Object.defineProperty({__proto__:null,BasePrepare:k_,CountLimiter:qV,Prepare:cO,TimeLimiter:Uxe},Symbol.toStringTag,{value:"Module"})),JV=class Hg{constructor(e,n,r){this.linkedSheets=[],(e instanceof Rt||e instanceof yt)&&(e={texture:e,data:n,resolutionFilename:r});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof yt?i:null,this.baseTexture=i instanceof Rt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:n}=this.data.meta;let r=Qa(e,null);return r===null&&(r=typeof n=="number"?n:parseFloat(n??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Hg.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const r=Hg.BATCH_SIZE;for(;n-e<r&&n<this._frameKeys.length;){const i=this._frameKeys[n],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new xt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new xt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new yt(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),yt.addToCache(this.textures[i],this.cachePrefix+i.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let r=0;r<e[n].length;r++){const i=e[n][r];this.animations[n].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Hg.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Hg.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var n;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)==null||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};JV.BATCH_SIZE=1e3;let f2=JV;const jxe=["jpg","png","jpeg","avif","webp"];function eW(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!n){const i=Cr.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(r,eW([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const tW={extension:Ue.Asset,cache:{test:t=>t instanceof f2,getCacheableAssets:(t,e)=>eW(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),n=e.pop(),r=e.pop();return n==="json"&&jxe.includes(r)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=Xe.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:Ue.LoadParser,priority:Ro.Normal},async testParse(t,e){return Cr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var u,h;const{texture:r,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Cr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(r&&r.baseTexture)a=r;else{const f=P_(o+(i??t.meta.image),e.src);a=(await n.load([f]))[f]}const l=new f2({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(c)){const f=[];for(const m of c){if(typeof m!="string")continue;let y=o+m;(h=e.data)!=null&&h.ignoreMultiPack||(y=P_(y,e.src),f.push(n.load({src:y,data:{ignoreMultiPack:!0}})))}const g=await Promise.all(f);l.linkedSheets=g,g.forEach(m=>{m.linkedSheets=[l].concat(l.linkedSheets.filter(y=>y!==m))})}return l},unload(t){t.destroy(!0)}}};nt.add(tW);const Gxe=Object.freeze(Object.defineProperty({__proto__:null,Spritesheet:f2,spritesheetAsset:tW},Symbol.toStringTag,{value:"Module"})),p2=class Nd extends Gs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Nd(Object.keys(Nd.defaultOptions).reduce((n,r)=>({...n,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Nd.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,n={}){const{availableFonts:r}=Nd;if(r[e]){const i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Xe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Cr.basename(e,Cr.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},n);r[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const n=e.filter(r=>!this._overrides.includes(r));n.length>0&&(this._overrides.push(...n),this.styleID++)}removeOverride(...e){const n=e.filter(r=>this._overrides.includes(r));n.length>0&&(this._overrides=this._overrides.filter(r=>!n.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,n)=>`${e}
            @font-face {
                font-family: "${n.family}";
                src: url('${n.dataSrc}');
                font-weight: ${n.weight};
                font-style: ${n.style};
                font-display: ${n.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=IG(e)),typeof e=="number"?RG(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const n=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&n<1&&(e+=(n*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Nd.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(n=>setTimeout(n,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Xe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};p2.availableFonts={},p2.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let cb=p2;const Vg=class Fd extends fa{constructor(e="",n={}){super(yt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,i=yt.from(r,{scaleMode:Xe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new xt,i.trim=new xt,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Fd.defaultMaxWidth,this.maxHeight=Fd.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=r,this._loadImage=new Image,this._autoResolution=Fd.defaultAutoResolution,this._resolution=Fd.defaultResolution??Xe.RESOLUTION,this.text=e,this.style=n}measureText(e){var u,h;const{text:n,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(i)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:l+r.padding*2,height:c+r.padding*2}}async updateText(e=!0){const{style:n,_image:r,_loadImage:i}=this;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await n.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:n,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=n;n.trim.width=n._frame.width=r.width/i,n.trim.height=n._frame.height=r.height/i,n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var r,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Fd.defaultDestroyOptions,e),super.destroy(e);const n=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=n,(i=this._svgRoot)==null||i.remove(),this._svgRoot=n,(s=this._domElement)==null||s.remove(),this._domElement=n,(o=this._foreignObject)==null||o.remove(),this._foreignObject=n,(a=this._styleElement)==null||a.remove(),this._styleElement=n,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=n,this._image.src="",this._image=n}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const n=Al(this.scale.x)||1;this.scale.x=n*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const n=Al(this.scale.y)||1;this.scale.y=n*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof cb?(this.ownsStyle=!1,this._style=e):e instanceof Gs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=cb.from(e)):(this.ownsStyle=!0,this._style=new cb(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Vg.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Vg.defaultMaxWidth=2024,Vg.defaultMaxHeight=2024,Vg.defaultAutoResolution=!0;let Hxe=Vg;const Vxe=Object.freeze(Object.defineProperty({__proto__:null,HTMLText:Hxe,HTMLTextStyle:cb},Symbol.toStringTag,{value:"Module"})),Wxe=new Gs({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center"}),Xxe=new Gs({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#dd0000",align:"center"}),Yxe=new Gs({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',align:"center",fill:"#333333"}),Go=t=>new Gs({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center",...t}),qxe=t=>{if(!t.city)return null;const e=n=>{n.clear(),n.beginFill(q8,.7),n.lineStyle(2,170,1),n.drawRoundedRect(-90,-50,170,195,20),n.endFill()};return Ft(Xt.Container,{position:{x:t.x,y:t.y},children:[K(Xt.Graphics,{draw:e}),K(Xt.Text,{x:0,y:-30,anchor:{x:.5,y:.5},style:Go({fontSize:14,fill:170}),text:`(${t.city.point[0].toFixed(2)}, ${t.city.point[1].toFixed(2)})`}),K(Xt.Sprite,{image:AV,x:0,y:0,scale:{x:.3,y:.3},anchor:{x:.5,y:.5}}),K(Xt.Text,{x:0,y:28,anchor:{x:.5,y:.5},style:Go({fontSize:18,fill:170}),text:`#${t.index}`}),K(Xt.Text,{x:0,y:45,anchor:{x:.5,y:.5},style:Go({fontSize:10,fill:170}),text:t.city.label.length<28?t.city.label:t.city.label.substring(0,28)+"..."}),K(Xt.Text,{x:0,y:60,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`share of manufacturing = ${t.city.manufactureShare.toFixed(3)} `}),K(Xt.Text,{x:0,y:75,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`      share of agriculture = ${t.city.agricultureShare.toFixed(3)} `}),K(Xt.Text,{x:0,y:90,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`        price index = ${t.city.priceIndex.toFixed(3)} `}),K(Xt.Text,{x:0,y:105,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`    nominal wage = ${t.city.nominalWage.toFixed(3)} `}),K(Xt.Text,{x:0,y:120,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`          real wage = ${t.city.realWage.toFixed(3)} `}),K(Xt.Text,{x:0,y:135,anchor:{x:.5,y:.5},style:Go({fontSize:11,fill:136}),text:`    GDP = ${t.city.priceIndex.toFixed(3)} `})]})},Kxe=t=>K(Xt.Container,{children:K(Xt.Graphics,{draw:e=>{e.clear(),t.focusedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),Zxe=t=>K(Xt.Container,{children:K(Xt.Graphics,{draw:e=>{e.clear(),t.selectedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.8),t.focusedIndices.includes(n)?e.lineStyle(2,16711680,.6):e.lineStyle(2,16711680,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),Qxe=t=>K(Xt.Container,{children:t.edges.map((e,n)=>K(Jxe,{edge:e,index:n,...t},n))}),Jxe=t=>{const e=BP(t.locations,t.edge.source),n=BP(t.locations,t.edge.target),r=t.locations[e],i=t.locations[n];if(!r||!i)return;const{x:s,y:o}={x:(r.point[0]+i.point[0])/2,y:(r.point[1]+i.point[1])/2},a=An.useCallback(l=>{l.clear(),l.lineStyle({width:1,color:0,alpha:.1,alignment:.5}),l.moveTo(r.point[0],r.point[1]),l.lineTo(i.point[0],i.point[1])},[r.point[0],i.point[0],r.point[1],i.point[1]]);return Ft(Xt.Container,{children:[K(Xt.Graphics,{draw:a}),!(t.focusedIndices.length===2&&e===t.focusedIndices[0]&&n===t.focusedIndices[1])&&!(t.selectedIndices.length===2&&e===t.selectedIndices[0]&&n===t.selectedIndices[1])&&K(Xt.Text,{text:t.edge.distance.toFixed(2),position:{x:s,y:o},anchor:{x:.5,y:.5},style:Yxe})]},t.index)},ewe=t=>K(Xt.Container,{children:t.locations.map((e,n)=>K(twe,{index:n,...t},e.id))}),twe=t=>{const[e,n]=An.useState(null),r=t.locations[t.index],i=P.useCallback(c=>{c.preventDefault(),t.onDragStart(c.clientX,c.clientY,t.index)},[t.index]),s=P.useCallback(c=>{if(c.preventDefault(),t.draggingIndex===t.index){c.currentTarget.cursor="grabbing";const u=c.currentTarget.parent.parent,h=c.getLocalPosition(u),f=t.locations[t.index],g=h.x-f.point[0],m=h.y-f.point[1];t.onDrag(g,m,t.index)}},[t.draggingIndex,t.locations,t.onDrag,t.index]),o=P.useCallback(c=>{c.preventDefault(),c.currentTarget.cursor="pointer",t.onPointerUp(c,t.index),t.onDragEnd(c.clientX,c.clientY,t.index)},[t.onPointerUp,t.onDragEnd,t.index,e]),a=P.useCallback(c=>{c.preventDefault(),t.onPointerEnter(c,t.index),n(t.index)},[t.onPointerEnter,t.index]),l=P.useCallback(c=>{c.preventDefault(),t.onPointerLeave(c,t.index),n(null)},[t.onPointerLeave,t.index]);return Ft(Xt.Container,{position:{x:r.point[0],y:r.point[1]},interactive:!0,eventMode:"static",children:[K(Xt.Graphics,{draw:c=>{const u=t.locations[t.index];c.clear(),u.manufactureShare0<u.manufactureShare?c.lineStyle(1,255,.5):c.lineStyle(0,0,.1),c.beginFill(1668818,.25),c.drawCircle(0,0,100*u.manufactureShare),c.endFill()}}),K(Xt.Sprite,{texture:t.cityTexture,width:20,height:20,anchor:{x:.5,y:.5},alpha:t.draggingIndex===t.index?.3:1,interactive:!0,eventMode:"static",onpointerdown:i,onpointerupoutside:o,onmouseup:o,onpointerenter:a,onpointerleave:l,onglobalpointermove:s}),K(Xt.Text,{text:`#${t.index}`,position:{x:0,y:20},anchor:{x:.5,y:.5},style:Wxe}),e===t.index&&K(Xt.Text,{text:r.label,position:{x:-10,y:45},anchor:{x:0,y:.5},style:Xxe})]},t.index)};var nW={},rW={};const iW=dn(Fve),sW=dn(O_e),oW=dn(B_e),aW=dn(U_e),lW=dn(G_e),cW=dn(W_e),uW=dn(Y_e);var nwe=iW,rwe=sW,i4=oW,iwe=aW,swe=lW,owe=cW,awe=uW;const g2={AlphaFilter:rwe.AlphaFilter,BlurFilter:i4.BlurFilter,BlurFilterPass:i4.BlurFilterPass,ColorMatrixFilter:iwe.ColorMatrixFilter,DisplacementFilter:swe.DisplacementFilter,FXAAFilter:owe.FXAAFilter,NoiseFilter:awe.NoiseFilter};Object.entries(g2).forEach(([t,e])=>{Object.defineProperty(g2,t,{get(){return nwe.utils.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e}})});rW.filters=g2;const lwe=dn(axe),cwe=dn(G1e),uwe=dn(S1e),hwe=dn(Axe),dwe=dn(Uve),fwe=dn(exe),pwe=dn(Ixe),gwe=dn(O1e),mwe=dn(Qve),ywe=dn(L1e),vwe=dn(N1e),bwe=dn($xe),_we=dn(jve),xwe=dn(F1e),wwe=dn(j1e),Ewe=dn(Gxe),Twe=dn(Wve),Swe=dn(P1e),Cwe=dn(Vxe);(function(t){var e=rW,n=lwe,r=cwe,i=uwe,s=hwe,o=iW,a=dwe,l=fwe,c=pwe,u=sW,h=oW,f=aW,g=lW,m=cW,y=uW,x=gwe,b=mwe,w=ywe,v=vwe,E=bwe,S=_we,C=xwe,R=wwe,I=Ewe,L=Twe,O=Swe,B=Cwe;t.filters=e.filters,Object.keys(n).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return n[M]}})}),Object.keys(r).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return r[M]}})}),Object.keys(i).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return i[M]}})}),Object.keys(s).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return s[M]}})}),Object.keys(o).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return o[M]}})}),Object.keys(a).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return a[M]}})}),Object.keys(l).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return l[M]}})}),Object.keys(c).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return c[M]}})}),Object.keys(u).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return u[M]}})}),Object.keys(h).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return h[M]}})}),Object.keys(f).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return f[M]}})}),Object.keys(g).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return g[M]}})}),Object.keys(m).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return m[M]}})}),Object.keys(y).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return y[M]}})}),Object.keys(x).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return x[M]}})}),Object.keys(b).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return b[M]}})}),Object.keys(w).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return w[M]}})}),Object.keys(v).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return v[M]}})}),Object.keys(E).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return E[M]}})}),Object.keys(S).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return S[M]}})}),Object.keys(C).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return C[M]}})}),Object.keys(R).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return R[M]}})}),Object.keys(I).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return I[M]}})}),Object.keys(L).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return L[M]}})}),Object.keys(O).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return O[M]}})}),Object.keys(B).forEach(function(M){M!=="default"&&!Object.prototype.hasOwnProperty.call(t,M)&&Object.defineProperty(t,M,{enumerable:!0,get:function(){return B[M]}})})})(nW);var D_=ts&&ts.__assign||function(){return D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},D_.apply(this,arguments)},hW=void 0,Aa=nW,Pwe={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},Awe=function(){function t(e,n){n===void 0&&(n={}),this.cursor=new Aa.Point,this.scale=1,this.graphics=e,n=D_(D_({},Pwe),n),this.dash=n.dash,this.dashSize=this.dash.reduce(function(r,i){return r+i}),this.useTexture=n.useTexture,this.options=n,this.setLineStyle()}return t.prototype.setLineStyle=function(){var e=this.options;if(this.useTexture){var n=t.getTexture(e,this.dashSize);this.graphics.lineTextureStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,texture:n,alignment:e.alignment}),this.activeTexture=n}else this.graphics.lineStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,cap:e.cap,join:e.join,alignment:e.alignment});this.scale=e.scale},t.distance=function(e,n,r,i){return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-n,2))},t.prototype.moveTo=function(e,n){return this.lineLength=0,this.cursor.set(e,n),this.start=new Aa.Point(e,n),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},t.prototype.lineTo=function(e,n,r){typeof this.lineLength===void 0&&this.moveTo(0,0);var i=t.distance(this.cursor.x,this.cursor.y,e,n),s=Math.atan2(n-this.cursor.y,e-this.cursor.x),o=r&&e===this.start.x&&n===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(s),o&&this.dash.length%2===0){var a=Math.min(this.dash[this.dash.length-1],i);this.graphics.lineTo(e-Math.cos(s)*a,n-Math.sin(s)*a),this.graphics.closePath()}else this.graphics.lineTo(e,n);else{for(var l=Math.cos(s),c=Math.sin(s),u=this.cursor.x,h=this.cursor.y,f=this.lineLength%(this.dashSize*this.scale),g=0,m=0,y=0,x=0;x<this.dash.length;x++){var b=this.dash[x]*this.scale;if(f<y+b){g=x,m=f-y;break}else y+=b}for(var w=i;w>0;){var b=this.dash[g]*this.scale-m,v=w>b?b:w;if(o){var E=t.distance(u+l*v,h+c*v,this.start.x,this.start.y);if(E<=v){if(g%2===0){var S=t.distance(u,h,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;u+=l*S,h+=c*S,this.graphics.lineTo(u,h)}break}}u+=l*v,h+=c*v,g%2?this.graphics.moveTo(u,h):this.graphics.lineTo(u,h),w-=v,g++,g=g===this.dash.length?0:g,m=0}}return this.lineLength+=i,this.cursor.set(e,n),this},t.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},t.prototype.drawCircle=function(e,n,r,i,s){i===void 0&&(i=80);var o=Math.PI*2/i,a=0,l;s?(l=new Aa.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),s.apply(l,l),this.moveTo(l[0],l[1])):(l=new Aa.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),this.moveTo(l.x,l.y)),a+=o;for(var c=1;c<i+1;c++){var u=c===i?l:[e+Math.cos(a)*r,n+Math.sin(a)*r];this.lineTo(u[0],u[1]),a+=o}return this},t.prototype.drawEllipse=function(e,n,r,i,s,o){s===void 0&&(s=80);for(var a=Math.PI*2/s,l,c=new Aa.Point,u=0;u<Math.PI*2;u+=a){var h=e-r*Math.sin(u),f=n-i*Math.cos(u);o&&(c.set(h,f),o.apply(c,c),h=c.x,f=c.y),u===0?(this.moveTo(h,f),l={x:h,y:f}):this.lineTo(h,f)}return this.lineTo(l.x,l.y,!0),this},t.prototype.drawPolygon=function(e,n){var r=new Aa.Point;if(typeof e[0]=="number")if(n){r.set(e[0],e[1]),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=2;i<e.length;i+=2)r.set(e[i],e[i+1]),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-2)}else{this.moveTo(e[0],e[1]);for(var i=2;i<e.length;i+=2)this.lineTo(e[i],e[i+1],i===e.length-2)}else if(n){var s=e[0];r.copyFrom(s),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=1;i<e.length;i++){var o=e[i];r.copyFrom(o),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-1)}}else{var s=e[0];this.moveTo(s.x,s.y);for(var i=1;i<e.length;i++){var a=e[i];this.lineTo(a.x,a.y,i===e.length-1)}}return this},t.prototype.drawRect=function(e,n,r,i,s){if(s){var o=new Aa.Point;o.set(e,n),s.apply(o,o),this.moveTo(o.x,o.y),o.set(e+r,n),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e+r,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n),s.apply(o,o),this.lineTo(o.x,o.y,!0)}else this.moveTo(e,n).lineTo(e+r,n).lineTo(e+r,n+i).lineTo(e,n+i).lineTo(e,n,!0);return this},t.prototype.adjustLineStyle=function(e){var n=this.graphics.line;n.matrix=new Aa.Matrix,e&&n.matrix.rotate(e),this.scale!==1&&n.matrix.scale(this.scale,this.scale);var r=-this.lineLength;n.matrix.translate(this.cursor.x+r*Math.cos(e),this.cursor.y+r*Math.sin(e)),this.graphics.lineStyle(n)},t.getTexture=function(e,n){var r=e.dash.toString();if(t.dashTextureCache[r])return t.dashTextureCache[r];var i=document.createElement("canvas");i.width=n,i.height=Math.ceil(e.width);var s=i.getContext("2d");if(!s){console.warn("Did not get context from canvas");return}s.strokeStyle="white",s.globalAlpha=e.alpha,s.lineWidth=e.width;var o=0,a=e.width/2;s.moveTo(o,a);for(var l=0;l<e.dash.length;l+=2)o+=e.dash[l],s.lineTo(o,a),e.dash.length!==l+1&&(o+=e.dash[l+1],s.moveTo(o,a));s.stroke();var c=t.dashTextureCache[r]=Aa.Texture.from(i);return c.baseTexture.scaleMode=Aa.SCALE_MODES.NEAREST,c},t.dashTextureCache={},t}();hW=Awe;const s4=t=>{if(t.focusedIndices.length<=1||!t.adjacencyMatrix||!t.distanceMatrix||!t.predecessorMatrix)return;let e=t.focusedIndices[0];const n=t.focusedIndices[1];let r=e,i=Of(t.locations,e);if(!i)return;const s=[i],o=[];for(let c=0;r!==n&&c<t.locations.length;c++){const u=t.predecessorMatrix[r][n];if(u===-1)break;const h=t.locations[u];h&&(s.push(h),Nl(t.distanceMatrix[e][n])||o.push({text:t.adjacencyMatrix[r][u].toFixed(2),x:(i.point[0]+h.point[0])/2,y:(i.point[1]+h.point[1])/2}),r=u,i=h)}const a=c=>{const u=t.focusedIndices[0],h=t.focusedIndices[1];let f=Of(t.locations,u);if(c.clear(),f&&t.distanceMatrix&&t.predecessorMatrix&&t.predecessorMatrix[u][h]!==-1&&u<t.locations.length&&h<t.locations.length){c.lineStyle({width:2,color:t.color||16755200,alpha:.25,alignment:.5,cap:Jo.ROUND,join:Bi.ROUND}),c.moveTo(f.point[0],f.point[1]),s.forEach(m=>c.lineTo(m.point[0],m.point[1]));const g=new hW(c,{dash:[1,15],width:10,color:t.color||16711680,alpha:.25,alignment:.5,cap:Jo.ROUND,join:Bi.ROUND});g.moveTo(t.locations[u].point[0],t.locations[u].point[1]),g.lineTo(t.locations[h].point[0],t.locations[h].point[1])}},l=t.distanceMatrix[e][n];return Ft(Xt.Container,{children:[K(Xt.Graphics,{draw:a}),Ft(Xt.Container,{children:[o.map((c,u)=>K(Xt.Text,{text:c.text,position:{x:c.x,y:c.y},anchor:{x:.5,y:.5},style:Go({fontSize:11,alpha:1,dropShadow:!0,dropShadowAlpha:.5,dropShadowColor:16776960,fill:16776960})},u)),!Nl(l)&&l>0&&e<t.locations.length&&n<t.locations.length&&K(Xt.Text,{text:t.distanceMatrix[e][n].toFixed(2),position:{x:(t.locations[e].point[0]+t.locations[n].point[0])/2,y:(t.locations[e].point[1]+t.locations[n].point[1])/2},anchor:{x:.5,y:.5},style:Go({fontSize:15,fill:16711680,dropShadow:!1,dropShadowAlpha:.1,dropShadowBlur:1,dropShadowColor:0})})]})]})},Rwe=t=>{const[e,n]=P.useState(null);return K(Xt.Container,{children:K(Xt.Graphics,{draw:r=>{r.clear();const i=100,s=Math.ceil(2e3/i)+1,o=Math.ceil(2e3/i)+1;for(let a=-s;a<s;a++)for(let l=-o;l<o;l++)(a+l)%2===0?r.beginFill(16777215,.001+t.backgroundAlpha):r.beginFill(255,.001+.05*t.backgroundAlpha),r.drawRect(a*i,l*i,i,i),r.endFill()},eventMode:"static",onmousedown:r=>{n([r.clientX,r.clientY])},onmouseup:r=>{e&&r.clientX===e[0]&&r.clientY===e[1]&&(n(null),t.clearSelection())}})})},Iwe=yt.from(AV),Mwe=An.memo(t=>{const e=P.useRef(null),[n,r]=P.useState(0),i=t.sessionState,s=i.locations,o=i.edges,a=t.focusedIndices,l=t.selectedIndices,c=t.draggingIndex!==null?i.locations[t.draggingIndex]:null,u=t.focusedIndices.length>0?Of(i.locations,t.focusedIndices[0]):null,h=t.selectedIndices.length>0?Of(i.locations,t.selectedIndices[0]):null,f=P.useCallback(()=>{r(.5)},[]),g=P.useCallback(()=>{r(0)},[]),m=P.useCallback((D,N)=>{e.current.style.cursor="pointer",c||t.onFocus([N])},[t.onFocus]),y=P.useCallback((D,N)=>{e.current.style.cursor="default",c||t.onUnfocus([N])},[t.onUnfocus]),x=P.useCallback((D,N)=>{},[]),b=P.useCallback((D,N)=>{D.preventDefault(),e.current.style.cursor="default",t.onPointerUp(D.clientX,D.clientY,N)},[t.onPointerUp]),w=P.useCallback(D=>{},[]),v=P.useCallback(()=>{t.onClearSelection()},[t.onClearSelection]),E=u??c??h,S=a.length>0?a[0]:t.draggingIndex&&t.draggingIndex>=0?t.draggingIndex:l.length>0?l[0]:-1,C=P.useCallback(D=>{t.overrideViewportCenter(D)},[t.overrideViewportCenter]),R=P.useCallback(()=>{f(),e.current.style.cursor="grabbing"},[]),I=P.useCallback(()=>{g(),e.current.style.cursor="default"},[t.viewportCenter]),L=P.useCallback(()=>{e.current.style.cursor="default"},[]),O=P.useCallback(D=>{f()},[]),B=P.useCallback(D=>{t.onMoved({x:D.viewport.center.x,y:D.viewport.center.y,zoom:D.viewport.scale.x})},[]),M=P.useCallback(({x:D,y:N,zoom:j})=>{t.onMovedEnd({x:D,y:N,zoom:j})},[]);return K("div",{ref:e,style:{zIndex:100},children:Ft(Xt.Stage,{width:t.width,height:t.height,options:{backgroundColor:q8,backgroundAlpha:.1},children:[Ft(P_e,{pause:t.draggingIndex!==null,boundingBox:t.boundingBox,screenWidth:t.width,screenHeight:t.height,viewportCenter:t.viewportCenter,onSetViewportCenter:C,onDragStart:R,onDragEnd:I,onPinchStart:f,onPinchEnd:g,onSnapStart:f,onSnapEnd:g,onSnapZoomStart:f,onSnapZoomEnd:g,onZoomed:O,onZoomedEnd:g,onMouseUp:L,onMoved:B,onMovedEnd:M,children:[K(Rwe,{backgroundAlpha:n,clearSelection:v}),K(Kxe,{focusedIndices:a,locations:s,width:t.width,height:t.height}),K(Zxe,{selectedIndices:l,focusedIndices:a,locations:s,width:t.width,height:t.height}),a.length===2&&t.matrices.distanceMatrix&&a[0]<t.matrices.distanceMatrix.length&&a[1]<t.matrices.distanceMatrix[a[0]].length&&!Nl(t.matrices.distanceMatrix[a[0]][a[1]])&&K(s4,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:a,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix}),l.length===2&&!Nl(t.matrices.distanceMatrix[l[0]][l[1]])&&K(s4,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:l,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix,color:16724787}),K(Qxe,{edges:o,locations:s,focusedIndices:a,selectedIndices:l}),K(ewe,{locations:s,selectedIndices:l,draggingIndex:t.draggingIndex,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDrag:t.onDrag,width:t.width,height:t.height,cityTexture:Iwe,onPointerEnter:m,onPointerLeave:y,onPointerDown:x,onPointerUp:b,onPointerMove:w})]}),E&&K(qxe,{index:S,city:E,x:140,y:t.height-155})]})})});function dW({width:t,height:e,sessionState:n,uiState:r,matrices:i,overrideViewportCenter:s,onDragStart:o,onDragEnd:a,onDrag:l,onFocus:c,onUnfocus:u,onPointerUp:h,onClearSelection:f,onMovedEnd:g,onMoved:m}){return K(Mwe,{width:t,height:e,boundingBox:{...X8(n.locations),paddingMarginRatio:K8},onDragStart:o,onDrag:l,onMoved:m,onMovedEnd:g,onDragEnd:a,onFocus:c,onUnfocus:u,onPointerUp:h,onClearSelection:f,draggingIndex:r.draggingIndex,sessionState:n,viewportCenter:r.viewportCenter,overrideViewportCenter:s,selectedIndices:r.selectedIndices,focusedIndices:r.focusedIndices,matrices:i})}const Owe=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=L0(),[s,o]=iI(ah);return P.useEffect(()=>{o(a=>{const l=kf[ci.Graph][0],c=vI({parameterSet:l,locations:[],edges:[],locationSerialNumber:0},[],4);return console.log(c),{...a,...c}})},[]),K(xM,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(230,255,230,0.6)",backgroundPanel:a=>K(dW,{...a})})};function N_(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const uO=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),o4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);o4&&parseFloat(o4[1]);const Lwe="3.4.14";function $l(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const ub=typeof process!="object"||String(process)!=="[object process]"||process.browser,kwe=typeof window<"u"&&typeof window.orientation<"u",a4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);a4&&parseFloat(a4[1]);function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function Dwe(t,e){if(m0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(m0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nwe(t){var e=Dwe(t,"string");return m0(e)=="symbol"?e:String(e)}function F(t,e,n){return e=Nwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Fwe{constructor(e,n){F(this,"name",void 0),F(this,"workerThread",void 0),F(this,"isRunning",!0),F(this,"result",void 0),F(this,"_resolve",()=>{}),F(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){$l(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){$l(this.isRunning),this.isRunning=!1,this._reject(e)}}let ZS=class{terminate(){}};const QS=new Map;function Bwe(t){$l(t.source&&!t.url||!t.source&&t.url);let e=QS.get(t.source||t.url);return e||(t.url&&(e=zwe(t.url),QS.set(t.url,e)),t.source&&(e=fW(t.source),QS.set(t.source,e))),$l(e),e}function zwe(t){if(!t.startsWith("http"))return t;const e=Uwe(t);return fW(e)}function fW(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Uwe(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function pW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(l4(t))r.add(t);else if(l4(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)pW(t[i],e,r)}}return n===void 0?Array.from(r):[]}function l4(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const JS=()=>{};class m2{static isSupported(){return typeof Worker<"u"&&ub||typeof ZS<"u"&&!ub}constructor(e){F(this,"name",void 0),F(this,"source",void 0),F(this,"url",void 0),F(this,"terminated",!1),F(this,"worker",void 0),F(this,"onMessage",void 0),F(this,"onError",void 0),F(this,"_loadableURL","");const{name:n,source:r,url:i}=e;$l(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=JS,this.onError=s=>console.log(s),this.worker=ub?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=JS,this.onError=JS,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||pW(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=Bwe({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new ZS(r,{eval:!1})}else if(this.source)e=new ZS(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}let $we=class{static isSupported(){return m2.isSupported()}constructor(e){F(this,"name","unnamed"),F(this,"source",void 0),F(this,"url",void 0),F(this,"maxConcurrency",1),F(this,"maxMobileConcurrency",1),F(this,"onDebug",()=>{}),F(this,"reuseWorkers",!0),F(this,"props",{}),F(this,"jobQueue",[]),F(this,"idleQueue",[]),F(this,"count",0),F(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new Fwe(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new m2({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return kwe?this.maxMobileConcurrency:this.maxConcurrency}};const jwe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Tl{static isSupported(){return m2.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Tl._workerFarm=Tl._workerFarm||new Tl({}),Tl._workerFarm.setProps(e),Tl._workerFarm}constructor(e){F(this,"props",void 0),F(this,"workerPools",new Map),this.props={...jwe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new $we({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}F(Tl,"_workerFarm",void 0);const Gwe="latest";function Hwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=Gwe);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return $l(i),i}function Vwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lwe;$l(t,"no worker provided");const n=t.version;return!(!e||!n)}function Wwe(t,e){return!Tl.isSupported()||!ub&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function Xwe(t,e,n,r,i){const s=t.id,o=Hwe(t,n),l=Tl.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",Ywe.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function Ywe(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function qwe(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function Kwe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function Zwe(t){const e=[];for await(const n of t)e.push(n);return Kwe(...e)}let Qwe="";const c4={};function Jwe(t){for(const e in c4)if(t.startsWith(e)){const n=c4[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Qwe).concat(t)),t}function eEe(t){return t&&typeof t=="object"&&t.isBuffer}function gW(t){if(eEe(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function mW(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function tEe(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const nEe=t=>typeof t=="boolean",_m=t=>typeof t=="function",oy=t=>t!==null&&typeof t=="object",u4=t=>oy(t)&&t.constructor==={}.constructor,rEe=t=>t&&typeof t[Symbol.iterator]=="function",iEe=t=>t&&typeof t[Symbol.asyncIterator]=="function",Bh=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,zh=t=>typeof Blob<"u"&&t instanceof Blob,sEe=t=>t&&typeof t=="object"&&t.isBuffer,oEe=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||oy(t)&&_m(t.tee)&&_m(t.cancel)&&_m(t.getReader),aEe=t=>oy(t)&&_m(t.read)&&_m(t.pipe)&&nEe(t.readable),yW=t=>oEe(t)||aEe(t),lEe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,cEe=/^([-\w.]+\/[-\w.+]+)/;function uEe(t){const e=cEe.exec(t);return e?e[1]:t}function h4(t){const e=lEe.exec(t);return e?e[1]:""}const vW=/\?.*/;function hEe(t){const e=t.match(vW);return e&&e[0]}function hO(t){return t.replace(vW,"")}function Xw(t){return Bh(t)?t.url:zh(t)?t.name||"":typeof t=="string"?t:""}function dO(t){if(Bh(t)){const e=t,n=e.headers.get("content-type")||"",r=hO(e.url);return uEe(n)||h4(r)}return zh(t)?t.type||"":typeof t=="string"?h4(t):""}function dEe(t){return Bh(t)?t.headers["content-length"]||-1:zh(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function bW(t){if(Bh(t))return t;const e={},n=dEe(t);n>=0&&(e["content-length"]=String(n));const r=Xw(t),i=dO(t);i&&(e["content-type"]=i);const s=await gEe(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function fEe(t){if(!t.ok){const e=await pEe(t);throw new Error(e)}}async function pEe(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function gEe(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=mEe(n);return"data:base64,".concat(r)}return null}function mEe(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function d4(t,e){if(typeof t=="string"){t=Jwe(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await bW(t)}function yEe(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function ay(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||yEe()}const v1=globalThis.window||globalThis.self||globalThis.global,vg=globalThis.process||{},_W=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";ay();function vEe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let bEe=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=vEe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function _Ee(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function xEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function eC(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let F_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(F_||(F_={}));const wEe=10;function f4(t){return typeof t!="string"?t:(t=t.toUpperCase(),F_[t]||F_.WHITE)}function EEe(t,e,n){if(!ay&&typeof t=="string"){if(e){const r=f4(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=f4(n);t="\x1B[".concat(r+wEe,"m").concat(t,"\x1B[49m")}}return t}function TEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function B_(t,e){if(!t)throw new Error(e||"Assertion failed")}function xd(){let t;if(ay()&&v1.performance){var e,n;t=v1==null||(e=v1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in vg){var r;const i=vg==null||(r=vg.hrtime)===null||r===void 0?void 0:r.call(vg);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const wd={debug:ay()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},SEe={enabled:!0,level:0};function co(){}const p4={},g4={once:!0};let fO=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=_W,this._startTs=xd(),this._deltaTs=xd(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new bEe("__probe-".concat(this.id,"__"),SEe),this.timeStamp("".concat(this.id," started")),TEe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((xd()-this._startTs).toPrecision(10))}getDelta(){return Number((xd()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){B_(e,n)}warn(e){return this._getLogFunction(0,e,wd.warn,arguments,g4)}error(e){return this._getLogFunction(0,e,wd.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,wd.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,wd.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,wd.debug||wd.info,arguments,g4)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||co,r&&[r],{tag:REe(n)}):co}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?ay()?AEe({image:i,message:s,scale:o}):PEe():co}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||co)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=m4({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||co)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=xW(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=m4({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,B_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=xd();const o=s.tag||s.message;if(s.once&&o)if(!p4[o])p4[o]=xd();else return co;return n=CEe(this.id,s.message,s),r.bind(console,n,...s.args)}return co}};fO.VERSION=_W;function xW(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return B_(Number.isFinite(e)&&e>=0),e}function m4(t){const{logLevel:e,message:n}=t;t.logLevel=xW(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return B_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function CEe(t,e,n){if(typeof e=="string"){const r=n.time?xEe(_Ee(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=EEe(e,n.color,n.background)}return e}function PEe(t){return console.warn("removed"),co}function AEe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=eC(s,n,r);console.log(...o)},s.src=e,co}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...eC(e,n,r)),co;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...eC(s,n,r)),s.src=e.toDataURL(),co}return co}function REe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const y4=new fO({id:"loaders.gl"});class IEe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class MEe{constructor(){F(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const wW={fetch:null,mimeType:void 0,nothrow:!1,log:new MEe,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:uO,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},OEe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function EW(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const TW=()=>{const t=EW();return t.globalOptions=t.globalOptions||{...wW},t.globalOptions};function LEe(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],kEe(t,n),NEe(e,t,r)}function kEe(t,e){v4(t,null,wW,OEe,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};v4(r,n.id,i,s,e)}}function v4(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&oy(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)y4.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const h=DEe(a,i);y4.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}}function DEe(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function NEe(t,e,n){const i={...t.options||{}};return FEe(i,n),i.log===null&&(i.log=new IEe),b4(i,TW()),b4(i,e),i}function b4(t,e){for(const n in e)if(n in e){const r=e[n];u4(r)&&u4(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function FEe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function pO(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function gO(t){var e,n;N_(t,"null loader"),N_(pO(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const SW=()=>{const t=EW();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function BEe(t){const e=SW();t=Array.isArray(t)?t:[t];for(const n of t){const r=gO(n);e.find(i=>r===i)||e.unshift(r)}}function zEe(){return SW()}const UEe=new fO({id:"loaders.gl"}),$Ee=/\.([^.]+)$/;async function jEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!CW(t))return null;let i=_4(t,e,{...n,nothrow:!0},r);if(i)return i;if(zh(t)&&(t=await t.slice(0,10).arrayBuffer(),i=_4(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(PW(t));return i}function _4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!CW(t))return null;if(e&&!Array.isArray(e))return gO(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...zEe()),HEe(i);const s=GEe(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(PW(t));return s}function GEe(t,e,n,r){const i=Xw(t),s=dO(t),o=hO(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=tC(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||VEe(e,o),l=l||(a?"matched url ".concat(o):""),a=a||tC(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||XEe(e,t),l=l||(a?"matched initial data ".concat(AW(t)):""),a=a||tC(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;UEe.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function CW(t){return!(t instanceof Response&&t.status===204)}function PW(t){const e=Xw(t),n=dO(t);let r="No valid loader found (";r+=e?"".concat(mW(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?AW(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function HEe(t){for(const e of t)gO(e)}function VEe(t,e){const n=e&&$Ee.exec(e),r=n&&n[1];return r?WEe(t,r):null}function WEe(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function tC(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function XEe(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(YEe(e,n))return n}else if(ArrayBuffer.isView(e)){if(x4(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&x4(e,0,n))return n;return null}function YEe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function x4(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>qEe(t,e,n,i))}function qEe(t,e,n,r){if(r instanceof ArrayBuffer)return qwe(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=y2(t,e,r.length);return r===i;default:return!1}}function AW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?y2(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?y2(t,0,e):""}function y2(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const KEe=256*1024;function*ZEe(t,e){const n=(e==null?void 0:e.chunkSize)||KEe;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const QEe=256*1024;function JEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=QEe}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const eTe=1024*1024;async function*tTe(t,e){const n=(e==null?void 0:e.chunkSize)||eTe;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function w4(t,e){return uO?nTe(t,e):rTe(t)}async function*nTe(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield gW(o)}}catch{n.releaseLock()}}async function*rTe(t,e){for await(const n of t)yield gW(n)}function iTe(t,e){if(typeof t=="string")return ZEe(t,e);if(t instanceof ArrayBuffer)return JEe(t,e);if(zh(t))return tTe(t,e);if(yW(t))return w4(t,e);if(Bh(t))return w4(t.body,e);throw new Error("makeIterator")}const RW="Cannot convert supplied data type";function sTe(t,e,n){if(e.text&&typeof t=="string")return t;if(sEe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(RW)}async function oTe(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return sTe(t,e);if(zh(t)&&(t=await bW(t)),Bh(t)){const i=t;return await fEe(i),e.binary?await i.arrayBuffer():await i.text()}if(yW(t)&&(t=iTe(t,n)),rEe(t)||iEe(t))return Zwe(t);throw new Error(RW)}function IW(t,e){const n=TW(),r=t||n;return typeof r.fetch=="function"?r.fetch:oy(r.fetch)?i=>d4(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:d4}function aTe(t,e,n){if(n)return n;const r={fetch:IW(e,t),...t};if(r.url){const i=hO(r.url);r.baseUrl=i,r.queryString=hEe(r.url),r.filename=mW(i),r.baseUrl=tEe(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function lTe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function mO(t,e,n,r){$l(!r||typeof r=="object"),e&&!Array.isArray(e)&&!pO(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=Xw(t),o=lTe(e,r),a=await jEe(t,o,n);return a?(n=LEe(n,a,o,i),r=aTe({url:i,parse:mO,loaders:o},n,r||null),await cTe(a,t,n,r)):null}async function cTe(t,e,n,r){if(Vwe(t),Bh(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,h=Object.fromEntries(i.headers.entries());r.response={headers:h,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await oTe(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(Wwe(t,n))return await Xwe(t,e,n,r,mO);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw $l(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function v2(t,e,n,r){!Array.isArray(e)&&!pO(e)&&(n=e,e=void 0);const i=IW(n);let s=t;return typeof t=="string"&&(s=await i(t)),zh(t)&&(s=await i(t)),await mO(s,e,n)}const uTe="3.4.14",{_parseImageNode:hTe}=globalThis,b2=typeof Image<"u",_2=typeof ImageBitmap<"u",dTe=!!hTe,x2=uO?!0:dTe;function fTe(t){switch(t){case"auto":return _2||b2||x2;case"imagebitmap":return _2;case"image":return b2;case"data":return x2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function pTe(){if(_2)return"imagebitmap";if(b2)return"image";if(x2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function gTe(t){const e=yTe(t);if(!e)throw new Error("Not an image");return e}function mTe(t){switch(gTe(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function yTe(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const vTe=/^data:image\/svg\+xml/,bTe=/\.svg((\?|#).*)?$/;function yO(t){return t&&(vTe.test(t)||bTe.test(t))}function _Te(t,e){if(yO(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return MW(t,e)}function MW(t,e){if(yO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function OW(t,e,n){const r=_Te(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await xTe(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function xTe(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const wTe={};let E4=!0;async function ETe(t,e,n){let r;yO(n)?r=await OW(t,e,n):r=MW(t,n);const i=e&&e.imagebitmap;return await TTe(r,i)}async function TTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((STe(e)||!E4)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),E4=!1}return await createImageBitmap(t)}function STe(t){for(const e in t||wTe)return!1;return!0}function CTe(t){return!ITe(t,"ftyp",4)||!(t[8]&96)?null:PTe(t)}function PTe(t){switch(ATe(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function ATe(t,e,n){return String.fromCharCode(...t.slice(e,n))}function RTe(t){return[...t].map(e=>e.charCodeAt(0))}function ITe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=RTe(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const ja=!1,xm=!0;function LW(t){const e=ly(t);return OTe(e)||DTe(e)||LTe(e)||kTe(e)||MTe(e)}function MTe(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=CTe(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function OTe(t){const e=ly(t);return e.byteLength>=24&&e.getUint32(0,ja)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ja),height:e.getUint32(20,ja)}:null}function LTe(t){const e=ly(t);return e.byteLength>=10&&e.getUint32(0,ja)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,xm),height:e.getUint16(8,xm)}:null}function kTe(t){const e=ly(t);return e.byteLength>=14&&e.getUint16(0,ja)===16973&&e.getUint32(2,xm)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,xm),height:e.getUint32(22,xm)}:null}function DTe(t){const e=ly(t);if(!(e.byteLength>=3&&e.getUint16(0,ja)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=NTe();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,ja);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ja),width:e.getUint16(s+7,ja)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,ja)}return null}function NTe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function ly(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function FTe(t,e){const{mimeType:n}=LW(t)||{},r=globalThis._parseImageNode;return N_(r),await r(t,n)}async function BTe(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=zTe(i);let a;switch(o){case"imagebitmap":a=await ETe(t,e,s);break;case"image":a=await OW(t,e,s);break;case"data":a=await FTe(t);break;default:N_(!1)}return i==="data"&&(a=mTe(a)),a}function zTe(t){switch(t){case"auto":case"data":return pTe();default:return fTe(t),t}}const UTe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],$Te=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],jTe={image:{type:"auto",decode:!0}},GTe={id:"image",module:"images",name:"Images",version:uTe,mimeTypes:$Te,extensions:UTe,parse:BTe,tests:[t=>!!LW(new DataView(t))],options:jTe};function kW(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Kl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||kW()}const hb={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},b1=hb.window||hb.self||hb.global,bg=hb.process||{},DW=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Kl();const nC=globalThis;function NW(t){if(!t&&!Kl())return"Node";if(kW(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":nC.chrome?"Chrome":nC.safari?"Safari":nC.mozInnerScreenX?"Firefox":"Unknown"}function HTe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class VTe{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";F(this,"storage",void 0),F(this,"id",void 0),F(this,"config",void 0),this.storage=HTe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function WTe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function XTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function rC(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let z_;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(z_||(z_={}));function T4(t){return typeof t=="string"?z_[t.toUpperCase()]||z_.WHITE:t}function YTe(t,e,n){return!Kl&&typeof t=="string"&&(e&&(e=T4(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=T4(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function qTe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function U_(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ed(){let t;if(Kl&&"performance"in b1){var e,n;t=b1==null||(e=b1.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in bg){var r;const i=bg==null||(r=bg.hrtime)===null||r===void 0?void 0:r.call(bg);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Td={debug:Kl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},KTe={enabled:!0,level:0};function uo(){}const S4={},C4={once:!0};class vO{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};F(this,"id",void 0),F(this,"VERSION",DW),F(this,"_startTs",Ed()),F(this,"_deltaTs",Ed()),F(this,"_storage",void 0),F(this,"userData",{}),F(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new VTe("__probe-".concat(this.id,"__"),KTe),this.timeStamp("".concat(this.id," started")),qTe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ed()-this._startTs).toPrecision(10))}getDelta(){return Number((Ed()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){U_(e,n)}warn(e){return this._getLogFunction(0,e,Td.warn,arguments,C4)}error(e){return this._getLogFunction(0,e,Td.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Td.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Td.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Td.debug||Td.info,arguments,C4)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||uo,r&&[r],{tag:eSe(n)}):uo}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Kl?JTe({image:i,message:s,scale:o}):QTe():uo}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||uo)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=P4({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||uo)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=FW(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=P4({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,U_(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Ed();const o=s.tag||s.message;if(s.once)if(!S4[o])S4[o]=Ed();else return uo;return n=ZTe(this.id,s.message,s),r.bind(console,n,...s.args)}return uo}}F(vO,"VERSION",DW);function FW(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return U_(Number.isFinite(e)&&e>=0),e}function P4(t){const{logLevel:e,message:n}=t;t.logLevel=FW(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return U_(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function ZTe(t,e,n){if(typeof e=="string"){const r=n.time?XTe(WTe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=YTe(e,n.color,n.background)}return e}function QTe(t){return console.warn("removed"),uo}function JTe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=rC(s,n,r);console.log(...o)},s.src=e,uo}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...rC(e,n,r)),uo;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...rC(s,n,r)),s.src=e.toDataURL(),uo}return uo}function eSe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const wn=new vO({id:"deck"});let w2={};function tSe(t){w2=t}function Ti(t,e,n,r){wn.level>0&&w2[t]&&w2[t].call(null,e,n,r)}function nSe(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const rSe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:nSe,parseTextSync:JSON.parse};function iSe(){const t="8.9.34",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(wn.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:wn,_registerLoggers:tSe},BEe([rSe,[GTe,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const sSe=iSe(),rn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(rn,"IDENTITY",{get:()=>(wn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Va={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},y0={common:0,meters:1,pixels:2},A4={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},ct=new vO({id:"luma.gl"});function zi(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const oSe="Invalid WebGLRenderingContext",aSe="Requires WebGL2";function Yw(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function qt(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function lSe(t){return qt(t)?t:null}function qw(t){return zi(Yw(t),oSe),t}function Ui(t){return zi(qt(t),aSe),t}const Wg={};function cSe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function uSe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function hSe(t,e){Wg[t]=!0,e!==void 0&&cSe(e)}function dSe(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Wg[r]=!0);while(r!==0);for(r in Wg)if(Wg[r])return delete Wg[r],parseInt(r,10);return 0}}const cy=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};cy.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};cy.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Uh=function(e){const n=this;this.gl=e,dSe(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{uSe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Uh.prototype.VERTEX_ARRAY_BINDING_OES=34229;Uh.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new cy(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Uh.prototype.createVertexArrayOES=function(){const e=new cy(this);return this.vertexArrayObjects.push(e),e};Uh.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Uh.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof cy&&e.hasBeenBound&&e.ext===this)};Uh.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){hSe(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let h=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function fSe(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Uh(this)),this.__OESVertexArrayObject))}}const R4="OES_element_index",I4="WEBGL_draw_buffers",pSe="EXT_disjoint_timer_query",gSe="EXT_disjoint_timer_query_webgl2",mSe="EXT_texture_filter_anisotropic",M4="WEBGL_debug_renderer_info",ySe=35723,vSe=4352,bSe=36795,_Se=34047,xSe=37445,wSe=37446,Sn=t=>qt(t)?void 0:0,ESe={3074:t=>qt(t)?void 0:36064,[ySe]:t=>qt(t)?void 0:vSe,35977:Sn,32937:Sn,[bSe]:(t,e)=>{const n=qt(t)?t.getExtension(gSe):t.getExtension(pSe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[xSe]:(t,e)=>{const n=t.getExtension(M4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[wSe]:(t,e)=>{const n=t.getExtension(M4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[_Se]:(t,e)=>{const n=t.luma.extensions[mSe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Sn,35071:Sn,37447:Sn,36063:(t,e)=>{if(!qt(t)){const n=t.getExtension(I4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Sn,35374:Sn,35377:Sn,34852:t=>{if(!qt(t)){const e=t.getExtension(I4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(R4)?2147483647:65535,33001:t=>t.getExtension(R4)?16777216:65535,33e3:t=>16777216,37157:Sn,35373:Sn,35657:Sn,36183:Sn,37137:Sn,34045:Sn,35978:Sn,35979:Sn,35968:Sn,35376:Sn,35375:Sn,35659:Sn,37154:Sn,35371:Sn,35658:Sn,35076:Sn,35077:Sn,35380:Sn};function TSe(t,e,n){const r=ESe[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const SSe="OES_vertex_array_object",BW="ANGLE_instanced_arrays",CSe="WEBGL_draw_buffers",PSe="EXT_disjoint_timer_query",ASe="EXT_texture_filter_anisotropic",RSe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function ISe(t,e){return{webgl2:qt(t),ext:t.getExtension(e)}}const zW={[SSe]:{meta:{suffix:"OES"},createVertexArray:()=>{zi(!1,RSe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[BW]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){zi(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[CSe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{zi(!1)}},[PSe]:{meta:{suffix:"EXT"},createQuery:()=>{zi(!1)},deleteQuery:()=>{zi(!1)},beginQuery:()=>{zi(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},iC={readBuffer:(t,e,n)=>{qt(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=ISe(t,BW);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!qt(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!qt(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[ASe];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:TSe,hint(t,e,n,r){return e(n,r)}};function MSe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(fSe(t),OSe(t),kSe(t,zW),LSe(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=MSe;function OSe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function LSe(t,e){let{target:n,target2:r}=e;Object.keys(iC).forEach(i=>{if(typeof iC[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=iC[i].bind(null,t,s);n[i]=o,r[i]=o}})}function kSe(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&DSe(t,{extension:n,target:t.luma,target2:t})}function DSe(t,e){let{extension:n,target:r,target2:i}=e;const s=zW[n];zi(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let h=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?h=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(h=s[c].bind(r))),h&&(r[c]=h,i[c]=h)}}const bO={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},fc=(t,e,n)=>e?t.enable(n):t.disable(n),O4=(t,e,n)=>t.hint(n,e),bs=(t,e,n)=>t.pixelStorei(n,e),NSe=(t,e)=>{const n=qt(t)?36009:36160;return t.bindFramebuffer(n,e)},FSe=(t,e)=>t.bindFramebuffer(36008,e);function _g(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const BSe={3042:fc,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:fc,2885:(t,e)=>t.cullFace(e),2929:fc,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:fc,35723:O4,36006:NSe,2886:(t,e)=>t.frontFace(e),33170:O4,2849:(t,e)=>t.lineWidth(e),32823:fc,32824:"polygonOffset",10752:"polygonOffset",35977:fc,32938:"sampleCoverage",32939:"sampleCoverage",3089:fc,3088:(t,e)=>t.scissor(...e),2960:fc,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:bs,3317:bs,37440:bs,37441:bs,37443:bs,3330:bs,3332:bs,3331:bs,36010:FSe,3314:bs,32878:bs,3316:bs,3315:bs,32877:bs,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=_g(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=_g(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=_g(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=_g(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=_g(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function er(t,e,n){return e[t]!==void 0?e[t]:n[t]}const zSe={blendEquation:(t,e,n)=>t.blendEquationSeparate(er(32777,e,n),er(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(er(32969,e,n),er(32968,e,n),er(32971,e,n),er(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(er(32824,e,n),er(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(er(32938,e,n),er(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,er(2962,e,n),er(2967,e,n),er(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,er(34816,e,n),er(36003,e,n),er(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,er(2964,e,n),er(2965,e,n),er(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,er(34817,e,n),er(34818,e,n),er(34819,e,n))},L4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Ra=(t,e)=>t.isEnabled(e),k4={3042:Ra,2884:Ra,2929:Ra,3024:Ra,32823:Ra,32926:Ra,32928:Ra,3089:Ra,2960:Ra,35977:Ra};function UW(t){for(const e in t)return!1;return!0}function USe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function D4(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function $Se(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function jSe(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class GSe{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?VSe(e):Object.assign({},bO),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){zi(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];jl(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){zi(s!==void 0);const o=e[s],a=this.cache[s];USe(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function $W(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(zi(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new GSe(t,{copyState:r}),jSe(t);for(const s in L4){const o=L4[s];$Se(t,s,o)}D4(t,"getParameter"),D4(t,"isEnabled")}return t.state.enable=n,t}function HSe(t){t.state||$W(t,{copyState:!1}),t.state.push()}function N4(t){zi(t.state),t.state.pop()}function jl(t,e){if(zi(Yw(t),"setParameters requires a WebGL context"),UW(e))return;const n={};for(const i in e){const s=Number(i),o=BSe[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=zSe[i];s(t,e,r)}}function VSe(t,e){if(e=e||bO,typeof e=="number"){const i=e,s=k4[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=k4[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function WSe(t){jl(t,bO)}function la(t,e,n){if(UW(e))return n(t);const{nocatch:r=!0}=e;HSe(t),jl(t,e);let i;if(r)i=n(t),N4(t);else try{i=n(t)}finally{N4(t)}return i}function qf(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function sC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=qf(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return YSe(e,r,i,s,n)}function XSe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function YSe(t,e,n,r,i){const s=F4(t[0],e,n);let o=B4(t[1],e,r,i),a=F4(t[0]+1,e,n);const l=a===n-1?a:a-1;a=B4(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function F4(t,e,n){return Math.min(Math.round(t*e),n-1)}function B4(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const _O=Kl(),qSe=_O&&typeof document<"u",jW={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function GW(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zi(_O,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},jW,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=JSe({canvas:s,width:e,height:n,onError:r});return i=QSe(o,t),i?(i=xO(i,t),eCe(i),i):null}function xO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||tCe(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},jW,e);const{manageState:n,debug:r}=e;return n&&$W(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return ct.log(1,...s)()}}),_O&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),ct.level=Math.max(ct.level,1)):ct.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function KSe(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function ZSe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=XSe(e.useDevicePixels);nCe(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function QSe(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function JSe(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(qSe&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function eCe(t){const e=qt(t)?"WebGL2":"WebGL1",n=KSe(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";ct.info(1,"".concat(e).concat(i," context ").concat(r))()}function tCe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function nCe(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(ct.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(ct.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function z4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class U4{constructor(e,n){F(this,"name",void 0),F(this,"type",void 0),F(this,"sampleSize",1),F(this,"time",void 0),F(this,"count",void 0),F(this,"samples",void 0),F(this,"lastTiming",void 0),F(this,"lastSampleTime",void 0),F(this,"lastSampleCount",void 0),F(this,"_count",0),F(this,"_time",0),F(this,"_samples",0),F(this,"_startTime",0),F(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=z4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(z4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class wO{constructor(e){F(this,"id",void 0),F(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof U4?this.stats[n]=e:this.stats[n]=new U4(n,r)),this.stats[n]}}const wm="8.5.21",rCe="set luma.log.level=1 (or higher) to trace rendering";class iCe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new wO({id:e})),this.stats.get(e)}}const th=new iCe;if(globalThis.luma&&globalThis.luma.VERSION!==wm)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(wm));globalThis.luma||(Kl()&&ct.log(1,"luma.gl ".concat(wm," - ").concat(rCe))(),globalThis.luma=globalThis.luma||{VERSION:wm,version:wm,log:ct,stats:th,globals:{modules:{},nodeIO:{}}});function sCe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function oCe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function Ze(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function oC(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return Ze(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Kc(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const aC={};function ou(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";aC[t]=aC[t]||1;const e=aC[t]++;return"".concat(t,"-").concat(e)}function $4(t){return Ze(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Kf(t){let e=!0;for(const n in t){e=!1;break}return e}function HW(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw ct.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Sd="Resource subclass must define virtual methods";let Zl=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qw(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||ou(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=oC(this.gl,e),Ze(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=qt(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=qt(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=r?Kc(this.gl,l):l;o[h]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[h]=Kc(this.gl,o[h]))}}return o}setParameter(e,n){e=oC(this.gl,e),Ze(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=qt(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=oC(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return HW(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Sd)}_deleteHandle(){throw new Error(Sd)}_bindHandle(e){throw new Error(Sd)}_getOptsFromHandle(){throw new Error(Sd)}_getParameter(e,n){throw new Error(Sd)}_setParameter(e,n){throw new Error(Sd)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=th.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];th.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=th.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=th.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const aCe="Failed to deduce GL constant from typed array";function E2(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(aCe)}}function v0(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function lCe(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function cCe(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function T2(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";ct.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];ct.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];ct.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const uCe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},hCe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ps{static getBytesPerElement(e){return v0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Ze(e.size),v0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Ps(uCe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ps.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ps.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=T2("Accessor",e,hCe),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const j4=10,VW={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},dCe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:VW},fCe={removedProps:VW};class xn extends Zl{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Ps.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Ps.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=T2("Buffer",e,dCe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=T2("Buffer",e,fCe),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Ps(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;Ze(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Ui(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return Ui(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ui(this.gl);const s=v0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,Ze(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(Ze(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(j4,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;Ze(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,j4),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=E2(e);return Ze(s),this.setAccessor(new Ps(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Ze(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=v0(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Ps(this.accessor,{type:E2(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return ct.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ct.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ct.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ct.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ps(this.accessor,e),this}}const EO={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},WW={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},XW={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function pCe(t,e){const n=EO[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=qt(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function gCe(t,e){const n=EO[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const mCe=[9729,9728],G4=globalThis.WebGLBuffer||function(){};class Zf extends Zl{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&pCe(e,r),s=s&&(!i||gCe(e,r))),s}constructor(e,n){const{id:r=ou("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(w=>this.initialize(Object.assign({},e,{pixels:w,data:w}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:h,height:f,dataFormat:g,type:m,compressed:y=!1,mipmaps:x=!0}=e;const{depth:b=0}=e;return{width:h,height:f,compressed:y,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:y,data:n,width:h,height:f}),this.width=h,this.height=f,this.depth=b,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),x&&this._isNPOT()&&(ct.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),x=!1,this._updateForNPOT(l)),this.mipmaps=x,this.setImageData({data:n,width:h,height:f,depth:b,format:s,type:m,dataFormat:g,border:o,mipmaps:x,parameters:c,compressed:y}),x&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(ct.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),la(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;c||(c=r),{type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:f});const{gl:y}=this;y.bindTexture(this.target,this.handle);let x=null;({data:c,dataType:x}=this._getDataType({data:c,compressed:m}));let b,w=0;if(la(this.gl,l,()=>{switch(x){case"null":y.texImage2D(n,i,s,h,f,o,g,u,c);break;case"typed-array":y.texImage2D(n,i,s,h,f,o,g,u,c,a);break;case"buffer":b=Ui(y),b.bindBuffer(35052,c.handle||c),b.texImage2D(n,i,s,h,f,o,g,u,a),b.bindBuffer(35052,null);break;case"browser-object":qt(y)?y.texImage2D(n,i,s,h,f,o,g,u,c):y.texImage2D(n,i,s,g,u,c);break;case"compressed":for(const[v,E]of c.entries())y.compressedTexImage2D(n,v,E.format,E.width,E.height,o,E.data),w+=E.levelSize;break;default:Ze(!1,"Unknown image data type")}}),x==="compressed")this._trackAllocatedMemory(w,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const v=WW[this.dataFormat]||4,E=XW[this.type]||1;this._trackAllocatedMemory(this.width*this.height*v*E,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:y=this.border,parameters:x={}}=e;if({type:h,dataFormat:f,compressed:g,width:a,height:l}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:i,width:a,height:l}),Ze(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const b=i;i=b.data,a=b.shape[0],l=b.shape[1]}i instanceof xn&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),la(this.gl,x,()=>{if(g)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,f,h,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,f,h,i,m);else if(i instanceof G4){const b=Ui(this.gl);b.bindBuffer(35052,i),b.texSubImage2D(n,c,s,o,a,l,f,h,m),b.bindBuffer(35052,null)}else qt(this.gl)?Ui(this.gl).texSubImage2D(n,c,s,o,a,l,f,h,i):this.gl.texSubImage2D(n,c,s,o,f,h,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ct.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof xn?{data:n.handle,dataType:"buffer"}:n instanceof G4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=EO[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},Ze(i,"Could not deduced texture size"),Ze(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),Ze(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Ze(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return qt(this.gl)||!this.width||!this.height?!1:!$4(this.width)||!$4(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:mCe.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let yCe="";function vCe(t,e){return Ze(typeof t=="string"),t=yCe+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class ha extends Zf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Zf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qw(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:vCe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const S2=[34069,34070,34071,34072,34073,34074];class YW extends Zf{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qw(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,h=await Promise.all(S2.map(f=>{const g=u[f];return Promise.all(Array.isArray(g)?g:[g])}));this.bind(),S2.forEach((f,g)=>{h[g].length>1&&this.opts.mipmaps!==!1&&ct.warn("".concat(this.id," has mipmap and multiple LODs."))(),h[g].forEach((m,y)=>{n&&r?c.texImage2D(f,y,a,n,r,o,a,l,m):c.texImage2D(f,y,a,a,l,m)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,h=s||o;return this.bind(),h instanceof Promise?h.then(f=>this.setImageDataForFace(Object.assign({},e,{face:n,data:f,pixels:f}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,h):u.texImage2D(n,0,l,l,c,h),this}}YW.FACES=S2;class bCe extends Zf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ui(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:h,parameters:f={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),la(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,h),h instanceof xn&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),h&&h.byteLength)this._trackAllocatedMemory(h.byteLength,"Texture");else{const g=WW[this.dataFormat]||4,m=XW[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*g*m,"Texture")}return this.loaded=!0,this}}const Ou="EXT_color_buffer_float",H4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ou,bpp:2},33327:{gl2:Ou,bpp:4},34842:{gl2:Ou,bpp:8},33326:{gl2:Ou,bpp:4},33328:{gl2:Ou,bpp:8},34836:{gl2:Ou,bpp:16},35898:{gl2:Ou,bpp:4}};function _Ce(t,e,n){const r=n[e];if(!r)return!1;const i=qt(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class rf extends Zl{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||_Ce(e,n,H4)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return Ze(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*H4[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const xCe=256,wCe=1024,ECe=16384,V4=6144,W4=6145,X4=6146,Y4=34041,qW="clear: bad arguments";function TO(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=ECe,n!==!0&&(s.clearColor=n)),r&&(o|=xCe,r!==!0&&(s.clearDepth=r)),i&&(o|=wCe,r!==!0&&(s.clearStencil=r)),Ze(o!==0,qW),la(t,s,()=>{t.clear(o)})}function TCe(t){let{framebuffer:e=null,buffer:n=V4,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ui(t),la(t,{framebuffer:e},()=>{switch(n){case V4:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case W4:t.clearBufferfv(W4,0,[i]);break;case X4:t.clearBufferiv(X4,0,[i]);break;case Y4:const[s,o]=i;t.clearBufferfi(Y4,0,s,o);break;default:Ze(!1,qW)}})}function SCe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Ze(!1),0}}function Kw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=CCe(t);Ze(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,s===36064&&g===null&&(s=1028),Ze(m[s]),c=c||m[s].type,o=PCe(o,c,i,a,l),c=c||E2(o);const y=f.bindFramebuffer(36160,g);return f.readPixels(n,r,a,l,i,c,o),f.bindFramebuffer(36160,y||null),h&&u.delete(),o}function q4(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Kw(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=cCe({data:r,width:i,height:s}));lCe({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function CCe(t){return t instanceof Dr?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:FCe(t),deleteFramebuffer:!0}}function PCe(t,e,n,r,i){if(t)return t;e=e||5121;const s=v0(e,{clamped:!1}),o=SCe(n);return new s(r*i*o)}const kn={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function ACe(t){const e=new ha(t,{format:6408,type:5126,dataFormat:6408}),n=new Dr(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const KW={[kn.WEBGL2]:[!1,!0],[kn.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[kn.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[kn.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[kn.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[kn.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[kn.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[kn.FLOAT_BLEND]:["EXT_float_blend"],[kn.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[kn.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[kn.TEXTURE_FLOAT]:["OES_texture_float",!0],[kn.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[kn.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[kn.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[kn.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[kn.COLOR_ATTACHMENT_RGBA32F]:[ACe,"EXT_color_buffer_float"],[kn.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[kn.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[kn.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[kn.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[kn.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[kn.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},RCe=2;function ICe(t,e){return SO(t,e)}function SO(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>ZW(t,n))}function MCe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in KW)t.luma.caps[e]===void 0&&(t.luma.caps[e]=ZW(t,e));return t.luma.caps}function ZW(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=OCe(t,e)),t.luma.caps[e]||ct.log(RCe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function OCe(t,e){const n=KW[e];Ze(n,e);let r;const i=qt(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:Ze(!1);return r}const K4="Multiple render targets not supported";class Dr extends Zl{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Dr(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ui(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ui(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if(Ze(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const h in i){const f=i[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return Ze(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&ct.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){Ze(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof rf)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(kCe(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&TO(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{TCe(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return ct.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ct.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ct.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ct.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ct.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ct.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=Ui(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Kc(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?Kc(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?Kc(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(q4(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>ct.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=q4(this,{targetMaxHeight:100});return ct.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new ha(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new rf(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new rf(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&Ze(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof rf?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Ui(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=LCe(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:Ze(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=lSe(this.gl);n?n.readBuffer(e):Ze(e===36064||e===1029,K4),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Ui(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):Ze(e.length===1&&(e[0]===36064||e[0]===1029),K4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=MCe(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function LCe(t){return t<34069?t+34069:t}function kCe(t){return(Dr.STATUS||{})[t]||"Framebuffer error ".concat(t)}const DCe=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Dr.ATTACHMENT_PARAMETERS=DCe;function NCe(t,e){Ze(t instanceof ha||t instanceof YW||t instanceof bCe);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,h=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,h)}function FCe(t,e){const{gl:n,width:r,height:i,id:s}=t;return new Dr(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function db(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const BCe=35632,zCe=35633;function UCe(t){switch(t){case BCe:return"fragment";case zCe:return"vertex";default:return"unknown type"}}function $Ce(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||db(e)||"(unnamed)",l="".concat(UCe(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const h=i[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));g!=="WARNING"?s[m]=h:o[m]=h}const c=jCe(e);return{shaderName:l,errors:Z4(s,c),warnings:Z4(o,c)}}function Z4(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=QW("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function jCe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return QW(a,i-l)+n+s})}function QW(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function JW(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const GCe="Shader: GLSL source code must be a JavaScript string";class b0 extends Zl{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Ze(!1),"unknown"}}constructor(e,n){qw(e),Ze(typeof n.source=="string",GCe);const r=db(n.source,null)||n.id||ou("unnamed ".concat(b0.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=db(n,null);r&&(this.id=ou(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(b0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return db(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=$Ce(r,this.source,this.shaderType,this.id);throw ct.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),ct.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class lC extends b0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class cC extends b0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const HCe={5126:Mn.bind(null,"uniform1fv",_s,1,bi),35664:Mn.bind(null,"uniform2fv",_s,2,bi),35665:Mn.bind(null,"uniform3fv",_s,3,bi),35666:Mn.bind(null,"uniform4fv",_s,4,bi),5124:Mn.bind(null,"uniform1iv",pc,1,bi),35667:Mn.bind(null,"uniform2iv",pc,2,bi),35668:Mn.bind(null,"uniform3iv",pc,3,bi),35669:Mn.bind(null,"uniform4iv",pc,4,bi),35670:Mn.bind(null,"uniform1iv",pc,1,bi),35671:Mn.bind(null,"uniform2iv",pc,2,bi),35672:Mn.bind(null,"uniform3iv",pc,3,bi),35673:Mn.bind(null,"uniform4iv",pc,4,bi),35674:Mn.bind(null,"uniformMatrix2fv",_s,4,ml),35675:Mn.bind(null,"uniformMatrix3fv",_s,9,ml),35676:Mn.bind(null,"uniformMatrix4fv",_s,16,ml),35678:ii,35680:ii,5125:Mn.bind(null,"uniform1uiv",_1,1,bi),36294:Mn.bind(null,"uniform2uiv",_1,2,bi),36295:Mn.bind(null,"uniform3uiv",_1,3,bi),36296:Mn.bind(null,"uniform4uiv",_1,4,bi),35685:Mn.bind(null,"uniformMatrix2x3fv",_s,6,ml),35686:Mn.bind(null,"uniformMatrix2x4fv",_s,8,ml),35687:Mn.bind(null,"uniformMatrix3x2fv",_s,6,ml),35688:Mn.bind(null,"uniformMatrix3x4fv",_s,12,ml),35689:Mn.bind(null,"uniformMatrix4x2fv",_s,8,ml),35690:Mn.bind(null,"uniformMatrix4x3fv",_s,12,ml),35678:ii,35680:ii,35679:ii,35682:ii,36289:ii,36292:ii,36293:ii,36298:ii,36299:ii,36300:ii,36303:ii,36306:ii,36307:ii,36308:ii,36311:ii},VCe={},WCe={},XCe={},Q4=[0];function CO(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Q4[0]=t,t=Q4);const i=t.length;if(i%e&&ct.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function _s(t,e){return CO(t,e,Float32Array,VCe)}function pc(t,e){return CO(t,e,Int32Array,WCe)}function _1(t,e){return CO(t,e,Uint32Array,XCe)}function J4(t,e,n){const r=HCe[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function YCe(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function qCe(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!KCe(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function KCe(t){return Array.isArray(t)||ArrayBuffer.isView(t)?QCe(t):isFinite(t)||t===!0||t===!1||t instanceof Zf||t instanceof rf?!0:t instanceof Dr?!!t.texture:!1}function ZCe(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function QCe(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ii(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Mn(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let h=!1;if(i===null)i=new Float32Array(u),s=u,h=!0;else{Ze(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==i[f]){h=!0;break}}return h&&(r(o,t,a,c),i.set(c)),h}}function bi(t,e,n,r){t[e](n,r)}function ml(t,e,n,r){t[e](n,!1,r)}const JCe=5120,ePe=5121,tPe=5122,nPe=5123,ez=0,x1=1,rPe=2,iPe=3,w1=4,sPe=5,oPe=6,Mr=5126,aPe=35664,lPe=35665,cPe=35666,xg=5124,uPe=35667,hPe=35668,dPe=35669,wg=5125,fPe=36294,pPe=36295,gPe=36296,mPe=35670,yPe=35671,vPe=35672,bPe=35673,_Pe=35674,xPe=35675,wPe=35676,EPe=35685,TPe=35686,SPe=35687,CPe=35688,PPe=35689,APe=35690,C2={[Mr]:[Mr,1,"float"],[aPe]:[Mr,2,"vec2"],[lPe]:[Mr,3,"vec3"],[cPe]:[Mr,4,"vec4"],[xg]:[xg,1,"int"],[uPe]:[xg,2,"ivec2"],[hPe]:[xg,3,"ivec3"],[dPe]:[xg,4,"ivec4"],[wg]:[wg,1,"uint"],[fPe]:[wg,2,"uvec2"],[pPe]:[wg,3,"uvec3"],[gPe]:[wg,4,"uvec4"],[mPe]:[Mr,1,"bool"],[yPe]:[Mr,2,"bvec2"],[vPe]:[Mr,3,"bvec3"],[bPe]:[Mr,4,"bvec4"],[_Pe]:[Mr,8,"mat2"],[EPe]:[Mr,8,"mat2x3"],[TPe]:[Mr,8,"mat2x4"],[xPe]:[Mr,12,"mat3"],[SPe]:[Mr,12,"mat3x2"],[CPe]:[Mr,12,"mat3x4"],[wPe]:[Mr,16,"mat4"],[PPe]:[Mr,16,"mat4x2"],[APe]:[Mr,16,"mat4x3"]};function RPe(t){switch(t){case ez:return ez;case x1:return x1;case iPe:return x1;case rPe:return x1;case w1:return w1;case sPe:return w1;case oPe:return w1;default:return Ze(!1),0}}function tz(t){const e=C2[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function e9(t,e){switch(t){case JCe:case ePe:case tPe:case nPe:t=Mr;break}for(const n in C2){const[r,i,s]=C2[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class IPe{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!qt(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=tz(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Ps(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=tz(r),a=new Ps({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const nz=4,MPe=35981,OPe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class t9 extends Zl{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",OPe),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=MPe}=e;return this.hash=n||"",this.vs=typeof r=="string"?new lC(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new cC(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,Ze(this.vs instanceof lC),Ze(this.fs instanceof cC),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ui(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new IPe(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:y={},uniforms:x,samplers:b}=e;if((x||b)&&(ct.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),ct.priority>=n){const w=m?m.id:"default",v="mode=".concat(Kc(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(Kc(this.gl,c)," ")+"isInstanced=".concat(h," isIndexed=").concat(l," ")+"Framebuffer=".concat(w);ct.log(n,v)()}return Ze(f),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||h&&u===0?!1:(f.bindForDraw(i,u,()=>{if(m!==void 0&&(y=Object.assign({},y,{framebuffer:m})),g){const w=RPe(r);g.begin(w)}this._bindTextures(),la(this.gl,y,()=>{l&&h?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&qt(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):h?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),g&&g.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ct.priority>=2&&qCe(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof Dr&&(s=s.texture),s instanceof Zf)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&ZCe(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new lC({handle:i});break;case 35632:r.fs=new cC({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ou(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ct.time(nz,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ct.timeEnd(nz,"linkProgram for ".concat(this._getName()))(),e.debug||ct.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=YCe(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=J4(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=J4(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const LPe=34918,kPe=34919,DPe=35007,NPe=36795,FPe=35976,BPe=35887,zPe=36202;class $_ extends Zl{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=qt(e),i=SO(e,kn.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:Ze(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(DPe)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?zPe:BPe)}beginTransformFeedbackQuery(){return this.begin(FPe)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,kPe);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(NPe)}getResult(){return this.gl2.getQueryParameter(this.handle,LPe)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return $_.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class n9 extends Zl{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ui(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Kf(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,ct.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof xn?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let E1=null;function UPe(t){return(!E1||E1.byteLength<t)&&(E1=new ArrayBuffer(t)),E1}function $Pe(t,e){const n=UPe(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function jPe(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const GPe="elements must be GL.ELEMENT_ARRAY_BUFFER";class Es extends Zl{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?qt(e)||NW()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Es(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Es.MAX_ATTRIBUTES=Es.MAX_ATTRIBUTES||e.getParameter(34921),Es.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:Es._setConstantFloatArray(e,n,r);break;case Int32Array:Es._setConstantIntArray(e,n,r);break;case Uint32Array:Es._setConstantUintArray(e,n,r);break;default:Ze(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Es.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Ze(!e||e.target===34963,GPe),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),c?(Ze(qt(h)),f.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!Es.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new xn(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=$Pe(n.constructor,s);jPe({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:Ze(!1)}}static _setConstantIntArray(e,n,r){switch(Ze(qt(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:Ze(!1)}}static _setConstantUintArray(e,n,r){switch(Ze(qt(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:Ze(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return Ze(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const HPe="VertexArray: attributes must be Buffers or constants (i.e. typed array)",VPe=/^(.+)__LOCATION_([0-9]+)$/,WPe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class XPe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Es(e),HW(this,"VertexArray","v6.0",WPe),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new xn(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof xn&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof xn&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,ct.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=Ps.resolve(l.accessor,c,r,i),{size:h,type:f}=u;return Ze(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=VPe.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof xn)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof xn){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof xn){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(HPe)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(Es.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){Es.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof xn){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ct.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function YPe(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=_0(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function _0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return YPe(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function rz(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;Ze(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const g of c)!g.match(s)&&!g.match(o)&&uC({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;for(const g of c)g.match(o)&&uC({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;for(const g of c)l[g]||uC({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&u++;let h=0;const f={};if(!i)for(const g in r){const m=r[g];l[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:_0(m)})}return{table:l,count:u,unusedTable:f,unusedCount:h}}function uC(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=qPe(o);return!s||!a?(e[i]={[n]:a?_0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function qPe(t){return t!=null}function KPe(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=iz(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(ZPe(o.name,l))),r[a]=iz(e,i[s],l,n)}}return r}function iz(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,h;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof xn){const f=e,{data:g,changed:m}=f.getDebugData();u=m?"*":"",h=g,l=f.byteLength,a=l/g.BYTES_PER_ELEMENT/o;let y;if(n){const x=n.divisor>0;y="".concat(x?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(Kc(i,s),")")}else c=!0,y="".concat(l," bytes");return{[r]:"".concat(u).concat(_0(h,{size:o,isInteger:c})),"Format ":y}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(_0(h,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function ZPe(t,e){const{type:n,size:r}=e,i=e9(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function QPe(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=sz(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=sz(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function sz(t){const{type:e,size:n}=t.accessor,r=e9(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const oz=Kl()&&typeof document<"u";let JPe=0;class eAe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=x=>GW(x),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=th.get("animation-loop-".concat(JPe++))}=e;let{useDevicePixels:y=!0}=e;"useDevicePixelRatio"in e&&(ct.deprecated("useDevicePixelRatio","useDevicePixels")(),y=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:y}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Ze(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=$_.isSupported(this.gl,["timers"])?new $_(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return ct.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=oz?new Promise((e,n)=>{if(oz&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):oCe(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):sCe(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?xO(this.props.gl,e):this.onCreateContext(e),!Yw(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");WSe(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&ZSe(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Dr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const uy="vs",PO="fs";function Fs(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const hC={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function tAe(t){const e={};for(const n in t){const r=t[n],i=nAe(r);e[n]=i}return e}function nAe(t){let e=az(t);return e==="object"?t?"type"in t?Object.assign({},t,hC[t.type]):"value"in t?(e=az(t.value),Object.assign({type:e},t,hC[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},hC[e])}function az(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const rAe="vs",iAe="fs";class lz{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:h,fragmentShader:f}=e;Fs(typeof n=="string"),this.name=n,this.vs=r||h,this.fs=i||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=sAe(u),o&&(this.uniforms=tAe(o))}getModuleSource(e){let n;switch(e){case rAe:n=this.vs||"";break;case iAe:n=this.fs||"";break;default:Fs(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Fs(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function sAe(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function oAe(t){return aAe(i9(t))}function aAe(t){const e={},n={};return r9({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function r9(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&r9({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function i9(t,e){return t.map(n=>(n instanceof lz||(Fs(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Fs(n.name,"shader module has no name"),n=new lz(n),n.dependencies=i9(n.dependencies)),n))}function lAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const cAe=7936,uAe=7937,hAe=7938,dAe=35724,AO={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Hu={};Object.keys(AO).forEach(t=>{Hu[t]=t});function fAe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function pAe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||cAe),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||uAe);return{gpuVendor:gAe(n,r),vendor:n,renderer:r,version:t.getParameter(hAe),shadingLanguageVersion:t.getParameter(dAe)}}function gAe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const dC={};function cz(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=AO[e];if(Fs(r,e),!lAe(n))return!0;if(e in dC)return dC[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),dC[e]=l,l}function mAe(t,e){const n=AO[e];Fs(n,e);const r=fAe(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Fs(i===!1||i===!0),i}function T1(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>mAe(t,n))}function yAe(t){switch(pAe(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function vAe(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return T1(t,Hu.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),T1(t,Hu.GLSL_DERIVATIVES)&&cz(t,Hu.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),T1(t,Hu.GLSL_FRAG_DATA)&&cz(t,Hu.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),T1(t,Hu.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const bAe=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,_Ae=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,xAe={[uy]:bAe,[PO]:_Ae},fb="__LUMA_INJECT_DECLARATIONS__",uz=/void\s+main\s*\([^)]*\)\s*\{\n?/,hz=/}\n?[^{}]*$/,fC=[];function dz(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===uy;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),fC.length=o.length;for(let l=0,c=o.length;l<c;++l)fC[l]=o[l].injection;const a="".concat(fC.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(fb,a));break;case"vs:#main-start":i&&(t=t.replace(uz,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(hz,l=>a+l));break;case"fs:#decl":i||(t=t.replace(fb,a));break;case"fs:#main-start":i||(t=t.replace(uz,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(hz,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(fb,""),r&&(t=t.replace(/\}\s*$/,s=>s+xAe[e])),t}function P2(t){const e={};return Fs(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Qf(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const s9=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],wAe=[...s9,[Qf("attribute"),"in $1"],[Qf("varying"),"out $1"]],EAe=[...s9,[Qf("varying"),"in $1"]],o9=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],TAe=[...o9,[Qf("in"),"attribute $1"],[Qf("out"),"varying $1"]],SAe=[...o9,[Qf("in"),"varying $1"]],A2="gl_FragColor",R2=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,CAe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function PAe(t,e,n){switch(e){case 300:return n?j_(t,wAe):AAe(t);case 100:return n?j_(t,TAe):RAe(t);default:throw new Error("unknown GLSL version ".concat(e))}}function j_(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function AAe(t){t=j_(t,EAe);const e=t.match(R2);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(A2,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(CAe,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(A2,"\\b"),"g"),n)}return t}function RAe(t){t=j_(t,SAe);const e=t.match(R2);if(e){const n=e[1];t=t.replace(R2,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),A2)}return t}const IAe=`

`.concat(fb,`

`),a9={[uy]:"vertex",[PO]:"fragment"},MAe=`precision highp float;

`;function OAe(t,e){const{vs:n,fs:r}=e,i=oAe(e.modules||[]);return{gl:t,vs:fz(t,Object.assign({},e,{source:n,type:uy,modules:i})),fs:fz(t,Object.assign({},e,{source:r,type:PO,modules:i})),getUniforms:LAe(i)}}function fz(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=e;Fs(typeof r=="string","shader source must be a string");const f=i===uy,g=r.split(`
`);let m=100,y="",x=r;g[0].indexOf("#version ")===0?(m=300,y=g[0],x=g.slice(1).join(`
`)):y="#version ".concat(m);const b={};s.forEach(R=>{Object.assign(b,R.getDefines())}),Object.assign(b,o);let w=u?"".concat(y,`
`).concat(DAe({id:n,source:r,type:i}),`
`).concat(kAe({type:i}),`
`).concat(yAe(t),`
`).concat(vAe(t),`
`).concat(NAe(b),`
`).concat(f?"":MAe,`
`):"".concat(y,`
`);const v=BAe(a),E={},S={},C={};for(const R in l){const I=typeof l[R]=="string"?{injection:l[R],order:0}:l[R],L=R.match(/^(v|f)s:(#)?([\w-]+)$/);if(L){const O=L[2],B=L[3];O?B==="decl"?S[R]=[I]:C[R]=[I]:E[R]=[I]}else C[R]=[I]}for(const R of s){h&&R.checkDeprecations(x,h);const I=R.getModuleSource(i,m);w+=I;const L=R.injections[i];for(const O in L){const B=O.match(/^(v|f)s:#([\w-]+)$/);if(B){const D=B[2]==="decl"?S:C;D[O]=D[O]||[],D[O].push(L[O])}else E[O]=E[O]||[],E[O].push(L[O])}}return w+=IAe,w=dz(w,i,S),w+=FAe(v[i],E),w+=x,w=dz(w,i,C),w=PAe(w,c?100:m,f),w}function LAe(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function kAe(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(a9[e].toUpperCase(),`
`)}function DAe(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(a9[r],`

`):""}function NAe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function FAe(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function BAe(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const zAe="void main() {gl_FragColor = vec4(0);}",l9=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,UAe=`#version 300 es
`.concat(l9);function c9(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function u9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?UAe:e>300?"#version ".concat(e,`
`).concat(l9):zAe;const s=GAe(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function $Ae(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Fs(!1),null}}function jAe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Fs(!1),null}}function GAe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Fs(!1),null}}const HAe=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,VAe={name:"fp32",vs:HAe,fs:null};function pz(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Ms={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function WAe(t,{precision:e=Ms.precision}={}){return t=XAe(t),"".concat(parseFloat(t.toPrecision(e)))}function Jf(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lc(t,e,n){return qAe(t,r=>Math.max(e,Math.min(n,r)))}function G_(t,e,n){return Jf(t)?t.map((r,i)=>G_(r,e[i],n)):n*e+(1-n)*t}function x0(t,e,n){const r=Ms.EPSILON;n&&(Ms.EPSILON=n);try{if(t===e)return!0;if(Jf(t)&&Jf(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!x0(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Ms.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Ms.EPSILON=r}}function XAe(t){return Math.round(t/Ms.EPSILON)*Ms.EPSILON}function YAe(t){return t.clone?t.clone():new Array(t.length)}function qAe(t,e,n){if(Jf(t)){const r=t;n=n||YAe(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function KAe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class h9 extends KAe(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Jf(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ms)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+WAe(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!x0(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Ms.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function ZAe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Cs(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function pC(t,e,n=""){if(Ms.debug&&!ZAe(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class QAe extends h9{get x(){return this[0]}set x(e){this[0]=Cs(e)}get y(){return this[1]}set y(e){this[1]=Cs(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Cs(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Cs(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return pz(e>=0&&e<this.ELEMENTS,"index is out of range"),Cs(this[e])}setComponent(e,n){return pz(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var pb=1e-6,ep=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function JAe(){var t=new ep(2);return ep!=Float32Array&&(t[0]=0,t[1]=0),t}function gz(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function e2e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function d9(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function t2e(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=JAe();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function n2e(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function f9(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function r2e(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function i2e(){var t=new ep(3);return ep!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function s2e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function o2e(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function a2e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function l2e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function c2e(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function p9(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function u2e(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function h2e(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,m=s*u-r*f,y=r*h-i*u,x=o*2;return u*=x,h*=x,f*=x,g*=2,m*=2,y*=2,t[0]=a+u+g,t[1]=l+h+m,t[2]=c+f+y,t}function d2e(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function f2e(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function p2e(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function g2e(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,h=u&&l2e(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}var m2e=s2e,y2e=o2e;(function(){var t=i2e();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const gC=[0,0,0];let S1;class nl extends QAe{static get ZERO(){return S1||(S1=new nl(0,0,0),Object.freeze(S1)),S1}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Jf(e)?this.copy(e):(Ms.debug&&(Cs(e),Cs(n),Cs(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Ms.debug&&(Cs(e.x),Cs(e.y),Cs(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Cs(e)}angle(e){return g2e(this,e)}cross(e){return c2e(this,this,e),this.check()}rotateX({radians:e,origin:n=gC}){return d2e(this,this,n,e),this.check()}rotateY({radians:e,origin:n=gC}){return f2e(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=gC}){return p2e(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return p9(this,this,e),this.check()}transformAsVector(e){return f9(this,this,e),this.check()}transformByMatrix3(e){return u2e(this,this,e),this.check()}transformByMatrix2(e){return r2e(this,this,e),this.check()}transformByQuaternion(e){return h2e(this,this,e),this.check()}}class v2e extends h9{toString(){let e="[";if(Ms.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Cs(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function b2e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _2e(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function I2(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],y=e[13],x=e[14],b=e[15],w=n*a-r*o,v=n*l-i*o,E=n*c-s*o,S=r*l-i*a,C=r*c-s*a,R=i*c-s*l,I=u*y-h*m,L=u*x-f*m,O=u*b-g*m,B=h*x-f*y,M=h*b-g*y,D=f*b-g*x,N=w*D-v*M+E*B+S*O-C*L+R*I;return N?(N=1/N,t[0]=(a*D-l*M+c*B)*N,t[1]=(i*M-r*D-s*B)*N,t[2]=(y*R-x*C+b*S)*N,t[3]=(f*C-h*R-g*S)*N,t[4]=(l*O-o*D-c*L)*N,t[5]=(n*D-i*O+s*L)*N,t[6]=(x*E-m*R-b*v)*N,t[7]=(u*R-f*E+g*v)*N,t[8]=(o*M-a*O+c*I)*N,t[9]=(r*O-n*M-s*I)*N,t[10]=(m*C-y*E+b*w)*N,t[11]=(h*E-u*C-g*w)*N,t[12]=(a*L-o*B-l*I)*N,t[13]=(n*B-r*L+i*I)*N,t[14]=(y*v-m*S-x*w)*N,t[15]=(u*S-h*v+f*w)*N,t):null}function x2e(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],m=t[13],y=t[14],x=t[15],b=e*o-n*s,w=e*a-r*s,v=e*l-i*s,E=n*a-r*o,S=n*l-i*o,C=r*l-i*a,R=c*m-u*g,I=c*y-h*g,L=c*x-f*g,O=u*y-h*m,B=u*x-f*m,M=h*x-f*y;return b*M-w*B+v*O+E*L-S*I+C*R}function ph(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],y=e[12],x=e[13],b=e[14],w=e[15],v=n[0],E=n[1],S=n[2],C=n[3];return t[0]=v*r+E*a+S*h+C*y,t[1]=v*i+E*l+S*f+C*x,t[2]=v*s+E*c+S*g+C*b,t[3]=v*o+E*u+S*m+C*w,v=n[4],E=n[5],S=n[6],C=n[7],t[4]=v*r+E*a+S*h+C*y,t[5]=v*i+E*l+S*f+C*x,t[6]=v*s+E*c+S*g+C*b,t[7]=v*o+E*u+S*m+C*w,v=n[8],E=n[9],S=n[10],C=n[11],t[8]=v*r+E*a+S*h+C*y,t[9]=v*i+E*l+S*f+C*x,t[10]=v*s+E*c+S*g+C*b,t[11]=v*o+E*u+S*m+C*w,v=n[12],E=n[13],S=n[14],C=n[15],t[12]=v*r+E*a+S*h+C*y,t[13]=v*i+E*l+S*f+C*x,t[14]=v*s+E*c+S*g+C*b,t[15]=v*o+E*u+S*m+C*w,t}function H_(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,h,f,g,m,y,x,b;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],y=e[9],x=e[10],b=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=m,t[9]=y,t[10]=x,t[11]=b,t[12]=o*r+u*i+m*s+e[12],t[13]=a*r+h*i+y*s+e[13],t[14]=l*r+f*i+x*s+e[14],t[15]=c*r+g*i+b*s+e[15]),t}function RO(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function w2e(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,h,f,g,m,y,x,b,w,v,E,S,C,R,I,L,O,B,M,D,N,j;return a<pb?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],m=e[3],y=e[4],x=e[5],b=e[6],w=e[7],v=e[8],E=e[9],S=e[10],C=e[11],R=i*i*u+c,I=s*i*u+o*l,L=o*i*u-s*l,O=i*s*u-o*l,B=s*s*u+c,M=o*s*u+i*l,D=i*o*u+s*l,N=s*o*u-i*l,j=o*o*u+c,t[0]=h*R+y*I+v*L,t[1]=f*R+x*I+E*L,t[2]=g*R+b*I+S*L,t[3]=m*R+w*I+C*L,t[4]=h*O+y*B+v*M,t[5]=f*O+x*B+E*M,t[6]=g*O+b*B+S*M,t[7]=m*O+w*B+C*M,t[8]=h*D+y*N+v*j,t[9]=f*D+x*N+E*j,t[10]=g*D+b*N+S*j,t[11]=m*D+w*N+C*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g9(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function E2e(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function m9(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function T2e(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,m=i*l,y=s*o,x=s*a,b=s*l;return t[0]=1-h-m,t[1]=u+b,t[2]=f-x,t[3]=0,t[4]=u-b,t[5]=1-c-m,t[6]=g+y,t[7]=0,t[8]=f+x,t[9]=g-y,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S2e(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function C2e(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var P2e=C2e;function A2e(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var R2e=A2e;function I2e(t,e,n,r){var i,s,o,a,l,c,u,h,f,g,m=e[0],y=e[1],x=e[2],b=r[0],w=r[1],v=r[2],E=n[0],S=n[1],C=n[2];return Math.abs(m-E)<pb&&Math.abs(y-S)<pb&&Math.abs(x-C)<pb?b2e(t):(u=m-E,h=y-S,f=x-C,g=1/Math.hypot(u,h,f),u*=g,h*=g,f*=g,i=w*f-v*h,s=v*u-b*f,o=b*h-w*u,g=Math.hypot(i,s,o),g?(g=1/g,i*=g,s*=g,o*=g):(i=0,s=0,o=0),a=h*o-f*s,l=f*i-u*o,c=u*s-h*i,g=Math.hypot(a,l,c),g?(g=1/g,a*=g,l*=g,c*=g):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*m+s*y+o*x),t[13]=-(a*m+l*y+c*x),t[14]=-(u*m+h*y+f*x),t[15]=1,t)}function M2e(){var t=new ep(4);return ep!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function O2e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function hy(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=M2e();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var M2;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(M2||(M2={}));const L2e=45*Math.PI/180,k2e=1,mC=.1,yC=500,D2e=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class rl extends v2e{static get IDENTITY(){return F2e()}static get ZERO(){return N2e()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return M2}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=y,this[15]=x,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,h,f,g,m,y,x){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=n,this[5]=o,this[6]=u,this[7]=m,this[8]=r,this[9]=a,this[10]=h,this[11]=y,this[12]=i,this[13]=l,this[14]=f,this[15]=x,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(D2e)}fromObject(e){return this.check()}fromQuaternion(e){return T2e(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=mC,far:a=yC}=e;return a===1/0?B2e(this,n,r,i,s,o):S2e(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return I2e(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=mC,far:a=yC}=e;return R2e(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=L2e,aspect:r=k2e,focalDistance:i=1,near:s=mC,far:o=yC}=e;mz(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return mz(n),P2e(this,n,r,i,s),this.check()}determinant(){return x2e(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return _2e(this,this),this.check()}invert(){return I2(this,this),this.check()}multiplyLeft(e){return ph(this,e,this),this.check()}multiplyRight(e){return ph(this,this,e),this.check()}rotateX(e){return g9(this,this,e),this.check()}rotateY(e){return E2e(this,this,e),this.check()}rotateZ(e){return m9(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return w2e(this,this,e,n),this.check()}scale(e){return RO(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return H_(this,this,e),this.check()}transform(e,n){return e.length===4?(n=hy(n||[-0,-0,-0,-0],e,this),pC(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=t2e(n||[-0,-0],e,this);break;case 3:i=p9(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pC(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=n2e(n||[-0,-0],e,this);break;case 3:r=f9(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pC(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let C1,P1;function N2e(){return C1||(C1=new rl([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(C1)),C1}function F2e(){return P1||(P1=new rl,Object.freeze(P1)),P1}function mz(t){if(t>Math.PI*2)throw Error("expected radians")}function B2e(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,h=-1,f=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=h,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}const yz=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,z2e={lightSources:{}};function vC(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function U2e(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=vC(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=vC(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=vC(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function y9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z2e;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},U2e({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return y9({lightSources:e})}return{}}const $2e={name:"lights",vs:yz,fs:yz,getUniforms:y9,defines:{MAX_LIGHTS:3}},j2e=new Uint8Array([0,255,255,255]),G2e={pickingSelectedColor:null,pickingHighlightColor:j2e,pickingActive:!1,pickingAttribute:!1};function H2e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G2e;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const V2e=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,W2e=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,X2e={name:"picking",vs:V2e,fs:W2e,getUniforms:H2e},Y2e=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,q2e={};function K2e(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function Z2e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q2e;if(!("material"in t))return{};const{material:e}=t;return e?K2e(e):{lighting_uEnabled:!1}}const Q2e={name:"gouraud-lighting",dependencies:[$2e],vs:Y2e,defines:{LIGHTING_VERTEX:1},getUniforms:Z2e},J2e=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,eRe={name:"transform",vs:J2e,fs:null};class dy{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new dy(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),h=this._getHash(r),f=c.map(v=>this._getHash(v.name)).sort(),g=o.map(v=>this._getHash(v)),m=Object.keys(i).sort(),y=Object.keys(s).sort(),x=[],b=[];for(const v of m)x.push(this._getHash(v)),x.push(this._getHash(i[v]));for(const v of y)b.push(this._getHash(v)),b.push(this._getHash(s[v]));const w="".concat(u,"/").concat(h,"D").concat(x.join("/"),"M").concat(f.join("/"),"I").concat(b.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[w]){const v=OAe(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[w]=new t9(this.gl,{hash:w,vs:v.vs,fs:v.fs,varyings:o,bufferMode:a}),this._getUniforms[w]=v.getUniforms||(E=>{}),this._useCounts[w]=0}return this._useCounts[w]++,this._programCache[w]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const tRe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function nRe(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=rRe(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new xn(t,l),c],iRe(s,c)}}if(i){const s=i.value||i;Ze(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new xn(t,{data:s,target:34963}),o]}return r}function rRe(t,e){const{attributeMap:n=tRe}=e||{};return n&&n[t]||t}function iRe(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}Ze(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Cd=2,sRe=1e4,oRe="Model needs drawMode and vertexCount",vz=()=>{},aRe={};class w0{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=ou("model")}=n;Ze(Yw(e)),this.id=r,this.gl=e,this.id=n.id||ou("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||dy.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Ze(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),oRe)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Ze(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Ze(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=nRe(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Kf(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return TO(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;ct.priority>=Cd&&(c=this._logDrawCallStart(Cd));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&ct.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:x}=this,{onBeforeRender:b=vz,onAfterRender:w=vz}=this.props;b(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(aRe,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:y,instanceCount:x,offset:h?g:0}));return w(),ct.priority>=Cd&&this._logDrawCallEnd(c,l,r),v}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Ze(n instanceof t9,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new XPe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof xn&&n.delete()}}_setAnimationProps(e){this.animated&&Ze(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Kf(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new n9(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:sRe;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),ct.group(Cd,">>> DRAWING MODEL ".concat(this.id),{collapsed:ct.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=KPe({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=rz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=rz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&ct.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&ct.log("UNUSED UNIFORMS",Object.keys(a))();const h=QPe(this.vertexArray.configuration);ct.table(e,s)(),ct.table(e,o)(),ct.table(e+1,h)(),i&&i.log({logLevel:Cd,message:"Rendered to ".concat(i.id)}),ct.groupEnd(Cd)()}}class lRe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof xn?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Ze(qt(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new n9(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],Ze(r[s]instanceof xn)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new xn(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const cRe="transform_uSampler_",V_="transform_uSize_",bz="transform_position";function uRe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const h=c.split(`
`),f=h.slice();if(h.forEach((g,m,y)=>{if(o>0){const x=gRe(g,n);if(x){const{updatedLine:b,inject:w}=x;f[m]=b,u=P2([u,w]),Object.assign(l,x.samplerTextureMap),o--}}r&&!a&&(a=pRe(g,r))}),r){Ze(i);const g="".concat(V_).concat(r),m="uniform vec2 ".concat(g,`;
`),y="     vec2 ".concat(bz," = transform_getPos(").concat(g,`);
     gl_Position = vec4(`).concat(bz,`, 0, 1.);
`);u=P2([u,{"vs:#decl":m,"vs:#main-start":y}])}c=f.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function hRe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(V_).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(V_).concat(a)]=[s,o];return i}function dRe(t){return c9(t,["attribute","in"])}function fRe(t){const e="".concat(cRe).concat(t),n="".concat(V_).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function pRe(t,e){const n=c9(t,["varying","out"]);return n&&n.name===e?n.type:null}function gRe(t,e){const n={},r=dRe(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=fRe(s),u=$Ae(i),h="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:n}}return null}const mRe={10241:9728,10240:9728,10242:33071,10243:33071},yRe="transform_output";class vRe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap){const f=this.samplerTextureMap[h];a[h]=r[f]}this._setSourceTextureParameters();const u=hRe({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=Kw(n);if(!e)return r;const i=r.constructor,s=jAe(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ha)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new xn(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Dr(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(mRe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=NCe(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=uRe({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=P2([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||u9({version:JW(i),input:this.targetTextureVarying,inputType:o,output:yRe}),h=this.hasSourceTextures||this.targetTextureVarying?[eRe].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:h,uniforms:s,inject:c}}}class IO{static isSupported(e){return qt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();Ze(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new w0(n,Object.assign({},e,{fs:e.fs||u9({version:JW(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){bRe(n)&&(this.bufferTransform=new lRe(e,n)),_Re(n)&&(this.textureTransform=new vRe(e,n)),Ze(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function bRe(t){return!!(!Kf(t.feedbackBuffers)||!Kf(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function _Re(t){return!!(!Kf(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const _z={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class MO{static get DRAW_MODE(){return _z}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=ou("geometry"),drawMode:r=_z.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,Ze(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(Ze(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return Ze(Number.isFinite(r)),r}}let xRe=1,wRe=1;class v9{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=xRe++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=wRe++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const ERe=[255,255,255],TRe=1;let SRe=0;class CRe{constructor(e={}){F(this,"id",void 0),F(this,"color",void 0),F(this,"intensity",void 0),F(this,"type","ambient");const{color:n=ERe}=e,{intensity:r=TRe}=e;this.id=e.id||"ambient-".concat(SRe++),this.color=n,this.intensity=r}}const PRe=[255,255,255],ARe=1,RRe=[0,0,-1];let IRe=0;class xz{constructor(e={}){F(this,"id",void 0),F(this,"color",void 0),F(this,"intensity",void 0),F(this,"type","directional"),F(this,"direction",void 0),F(this,"shadow",void 0);const{color:n=PRe}=e,{intensity:r=ARe}=e,{direction:i=RRe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(IRe++),this.color=n,this.intensity=r,this.type="directional",this.direction=new nl(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class MRe{constructor(e,n={id:"pass"}){F(this,"id",void 0),F(this,"gl",void 0),F(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class OO extends MRe{constructor(...e){super(...e),F(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return jl(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&LRe(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const h of i){const f=s&&s[h.id];o==null||o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const y of m){const x=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:y,view:f,pass:e.pass,layers:e.layers},g);u.push(x)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],h=b9(this._lastRenderIndex+1),f={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},g={};for(let m=0;m<n.length;m++){const y=n[m],x=this._shouldDrawLayer(y,f,s,g),b={shouldDrawLayer:x};x&&!c&&(b.layerRenderIndex=h(y,x),b.moduleParameters=this._getModuleParameters(y,a,r,l),b.layerParameters=this.getLayerParameters(y,m,e)),u[m]=b}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=ORe(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const h=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;la(e,{scissorTest:!0,scissor:c},()=>TO(e,h))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};jl(e,{viewport:c});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:y,layerParameters:x}=l[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),y.viewport=o;try{f._drawLayer({moduleParameters:y,uniforms:{layerIndex:m},parameters:x})}catch(b){f.raiseError(b,"drawing ".concat(f," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:qf(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function b9(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||b9(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function ORe(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||qf(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function LRe(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;jl(t,{viewport:[0,0,n,r]}),t.clear(16640)}class kRe extends OO{constructor(e,n){super(e,n),F(this,"shadowMap",void 0),F(this,"depthBuffer",void 0),F(this,"fbo",void 0),this.shadowMap=new ha(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new rf(e,{format:33189,width:1,height:1}),this.fbo=new Dr(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;la(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=qf(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const _9="#define SMOOTH_EDGE_RADIUS 0.5",DRe=`
`.concat(_9,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),NRe=`
`.concat(_9,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),FRe={name:"geometry",vs:DRe,fs:NRe},BRe=Object.keys(rn).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(rn[t],";")).join(""),zRe=Object.keys(Va).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Va[t],";")).join(""),URe=Object.keys(y0).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(y0[t],";")).join(""),$Re="".concat(BRe,`
`).concat(zRe,`
`).concat(URe,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function jRe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function fy(t){let e={},n;return r=>{for(const i in r)if(!jRe(r[i],e[i])){n=t(r),e=r;break}return n}}const wz=[0,0,0,0],GRe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],x9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],HRe=[0,0,0],w9=[0,0,0],VRe=fy(YRe);function E9(t,e,n=w9){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===rn.LNGLAT_OFFSETS||e===rn.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Va.WEB_MERCATOR:(e===rn.LNGLAT||e===rn.CARTESIAN)&&(i=[0,0,0],s=!1);break;case Va.WEB_MERCATOR_AUTO_OFFSET:e===rn.LNGLAT?r=i:e===rn.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Va.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Va.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function WRe(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=wz,l=wz,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=E9(t,e,n);return f&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=hy([],l,o),s=r||s,o=ph([],i,s),o=ph([],o,GRe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}function XRe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=rn.DEFAULT,coordinateOrigin:i=w9,autoWrapLongitude:s=!1}){r===rn.DEFAULT&&(r=t.isGeospatial?rn.LNGLAT:rn.CARTESIAN);const o=VRe({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||x9,o}function YRe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=WRe(t,n,r),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=hy([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:HRe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:x9,project_uCameraPosition:a};if(c){const m=t.getDistanceScales(c);switch(n){case rn.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case rn.LNGLAT:case rn.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case rn.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]];break}}return g}const qRe={};function KRe(t=qRe){return"viewport"in t?XRe(t):{}}const LO={name:"project",dependencies:[VAe,FRe],vs:$Re,getUniforms:KRe};function ZRe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _f(t,e){const n=hy([],e,t);return O2e(n,n,1/n[3]),n}function Ez(t,e){const n=t%e;return n<0?e+n:n}function O2(t,e,n){return t<e?e:t>n?n:t}function QRe(t){return Math.log(t)*Math.LOG2E}const kO=Math.log2||QRe;function Gl(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ta=Math.PI,T9=ta/4,wo=ta/180,L2=180/ta,tp=512,W_=4003e4,A1=85.051129,JRe=1.5;function eIe(t){return kO(t)}function X_(t){const[e,n]=t;Gl(Number.isFinite(e)),Gl(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*wo,i=n*wo,s=tp*(r+ta)/(2*ta),o=tp*(ta+Math.log(Math.tan(T9+i*.5)))/(2*ta);return[s,o]}function np(t){const[e,n]=t,r=e/tp*(2*ta)-ta,i=2*(Math.atan(Math.exp(n/tp*(2*ta)-ta))-T9);return[r*L2,i*L2]}function tIe(t){const{latitude:e}=t;Gl(Number.isFinite(e));const n=Math.cos(e*wo);return eIe(W_*n)-9}function bC(t){const e=Math.cos(t*wo);return tp/W_/e}function k2(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Gl(Number.isFinite(e)&&Number.isFinite(n));const i=tp,s=Math.cos(e*wo),o=i/360,a=o/s,l=i/W_/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=wo*Math.tan(e*wo)/s,h=o*u/2,f=i/W_*u,g=f/a*l;c.unitsPerDegree2=[0,h,f],c.unitsPerMeter2=[g,0,g]}return c}function S9(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=k2({longitude:n,latitude:r,highPrecision:!0}),u=X_(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=np(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],f]:h}function nIe(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=ZRe();H_(a,a,[0,0,-i]),g9(a,a,-n*wo),m9(a,a,r*wo);const l=s/e;return RO(a,a,[l,l,l]),o&&H_(a,a,a2e([],o)),a}function rIe(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=Y_(JRe)}=t;r!==void 0&&(u=Y_(r));const h=u*wo,f=i*wo,g=C9(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/n);const y=h*(.5+(s?s[1]:0)/n),x=Math.sin(y)*m/Math.sin(O2(Math.PI/2-f-y,.01,Math.PI-.01)),b=Math.sin(f)*x+m,w=m*10,v=Math.min(b*c,w);return{fov:h,aspect:e/n,focalDistance:g,near:l,far:v}}function Y_(t){return 2*Math.atan(.5/t)*L2}function C9(t){return .5/Math.tan(.5*t*wo)}function P9(t,e){const[n,r,i=0]=t;return Gl(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),_f(e,[n,r,i,1])}function DO(t,e,n=0){const[r,i,s]=t;if(Gl(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return _f(e,[r,i,s,1]);const o=_f(e,[r,i,0,1]),a=_f(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return d9([],o,a,u)}function iIe(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,h=sIe(t.padding),f=X_([a,O2(u,-A1,A1)]),g=X_([c,O2(l,-A1,A1)]),m=[Math.max(Math.abs(g[0]-f[0]),i),Math.max(Math.abs(g[1]-f[1]),i)],y=[e-h.left-h.right-Math.abs(o[0])*2,n-h.top-h.bottom-Math.abs(o[1])*2];Gl(y[0]>0&&y[1]>0);const x=y[0]/m[0],b=y[1]/m[1],w=(h.right-h.left)/2/x,v=(h.top-h.bottom)/2/b,E=[(g[0]+f[0])/2+w,(g[1]+f[1])/2+v],S=np(E),C=Math.min(s,kO(Math.abs(Math.min(x,b))));return Gl(Number.isFinite(C)),{longitude:S[0],latitude:S[1],zoom:C}}function sIe(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Gl(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Tz=Math.PI/180;function oIe(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*Tz:Math.atan(.5/t.altitude),h=(90-t.pitch)*Tz;return u>h-.01?(l=Sz(t,0,e),c=Sz(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function Sz(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=_f(r,[e,0,1,1]),s=_f(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=d9([],i,s,a),c=np(l);return c.push(n),c}const Cz=512;function aIe(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=Ez(i+180,360)-180),(a<-180||a>180)&&(a=Ez(a+180,360)-180);const l=kO(n/Cz);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=np([0,c])[1];if(s<u)s=u;else{const h=np([0,Cz-c])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const lIe=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,cIe=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,uIe=fy(gIe),hIe=fy(mIe),dIe=[0,0,0,1],fIe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function pIe(t,e){const[n,r,i]=t,s=DO([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function gIe({viewport:t,center:e}){return new rl(t.viewProjectionMatrix).invert().transform(e)}function mIe({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>pIe(o,r));for(const o of e){const a=o.clone().translate(new nl(t.center).negate()),l=s.map(u=>a.transform(u)),c=new rl().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function yIe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||dIe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=uIe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=hIe({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new nl(t.viewport.center).negate());e.project_uCoordinateSystem===rn.LNGLAT&&e.project_uProjectionMode===Va.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(fIe),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const _C={name:"shadow",dependencies:[LO],vs:lIe,fs:cIe,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?yIe(t,e):{}},vIe={color:[255,255,255],intensity:1},Pz=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],bIe=[0,0,0,200/255];class A9{constructor(e={}){F(this,"id","lighting-effect"),F(this,"props",void 0),F(this,"shadowColor",bIe),F(this,"shadow",void 0),F(this,"ambientLight",void 0),F(this,"directionalLights",void 0),F(this,"pointLights",void 0),F(this,"shadowPasses",[]),F(this,"shadowMaps",[]),F(this,"dummyShadowMap",null),F(this,"programManager",void 0),F(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=dy.getDefaultProgramManager(e),_C&&this.programManager.addDefaultModule(_C)),this.dummyShadowMap||(this.dummyShadowMap=new ha(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(_C),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new rl().lookAt({eye:new nl(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new kRe(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new CRe(vIe),this.directionalLights.push(new xz(Pz[0]),new xz(Pz[1])))}}class _Ie{constructor(e={}){F(this,"_pool",[]),F(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h=1/0;l&&(h=l*r+s);const f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const rp=new _Ie;function Xg(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function xIe(t){return[t[12],t[13],t[14]]}function wIe(t){return{left:Pd(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Pd(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Pd(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Pd(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Pd(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Pd(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Az=new nl;function Pd(t,e,n,r){Az.set(t,e,n);const i=Az.len();return{distance:r/i,normal:new nl(-t/i,-e/i,-n/i)}}function EIe(t){return t-Math.fround(t)}let Eg;function xC(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;Eg=rp.allocate(Eg,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];Eg[a+l]=c,Eg[a+l+n]=EIe(c)}a+=n*2}return Eg.subarray(0,s*n*2)}function TIe(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const SIe=Math.PI/180,CIe=Xg(),Rz=[0,0,0],PIe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function AIe({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new rl().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new rl().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Lc((u+t-h)/2,0,t)-t/2,y=Lc((f+e-g)/2,0,e)-e/2;c[8]-=m*2/t,c[9]+=y*2/e}return c}class xp{constructor(e={}){F(this,"id",void 0),F(this,"x",void 0),F(this,"y",void 0),F(this,"width",void 0),F(this,"height",void 0),F(this,"padding",void 0),F(this,"isGeospatial",void 0),F(this,"zoom",void 0),F(this,"focalDistance",void 0),F(this,"position",void 0),F(this,"modelMatrix",void 0),F(this,"distanceScales",void 0),F(this,"scale",void 0),F(this,"center",void 0),F(this,"cameraPosition",void 0),F(this,"projectionMatrix",void 0),F(this,"viewMatrix",void 0),F(this,"viewMatrixUncentered",void 0),F(this,"viewMatrixInverse",void 0),F(this,"viewProjectionMatrix",void 0),F(this,"pixelProjectionMatrix",void 0),F(this,"pixelUnprojectionMatrix",void 0),F(this,"resolution",void 0),F(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||PIe,this.focalDistance=e.focalDistance||1,this.position=e.position||Rz,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Va.WEB_MERCATOR:Va.WEB_MERCATOR_AUTO_OFFSET:Va.IDENTITY}equals(e){return e instanceof xp?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&x0(e.projectionMatrix,this.projectionMatrix)&&x0(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=P9(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=DO([i,a,o],this.pixelUnprojectionMatrix,l),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(r)?[u,h,r]:[u,h]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=X_(e);return n[1]=Lc(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?np(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?k2({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,wIe(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=tIe({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||k2({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=Rz;if(s&&(a=o?new rl(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new nl(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=CIe,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new rl().multiplyRight(n).translate(new nl(this.center).negate()),this.projectionMatrix=r||AIe({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*SIe,focalDistance:u,padding:c,near:a,far:l});const h=Xg();ph(h,h,this.projectionMatrix),ph(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=I2([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=xIe(this.viewMatrixInverse);const f=Xg(),g=Xg();RO(f,f,[this.width/2,-this.height/2,1]),H_(f,f,[1,-1,0]),ph(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=I2(Xg(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||wn.warn("Pixel project matrix not invertible")()}}F(xp,"displayName","Viewport");class ip extends xp{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:h=!1,projectionMatrix:f,repeat:g=!1,worldOffset:m=0,position:y,padding:x,legacyMeterSizes:b=!1}=e;let{width:w,height:v,altitude:E=1.5}=e;const S=Math.pow(2,i);w=w||1,v=v||1;let C,R=null;if(f)E=f[5]/2,C=Y_(E);else{e.fovy?(C=e.fovy,E=C9(C)):C=Y_(E);let L;if(x){const{top:O=0,bottom:B=0}=x;L=[0,Lc((O+v-B)/2,0,v)-v/2]}R=rIe({width:w,height:v,scale:S,center:y&&[0,0,y[2]*bC(n)],offset:L,pitch:s,fovy:C,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(R.near=c),Number.isFinite(u)&&(R.far=u)}let I=nIe({height:v,pitch:s,bearing:o,scale:S,altitude:E});m&&(I=new rl().translate([512*m,0,0]).multiplyLeft(I)),super({...e,width:w,height:v,viewMatrix:I,longitude:r,latitude:n,zoom:i,...R,fovy:C,focalDistance:E}),F(this,"longitude",void 0),F(this,"latitude",void 0),F(this,"pitch",void 0),F(this,"bearing",void 0),F(this,"altitude",void 0),F(this,"fovy",void 0),F(this,"orthographic",void 0),F(this,"_subViewports",void 0),F(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=E,this.fovy=C,this.orthographic=h,this._subViewports=g?[]:null,this._pseudoMeters=b,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new ip({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*bC(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/bC(r);return[n,r,i]}addMetersToLngLat(e,n){return S9(e,n)}panByPosition(e,n){const r=DO(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=gz([],i,e2e([],r)),o=gz([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=oIe(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=iIe({width:r,height:i,bounds:e,...n});return new ip({width:r,height:i,longitude:s,latitude:o,zoom:a})}}F(ip,"displayName","WebMercatorViewport");const Iz=[0,0,0];function wC(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof ip){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function RIe(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===rn.DEFAULT&&(i=e.isGeospatial?rn.LNGLAT:rn.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function R9(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=hy([],[o,a,l,1],n)),r){case rn.LNGLAT:return wC([o,a,l],e,s);case rn.LNGLAT_OFFSETS:return wC([o+i[0],a+i[1],l+(i[2]||0)],e,s);case rn.METER_OFFSETS:return wC(S9(i,[o,a,l]),e,s);case rn.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function IIe(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=RIe(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=Iz,shaderCoordinateOrigin:u=Iz,offsetMode:h=!1}=l?E9(n,r,i):{},f=R9(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:h});if(h){const g=n.projectPosition(c||u);m2e(f,f,g)}return f}const Mz={blendFunc:[1,0,32771,0],blendEquation:32774};class I9 extends OO{constructor(...e){super(...e),F(this,"pickZ",void 0),F(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m,moduleParameters:y}){const x=this.gl;this.pickZ=m;const b=this._resetColorEncoder(m),w=la(x,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Mz,blend:!m},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:h,effects:f==null?void 0:f.filter(E=>E.useInPicking),pass:g,isPicking:!0,moduleParameters:y}));return this._colorEncoderState=null,{decodePickingColor:b&&OIe.bind(null,b),stats:w}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,Mz),i.blend=!0,i.blendColor=MIe(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function MIe(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(wn.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function OIe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Bd={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},q_=Symbol.for("component"),Zc=Symbol.for("propTypes"),EC=Symbol.for("deprecatedProps"),xf=Symbol.for("asyncPropDefaults"),Rh=Symbol.for("asyncPropOriginal"),kc=Symbol.for("asyncPropResolved");function NO(t,e=()=>!0){return Array.isArray(t)?M9(t,e,[]):e(t)?[t]:[]}function M9(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?M9(i,e,n):e(i)&&n.push(i)}return n}function LIe({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class kIe{constructor(e,n,r){F(this,"id",void 0),F(this,"context",void 0),F(this,"isLoaded",void 0),F(this,"persistent",void 0),F(this,"_loadCount",0),F(this,"_subscribers",new Set),F(this,"_data",void 0),F(this,"_loader",void 0),F(this,"_error",void 0),F(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=v2(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class DIe{constructor({gl:e,protocol:n}){F(this,"protocol",void 0),F(this,"_context",void 0),F(this,"_resources",void 0),F(this,"_consumers",void 0),F(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new kIe(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const NIe=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,FO={name:"project32",dependencies:[LO],vs:NIe},BO={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...X2e},FIe=[LO],BIe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function zIe(t){const e=dy.getDefaultProgramManager(t);for(const n of FIe)e.addDefaultModule(n);for(const n of BIe)e.addShaderHook(n);return e}const UIe="layerManager.setLayers",$Ie="layerManager.activateViewport";class jIe{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){F(this,"layers",void 0),F(this,"context",void 0),F(this,"resourceManager",void 0),F(this,"_lastRenderedLayers",[]),F(this,"_needsRedraw",!1),F(this,"_needsUpdate",!1),F(this,"_nextLayers",null),F(this,"_debug",!1),F(this,"activateViewport",o=>{Ti($Ie,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new DIe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&zIe(e),stats:r||new wO({id:"deck.gl"}),viewport:i||new xp({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new v9,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Ti(UIe,this,n,e),this._lastRenderedLayers=e;const r=NO(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?wn.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&wn.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Bd.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Bd.MATCHED,n!==e&&(e.lifecycle=Bd.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Bd.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Bd.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function na(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!na(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!na(t[s],e[s],n-1))return!1;return!0}return!1}class GIe{constructor(e){F(this,"width",void 0),F(this,"height",void 0),F(this,"views",void 0),F(this,"viewState",void 0),F(this,"controllers",void 0),F(this,"timeline",void 0),F(this,"_viewports",void 0),F(this,"_viewportMap",void 0),F(this,"_isUpdating",void 0),F(this,"_needsRedraw",void 0),F(this,"_needsUpdate",void 0),F(this,"_eventManager",void 0),F(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=NO(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!na(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):wn.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const HIe=/([0-9]+\.?[0-9]*)(%|px)/;function gc(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=HIe.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function mc(t,e){return t.relative?Math.round(t.position*e):t.position}function Xr(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class sp{constructor(e){F(this,"id",void 0),F(this,"viewportInstance",void 0),F(this,"_x",void 0),F(this,"_y",void 0),F(this,"_width",void 0),F(this,"_height",void 0),F(this,"_padding",void 0),F(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Xr(!l||l instanceof xp),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=gc(r),this._y=gc(i),this._width=gc(s),this._height=gc(o),this._padding=a&&{left:gc(a.left||0),right:gc(a.right||0),top:gc(a.top||0),bottom:gc(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&na(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:mc(this._x,e),y:mc(this._y,n),width:mc(this._width,e),height:mc(this._height,n)};return this._padding&&(r.padding={left:mc(this._padding.left,e),top:mc(this._padding.top,n),right:mc(this._padding.right,e),bottom:mc(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class py{constructor(e){F(this,"_inProgress",void 0),F(this,"_handle",void 0),F(this,"_timeline",void 0),F(this,"time",void 0),F(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Oz=()=>{},D2={BREAK:1,SNAP_TO_END:2,IGNORE:3},VIe=t=>t,WIe=D2.BREAK;class XIe{constructor(e){F(this,"getControllerState",void 0),F(this,"props",void 0),F(this,"propsInTransition",void 0),F(this,"transition",void 0),F(this,"onViewStateChange",void 0),F(this,"onStateChange",void 0),F(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new py(e.timeline),this.onViewStateChange=e.onViewStateChange||Oz,this.onStateChange=e.onStateChange||Oz}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===D2.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===D2.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||VIe,interpolator:s,interruption:n.transitionInterruption||WIe,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class YIe{constructor(e){F(this,"_propsToCompare",void 0),F(this,"_propsToExtract",void 0),F(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!x0(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Xr(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const qIe=["longitude","latitude","zoom","bearing","pitch"],KIe=["longitude","latitude","zoom"];class O9 extends YIe{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:qIe,required:KIe},super(r.transitionProps),F(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=G_(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,G_(e.around,n.around,r)))}return i}}const yc={transitionDuration:0},ZIe=300,R1=t=>1-(1-t)*(1-t),Ad={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Lu={};class QIe{constructor(e){F(this,"props",void 0),F(this,"state",{}),F(this,"transitionManager",void 0),F(this,"eventManager",void 0),F(this,"onViewStateChange",void 0),F(this,"onStateChange",void 0),F(this,"makeViewport",void 0),F(this,"_controllerState",void 0),F(this,"_events",{}),F(this,"_interactionState",{isDragging:!1}),F(this,"_customEvents",[]),F(this,"_eventStartBlocked",null),F(this,"_panMove",!1),F(this,"invertPan",!1),F(this,"dragMode","rotate"),F(this,"inertia",0),F(this,"scrollZoom",!0),F(this,"dragPan",!0),F(this,"dragRotate",!0),F(this,"doubleClickZoom",!0),F(this,"touchZoom",!0),F(this,"touchRotate",!1),F(this,"keyboard",!0),this.transitionManager=new XIe({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?ZIe:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Ad.WHEEL,u&&r),this.toggleEvents(Ad.PAN,u),this.toggleEvents(Ad.PINCH,u&&(a||l)),this.toggleEvents(Ad.TRIPLE_PAN,u&&l),this.toggleEvents(Ad.DOUBLE_TAP,u&&o),this.toggleEvents(Ad.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,yc,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,yc,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:R1},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,yc,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:R1},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,yc,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,yc,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:R1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Lu._startPinchRotation=e.rotation,Lu._lastPinchEvent=e,this.updateViewport(r,yc,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Lu._startPinchRotation-r})}return this.updateViewport(n,yc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Lu._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Lu;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:R1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Lu._startPinchRotation=null,Lu._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?yc:e?{...n,transitionInterpolator:new O9({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class JIe{constructor(e,n){F(this,"_viewportProps",void 0),F(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const Lz=5,eMe=1.2;class tMe extends JIe{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:y,startZoomLngLat:x,startRotatePos:b,startBearing:w,startPitch:v,startZoom:E,normalize:S=!0}=e;Xr(Number.isFinite(s)),Xr(Number.isFinite(i)),Xr(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:S,position:u},{startPanLngLat:y,startZoomLngLat:x,startRotatePos:b,startBearing:w,startPitch:v,startZoom:E}),F(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Lc(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Lc(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Lc(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,aIe(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),h=s/c;let f=0;o>0?Math.abs(u-l)>Lz&&(f=o/(l-u)*eMe):o<0&&l>Lz&&(f=1-a/l),f=Lc(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps(),y=i+180*h;let x=r;return f>0?x=r+f*(m-r):f<0&&(x=r-f*(g-r)),{pitch:x,bearing:y}}}class nMe extends QIe{constructor(...e){super(...e),F(this,"ControllerState",tMe),F(this,"transition",{transitionDuration:300,transitionInterpolator:new O9({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),F(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class zO extends sp{get ViewportType(){return ip}get ControllerType(){return nMe}}F(zO,"displayName","MapView");const rMe=new A9;function iMe(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class sMe{constructor(){F(this,"effects",void 0),F(this,"_resolvedEffects",[]),F(this,"_defaultEffects",[]),F(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>iMe(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(na(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof A9)||this._resolvedEffects.push(rMe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class oMe extends OO{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const aMe="deckRenderer.renderLayers";class lMe{constructor(e){F(this,"gl",void 0),F(this,"layerFilter",void 0),F(this,"drawPickingColors",void 0),F(this,"drawLayersPass",void 0),F(this,"pickLayersPass",void 0),F(this,"renderCount",void 0),F(this,"_needsRedraw",void 0),F(this,"renderBuffers",void 0),F(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new oMe(e),this.pickLayersPass=new I9(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||Dr.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Ti(aMe,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new Dr(this.gl),new Dr(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const cMe={pickedColor:null,pickedObjectIndex:-1};function uMe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,h=-1,f=0;for(let g=0;g<c;g++){const m=g+a-r,y=m*m;if(y>u)f+=4*l;else for(let x=0;x<l;x++){if(t[f+3]-1>=0){const w=x+o-n,v=w*w+y;v<=u&&(u=v,h=f)}f+=4}}if(h>=0){const g=t.slice(h,h+4),m=e(g);if(m){const y=Math.floor(h/4/l),x=h/4-y*l;return{...m,pickedColor:g,pickedX:o+x,pickedY:a+y}}wn.error("Picked non-existent layer. Is picking buffer corrupt?")()}return cMe}function hMe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):wn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function L9({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=fMe((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function dMe(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const h=n.index,f=n.layerId,g=o?o.props.id:null;if(g!==f||a!==h){if(g!==f){const m=i.find(y=>y.props.id===f);m&&l.unshift(m)}n.layerId=g,n.index=a,n.info=null}}const c=L9(t),u=new Map;return u.set(null,c),l.forEach(h=>{let f={...c};h===o&&(f.color=s,f.index=a,f.picked=!0),f=k9({layer:h,info:f,mode:r});const g=f.layer;h===o&&r==="hover"&&(n.info=f),u.set(g.id,f),r==="hover"&&g.updateAutoHighlight(f)}),u}function k9({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function fMe(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class pMe{constructor(e){F(this,"gl",void 0),F(this,"pickingFBO",void 0),F(this,"depthFBO",void 0),F(this,"pickLayersPass",void 0),F(this,"layerFilter",void 0),F(this,"lastPickedInfo",void 0),F(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new I9(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(f=>f.id===o):null,c=a&&i.find(f=>f.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Dr(r),Dr.isSupported(r,{colorBufferFloat:!0}))){const i=new Dr(r);i.attach({36064:new ha(r,{format:qt(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=qf(this.gl);if(!f)return{result:[],emptyInfo:L9({viewports:r,x:i,y:s,pixelRatio:g})};this._resizeBuffer();const m=sC(this.gl,[i,s],!0),y=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],x=Math.round(o*g),{width:b,height:w}=this.pickingFBO,v=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:x,deviceWidth:b,deviceHeight:w}),E={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let S;const C=[],R=new Set;for(let I=0;I<a;I++){let L;if(v){const B=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:v,cullRect:E,effects:h,pass:"picking:".concat(l)});L=uMe({...B,deviceX:y[0],deviceY:y[1],deviceRadius:x,deviceRect:v})}else L={pickedColor:null,pickedObjectIndex:-1};let O;if(L.pickedLayer&&c&&this.depthFBO){const{pickedColors:B}=this._drawAndSample({layers:[L.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:L.pickedX,y:L.pickedY,width:1,height:1},cullRect:E,effects:h,pass:"picking:".concat(l,":z")},!0);B[3]&&(O=B[0])}L.pickedLayer&&I+1<a&&(R.add(L.pickedLayer),L.pickedLayer.disablePickingIndex(L.pickedObjectIndex)),S=dMe({pickInfo:L,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:r,x:i,y:s,z:O,pixelRatio:g});for(const B of S.values())B.layer&&C.push(B);if(!L.pickedColor)break}for(const I of R)I.restorePickingColors();return{result:C,emptyInfo:S.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=qf(this.gl),m=sC(this.gl,[i,s],!0),y=m.x,x=m.y+m.height,b=sC(this.gl,[i+o,s+a],!0),w=b.x+b.width,v=b.y,E={x:y,y:v,width:w-y,height:x-v},S=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:E,cullRect:{x:i,y:s,width:o,height:a},effects:h,pass:"picking:".concat(l)}),C=hMe(S),R=new Map,I=Number.isFinite(c);for(let O=0;O<C.length;O++){var L;if(I&&c&&R.size>=c)break;const B=C[O];let M={color:B.pickedColor,layer:null,index:B.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:g};M=k9({layer:B.pickedLayer,info:M,mode:l});const D=(L=M.object)!==null&&L!==void 0?L:"".concat(M.layer.id,"[").concat(M.index,"]");R.has(D)||R.set(D,M)}return Array.from(R.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const w of a)w.useInPicking&&(h.preRenderStats[w.id]=w.preRender(this.gl,h));const{decodePickingColor:f}=this.pickLayersPass.render(h),{x:g,y:m,width:y,height:x}=s,b=new(c?Float32Array:Uint8Array)(y*x*4);return Kw(u,{sourceX:g,sourceY:m,sourceWidth:y,sourceHeight:x,target:b}),{pickedColors:b,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const gMe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class mMe{constructor(e){F(this,"el",null),F(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,gMe),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var D9={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function h(z,G,q){return setTimeout(v(z,q),G)}function f(z,G,q){return Array.isArray(z)?(g(z,q[G],q),!0):!1}function g(z,G,q){var ie;if(z)if(z.forEach)z.forEach(G,q);else if(z.length!==i)for(ie=0;ie<z.length;)G.call(q,z[ie],ie,z),ie++;else for(ie in z)z.hasOwnProperty(ie)&&G.call(q,z[ie],ie,z)}function m(z,G,q){var ie="DEPRECATED METHOD: "+G+`
`+q+` AT 
`;return function(){var Ee=new Error("get-stack-trace"),Ve=Ee&&Ee.stack?Ee.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Dt=e.console&&(e.console.warn||e.console.log);return Dt&&Dt.call(e.console,ie,Ve),z.apply(this,arguments)}}var y;typeof Object.assign!="function"?y=function(G){if(G===i||G===null)throw new TypeError("Cannot convert undefined or null to object");for(var q=Object(G),ie=1;ie<arguments.length;ie++){var Ee=arguments[ie];if(Ee!==i&&Ee!==null)for(var Ve in Ee)Ee.hasOwnProperty(Ve)&&(q[Ve]=Ee[Ve])}return q}:y=Object.assign;var x=m(function(G,q,ie){for(var Ee=Object.keys(q),Ve=0;Ve<Ee.length;)(!ie||ie&&G[Ee[Ve]]===i)&&(G[Ee[Ve]]=q[Ee[Ve]]),Ve++;return G},"extend","Use `assign`."),b=m(function(G,q){return x(G,q,!0)},"merge","Use `assign`.");function w(z,G,q){var ie=G.prototype,Ee;Ee=z.prototype=Object.create(ie),Ee.constructor=z,Ee._super=ie,q&&y(Ee,q)}function v(z,G){return function(){return z.apply(G,arguments)}}function E(z,G){return typeof z==a?z.apply(G&&G[0]||i,G):z}function S(z,G){return z===i?G:z}function C(z,G,q){g(O(G),function(ie){z.addEventListener(ie,q,!1)})}function R(z,G,q){g(O(G),function(ie){z.removeEventListener(ie,q,!1)})}function I(z,G){for(;z;){if(z==G)return!0;z=z.parentNode}return!1}function L(z,G){return z.indexOf(G)>-1}function O(z){return z.trim().split(/\s+/g)}function B(z,G,q){if(z.indexOf&&!q)return z.indexOf(G);for(var ie=0;ie<z.length;){if(q&&z[ie][q]==G||!q&&z[ie]===G)return ie;ie++}return-1}function M(z){return Array.prototype.slice.call(z,0)}function D(z,G,q){for(var ie=[],Ee=[],Ve=0;Ve<z.length;){var Dt=G?z[Ve][G]:z[Ve];B(Ee,Dt)<0&&ie.push(z[Ve]),Ee[Ve]=Dt,Ve++}return q&&(G?ie=ie.sort(function(hr,bt){return hr[G]>bt[G]}):ie=ie.sort()),ie}function N(z,G){for(var q,ie,Ee=G[0].toUpperCase()+G.slice(1),Ve=0;Ve<s.length;){if(q=s[Ve],ie=q?q+Ee:G,ie in z)return ie;Ve++}return i}var j=1;function W(){return j++}function V(z){var G=z.ownerDocument||z;return G.defaultView||G.parentWindow||e}var U=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in e,Y=N(e,"PointerEvent")!==i,Z=X&&U.test(navigator.userAgent),se="touch",xe="pen",de="mouse",Me="kinect",he=25,Se=1,le=2,ae=4,me=8,oe=1,_e=2,pe=4,Ce=8,we=16,Ye=_e|pe,ke=Ce|we,Oe=Ye|ke,rt=["x","y"],qe=["clientX","clientY"];function He(z,G){var q=this;this.manager=z,this.callback=G,this.element=z.element,this.target=z.options.inputTarget,this.domHandler=function(ie){E(z.options.enable,[z])&&q.handler(ie)},this.init()}He.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(V(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(V(this.element),this.evWin,this.domHandler)}};function fn(z){var G,q=z.options.inputClass;return q?G=q:Y?G=ee:Z?G=Je:X?G=Ct:G=Vi,new G(z,Mt)}function Mt(z,G,q){var ie=q.pointers.length,Ee=q.changedPointers.length,Ve=G&Se&&ie-Ee===0,Dt=G&(ae|me)&&ie-Ee===0;q.isFirst=!!Ve,q.isFinal=!!Dt,Ve&&(z.session={}),q.eventType=G,pt(z,q),z.emit("hammer.input",q),z.recognize(q),z.session.prevInput=q}function pt(z,G){var q=z.session,ie=G.pointers,Ee=ie.length;q.firstInput||(q.firstInput=Ke(G)),Ee>1&&!q.firstMultiple?q.firstMultiple=Ke(G):Ee===1&&(q.firstMultiple=!1);var Ve=q.firstInput,Dt=q.firstMultiple,Bn=Dt?Dt.center:Ve.center,hr=G.center=je(ie);G.timeStamp=u(),G.deltaTime=G.timeStamp-Ve.timeStamp,G.angle=Ot(Bn,hr),G.distance=wt(Bn,hr),Te(q,G),G.offsetDirection=kt(G.deltaX,G.deltaY);var bt=Le(G.deltaTime,G.deltaX,G.deltaY);G.overallVelocityX=bt.x,G.overallVelocityY=bt.y,G.overallVelocity=c(bt.x)>c(bt.y)?bt.x:bt.y,G.scale=Dt?St(Dt.pointers,ie):1,G.rotation=Dt?Fe(Dt.pointers,ie):0,G.maxPointers=q.prevInput?G.pointers.length>q.prevInput.maxPointers?G.pointers.length:q.prevInput.maxPointers:G.pointers.length,Ne(q,G);var gs=z.element;I(G.srcEvent.target,gs)&&(gs=G.srcEvent.target),G.target=gs}function Te(z,G){var q=G.center,ie=z.offsetDelta||{},Ee=z.prevDelta||{},Ve=z.prevInput||{};(G.eventType===Se||Ve.eventType===ae)&&(Ee=z.prevDelta={x:Ve.deltaX||0,y:Ve.deltaY||0},ie=z.offsetDelta={x:q.x,y:q.y}),G.deltaX=Ee.x+(q.x-ie.x),G.deltaY=Ee.y+(q.y-ie.y)}function Ne(z,G){var q=z.lastInterval||G,ie=G.timeStamp-q.timeStamp,Ee,Ve,Dt,Bn;if(G.eventType!=me&&(ie>he||q.velocity===i)){var hr=G.deltaX-q.deltaX,bt=G.deltaY-q.deltaY,gs=Le(ie,hr,bt);Ve=gs.x,Dt=gs.y,Ee=c(gs.x)>c(gs.y)?gs.x:gs.y,Bn=kt(hr,bt),z.lastInterval=G}else Ee=q.velocity,Ve=q.velocityX,Dt=q.velocityY,Bn=q.direction;G.velocity=Ee,G.velocityX=Ve,G.velocityY=Dt,G.direction=Bn}function Ke(z){for(var G=[],q=0;q<z.pointers.length;)G[q]={clientX:l(z.pointers[q].clientX),clientY:l(z.pointers[q].clientY)},q++;return{timeStamp:u(),pointers:G,center:je(G),deltaX:z.deltaX,deltaY:z.deltaY}}function je(z){var G=z.length;if(G===1)return{x:l(z[0].clientX),y:l(z[0].clientY)};for(var q=0,ie=0,Ee=0;Ee<G;)q+=z[Ee].clientX,ie+=z[Ee].clientY,Ee++;return{x:l(q/G),y:l(ie/G)}}function Le(z,G,q){return{x:G/z||0,y:q/z||0}}function kt(z,G){return z===G?oe:c(z)>=c(G)?z<0?_e:pe:G<0?Ce:we}function wt(z,G,q){q||(q=rt);var ie=G[q[0]]-z[q[0]],Ee=G[q[1]]-z[q[1]];return Math.sqrt(ie*ie+Ee*Ee)}function Ot(z,G,q){q||(q=rt);var ie=G[q[0]]-z[q[0]],Ee=G[q[1]]-z[q[1]];return Math.atan2(Ee,ie)*180/Math.PI}function Fe(z,G){return Ot(G[1],G[0],qe)+Ot(z[1],z[0],qe)}function St(z,G){return wt(G[0],G[1],qe)/wt(z[0],z[1],qe)}var Ht={mousedown:Se,mousemove:le,mouseup:ae},on="mousedown",Nr="mousemove mouseup";function Vi(){this.evEl=on,this.evWin=Nr,this.pressed=!1,He.apply(this,arguments)}w(Vi,He,{handler:function(G){var q=Ht[G.type];q&Se&&G.button===0&&(this.pressed=!0),q&le&&G.which!==1&&(q=ae),this.pressed&&(q&ae&&(this.pressed=!1),this.callback(this.manager,q,{pointers:[G],changedPointers:[G],pointerType:de,srcEvent:G}))}});var Mo={pointerdown:Se,pointermove:le,pointerup:ae,pointercancel:me,pointerout:me},pa={2:se,3:xe,4:de,5:Me},Xs="pointerdown",hs="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Xs="MSPointerDown",hs="MSPointerMove MSPointerUp MSPointerCancel");function ee(){this.evEl=Xs,this.evWin=hs,He.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}w(ee,He,{handler:function(G){var q=this.store,ie=!1,Ee=G.type.toLowerCase().replace("ms",""),Ve=Mo[Ee],Dt=pa[G.pointerType]||G.pointerType,Bn=Dt==se,hr=B(q,G.pointerId,"pointerId");Ve&Se&&(G.button===0||Bn)?hr<0&&(q.push(G),hr=q.length-1):Ve&(ae|me)&&(ie=!0),!(hr<0)&&(q[hr]=G,this.callback(this.manager,Ve,{pointers:q,changedPointers:[G],pointerType:Dt,srcEvent:G}),ie&&q.splice(hr,1))}});var ne={touchstart:Se,touchmove:le,touchend:ae,touchcancel:me},ce="touchstart",De="touchstart touchmove touchend touchcancel";function Ge(){this.evTarget=ce,this.evWin=De,this.started=!1,He.apply(this,arguments)}w(Ge,He,{handler:function(G){var q=ne[G.type];if(q===Se&&(this.started=!0),!!this.started){var ie=vt.call(this,G,q);q&(ae|me)&&ie[0].length-ie[1].length===0&&(this.started=!1),this.callback(this.manager,q,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:G})}}});function vt(z,G){var q=M(z.touches),ie=M(z.changedTouches);return G&(ae|me)&&(q=D(q.concat(ie),"identifier",!0)),[q,ie]}var ut={touchstart:Se,touchmove:le,touchend:ae,touchcancel:me},ht="touchstart touchmove touchend touchcancel";function Je(){this.evTarget=ht,this.targetIds={},He.apply(this,arguments)}w(Je,He,{handler:function(G){var q=ut[G.type],ie=Lt.call(this,G,q);ie&&this.callback(this.manager,q,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:G})}});function Lt(z,G){var q=M(z.touches),ie=this.targetIds;if(G&(Se|le)&&q.length===1)return ie[q[0].identifier]=!0,[q,q];var Ee,Ve,Dt=M(z.changedTouches),Bn=[],hr=this.target;if(Ve=q.filter(function(bt){return I(bt.target,hr)}),G===Se)for(Ee=0;Ee<Ve.length;)ie[Ve[Ee].identifier]=!0,Ee++;for(Ee=0;Ee<Dt.length;)ie[Dt[Ee].identifier]&&Bn.push(Dt[Ee]),G&(ae|me)&&delete ie[Dt[Ee].identifier],Ee++;if(Bn.length)return[D(Ve.concat(Bn),"identifier",!0),Bn]}var an=2500,gt=25;function Ct(){He.apply(this,arguments);var z=v(this.handler,this);this.touch=new Je(this.manager,z),this.mouse=new Vi(this.manager,z),this.primaryTouch=null,this.lastTouches=[]}w(Ct,He,{handler:function(G,q,ie){var Ee=ie.pointerType==se,Ve=ie.pointerType==de;if(!(Ve&&ie.sourceCapabilities&&ie.sourceCapabilities.firesTouchEvents)){if(Ee)ln.call(this,q,ie);else if(Ve&&tn.call(this,ie))return;this.callback(G,q,ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ln(z,G){z&Se?(this.primaryTouch=G.changedPointers[0].identifier,Fn.call(this,G)):z&(ae|me)&&Fn.call(this,G)}function Fn(z){var G=z.changedPointers[0];if(G.identifier===this.primaryTouch){var q={x:G.clientX,y:G.clientY};this.lastTouches.push(q);var ie=this.lastTouches,Ee=function(){var Ve=ie.indexOf(q);Ve>-1&&ie.splice(Ve,1)};setTimeout(Ee,an)}}function tn(z){for(var G=z.srcEvent.clientX,q=z.srcEvent.clientY,ie=0;ie<this.lastTouches.length;ie++){var Ee=this.lastTouches[ie],Ve=Math.abs(G-Ee.x),Dt=Math.abs(q-Ee.y);if(Ve<=gt&&Dt<=gt)return!0}return!1}var Pr=N(o.style,"touchAction"),ds=Pr!==i,Zt="compute",Jt="auto",vr="manipulation",br="none",Wn="pan-x",fs="pan-y",Mi=bn();function Et(z,G){this.manager=z,this.set(G)}Et.prototype={set:function(z){z==Zt&&(z=this.compute()),ds&&this.manager.element.style&&Mi[z]&&(this.manager.element.style[Pr]=z),this.actions=z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var z=[];return g(this.manager.recognizers,function(G){E(G.options.enable,[G])&&(z=z.concat(G.getTouchAction()))}),At(z.join(" "))},preventDefaults:function(z){var G=z.srcEvent,q=z.offsetDirection;if(this.manager.session.prevented){G.preventDefault();return}var ie=this.actions,Ee=L(ie,br)&&!Mi[br],Ve=L(ie,fs)&&!Mi[fs],Dt=L(ie,Wn)&&!Mi[Wn];if(Ee){var Bn=z.pointers.length===1,hr=z.distance<2,bt=z.deltaTime<250;if(Bn&&hr&&bt)return}if(!(Dt&&Ve)&&(Ee||Ve&&q&Ye||Dt&&q&ke))return this.preventSrc(G)},preventSrc:function(z){this.manager.session.prevented=!0,z.preventDefault()}};function At(z){if(L(z,br))return br;var G=L(z,Wn),q=L(z,fs);return G&&q?br:G||q?G?Wn:fs:L(z,vr)?vr:Jt}function bn(){if(!ds)return!1;var z={},G=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(q){z[q]=G?e.CSS.supports("touch-action",q):!0}),z}var Zr=1,Xn=2,Ys=4,qs=8,Oo=qs,cl=16,Qr=32;function Fr(z){this.options=y({},this.defaults,z||{}),this.id=W(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Zr,this.simultaneous={},this.requireFail=[]}Fr.prototype={defaults:{},set:function(z){return y(this.options,z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(z){if(f(z,"recognizeWith",this))return this;var G=this.simultaneous;return z=ps(z,this),G[z.id]||(G[z.id]=z,z.recognizeWith(this)),this},dropRecognizeWith:function(z){return f(z,"dropRecognizeWith",this)?this:(z=ps(z,this),delete this.simultaneous[z.id],this)},requireFailure:function(z){if(f(z,"requireFailure",this))return this;var G=this.requireFail;return z=ps(z,this),B(G,z)===-1&&(G.push(z),z.requireFailure(this)),this},dropRequireFailure:function(z){if(f(z,"dropRequireFailure",this))return this;z=ps(z,this);var G=B(this.requireFail,z);return G>-1&&this.requireFail.splice(G,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(z){return!!this.simultaneous[z.id]},emit:function(z){var G=this,q=this.state;function ie(Ee){G.manager.emit(Ee,z)}q<qs&&ie(G.options.event+Tn(q)),ie(G.options.event),z.additionalEvent&&ie(z.additionalEvent),q>=qs&&ie(G.options.event+Tn(q))},tryEmit:function(z){if(this.canEmit())return this.emit(z);this.state=Qr},canEmit:function(){for(var z=0;z<this.requireFail.length;){if(!(this.requireFail[z].state&(Qr|Zr)))return!1;z++}return!0},recognize:function(z){var G=y({},z);if(!E(this.options.enable,[this,G])){this.reset(),this.state=Qr;return}this.state&(Oo|cl|Qr)&&(this.state=Zr),this.state=this.process(G),this.state&(Xn|Ys|qs|cl)&&this.tryEmit(G)},process:function(z){},getTouchAction:function(){},reset:function(){}};function Tn(z){return z&cl?"cancel":z&qs?"end":z&Ys?"move":z&Xn?"start":""}function mn(z){return z==we?"down":z==Ce?"up":z==_e?"left":z==pe?"right":""}function ps(z,G){var q=G.manager;return q?q.get(z):z}function _n(){Fr.apply(this,arguments)}w(_n,Fr,{defaults:{pointers:1},attrTest:function(z){var G=this.options.pointers;return G===0||z.pointers.length===G},process:function(z){var G=this.state,q=z.eventType,ie=G&(Xn|Ys),Ee=this.attrTest(z);return ie&&(q&me||!Ee)?G|cl:ie||Ee?q&ae?G|qs:G&Xn?G|Ys:Xn:Qr}});function Ar(){_n.apply(this,arguments),this.pX=null,this.pY=null}w(Ar,_n,{defaults:{event:"pan",threshold:10,pointers:1,direction:Oe},getTouchAction:function(){var z=this.options.direction,G=[];return z&Ye&&G.push(fs),z&ke&&G.push(Wn),G},directionTest:function(z){var G=this.options,q=!0,ie=z.distance,Ee=z.direction,Ve=z.deltaX,Dt=z.deltaY;return Ee&G.direction||(G.direction&Ye?(Ee=Ve===0?oe:Ve<0?_e:pe,q=Ve!=this.pX,ie=Math.abs(z.deltaX)):(Ee=Dt===0?oe:Dt<0?Ce:we,q=Dt!=this.pY,ie=Math.abs(z.deltaY))),z.direction=Ee,q&&ie>G.threshold&&Ee&G.direction},attrTest:function(z){return _n.prototype.attrTest.call(this,z)&&(this.state&Xn||!(this.state&Xn)&&this.directionTest(z))},emit:function(z){this.pX=z.deltaX,this.pY=z.deltaY;var G=mn(z.direction);G&&(z.additionalEvent=this.options.event+G),this._super.emit.call(this,z)}});function Lo(){_n.apply(this,arguments)}w(Lo,_n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[br]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.scale-1)>this.options.threshold||this.state&Xn)},emit:function(z){if(z.scale!==1){var G=z.scale<1?"in":"out";z.additionalEvent=this.options.event+G}this._super.emit.call(this,z)}});function ga(){Fr.apply(this,arguments),this._timer=null,this._input=null}w(ga,Fr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Jt]},process:function(z){var G=this.options,q=z.pointers.length===G.pointers,ie=z.distance<G.threshold,Ee=z.deltaTime>G.time;if(this._input=z,!ie||!q||z.eventType&(ae|me)&&!Ee)this.reset();else if(z.eventType&Se)this.reset(),this._timer=h(function(){this.state=Oo,this.tryEmit()},G.time,this);else if(z.eventType&ae)return Oo;return Qr},reset:function(){clearTimeout(this._timer)},emit:function(z){this.state===Oo&&(z&&z.eventType&ae?this.manager.emit(this.options.event+"up",z):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Jr(){_n.apply(this,arguments)}w(Jr,_n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[br]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.rotation)>this.options.threshold||this.state&Xn)}});function mu(){_n.apply(this,arguments)}w(mu,_n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ye|ke,pointers:1},getTouchAction:function(){return Ar.prototype.getTouchAction.call(this)},attrTest:function(z){var G=this.options.direction,q;return G&(Ye|ke)?q=z.overallVelocity:G&Ye?q=z.overallVelocityX:G&ke&&(q=z.overallVelocityY),this._super.attrTest.call(this,z)&&G&z.offsetDirection&&z.distance>this.options.threshold&&z.maxPointers==this.options.pointers&&c(q)>this.options.velocity&&z.eventType&ae},emit:function(z){var G=mn(z.offsetDirection);G&&this.manager.emit(this.options.event+G,z),this.manager.emit(this.options.event,z)}});function yu(){Fr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}w(yu,Fr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vr]},process:function(z){var G=this.options,q=z.pointers.length===G.pointers,ie=z.distance<G.threshold,Ee=z.deltaTime<G.time;if(this.reset(),z.eventType&Se&&this.count===0)return this.failTimeout();if(ie&&Ee&&q){if(z.eventType!=ae)return this.failTimeout();var Ve=this.pTime?z.timeStamp-this.pTime<G.interval:!0,Dt=!this.pCenter||wt(this.pCenter,z.center)<G.posThreshold;this.pTime=z.timeStamp,this.pCenter=z.center,!Dt||!Ve?this.count=1:this.count+=1,this._input=z;var Bn=this.count%G.taps;if(Bn===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Oo,this.tryEmit()},G.interval,this),Xn):Oo}return Qr},failTimeout:function(){return this._timer=h(function(){this.state=Qr},this.options.interval,this),Qr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Oo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ks(z,G){return G=G||{},G.recognizers=S(G.recognizers,Ks.defaults.preset),new Oi(z,G)}Ks.VERSION="2.0.7",Ks.defaults={domEvents:!1,touchAction:Zt,enable:!0,inputTarget:null,inputClass:null,preset:[[Jr,{enable:!1}],[Lo,{enable:!1},["rotate"]],[mu,{direction:Ye}],[Ar,{direction:Ye},["swipe"]],[yu],[yu,{event:"doubletap",taps:2},["tap"]],[ga]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Gh=1,wp=2;function Oi(z,G){this.options=y({},Ks.defaults,G||{}),this.options.inputTarget=this.options.inputTarget||z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=z,this.input=fn(this),this.touchAction=new Et(this,this.options.touchAction),yy(this,!0),g(this.options.recognizers,function(q){var ie=this.add(new q[0](q[1]));q[2]&&ie.recognizeWith(q[2]),q[3]&&ie.requireFailure(q[3])},this)}Oi.prototype={set:function(z){return y(this.options,z),z.touchAction&&this.touchAction.update(),z.inputTarget&&(this.input.destroy(),this.input.target=z.inputTarget,this.input.init()),this},stop:function(z){this.session.stopped=z?wp:Gh},recognize:function(z){var G=this.session;if(!G.stopped){this.touchAction.preventDefaults(z);var q,ie=this.recognizers,Ee=G.curRecognizer;(!Ee||Ee&&Ee.state&Oo)&&(Ee=G.curRecognizer=null);for(var Ve=0;Ve<ie.length;)q=ie[Ve],G.stopped!==wp&&(!Ee||q==Ee||q.canRecognizeWith(Ee))?q.recognize(z):q.reset(),!Ee&&q.state&(Xn|Ys|qs)&&(Ee=G.curRecognizer=q),Ve++}},get:function(z){if(z instanceof Fr)return z;for(var G=this.recognizers,q=0;q<G.length;q++)if(G[q].options.event==z)return G[q];return null},add:function(z){if(f(z,"add",this))return this;var G=this.get(z.options.event);return G&&this.remove(G),this.recognizers.push(z),z.manager=this,this.touchAction.update(),z},remove:function(z){if(f(z,"remove",this))return this;if(z=this.get(z),z){var G=this.recognizers,q=B(G,z);q!==-1&&(G.splice(q,1),this.touchAction.update())}return this},on:function(z,G){if(z!==i&&G!==i){var q=this.handlers;return g(O(z),function(ie){q[ie]=q[ie]||[],q[ie].push(G)}),this}},off:function(z,G){if(z!==i){var q=this.handlers;return g(O(z),function(ie){G?q[ie]&&q[ie].splice(B(q[ie],G),1):delete q[ie]}),this}},emit:function(z,G){this.options.domEvents&&tE(z,G);var q=this.handlers[z]&&this.handlers[z].slice();if(!(!q||!q.length)){G.type=z,G.preventDefault=function(){G.srcEvent.preventDefault()};for(var ie=0;ie<q.length;)q[ie](G),ie++}},destroy:function(){this.element&&yy(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function yy(z,G){var q=z.element;if(q.style){var ie;g(z.options.cssProps,function(Ee,Ve){ie=N(q.style,Ve),G?(z.oldCssProps[ie]=q.style[ie],q.style[ie]=Ee):q.style[ie]=z.oldCssProps[ie]||""}),G||(z.oldCssProps={})}}function tE(z,G){var q=n.createEvent("Event");q.initEvent(z,!0,!0),q.gesture=G,G.target.dispatchEvent(q)}y(Ks,{INPUT_START:Se,INPUT_MOVE:le,INPUT_END:ae,INPUT_CANCEL:me,STATE_POSSIBLE:Zr,STATE_BEGAN:Xn,STATE_CHANGED:Ys,STATE_ENDED:qs,STATE_RECOGNIZED:Oo,STATE_CANCELLED:cl,STATE_FAILED:Qr,DIRECTION_NONE:oe,DIRECTION_LEFT:_e,DIRECTION_RIGHT:pe,DIRECTION_UP:Ce,DIRECTION_DOWN:we,DIRECTION_HORIZONTAL:Ye,DIRECTION_VERTICAL:ke,DIRECTION_ALL:Oe,Manager:Oi,Input:He,TouchAction:Et,TouchInput:Je,MouseInput:Vi,PointerEventInput:ee,TouchMouseInput:Ct,SingleTouchInput:Ge,Recognizer:Fr,AttrRecognizer:_n,Tap:yu,Pan:Ar,Swipe:mu,Pinch:Lo,Rotate:Jr,Press:ga,on:C,off:R,each:g,merge:b,extend:x,assign:y,inherit:w,bindFn:v,prefixed:N});var Ep=typeof e<"u"?e:typeof self<"u"?self:{};Ep.Hammer=Ks,typeof i=="function"&&i.amd?i(function(){return Ks}):t.exports?t.exports=Ks:e[r]=Ks})(window,document,"Hammer")})(D9);var gy=D9.exports;const yMe=Ih(gy),Ia=K2({__proto__:null,default:yMe},[gy]),N9=1,F9=2,N2=4,vMe={mousedown:N9,mousemove:F9,mouseup:N2};function bMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function _Me(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(bMe(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function xMe(t){t.prototype.handler=function(n){let r=vMe[n.type];r&N9&&n.button>=0&&(this.pressed=!0),r&F9&&n.which===0&&(r=N2),this.pressed&&(r&N2&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}_Me(gy.PointerEventInput);xMe(gy.MouseInput);const wMe=gy.Manager;class Zw{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const EMe=Ia?[[Ia.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ia.Rotate,{enable:!1}],[Ia.Pinch,{enable:!1}],[Ia.Swipe,{enable:!1}],[Ia.Pan,{threshold:0,enable:!1}],[Ia.Press,{enable:!1}],[Ia.Tap,{event:"doubletap",taps:2,enable:!1}],[Ia.Tap,{event:"anytap",enable:!1}],[Ia.Tap,{enable:!1}]]:null,kz={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},TMe={doubletap:["tap"]},SMe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},UO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},CMe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Dz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},PMe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",sf=typeof window<"u"?window:global;let F2=!1;try{const t={get passive(){return F2=!0,!0}};sf.addEventListener("test",null,t),sf.removeEventListener("test",null)}catch{F2=!1}const AMe=PMe.indexOf("firefox")!==-1,{WHEEL_EVENTS:RMe}=UO,Nz="wheel",Fz=4.000244140625,IMe=40,MMe=.25;class OMe extends Zw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;sf.WheelEvent&&(AMe&&i.deltaMode===sf.WheelEvent.DOM_DELTA_PIXEL&&(s/=sf.devicePixelRatio),i.deltaMode===sf.WheelEvent.DOM_DELTA_LINE&&(s*=IMe)),s!==0&&s%Fz===0&&(s=Math.floor(s/Fz)),i.shiftKey&&s&&(s=s*MMe),this.callback({type:Nz,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(RMe),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,F2?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Nz&&(this.options.enable=n)}}const{MOUSE_EVENTS:LMe}=UO,Bz="pointermove",zz="pointerover",Uz="pointerout",$z="pointerenter",jz="pointerleave";class kMe extends Zw{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(LMe),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Bz&&(this.enableMoveEvent=n),e===zz&&(this.enableOverEvent=n),e===Uz&&(this.enableOutEvent=n),e===$z&&(this.enableEnterEvent=n),e===jz&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(zz,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(Uz,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit($z,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(jz,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(Bz,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:DMe}=UO,Gz="keydown",Hz="keyup";class NMe extends Zw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:Gz,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:Hz,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(DMe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Gz&&(this.enableDownEvent=n),e===Hz&&(this.enableUpEvent=n)}}const Vz="contextmenu";class FMe extends Zw{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:Vz,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===Vz&&(this.options.enable=n)}}const B2=1,K_=2,z2=4,BMe={pointerdown:B2,pointermove:K_,pointerup:z2,mousedown:B2,mousemove:K_,mouseup:z2},zMe=1,UMe=2,$Me=3,jMe=0,GMe=1,HMe=2,VMe=1,WMe=2,XMe=4;function YMe(t){const e=BMe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===z2||e===K_&&!Number.isFinite(n)?(s=i===zMe,o=i===UMe,a=i===$Me):e===K_?(s=!!(n&VMe),o=!!(n&XMe),a=!!(n&WMe)):e===B2&&(s=r===jMe,o=r===GMe,a=r===HMe),{leftButton:s,middleButton:o,rightButton:a}}function qMe(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const TC={srcElement:"root",priority:0};class KMe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=TC;typeof r=="string"||r&&r.addEventListener?l={...TC,srcElement:r}:r&&(l={...TC,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=c.length-1;for(;h>=0&&!(c[h].priority>=u.priority);)h--;c.splice(h+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:h}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...YMe(e),...qMe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const ZMe={events:null,recognizers:null,recognizerOptions:{},Manager:wMe,touchAction:"none",tabIndex:0};class QMe{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=SMe[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...ZMe,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||EMe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(kz).forEach(i=>{const s=this.manager.get(i);s&&kz[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new OMe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new kMe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new NMe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new FMe(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=TMe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=Dz[e]||e;let c=a.get(l);c||(c=new KMe(this),a.set(l,c),c.recognizerName=CMe[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=Dz[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function ku(){}const JMe=({isDragging:t})=>t?"grabbing":"grab",B9={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ku,onResize:ku,onViewStateChange:ku,onInteractionStateChange:ku,onBeforeRender:ku,onAfterRender:ku,onLoad:ku,onError:t=>wn.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:JMe,getTooltip:null,debug:!1,drawPickingColors:!1};class Qw{constructor(e){F(this,"props",void 0),F(this,"width",0),F(this,"height",0),F(this,"userData",{}),F(this,"canvas",null),F(this,"viewManager",null),F(this,"layerManager",null),F(this,"effectManager",null),F(this,"deckRenderer",null),F(this,"deckPicker",null),F(this,"eventManager",null),F(this,"tooltip",null),F(this,"metrics",void 0),F(this,"animationLoop",void 0),F(this,"stats",void 0),F(this,"viewState",void 0),F(this,"cursorState",void 0),F(this,"_needsRedraw",void 0),F(this,"_pickRequest",void 0),F(this,"_lastPointerDownInfo",null),F(this,"_metricsCounter",void 0),F(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),F(this,"_onEvent",n=>{const r=A4[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),F(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...B9,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&wn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),NW()==="IE"&&wn.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new wO({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&rp.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&wn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&wn.removed("onLayerClick","onClick")(),e.initialViewState&&!na(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Xr(this.viewManager),this.viewManager.views}getViewports(e){return Xr(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Xr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Xr(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new eAe({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:h=>GW({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new zO({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,xO(e,{enable:!0,copyState:!0})),this.tooltip=new mMe(this.canvas),jl(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new v9;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new QMe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in A4)this.eventManager.on(i,this._onEvent);this.viewManager=new GIe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new jIe(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new sMe,this.deckRenderer=new lMe(e),this.deckPicker=new pMe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;jl(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),wn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=th.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}F(Qw,"defaultProps",B9);F(Qw,"VERSION",sSe);class SC{constructor(e,n){F(this,"opts",void 0),F(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function eOe(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function gb(t){return t.stride||t.size*t.bytesPerElement}function z9(t,e){e.offset&&wn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=gb(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function tOe(t,e){const n=z9(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class nOe{constructor(e,n,r){F(this,"gl",void 0),F(this,"id",void 0),F(this,"size",void 0),F(this,"settings",void 0),F(this,"value",void 0),F(this,"doublePrecision",void 0),F(this,"_buffer",void 0),F(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&ICe(e,kn.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=eOe(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new xn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*gb(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),rp.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=tOe(this.getAccessor(),n||{});return r[e]=new SC(this,s.high),r["".concat(e,"64Low")]=i?new SC(this,s.low):new Float32Array(this.size),r}if(n){const r=z9(this.getAccessor(),n);return{[e]:new SC(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof xn?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=gb(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=gb(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=xC(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?xC(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=rp.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?xC(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&wn.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const Wz=[],Xz=[];function $O(t,e=0,n=1/0){let r=Wz;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(Xz.length=t.length,r=Xz):r=Wz,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function U9(t){return t&&t[Symbol.asyncIterator]}function $9(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(h,{index:f,target:g})=>{if(!s){const b=f*l+c;for(let w=0;w<n;w++)g[w]=t[b+w];return g}const m=s[f],y=s[f+1]||u;let x;if(o){x=new Array(y-m);for(let b=m;b<y;b++){const w=b*l+c;g=new Array(n);for(let v=0;v<n;v++)g[v]=t[w+v];x[b-m]=g}}else if(l===n)x=t.subarray(m*n+c,y*n+c);else{x=new t.constructor((y-m)*n);let b=0;for(let w=m;w<y;w++){const v=w*l+c;for(let E=0;E<n;E++)x[b++]=t[v+E]}}return x}}const rOe=[],mb=[[0,1/0]];function iOe(t,e){if(t===mb||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function CC(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let h=0;h<i;h++)n[r+c]=u[h]||0,c++}}function sOe({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return CC({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,h)=>r(u+a,h)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const h=i[u]*n,f=s[u]*n;CC({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:l}),o=h,a=f}return a<e.length&&CC({source:[],target:e,start:a,size:n,getData:l}),e}const oOe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function j9(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...oOe[n],...e,...t,type:n}}function G9(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function H9(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function V9(t){t.push(t.shift())}function jO(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function W9({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,h=jO(n,e),f=n.isConstant;if(!u&&r>=h)return;const g=f?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!f){const b=s;s=(w,v)=>n.normalizeConstant(b(w,v))}const m=f?(b,w)=>s(g,w):(b,w)=>s(g.subarray(b,b+a),w),y=t.getData({length:r}),x=new Float32Array(h);sOe({source:y,target:x,sourceStartIndices:i,targetStartIndices:c,size:a,getData:m}),t.byteLength<x.byteLength+l&&t.reallocate(x.byteLength+l),t.subData({data:x,offset:l})}class GO extends nOe{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:mb}),F(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return j9(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=iOe(this.state.updateRanges,[r,i])}else this.state.updateRanges=mb}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=rOe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==mb),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Xr(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=$9(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=l.binaryAccessor||(typeof f=="function"?f:s[f]);Xr(typeof m=="function",'accessor "'.concat(f,'" is not a function'));let y=e.getVertexOffset(r);const{iterable:x,objectInfo:b}=$O(n,r,i);for(const w of x){b.index++;let v=m(w,b);if(g&&(v=g.call(this,v)),h){const E=(b.index<h.length-1?h[b.index+1]:o)-h[b.index];if(v&&Array.isArray(v[0])){let S=y;for(const C of v)e._normalizeValue(C,c,S),S+=u}else v&&v.length>u?c.set(v,y):(e._normalizeValue(v,b.target,0),LIe({target:c,source:b.target,start:y,count:E}));y+=E*u}else e._normalizeValue(v,c,y),y+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class aOe{constructor({gl:e,attribute:n,timeline:r}){F(this,"gl",void 0),F(this,"type","interpolation"),F(this,"attributeInTransition",void 0),F(this,"settings",void 0),F(this,"attribute",void 0),F(this,"transition",void 0),F(this,"currentStartIndices",void 0),F(this,"currentLength",void 0),F(this,"transform",void 0),F(this,"buffers",void 0),this.gl=e,this.transition=new py(r),this.attribute=n,this.attributeInTransition=new GO(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=cOe(e,n);const i={byteLength:0,usage:35050};this.buffers=[new xn(e,i),new xn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;V9(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)W9({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=jO(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:G9(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const lOe=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function cOe(t,e){const n=H9(e.size);return new IO(t,{vs:lOe,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class uOe{constructor({gl:e,attribute:n,timeline:r}){F(this,"gl",void 0),F(this,"type","spring"),F(this,"attributeInTransition",void 0),F(this,"settings",void 0),F(this,"attribute",void 0),F(this,"transition",void 0),F(this,"currentStartIndices",void 0),F(this,"currentLength",void 0),F(this,"texture",void 0),F(this,"framebuffer",void 0),F(this,"transform",void 0),F(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new py(r),this.attribute=n,this.attributeInTransition=new GO(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=dOe(e),this.framebuffer=fOe(e,this.texture),this.transform=hOe(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new xn(e,i),new xn(e,i),new xn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)W9({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=jO(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:G9(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),V9(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Kw(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function hOe(t,e,n){const r=H9(e.size);return new IO(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function dOe(t){return new ha(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function fOe(t,e){return new Dr(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const pOe={interpolation:aOe,spring:uOe};class gOe{constructor(e,{id:n,timeline:r}){F(this,"id",void 0),F(this,"isSupported",void 0),F(this,"gl",void 0),F(this,"timeline",void 0),F(this,"transitions",void 0),F(this,"needsRedraw",void 0),F(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=IO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){wn.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=pOe[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(wn.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const Yz="attributeManager.invalidate",mOe="attributeManager.updateStart",yOe="attributeManager.updateEnd",vOe="attribute.updateStart",bOe="attribute.allocate",_Oe="attribute.updateEnd";class xOe{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){F(this,"id",void 0),F(this,"gl",void 0),F(this,"attributes",void 0),F(this,"updateTriggers",void 0),F(this,"needsRedraw",void 0),F(this,"userData",void 0),F(this,"stats",void 0),F(this,"attributeTransitionManager",void 0),F(this,"mergeBoundsMemoized",fy(TIe)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new gOe(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Ti(Yz,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Ti(Yz,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;Ti(mOe,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],h=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&wn.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof h=="string"?o[h]:void 0,e.startIndices)||typeof h=="string"&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Ti(yOe,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new GO(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Ti(vOe,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Ti(bOe,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Ti(_Oe,n,r))}}class wOe extends py{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=G_(n,r,o)}}const qz=1e-5;function Kz(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function EOe(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=Kz(t[o],e[o],n[o],r,i);return s}return Kz(t,e,n,r,i)}function Zz(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class TOe extends py{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=EOe(s,o,n,r,i);const l=Zz(a,n),c=Zz(a,o);l<qz&&c<qz&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const SOe={interpolation:wOe,spring:TOe};class COe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=j9(i),!i)return;const o=SOe[i.type];if(!o){wn.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function POe(t){const e=t[Zc];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function AOe(t,e){const n=X9({newProps:t,oldProps:e,propTypes:t[Zc],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=IOe(t,e);let i=!1;return r||(i=MOe(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:OOe(t,e),transitionsChanged:ROe(t,e)}}function ROe(t,e){if(!t.transitions)return!1;const n={},r=t[Zc];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&U2(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function X9({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=U2(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=U2(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function U2(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function IOe(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function MOe(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Qz(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&Qz(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function OOe(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Qz(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},X9({oldProps:i,newProps:r,triggerName:n})}const LOe="count(): argument not an object",kOe="count(): argument not a container";function DOe(t){if(!FOe(t))throw new Error(LOe);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(NOe(t))return Object.keys(t).length;throw new Error(kOe)}function NOe(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function FOe(t){return t!==null&&typeof t=="object"}function $2(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const BOe={10241:9987,10240:9729,10242:33071,10243:33071},j2={};function zOe(t,e,n,r){if(n instanceof ha)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new ha(e,{...n,parameters:{...BOe,...i,...r}});return j2[s.id]=t,s}function UOe(t,e){!e||!(e instanceof ha)||j2[e.id]===t&&(e.delete(),delete j2[e.id])}const $Oe={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||G2(t)&&(t.length===3||t.length===4)},equal(t,e,n){return na(t,e,1)}},accessor:{validate(t,e){const n=Z_(t);return n==="function"||n===Z_(e.value)},equal(t,e,n){return typeof e=="function"?!0:na(t,e,1)}},array:{validate(t,e){return e.optional&&!t||G2(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?na(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?na(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:zOe(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{UOe(n.id,t)}}};function jOe(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=GOe(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function GOe(t,e){switch(Z_(e)){case"object":return Tg(t,e);case"array":return Tg(t,{type:"array",value:e,compare:!1});case"boolean":return Tg(t,{type:"boolean",value:e});case"number":return Tg(t,{type:"number",value:e});case"function":return Tg(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Tg(t,e){return"type"in e?{name:t,...$Oe[e.type],...e}:"value"in e?{name:t,type:Z_(e.value),...e}:{name:t,type:"object",value:e}}function G2(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Z_(t){return G2(t)?"array":t===null?"null":typeof t}function HOe(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=H2(t.constructor,n),i=Object.create(r);i[q_]=t,i[Rh]={},i[kc]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const VOe="_mergedDefaultProps";function H2(t,e){let n=VOe;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=Y9(t,n);return r||(t[n]=WOe(t,e||[]))}function WOe(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=H2(r),s=Y9(t,"defaultProps")||{},o=jOe(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[Zc],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[EC],o.deprecatedProps);for(const u of e){const h=H2(u.constructor);h&&(Object.assign(a,h),Object.assign(l,h[Zc]),Object.assign(c,h[EC]))}return XOe(a,t),qOe(a,l),YOe(a,c),a[Zc]=l,a[EC]=c,e.length===0&&!HO(t,"_propTypes")&&(t._propTypes=l),a}function XOe(t,e){const n=ZOe(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function YOe(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])HO(this,s)||(this[s]=r);wn.deprecated(i,e[n].join("/"))()}})}function qOe(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=KOe(o))}t[xf]=n,t[Rh]={},Object.defineProperties(t,r)}function KOe(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||U9(e)?this[Rh][t]=e:this[kc][t]=e},get(){if(this[kc]){if(t in this[kc])return this[kc][t]||this[xf][t];if(t in this[Rh]){const e=this[q_]&&this[q_].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[xf][t]}}return this[xf][t]}}}function HO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Y9(t,e){return HO(t,e)&&t[e]}function ZOe(t){const e=t.componentName;return e||wn.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let QOe=0;class VO{constructor(...e){F(this,"id",void 0),F(this,"props",void 0),F(this,"count",void 0),this.props=HOe(this,e),this.id=this.props.id,this.count=QOe++}clone(e){const{props:n}=this,r={};for(const i in n[xf])i in n[kc]?r[i]=n[kc][i]:i in n[Rh]&&(r[i]=n[Rh][i]);return new this.constructor({...n,...r,...e})}}F(VO,"componentName","Component");F(VO,"defaultProps",{});const JOe=Object.freeze({});class eLe{constructor(e){F(this,"component",void 0),F(this,"onAsyncPropUpdated",void 0),F(this,"asyncProps",void 0),F(this,"oldProps",void 0),F(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||JOe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[q_]||this.component;const n=e[kc]||{},r=e[Rh]||e,i=e[xf]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(U9(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[Zc];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class tLe extends eLe{constructor({attributeManager:e,layer:n}){super(n),F(this,"attributeManager",void 0),F(this,"needsRedraw",void 0),F(this,"needsUpdate",void 0),F(this,"subLayers",void 0),F(this,"usesPickingColorCache",void 0),F(this,"hasPickingBuffer",void 0),F(this,"changeFlags",void 0),F(this,"viewport",void 0),F(this,"uniformTransitions",void 0),F(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const nLe="layer.changeFlag",rLe="layer.initialize",iLe="layer.update",sLe="layer.finalize",oLe="layer.matched",Jz=2**24-1,aLe=Object.freeze([]),lLe=fy(({oldViewport:t,viewport:e})=>t.equals(e));let Ma=new Uint8ClampedArray(0);const cLe={data:{type:"data",value:aLe,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:v2(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):v2(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:rn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class $h extends VO{constructor(...e){super(...e),F(this,"internalState",null),F(this,"lifecycle",Bd.NO_STATE),F(this,"context",void 0),F(this,"state",void 0),F(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Xr(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=R9(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=P9(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return Xr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Xr(this.internalState);const r=this.internalState.viewport||this.context.viewport;return IIe(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===rn.DEFAULT||e===rn.LNGLAT||e===rn.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Xr(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:DOe(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=$2(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!lLe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Ma.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Jz&&wn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ma=rp.allocate(Ma,n,{size:3,copy:!0,maxCount:Math.max(n,Jz)});const i=Math.floor(Ma.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Ma[o*3+0]=s[0],Ma[o*3+1]=s[1],Ma[o*3+2]=s[2]}e.value=Ma.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Ma.buffer&&(r.value=Ma.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Xr(!this.internalState),Xr(Number.isFinite(this.props.coordinateSystem)),Ti(rLe,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new tLe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(wn.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new COe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ti(oLe,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ti(iLe,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ti(sLe,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];jl(s.gl,{polygonOffset:l}),la(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Ti(nLe,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=AOe(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){POe(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new xOe(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}F($h,"defaultProps",cLe);F($h,"layerName","Layer");const uLe="compositeLayer.renderLayers";class q9 extends $h{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:x,fetch:b,operation:w,_subLayerProps:v}=this.props,E={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:x,fetch:b,operation:w},S=v&&e.id&&v[e.id],C=S&&S.updateTriggers,R=e.id||"sublayer";if(S){const I=this.props[Zc],L=e.type?e.type._propTypes:{};for(const O in S){const B=L[O]||I[O];B&&B.type==="accessor"&&(S[O]=this.getSubLayerAccessor(S[O]))}}Object.assign(E,e,S),E.id="".concat(this.props.id,"-").concat(R),E.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...C};for(const I of x){const L=I.getSubLayerProps.call(this,I);L&&Object.assign(E,L,{updateTriggers:Object.assign(E.updateTriggers,L.updateTriggers)})}return E}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=NO(s,Boolean),this.internalState.subLayers=r}Ti(uLe,this,i,r);for(const s of r)s.parent=this}}F(q9,"layerName","CompositeLayer");class WO{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){F(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&na(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}}F(WO,"defaultProps",{});F(WO,"extensionName","LayerExtension");class K9{constructor(e){F(this,"opts",void 0),F(this,"typedArrayManager",void 0),F(this,"indexStarts",[0]),F(this,"vertexStarts",[0]),F(this,"vertexCount",0),F(this,"instanceCount",0),F(this,"attributes",void 0),F(this,"_attributeDefs",void 0),F(this,"data",void 0),F(this,"getGeometry",void 0),F(this,"geometryBuffer",void 0),F(this,"buffers",void 0),F(this,"positionSize",void 0),F(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=rp,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(Xr(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?$9(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=$O(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((h,f)=>{const g=h&&this.normalizeGeometry(h);c[f]=g,r[f+1]=r[f]+(g?this.getGeometrySize(g):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof xn){const h=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/h}else if(o.buffer){const h=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/h}else if(o.value){const h=o.value,f=o.stride/h.BYTES_PER_ELEMENT||this.positionSize;i=i||h.length/f}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((h,f)=>{const g=c[f]||h;u.vertexStart=r[f],u.indexStart=n[f];const m=f<r.length-1?r[f+1]:i;u.geometrySize=m-r[f],u.geometryIndex=f,this.updateGeometryAttributes(g,u)},a,l),this.vertexCount=n[n.length-1]}}const hLe=typeof window<"u"?P.useLayoutEffect:P.useEffect;function Q_(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const dLe={position:"absolute",zIndex:-1};function Z9(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>Z9(n,e));if(Jw(t)){if(fLe(t))return e.style=dLe,P.cloneElement(t,e);if(pLe(t))return P.cloneElement(t,e)}return t}function Jw(t){return t&&typeof t=="object"&&"type"in t||!1}function fLe(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function pLe(t){const e=t.type;return e&&e.deckGLViewProps}function V2(t){if(typeof t=="function")return P.createElement(sp,{},t);if(Array.isArray(t))return t.map(V2);if(Jw(t)){if(t.type===P.Fragment)return V2(t.props.children);if(Q_(t.type,sp))return t}return t}function gLe({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return P.Children.forEach(V2(t),o=>{if(Jw(o)){const a=o.type;if(Q_(a,$h)){const l=mLe(a,o.props);i.push(l)}else r.push(o);if(Q_(a,sp)&&a!==sp&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function mLe(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function yLe({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;Jw(o)&&Q_(o.type,sp)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:h,y:f,width:g,height:m}=c;l=Z9(l,{x:h,y:f,width:g,height:m,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:h,height:f}=a,g={position:"absolute",left:c,top:u,width:h,height:f},m="view-".concat(o),y=P.createElement("div",{key:m,id:m,style:g},...l);if(n){const x={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:b=>{b.viewId=o,e._onViewStateChange(b)}};return P.createElement(n,{key:m,value:x},y)}return y})}const vLe={mixBlendMode:null};function bLe({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in vLe?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function _Le(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function Q9(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function xLe(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():Q9(t)}});return r}const J9=P.forwardRef((t,e)=>{const[n,r]=P.useState(0),s=P.useRef({control:null,version:n,forceUpdate:()=>r(S=>S+1)}).current,o=P.useRef(null),a=P.useRef(null),l=P.useMemo(()=>gLe(t),[t.layers,t.views,t.children]);let c=!0;const u=S=>{var C;return c&&t.viewState?(s.viewStateUpdateRequested=S,null):(s.viewStateUpdateRequested=null,(C=t.onViewStateChange)===null||C===void 0?void 0:C.call(t,S))},h=S=>{if(c)s.interactionStateUpdateRequested=S;else{var C;s.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)===null||C===void 0||C.call(t,S)}},f=P.useMemo(()=>{const S={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:h};return delete S._customRender,s.deck&&s.deck.setProps(S),S},[t]);P.useEffect(()=>{const S=t.Deck||Qw;return s.deck=xLe(s,S,{...f,parent:o.current,canvas:a.current}),()=>{var C;return(C=s.deck)===null||C===void 0?void 0:C.finalize()}},[]),hLe(()=>{Q9(s);const{viewStateUpdateRequested:S,interactionStateUpdateRequested:C}=s;S&&u(S),C&&h(C)}),P.useImperativeHandle(e,()=>_Le(s),[]);const g=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:m,width:y,height:x,id:b,style:w}=t,{containerStyle:v,canvasStyle:E}=P.useMemo(()=>bLe({width:y,height:x,style:w}),[y,x,w]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===g||s.version!==n){s.lastRenderedViewports=g,s.version=n;const S=yLe({children:l.children,deck:s.deck,ContextProvider:m}),C=P.createElement("canvas",{key:"canvas",id:b||"deckgl-overlay",ref:a,style:E});s.control=P.createElement("div",{id:"".concat(b||"deckgl","-wrapper"),ref:o,style:v},[C,S])}return c=!1,s.control});J9.defaultProps=Qw.defaultProps;const wLe=J9,ELe="modulepreload",TLe=function(t){return"/"+t},eU={},SLe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=TLe(o),o in eU)return;eU[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const f=s[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ELe,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},CLe=P.createContext(null);function PLe(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Sl(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Sl(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Sl(t[i],e[i]))return!1;return!0}return!1}function ALe(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function tU(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Sl(n,r)||e.setProjection(n)}function nU(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function rU(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const RLe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function iU(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of RLe)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}var sU={};const oU={version:8,sources:{},layers:[]},aU={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},PC={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},lU={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ILe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],MLe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class op{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[lU[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[aU[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[PC[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=op.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=oU}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||OLe()||null,container:e,style:iU(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),tU(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in aU)o.on(u,this._onPointerEvent);for(const u in PC)o.on(u,this._onCameraEvent);for(const u in lU)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),op.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=ALe(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=rU(i,{...nU(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||rU(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of ILe)if(s in e&&!Sl(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=oU,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(iU(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Sl(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Sl(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Sl(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of MLe){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;Sl(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in PC&&(typeof n=="object"&&(n.viewState=nU(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{tU(this._renderTransform,n),e.transform=n}}}op.savedMaps=[];function OLe(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||sU.MapboxAccessToken}catch{}try{t=t||sU.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const LLe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function kLe(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of DLe(e))!(r in n)&&!LLe.includes(r)&&(n[r]=e[r].bind(e));return n}function DLe(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const NLe=typeof document<"u"?P.useLayoutEffect:P.useEffect,FLe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function BLe(t,e){for(const r of FLe)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const eE=P.createContext(null);function zLe(t,e,n){const r=P.useContext(CLe),[i,s]=P.useState(null),o=P.useRef(),{current:a}=P.useRef({mapLib:null,map:null});P.useEffect(()=>{const u=t.mapLib;let h=!0,f;return Promise.resolve(u||n).then(g=>{if(!h)return;if(!g)throw new Error("Invalid mapLib");const m="Map"in g?g:g.default;if(!m.Map)throw new Error("Invalid mapLib");if(BLe(m,t),!m.supported||m.supported(t))t.reuseMaps&&(f=op.reuse(t,o.current)),f||(f=new op(m.Map,t,o.current)),a.map=kLe(f),a.mapLib=m,s(f),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(g=>{const{onError:m}=t;m?m({type:"error",target:null,originalEvent:null,error:g}):console.error(g)}),()=>{h=!1,f&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?f.recycle():f.destroy())}},[]),NLe(()=>{i&&i.setProps(t)}),P.useImperativeHandle(e,()=>a.map,[i]);const l=P.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return P.createElement("div",{id:t.id,ref:o,style:l},i&&P.createElement(eE.Provider,{value:a},P.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const ULe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function jh(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!ULe.test(r)?n[r]=`${i}px`:n[r]=i}}function $Le(t,e){const{map:n,mapLib:r}=P.useContext(eE),i=P.useRef({props:t});i.current.props=t;const s=P.useMemo(()=>{let y=!1;P.Children.forEach(t.children,w=>{w&&(y=!0)});const x={...t,element:y?document.createElement("div"):null},b=new r.Marker(x);return b.setLngLat([t.longitude,t.latitude]),b.getElement().addEventListener("click",w=>{var v,E;(E=(v=i.current.props).onClick)===null||E===void 0||E.call(v,{type:"click",target:b,originalEvent:w})}),b.on("dragstart",w=>{var v,E;const S=w;S.lngLat=s.getLngLat(),(E=(v=i.current.props).onDragStart)===null||E===void 0||E.call(v,S)}),b.on("drag",w=>{var v,E;const S=w;S.lngLat=s.getLngLat(),(E=(v=i.current.props).onDrag)===null||E===void 0||E.call(v,S)}),b.on("dragend",w=>{var v,E;const S=w;S.lngLat=s.getLngLat(),(E=(v=i.current.props).onDragEnd)===null||E===void 0||E.call(v,S)}),b},[]);P.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:h=null,rotation:f=0,rotationAlignment:g="auto",pitchAlignment:m="auto"}=t;return P.useEffect(()=>{jh(s.getElement(),c)},[c]),P.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!PLe(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==f&&s.setRotation(f),s.getRotationAlignment()!==g&&s.setRotationAlignment(g),s.getPitchAlignment()!==m&&s.setPitchAlignment(m),s.getPopup()!==h&&s.setPopup(h),Vl.createPortal(t.children,s.getElement())}P.memo(P.forwardRef($Le));function cU(t){return new Set(t?t.trim().split(/\s+/):[])}function jLe(t,e){const{map:n,mapLib:r}=P.useContext(eE),i=P.useMemo(()=>document.createElement("div"),[]),s=P.useRef({props:t});s.current.props=t;const o=P.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,h;(h=(u=s.current.props).onOpen)===null||h===void 0||h.call(u,c)}),l},[]);if(P.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),P.useEffect(()=>{jh(o.getElement(),t.style)},[t.style]),P.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Sl(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=cU(o.options.className),l=cU(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return Vl.createPortal(t.children,i)}P.memo(P.forwardRef(jLe));function my(t,e,n,r){const i=P.useContext(eE),s=P.useMemo(()=>t(i),[]);return P.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function GLe(t){const e=my(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return P.useEffect(()=>{jh(e._container,t.style)},[t.style]),null}P.memo(GLe);function HLe(t){const e=my(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return P.useEffect(()=>{jh(e._controlContainer,t.style)},[t.style]),null}P.memo(HLe);function VLe(t,e){const n=P.useRef({props:t}),r=my(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,P.useImperativeHandle(e,()=>r,[]),P.useEffect(()=>{jh(r._container,t.style)},[t.style]),null}P.memo(P.forwardRef(VLe));function WLe(t){const e=my(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return P.useEffect(()=>{jh(e._container,t.style)},[t.style]),null}P.memo(WLe);function XLe(t){const e=my(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=P.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),P.useEffect(()=>{jh(e._container,i)},[i]),null}P.memo(XLe);const YLe=SLe(()=>import("./maplibre-gl-EJpsAyYj.js").then(t=>t.m),__vite__mapDeps([])),qLe=P.forwardRef(function(e,n){return zLe(e,n,YLe)}),KLe=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,ZLe=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,uU=[0,0,0,255],QLe={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:uU},getLineColor:{type:"accessor",value:uU},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class XO extends $h{getShaders(){return super.getShaders({vs:KLe,fs:ZLe,modules:[FO,BO]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:f,lineWidthMaxPixels:g}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:y0[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:y0[u],lineWidthScale:h,lineWidthMinPixels:f,lineWidthMaxPixels:g}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new w0(e,{...this.getShaders(),id:this.props.id,geometry:new MO({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}F(XO,"defaultProps",QLe);F(XO,"layerName","ScatterplotLayer");const e7={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function t7(t,e,n={}){return JLe(t,n)!==e?(tke(t,n),!0):!1}function JLe(t,e={}){return Math.sign(eke(t,e))}function eke(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function tke(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const h=t[l+u];t[l+u]=t[c+u],t[c+u]=h}}}function ra(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function W2(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function E0(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function X2(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function yb(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function n7(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],h=E0(t,0,n,o);let f,g;const m=i7(h,i,s,[]),y=[];ra(c,h);for(let x=1;x<l;x++){for(f=E0(t,x,n,o,f),g=yb(f,m);g;){X2(h,f,g,m,y);const b=yb(y,m);b&&(X2(h,y,b,m,y),g=b),ra(c,y),W2(h,y),rke(m,i,g),r&&c.length>n&&(c=[],u.push(c),ra(c,h)),g=yb(f,m)}ra(c,f),W2(h,f)}return r?u:u[0]}const hU=0,nke=1;function I1(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function r7(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(nke):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:h,types:f,holes:g}=l.shift();ike(h,r,g[0]||h.length,c),u=i7(c[0],i,s,u);const m=yb(c[1],u);if(m){let y=dU(h,f,r,0,g[0]||h.length,u,m);const x={pos:y[0].pos,types:y[0].types,holes:[]},b={pos:y[1].pos,types:y[1].types,holes:[]};l.push(x,b);for(let w=0;w<g.length;w++)y=dU(h,f,r,g[w],g[w+1]||h.length,u,m),y[0]&&(x.holes.push(x.pos.length),x.pos=I1(x.pos,y[0].pos),o&&(x.types=I1(x.types,y[0].types))),y[1]&&(b.holes.push(b.pos.length),b.pos=I1(b.pos,y[1].pos),o&&(b.types=I1(b.types,y[1].types)))}else{const y={positions:h};o&&(y.edgeTypes=f),g.length&&(y.holeIndices=g),a.push(y)}}return a}function dU(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],h=[],f=[];let g,m,y;const x=E0(t,a-1,n,r);let b=Math.sign(o&8?x[1]-s[3]:x[0]-s[2]),w=e&&e[a-1],v=0,E=0;for(let S=0;S<a;S++)g=E0(t,S,n,r,g),m=Math.sign(o&8?g[1]-s[3]:g[0]-s[2]),y=e&&e[r/n+S],m&&b&&b!==m&&(X2(x,g,o,s,f),ra(l,f)&&u.push(w),ra(c,f)&&h.push(w)),m<=0?(ra(l,g)&&u.push(y),v-=m):u.length&&(u[u.length-1]=hU),m>=0?(ra(c,g)&&h.push(y),E+=m):h.length&&(h[h.length-1]=hU),W2(x,g),b=m,w=y;return[v?{pos:l,types:e&&u}:null,E?{pos:c,types:e&&h}:null]}function i7(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function rke(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function ike(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const ske=85.051129;function oke(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);s7(o,n,0,i-r);const a=n7(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)o7(l,n);return a}function ake(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let h=0;h<=e.length;h++){const f=e[h]||t.length,g=c,m=lke(t,r,l,f);for(let y=m;y<f;y++)o[c++]=t[y];for(let y=l;y<m;y++)o[c++]=t[y];s7(o,r,g,c),cke(o,r,g,c,n==null?void 0:n.maxLatitude),l=f,a[h]=c}a.pop();const u=r7(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const h of u)o7(h.positions,r);return u}function lke(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function cke(t,e,n,r,i=ske){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=E0(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,ra(t,a),a[1]=Math.sign(a[1])*i,ra(t,a),a[0]=s,ra(t,a)}}function s7(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function o7(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function uke(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?n7(i,{size:e,gridResolution:n}):r?oke(i,{size:e}):i}const hke=1,dke=2,AC=4;class fke extends K9{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?uke(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(fU(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&fU(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=AC,r[s+o-2]=AC):(r[s]+=hke,r[s+o-2]+=dke),r[s+o-1]=AC}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function fU(t){return Array.isArray(t[0])}const pke=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,gke=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,a7=[0,0,0,255],mke={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:a7},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},RC={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class YO extends $h{constructor(...e){super(...e),F(this,"state",void 0)}getShaders(){return super.getShaders({vs:pke,fs:gke,modules:[FO,BO]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:RC,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:RC,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:RC,defaultValue:a7},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new fke({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:y0[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new w0(e,{...this.getShaders(),id:this.props.id,geometry:new MO({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}F(YO,"defaultProps",mke);F(YO,"layerName","PathLayer");const M1=e7.CLOCKWISE,pU=e7.COUNTER_CLOCKWISE,Dc={isClosed:!0};function yke(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Yg(t){return"positions"in t?t.positions:t}function vb(t){return"holeIndices"in t?t.holeIndices:null}function vke(t){return Array.isArray(t[0])}function bke(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function _ke(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function xke(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function gU(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!_ke(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return Dc.start=e,Dc.end=s,Dc.size=r,t7(t,i,Dc),s}function mU(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!xke(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return Dc.start=e,Dc.end=l,Dc.size=r,t7(t,o,Dc),l}function l7(t,e){yke(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=mU(n,o,i,e,s[a-1],s[a],a===0?M1:pU),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!vke(t))return mU(n,0,t,e,0,n.length,M1),n;if(!bke(t)){let i=0;for(const[s,o]of t.entries())i=gU(n,i,o,e,s===0?M1:pU),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return gU(n,0,t,e,M1),n}function IC(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function yU(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function wke(t,e,n,r){let i=vb(t);i&&(i=i.map(a=>a/e));let s=Yg(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=IC(s,0,1),l=IC(s,0,2),c=IC(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),yU(s,0,2,1)):(n||(s=s.slice()),yU(s,2,0,1)))}return gI(s,i,e)}class Eke extends K9{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=l7(e,this.positionSize);return this.opts.resolution?r7(Yg(n),vb(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?ake(Yg(n),vb(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(vU(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return Yg(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&vU(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=wke(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let h=0;h<u.length;h++)l[c++]=u[h]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=Yg(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],h=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=h}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&vb(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function vU(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const c7=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Tke=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(c7,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Ske=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(c7,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Cke=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,J_=[0,0,0,255],Pke={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:J_},getLineColor:{type:"accessor",value:J_},material:!0},O1={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class qO extends $h{constructor(...e){super(...e),F(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?Tke:Ske,fs:Cke,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[FO,Q2e,BO]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===rn.DEFAULT&&(r=rn.LNGLAT);let s;r===rn.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new Eke({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||SO(e,kn.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:O1,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:O1,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:O1,accessor:"getFillColor",defaultValue:J_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:O1,accessor:"getLineColor",defaultValue:J_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new w0(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new w0(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new MO({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}F(qO,"defaultProps",Pke);F(qO,"layerName","SolidPolygonLayer");function Ake({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let f=0;f<o;f++){const g=e(t[f]);if(a>f&&g>=i&&(a=f),g>=s){l=f;break}}let c=a;const h=l-a!==r.length?t.slice(l):void 0;for(let f=0;f<r.length;f++)t[c++]=r[f];if(h){for(let f=0;f<h.length;f++)t[c++]=h[f];t.length=c}return{startRow:a,endRow:a+r.length}}const u7=[0,0,0,255],Rke=[0,0,0,255],Ike={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:Rke},getLineColor:{type:"accessor",value:u7},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Em extends q9{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&wn.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>Ake({data:r,getIndex:o=>o.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:u,objectInfo:h}=$O(n,l,c);for(const f of u){h.index++;let g=r(f,h);s&&(g=l7(g,a));const{holeIndices:m}=g,y=g.positions||g;if(m)for(let x=0;x<=m.length;x++){const b=y.slice(m[x-1]||0,m[x]||y.length);o.push(this.getSubLayerRow({path:b},f,h.index))}else o.push(this.getSubLayerRow({path:y},f,h.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:c,transitions:u,positionFormat:h}=this.props,{lineWidthUnits:f,lineWidthScale:g,lineWidthMinPixels:m,lineWidthMaxPixels:y,lineJointRounded:x,lineMiterLimit:b,lineDashJustified:w}=this.props,{getFillColor:v,getLineColor:E,getLineWidth:S,getLineDashArray:C,getElevation:R,getPolygon:I,updateTriggers:L,material:O}=this.props,{paths:B,pathsDiff:M}=this.state,D=this.getSubLayerClass("fill",qO),N=this.getSubLayerClass("stroke",YO),j=this.shouldRenderSubLayer("fill",B)&&new D({_dataDiff:n,extruded:s,elevationScale:c,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:R,getFillColor:v,getLineColor:s&&o?E:u7,material:O,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:L&&{getPolygon:L.getPolygon,getElevation:L.getElevation,getFillColor:L.getFillColor,lineColors:s&&o,getLineColor:L.getLineColor}}),{data:e,positionFormat:h,getPolygon:I}),W=!s&&r&&this.shouldRenderSubLayer("stroke",B)&&new N({_dataDiff:M&&(()=>M),widthUnits:f,widthScale:g,widthMinPixels:m,widthMaxPixels:y,jointRounded:x,miterLimit:b,dashJustified:w,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(S),getDashArray:this.getSubLayerAccessor(C)},this.getSubLayerProps({id:"stroke",updateTriggers:L&&{getWidth:L.getLineWidth,getColor:L.getLineColor,getDashArray:L.getLineDashArray}}),{data:B,positionFormat:h,getPath:V=>V.path});return[!s&&j,W,s&&j]}}F(Em,"layerName","PolygonLayer");F(Em,"defaultProps",Ike);const gh=10,ap=256;function T0(t,e){let n=Math.sin(t.lat*Math.PI/180);n=Math.min(Math.max(n,-.9999),.9999);const r=ap*(.5+t.lng/360)*Math.pow(2,e),i=ap*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))*Math.pow(2,e);return{x:r,y:i}}function bU(t,e){const n=Math.pow(2,e),r=(t.x/n/ap-.5)*360,i=(t.y/n/ap-.5)*(-2*Math.PI);return{lat:Math.atan(Math.sinh(i))*180/Math.PI,lng:r}}function ex(t,e){return{x:Math.floor(t.x/ap),y:Math.floor(t.y/ap),z:e}}function Y2({x:t,y:e,z:n}){let r=0;for(let i=0;i<n;i++){const s=1<<i;t&s&&(r|=1<<2*i),e&s&&(r|=1<<2*i+1)}return r}function Mke(t,e){let n=gh;for(;n>0;){const r=ex(T0(t,n),n),i=ex(T0(e,n),n),s=Y2(r),o=Y2(i);if(s!==o)break;n--}return n}function Oke(t,e,n){if(n===void 0&&(n=Mke(t,e)),n<0||n>gh)throw new Error(`Invalid zoom level: ${n}`);if(t.lng>e.lng){const r=MC(t,{lat:e.lat,lng:180},n),i=MC({lat:t.lat,lng:-180},e,n);return[r,i]}else return t.lng===-180&&e.lng===180?[[0]]:[MC(t,e,n)]}function MC(t,e,n){const r=T0(t,n),i=T0(e,n),s=ex(r,n),o=ex(i,n),a=[];for(let l=s.x;l<=o.x;l++)for(let c=s.y;c<=o.y;c++)a.push(Y2({x:l,y:c,z:n}));return a}function Lke(t,e,n){if(n<0||n>gh)throw new Error(`Invalid max zoom level: ${n}`);const r=new Array(gh);for(let i=0;i<=n;i++)r[i]=Oke(t,e,i);for(let i=n+1;i<=gh;i++)r[i]=r[i-1];return r}const kke=t=>{const e=[];return t.forEach((n,r)=>{r===0?e.push(n):e.push(n.length===1?[t[r][0].concat(e[r-1][0])]:n.length===2?[e[r-1][0].concat(t[r][0]),e[r-1].length===2?e[r-1][1].concat(t[r][1]):t[r][1]]:[])}),e};function Dke(t,e,n,r){const i=T0(n,r),s={x:i.x-t/2,y:i.y-e/2},o={x:i.x+t/2,y:i.y+e/2};return{topLeft:bU(s,r),bottomRight:bU(o,r)}}function q2(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!q2(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!q2(t[s],e[s],n-1))return!1;return!0}return!1}class Nke{constructor(e,n,r){this.pool=[],this.taskQueue=[],this.onResult=r;for(let i=0;i<n;i++)this.addWorkerToPool(e)}addWorkerToPool(e){const n=new e;n.onerror=r=>{console.log(r)},n.onmessage=r=>{const i=this.pool.findIndex(s=>s.worker===n);if(i!==-1){this.pool[i].currentTaskId=null;const s=JSON.parse(r.data);this.onResult(s),this.executeNextTask()}},this.pool.push({worker:n,workerConstructor:e,currentTaskId:null})}executeTask(e){this.taskQueue.push(e),this.executeNextTask()}executeNextTask(){const e=this.pool.find(n=>n.currentTaskId===null);if(e&&this.taskQueue.length>0){const n=this.taskQueue.shift();e.currentTaskId=n.id,e.worker.postMessage({...n,payload:JSON.stringify(n.payload)})}}terminateTask(e){const n=this.pool.findIndex(r=>r.currentTaskId===e);if(n!==-1){const r=this.pool[n];r.worker.terminate(),this.pool.splice(n,1),this.addWorkerToPool(r.workerConstructor)}}terminateAllTasks(){this.pool.forEach(e=>e.worker.terminate()),this.pool=[]}}function Fke(t){return new Worker("/assets/DexieQueryWorker-IH1z9I_m.js",{name:t==null?void 0:t.name})}const Bke={inject:{"vs:#decl":`
attribute vec2 instanceDashArrays;
attribute float instanceDashOffsets;
varying vec2 vDashArray;
varying float vDashOffset;
`,"vs:#main-end":`
vDashArray = instanceDashArrays;
vDashOffset = instanceDashOffsets / width.x;
`,"fs:#decl":`
uniform float dashAlignMode;
uniform float capType;
uniform bool dashGapPickable;
varying vec2 vDashArray;
varying float vDashOffset;

float round(float x) {
  return floor(x + 0.5);
}
`,"fs:#main-start":`
  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float offset;

  if (unitLength > 0.0) {
    if (dashAlignMode == 0.0) {
      offset = vDashOffset;
    } else {
      unitLength = vPathLength / round(vPathLength / unitLength);
      offset = solidLength / 2.0;
    }

    float unitOffset = mod(vPathPosition.y + offset, unitLength);

    if (gapLength > 0.0 && unitOffset > solidLength) {
      if (capType <= 0.5) {
        if (!(dashGapPickable && picking_uActive)) {
          discard;
        }
      } else {
        float distToEnd = length(vec2(
          min(unitOffset - solidLength, unitLength - unitOffset),
          vPathPosition.x
        ));
        if (distToEnd > 1.0) {
          if (!(dashGapPickable && picking_uActive)) {
            discard;
          }
        }
      }
    }
  }
`}},zke={inject:{"vs:#decl":`
attribute float instanceOffsets;
`,"vs:DECKGL_FILTER_SIZE":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  size *= offsetWidth;
`,"vs:#main-end":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  float offsetDir = sign(instanceOffsets);
  vPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;
  vPathPosition.y *= offsetWidth;
  vPathLength *= offsetWidth;
`,"fs:#main-start":`
  float isInside;
  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);
  if (isInside == 0.0) {
    discard;
  }
`}},Uke={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class KO extends WO{constructor({dash:e=!1,offset:n=!1,highPrecisionDash:r=!1}={}){super({dash:e||r,offset:n,highPrecisionDash:r})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let n={};return e.opts.dash&&(n=$2(n,Bke)),e.opts.offset&&(n=$2(n,zke)),n}initializeState(e,n){const r=this.getAttributeManager();!r||!n.isEnabled(this)||(n.opts.dash&&r.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),n.opts.highPrecisionDash&&r.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:n.getDashOffsets.bind(this)}}),n.opts.offset&&r.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,n){if(!n.isEnabled(this))return;const r={};n.opts.dash&&(r.dashAlignMode=this.props.dashJustified?1:0,r.dashGapPickable=!!this.props.dashGapPickable),this.state.model.setUniforms(r)}getDashOffsets(e){const n=[0],r=this.props.positionFormat==="XY"?2:3,i=Array.isArray(e[0]),s=i?e.length:e.length/r;let o,a;for(let l=0;l<s-1;l++)o=i?e[l]:e.slice(l*r,l*r+r),o=this.projectPosition(o),l>0&&(n[l]=n[l-1]+y2e(a,o)),a=o;return n}}F(KO,"defaultProps",Uke);F(KO,"extensionName","PathStyleExtension");const $ke="lMsL1JaJvv3fuJWczgIa";function jke(t,e=[0]){let n=[];return e.forEach(r=>{r===0?n=t:t.forEach(i=>n.push([i[0]+r,i[1]]))}),n}function Gke(t,e=[0]){const n=[];return t.forEach(r=>{r.forEach(i=>{const s=`${i.country}/${i.name_1||""}/${i.name_2||""}`;i.coordinates.forEach(o=>{n.push({polygon:jke(o,e),name:s})})})}),n}const Hke=t=>{const e=L0(),[n,r]=P.useState({longitude:e.x,latitude:e.y,zoom:e.zoom}),[i,s]=P.useState(-1),[o,a]=P.useState([]),[l,c]=P.useState(null),[u,h]=P.useState([[],[],[]]),[f,g]=P.useState([]),[m,y]=P.useState(null);nI(),P.useEffect(()=>{const v=new Nke(Fke,10,E=>{try{const S=E.payload.polygons.map(R=>Gke(R));h(S);const C=E.payload.points.flat(1).map(R=>({name:R.name,coordinates:[R.lng,R.lat]}));g(C)}catch(S){console.log(S,E)}});return y(v),()=>{v&&v.terminateAllTasks()}},[]),P.useEffect(()=>{if(m===null||t.width===0||t.height===0)return;const{topLeft:v,bottomRight:E}=Dke(t.width,t.height,{lng:n.longitude,lat:n.latitude},n.zoom),S=Math.ceil(n.zoom),C=Lke(v,E,S);if(q2(o,C[gh-1],2))return;a(C[gh-1]),i!==-1&&m.terminateTask(i);const R=i+1;s(R),m.executeTask({dbName:t.uuid,type:"dexie",id:R,payload:{mortonNumbers:kke(C),zoom:Math.floor(n.zoom)}})},[m,n.longitude,n.latitude,n.zoom,t.width,t.height]);const x=[new Em({id:"region1-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:v=>v.polygon,getFillColor:v=>[10,80,10,5],getLineColor:v=>[40,100,40],getLineWidth:1,getDashArray:[3,2],dashJustified:!0,dashGapPickable:!0,extensions:[new KO({dash:!0})],onHover:v=>c(v)}),new Em({id:"region2-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:v=>v.polygon,getFillColor:v=>[80,10,10,5],getLineColor:v=>[80,80,100],getLineWidth:1,onHover:v=>c(v)}),new Em({id:"country-layer",pickable:!0,data:u[0],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,lineWidthScale:10,getPolygon:v=>v.polygon,getFillColor:v=>[10,10,80,5],getLineColor:v=>[200,200,40],getLineWidth:1,onHover:v=>c(v)}),new XO({id:"scatter-plot-layer",data:f,getPosition:v=>v.coordinates,getRadius:2e3,getFillColor:[255,0,0],pickable:!0,onHover:v=>c(v)})],b=()=>{if(!l)return;const{object:v,x:E,y:S}=l;if(!v)return null;const C=v.polygon?`Region: ${v.name}`:v.name?`Location: ${v.name}`:`Route: ${v.source} - ${v.target}`;return K("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:E,top:S,color:"white",backgroundColor:"black",padding:"5px"},children:C})},w=P.useCallback(v=>{const E=v.viewState;r(E)},[]);return!m||i===-1?K(GI,{variant:"indeterminate"}):Ft(wLe,{views:[new zO({repeat:!0})],width:t.width,height:t.height,controller:!0,layers:x,viewState:n,onViewStateChange:w,children:[K(qLe,{mapStyle:`https://api.maptiler.com/maps/${t.map}/style.json?key=${$ke}`}),b(),t.children]})},Vke=()=>Ft("div",{style:{fontSize:"12px",position:"absolute",bottom:0,right:"7px",background:"rgba(255,255,255,0.1)"},children:[K("a",{href:"https://www.maptiler.com/copyright/",target:"_blank",children:" MapTiler"})," ",K("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",children:" OpenStreetMap contributors"})]}),Wke=()=>{const{uuid:t,zoom:e,y:n,x:r,type:i}=L0(),{width:s,height:o}=gM();return K(xM,{uuid:t,type:i,viewportCenter:[e,n,r],backgroundColor:"rgba(230,230,230,0.6)",backgroundPanel:a=>K(Hke,{uuid:t,map:"openstreetmap",width:s,height:o,children:K(Vke,{})})})},Xke=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=L0();return console.log(i),K(xM,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(255,230,230,0.6)",backgroundPanel:s=>K(dW,{...s})})},Yke=()=>{const{type:t}=L0();switch(t){case ci.Racetrack:return K(Xke,{});case ci.Graph:return K(Owe,{});case ci.RealWorld:return K(Wke,{});default:throw new Error(t)}},qke=cZ([{path:"/",element:K("h1",{children:"home"})},{path:"/:projectType/:uuid/:zoom/:y/:x/",element:K(Yke,{}),loader:jJ}]),Kke=document.getElementById("root"),Zke=m$(Kke);Zke.render(K(P.StrictMode,{children:K(vZ,{router:qke})}));export{ts as c,Ih as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
