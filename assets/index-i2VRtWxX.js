function jL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function In(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $8={exports:{}},ZE={},j8={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy=Symbol.for("react.element"),yJ=Symbol.for("react.portal"),bJ=Symbol.for("react.fragment"),_J=Symbol.for("react.strict_mode"),xJ=Symbol.for("react.profiler"),wJ=Symbol.for("react.provider"),EJ=Symbol.for("react.context"),TJ=Symbol.for("react.forward_ref"),SJ=Symbol.for("react.suspense"),CJ=Symbol.for("react.memo"),AJ=Symbol.for("react.lazy"),QB=Symbol.iterator;function PJ(t){return t===null||typeof t!="object"?null:(t=QB&&t[QB]||t["@@iterator"],typeof t=="function"?t:null)}var G8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H8=Object.assign,V8={};function Wg(t,e,n){this.props=t,this.context=e,this.refs=V8,this.updater=n||G8}Wg.prototype.isReactComponent={};Wg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W8(){}W8.prototype=Wg.prototype;function GL(t,e,n){this.props=t,this.context=e,this.refs=V8,this.updater=n||G8}var HL=GL.prototype=new W8;HL.constructor=GL;H8(HL,Wg.prototype);HL.isPureReactComponent=!0;var JB=Array.isArray,X8=Object.prototype.hasOwnProperty,VL={current:null},Y8={key:!0,ref:!0,__self:!0,__source:!0};function q8(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)X8.call(e,r)&&!Y8.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:jy,type:t,key:s,ref:o,props:i,_owner:VL.current}}function RJ(t,e){return{$$typeof:jy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function WL(t){return typeof t=="object"&&t!==null&&t.$$typeof===jy}function IJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eF=/\/+/g;function rA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IJ(""+t.key):e.toString(36)}function fx(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jy:case yJ:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rA(o,0):r,JB(i)?(n="",t!=null&&(n=t.replace(eF,"$&/")+"/"),fx(i,e,n,"",function(c){return c})):i!=null&&(WL(i)&&(i=RJ(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(eF,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",JB(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+rA(s,a);o+=fx(s,e,n,l,i)}else if(l=PJ(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+rA(s,a++),o+=fx(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function T1(t,e,n){if(t==null)return t;var r=[],i=0;return fx(t,r,"","",function(s){return e.call(n,s,i++)}),r}function MJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ws={current:null},px={transition:null},LJ={ReactCurrentDispatcher:ws,ReactCurrentBatchConfig:px,ReactCurrentOwner:VL};dn.Children={map:T1,forEach:function(t,e,n){T1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return T1(t,function(){e++}),e},toArray:function(t){return T1(t,function(e){return e})||[]},only:function(t){if(!WL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dn.Component=Wg;dn.Fragment=bJ;dn.Profiler=xJ;dn.PureComponent=GL;dn.StrictMode=_J;dn.Suspense=SJ;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LJ;dn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H8({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=VL.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)X8.call(e,l)&&!Y8.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:jy,type:t.type,key:i,ref:s,props:r,_owner:o}};dn.createContext=function(t){return t={$$typeof:EJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wJ,_context:t},t.Consumer=t};dn.createElement=q8;dn.createFactory=function(t){var e=q8.bind(null,t);return e.type=t,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(t){return{$$typeof:TJ,render:t}};dn.isValidElement=WL;dn.lazy=function(t){return{$$typeof:AJ,_payload:{_status:-1,_result:t},_init:MJ}};dn.memo=function(t,e){return{$$typeof:CJ,type:t,compare:e===void 0?null:e}};dn.startTransition=function(t){var e=px.transition;px.transition={};try{t()}finally{px.transition=e}};dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dn.useCallback=function(t,e){return ws.current.useCallback(t,e)};dn.useContext=function(t){return ws.current.useContext(t)};dn.useDebugValue=function(){};dn.useDeferredValue=function(t){return ws.current.useDeferredValue(t)};dn.useEffect=function(t,e){return ws.current.useEffect(t,e)};dn.useId=function(){return ws.current.useId()};dn.useImperativeHandle=function(t,e,n){return ws.current.useImperativeHandle(t,e,n)};dn.useInsertionEffect=function(t,e){return ws.current.useInsertionEffect(t,e)};dn.useLayoutEffect=function(t,e){return ws.current.useLayoutEffect(t,e)};dn.useMemo=function(t,e){return ws.current.useMemo(t,e)};dn.useReducer=function(t,e,n){return ws.current.useReducer(t,e,n)};dn.useRef=function(t){return ws.current.useRef(t)};dn.useState=function(t){return ws.current.useState(t)};dn.useSyncExternalStore=function(t,e,n){return ws.current.useSyncExternalStore(t,e,n)};dn.useTransition=function(){return ws.current.useTransition()};dn.version="18.2.0";j8.exports=dn;var P=j8.exports;const Rn=hd(P),lw=jL({__proto__:null,default:Rn},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kJ=P,OJ=Symbol.for("react.element"),NJ=Symbol.for("react.fragment"),DJ=Object.prototype.hasOwnProperty,BJ=kJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FJ={key:!0,ref:!0,__self:!0,__source:!0};function K8(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DJ.call(e,r)&&!FJ.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OJ,type:t,key:s,ref:o,props:i,_owner:BJ.current}}ZE.Fragment=NJ;ZE.jsx=K8;ZE.jsxs=K8;$8.exports=ZE;var J=$8.exports;function zJ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function UJ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $J=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(UJ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=zJ(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Wi="-ms-",cw="-moz-",An="-webkit-",Z8="comm",XL="rule",YL="decl",jJ="@import",Q8="@keyframes",GJ="@layer",HJ=Math.abs,QE=String.fromCharCode,VJ=Object.assign;function WJ(t,e){return Ni(t,0)^45?(((e<<2^Ni(t,0))<<2^Ni(t,1))<<2^Ni(t,2))<<2^Ni(t,3):0}function J8(t){return t.trim()}function XJ(t,e){return(t=e.exec(t))?t[0]:t}function Pn(t,e,n){return t.replace(e,n)}function q2(t,e){return t.indexOf(e)}function Ni(t,e){return t.charCodeAt(e)|0}function Rv(t,e,n){return t.slice(e,n)}function xl(t){return t.length}function qL(t){return t.length}function S1(t,e){return e.push(t),t}function YJ(t,e){return t.map(e).join("")}var JE=1,ig=1,eG=0,js=0,Wr=0,Xg="";function eT(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:JE,column:ig,length:o,return:""}}function Mm(t,e){return VJ(eT("",null,null,"",null,null,0),t,{length:-t.length},e)}function qJ(){return Wr}function KJ(){return Wr=js>0?Ni(Xg,--js):0,ig--,Wr===10&&(ig=1,JE--),Wr}function fo(){return Wr=js<eG?Ni(Xg,js++):0,ig++,Wr===10&&(ig=1,JE++),Wr}function Rl(){return Ni(Xg,js)}function gx(){return js}function Gy(t,e){return Rv(Xg,t,e)}function Iv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tG(t){return JE=ig=1,eG=xl(Xg=t),js=0,[]}function nG(t){return Xg="",t}function mx(t){return J8(Gy(js-1,K2(t===91?t+2:t===40?t+1:t)))}function ZJ(t){for(;(Wr=Rl())&&Wr<33;)fo();return Iv(t)>2||Iv(Wr)>3?"":" "}function QJ(t,e){for(;--e&&fo()&&!(Wr<48||Wr>102||Wr>57&&Wr<65||Wr>70&&Wr<97););return Gy(t,gx()+(e<6&&Rl()==32&&fo()==32))}function K2(t){for(;fo();)switch(Wr){case t:return js;case 34:case 39:t!==34&&t!==39&&K2(Wr);break;case 40:t===41&&K2(t);break;case 92:fo();break}return js}function JJ(t,e){for(;fo()&&t+Wr!==57;)if(t+Wr===84&&Rl()===47)break;return"/*"+Gy(e,js-1)+"*"+QE(t===47?t:fo())}function eee(t){for(;!Iv(Rl());)fo();return Gy(t,js)}function tee(t){return nG(vx("",null,null,null,[""],t=tG(t),0,[0],t))}function vx(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,m=1,b=1,y=1,x=0,_="",w=i,E=s,S=r,A=_;b;)switch(p=x,x=fo()){case 40:if(p!=108&&Ni(A,d-1)==58){q2(A+=Pn(mx(x),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:A+=mx(x);break;case 9:case 10:case 13:case 32:A+=ZJ(p);break;case 92:A+=QJ(gx()-1,7);continue;case 47:switch(Rl()){case 42:case 47:S1(nee(JJ(fo(),gx()),e,n),l);break;default:A+="/"}break;case 123*m:a[c++]=xl(A)*y;case 125*m:case 59:case 0:switch(x){case 0:case 125:b=0;case 59+u:y==-1&&(A=Pn(A,/\f/g,"")),f>0&&xl(A)-d&&S1(f>32?nF(A+";",r,n,d-1):nF(Pn(A," ","")+";",r,n,d-2),l);break;case 59:A+=";";default:if(S1(S=tF(A,e,n,c,u,i,a,_,w=[],E=[],d),s),x===123)if(u===0)vx(A,e,S,S,w,s,d,a,E);else switch(h===99&&Ni(A,3)===110?100:h){case 100:case 108:case 109:case 115:vx(t,S,S,r&&S1(tF(t,S,S,0,0,i,a,_,i,w=[],d),E),i,E,d,a,r?w:E);break;default:vx(A,S,S,S,[""],E,0,a,E)}}c=u=f=0,m=y=1,_=A="",d=o;break;case 58:d=1+xl(A),f=p;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&KJ()==125)continue}switch(A+=QE(x),x*m){case 38:y=u>0?1:(A+="\f",-1);break;case 44:a[c++]=(xl(A)-1)*y,y=1;break;case 64:Rl()===45&&(A+=mx(fo())),h=Rl(),u=d=xl(_=A+=eee(gx())),x++;break;case 45:p===45&&xl(A)==2&&(m=0)}}return s}function tF(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],f=qL(h),p=0,m=0,b=0;p<r;++p)for(var y=0,x=Rv(t,d+1,d=HJ(m=o[p])),_=t;y<f;++y)(_=J8(m>0?h[y]+" "+x:Pn(x,/&\f/g,h[y])))&&(l[b++]=_);return eT(t,e,n,i===0?XL:a,l,c,u)}function nee(t,e,n){return eT(t,e,n,Z8,QE(qJ()),Rv(t,2,-2),0)}function nF(t,e,n,r){return eT(t,e,n,YL,Rv(t,0,r),Rv(t,r+1,-1),r)}function Dp(t,e){for(var n="",r=qL(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function ree(t,e,n,r){switch(t.type){case GJ:if(t.children.length)break;case jJ:case YL:return t.return=t.return||t.value;case Z8:return"";case Q8:return t.return=t.value+"{"+Dp(t.children,r)+"}";case XL:t.value=t.props.join(",")}return xl(n=Dp(t.children,r))?t.return=t.value+"{"+n+"}":""}function iee(t){var e=qL(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function see(t){return function(e){e.root||(e=e.return)&&t(e)}}function rG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var oee=function(e,n,r){for(var i=0,s=0;i=s,s=Rl(),i===38&&s===12&&(n[r]=1),!Iv(s);)fo();return Gy(e,js)},aee=function(e,n){var r=-1,i=44;do switch(Iv(i)){case 0:i===38&&Rl()===12&&(n[r]=1),e[r]+=oee(js-1,n,r);break;case 2:e[r]+=mx(i);break;case 4:if(i===44){e[++r]=Rl()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=QE(i)}while(i=fo());return e},lee=function(e,n){return nG(aee(tG(e),n))},rF=new WeakMap,cee=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!rF.get(r))&&!i){rF.set(e,!0);for(var s=[],o=lee(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},uee=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function iG(t,e){switch(WJ(t,e)){case 5103:return An+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return An+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return An+t+cw+t+Wi+t+t;case 6828:case 4268:return An+t+Wi+t+t;case 6165:return An+t+Wi+"flex-"+t+t;case 5187:return An+t+Pn(t,/(\w+).+(:[^]+)/,An+"box-$1$2"+Wi+"flex-$1$2")+t;case 5443:return An+t+Wi+"flex-item-"+Pn(t,/flex-|-self/,"")+t;case 4675:return An+t+Wi+"flex-line-pack"+Pn(t,/align-content|flex-|-self/,"")+t;case 5548:return An+t+Wi+Pn(t,"shrink","negative")+t;case 5292:return An+t+Wi+Pn(t,"basis","preferred-size")+t;case 6060:return An+"box-"+Pn(t,"-grow","")+An+t+Wi+Pn(t,"grow","positive")+t;case 4554:return An+Pn(t,/([^-])(transform)/g,"$1"+An+"$2")+t;case 6187:return Pn(Pn(Pn(t,/(zoom-|grab)/,An+"$1"),/(image-set)/,An+"$1"),t,"")+t;case 5495:case 3959:return Pn(t,/(image-set\([^]*)/,An+"$1$`$1");case 4968:return Pn(Pn(t,/(.+:)(flex-)?(.*)/,An+"box-pack:$3"+Wi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+An+t+t;case 4095:case 3583:case 4068:case 2532:return Pn(t,/(.+)-inline(.+)/,An+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xl(t)-1-e>6)switch(Ni(t,e+1)){case 109:if(Ni(t,e+4)!==45)break;case 102:return Pn(t,/(.+:)(.+)-([^]+)/,"$1"+An+"$2-$3$1"+cw+(Ni(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~q2(t,"stretch")?iG(Pn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ni(t,e+1)!==115)break;case 6444:switch(Ni(t,xl(t)-3-(~q2(t,"!important")&&10))){case 107:return Pn(t,":",":"+An)+t;case 101:return Pn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+An+(Ni(t,14)===45?"inline-":"")+"box$3$1"+An+"$2$3$1"+Wi+"$2box$3")+t}break;case 5936:switch(Ni(t,e+11)){case 114:return An+t+Wi+Pn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return An+t+Wi+Pn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return An+t+Wi+Pn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return An+t+Wi+t+t}return t}var dee=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case YL:e.return=iG(e.value,e.length);break;case Q8:return Dp([Mm(e,{value:Pn(e.value,"@","@"+An)})],i);case XL:if(e.length)return YJ(e.props,function(s){switch(XJ(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dp([Mm(e,{props:[Pn(s,/:(read-\w+)/,":"+cw+"$1")]})],i);case"::placeholder":return Dp([Mm(e,{props:[Pn(s,/:(plac\w+)/,":"+An+"input-$1")]}),Mm(e,{props:[Pn(s,/:(plac\w+)/,":"+cw+"$1")]}),Mm(e,{props:[Pn(s,/:(plac\w+)/,Wi+"input-$1")]})],i)}return""})}},hee=[dee],fee=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var b=m.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||hee,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var b=m.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)s[b[y]]=!0;a.push(m)});var l,c=[cee,uee];{var u,d=[ree,see(function(m){u.insert(m)})],h=iee(c.concat(i,d)),f=function(b){return Dp(tee(b),h)};l=function(b,y,x,_){u=x,f(b?b+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new $J({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p};function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z.apply(this,arguments)}var sG={exports:{}},Nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=typeof Symbol=="function"&&Symbol.for,KL=Ei?Symbol.for("react.element"):60103,ZL=Ei?Symbol.for("react.portal"):60106,tT=Ei?Symbol.for("react.fragment"):60107,nT=Ei?Symbol.for("react.strict_mode"):60108,rT=Ei?Symbol.for("react.profiler"):60114,iT=Ei?Symbol.for("react.provider"):60109,sT=Ei?Symbol.for("react.context"):60110,QL=Ei?Symbol.for("react.async_mode"):60111,oT=Ei?Symbol.for("react.concurrent_mode"):60111,aT=Ei?Symbol.for("react.forward_ref"):60112,lT=Ei?Symbol.for("react.suspense"):60113,pee=Ei?Symbol.for("react.suspense_list"):60120,cT=Ei?Symbol.for("react.memo"):60115,uT=Ei?Symbol.for("react.lazy"):60116,gee=Ei?Symbol.for("react.block"):60121,mee=Ei?Symbol.for("react.fundamental"):60117,vee=Ei?Symbol.for("react.responder"):60118,yee=Ei?Symbol.for("react.scope"):60119;function Co(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case KL:switch(t=t.type,t){case QL:case oT:case tT:case rT:case nT:case lT:return t;default:switch(t=t&&t.$$typeof,t){case sT:case aT:case uT:case cT:case iT:return t;default:return e}}case ZL:return e}}}function oG(t){return Co(t)===oT}Nn.AsyncMode=QL;Nn.ConcurrentMode=oT;Nn.ContextConsumer=sT;Nn.ContextProvider=iT;Nn.Element=KL;Nn.ForwardRef=aT;Nn.Fragment=tT;Nn.Lazy=uT;Nn.Memo=cT;Nn.Portal=ZL;Nn.Profiler=rT;Nn.StrictMode=nT;Nn.Suspense=lT;Nn.isAsyncMode=function(t){return oG(t)||Co(t)===QL};Nn.isConcurrentMode=oG;Nn.isContextConsumer=function(t){return Co(t)===sT};Nn.isContextProvider=function(t){return Co(t)===iT};Nn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===KL};Nn.isForwardRef=function(t){return Co(t)===aT};Nn.isFragment=function(t){return Co(t)===tT};Nn.isLazy=function(t){return Co(t)===uT};Nn.isMemo=function(t){return Co(t)===cT};Nn.isPortal=function(t){return Co(t)===ZL};Nn.isProfiler=function(t){return Co(t)===rT};Nn.isStrictMode=function(t){return Co(t)===nT};Nn.isSuspense=function(t){return Co(t)===lT};Nn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===tT||t===oT||t===rT||t===nT||t===lT||t===pee||typeof t=="object"&&t!==null&&(t.$$typeof===uT||t.$$typeof===cT||t.$$typeof===iT||t.$$typeof===sT||t.$$typeof===aT||t.$$typeof===mee||t.$$typeof===vee||t.$$typeof===yee||t.$$typeof===gee)};Nn.typeOf=Co;sG.exports=Nn;var bee=sG.exports,aG=bee,_ee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lG={};lG[aG.ForwardRef]=_ee;lG[aG.Memo]=xee;var wee=!0;function cG(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var JL=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||wee===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},ek=function(e,n,r){JL(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Eee(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Tee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},See=/[A-Z]|^ms/g,Cee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uG=function(e){return e.charCodeAt(1)===45},iF=function(e){return e!=null&&typeof e!="boolean"},iA=rG(function(t){return uG(t)?t:t.replace(See,"-$&").toLowerCase()}),sF=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Cee,function(r,i,s){return wl={name:i,styles:s,next:wl},i})}return Tee[e]!==1&&!uG(e)&&typeof n=="number"&&n!==0?n+"px":n};function Mv(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return wl={name:n.name,styles:n.styles,next:wl},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)wl={name:r.name,styles:r.styles,next:wl},r=r.next;var i=n.styles+";";return i}return Aee(t,e,n)}case"function":{if(t!==void 0){var s=wl,o=n(t);return wl=s,Mv(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Aee(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Mv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":iF(o)&&(r+=iA(s)+":"+sF(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)iF(o[a])&&(r+=iA(s)+":"+sF(s,o[a])+";");else{var l=Mv(t,e,o);switch(s){case"animation":case"animationName":{r+=iA(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var oF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,wl,dT=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";wl=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Mv(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Mv(r,n,e[a]),i&&(s+=o[a]);oF.lastIndex=0;for(var l="",c;(c=oF.exec(s))!==null;)l+="-"+c[1];var u=Eee(s)+l;return{name:u,styles:s,next:wl}},Pee=function(e){return e()},dG=lw.useInsertionEffect?lw.useInsertionEffect:!1,hG=dG||Pee,aF=dG||P.useLayoutEffect,hT={}.hasOwnProperty,fG=P.createContext(typeof HTMLElement<"u"?fee({key:"css"}):null);fG.Provider;var tk=function(e){return P.forwardRef(function(n,r){var i=P.useContext(fG);return e(n,i,r)})},fT=P.createContext({}),Z2="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pG=function(e,n){var r={};for(var i in n)hT.call(n,i)&&(r[i]=n[i]);return r[Z2]=e,r},Ree=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return JL(n,r,i),hG(function(){return ek(n,r,i)}),null},Iee=tk(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[Z2],s=[r],o="";typeof t.className=="string"?o=cG(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=dT(s,void 0,P.useContext(fT));o+=e.key+"-"+a.name;var l={};for(var c in t)hT.call(t,c)&&c!=="css"&&c!==Z2&&(l[c]=t[c]);return l.ref=n,l.className=o,P.createElement(P.Fragment,null,P.createElement(Ree,{cache:e,serialized:a,isStringTag:typeof i=="string"}),P.createElement(i,l))}),gG=Iee,lo=J.Fragment;function $(t,e,n){return hT.call(e,"css")?J.jsx(gG,pG(t,e),n):J.jsx(t,e,n)}function Be(t,e,n){return hT.call(e,"css")?J.jsxs(gG,pG(t,e),n):J.jsxs(t,e,n)}var mG={exports:{}},Ao={},vG={exports:{}},yG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var Z=j.length;j.push(H);e:for(;0<Z;){var X=Z-1>>>1,ee=j[X];if(0<i(ee,H))j[X]=H,j[Z]=ee,Z=X;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Z=j.pop();if(Z!==H){j[0]=Z;e:for(var X=0,ee=j.length,ve=ee>>>1;X<ve;){var oe=2*(X+1)-1,fe=j[oe],be=oe+1,Le=j[be];if(0>i(fe,Z))be<ee&&0>i(Le,fe)?(j[X]=Le,j[be]=Z,X=be):(j[X]=fe,j[oe]=Z,X=oe);else if(be<ee&&0>i(Le,Z))j[X]=Le,j[be]=Z,X=be;else break e}}return H}function i(j,H){var Z=j.sortIndex-H.sortIndex;return Z!==0?Z:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=j)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function w(j){if(m=!1,_(j),!p)if(n(l)!==null)p=!0,q(E);else{var H=n(c);H!==null&&G(w,H.startTime-j)}}function E(j,H){p=!1,m&&(m=!1,y(k),k=-1),f=!0;var Z=h;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||j&&!B());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var ee=X(d.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),_(H)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var oe=n(c);oe!==null&&G(w,oe.startTime-H),ve=!1}return ve}finally{d=null,h=Z,f=!1}}var S=!1,A=null,k=-1,M=5,I=-1;function B(){return!(t.unstable_now()-I<M)}function R(){if(A!==null){var j=t.unstable_now();I=j;var H=!0;try{H=A(!0,j)}finally{H?O():(S=!1,A=null)}}else S=!1}var O;if(typeof x=="function")O=function(){x(R)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,F=C.port2;C.port1.onmessage=R,O=function(){F.postMessage(null)}}else O=function(){b(R,0)};function q(j){A=j,S||(S=!0,O())}function G(j,H){k=b(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(E))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Z=h;h=H;try{return j()}finally{h=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=h;h=j;try{return H()}finally{h=Z}},t.unstable_scheduleCallback=function(j,H,Z){var X=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Z+ee,j={id:u++,callback:H,priorityLevel:j,startTime:Z,expirationTime:ee,sortIndex:-1},Z>X?(j.sortIndex=Z,e(c,j),n(l)===null&&j===n(c)&&(m?(y(k),k=-1):m=!0,G(w,Z-X))):(j.sortIndex=ee,e(l,j),p||f||(p=!0,q(E))),j},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(j){var H=h;return function(){var Z=h;h=H;try{return j.apply(this,arguments)}finally{h=Z}}}})(yG);vG.exports=yG;var Mee=vG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bG=P,_o=Mee;function Ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _G=new Set,Lv={};function Qh(t,e){sg(t,e),sg(t+"Capture",e)}function sg(t,e){for(Lv[t]=e,t=0;t<e.length;t++)_G.add(e[t])}var Sc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q2=Object.prototype.hasOwnProperty,Lee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lF={},cF={};function kee(t){return Q2.call(cF,t)?!0:Q2.call(lF,t)?!1:Lee.test(t)?cF[t]=!0:(lF[t]=!0,!1)}function Oee(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nee(t,e,n,r){if(e===null||typeof e>"u"||Oee(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Es(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bi[t]=new Es(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bi[e]=new Es(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bi[t]=new Es(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bi[t]=new Es(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bi[t]=new Es(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bi[t]=new Es(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bi[t]=new Es(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bi[t]=new Es(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bi[t]=new Es(t,5,!1,t.toLowerCase(),null,!1,!1)});var nk=/[\-:]([a-z])/g;function rk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nk,rk);Bi[e]=new Es(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nk,rk);Bi[e]=new Es(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nk,rk);Bi[e]=new Es(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bi[t]=new Es(t,1,!1,t.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new Es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bi[t]=new Es(t,1,!1,t.toLowerCase(),null,!0,!0)});function ik(t,e,n,r){var i=Bi.hasOwnProperty(e)?Bi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nee(e,n,i,r)&&(n=null),r||i===null?kee(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bc=bG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C1=Symbol.for("react.element"),gp=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),J2=Symbol.for("react.profiler"),xG=Symbol.for("react.provider"),wG=Symbol.for("react.context"),ok=Symbol.for("react.forward_ref"),eR=Symbol.for("react.suspense"),tR=Symbol.for("react.suspense_list"),ak=Symbol.for("react.memo"),yu=Symbol.for("react.lazy"),EG=Symbol.for("react.offscreen"),uF=Symbol.iterator;function Lm(t){return t===null||typeof t!="object"?null:(t=uF&&t[uF]||t["@@iterator"],typeof t=="function"?t:null)}var wr=Object.assign,sA;function w0(t){if(sA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sA=e&&e[1]||""}return`
`+sA+t}var oA=!1;function aA(t,e){if(!t||oA)return"";oA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{oA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?w0(t):""}function Dee(t){switch(t.tag){case 5:return w0(t.type);case 16:return w0("Lazy");case 13:return w0("Suspense");case 19:return w0("SuspenseList");case 0:case 2:case 15:return t=aA(t.type,!1),t;case 11:return t=aA(t.type.render,!1),t;case 1:return t=aA(t.type,!0),t;default:return""}}function nR(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mp:return"Fragment";case gp:return"Portal";case J2:return"Profiler";case sk:return"StrictMode";case eR:return"Suspense";case tR:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wG:return(t.displayName||"Context")+".Consumer";case xG:return(t._context.displayName||"Context")+".Provider";case ok:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ak:return e=t.displayName||null,e!==null?e:nR(t.type)||"Memo";case yu:e=t._payload,t=t._init;try{return nR(t(e))}catch{}}return null}function Bee(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nR(e);case 8:return e===sk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function td(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fee(t){var e=TG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function A1(t){t._valueTracker||(t._valueTracker=Fee(t))}function SG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rR(t,e){var n=e.checked;return wr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dF(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=td(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CG(t,e){e=e.checked,e!=null&&ik(t,"checked",e,!1)}function iR(t,e){CG(t,e);var n=td(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sR(t,e.type,n):e.hasOwnProperty("defaultValue")&&sR(t,e.type,td(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hF(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sR(t,e,n){(e!=="number"||uw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var E0=Array.isArray;function Bp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+td(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function oR(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return wr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fF(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ke(92));if(E0(n)){if(1<n.length)throw Error(Ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:td(n)}}function AG(t,e){var n=td(e.value),r=td(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pF(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aR(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var P1,RG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(P1=P1||document.createElement("div"),P1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=P1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kv(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var q0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zee=["Webkit","ms","Moz","O"];Object.keys(q0).forEach(function(t){zee.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),q0[e]=q0[t]})});function IG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||q0.hasOwnProperty(t)&&q0[t]?(""+e).trim():e+"px"}function MG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Uee=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lR(t,e){if(e){if(Uee[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function cR(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uR=null;function lk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dR=null,Fp=null,zp=null;function gF(t){if(t=Wy(t)){if(typeof dR!="function")throw Error(Ke(280));var e=t.stateNode;e&&(e=yT(e),dR(t.stateNode,t.type,e))}}function LG(t){Fp?zp?zp.push(t):zp=[t]:Fp=t}function kG(){if(Fp){var t=Fp,e=zp;if(zp=Fp=null,gF(t),e)for(t=0;t<e.length;t++)gF(e[t])}}function OG(t,e){return t(e)}function NG(){}var lA=!1;function DG(t,e,n){if(lA)return t(e,n);lA=!0;try{return OG(t,e,n)}finally{lA=!1,(Fp!==null||zp!==null)&&(NG(),kG())}}function Ov(t,e){var n=t.stateNode;if(n===null)return null;var r=yT(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ke(231,e,typeof n));return n}var hR=!1;if(Sc)try{var km={};Object.defineProperty(km,"passive",{get:function(){hR=!0}}),window.addEventListener("test",km,km),window.removeEventListener("test",km,km)}catch{hR=!1}function $ee(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var K0=!1,dw=null,hw=!1,fR=null,jee={onError:function(t){K0=!0,dw=t}};function Gee(t,e,n,r,i,s,o,a,l){K0=!1,dw=null,$ee.apply(jee,arguments)}function Hee(t,e,n,r,i,s,o,a,l){if(Gee.apply(this,arguments),K0){if(K0){var c=dw;K0=!1,dw=null}else throw Error(Ke(198));hw||(hw=!0,fR=c)}}function Jh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mF(t){if(Jh(t)!==t)throw Error(Ke(188))}function Vee(t){var e=t.alternate;if(!e){if(e=Jh(t),e===null)throw Error(Ke(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mF(i),t;if(s===r)return mF(i),e;s=s.sibling}throw Error(Ke(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ke(189))}}if(n.alternate!==r)throw Error(Ke(190))}if(n.tag!==3)throw Error(Ke(188));return n.stateNode.current===n?t:e}function FG(t){return t=Vee(t),t!==null?zG(t):null}function zG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zG(t);if(e!==null)return e;t=t.sibling}return null}var UG=_o.unstable_scheduleCallback,vF=_o.unstable_cancelCallback,Wee=_o.unstable_shouldYield,Xee=_o.unstable_requestPaint,zr=_o.unstable_now,Yee=_o.unstable_getCurrentPriorityLevel,ck=_o.unstable_ImmediatePriority,$G=_o.unstable_UserBlockingPriority,fw=_o.unstable_NormalPriority,qee=_o.unstable_LowPriority,jG=_o.unstable_IdlePriority,pT=null,Il=null;function Kee(t){if(Il&&typeof Il.onCommitFiberRoot=="function")try{Il.onCommitFiberRoot(pT,t,void 0,(t.current.flags&128)===128)}catch{}}var za=Math.clz32?Math.clz32:Jee,Zee=Math.log,Qee=Math.LN2;function Jee(t){return t>>>=0,t===0?32:31-(Zee(t)/Qee|0)|0}var R1=64,I1=4194304;function T0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=T0(a):(s&=o,s!==0&&(r=T0(s)))}else o=n&~i,o!==0?r=T0(o):s!==0&&(r=T0(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-za(e),i=1<<n,r|=t[n],e&=~i;return r}function ete(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tte(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-za(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=ete(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function pR(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GG(){var t=R1;return R1<<=1,!(R1&4194240)&&(R1=64),t}function cA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hy(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-za(e),t[e]=n}function nte(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-za(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-za(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var On=0;function HG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VG,dk,WG,XG,YG,gR=!1,M1=[],Uu=null,$u=null,ju=null,Nv=new Map,Dv=new Map,Su=[],rte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yF(t,e){switch(t){case"focusin":case"focusout":Uu=null;break;case"dragenter":case"dragleave":$u=null;break;case"mouseover":case"mouseout":ju=null;break;case"pointerover":case"pointerout":Nv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dv.delete(e.pointerId)}}function Om(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wy(e),e!==null&&dk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ite(t,e,n,r,i){switch(e){case"focusin":return Uu=Om(Uu,t,e,n,r,i),!0;case"dragenter":return $u=Om($u,t,e,n,r,i),!0;case"mouseover":return ju=Om(ju,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nv.set(s,Om(Nv.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dv.set(s,Om(Dv.get(s)||null,t,e,n,r,i)),!0}return!1}function qG(t){var e=ih(t.target);if(e!==null){var n=Jh(e);if(n!==null){if(e=n.tag,e===13){if(e=BG(n),e!==null){t.blockedOn=e,YG(t.priority,function(){WG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mR(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uR=r,n.target.dispatchEvent(r),uR=null}else return e=Wy(n),e!==null&&dk(e),t.blockedOn=n,!1;e.shift()}return!0}function bF(t,e,n){yx(t)&&n.delete(e)}function ste(){gR=!1,Uu!==null&&yx(Uu)&&(Uu=null),$u!==null&&yx($u)&&($u=null),ju!==null&&yx(ju)&&(ju=null),Nv.forEach(bF),Dv.forEach(bF)}function Nm(t,e){t.blockedOn===e&&(t.blockedOn=null,gR||(gR=!0,_o.unstable_scheduleCallback(_o.unstable_NormalPriority,ste)))}function Bv(t){function e(i){return Nm(i,t)}if(0<M1.length){Nm(M1[0],t);for(var n=1;n<M1.length;n++){var r=M1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Uu!==null&&Nm(Uu,t),$u!==null&&Nm($u,t),ju!==null&&Nm(ju,t),Nv.forEach(e),Dv.forEach(e),n=0;n<Su.length;n++)r=Su[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Su.length&&(n=Su[0],n.blockedOn===null);)qG(n),n.blockedOn===null&&Su.shift()}var Up=Bc.ReactCurrentBatchConfig,gw=!0;function ote(t,e,n,r){var i=On,s=Up.transition;Up.transition=null;try{On=1,hk(t,e,n,r)}finally{On=i,Up.transition=s}}function ate(t,e,n,r){var i=On,s=Up.transition;Up.transition=null;try{On=4,hk(t,e,n,r)}finally{On=i,Up.transition=s}}function hk(t,e,n,r){if(gw){var i=mR(t,e,n,r);if(i===null)bA(t,e,r,mw,n),yF(t,r);else if(ite(i,t,e,n,r))r.stopPropagation();else if(yF(t,r),e&4&&-1<rte.indexOf(t)){for(;i!==null;){var s=Wy(i);if(s!==null&&VG(s),s=mR(t,e,n,r),s===null&&bA(t,e,r,mw,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bA(t,e,r,null,n)}}var mw=null;function mR(t,e,n,r){if(mw=null,t=lk(r),t=ih(t),t!==null)if(e=Jh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mw=t,null}function KG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yee()){case ck:return 1;case $G:return 4;case fw:case qee:return 16;case jG:return 536870912;default:return 16}default:return 16}}var Lu=null,fk=null,bx=null;function ZG(){if(bx)return bx;var t,e=fk,n=e.length,r,i="value"in Lu?Lu.value:Lu.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return bx=i.slice(t,1<r?1-r:void 0)}function _x(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function L1(){return!0}function _F(){return!1}function Po(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?L1:_F,this.isPropagationStopped=_F,this}return wr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=L1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=L1)},persist:function(){},isPersistent:L1}),e}var Yg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pk=Po(Yg),Vy=wr({},Yg,{view:0,detail:0}),lte=Po(Vy),uA,dA,Dm,gT=wr({},Vy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dm&&(Dm&&t.type==="mousemove"?(uA=t.screenX-Dm.screenX,dA=t.screenY-Dm.screenY):dA=uA=0,Dm=t),uA)},movementY:function(t){return"movementY"in t?t.movementY:dA}}),xF=Po(gT),cte=wr({},gT,{dataTransfer:0}),ute=Po(cte),dte=wr({},Vy,{relatedTarget:0}),hA=Po(dte),hte=wr({},Yg,{animationName:0,elapsedTime:0,pseudoElement:0}),fte=Po(hte),pte=wr({},Yg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gte=Po(pte),mte=wr({},Yg,{data:0}),wF=Po(mte),vte={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yte={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bte={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _te(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bte[t])?!!e[t]:!1}function gk(){return _te}var xte=wr({},Vy,{key:function(t){if(t.key){var e=vte[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_x(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yte[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gk,charCode:function(t){return t.type==="keypress"?_x(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_x(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wte=Po(xte),Ete=wr({},gT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EF=Po(Ete),Tte=wr({},Vy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gk}),Ste=Po(Tte),Cte=wr({},Yg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ate=Po(Cte),Pte=wr({},gT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rte=Po(Pte),Ite=[9,13,27,32],mk=Sc&&"CompositionEvent"in window,Z0=null;Sc&&"documentMode"in document&&(Z0=document.documentMode);var Mte=Sc&&"TextEvent"in window&&!Z0,QG=Sc&&(!mk||Z0&&8<Z0&&11>=Z0),TF=" ",SF=!1;function JG(t,e){switch(t){case"keyup":return Ite.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vp=!1;function Lte(t,e){switch(t){case"compositionend":return eH(e);case"keypress":return e.which!==32?null:(SF=!0,TF);case"textInput":return t=e.data,t===TF&&SF?null:t;default:return null}}function kte(t,e){if(vp)return t==="compositionend"||!mk&&JG(t,e)?(t=ZG(),bx=fk=Lu=null,vp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QG&&e.locale!=="ko"?null:e.data;default:return null}}var Ote={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ote[t.type]:e==="textarea"}function tH(t,e,n,r){LG(r),e=vw(e,"onChange"),0<e.length&&(n=new pk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Q0=null,Fv=null;function Nte(t){hH(t,0)}function mT(t){var e=_p(t);if(SG(e))return t}function Dte(t,e){if(t==="change")return e}var nH=!1;if(Sc){var fA;if(Sc){var pA="oninput"in document;if(!pA){var AF=document.createElement("div");AF.setAttribute("oninput","return;"),pA=typeof AF.oninput=="function"}fA=pA}else fA=!1;nH=fA&&(!document.documentMode||9<document.documentMode)}function PF(){Q0&&(Q0.detachEvent("onpropertychange",rH),Fv=Q0=null)}function rH(t){if(t.propertyName==="value"&&mT(Fv)){var e=[];tH(e,Fv,t,lk(t)),DG(Nte,e)}}function Bte(t,e,n){t==="focusin"?(PF(),Q0=e,Fv=n,Q0.attachEvent("onpropertychange",rH)):t==="focusout"&&PF()}function Fte(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mT(Fv)}function zte(t,e){if(t==="click")return mT(e)}function Ute(t,e){if(t==="input"||t==="change")return mT(e)}function $te(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Va=typeof Object.is=="function"?Object.is:$te;function zv(t,e){if(Va(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Q2.call(e,i)||!Va(t[i],e[i]))return!1}return!0}function RF(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function IF(t,e){var n=RF(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RF(n)}}function iH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sH(){for(var t=window,e=uw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uw(t.document)}return e}function vk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jte(t){var e=sH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iH(n.ownerDocument.documentElement,n)){if(r!==null&&vk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=IF(n,s);var o=IF(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gte=Sc&&"documentMode"in document&&11>=document.documentMode,yp=null,vR=null,J0=null,yR=!1;function MF(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yR||yp==null||yp!==uw(r)||(r=yp,"selectionStart"in r&&vk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),J0&&zv(J0,r)||(J0=r,r=vw(vR,"onSelect"),0<r.length&&(e=new pk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yp)))}function k1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bp={animationend:k1("Animation","AnimationEnd"),animationiteration:k1("Animation","AnimationIteration"),animationstart:k1("Animation","AnimationStart"),transitionend:k1("Transition","TransitionEnd")},gA={},oH={};Sc&&(oH=document.createElement("div").style,"AnimationEvent"in window||(delete bp.animationend.animation,delete bp.animationiteration.animation,delete bp.animationstart.animation),"TransitionEvent"in window||delete bp.transitionend.transition);function vT(t){if(gA[t])return gA[t];if(!bp[t])return t;var e=bp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oH)return gA[t]=e[n];return t}var aH=vT("animationend"),lH=vT("animationiteration"),cH=vT("animationstart"),uH=vT("transitionend"),dH=new Map,LF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fd(t,e){dH.set(t,e),Qh(e,[t])}for(var mA=0;mA<LF.length;mA++){var vA=LF[mA],Hte=vA.toLowerCase(),Vte=vA[0].toUpperCase()+vA.slice(1);fd(Hte,"on"+Vte)}fd(aH,"onAnimationEnd");fd(lH,"onAnimationIteration");fd(cH,"onAnimationStart");fd("dblclick","onDoubleClick");fd("focusin","onFocus");fd("focusout","onBlur");fd(uH,"onTransitionEnd");sg("onMouseEnter",["mouseout","mouseover"]);sg("onMouseLeave",["mouseout","mouseover"]);sg("onPointerEnter",["pointerout","pointerover"]);sg("onPointerLeave",["pointerout","pointerover"]);Qh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var S0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wte=new Set("cancel close invalid load scroll toggle".split(" ").concat(S0));function kF(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hee(r,e,void 0,t),t.currentTarget=null}function hH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;kF(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;kF(i,a,c),s=l}}}if(hw)throw t=fR,hw=!1,fR=null,t}function tr(t,e){var n=e[ER];n===void 0&&(n=e[ER]=new Set);var r=t+"__bubble";n.has(r)||(fH(e,t,2,!1),n.add(r))}function yA(t,e,n){var r=0;e&&(r|=4),fH(n,t,r,e)}var O1="_reactListening"+Math.random().toString(36).slice(2);function Uv(t){if(!t[O1]){t[O1]=!0,_G.forEach(function(n){n!=="selectionchange"&&(Wte.has(n)||yA(n,!1,t),yA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[O1]||(e[O1]=!0,yA("selectionchange",!1,e))}}function fH(t,e,n,r){switch(KG(e)){case 1:var i=ote;break;case 4:i=ate;break;default:i=hk}n=i.bind(null,e,n,t),i=void 0,!hR||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bA(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ih(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}DG(function(){var c=s,u=lk(n),d=[];e:{var h=dH.get(t);if(h!==void 0){var f=pk,p=t;switch(t){case"keypress":if(_x(n)===0)break e;case"keydown":case"keyup":f=wte;break;case"focusin":p="focus",f=hA;break;case"focusout":p="blur",f=hA;break;case"beforeblur":case"afterblur":f=hA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=xF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ute;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ste;break;case aH:case lH:case cH:f=fte;break;case uH:f=Ate;break;case"scroll":f=lte;break;case"wheel":f=Rte;break;case"copy":case"cut":case"paste":f=gte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=EF}var m=(e&4)!==0,b=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var x=c,_;x!==null;){_=x;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=Ov(x,y),w!=null&&m.push($v(x,w,_)))),b)break;x=x.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==uR&&(p=n.relatedTarget||n.fromElement)&&(ih(p)||p[Cc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?ih(p):null,p!==null&&(b=Jh(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=xF,w="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=EF,w="onPointerLeave",y="onPointerEnter",x="pointer"),b=f==null?h:_p(f),_=p==null?h:_p(p),h=new m(w,x+"leave",f,n,u),h.target=b,h.relatedTarget=_,w=null,ih(u)===c&&(m=new m(y,x+"enter",p,n,u),m.target=_,m.relatedTarget=b,w=m),b=w,f&&p)t:{for(m=f,y=p,x=0,_=m;_;_=If(_))x++;for(_=0,w=y;w;w=If(w))_++;for(;0<x-_;)m=If(m),x--;for(;0<_-x;)y=If(y),_--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=If(m),y=If(y)}m=null}else m=null;f!==null&&OF(d,h,f,m,!1),p!==null&&b!==null&&OF(d,b,p,m,!0)}}e:{if(h=c?_p(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=Dte;else if(CF(h))if(nH)E=Ute;else{E=Fte;var S=Bte}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=zte);if(E&&(E=E(t,c))){tH(d,E,n,u);break e}S&&S(t,h,c),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&sR(h,"number",h.value)}switch(S=c?_p(c):window,t){case"focusin":(CF(S)||S.contentEditable==="true")&&(yp=S,vR=c,J0=null);break;case"focusout":J0=vR=yp=null;break;case"mousedown":yR=!0;break;case"contextmenu":case"mouseup":case"dragend":yR=!1,MF(d,n,u);break;case"selectionchange":if(Gte)break;case"keydown":case"keyup":MF(d,n,u)}var A;if(mk)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else vp?JG(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(QG&&n.locale!=="ko"&&(vp||k!=="onCompositionStart"?k==="onCompositionEnd"&&vp&&(A=ZG()):(Lu=u,fk="value"in Lu?Lu.value:Lu.textContent,vp=!0)),S=vw(c,k),0<S.length&&(k=new wF(k,t,null,n,u),d.push({event:k,listeners:S}),A?k.data=A:(A=eH(n),A!==null&&(k.data=A)))),(A=Mte?Lte(t,n):kte(t,n))&&(c=vw(c,"onBeforeInput"),0<c.length&&(u=new wF("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}hH(d,e)})}function $v(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ov(t,n),s!=null&&r.unshift($v(t,s,i)),s=Ov(t,e),s!=null&&r.push($v(t,s,i))),t=t.return}return r}function If(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function OF(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ov(n,s),l!=null&&o.unshift($v(n,l,a))):i||(l=Ov(n,s),l!=null&&o.push($v(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xte=/\r\n?/g,Yte=/\u0000|\uFFFD/g;function NF(t){return(typeof t=="string"?t:""+t).replace(Xte,`
`).replace(Yte,"")}function N1(t,e,n){if(e=NF(e),NF(t)!==e&&n)throw Error(Ke(425))}function yw(){}var bR=null,_R=null;function xR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wR=typeof setTimeout=="function"?setTimeout:void 0,qte=typeof clearTimeout=="function"?clearTimeout:void 0,DF=typeof Promise=="function"?Promise:void 0,Kte=typeof queueMicrotask=="function"?queueMicrotask:typeof DF<"u"?function(t){return DF.resolve(null).then(t).catch(Zte)}:wR;function Zte(t){setTimeout(function(){throw t})}function _A(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bv(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bv(e)}function Gu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qg=Math.random().toString(36).slice(2),Tl="__reactFiber$"+qg,jv="__reactProps$"+qg,Cc="__reactContainer$"+qg,ER="__reactEvents$"+qg,Qte="__reactListeners$"+qg,Jte="__reactHandles$"+qg;function ih(t){var e=t[Tl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cc]||n[Tl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BF(t);t!==null;){if(n=t[Tl])return n;t=BF(t)}return e}t=n,n=t.parentNode}return null}function Wy(t){return t=t[Tl]||t[Cc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _p(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ke(33))}function yT(t){return t[jv]||null}var TR=[],xp=-1;function pd(t){return{current:t}}function sr(t){0>xp||(t.current=TR[xp],TR[xp]=null,xp--)}function Kn(t,e){xp++,TR[xp]=t.current,t.current=e}var nd={},ns=pd(nd),Bs=pd(!1),Mh=nd;function og(t,e){var n=t.type.contextTypes;if(!n)return nd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fs(t){return t=t.childContextTypes,t!=null}function bw(){sr(Bs),sr(ns)}function FF(t,e,n){if(ns.current!==nd)throw Error(Ke(168));Kn(ns,e),Kn(Bs,n)}function pH(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ke(108,Bee(t)||"Unknown",i));return wr({},n,r)}function _w(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nd,Mh=ns.current,Kn(ns,t),Kn(Bs,Bs.current),!0}function zF(t,e,n){var r=t.stateNode;if(!r)throw Error(Ke(169));n?(t=pH(t,e,Mh),r.__reactInternalMemoizedMergedChildContext=t,sr(Bs),sr(ns),Kn(ns,t)):sr(Bs),Kn(Bs,n)}var oc=null,bT=!1,xA=!1;function gH(t){oc===null?oc=[t]:oc.push(t)}function ene(t){bT=!0,gH(t)}function gd(){if(!xA&&oc!==null){xA=!0;var t=0,e=On;try{var n=oc;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}oc=null,bT=!1}catch(i){throw oc!==null&&(oc=oc.slice(t+1)),UG(ck,gd),i}finally{On=e,xA=!1}}return null}var wp=[],Ep=0,xw=null,ww=0,Wo=[],Xo=0,Lh=null,gc=1,mc="";function Wd(t,e){wp[Ep++]=ww,wp[Ep++]=xw,xw=t,ww=e}function mH(t,e,n){Wo[Xo++]=gc,Wo[Xo++]=mc,Wo[Xo++]=Lh,Lh=t;var r=gc;t=mc;var i=32-za(r)-1;r&=~(1<<i),n+=1;var s=32-za(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gc=1<<32-za(e)+i|n<<i|r,mc=s+t}else gc=1<<s|n<<i|r,mc=t}function yk(t){t.return!==null&&(Wd(t,1),mH(t,1,0))}function bk(t){for(;t===xw;)xw=wp[--Ep],wp[Ep]=null,ww=wp[--Ep],wp[Ep]=null;for(;t===Lh;)Lh=Wo[--Xo],Wo[Xo]=null,mc=Wo[--Xo],Wo[Xo]=null,gc=Wo[--Xo],Wo[Xo]=null}var po=null,co=null,gr=!1,Pa=null;function vH(t,e){var n=Ko(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function UF(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,po=t,co=Gu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,po=t,co=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lh!==null?{id:gc,overflow:mc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ko(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,po=t,co=null,!0):!1;default:return!1}}function SR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function CR(t){if(gr){var e=co;if(e){var n=e;if(!UF(t,e)){if(SR(t))throw Error(Ke(418));e=Gu(n.nextSibling);var r=po;e&&UF(t,e)?vH(r,n):(t.flags=t.flags&-4097|2,gr=!1,po=t)}}else{if(SR(t))throw Error(Ke(418));t.flags=t.flags&-4097|2,gr=!1,po=t}}}function $F(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;po=t}function D1(t){if(t!==po)return!1;if(!gr)return $F(t),gr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xR(t.type,t.memoizedProps)),e&&(e=co)){if(SR(t))throw yH(),Error(Ke(418));for(;e;)vH(t,e),e=Gu(e.nextSibling)}if($F(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){co=Gu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}co=null}}else co=po?Gu(t.stateNode.nextSibling):null;return!0}function yH(){for(var t=co;t;)t=Gu(t.nextSibling)}function ag(){co=po=null,gr=!1}function _k(t){Pa===null?Pa=[t]:Pa.push(t)}var tne=Bc.ReactCurrentBatchConfig;function Sa(t,e){if(t&&t.defaultProps){e=wr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ew=pd(null),Tw=null,Tp=null,xk=null;function wk(){xk=Tp=Tw=null}function Ek(t){var e=Ew.current;sr(Ew),t._currentValue=e}function AR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $p(t,e){Tw=t,xk=Tp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ns=!0),t.firstContext=null)}function ra(t){var e=t._currentValue;if(xk!==t)if(t={context:t,memoizedValue:e,next:null},Tp===null){if(Tw===null)throw Error(Ke(308));Tp=t,Tw.dependencies={lanes:0,firstContext:t}}else Tp=Tp.next=t;return e}var sh=null;function Tk(t){sh===null?sh=[t]:sh.push(t)}function bH(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tk(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ac(t,r)}function Ac(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bu=!1;function Sk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _H(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ac(t,n)}return i=r.interleaved,i===null?(e.next=e,Tk(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ac(t,n)}function xx(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}function jF(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sw(t,e,n,r){var i=t.updateQueue;bu=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=wr({},d,h);break e;case 2:bu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Oh|=o,t.lanes=o,t.memoizedState=d}}function GF(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ke(191,i));i.call(r)}}}var xH=new bG.Component().refs;function PR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _T={isMounted:function(t){return(t=t._reactInternals)?Jh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ys(),i=Wu(t),s=bc(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hu(t,s,i),e!==null&&(Ua(e,t,i,r),xx(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ys(),i=Wu(t),s=bc(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hu(t,s,i),e!==null&&(Ua(e,t,i,r),xx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ys(),r=Wu(t),i=bc(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hu(t,i,r),e!==null&&(Ua(e,t,r,n),xx(e,t,r))}};function HF(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zv(n,r)||!zv(i,s):!0}function wH(t,e,n){var r=!1,i=nd,s=e.contextType;return typeof s=="object"&&s!==null?s=ra(s):(i=Fs(e)?Mh:ns.current,r=e.contextTypes,s=(r=r!=null)?og(t,i):nd),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_T,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function VF(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_T.enqueueReplaceState(e,e.state,null)}function RR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=xH,Sk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ra(s):(s=Fs(e)?Mh:ns.current,i.context=og(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(PR(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_T.enqueueReplaceState(i,i.state,null),Sw(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ke(309));var r=n.stateNode}if(!r)throw Error(Ke(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===xH&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ke(284));if(!n._owner)throw Error(Ke(290,t))}return t}function B1(t,e){throw t=Object.prototype.toString.call(e),Error(Ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WF(t){var e=t._init;return e(t._payload)}function EH(t){function e(y,x){if(t){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Xu(y,x),y.index=0,y.sibling=null,y}function s(y,x,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,_,w){return x===null||x.tag!==6?(x=PA(_,y.mode,w),x.return=y,x):(x=i(x,_),x.return=y,x)}function l(y,x,_,w){var E=_.type;return E===mp?u(y,x,_.props.children,w,_.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===yu&&WF(E)===x.type)?(w=i(x,_.props),w.ref=Bm(y,x,_),w.return=y,w):(w=Ax(_.type,_.key,_.props,null,y.mode,w),w.ref=Bm(y,x,_),w.return=y,w)}function c(y,x,_,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=RA(_,y.mode,w),x.return=y,x):(x=i(x,_.children||[]),x.return=y,x)}function u(y,x,_,w,E){return x===null||x.tag!==7?(x=mh(_,y.mode,w,E),x.return=y,x):(x=i(x,_),x.return=y,x)}function d(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=PA(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case C1:return _=Ax(x.type,x.key,x.props,null,y.mode,_),_.ref=Bm(y,null,x),_.return=y,_;case gp:return x=RA(x,y.mode,_),x.return=y,x;case yu:var w=x._init;return d(y,w(x._payload),_)}if(E0(x)||Lm(x))return x=mh(x,y.mode,_,null),x.return=y,x;B1(y,x)}return null}function h(y,x,_,w){var E=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,x,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case C1:return _.key===E?l(y,x,_,w):null;case gp:return _.key===E?c(y,x,_,w):null;case yu:return E=_._init,h(y,x,E(_._payload),w)}if(E0(_)||Lm(_))return E!==null?null:u(y,x,_,w,null);B1(y,_)}return null}function f(y,x,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(x,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case C1:return y=y.get(w.key===null?_:w.key)||null,l(x,y,w,E);case gp:return y=y.get(w.key===null?_:w.key)||null,c(x,y,w,E);case yu:var S=w._init;return f(y,x,_,S(w._payload),E)}if(E0(w)||Lm(w))return y=y.get(_)||null,u(x,y,w,E,null);B1(x,w)}return null}function p(y,x,_,w){for(var E=null,S=null,A=x,k=x=0,M=null;A!==null&&k<_.length;k++){A.index>k?(M=A,A=null):M=A.sibling;var I=h(y,A,_[k],w);if(I===null){A===null&&(A=M);break}t&&A&&I.alternate===null&&e(y,A),x=s(I,x,k),S===null?E=I:S.sibling=I,S=I,A=M}if(k===_.length)return n(y,A),gr&&Wd(y,k),E;if(A===null){for(;k<_.length;k++)A=d(y,_[k],w),A!==null&&(x=s(A,x,k),S===null?E=A:S.sibling=A,S=A);return gr&&Wd(y,k),E}for(A=r(y,A);k<_.length;k++)M=f(A,y,k,_[k],w),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?k:M.key),x=s(M,x,k),S===null?E=M:S.sibling=M,S=M);return t&&A.forEach(function(B){return e(y,B)}),gr&&Wd(y,k),E}function m(y,x,_,w){var E=Lm(_);if(typeof E!="function")throw Error(Ke(150));if(_=E.call(_),_==null)throw Error(Ke(151));for(var S=E=null,A=x,k=x=0,M=null,I=_.next();A!==null&&!I.done;k++,I=_.next()){A.index>k?(M=A,A=null):M=A.sibling;var B=h(y,A,I.value,w);if(B===null){A===null&&(A=M);break}t&&A&&B.alternate===null&&e(y,A),x=s(B,x,k),S===null?E=B:S.sibling=B,S=B,A=M}if(I.done)return n(y,A),gr&&Wd(y,k),E;if(A===null){for(;!I.done;k++,I=_.next())I=d(y,I.value,w),I!==null&&(x=s(I,x,k),S===null?E=I:S.sibling=I,S=I);return gr&&Wd(y,k),E}for(A=r(y,A);!I.done;k++,I=_.next())I=f(A,y,k,I.value,w),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?k:I.key),x=s(I,x,k),S===null?E=I:S.sibling=I,S=I);return t&&A.forEach(function(R){return e(y,R)}),gr&&Wd(y,k),E}function b(y,x,_,w){if(typeof _=="object"&&_!==null&&_.type===mp&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case C1:e:{for(var E=_.key,S=x;S!==null;){if(S.key===E){if(E=_.type,E===mp){if(S.tag===7){n(y,S.sibling),x=i(S,_.props.children),x.return=y,y=x;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===yu&&WF(E)===S.type){n(y,S.sibling),x=i(S,_.props),x.ref=Bm(y,S,_),x.return=y,y=x;break e}n(y,S);break}else e(y,S);S=S.sibling}_.type===mp?(x=mh(_.props.children,y.mode,w,_.key),x.return=y,y=x):(w=Ax(_.type,_.key,_.props,null,y.mode,w),w.ref=Bm(y,x,_),w.return=y,y=w)}return o(y);case gp:e:{for(S=_.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(y,x.sibling),x=i(x,_.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=RA(_,y.mode,w),x.return=y,y=x}return o(y);case yu:return S=_._init,b(y,x,S(_._payload),w)}if(E0(_))return p(y,x,_,w);if(Lm(_))return m(y,x,_,w);B1(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,_),x.return=y,y=x):(n(y,x),x=PA(_,y.mode,w),x.return=y,y=x),o(y)):n(y,x)}return b}var lg=EH(!0),TH=EH(!1),Xy={},Ml=pd(Xy),Gv=pd(Xy),Hv=pd(Xy);function oh(t){if(t===Xy)throw Error(Ke(174));return t}function Ck(t,e){switch(Kn(Hv,e),Kn(Gv,t),Kn(Ml,Xy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:aR(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=aR(e,t)}sr(Ml),Kn(Ml,e)}function cg(){sr(Ml),sr(Gv),sr(Hv)}function SH(t){oh(Hv.current);var e=oh(Ml.current),n=aR(e,t.type);e!==n&&(Kn(Gv,t),Kn(Ml,n))}function Ak(t){Gv.current===t&&(sr(Ml),sr(Gv))}var br=pd(0);function Cw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wA=[];function Pk(){for(var t=0;t<wA.length;t++)wA[t]._workInProgressVersionPrimary=null;wA.length=0}var wx=Bc.ReactCurrentDispatcher,EA=Bc.ReactCurrentBatchConfig,kh=0,xr=null,ii=null,vi=null,Aw=!1,ev=!1,Vv=0,nne=0;function ji(){throw Error(Ke(321))}function Rk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Va(t[n],e[n]))return!1;return!0}function Ik(t,e,n,r,i,s){if(kh=s,xr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wx.current=t===null||t.memoizedState===null?one:ane,t=n(r,i),ev){s=0;do{if(ev=!1,Vv=0,25<=s)throw Error(Ke(301));s+=1,vi=ii=null,e.updateQueue=null,wx.current=lne,t=n(r,i)}while(ev)}if(wx.current=Pw,e=ii!==null&&ii.next!==null,kh=0,vi=ii=xr=null,Aw=!1,e)throw Error(Ke(300));return t}function Mk(){var t=Vv!==0;return Vv=0,t}function yl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?xr.memoizedState=vi=t:vi=vi.next=t,vi}function ia(){if(ii===null){var t=xr.alternate;t=t!==null?t.memoizedState:null}else t=ii.next;var e=vi===null?xr.memoizedState:vi.next;if(e!==null)vi=e,ii=t;else{if(t===null)throw Error(Ke(310));ii=t,t={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},vi===null?xr.memoizedState=vi=t:vi=vi.next=t}return vi}function Wv(t,e){return typeof e=="function"?e(t):e}function TA(t){var e=ia(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=ii,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((kh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,xr.lanes|=u,Oh|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Va(r,e.memoizedState)||(Ns=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xr.lanes|=s,Oh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function SA(t){var e=ia(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Va(s,e.memoizedState)||(Ns=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function CH(){}function AH(t,e){var n=xr,r=ia(),i=e(),s=!Va(r.memoizedState,i);if(s&&(r.memoizedState=i,Ns=!0),r=r.queue,Lk(IH.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,Xv(9,RH.bind(null,n,r,i,e),void 0,null),wi===null)throw Error(Ke(349));kh&30||PH(n,e,i)}return i}function PH(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RH(t,e,n,r){e.value=n,e.getSnapshot=r,MH(e)&&LH(t)}function IH(t,e,n){return n(function(){MH(e)&&LH(t)})}function MH(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Va(t,n)}catch{return!0}}function LH(t){var e=Ac(t,1);e!==null&&Ua(e,t,1,-1)}function XF(t){var e=yl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wv,lastRenderedState:t},e.queue=t,t=t.dispatch=sne.bind(null,xr,t),[e.memoizedState,t]}function Xv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kH(){return ia().memoizedState}function Ex(t,e,n,r){var i=yl();xr.flags|=t,i.memoizedState=Xv(1|e,n,void 0,r===void 0?null:r)}function xT(t,e,n,r){var i=ia();r=r===void 0?null:r;var s=void 0;if(ii!==null){var o=ii.memoizedState;if(s=o.destroy,r!==null&&Rk(r,o.deps)){i.memoizedState=Xv(e,n,s,r);return}}xr.flags|=t,i.memoizedState=Xv(1|e,n,s,r)}function YF(t,e){return Ex(8390656,8,t,e)}function Lk(t,e){return xT(2048,8,t,e)}function OH(t,e){return xT(4,2,t,e)}function NH(t,e){return xT(4,4,t,e)}function DH(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BH(t,e,n){return n=n!=null?n.concat([t]):null,xT(4,4,DH.bind(null,e,t),n)}function kk(){}function FH(t,e){var n=ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zH(t,e){var n=ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UH(t,e,n){return kh&21?(Va(n,e)||(n=GG(),xr.lanes|=n,Oh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ns=!0),t.memoizedState=n)}function rne(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=EA.transition;EA.transition={};try{t(!1),e()}finally{On=n,EA.transition=r}}function $H(){return ia().memoizedState}function ine(t,e,n){var r=Wu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jH(t))GH(e,n);else if(n=bH(t,e,n,r),n!==null){var i=ys();Ua(n,t,r,i),HH(n,e,r)}}function sne(t,e,n){var r=Wu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jH(t))GH(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Va(a,o)){var l=e.interleaved;l===null?(i.next=i,Tk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=bH(t,e,i,r),n!==null&&(i=ys(),Ua(n,t,r,i),HH(n,e,r))}}function jH(t){var e=t.alternate;return t===xr||e!==null&&e===xr}function GH(t,e){ev=Aw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HH(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}var Pw={readContext:ra,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useInsertionEffect:ji,useLayoutEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useMutableSource:ji,useSyncExternalStore:ji,useId:ji,unstable_isNewReconciler:!1},one={readContext:ra,useCallback:function(t,e){return yl().memoizedState=[t,e===void 0?null:e],t},useContext:ra,useEffect:YF,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ex(4194308,4,DH.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ex(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ex(4,2,t,e)},useMemo:function(t,e){var n=yl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ine.bind(null,xr,t),[r.memoizedState,t]},useRef:function(t){var e=yl();return t={current:t},e.memoizedState=t},useState:XF,useDebugValue:kk,useDeferredValue:function(t){return yl().memoizedState=t},useTransition:function(){var t=XF(!1),e=t[0];return t=rne.bind(null,t[1]),yl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xr,i=yl();if(gr){if(n===void 0)throw Error(Ke(407));n=n()}else{if(n=e(),wi===null)throw Error(Ke(349));kh&30||PH(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,YF(IH.bind(null,r,s,t),[t]),r.flags|=2048,Xv(9,RH.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=yl(),e=wi.identifierPrefix;if(gr){var n=mc,r=gc;n=(r&~(1<<32-za(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nne++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ane={readContext:ra,useCallback:FH,useContext:ra,useEffect:Lk,useImperativeHandle:BH,useInsertionEffect:OH,useLayoutEffect:NH,useMemo:zH,useReducer:TA,useRef:kH,useState:function(){return TA(Wv)},useDebugValue:kk,useDeferredValue:function(t){var e=ia();return UH(e,ii.memoizedState,t)},useTransition:function(){var t=TA(Wv)[0],e=ia().memoizedState;return[t,e]},useMutableSource:CH,useSyncExternalStore:AH,useId:$H,unstable_isNewReconciler:!1},lne={readContext:ra,useCallback:FH,useContext:ra,useEffect:Lk,useImperativeHandle:BH,useInsertionEffect:OH,useLayoutEffect:NH,useMemo:zH,useReducer:SA,useRef:kH,useState:function(){return SA(Wv)},useDebugValue:kk,useDeferredValue:function(t){var e=ia();return ii===null?e.memoizedState=t:UH(e,ii.memoizedState,t)},useTransition:function(){var t=SA(Wv)[0],e=ia().memoizedState;return[t,e]},useMutableSource:CH,useSyncExternalStore:AH,useId:$H,unstable_isNewReconciler:!1};function ug(t,e){try{var n="",r=e;do n+=Dee(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function CA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function IR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cne=typeof WeakMap=="function"?WeakMap:Map;function VH(t,e,n){n=bc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iw||(Iw=!0,UR=r),IR(t,e)},n}function WH(t,e,n){n=bc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){IR(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){IR(t,e),typeof r!="function"&&(Vu===null?Vu=new Set([this]):Vu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qF(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cne;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ene.bind(null,t,e,n),e.then(t,t))}function KF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZF(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bc(-1,1),e.tag=2,Hu(n,e,1))),n.lanes|=1),t)}var une=Bc.ReactCurrentOwner,Ns=!1;function ds(t,e,n,r){e.child=t===null?TH(e,null,n,r):lg(e,t.child,n,r)}function QF(t,e,n,r,i){n=n.render;var s=e.ref;return $p(e,i),r=Ik(t,e,n,r,s,i),n=Mk(),t!==null&&!Ns?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pc(t,e,i)):(gr&&n&&yk(e),e.flags|=1,ds(t,e,r,i),e.child)}function JF(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$k(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,XH(t,e,s,r,i)):(t=Ax(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zv,n(o,r)&&t.ref===e.ref)return Pc(t,e,i)}return e.flags|=1,t=Xu(s,r),t.ref=e.ref,t.return=e,e.child=t}function XH(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zv(s,r)&&t.ref===e.ref)if(Ns=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ns=!0);else return e.lanes=t.lanes,Pc(t,e,i)}return MR(t,e,n,r,i)}function YH(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(Cp,ro),ro|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kn(Cp,ro),ro|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Kn(Cp,ro),ro|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Kn(Cp,ro),ro|=r;return ds(t,e,i,n),e.child}function qH(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function MR(t,e,n,r,i){var s=Fs(n)?Mh:ns.current;return s=og(e,s),$p(e,i),n=Ik(t,e,n,r,s,i),r=Mk(),t!==null&&!Ns?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pc(t,e,i)):(gr&&r&&yk(e),e.flags|=1,ds(t,e,n,i),e.child)}function e4(t,e,n,r,i){if(Fs(n)){var s=!0;_w(e)}else s=!1;if($p(e,i),e.stateNode===null)Tx(t,e),wH(e,n,r),RR(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ra(c):(c=Fs(n)?Mh:ns.current,c=og(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&VF(e,o,r,c),bu=!1;var h=e.memoizedState;o.state=h,Sw(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Bs.current||bu?(typeof u=="function"&&(PR(e,n,u,r),l=e.memoizedState),(a=bu||HF(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_H(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Sa(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ra(l):(l=Fs(n)?Mh:ns.current,l=og(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&VF(e,o,r,l),bu=!1,h=e.memoizedState,o.state=h,Sw(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||Bs.current||bu?(typeof f=="function"&&(PR(e,n,f,r),p=e.memoizedState),(c=bu||HF(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return LR(t,e,n,r,s,i)}function LR(t,e,n,r,i,s){qH(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zF(e,n,!1),Pc(t,e,s);r=e.stateNode,une.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lg(e,t.child,null,s),e.child=lg(e,null,a,s)):ds(t,e,a,s),e.memoizedState=r.state,i&&zF(e,n,!0),e.child}function KH(t){var e=t.stateNode;e.pendingContext?FF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FF(t,e.context,!1),Ck(t,e.containerInfo)}function t4(t,e,n,r,i){return ag(),_k(i),e.flags|=256,ds(t,e,n,r),e.child}var kR={dehydrated:null,treeContext:null,retryLane:0};function OR(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZH(t,e,n){var r=e.pendingProps,i=br.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Kn(br,i&1),t===null)return CR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=TT(o,r,0,null),t=mh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=OR(n),e.memoizedState=kR,t):Ok(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dne(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xu(a,s):(s=mh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?OR(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=kR,r}return s=t.child,t=s.sibling,r=Xu(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ok(t,e){return e=TT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function F1(t,e,n,r){return r!==null&&_k(r),lg(e,t.child,null,n),t=Ok(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dne(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=CA(Error(Ke(422))),F1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=TT({mode:"visible",children:r.children},i,0,null),s=mh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lg(e,t.child,null,o),e.child.memoizedState=OR(o),e.memoizedState=kR,s);if(!(e.mode&1))return F1(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ke(419)),r=CA(s,r,void 0),F1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ns||a){if(r=wi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ac(t,i),Ua(r,t,i,-1))}return Uk(),r=CA(Error(Ke(421))),F1(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Tne.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,co=Gu(i.nextSibling),po=e,gr=!0,Pa=null,t!==null&&(Wo[Xo++]=gc,Wo[Xo++]=mc,Wo[Xo++]=Lh,gc=t.id,mc=t.overflow,Lh=e),e=Ok(e,r.children),e.flags|=4096,e)}function n4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),AR(t.return,e,n)}function AA(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QH(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ds(t,e,r.children,n),r=br.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n4(t,n,e);else if(t.tag===19)n4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kn(br,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cw(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),AA(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cw(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}AA(e,!0,n,null,s);break;case"together":AA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ke(153));if(e.child!==null){for(t=e.child,n=Xu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hne(t,e,n){switch(e.tag){case 3:KH(e),ag();break;case 5:SH(e);break;case 1:Fs(e.type)&&_w(e);break;case 4:Ck(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Kn(Ew,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kn(br,br.current&1),e.flags|=128,null):n&e.child.childLanes?ZH(t,e,n):(Kn(br,br.current&1),t=Pc(t,e,n),t!==null?t.sibling:null);Kn(br,br.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QH(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kn(br,br.current),r)break;return null;case 22:case 23:return e.lanes=0,YH(t,e,n)}return Pc(t,e,n)}var JH,NR,eV,tV;JH=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};NR=function(){};eV=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,oh(Ml.current);var s=null;switch(n){case"input":i=rR(t,i),r=rR(t,r),s=[];break;case"select":i=wr({},i,{value:void 0}),r=wr({},r,{value:void 0}),s=[];break;case"textarea":i=oR(t,i),r=oR(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yw)}lR(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lv.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lv.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fm(t,e){if(!gr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fne(t,e,n){var r=e.pendingProps;switch(bk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(e),null;case 1:return Fs(e.type)&&bw(),Gi(e),null;case 3:return r=e.stateNode,cg(),sr(Bs),sr(ns),Pk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(D1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pa!==null&&(GR(Pa),Pa=null))),NR(t,e),Gi(e),null;case 5:Ak(e);var i=oh(Hv.current);if(n=e.type,t!==null&&e.stateNode!=null)eV(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ke(166));return Gi(e),null}if(t=oh(Ml.current),D1(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Tl]=e,r[jv]=s,t=(e.mode&1)!==0,n){case"dialog":tr("cancel",r),tr("close",r);break;case"iframe":case"object":case"embed":tr("load",r);break;case"video":case"audio":for(i=0;i<S0.length;i++)tr(S0[i],r);break;case"source":tr("error",r);break;case"img":case"image":case"link":tr("error",r),tr("load",r);break;case"details":tr("toggle",r);break;case"input":dF(r,s),tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tr("invalid",r);break;case"textarea":fF(r,s),tr("invalid",r)}lR(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&N1(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&N1(r.textContent,a,t),i=["children",""+a]):Lv.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tr("scroll",r)}switch(n){case"input":A1(r),hF(r,s,!0);break;case"textarea":A1(r),pF(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tl]=e,t[jv]=r,JH(t,e,!1,!1),e.stateNode=t;e:{switch(o=cR(n,r),n){case"dialog":tr("cancel",t),tr("close",t),i=r;break;case"iframe":case"object":case"embed":tr("load",t),i=r;break;case"video":case"audio":for(i=0;i<S0.length;i++)tr(S0[i],t);i=r;break;case"source":tr("error",t),i=r;break;case"img":case"image":case"link":tr("error",t),tr("load",t),i=r;break;case"details":tr("toggle",t),i=r;break;case"input":dF(t,r),i=rR(t,r),tr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wr({},r,{value:void 0}),tr("invalid",t);break;case"textarea":fF(t,r),i=oR(t,r),tr("invalid",t);break;default:i=r}lR(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?MG(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RG(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kv(t,l):typeof l=="number"&&kv(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Lv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tr("scroll",t):l!=null&&ik(t,s,l,o))}switch(n){case"input":A1(t),hF(t,r,!1);break;case"textarea":A1(t),pF(t);break;case"option":r.value!=null&&t.setAttribute("value",""+td(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bp(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gi(e),null;case 6:if(t&&e.stateNode!=null)tV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ke(166));if(n=oh(Hv.current),oh(Ml.current),D1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tl]=e,(s=r.nodeValue!==n)&&(t=po,t!==null))switch(t.tag){case 3:N1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&N1(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tl]=e,e.stateNode=r}return Gi(e),null;case 13:if(sr(br),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gr&&co!==null&&e.mode&1&&!(e.flags&128))yH(),ag(),e.flags|=98560,s=!1;else if(s=D1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ke(317));s[Tl]=e}else ag(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gi(e),s=!1}else Pa!==null&&(GR(Pa),Pa=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||br.current&1?oi===0&&(oi=3):Uk())),e.updateQueue!==null&&(e.flags|=4),Gi(e),null);case 4:return cg(),NR(t,e),t===null&&Uv(e.stateNode.containerInfo),Gi(e),null;case 10:return Ek(e.type._context),Gi(e),null;case 17:return Fs(e.type)&&bw(),Gi(e),null;case 19:if(sr(br),s=e.memoizedState,s===null)return Gi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fm(s,!1);else{if(oi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cw(t),o!==null){for(e.flags|=128,Fm(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kn(br,br.current&1|2),e.child}t=t.sibling}s.tail!==null&&zr()>dg&&(e.flags|=128,r=!0,Fm(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gr)return Gi(e),null}else 2*zr()-s.renderingStartTime>dg&&n!==1073741824&&(e.flags|=128,r=!0,Fm(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zr(),e.sibling=null,n=br.current,Kn(br,r?n&1|2:n&1),e):(Gi(e),null);case 22:case 23:return zk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ro&1073741824&&(Gi(e),e.subtreeFlags&6&&(e.flags|=8192)):Gi(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function pne(t,e){switch(bk(e),e.tag){case 1:return Fs(e.type)&&bw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cg(),sr(Bs),sr(ns),Pk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ak(e),null;case 13:if(sr(br),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));ag()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return sr(br),null;case 4:return cg(),null;case 10:return Ek(e.type._context),null;case 22:case 23:return zk(),null;case 24:return null;default:return null}}var z1=!1,Ki=!1,gne=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Sp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pr(t,e,r)}else n.current=null}function DR(t,e,n){try{n()}catch(r){Pr(t,e,r)}}var r4=!1;function mne(t,e){if(bR=gw,t=sH(),vk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_R={focusedElem:t,selectionRange:n},gw=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){e=gt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,b=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Sa(e.type,m),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(w){Pr(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}return p=r4,r4=!1,p}function tv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&DR(e,n,s)}i=i.next}while(i!==r)}}function wT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function BR(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nV(t){var e=t.alternate;e!==null&&(t.alternate=null,nV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tl],delete e[jv],delete e[ER],delete e[Qte],delete e[Jte])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rV(t){return t.tag===5||t.tag===3||t.tag===4}function i4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function FR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yw));else if(r!==4&&(t=t.child,t!==null))for(FR(t,e,n),t=t.sibling;t!==null;)FR(t,e,n),t=t.sibling}function zR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zR(t,e,n),t=t.sibling;t!==null;)zR(t,e,n),t=t.sibling}var ki=null,Ca=!1;function nu(t,e,n){for(n=n.child;n!==null;)iV(t,e,n),n=n.sibling}function iV(t,e,n){if(Il&&typeof Il.onCommitFiberUnmount=="function")try{Il.onCommitFiberUnmount(pT,n)}catch{}switch(n.tag){case 5:Ki||Sp(n,e);case 6:var r=ki,i=Ca;ki=null,nu(t,e,n),ki=r,Ca=i,ki!==null&&(Ca?(t=ki,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ki.removeChild(n.stateNode));break;case 18:ki!==null&&(Ca?(t=ki,n=n.stateNode,t.nodeType===8?_A(t.parentNode,n):t.nodeType===1&&_A(t,n),Bv(t)):_A(ki,n.stateNode));break;case 4:r=ki,i=Ca,ki=n.stateNode.containerInfo,Ca=!0,nu(t,e,n),ki=r,Ca=i;break;case 0:case 11:case 14:case 15:if(!Ki&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&DR(n,e,o),i=i.next}while(i!==r)}nu(t,e,n);break;case 1:if(!Ki&&(Sp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pr(n,e,a)}nu(t,e,n);break;case 21:nu(t,e,n);break;case 22:n.mode&1?(Ki=(r=Ki)||n.memoizedState!==null,nu(t,e,n),Ki=r):nu(t,e,n);break;default:nu(t,e,n)}}function s4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gne),e.forEach(function(r){var i=Sne.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ba(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ki=a.stateNode,Ca=!1;break e;case 3:ki=a.stateNode.containerInfo,Ca=!0;break e;case 4:ki=a.stateNode.containerInfo,Ca=!0;break e}a=a.return}if(ki===null)throw Error(Ke(160));iV(s,o,i),ki=null,Ca=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Pr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sV(e,t),e=e.sibling}function sV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ba(e,t),ll(t),r&4){try{tv(3,t,t.return),wT(3,t)}catch(m){Pr(t,t.return,m)}try{tv(5,t,t.return)}catch(m){Pr(t,t.return,m)}}break;case 1:ba(e,t),ll(t),r&512&&n!==null&&Sp(n,n.return);break;case 5:if(ba(e,t),ll(t),r&512&&n!==null&&Sp(n,n.return),t.flags&32){var i=t.stateNode;try{kv(i,"")}catch(m){Pr(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CG(i,s),cR(a,o);var c=cR(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?MG(i,d):u==="dangerouslySetInnerHTML"?RG(i,d):u==="children"?kv(i,d):ik(i,u,d,c)}switch(a){case"input":iR(i,s);break;case"textarea":AG(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Bp(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Bp(i,!!s.multiple,s.defaultValue,!0):Bp(i,!!s.multiple,s.multiple?[]:"",!1))}i[jv]=s}catch(m){Pr(t,t.return,m)}}break;case 6:if(ba(e,t),ll(t),r&4){if(t.stateNode===null)throw Error(Ke(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Pr(t,t.return,m)}}break;case 3:if(ba(e,t),ll(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bv(e.containerInfo)}catch(m){Pr(t,t.return,m)}break;case 4:ba(e,t),ll(t);break;case 13:ba(e,t),ll(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bk=zr())),r&4&&s4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ki=(c=Ki)||u,ba(e,t),Ki=c):ba(e,t),ll(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(gt=t,u=t.child;u!==null;){for(d=gt=u;gt!==null;){switch(h=gt,f=h.child,h.tag){case 0:case 11:case 14:case 15:tv(4,h,h.return);break;case 1:Sp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Pr(r,n,m)}}break;case 5:Sp(h,h.return);break;case 22:if(h.memoizedState!==null){a4(d);continue}}f!==null?(f.return=h,gt=f):a4(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IG("display",o))}catch(m){Pr(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Pr(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ba(e,t),ll(t),r&4&&s4(t);break;case 21:break;default:ba(e,t),ll(t)}}function ll(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rV(n)){var r=n;break e}n=n.return}throw Error(Ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kv(i,""),r.flags&=-33);var s=i4(t);zR(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=i4(t);FR(t,a,o);break;default:throw Error(Ke(161))}}catch(l){Pr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vne(t,e,n){gt=t,oV(t)}function oV(t,e,n){for(var r=(t.mode&1)!==0;gt!==null;){var i=gt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||z1;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ki;a=z1;var c=Ki;if(z1=o,(Ki=l)&&!c)for(gt=i;gt!==null;)o=gt,l=o.child,o.tag===22&&o.memoizedState!==null?l4(i):l!==null?(l.return=o,gt=l):l4(i);for(;s!==null;)gt=s,oV(s),s=s.sibling;gt=i,z1=a,Ki=c}o4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,gt=s):o4(t)}}function o4(t){for(;gt!==null;){var e=gt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ki||wT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ki)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Sa(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&GF(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}GF(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Bv(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}Ki||e.flags&512&&BR(e)}catch(h){Pr(e,e.return,h)}}if(e===t){gt=null;break}if(n=e.sibling,n!==null){n.return=e.return,gt=n;break}gt=e.return}}function a4(t){for(;gt!==null;){var e=gt;if(e===t){gt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,gt=n;break}gt=e.return}}function l4(t){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wT(4,e)}catch(l){Pr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pr(e,i,l)}}var s=e.return;try{BR(e)}catch(l){Pr(e,s,l)}break;case 5:var o=e.return;try{BR(e)}catch(l){Pr(e,o,l)}}}catch(l){Pr(e,e.return,l)}if(e===t){gt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,gt=a;break}gt=e.return}}var yne=Math.ceil,Rw=Bc.ReactCurrentDispatcher,Nk=Bc.ReactCurrentOwner,Jo=Bc.ReactCurrentBatchConfig,vn=0,wi=null,Xr=null,Di=0,ro=0,Cp=pd(0),oi=0,Yv=null,Oh=0,ET=0,Dk=0,nv=null,Os=null,Bk=0,dg=1/0,ic=null,Iw=!1,UR=null,Vu=null,U1=!1,ku=null,Mw=0,rv=0,$R=null,Sx=-1,Cx=0;function ys(){return vn&6?zr():Sx!==-1?Sx:Sx=zr()}function Wu(t){return t.mode&1?vn&2&&Di!==0?Di&-Di:tne.transition!==null?(Cx===0&&(Cx=GG()),Cx):(t=On,t!==0||(t=window.event,t=t===void 0?16:KG(t.type)),t):1}function Ua(t,e,n,r){if(50<rv)throw rv=0,$R=null,Error(Ke(185));Hy(t,n,r),(!(vn&2)||t!==wi)&&(t===wi&&(!(vn&2)&&(ET|=n),oi===4&&Cu(t,Di)),zs(t,r),n===1&&vn===0&&!(e.mode&1)&&(dg=zr()+500,bT&&gd()))}function zs(t,e){var n=t.callbackNode;tte(t,e);var r=pw(t,t===wi?Di:0);if(r===0)n!==null&&vF(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vF(n),e===1)t.tag===0?ene(c4.bind(null,t)):gH(c4.bind(null,t)),Kte(function(){!(vn&6)&&gd()}),n=null;else{switch(HG(r)){case 1:n=ck;break;case 4:n=$G;break;case 16:n=fw;break;case 536870912:n=jG;break;default:n=fw}n=pV(n,aV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aV(t,e){if(Sx=-1,Cx=0,vn&6)throw Error(Ke(327));var n=t.callbackNode;if(jp()&&t.callbackNode!==n)return null;var r=pw(t,t===wi?Di:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lw(t,r);else{e=r;var i=vn;vn|=2;var s=cV();(wi!==t||Di!==e)&&(ic=null,dg=zr()+500,gh(t,e));do try{xne();break}catch(a){lV(t,a)}while(!0);wk(),Rw.current=s,vn=i,Xr!==null?e=0:(wi=null,Di=0,e=oi)}if(e!==0){if(e===2&&(i=pR(t),i!==0&&(r=i,e=jR(t,i))),e===1)throw n=Yv,gh(t,0),Cu(t,r),zs(t,zr()),n;if(e===6)Cu(t,r);else{if(i=t.current.alternate,!(r&30)&&!bne(i)&&(e=Lw(t,r),e===2&&(s=pR(t),s!==0&&(r=s,e=jR(t,s))),e===1))throw n=Yv,gh(t,0),Cu(t,r),zs(t,zr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ke(345));case 2:Xd(t,Os,ic);break;case 3:if(Cu(t,r),(r&130023424)===r&&(e=Bk+500-zr(),10<e)){if(pw(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ys(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wR(Xd.bind(null,t,Os,ic),e);break}Xd(t,Os,ic);break;case 4:if(Cu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-za(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=zr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yne(r/1960))-r,10<r){t.timeoutHandle=wR(Xd.bind(null,t,Os,ic),r);break}Xd(t,Os,ic);break;case 5:Xd(t,Os,ic);break;default:throw Error(Ke(329))}}}return zs(t,zr()),t.callbackNode===n?aV.bind(null,t):null}function jR(t,e){var n=nv;return t.current.memoizedState.isDehydrated&&(gh(t,e).flags|=256),t=Lw(t,e),t!==2&&(e=Os,Os=n,e!==null&&GR(e)),t}function GR(t){Os===null?Os=t:Os.push.apply(Os,t)}function bne(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Va(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cu(t,e){for(e&=~Dk,e&=~ET,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-za(e),r=1<<n;t[n]=-1,e&=~r}}function c4(t){if(vn&6)throw Error(Ke(327));jp();var e=pw(t,0);if(!(e&1))return zs(t,zr()),null;var n=Lw(t,e);if(t.tag!==0&&n===2){var r=pR(t);r!==0&&(e=r,n=jR(t,r))}if(n===1)throw n=Yv,gh(t,0),Cu(t,e),zs(t,zr()),n;if(n===6)throw Error(Ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xd(t,Os,ic),zs(t,zr()),null}function Fk(t,e){var n=vn;vn|=1;try{return t(e)}finally{vn=n,vn===0&&(dg=zr()+500,bT&&gd())}}function Nh(t){ku!==null&&ku.tag===0&&!(vn&6)&&jp();var e=vn;vn|=1;var n=Jo.transition,r=On;try{if(Jo.transition=null,On=1,t)return t()}finally{On=r,Jo.transition=n,vn=e,!(vn&6)&&gd()}}function zk(){ro=Cp.current,sr(Cp)}function gh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qte(n)),Xr!==null)for(n=Xr.return;n!==null;){var r=n;switch(bk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bw();break;case 3:cg(),sr(Bs),sr(ns),Pk();break;case 5:Ak(r);break;case 4:cg();break;case 13:sr(br);break;case 19:sr(br);break;case 10:Ek(r.type._context);break;case 22:case 23:zk()}n=n.return}if(wi=t,Xr=t=Xu(t.current,null),Di=ro=e,oi=0,Yv=null,Dk=ET=Oh=0,Os=nv=null,sh!==null){for(e=0;e<sh.length;e++)if(n=sh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}sh=null}return t}function lV(t,e){do{var n=Xr;try{if(wk(),wx.current=Pw,Aw){for(var r=xr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Aw=!1}if(kh=0,vi=ii=xr=null,ev=!1,Vv=0,Nk.current=null,n===null||n.return===null){oi=1,Yv=e,Xr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Di,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=KF(o);if(f!==null){f.flags&=-257,ZF(f,o,a,s,e),f.mode&1&&qF(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){qF(s,c,e),Uk();break e}l=Error(Ke(426))}}else if(gr&&a.mode&1){var b=KF(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ZF(b,o,a,s,e),_k(ug(l,a));break e}}s=l=ug(l,a),oi!==4&&(oi=2),nv===null?nv=[s]:nv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=VH(s,l,e);jF(s,y);break e;case 1:a=l;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Vu===null||!Vu.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=WH(s,a,e);jF(s,w);break e}}s=s.return}while(s!==null)}dV(n)}catch(E){e=E,Xr===n&&n!==null&&(Xr=n=n.return);continue}break}while(!0)}function cV(){var t=Rw.current;return Rw.current=Pw,t===null?Pw:t}function Uk(){(oi===0||oi===3||oi===2)&&(oi=4),wi===null||!(Oh&268435455)&&!(ET&268435455)||Cu(wi,Di)}function Lw(t,e){var n=vn;vn|=2;var r=cV();(wi!==t||Di!==e)&&(ic=null,gh(t,e));do try{_ne();break}catch(i){lV(t,i)}while(!0);if(wk(),vn=n,Rw.current=r,Xr!==null)throw Error(Ke(261));return wi=null,Di=0,oi}function _ne(){for(;Xr!==null;)uV(Xr)}function xne(){for(;Xr!==null&&!Wee();)uV(Xr)}function uV(t){var e=fV(t.alternate,t,ro);t.memoizedProps=t.pendingProps,e===null?dV(t):Xr=e,Nk.current=null}function dV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pne(n,e),n!==null){n.flags&=32767,Xr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oi=6,Xr=null;return}}else if(n=fne(n,e,ro),n!==null){Xr=n;return}if(e=e.sibling,e!==null){Xr=e;return}Xr=e=t}while(e!==null);oi===0&&(oi=5)}function Xd(t,e,n){var r=On,i=Jo.transition;try{Jo.transition=null,On=1,wne(t,e,n,r)}finally{Jo.transition=i,On=r}return null}function wne(t,e,n,r){do jp();while(ku!==null);if(vn&6)throw Error(Ke(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ke(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nte(t,s),t===wi&&(Xr=wi=null,Di=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||U1||(U1=!0,pV(fw,function(){return jp(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jo.transition,Jo.transition=null;var o=On;On=1;var a=vn;vn|=4,Nk.current=null,mne(t,n),sV(n,t),jte(_R),gw=!!bR,_R=bR=null,t.current=n,vne(n),Xee(),vn=a,On=o,Jo.transition=s}else t.current=n;if(U1&&(U1=!1,ku=t,Mw=i),s=t.pendingLanes,s===0&&(Vu=null),Kee(n.stateNode),zs(t,zr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Iw)throw Iw=!1,t=UR,UR=null,t;return Mw&1&&t.tag!==0&&jp(),s=t.pendingLanes,s&1?t===$R?rv++:(rv=0,$R=t):rv=0,gd(),null}function jp(){if(ku!==null){var t=HG(Mw),e=Jo.transition,n=On;try{if(Jo.transition=null,On=16>t?16:t,ku===null)var r=!1;else{if(t=ku,ku=null,Mw=0,vn&6)throw Error(Ke(331));var i=vn;for(vn|=4,gt=t.current;gt!==null;){var s=gt,o=s.child;if(gt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(gt=c;gt!==null;){var u=gt;switch(u.tag){case 0:case 11:case 15:tv(8,u,s)}var d=u.child;if(d!==null)d.return=u,gt=d;else for(;gt!==null;){u=gt;var h=u.sibling,f=u.return;if(nV(u),u===c){gt=null;break}if(h!==null){h.return=f,gt=h;break}gt=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}gt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,gt=o;else e:for(;gt!==null;){if(s=gt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tv(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,gt=y;break e}gt=s.return}}var x=t.current;for(gt=x;gt!==null;){o=gt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,gt=_;else e:for(o=x;gt!==null;){if(a=gt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wT(9,a)}}catch(E){Pr(a,a.return,E)}if(a===o){gt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,gt=w;break e}gt=a.return}}if(vn=i,gd(),Il&&typeof Il.onPostCommitFiberRoot=="function")try{Il.onPostCommitFiberRoot(pT,t)}catch{}r=!0}return r}finally{On=n,Jo.transition=e}}return!1}function u4(t,e,n){e=ug(n,e),e=VH(t,e,1),t=Hu(t,e,1),e=ys(),t!==null&&(Hy(t,1,e),zs(t,e))}function Pr(t,e,n){if(t.tag===3)u4(t,t,n);else for(;e!==null;){if(e.tag===3){u4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vu===null||!Vu.has(r))){t=ug(n,t),t=WH(e,t,1),e=Hu(e,t,1),t=ys(),e!==null&&(Hy(e,1,t),zs(e,t));break}}e=e.return}}function Ene(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ys(),t.pingedLanes|=t.suspendedLanes&n,wi===t&&(Di&n)===n&&(oi===4||oi===3&&(Di&130023424)===Di&&500>zr()-Bk?gh(t,0):Dk|=n),zs(t,e)}function hV(t,e){e===0&&(t.mode&1?(e=I1,I1<<=1,!(I1&130023424)&&(I1=4194304)):e=1);var n=ys();t=Ac(t,e),t!==null&&(Hy(t,e,n),zs(t,n))}function Tne(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hV(t,n)}function Sne(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ke(314))}r!==null&&r.delete(e),hV(t,n)}var fV;fV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bs.current)Ns=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ns=!1,hne(t,e,n);Ns=!!(t.flags&131072)}else Ns=!1,gr&&e.flags&1048576&&mH(e,ww,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tx(t,e),t=e.pendingProps;var i=og(e,ns.current);$p(e,n),i=Ik(null,e,r,t,i,n);var s=Mk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fs(r)?(s=!0,_w(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sk(e),i.updater=_T,e.stateNode=i,i._reactInternals=e,RR(e,r,t,n),e=LR(null,e,r,!0,s,n)):(e.tag=0,gr&&s&&yk(e),ds(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tx(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ane(r),t=Sa(r,t),i){case 0:e=MR(null,e,r,t,n);break e;case 1:e=e4(null,e,r,t,n);break e;case 11:e=QF(null,e,r,t,n);break e;case 14:e=JF(null,e,r,Sa(r.type,t),n);break e}throw Error(Ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sa(r,i),MR(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sa(r,i),e4(t,e,r,i,n);case 3:e:{if(KH(e),t===null)throw Error(Ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_H(t,e),Sw(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ug(Error(Ke(423)),e),e=t4(t,e,r,n,i);break e}else if(r!==i){i=ug(Error(Ke(424)),e),e=t4(t,e,r,n,i);break e}else for(co=Gu(e.stateNode.containerInfo.firstChild),po=e,gr=!0,Pa=null,n=TH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ag(),r===i){e=Pc(t,e,n);break e}ds(t,e,r,n)}e=e.child}return e;case 5:return SH(e),t===null&&CR(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,xR(r,i)?o=null:s!==null&&xR(r,s)&&(e.flags|=32),qH(t,e),ds(t,e,o,n),e.child;case 6:return t===null&&CR(e),null;case 13:return ZH(t,e,n);case 4:return Ck(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lg(e,null,r,n):ds(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sa(r,i),QF(t,e,r,i,n);case 7:return ds(t,e,e.pendingProps,n),e.child;case 8:return ds(t,e,e.pendingProps.children,n),e.child;case 12:return ds(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Kn(Ew,r._currentValue),r._currentValue=o,s!==null)if(Va(s.value,o)){if(s.children===i.children&&!Bs.current){e=Pc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=bc(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),AR(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ke(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),AR(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ds(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$p(e,n),i=ra(i),r=r(i),e.flags|=1,ds(t,e,r,n),e.child;case 14:return r=e.type,i=Sa(r,e.pendingProps),i=Sa(r.type,i),JF(t,e,r,i,n);case 15:return XH(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sa(r,i),Tx(t,e),e.tag=1,Fs(r)?(t=!0,_w(e)):t=!1,$p(e,n),wH(e,r,i),RR(e,r,i,n),LR(null,e,r,!0,t,n);case 19:return QH(t,e,n);case 22:return YH(t,e,n)}throw Error(Ke(156,e.tag))};function pV(t,e){return UG(t,e)}function Cne(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(t,e,n,r){return new Cne(t,e,n,r)}function $k(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ane(t){if(typeof t=="function")return $k(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ok)return 11;if(t===ak)return 14}return 2}function Xu(t,e){var n=t.alternate;return n===null?(n=Ko(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ax(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")$k(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mp:return mh(n.children,i,s,e);case sk:o=8,i|=8;break;case J2:return t=Ko(12,n,e,i|2),t.elementType=J2,t.lanes=s,t;case eR:return t=Ko(13,n,e,i),t.elementType=eR,t.lanes=s,t;case tR:return t=Ko(19,n,e,i),t.elementType=tR,t.lanes=s,t;case EG:return TT(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xG:o=10;break e;case wG:o=9;break e;case ok:o=11;break e;case ak:o=14;break e;case yu:o=16,r=null;break e}throw Error(Ke(130,t==null?t:typeof t,""))}return e=Ko(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mh(t,e,n,r){return t=Ko(7,t,r,e),t.lanes=n,t}function TT(t,e,n,r){return t=Ko(22,t,r,e),t.elementType=EG,t.lanes=n,t.stateNode={isHidden:!1},t}function PA(t,e,n){return t=Ko(6,t,null,e),t.lanes=n,t}function RA(t,e,n){return e=Ko(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pne(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cA(0),this.expirationTimes=cA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jk(t,e,n,r,i,s,o,a,l){return t=new Pne(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ko(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sk(s),t}function Rne(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gV(t){if(!t)return nd;t=t._reactInternals;e:{if(Jh(t)!==t||t.tag!==1)throw Error(Ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(t.tag===1){var n=t.type;if(Fs(n))return pH(t,n,e)}return e}function mV(t,e,n,r,i,s,o,a,l){return t=jk(n,r,!0,t,i,s,o,a,l),t.context=gV(null),n=t.current,r=ys(),i=Wu(n),s=bc(r,i),s.callback=e??null,Hu(n,s,i),t.current.lanes=i,Hy(t,i,r),zs(t,r),t}function ST(t,e,n,r){var i=e.current,s=ys(),o=Wu(i);return n=gV(n),e.context===null?e.context=n:e.pendingContext=n,e=bc(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hu(i,e,o),t!==null&&(Ua(t,i,o,s),xx(t,i,o)),o}function kw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gk(t,e){d4(t,e),(t=t.alternate)&&d4(t,e)}function Ine(){return null}var vV=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hk(t){this._internalRoot=t}CT.prototype.render=Hk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ke(409));ST(t,e,null,null)};CT.prototype.unmount=Hk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nh(function(){ST(null,t,null,null)}),e[Cc]=null}};function CT(t){this._internalRoot=t}CT.prototype.unstable_scheduleHydration=function(t){if(t){var e=XG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Su.length&&e!==0&&e<Su[n].priority;n++);Su.splice(n,0,t),n===0&&qG(t)}};function Vk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function AT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h4(){}function Mne(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=kw(o);s.call(c)}}var o=mV(e,r,t,0,null,!1,!1,"",h4);return t._reactRootContainer=o,t[Cc]=o.current,Uv(t.nodeType===8?t.parentNode:t),Nh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=kw(l);a.call(c)}}var l=jk(t,0,!1,null,null,!1,!1,"",h4);return t._reactRootContainer=l,t[Cc]=l.current,Uv(t.nodeType===8?t.parentNode:t),Nh(function(){ST(e,l,n,r)}),l}function PT(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=kw(o);a.call(l)}}ST(e,o,t,i)}else o=Mne(n,e,t,i,r);return kw(o)}VG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=T0(e.pendingLanes);n!==0&&(uk(e,n|1),zs(e,zr()),!(vn&6)&&(dg=zr()+500,gd()))}break;case 13:Nh(function(){var r=Ac(t,1);if(r!==null){var i=ys();Ua(r,t,1,i)}}),Gk(t,1)}};dk=function(t){if(t.tag===13){var e=Ac(t,134217728);if(e!==null){var n=ys();Ua(e,t,134217728,n)}Gk(t,134217728)}};WG=function(t){if(t.tag===13){var e=Wu(t),n=Ac(t,e);if(n!==null){var r=ys();Ua(n,t,e,r)}Gk(t,e)}};XG=function(){return On};YG=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};dR=function(t,e,n){switch(e){case"input":if(iR(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yT(r);if(!i)throw Error(Ke(90));SG(r),iR(r,i)}}}break;case"textarea":AG(t,n);break;case"select":e=n.value,e!=null&&Bp(t,!!n.multiple,e,!1)}};OG=Fk;NG=Nh;var Lne={usingClientEntryPoint:!1,Events:[Wy,_p,yT,LG,kG,Fk]},zm={findFiberByHostInstance:ih,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kne={bundleType:zm.bundleType,version:zm.version,rendererPackageName:zm.rendererPackageName,rendererConfig:zm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FG(t),t===null?null:t.stateNode},findFiberByHostInstance:zm.findFiberByHostInstance||Ine,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$1.isDisabled&&$1.supportsFiber)try{pT=$1.inject(kne),Il=$1}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lne;Ao.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vk(e))throw Error(Ke(200));return Rne(t,e,null,n)};Ao.createRoot=function(t,e){if(!Vk(t))throw Error(Ke(299));var n=!1,r="",i=vV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jk(t,1,!1,null,null,n,!1,r,i),t[Cc]=e.current,Uv(t.nodeType===8?t.parentNode:t),new Hk(e)};Ao.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ke(188)):(t=Object.keys(t).join(","),Error(Ke(268,t)));return t=FG(e),t=t===null?null:t.stateNode,t};Ao.flushSync=function(t){return Nh(t)};Ao.hydrate=function(t,e,n){if(!AT(e))throw Error(Ke(200));return PT(null,t,e,!0,n)};Ao.hydrateRoot=function(t,e,n){if(!Vk(t))throw Error(Ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vV;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mV(e,null,t,1,n??null,i,!1,s,o),t[Cc]=e.current,Uv(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new CT(e)};Ao.render=function(t,e,n){if(!AT(e))throw Error(Ke(200));return PT(null,t,e,!1,n)};Ao.unmountComponentAtNode=function(t){if(!AT(t))throw Error(Ke(40));return t._reactRootContainer?(Nh(function(){PT(null,null,t,!1,function(){t._reactRootContainer=null,t[Cc]=null})}),!0):!1};Ao.unstable_batchedUpdates=Fk;Ao.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!AT(n))throw Error(Ke(200));if(t==null||t._reactInternals===void 0)throw Error(Ke(38));return PT(t,e,n,!1,r)};Ao.version="18.2.0-next-9e3b772b8-20220608";function yV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yV)}catch(t){console.error(t)}}yV(),mG.exports=Ao;var Fc=mG.exports;const C0=hd(Fc),One=jL({__proto__:null,default:C0},[Fc]);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rr(){return Rr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rr.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const f4="popstate";function Nne(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return qv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bh(i)}return Bne(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Dne(){return Math.random().toString(36).substr(2,8)}function p4(t,e){return{usr:t.state,key:t.key,idx:e}}function qv(t,e,n,r){return n===void 0&&(n=null),Rr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zc(e):e,{state:n,key:e&&e.key||r||Dne()})}function Bh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Bne(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Dr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Rr({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Dr.Pop;let b=u(),y=b==null?null:b-c;c=b,l&&l({action:a,location:m.location,delta:y})}function h(b,y){a=Dr.Push;let x=qv(m.location,b,y);n&&n(x,b),c=u()+1;let _=p4(x,c),w=m.createHref(x);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function f(b,y){a=Dr.Replace;let x=qv(m.location,b,y);n&&n(x,b),c=u();let _=p4(x,c),w=m.createHref(x);o.replaceState(_,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:Bh(b);return an(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(f4,d),l=b,()=>{i.removeEventListener(f4,d),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let y=p(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(b){return o.go(b)}};return m}var Ar;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ar||(Ar={}));const Fne=new Set(["lazy","caseSensitive","path","id","index","children"]);function zne(t){return t.index===!0}function HR(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(an(i.index!==!0||!i.children,"Cannot specify children on an index route"),an(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),zne(i)){let l=Rr({},i,e(i),{id:a});return r[a]=l,l}else{let l=Rr({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=HR(i.children,e,o,r)),l}})}function Ap(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?zc(e):e,i=Kg(r.pathname||"/",n);if(i==null)return null;let s=bV(t);$ne(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Kne(s[a],Jne(i));return o}function Une(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function bV(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(an(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=_c([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(an(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),bV(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Yne(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of _V(s.path))i(s,o,l)}),e}function _V(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_V(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $ne(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qne(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jne=/^:[\w-]+$/,Gne=3,Hne=2,Vne=1,Wne=10,Xne=-2,g4=t=>t==="*";function Yne(t,e){let n=t.split("/"),r=n.length;return n.some(g4)&&(r+=Xne),e&&(r+=Hne),n.filter(i=>!g4(i)).reduce((i,s)=>i+(jne.test(s)?Gne:s===""?Vne:Wne),r)}function qne(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Kne(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=Zne({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:_c([i,u.pathname]),pathnameBase:rre(_c([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=_c([i,u.pathnameBase]))}return s}function Zne(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qne(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?c[h]=void 0:c[h]=ere(p||"",h),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Qne(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Dh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Jne(t){try{return decodeURI(t)}catch(e){return Dh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ere(t,e){try{return decodeURIComponent(t)}catch(n){return Dh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Kg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function tre(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?zc(t):t;return{pathname:n?n.startsWith("/")?n:nre(n,e):e,search:ire(r),hash:sre(i)}}function nre(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function IA(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wk(t,e){let n=xV(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xk(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=zc(t):(i=Rr({},t),an(!i.pathname||!i.pathname.includes("?"),IA("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),IA("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),IA("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=tre(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const _c=t=>t.join("/").replace(/\/\/+/g,"/"),rre=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ire=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sre=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Yk{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function wV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EV=["post","put","patch","delete"],ore=new Set(EV),are=["get",...EV],lre=new Set(are),cre=new Set([301,302,303,307,308]),ure=new Set([307,308]),MA={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},dre={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Um={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},TV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hre=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),SV="remix-router-transitions";function fre(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;an(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let le=t.detectErrorBoundary;i=_e=>({hasErrorBoundary:le(_e)})}else i=hre;let s={},o=HR(t.routes,i,void 0,s),a,l=t.basename||"/",c=Rr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,d=new Set,h=null,f=null,p=null,m=t.hydrationData!=null,b=Ap(o,t.history.location,l),y=null;if(b==null){let le=$o(404,{pathname:t.history.location.pathname}),{matches:_e,route:Re}=E4(o);b=_e,y={[Re.id]:le}}let x,_=b.some(le=>le.route.lazy),w=b.some(le=>le.route.loader);if(_)x=!1;else if(!w)x=!0;else if(c.v7_partialHydration){let le=t.hydrationData?t.hydrationData.loaderData:null,_e=t.hydrationData?t.hydrationData.errors:null;x=b.every(Re=>Re.route.loader&&Re.route.loader.hydrate!==!0&&(le&&le[Re.route.id]!==void 0||_e&&_e[Re.route.id]!==void 0))}else x=t.hydrationData!=null;let E,S={historyAction:t.history.action,location:t.history.location,matches:b,initialized:x,navigation:MA,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},A=Dr.Pop,k=!1,M,I=!1,B=new Map,R=null,O=!1,C=!1,F=[],q=[],G=new Map,j=0,H=-1,Z=new Map,X=new Set,ee=new Map,ve=new Map,oe=new Set,fe=new Map,be=new Map,Le=!1;function se(){if(u=t.history.listen(le=>{let{action:_e,location:Re,delta:tt}=le;if(Le){Le=!1;return}Dh(be.size===0||tt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let it=Ze({currentLocation:S.location,nextLocation:Re,historyAction:_e});if(it&&tt!=null){Le=!0,t.history.go(tt*-1),Xe(it,{state:"blocked",location:Re,proceed(){Xe(it,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),t.history.go(tt)},reset(){let Ft=new Map(S.blockers);Ft.set(it,Um),ge({blockers:Ft})}});return}return ie(_e,Re)}),n){Tre(e,B);let le=()=>Sre(e,B);e.addEventListener("pagehide",le),R=()=>e.removeEventListener("pagehide",le)}return S.initialized||ie(Dr.Pop,S.location,{initialHydration:!0}),E}function ue(){u&&u(),R&&R(),d.clear(),M&&M.abort(),S.fetchers.forEach((le,_e)=>Ye(_e)),S.blockers.forEach((le,_e)=>Pt(_e))}function Te(le){return d.add(le),()=>d.delete(le)}function ge(le,_e){_e===void 0&&(_e={}),S=Rr({},S,le);let Re=[],tt=[];c.v7_fetcherPersist&&S.fetchers.forEach((it,Ft)=>{it.state==="idle"&&(oe.has(Ft)?tt.push(Ft):Re.push(Ft))}),[...d].forEach(it=>it(S,{deletedFetchers:tt,unstable_viewTransitionOpts:_e.viewTransitionOpts,unstable_flushSync:_e.flushSync===!0})),c.v7_fetcherPersist&&(Re.forEach(it=>S.fetchers.delete(it)),tt.forEach(it=>Ye(it)))}function Me(le,_e,Re){var tt,it;let{flushSync:Ft}=Re===void 0?{}:Re,St=S.actionData!=null&&S.navigation.formMethod!=null&&Aa(S.navigation.formMethod)&&S.navigation.state==="loading"&&((tt=le.state)==null?void 0:tt._isRedirect)!==!0,Ct;_e.actionData?Object.keys(_e.actionData).length>0?Ct=_e.actionData:Ct=null:St?Ct=S.actionData:Ct=null;let ft=_e.loaderData?w4(S.loaderData,_e.loaderData,_e.matches||[],_e.errors):S.loaderData,Zt=S.blockers;Zt.size>0&&(Zt=new Map(Zt),Zt.forEach((Wt,Sn)=>Zt.set(Sn,Um)));let Tn=k===!0||S.navigation.formMethod!=null&&Aa(S.navigation.formMethod)&&((it=le.state)==null?void 0:it._isRedirect)!==!0;a&&(o=a,a=void 0),O||A===Dr.Pop||(A===Dr.Push?t.history.push(le,le.state):A===Dr.Replace&&t.history.replace(le,le.state));let Mt;if(A===Dr.Pop){let Wt=B.get(S.location.pathname);Wt&&Wt.has(le.pathname)?Mt={currentLocation:S.location,nextLocation:le}:B.has(le.pathname)&&(Mt={currentLocation:le,nextLocation:S.location})}else if(I){let Wt=B.get(S.location.pathname);Wt?Wt.add(le.pathname):(Wt=new Set([le.pathname]),B.set(S.location.pathname,Wt)),Mt={currentLocation:S.location,nextLocation:le}}ge(Rr({},_e,{actionData:Ct,loaderData:ft,historyAction:A,location:le,initialized:!0,navigation:MA,revalidation:"idle",restoreScrollPosition:Wn(le,_e.matches||S.matches),preventScrollReset:Tn,blockers:Zt}),{viewTransitionOpts:Mt,flushSync:Ft===!0}),A=Dr.Pop,k=!1,I=!1,O=!1,C=!1,F=[],q=[]}async function Se(le,_e){if(typeof le=="number"){t.history.go(le);return}let Re=VR(S.location,S.matches,l,c.v7_prependBasename,le,c.v7_relativeSplatPath,_e==null?void 0:_e.fromRouteId,_e==null?void 0:_e.relative),{path:tt,submission:it,error:Ft}=m4(c.v7_normalizeFormMethod,!1,Re,_e),St=S.location,Ct=qv(S.location,tt,_e&&_e.state);Ct=Rr({},Ct,t.history.encodeLocation(Ct));let ft=_e&&_e.replace!=null?_e.replace:void 0,Zt=Dr.Push;ft===!0?Zt=Dr.Replace:ft===!1||it!=null&&Aa(it.formMethod)&&it.formAction===S.location.pathname+S.location.search&&(Zt=Dr.Replace);let Tn=_e&&"preventScrollReset"in _e?_e.preventScrollReset===!0:void 0,Mt=(_e&&_e.unstable_flushSync)===!0,Wt=Ze({currentLocation:St,nextLocation:Ct,historyAction:Zt});if(Wt){Xe(Wt,{state:"blocked",location:Ct,proceed(){Xe(Wt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ct}),Se(le,_e)},reset(){let Sn=new Map(S.blockers);Sn.set(Wt,Um),ge({blockers:Sn})}});return}return await ie(Zt,Ct,{submission:it,pendingError:Ft,preventScrollReset:Tn,replace:_e&&_e.replace,enableViewTransition:_e&&_e.unstable_viewTransition,flushSync:Mt})}function D(){if(Pe(),ge({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){ie(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}ie(A||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation})}}async function ie(le,_e,Re){M&&M.abort(),M=null,A=le,O=(Re&&Re.startUninterruptedRevalidation)===!0,Dn(S.location,S.matches),k=(Re&&Re.preventScrollReset)===!0,I=(Re&&Re.enableViewTransition)===!0;let tt=a||o,it=Re&&Re.overrideNavigation,Ft=Ap(tt,_e,l),St=(Re&&Re.flushSync)===!0;if(!Ft){let Sn=$o(404,{pathname:_e.pathname}),{matches:ar,route:yn}=E4(tt);Nt(),Me(_e,{matches:ar,loaderData:{},errors:{[yn.id]:Sn}},{flushSync:St});return}if(S.initialized&&!C&&yre(S.location,_e)&&!(Re&&Re.submission&&Aa(Re.submission.formMethod))){Me(_e,{matches:Ft},{flushSync:St});return}M=new AbortController;let Ct=jm(t.history,_e,M.signal,Re&&Re.submission),ft,Zt;if(Re&&Re.pendingError)Zt={[iv(Ft).route.id]:Re.pendingError};else if(Re&&Re.submission&&Aa(Re.submission.formMethod)){let Sn=await ae(Ct,_e,Re.submission,Ft,{replace:Re.replace,flushSync:St});if(Sn.shortCircuited)return;ft=Sn.pendingActionData,Zt=Sn.pendingActionError,it=LA(_e,Re.submission),St=!1,Ct=new Request(Ct.url,{signal:Ct.signal})}let{shortCircuited:Tn,loaderData:Mt,errors:Wt}=await K(Ct,_e,Ft,it,Re&&Re.submission,Re&&Re.fetcherSubmission,Re&&Re.replace,Re&&Re.initialHydration===!0,St,ft,Zt);Tn||(M=null,Me(_e,Rr({matches:Ft},ft?{actionData:ft}:{},{loaderData:Mt,errors:Wt})))}async function ae(le,_e,Re,tt,it){it===void 0&&(it={}),Pe();let Ft=wre(_e,Re);ge({navigation:Ft},{flushSync:it.flushSync===!0});let St,Ct=XR(tt,_e);if(!Ct.route.action&&!Ct.route.lazy)St={type:Ar.error,error:$o(405,{method:le.method,pathname:_e.pathname,routeId:Ct.route.id})};else if(St=await $m("action",le,Ct,tt,s,i,l,c.v7_relativeSplatPath),le.signal.aborted)return{shortCircuited:!0};if(lh(St)){let ft;return it&&it.replace!=null?ft=it.replace:ft=St.location===S.location.pathname+S.location.search,await me(S,St,{submission:Re,replace:ft}),{shortCircuited:!0}}if(Pp(St)){let ft=iv(tt,Ct.route.id);return(it&&it.replace)!==!0&&(A=Dr.Push),{pendingActionData:{},pendingActionError:{[ft.route.id]:St.error}}}if(ah(St))throw $o(400,{type:"defer-action"});return{pendingActionData:{[Ct.route.id]:St.data}}}async function K(le,_e,Re,tt,it,Ft,St,Ct,ft,Zt,Tn){let Mt=tt||LA(_e,it),Wt=it||Ft||C4(Mt),Sn=a||o,[ar,yn]=v4(t.history,S,Re,Wt,_e,c.v7_partialHydration&&Ct===!0,C,F,q,oe,ee,X,Sn,l,Zt,Tn);if(Nt(Yt=>!(Re&&Re.some(Bn=>Bn.route.id===Yt))||ar&&ar.some(Bn=>Bn.route.id===Yt)),H=++j,ar.length===0&&yn.length===0){let Yt=yt();return Me(_e,Rr({matches:Re,loaderData:{},errors:Tn||null},Zt?{actionData:Zt}:{},Yt?{fetchers:new Map(S.fetchers)}:{}),{flushSync:ft}),{shortCircuited:!0}}if(!O&&(!c.v7_partialHydration||!Ct)){yn.forEach(Bn=>{let Ti=S.fetchers.get(Bn.key),vr=Gm(void 0,Ti?Ti.data:void 0);S.fetchers.set(Bn.key,vr)});let Yt=Zt||S.actionData;ge(Rr({navigation:Mt},Yt?Object.keys(Yt).length===0?{actionData:null}:{actionData:Yt}:{},yn.length>0?{fetchers:new Map(S.fetchers)}:{}),{flushSync:ft})}yn.forEach(Yt=>{G.has(Yt.key)&&Ve(Yt.key),Yt.controller&&G.set(Yt.key,Yt.controller)});let Qr=()=>yn.forEach(Yt=>Ve(Yt.key));M&&M.signal.addEventListener("abort",Qr);let{results:Hs,loaderResults:hn,fetcherResults:gn}=await he(S.matches,Re,ar,yn,le);if(le.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Qr),yn.forEach(Yt=>G.delete(Yt.key));let $r=T4(Hs);if($r){if($r.idx>=ar.length){let Yt=yn[$r.idx-ar.length].key;X.add(Yt)}return await me(S,$r.result,{replace:St}),{shortCircuited:!0}}let{loaderData:jr,errors:mr}=x4(S,Re,ar,hn,Tn,yn,gn,fe);fe.forEach((Yt,Bn)=>{Yt.subscribe(Ti=>{(Ti||Yt.done)&&fe.delete(Bn)})});let Vs=yt(),ss=Ot(H),Ht=Vs||ss||yn.length>0;return Rr({loaderData:jr,errors:mr},Ht?{fetchers:new Map(S.fetchers)}:{})}function W(le,_e,Re,tt){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");G.has(le)&&Ve(le);let it=(tt&&tt.unstable_flushSync)===!0,Ft=a||o,St=VR(S.location,S.matches,l,c.v7_prependBasename,Re,c.v7_relativeSplatPath,_e,tt==null?void 0:tt.relative),Ct=Ap(Ft,St,l);if(!Ct){de(le,_e,$o(404,{pathname:St}),{flushSync:it});return}let{path:ft,submission:Zt,error:Tn}=m4(c.v7_normalizeFormMethod,!0,St,tt);if(Tn){de(le,_e,Tn,{flushSync:it});return}let Mt=XR(Ct,ft);if(k=(tt&&tt.preventScrollReset)===!0,Zt&&Aa(Zt.formMethod)){ne(le,_e,ft,Mt,Ct,it,Zt);return}ee.set(le,{routeId:_e,path:ft}),pe(le,_e,ft,Mt,Ct,it,Zt)}async function ne(le,_e,Re,tt,it,Ft,St){if(Pe(),ee.delete(le),!tt.route.action&&!tt.route.lazy){let Bn=$o(405,{method:St.formMethod,pathname:Re,routeId:_e});de(le,_e,Bn,{flushSync:Ft});return}let Ct=S.fetchers.get(le);Oe(le,Ere(St,Ct),{flushSync:Ft});let ft=new AbortController,Zt=jm(t.history,Re,ft.signal,St);G.set(le,ft);let Tn=j,Mt=await $m("action",Zt,tt,it,s,i,l,c.v7_relativeSplatPath);if(Zt.signal.aborted){G.get(le)===ft&&G.delete(le);return}if(c.v7_fetcherPersist&&oe.has(le)){if(lh(Mt)||Pp(Mt)){Oe(le,gu(void 0));return}}else{if(lh(Mt))if(G.delete(le),H>Tn){Oe(le,gu(void 0));return}else return X.add(le),Oe(le,Gm(St)),me(S,Mt,{fetcherSubmission:St});if(Pp(Mt)){de(le,_e,Mt.error);return}}if(ah(Mt))throw $o(400,{type:"defer-action"});let Wt=S.navigation.location||S.location,Sn=jm(t.history,Wt,ft.signal),ar=a||o,yn=S.navigation.state!=="idle"?Ap(ar,S.navigation.location,l):S.matches;an(yn,"Didn't find any matches after fetcher action");let Qr=++j;Z.set(le,Qr);let Hs=Gm(St,Mt.data);S.fetchers.set(le,Hs);let[hn,gn]=v4(t.history,S,yn,St,Wt,!1,C,F,q,oe,ee,X,ar,l,{[tt.route.id]:Mt.data},void 0);gn.filter(Bn=>Bn.key!==le).forEach(Bn=>{let Ti=Bn.key,vr=S.fetchers.get(Ti),Ro=Gm(void 0,vr?vr.data:void 0);S.fetchers.set(Ti,Ro),G.has(Ti)&&Ve(Ti),Bn.controller&&G.set(Ti,Bn.controller)}),ge({fetchers:new Map(S.fetchers)});let $r=()=>gn.forEach(Bn=>Ve(Bn.key));ft.signal.addEventListener("abort",$r);let{results:jr,loaderResults:mr,fetcherResults:Vs}=await he(S.matches,yn,hn,gn,Sn);if(ft.signal.aborted)return;ft.signal.removeEventListener("abort",$r),Z.delete(le),G.delete(le),gn.forEach(Bn=>G.delete(Bn.key));let ss=T4(jr);if(ss){if(ss.idx>=hn.length){let Bn=gn[ss.idx-hn.length].key;X.add(Bn)}return me(S,ss.result)}let{loaderData:Ht,errors:Yt}=x4(S,S.matches,hn,mr,void 0,gn,Vs,fe);if(S.fetchers.has(le)){let Bn=gu(Mt.data);S.fetchers.set(le,Bn)}Ot(Qr),S.navigation.state==="loading"&&Qr>H?(an(A,"Expected pending action"),M&&M.abort(),Me(S.navigation.location,{matches:yn,loaderData:Ht,errors:Yt,fetchers:new Map(S.fetchers)})):(ge({errors:Yt,loaderData:w4(S.loaderData,Ht,yn,Yt),fetchers:new Map(S.fetchers)}),C=!1)}async function pe(le,_e,Re,tt,it,Ft,St){let Ct=S.fetchers.get(le);Oe(le,Gm(St,Ct?Ct.data:void 0),{flushSync:Ft});let ft=new AbortController,Zt=jm(t.history,Re,ft.signal);G.set(le,ft);let Tn=j,Mt=await $m("loader",Zt,tt,it,s,i,l,c.v7_relativeSplatPath);if(ah(Mt)&&(Mt=await PV(Mt,Zt.signal,!0)||Mt),G.get(le)===ft&&G.delete(le),!Zt.signal.aborted){if(oe.has(le)){Oe(le,gu(void 0));return}if(lh(Mt))if(H>Tn){Oe(le,gu(void 0));return}else{X.add(le),await me(S,Mt);return}if(Pp(Mt)){de(le,_e,Mt.error);return}an(!ah(Mt),"Unhandled fetcher deferred data"),Oe(le,gu(Mt.data))}}async function me(le,_e,Re){let{submission:tt,fetcherSubmission:it,replace:Ft}=Re===void 0?{}:Re;_e.revalidate&&(C=!0);let St=qv(le.location,_e.location,{_isRedirect:!0});if(an(St,"Expected a location on the redirect navigation"),n){let Wt=!1;if(_e.reloadDocument)Wt=!0;else if(TV.test(_e.location)){const Sn=t.history.createURL(_e.location);Wt=Sn.origin!==e.location.origin||Kg(Sn.pathname,l)==null}if(Wt){Ft?e.location.replace(_e.location):e.location.assign(_e.location);return}}M=null;let Ct=Ft===!0?Dr.Replace:Dr.Push,{formMethod:ft,formAction:Zt,formEncType:Tn}=le.navigation;!tt&&!it&&ft&&Zt&&Tn&&(tt=C4(le.navigation));let Mt=tt||it;if(ure.has(_e.status)&&Mt&&Aa(Mt.formMethod))await ie(Ct,St,{submission:Rr({},Mt,{formAction:_e.location}),preventScrollReset:k});else{let Wt=LA(St,tt);await ie(Ct,St,{overrideNavigation:Wt,fetcherSubmission:it,preventScrollReset:k})}}async function he(le,_e,Re,tt,it){let Ft=await Promise.all([...Re.map(ft=>$m("loader",it,ft,_e,s,i,l,c.v7_relativeSplatPath)),...tt.map(ft=>ft.matches&&ft.match&&ft.controller?$m("loader",jm(t.history,ft.path,ft.controller.signal),ft.match,ft.matches,s,i,l,c.v7_relativeSplatPath):{type:Ar.error,error:$o(404,{pathname:ft.path})})]),St=Ft.slice(0,Re.length),Ct=Ft.slice(Re.length);return await Promise.all([S4(le,Re,St,St.map(()=>it.signal),!1,S.loaderData),S4(le,tt.map(ft=>ft.match),Ct,tt.map(ft=>ft.controller?ft.controller.signal:null),!0)]),{results:Ft,loaderResults:St,fetcherResults:Ct}}function Pe(){C=!0,F.push(...Nt()),ee.forEach((le,_e)=>{G.has(_e)&&(q.push(_e),Ve(_e))})}function Oe(le,_e,Re){Re===void 0&&(Re={}),S.fetchers.set(le,_e),ge({fetchers:new Map(S.fetchers)},{flushSync:(Re&&Re.flushSync)===!0})}function de(le,_e,Re,tt){tt===void 0&&(tt={});let it=iv(S.matches,_e);Ye(le),ge({errors:{[it.route.id]:Re},fetchers:new Map(S.fetchers)},{flushSync:(tt&&tt.flushSync)===!0})}function Ce(le){return c.v7_fetcherPersist&&(ve.set(le,(ve.get(le)||0)+1),oe.has(le)&&oe.delete(le)),S.fetchers.get(le)||dre}function Ye(le){let _e=S.fetchers.get(le);G.has(le)&&!(_e&&_e.state==="loading"&&Z.has(le))&&Ve(le),ee.delete(le),Z.delete(le),X.delete(le),oe.delete(le),S.fetchers.delete(le)}function Fe(le){if(c.v7_fetcherPersist){let _e=(ve.get(le)||0)-1;_e<=0?(ve.delete(le),oe.add(le)):ve.set(le,_e)}else Ye(le);ge({fetchers:new Map(S.fetchers)})}function Ve(le){let _e=G.get(le);an(_e,"Expected fetch controller: "+le),_e.abort(),G.delete(le)}function Bt(le){for(let _e of le){let Re=Ce(_e),tt=gu(Re.data);S.fetchers.set(_e,tt)}}function yt(){let le=[],_e=!1;for(let Re of X){let tt=S.fetchers.get(Re);an(tt,"Expected fetcher: "+Re),tt.state==="loading"&&(X.delete(Re),le.push(Re),_e=!0)}return Bt(le),_e}function Ot(le){let _e=[];for(let[Re,tt]of Z)if(tt<le){let it=S.fetchers.get(Re);an(it,"Expected fetcher: "+Re),it.state==="loading"&&(Ve(Re),Z.delete(Re),_e.push(Re))}return Bt(_e),_e.length>0}function Ge(le,_e){let Re=S.blockers.get(le)||Um;return be.get(le)!==_e&&be.set(le,_e),Re}function Pt(le){S.blockers.delete(le),be.delete(le)}function Xe(le,_e){let Re=S.blockers.get(le)||Um;an(Re.state==="unblocked"&&_e.state==="blocked"||Re.state==="blocked"&&_e.state==="blocked"||Re.state==="blocked"&&_e.state==="proceeding"||Re.state==="blocked"&&_e.state==="unblocked"||Re.state==="proceeding"&&_e.state==="unblocked","Invalid blocker state transition: "+Re.state+" -> "+_e.state);let tt=new Map(S.blockers);tt.set(le,_e),ge({blockers:tt})}function Ze(le){let{currentLocation:_e,nextLocation:Re,historyAction:tt}=le;if(be.size===0)return;be.size>1&&Dh(!1,"A router only supports one blocker at a time");let it=Array.from(be.entries()),[Ft,St]=it[it.length-1],Ct=S.blockers.get(Ft);if(!(Ct&&Ct.state==="proceeding")&&St({currentLocation:_e,nextLocation:Re,historyAction:tt}))return Ft}function Nt(le){let _e=[];return fe.forEach((Re,tt)=>{(!le||le(tt))&&(Re.cancel(),_e.push(tt),fe.delete(tt))}),_e}function zt(le,_e,Re){if(h=le,p=_e,f=Re||null,!m&&S.navigation===MA){m=!0;let tt=Wn(S.location,S.matches);tt!=null&&ge({restoreScrollPosition:tt})}return()=>{h=null,p=null,f=null}}function pn(le,_e){return f&&f(le,_e.map(tt=>Une(tt,S.loaderData)))||le.key}function Dn(le,_e){if(h&&p){let Re=pn(le,_e);h[Re]=p()}}function Wn(le,_e){if(h){let Re=pn(le,_e),tt=h[Re];if(typeof tt=="number")return tt}return null}function Jn(le){s={},a=HR(le,i,void 0,s)}return E={get basename(){return l},get future(){return c},get state(){return S},get routes(){return o},get window(){return e},initialize:se,subscribe:Te,enableScrollRestoration:zt,navigate:Se,fetch:W,revalidate:D,createHref:le=>t.history.createHref(le),encodeLocation:le=>t.history.encodeLocation(le),getFetcher:Ce,deleteFetcher:Fe,dispose:ue,getBlocker:Ge,deleteBlocker:Pt,_internalFetchControllers:G,_internalActiveDeferreds:fe,_internalSetRoutes:Jn},E}function pre(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function VR(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=Xk(i||".",Wk(l,s),Kg(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!qk(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:_c([n,u.pathname])),Bh(u)}function m4(t,e,n,r){if(!r||!pre(r))return{path:n};if(r.formMethod&&!xre(r.formMethod))return{path:n,error:$o(405,{method:r.formMethod})};let i=()=>({path:n,error:$o(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=AV(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Aa(o))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[m,b]=p;return""+f+m+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Aa(o))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}an(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=WR(r.formData),c=r.formData;else if(r.body instanceof FormData)l=WR(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=_4(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=_4(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Aa(u.formMethod))return{path:n,submission:u};let d=zc(n);return e&&d.search&&qk(d.search)&&l.append("index",""),d.search="?"+l,{path:Bh(d),submission:u}}function gre(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function v4(t,e,n,r,i,s,o,a,l,c,u,d,h,f,p,m){let b=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,y=t.createURL(e.location),x=t.createURL(i),_=m?Object.keys(m)[0]:void 0,E=gre(n,_).filter((A,k)=>{let{route:M}=A;if(M.lazy)return!0;if(M.loader==null)return!1;if(s)return M.loader.hydrate?!0:e.loaderData[M.id]===void 0&&(!e.errors||e.errors[M.id]===void 0);if(mre(e.loaderData,e.matches[k],A)||a.some(R=>R===A.route.id))return!0;let I=e.matches[k],B=A;return y4(A,Rr({currentUrl:y,currentParams:I.params,nextUrl:x,nextParams:B.params},r,{actionResult:b,defaultShouldRevalidate:o||y.pathname+y.search===x.pathname+x.search||y.search!==x.search||CV(I,B)}))}),S=[];return u.forEach((A,k)=>{if(s||!n.some(O=>O.route.id===A.routeId)||c.has(k))return;let M=Ap(h,A.path,f);if(!M){S.push({key:k,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let I=e.fetchers.get(k),B=XR(M,A.path),R=!1;d.has(k)?R=!1:l.includes(k)?R=!0:I&&I.state!=="idle"&&I.data===void 0?R=o:R=y4(B,Rr({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:b,defaultShouldRevalidate:o})),R&&S.push({key:k,routeId:A.routeId,path:A.path,matches:M,match:B,controller:new AbortController})}),[E,S]}function mre(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function CV(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function y4(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function b4(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];an(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Dh(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Fne.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Rr({},e(i),{lazy:void 0}))}async function $m(t,e,n,r,i,s,o,a,l){l===void 0&&(l={});let c,u,d,h=m=>{let b,y=new Promise((x,_)=>b=_);return d=()=>b(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:n.params,context:l.requestContext}),y])};try{let m=n.route[t];if(n.route.lazy)if(m){let b,y=await Promise.all([h(m).catch(x=>{b=x}),b4(n.route,s,i)]);if(b)throw b;u=y[0]}else if(await b4(n.route,s,i),m=n.route[t],m)u=await h(m);else if(t==="action"){let b=new URL(e.url),y=b.pathname+b.search;throw $o(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:Ar.data,data:void 0};else if(m)u=await h(m);else{let b=new URL(e.url),y=b.pathname+b.search;throw $o(404,{pathname:y})}an(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){c=Ar.error,u=m}finally{d&&e.signal.removeEventListener("abort",d)}if(_re(u)){let m=u.status;if(cre.has(m)){let y=u.headers.get("Location");if(an(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!TV.test(y))y=VR(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,y,a);else if(!l.isStaticRequest){let x=new URL(e.url),_=y.startsWith("//")?new URL(x.protocol+y):new URL(y),w=Kg(_.pathname,o)!=null;_.origin===x.origin&&w&&(y=_.pathname+_.search+_.hash)}if(l.isStaticRequest)throw u.headers.set("Location",y),u;return{type:Ar.redirect,status:m,location:y,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===Ar.error?Ar.error:Ar.data,response:u};let b;try{let y=u.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?u.body==null?b=null:b=await u.json():b=await u.text()}catch(y){return{type:Ar.error,error:y}}return c===Ar.error?{type:c,error:new Yk(m,u.statusText,b),headers:u.headers}:{type:Ar.data,data:b,statusCode:u.status,headers:u.headers}}if(c===Ar.error)return{type:c,error:u};if(bre(u)){var f,p;return{type:Ar.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:Ar.data,data:u}}function jm(t,e,n,r){let i=t.createURL(AV(e)).toString(),s={signal:n};if(r&&Aa(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=WR(r.formData):s.body=r.formData}return new Request(i,s)}function WR(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function _4(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function vre(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,d)=>{let h=e[d].route.id;if(an(!lh(u),"Cannot handle redirect results in processLoaderData"),Pp(u)){let f=iv(t,h),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[h]=void 0,l||(l=!0,a=wV(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else ah(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function x4(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=vre(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h,controller:f}=s[u];an(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(f&&f.signal.aborted))if(Pp(p)){let m=iv(t.matches,h==null?void 0:h.route.id);c&&c[m.route.id]||(c=Rr({},c,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(lh(p))an(!1,"Unhandled fetcher revalidation redirect");else if(ah(p))an(!1,"Unhandled fetcher deferred data");else{let m=gu(p.data);t.fetchers.set(d,m)}}return{loaderData:l,errors:c}}function w4(t,e,n,r){let i=Rr({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function iv(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function E4(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $o(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Yk(t||500,o,new Error(a),!0)}function T4(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(lh(n))return{result:n,idx:e}}}function AV(t){let e=typeof t=="string"?zc(t):t;return Bh(Rr({},e,{hash:""}))}function yre(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ah(t){return t.type===Ar.deferred}function Pp(t){return t.type===Ar.error}function lh(t){return(t&&t.type)===Ar.redirect}function bre(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _re(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function xre(t){return lre.has(t.toLowerCase())}function Aa(t){return ore.has(t.toLowerCase())}async function S4(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!CV(c,l)&&(s&&s[l.route.id])!==void 0;if(ah(a)&&(i||u)){let d=r[o];an(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await PV(a,d,i).then(h=>{h&&(n[o]=h||n[o])})}}}async function PV(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ar.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ar.error,error:i}}return{type:Ar.data,data:t.deferredData.data}}}function qk(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function XR(t,e){let n=typeof e=="string"?zc(e).search:e.search;if(t[t.length-1].route.index&&qk(n||""))return t[t.length-1];let r=xV(t);return r[r.length-1]}function C4(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function LA(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wre(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Gm(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ere(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function gu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Tre(t,e){try{let n=t.sessionStorage.getItem(SV);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Sre(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(SV,JSON.stringify(n))}catch(r){Dh(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kv(){return Kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kv.apply(this,arguments)}const RT=P.createContext(null),RV=P.createContext(null),ef=P.createContext(null),IT=P.createContext(null),md=P.createContext({outlet:null,matches:[],isDataRoute:!1}),IV=P.createContext(null);function Cre(t,e){let{relative:n}=e===void 0?{}:e;Yy()||an(!1);let{basename:r,navigator:i}=P.useContext(ef),{hash:s,pathname:o,search:a}=LV(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:_c([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Yy(){return P.useContext(IT)!=null}function Zg(){return Yy()||an(!1),P.useContext(IT).location}function MV(t){P.useContext(ef).static||P.useLayoutEffect(t)}function Ts(){let{isDataRoute:t}=P.useContext(md);return t?zre():Are()}function Are(){Yy()||an(!1);let t=P.useContext(RT),{basename:e,future:n,navigator:r}=P.useContext(ef),{matches:i}=P.useContext(md),{pathname:s}=Zg(),o=JSON.stringify(Wk(i,n.v7_relativeSplatPath)),a=P.useRef(!1);return MV(()=>{a.current=!0}),P.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Xk(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_c([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const Pre=P.createContext(null);function Rre(t){let e=P.useContext(md).outlet;return e&&P.createElement(Pre.Provider,{value:t},e)}function LV(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(ef),{matches:i}=P.useContext(md),{pathname:s}=Zg(),o=JSON.stringify(Wk(i,r.v7_relativeSplatPath));return P.useMemo(()=>Xk(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ire(t,e,n,r){Yy()||an(!1);let{navigator:i}=P.useContext(ef),{matches:s}=P.useContext(md),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zg(),u;if(e){var d;let b=typeof e=="string"?zc(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||an(!1),u=b}else u=c;let h=u.pathname||"/",f=l==="/"?h:h.slice(l.length)||"/",p=Ap(t,{pathname:f}),m=Nre(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:_c([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:_c([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return e&&m?P.createElement(IT.Provider,{value:{location:Kv({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Dr.Pop}},m):m}function Mre(){let t=Fre(),e=wV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,null)}const Lre=P.createElement(Mre,null);class kre extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(md.Provider,{value:this.props.routeContext},P.createElement(IV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ore(t){let{routeContext:e,match:n,children:r}=t,i=P.useContext(RT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(md.Provider,{value:e},r)}function Nre(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||an(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,b=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Lre,l&&(c<0&&h===0?(Ure("route-fallback",!1),p=!0,b=null):c===h&&(p=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),x=()=>{let _;return f?_=m:p?_=b:d.route.Component?_=P.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,P.createElement(Ore,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(kre,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var kV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kV||{}),hg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hg||{});function Dre(t){let e=P.useContext(RT);return e||an(!1),e}function OV(t){let e=P.useContext(RV);return e||an(!1),e}function Bre(t){let e=P.useContext(md);return e||an(!1),e}function Kk(t){let e=Bre(),n=e.matches[e.matches.length-1];return n.route.id||an(!1),n.route.id}function Uc(){let t=OV(hg.UseLoaderData),e=Kk(hg.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function Fre(){var t;let e=P.useContext(IV),n=OV(hg.UseRouteError),r=Kk(hg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zre(){let{router:t}=Dre(kV.UseNavigateStable),e=Kk(hg.UseNavigateStable),n=P.useRef(!1);return MV(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Kv({fromRouteId:e},s)))},[t,e])}const A4={};function Ure(t,e,n){!e&&!A4[t]&&(A4[t]=!0)}function Zk(t){return Rre(t.context)}function $re(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Dr.Pop,navigator:s,static:o=!1,future:a}=t;Yy()&&an(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:s,static:o,future:Kv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=zc(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=P.useMemo(()=>{let b=Kg(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return m==null?null:P.createElement(ef.Provider,{value:c},P.createElement(IT.Provider,{children:n,value:m}))}new Promise(()=>{});function jre(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:P.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:P.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:P.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(this,arguments)}function Gre(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Hre(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vre(t,e){return t.button===0&&(!e||e==="_self")&&!Hre(t)}const Wre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function Xre(t,e){return fre({basename:e==null?void 0:e.basename,future:Zv({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:Nne({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Yre(),routes:t,mapRouteProperties:jre,window:e==null?void 0:e.window}).initialize()}function Yre(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Zv({},e,{errors:qre(e.errors)})),e}function qre(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Yk(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const Kre=P.createContext({isTransitioning:!1}),Zre=P.createContext(new Map),Qre="startTransition",P4=lw[Qre],Jre="flushSync",R4=One[Jre];function eie(t){P4?P4(t):t()}function Hm(t){R4?R4(t):t()}class tie{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function nie(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=P.useState(n.state),[o,a]=P.useState(),[l,c]=P.useState({isTransitioning:!1}),[u,d]=P.useState(),[h,f]=P.useState(),[p,m]=P.useState(),b=P.useRef(new Map),{v7_startTransition:y}=r||{},x=P.useCallback(A=>{y?eie(A):A()},[y]),_=P.useCallback((A,k)=>{let{deletedFetchers:M,unstable_flushSync:I,unstable_viewTransitionOpts:B}=k;M.forEach(O=>b.current.delete(O)),A.fetchers.forEach((O,C)=>{O.data!==void 0&&b.current.set(C,O.data)});let R=n.window==null||typeof n.window.document.startViewTransition!="function";if(!B||R){I?Hm(()=>s(A)):x(()=>s(A));return}if(I){Hm(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let O=n.window.document.startViewTransition(()=>{Hm(()=>s(A))});O.finished.finally(()=>{Hm(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),Hm(()=>f(O));return}h?(u&&u.resolve(),h.skipTransition(),m({state:A,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(a(A),c({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[n.window,h,u,b,x]);P.useLayoutEffect(()=>n.subscribe(_),[n,_]),P.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new tie)},[l]),P.useEffect(()=>{if(u&&o&&n.window){let A=o,k=u.promise,M=n.window.document.startViewTransition(async()=>{x(()=>s(A)),await k});M.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(M)}},[x,o,u,n.window]),P.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,h,i.location,o]),P.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),P.useEffect(()=>{},[]);let w=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,k,M)=>n.navigate(A,{state:k,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(A,k,M)=>n.navigate(A,{replace:!0,state:k,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),E=n.basename||"/",S=P.useMemo(()=>({router:n,navigator:w,static:!1,basename:E}),[n,w,E]);return P.createElement(P.Fragment,null,P.createElement(RT.Provider,{value:S},P.createElement(RV.Provider,{value:i},P.createElement(Zre.Provider,{value:b.current},P.createElement(Kre.Provider,{value:l},P.createElement($re,{basename:E,location:i.location,navigationType:i.historyAction,navigator:w,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?P.createElement(rie,{routes:n.routes,future:n.future,state:i}):e))))),null)}function rie(t){let{routes:e,future:n,state:r}=t;return Ire(e,void 0,r,n)}const iie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NV=P.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=Gre(e,Wre),{basename:f}=P.useContext(ef),p,m=!1;if(typeof c=="string"&&sie.test(c)&&(p=c,iie))try{let _=new URL(window.location.href),w=c.startsWith("//")?new URL(_.protocol+c):new URL(c),E=Kg(w.pathname,f);w.origin===_.origin&&E!=null?c=E+w.search+w.hash:m=!0}catch{}let b=Cre(c,{relative:i}),y=oie(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function x(_){r&&r(_),_.defaultPrevented||y(_)}return P.createElement("a",Zv({},h,{href:p||b,onClick:m||s?r:x,ref:n,target:l}))});var I4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(I4||(I4={}));var M4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M4||(M4={}));function oie(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ts(),c=Zg(),u=LV(t,{relative:o});return P.useCallback(d=>{if(Vre(d,n)){d.preventDefault();let h=r!==void 0?r:Bh(c)===Bh(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}const aie={black:"#000",white:"#fff"},Qv=aie,lie={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Mf=lie,cie={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Lf=cie,uie={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},kf=uie,die={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Of=die,hie={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Nf=hie,fie={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Vm=fie,pie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},gie=pie;function rd(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const qy="$$material";function He(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var mie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vie=rG(function(t){return mie.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),yie=tk(function(t,e){var n=t.styles,r=dT([n],void 0,P.useContext(fT)),i=P.useRef();return aF(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),aF(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&ek(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function tf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return dT(e)}var vd=function(){var e=tf.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},bie=vie,_ie=function(e){return e!=="theme"},L4=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?bie:_ie},k4=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},xie=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return JL(n,r,i),hG(function(){return ek(n,r,i)}),null},wie=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=k4(e,n,r),l=a||L4(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var h=u.length,f=1;f<h;f++)d.push(u[f],u[0][f])}var p=tk(function(m,b,y){var x=c&&m.as||i,_="",w=[],E=m;if(m.theme==null){E={};for(var S in m)E[S]=m[S];E.theme=P.useContext(fT)}typeof m.className=="string"?_=cG(b.registered,w,m.className):m.className!=null&&(_=m.className+" ");var A=dT(d.concat(w),b.registered,E);_+=b.key+"-"+A.name,o!==void 0&&(_+=" "+o);var k=c&&a===void 0?L4(x):l,M={};for(var I in m)c&&I==="as"||k(I)&&(M[I]=m[I]);return M.className=_,M.ref=y,P.createElement(P.Fragment,null,P.createElement(xie,{cache:b,serialized:A,isStringTag:typeof x=="string"}),P.createElement(x,M))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,b){return t(m,z({},n,b,{shouldForwardProp:k4(p,b,!0)})).apply(void 0,d)},p}},Eie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],At=wie.bind();Eie.forEach(function(t){At[t]=At(t)});var DV={exports:{}},Tie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sie=Tie,Cie=Sie;function BV(){}function FV(){}FV.resetWarningCache=BV;var Aie=function(){function t(r,i,s,o,a,l){if(l!==Cie){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:FV,resetWarningCache:BV};return n.PropTypes=n,n};DV.exports=Aie();var $c=DV.exports;const nr=hd($c);function Pie(t){return t==null||Object.keys(t).length===0}function Rie(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Pie(i)?n:i):e;return J.jsx(yie,{styles:r})}function zV(t,e){return At(t,e)}const Iie=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function dc(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function UV(t){if(!dc(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=UV(t[n])}),e}function ts(t,e,n={clone:!0}){const r=n.clone?z({},t):t;return dc(t)&&dc(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(dc(e[i])&&i in t&&dc(t[i])?r[i]=ts(t[i],e[i],n):n.clone?r[i]=dc(e[i])?UV(e[i]):e[i]:r[i]=e[i])}),r}var jn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk=Symbol.for("react.element"),Jk=Symbol.for("react.portal"),MT=Symbol.for("react.fragment"),LT=Symbol.for("react.strict_mode"),kT=Symbol.for("react.profiler"),OT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),Mie=Symbol.for("react.server_context"),DT=Symbol.for("react.forward_ref"),BT=Symbol.for("react.suspense"),FT=Symbol.for("react.suspense_list"),zT=Symbol.for("react.memo"),UT=Symbol.for("react.lazy"),Lie=Symbol.for("react.offscreen"),$V;$V=Symbol.for("react.module.reference");function la(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Qk:switch(t=t.type,t){case MT:case kT:case LT:case BT:case FT:return t;default:switch(t=t&&t.$$typeof,t){case Mie:case NT:case DT:case UT:case zT:case OT:return t;default:return e}}case Jk:return e}}}jn.ContextConsumer=NT;jn.ContextProvider=OT;jn.Element=Qk;jn.ForwardRef=DT;jn.Fragment=MT;jn.Lazy=UT;jn.Memo=zT;jn.Portal=Jk;jn.Profiler=kT;jn.StrictMode=LT;jn.Suspense=BT;jn.SuspenseList=FT;jn.isAsyncMode=function(){return!1};jn.isConcurrentMode=function(){return!1};jn.isContextConsumer=function(t){return la(t)===NT};jn.isContextProvider=function(t){return la(t)===OT};jn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qk};jn.isForwardRef=function(t){return la(t)===DT};jn.isFragment=function(t){return la(t)===MT};jn.isLazy=function(t){return la(t)===UT};jn.isMemo=function(t){return la(t)===zT};jn.isPortal=function(t){return la(t)===Jk};jn.isProfiler=function(t){return la(t)===kT};jn.isStrictMode=function(t){return la(t)===LT};jn.isSuspense=function(t){return la(t)===BT};jn.isSuspenseList=function(t){return la(t)===FT};jn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===MT||t===kT||t===LT||t===BT||t===FT||t===Lie||typeof t=="object"&&t!==null&&(t.$$typeof===UT||t.$$typeof===zT||t.$$typeof===OT||t.$$typeof===NT||t.$$typeof===DT||t.$$typeof===$V||t.getModuleId!==void 0)};jn.typeOf=la;function Ee(t){if(typeof t!="string")throw new Error(rd(7));return t.charAt(0).toUpperCase()+t.slice(1)}function YR(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Ky(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function kie(t,e){return()=>null}function Gp(t,e){var n,r;return P.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Zn(t){return t&&t.ownerDocument||document}function Nl(t){return Zn(t).defaultView||window}function Oie(t,e){return()=>null}function Ow(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const _s=typeof window<"u"?P.useLayoutEffect:P.useEffect;let O4=0;function Nie(t){const[e,n]=P.useState(t),r=t||e;return P.useEffect(()=>{e==null&&(O4+=1,n(`mui-${O4}`))},[e]),r}const N4=lw.useId;function Qg(t){if(N4!==void 0){const e=N4();return t??e}return Nie(t)}function Die(t,e,n,r,i){return null}function Fh({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=P.useRef(t!==void 0),[s,o]=P.useState(e),a=i?t:s,l=P.useCallback(c=>{i||o(c)},[]);return[a,l]}function Yr(t){const e=P.useRef(t);return _s(()=>{e.current=t}),P.useRef((...n)=>(0,e.current)(...n)).current}function $n(...t){return P.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Ow(n,e)})},t)}let $T=!0,qR=!1,D4;const Bie={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Fie(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Bie[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function zie(t){t.metaKey||t.altKey||t.ctrlKey||($T=!0)}function kA(){$T=!1}function Uie(){this.visibilityState==="hidden"&&qR&&($T=!0)}function $ie(t){t.addEventListener("keydown",zie,!0),t.addEventListener("mousedown",kA,!0),t.addEventListener("pointerdown",kA,!0),t.addEventListener("touchstart",kA,!0),t.addEventListener("visibilitychange",Uie,!0)}function jie(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return $T||Fie(e)}function jT(){const t=P.useCallback(i=>{i!=null&&$ie(i.ownerDocument)},[]),e=P.useRef(!1);function n(){return e.current?(qR=!0,window.clearTimeout(D4),D4=window.setTimeout(()=>{qR=!1},100),e.current=!1,!0):!1}function r(i){return jie(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function jV(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let Df;function GV(){if(Df)return Df;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Df="reverse",t.scrollLeft>0?Df="default":(t.scrollLeft=1,t.scrollLeft===0&&(Df="negative")),document.body.removeChild(t),Df}function Gie(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(GV()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const HV=t=>{const e=P.useRef({});return P.useEffect(()=>{e.current=t}),e.current};function VV(t){return P.Children.toArray(t).filter(e=>P.isValidElement(e))}const Hie={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Vie=Hie;function GT(t,e){const n=z({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=z({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=z({},s),Object.keys(i).forEach(o=>{n[r][o]=GT(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function ct(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const B4=t=>t,Wie=()=>{let t=B4;return{configure(e){t=e},generate(e){return t(e)},reset(){t=B4}}},Xie=Wie(),eO=Xie,WV={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ut(t,e,n="Mui"){const r=WV[e];return r?`${n}-${r}`:`${eO.generate(t)}-${e}`}function st(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=ut(t,i,n)}),r}function nh(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Yie=["values","unit","step"],qie=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>z({},n,{[r.key]:r.val}),{})};function Kie(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=He(t,Yie),s=qie(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function c(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return z({keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const Zie={borderRadius:4},Qie=Zie;function sv(t,e){return e?ts(t,e,{clone:!1}):t}const tO={xs:0,sm:600,md:900,lg:1200,xl:1536},F4={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${tO[t]}px)`};function Wa(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||F4;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||F4;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||tO).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function XV(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function YV(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Jie(t,...e){const n=XV(t),r=[n,...e].reduce((i,s)=>ts(i,s),{});return YV(Object.keys(n),r)}function ese(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function OA({values:t,breakpoints:e,base:n}){const r=n||ese(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function HT(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Nw(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=HT(t,n)||r,e&&(i=e(i,r,t)),i}function Ur(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=HT(l,r)||{};return Wa(o,a,d=>{let h=Nw(c,i,d);return d===h&&typeof d=="string"&&(h=Nw(c,i,`${e}${d==="default"?"":Ee(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function tse(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const nse={m:"margin",p:"padding"},rse={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},z4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ise=tse(t=>{if(t.length>2)if(z4[t])t=z4[t];else return[t];const[e,n]=t.split(""),r=nse[e],i=rse[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),nO=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],rO=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nO,...rO];function Zy(t,e,n,r){var i;const s=(i=HT(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function iO(t){return Zy(t,"spacing",8)}function zh(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function sse(t,e){return n=>t.reduce((r,i)=>(r[i]=zh(e,n),r),{})}function ose(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=ise(n),s=sse(i,r),o=t[n];return Wa(t,o,s)}function qV(t,e){const n=iO(t.theme);return Object.keys(t).map(r=>ose(t,e,r,n)).reduce(sv,{})}function Sr(t){return qV(t,nO)}Sr.propTypes={};Sr.filterProps=nO;function Cr(t){return qV(t,rO)}Cr.propTypes={};Cr.filterProps=rO;function ase(t=8){if(t.mui)return t;const e=iO({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function VT(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?sv(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Yo(t){return typeof t!="number"?t:`${t}px solid`}function ca(t,e){return Ur({prop:t,themeKey:"borders",transform:e})}const lse=ca("border",Yo),cse=ca("borderTop",Yo),use=ca("borderRight",Yo),dse=ca("borderBottom",Yo),hse=ca("borderLeft",Yo),fse=ca("borderColor"),pse=ca("borderTopColor"),gse=ca("borderRightColor"),mse=ca("borderBottomColor"),vse=ca("borderLeftColor"),yse=ca("outline",Yo),bse=ca("outlineColor"),WT=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Zy(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:zh(e,r)});return Wa(t,t.borderRadius,n)}return null};WT.propTypes={};WT.filterProps=["borderRadius"];VT(lse,cse,use,dse,hse,fse,pse,gse,mse,vse,WT,yse,bse);const XT=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Zy(t.theme,"spacing",8),n=r=>({gap:zh(e,r)});return Wa(t,t.gap,n)}return null};XT.propTypes={};XT.filterProps=["gap"];const YT=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Zy(t.theme,"spacing",8),n=r=>({columnGap:zh(e,r)});return Wa(t,t.columnGap,n)}return null};YT.propTypes={};YT.filterProps=["columnGap"];const qT=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Zy(t.theme,"spacing",8),n=r=>({rowGap:zh(e,r)});return Wa(t,t.rowGap,n)}return null};qT.propTypes={};qT.filterProps=["rowGap"];const _se=Ur({prop:"gridColumn"}),xse=Ur({prop:"gridRow"}),wse=Ur({prop:"gridAutoFlow"}),Ese=Ur({prop:"gridAutoColumns"}),Tse=Ur({prop:"gridAutoRows"}),Sse=Ur({prop:"gridTemplateColumns"}),Cse=Ur({prop:"gridTemplateRows"}),Ase=Ur({prop:"gridTemplateAreas"}),Pse=Ur({prop:"gridArea"});VT(XT,YT,qT,_se,xse,wse,Ese,Tse,Sse,Cse,Ase,Pse);function Hp(t,e){return e==="grey"?e:t}const Rse=Ur({prop:"color",themeKey:"palette",transform:Hp}),Ise=Ur({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Hp}),Mse=Ur({prop:"backgroundColor",themeKey:"palette",transform:Hp});VT(Rse,Ise,Mse);function ao(t){return t<=1&&t!==0?`${t*100}%`:t}const Lse=Ur({prop:"width",transform:ao}),sO=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||tO[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:ao(n)}};return Wa(t,t.maxWidth,e)}return null};sO.filterProps=["maxWidth"];const kse=Ur({prop:"minWidth",transform:ao}),Ose=Ur({prop:"height",transform:ao}),Nse=Ur({prop:"maxHeight",transform:ao}),Dse=Ur({prop:"minHeight",transform:ao});Ur({prop:"size",cssProperty:"width",transform:ao});Ur({prop:"size",cssProperty:"height",transform:ao});const Bse=Ur({prop:"boxSizing"});VT(Lse,sO,kse,Ose,Nse,Dse,Bse);const Fse={border:{themeKey:"borders",transform:Yo},borderTop:{themeKey:"borders",transform:Yo},borderRight:{themeKey:"borders",transform:Yo},borderBottom:{themeKey:"borders",transform:Yo},borderLeft:{themeKey:"borders",transform:Yo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:WT},color:{themeKey:"palette",transform:Hp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Hp},backgroundColor:{themeKey:"palette",transform:Hp},p:{style:Cr},pt:{style:Cr},pr:{style:Cr},pb:{style:Cr},pl:{style:Cr},px:{style:Cr},py:{style:Cr},padding:{style:Cr},paddingTop:{style:Cr},paddingRight:{style:Cr},paddingBottom:{style:Cr},paddingLeft:{style:Cr},paddingX:{style:Cr},paddingY:{style:Cr},paddingInline:{style:Cr},paddingInlineStart:{style:Cr},paddingInlineEnd:{style:Cr},paddingBlock:{style:Cr},paddingBlockStart:{style:Cr},paddingBlockEnd:{style:Cr},m:{style:Sr},mt:{style:Sr},mr:{style:Sr},mb:{style:Sr},ml:{style:Sr},mx:{style:Sr},my:{style:Sr},margin:{style:Sr},marginTop:{style:Sr},marginRight:{style:Sr},marginBottom:{style:Sr},marginLeft:{style:Sr},marginX:{style:Sr},marginY:{style:Sr},marginInline:{style:Sr},marginInlineStart:{style:Sr},marginInlineEnd:{style:Sr},marginBlock:{style:Sr},marginBlockStart:{style:Sr},marginBlockEnd:{style:Sr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:XT},rowGap:{style:qT},columnGap:{style:YT},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ao},maxWidth:{style:sO},minWidth:{transform:ao},height:{transform:ao},maxHeight:{transform:ao},minHeight:{transform:ao},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},KT=Fse;function zse(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Use(t,e){return typeof t=="function"?t(e):t}function $se(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const h=HT(i,c)||{};return d?d(o):Wa(o,r,p=>{let m=Nw(h,u,p);return p===m&&typeof p=="string"&&(m=Nw(h,u,`${n}${p==="default"?"":Ee(p)}`,p)),l===!1?m:{[l]:m}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:KT;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=XV(s.breakpoints),d=Object.keys(u);let h=u;return Object.keys(c).forEach(f=>{const p=Use(c[f],s);if(p!=null)if(typeof p=="object")if(o[f])h=sv(h,t(f,p,s,o));else{const m=Wa({theme:s},p,b=>({[f]:b}));zse(m,p)?h[f]=e({sx:p,theme:s}):h=sv(h,m)}else h=sv(h,t(f,p,s,o))}),YV(d,h)}return Array.isArray(i)?i.map(a):a(i)}return e}const KV=$se();KV.filterProps=["sx"];const ZT=KV,jse=["breakpoints","palette","spacing","shape"];function QT(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=He(t,jse),a=Kie(n),l=ase(i);let c=ts({breakpoints:a,direction:"ltr",components:{},palette:z({mode:"light"},r),spacing:l,shape:z({},Qie,s)},o);return c=e.reduce((u,d)=>ts(u,d),c),c.unstable_sxConfig=z({},KT,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return ZT({sx:d,theme:this})},c}function Gse(t){return Object.keys(t).length===0}function oO(t=null){const e=P.useContext(fT);return!e||Gse(e)?t:e}const Hse=QT();function JT(t=Hse){return oO(t)}function Vse({styles:t,themeId:e,defaultTheme:n={}}){const r=JT(n),i=typeof t=="function"?t(e&&r[e]||r):t;return J.jsx(Rie,{styles:i})}const Wse=["sx"],Xse=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:KT;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function aO(t){const{sx:e}=t,n=He(t,Wse),{systemProps:r,otherProps:i}=Xse(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return dc(a)?z({},r,a):r}:s=z({},r,e),z({},i,{sx:s})}function ZV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ZV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ZV(t))&&(r&&(r+=" "),r+=e);return r}const Yse=["className","component"];function qse(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=zV("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ZT);return P.forwardRef(function(l,c){const u=JT(n),d=aO(l),{className:h,component:f="div"}=d,p=He(d,Yse);return J.jsx(s,z({as:f,ref:c,className:ze(h,i?i(r):r),theme:e&&u[e]||u},p))})}const Kse=["variant"];function U4(t){return t.length===0}function QV(t){const{variant:e}=t,n=He(t,Kse);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=U4(r)?t[i]:Ee(t[i]):r+=`${U4(r)?i:Ee(i)}${Ee(t[i].toString())}`}),r}const Zse=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Qse(t){return Object.keys(t).length===0}function Jse(t){return typeof t=="string"&&t.charCodeAt(0)>96}const eoe=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,Dw=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=QV(r.props),n[i]=r.style}),n},toe=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),Dw(n)},Bw=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=z({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[QV(o.props)])),typeof o.props=="function"&&(s+=1)}),i},noe=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return Bw(t,e,s)};function ov(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const roe=QT(),ioe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Px({defaultTheme:t,theme:e,themeId:n}){return Qse(e)?t:e[n]||e}function soe(t){return t?(e,n)=>n[t]:null}const $4=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t(z({},e,{theme:Px(z({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=Bw(e,Dw(s),s);return[i,...o]}return i};function JV(t={}){const{themeId:e,defaultTheme:n=roe,rootShouldForwardProp:r=ov,slotShouldForwardProp:i=ov}=t,s=o=>ZT(z({},o,{theme:Px(z({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Iie(o,w=>w.filter(E=>!(E!=null&&E.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:h=soe(ioe(c))}=a,f=He(a,Zse),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,m=d||!1;let b,y=ov;c==="Root"||c==="root"?y=r:c?y=i:Jse(o)&&(y=void 0);const x=zV(o,z({shouldForwardProp:y,label:b},f)),_=(w,...E)=>{const S=E?E.map(I=>{if(typeof I=="function"&&I.__emotion_real!==I)return B=>$4({styledArg:I,props:B,defaultTheme:n,themeId:e});if(dc(I)){let B=I,R;return I&&I.variants&&(R=I.variants,delete B.variants,B=O=>{let C=I;return Bw(O,Dw(R),R).forEach(q=>{C=ts(C,q)}),C}),B}return I}):[];let A=w;if(dc(w)){let I;w&&w.variants&&(I=w.variants,delete A.variants,A=B=>{let R=w;return Bw(B,Dw(I),I).forEach(C=>{R=ts(R,C)}),R})}else typeof w=="function"&&w.__emotion_real!==w&&(A=I=>$4({styledArg:w,props:I,defaultTheme:n,themeId:e}));l&&h&&S.push(I=>{const B=Px(z({},I,{defaultTheme:n,themeId:e})),R=eoe(l,B);if(R){const O={};return Object.entries(R).forEach(([C,F])=>{O[C]=typeof F=="function"?F(z({},I,{theme:B})):F}),h(I,O)}return null}),l&&!p&&S.push(I=>{const B=Px(z({},I,{defaultTheme:n,themeId:e}));return noe(I,toe(l,B),B,l)}),m||S.push(s);const k=S.length-E.length;if(Array.isArray(w)&&k>0){const I=new Array(k).fill("");A=[...w,...I],A.raw=[...w.raw,...I]}const M=x(A,...S);return o.muiName&&(M.muiName=o.muiName),M};return x.withConfig&&(_.withConfig=x.withConfig),_}}const ooe=JV();function eW(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:GT(e.components[n].defaultProps,r)}function tW({props:t,name:e,defaultTheme:n,themeId:r}){let i=JT(n);return r&&(i=i[r]||i),eW({theme:i,name:e,props:t})}function lO(t,e=0,n=1){return nh(t,e,n)}function aoe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Uh(t){if(t.type)return t;if(t.charAt(0)==="#")return Uh(aoe(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(rd(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(rd(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function eS(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function loe(t){t=Uh(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),eS({type:a,values:l})}function KR(t){t=Uh(t);let e=t.type==="hsl"||t.type==="hsla"?Uh(loe(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function coe(t,e){const n=KR(t),r=KR(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function nn(t,e){return t=Uh(t),e=lO(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,eS(t)}function Qy(t,e){if(t=Uh(t),e=lO(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return eS(t)}function Jy(t,e){if(t=Uh(t),e=lO(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return eS(t)}function uoe(t,e=.15){return KR(t)>.5?Qy(t,e):Jy(t,e)}const doe=["component","direction","spacing","divider","children","className","useFlexGap"],hoe=QT(),foe=ooe("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function poe(t){return tW({props:t,name:"MuiStack",defaultTheme:hoe})}function goe(t,e){const n=P.Children.toArray(t).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(P.cloneElement(e,{key:`separator-${s}`})),r),[])}const moe=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],voe=({ownerState:t,theme:e})=>{let n=z({display:"flex",flexDirection:"column"},Wa({theme:e},OA({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=iO(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof t.spacing=="object"&&t.spacing[c]!=null||typeof t.direction=="object"&&t.direction[c]!=null)&&(l[c]=!0),l),{}),s=OA({values:t.direction,base:i}),o=OA({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,c,u)=>{if(!s[l]){const h=c>0?s[u[c-1]]:"column";s[l]=h}}),n=ts(n,Wa({theme:e},o,(l,c)=>t.useFlexGap?{gap:zh(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${moe(c?s[c]:t.direction)}`]:zh(r,l)}}))}return n=Jie(e.breakpoints,n),n};function yoe(t={}){const{createStyledComponent:e=foe,useThemeProps:n=poe,componentName:r="MuiStack"}=t,i=()=>ct({root:["root"]},l=>ut(r,l),{}),s=e(voe);return P.forwardRef(function(l,c){const u=n(l),d=aO(u),{component:h="div",direction:f="column",spacing:p=0,divider:m,children:b,className:y,useFlexGap:x=!1}=d,_=He(d,doe),w={direction:f,spacing:p,useFlexGap:x},E=i();return J.jsx(s,z({as:h,ownerState:w,ref:c,className:ze(E.root,y)},_,{children:m?goe(b,m):b}))})}function boe(t,e){return z({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const _oe=["mode","contrastThreshold","tonalOffset"],j4={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qv.white,default:Qv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},NA={text:{primary:Qv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function G4(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Jy(t.main,i):e==="dark"&&(t.dark=Qy(t.main,s)))}function xoe(t="light"){return t==="dark"?{main:kf[200],light:kf[50],dark:kf[400]}:{main:kf[700],light:kf[400],dark:kf[800]}}function woe(t="light"){return t==="dark"?{main:Lf[200],light:Lf[50],dark:Lf[400]}:{main:Lf[500],light:Lf[300],dark:Lf[700]}}function Eoe(t="light"){return t==="dark"?{main:Mf[500],light:Mf[300],dark:Mf[700]}:{main:Mf[700],light:Mf[400],dark:Mf[800]}}function Toe(t="light"){return t==="dark"?{main:Of[400],light:Of[300],dark:Of[700]}:{main:Of[700],light:Of[500],dark:Of[900]}}function Soe(t="light"){return t==="dark"?{main:Nf[400],light:Nf[300],dark:Nf[700]}:{main:Nf[800],light:Nf[500],dark:Nf[900]}}function Coe(t="light"){return t==="dark"?{main:Vm[400],light:Vm[300],dark:Vm[700]}:{main:"#ed6c02",light:Vm[500],dark:Vm[900]}}function Aoe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=He(t,_oe),s=t.primary||xoe(e),o=t.secondary||woe(e),a=t.error||Eoe(e),l=t.info||Toe(e),c=t.success||Soe(e),u=t.warning||Coe(e);function d(m){return coe(m,NA.text.primary)>=n?NA.text.primary:j4.text.primary}const h=({color:m,name:b,mainShade:y=500,lightShade:x=300,darkShade:_=700})=>{if(m=z({},m),!m.main&&m[y]&&(m.main=m[y]),!m.hasOwnProperty("main"))throw new Error(rd(11,b?` (${b})`:"",y));if(typeof m.main!="string")throw new Error(rd(12,b?` (${b})`:"",JSON.stringify(m.main)));return G4(m,"light",x,r),G4(m,"dark",_,r),m.contrastText||(m.contrastText=d(m.main)),m},f={dark:NA,light:j4};return ts(z({common:z({},Qv),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:gie,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),i)}const Poe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Roe(t){return Math.round(t*1e5)/1e5}const H4={textTransform:"uppercase"},V4='"Roboto", "Helvetica", "Arial", sans-serif';function Ioe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=V4,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=He(n,Poe),f=i/14,p=d||(y=>`${y/c*f}rem`),m=(y,x,_,w,E)=>z({fontFamily:r,fontWeight:y,fontSize:p(x),lineHeight:_},r===V4?{letterSpacing:`${Roe(w/x)}em`}:{},E,u),b={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,H4),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,H4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ts(z({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},b),h,{clone:!1})}const Moe=.2,Loe=.14,koe=.12;function dr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Moe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Loe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${koe})`].join(",")}const Ooe=["none",dr(0,2,1,-1,0,1,1,0,0,1,3,0),dr(0,3,1,-2,0,2,2,0,0,1,5,0),dr(0,3,3,-2,0,3,4,0,0,1,8,0),dr(0,2,4,-1,0,4,5,0,0,1,10,0),dr(0,3,5,-1,0,5,8,0,0,1,14,0),dr(0,3,5,-1,0,6,10,0,0,1,18,0),dr(0,4,5,-2,0,7,10,1,0,2,16,1),dr(0,5,5,-3,0,8,10,1,0,3,14,2),dr(0,5,6,-3,0,9,12,1,0,3,16,2),dr(0,6,6,-3,0,10,14,1,0,4,18,3),dr(0,6,7,-4,0,11,15,1,0,4,20,3),dr(0,7,8,-4,0,12,17,2,0,5,22,4),dr(0,7,8,-4,0,13,19,2,0,5,24,4),dr(0,7,9,-4,0,14,21,2,0,5,26,4),dr(0,8,9,-5,0,15,22,2,0,6,28,5),dr(0,8,10,-5,0,16,24,2,0,6,30,5),dr(0,8,11,-5,0,17,26,2,0,6,32,5),dr(0,9,11,-5,0,18,28,2,0,7,34,6),dr(0,9,12,-6,0,19,29,2,0,7,36,6),dr(0,10,13,-6,0,20,31,3,0,8,38,7),dr(0,10,13,-6,0,21,33,3,0,8,40,7),dr(0,10,14,-6,0,22,35,3,0,8,42,7),dr(0,11,14,-7,0,23,36,3,0,9,44,8),dr(0,11,15,-7,0,24,38,3,0,9,46,8)],Noe=["duration","easing","delay"],Doe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},nW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function W4(t){return`${Math.round(t)}ms`}function Boe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Foe(t){const e=z({},Doe,t.easing),n=z({},nW,t.duration);return z({getAutoHeightDuration:Boe,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return He(s,Noe),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:W4(o)} ${a} ${typeof l=="string"?l:W4(l)}`).join(",")}},t,{easing:e,duration:n})}const zoe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Uoe=zoe,$oe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function rW(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=He(t,$oe);if(t.vars)throw new Error(rd(18));const a=Aoe(r),l=QT(t);let c=ts(l,{mixins:boe(l.breakpoints,n),palette:a,shadows:Ooe.slice(),typography:Ioe(a,s),transitions:Foe(i),zIndex:z({},Uoe),applyDarkStyles(u){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:u}:this.palette.mode==="dark"?u:{}}});return c=ts(c,o),c=e.reduce((u,d)=>ts(u,d),c),c.unstable_sxConfig=z({},KT,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return ZT({sx:d,theme:this})},c}const joe=rW(),tS=joe;function Ss(){const t=JT(tS);return t[qy]||t}function ht({props:t,name:e}){return tW({props:t,name:e,defaultTheme:tS,themeId:qy})}const is=t=>ov(t)&&t!=="classes",cO=ov,Ae=JV({themeId:qy,defaultTheme:tS,rootShouldForwardProp:is}),X4=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Goe(t){return ut("MuiSvgIcon",t)}st("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Hoe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Voe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Ee(e)}`,`fontSize${Ee(n)}`]};return ct(i,Goe,r)},Woe=Ae("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Ee(n.color)}`],e[`fontSize${Ee(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?d:{action:(f=(t.vars||t).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),Jv=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=He(r,Hoe),p=P.isValidElement(i)&&i.type==="svg",m=z({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),b={};u||(b.viewBox=h);const y=Voe(m);return J.jsxs(Woe,z({as:a,className:ze(y.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},b,f,p&&i.props,{ownerState:m,children:[p?i.props.children:i,d?J.jsx("title",{children:d}):null]}))});Jv.muiName="SvgIcon";function vt(t,e){function n(r,i){return J.jsx(Jv,z({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=Jv.muiName,P.memo(P.forwardRef(n))}const Xoe={configure:t=>{eO.configure(t)}},Yoe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Ee,createChainedFunction:YR,createSvgIcon:vt,debounce:Ky,deprecatedPropType:kie,isMuiElement:Gp,ownerDocument:Zn,ownerWindow:Nl,requirePropFactory:Oie,setRef:Ow,unstable_ClassNameGenerator:Xoe,unstable_useEnhancedEffect:_s,unstable_useId:Qg,unsupportedProp:Die,useControlled:Fh,useEventCallback:Yr,useForkRef:$n,useIsFocusVisible:jT},Symbol.toStringTag,{value:"Module"}));function ZR(t,e){return ZR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZR(t,e)}function iW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ZR(t,e)}const Y4={disabled:!1},Fw=Rn.createContext(null);var qoe=function(e){return e.scrollTop},A0="unmounted",Yd="exited",qd="entering",sp="entered",QR="exiting",jc=function(t){iW(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Yd,s.appearStatus=qd):l=sp:r.unmountOnExit||r.mountOnEnter?l=A0:l=Yd,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===A0?{status:Yd}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==qd&&o!==sp&&(s=qd):(o===qd||o===sp)&&(s=QR)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===qd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:C0.findDOMNode(this);o&&qoe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Yd&&this.setState({status:A0})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[C0.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||Y4.disabled){this.safeSetState({status:sp},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:qd},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:sp},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:C0.findDOMNode(this);if(!s||Y4.disabled){this.safeSetState({status:Yd},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:QR},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Yd},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:C0.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===A0)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=He(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Rn.createElement(Fw.Provider,{value:null},typeof o=="function"?o(i,a):Rn.cloneElement(Rn.Children.only(o),a))},e}(Rn.Component);jc.contextType=Fw;jc.propTypes={};function Bf(){}jc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bf,onEntering:Bf,onEntered:Bf,onExit:Bf,onExiting:Bf,onExited:Bf};jc.UNMOUNTED=A0;jc.EXITED=Yd;jc.ENTERING=qd;jc.ENTERED=sp;jc.EXITING=QR;const nS=jc;function Koe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uO(t,e){var n=function(s){return e&&P.isValidElement(s)?e(s):s},r=Object.create(null);return t&&P.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Zoe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function ch(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Qoe(t,e){return uO(t.children,function(n){return P.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ch(n,"appear",t),enter:ch(n,"enter",t),exit:ch(n,"exit",t)})})}function Joe(t,e,n){var r=uO(t.children),i=Zoe(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=P.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:ch(o,"exit",t),enter:ch(o,"enter",t)}):!l&&a&&!u?i[s]=P.cloneElement(o,{in:!1}):l&&a&&P.isValidElement(c)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:ch(o,"exit",t),enter:ch(o,"enter",t)}))}}),i}var eae=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},tae={component:"div",childFactory:function(e){return e}},dO=function(t){iW(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Koe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Qoe(i,a):Joe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=uO(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=z({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=He(i,["component","childFactory"]),l=this.state.contextValue,c=eae(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Rn.createElement(Fw.Provider,{value:l},c):Rn.createElement(Fw.Provider,{value:l},Rn.createElement(s,a,c))},e}(Rn.Component);dO.propTypes={};dO.defaultProps=tae;const nae=dO,hO=t=>t.scrollTop;function id(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function rae(t){return ut("MuiCollapse",t)}st("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const iae=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],sae=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return ct(r,rae,n)},oae=Ae("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>z({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&z({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),aae=Ae("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>z({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),lae=Ae("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>z({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),sW=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:f,onExit:p,onExited:m,onExiting:b,orientation:y="vertical",style:x,timeout:_=nW.standard,TransitionComponent:w=nS}=r,E=He(r,iae),S=z({},r,{orientation:y,collapsedSize:a}),A=sae(S),k=Ss(),M=P.useRef(),I=P.useRef(null),B=P.useRef(),R=typeof a=="number"?`${a}px`:a,O=y==="horizontal",C=O?"width":"height";P.useEffect(()=>()=>{clearTimeout(M.current)},[]);const F=P.useRef(null),q=$n(n,F),G=be=>Le=>{if(be){const se=F.current;Le===void 0?be(se):be(se,Le)}},j=()=>I.current?I.current[O?"clientWidth":"clientHeight"]:0,H=G((be,Le)=>{I.current&&O&&(I.current.style.position="absolute"),be.style[C]=R,d&&d(be,Le)}),Z=G((be,Le)=>{const se=j();I.current&&O&&(I.current.style.position="");const{duration:ue,easing:Te}=id({style:x,timeout:_,easing:c},{mode:"enter"});if(_==="auto"){const ge=k.transitions.getAutoHeightDuration(se);be.style.transitionDuration=`${ge}ms`,B.current=ge}else be.style.transitionDuration=typeof ue=="string"?ue:`${ue}ms`;be.style[C]=`${se}px`,be.style.transitionTimingFunction=Te,f&&f(be,Le)}),X=G((be,Le)=>{be.style[C]="auto",h&&h(be,Le)}),ee=G(be=>{be.style[C]=`${j()}px`,p&&p(be)}),ve=G(m),oe=G(be=>{const Le=j(),{duration:se,easing:ue}=id({style:x,timeout:_,easing:c},{mode:"exit"});if(_==="auto"){const Te=k.transitions.getAutoHeightDuration(Le);be.style.transitionDuration=`${Te}ms`,B.current=Te}else be.style.transitionDuration=typeof se=="string"?se:`${se}ms`;be.style[C]=R,be.style.transitionTimingFunction=ue,b&&b(be)}),fe=be=>{_==="auto"&&(M.current=setTimeout(be,B.current||0)),i&&i(F.current,be)};return J.jsx(w,z({in:u,onEnter:H,onEntered:X,onEntering:Z,onExit:ee,onExited:ve,onExiting:oe,addEndListener:fe,nodeRef:F,timeout:_==="auto"?null:_},E,{children:(be,Le)=>J.jsx(oae,z({as:l,className:ze(A.root,o,{entered:A.entered,exited:!u&&R==="0px"&&A.hidden}[be]),style:z({[O?"minWidth":"minHeight"]:R},x),ownerState:z({},S,{state:be}),ref:q},Le,{children:J.jsx(aae,{ownerState:z({},S,{state:be}),className:A.wrapper,ref:I,children:J.jsx(lae,{ownerState:z({},S,{state:be}),className:A.wrapperInner,children:s})})}))}))});sW.muiSupportAuto=!0;const oW=sW;function cae(t){return ut("MuiPaper",t)}st("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const uae=["className","component","elevation","square","variant"],dae=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return ct(s,cae,i)},hae=Ae("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return z({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&z({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${nn("#fff",X4(e.elevation))}, ${nn("#fff",X4(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),fae=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=He(r,uae),u=z({},r,{component:s,elevation:o,square:a,variant:l}),d=dae(u);return J.jsx(hae,z({as:s,ownerState:u,className:ze(d.root,i),ref:n},c))}),nf=fae;function Yu(t){return typeof t=="string"}function P0(t,e,n){return t===void 0||Yu(t)?e:z({},e,{ownerState:z({},e.ownerState,n)})}function pae(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const gae={disableDefaultClasses:!1},mae=P.createContext(gae);function vae(t){const{disableDefaultClasses:e}=P.useContext(mae);return n=>e?"":t(n)}function av(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function yae(t,e,n){return typeof t=="function"?t(e,n):t}function q4(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function bae(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=ze(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=z({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),m=z({},n,i,r);return f.length>0&&(m.className=f),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:void 0}}const o=av(z({},i,r)),a=q4(r),l=q4(i),c=e(o),u=ze(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=z({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),h=z({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}const _ae=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Ir(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=He(t,_ae),a=s?{}:yae(r,i),{props:l,internalRef:c}=bae(z({},o,{externalSlotProps:a})),u=$n(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return P0(n,z({},l,{ref:u}),i)}function xae(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,d]=P.useState(!1),h=ze(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=ze(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),P.useEffect(()=>{if(!a&&l!=null){const m=setTimeout(l,c);return()=>{clearTimeout(m)}}},[l,a,c]),J.jsx("span",{className:h,style:f,children:J.jsx("span",{className:p})})}const Go=st("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),wae=["center","classes","className"];let rS=t=>t,K4,Z4,Q4,J4;const JR=550,Eae=80,Tae=vd(K4||(K4=rS`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Sae=vd(Z4||(Z4=rS`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Cae=vd(Q4||(Q4=rS`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Aae=Ae("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Pae=Ae(xae,{name:"MuiTouchRipple",slot:"Ripple"})(J4||(J4=rS`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Go.rippleVisible,Tae,JR,({theme:t})=>t.transitions.easing.easeInOut,Go.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Go.child,Go.childLeaving,Sae,JR,({theme:t})=>t.transitions.easing.easeInOut,Go.childPulsate,Cae,({theme:t})=>t.transitions.easing.easeInOut),Rae=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=He(r,wae),[l,c]=P.useState([]),u=P.useRef(0),d=P.useRef(null);P.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=P.useRef(!1),f=P.useRef(0),p=P.useRef(null),m=P.useRef(null);P.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const b=P.useCallback(w=>{const{pulsate:E,rippleX:S,rippleY:A,rippleSize:k,cb:M}=w;c(I=>[...I,J.jsx(Pae,{classes:{ripple:ze(s.ripple,Go.ripple),rippleVisible:ze(s.rippleVisible,Go.rippleVisible),ripplePulsate:ze(s.ripplePulsate,Go.ripplePulsate),child:ze(s.child,Go.child),childLeaving:ze(s.childLeaving,Go.childLeaving),childPulsate:ze(s.childPulsate,Go.childPulsate)},timeout:JR,pulsate:E,rippleX:S,rippleY:A,rippleSize:k},u.current)]),u.current+=1,d.current=M},[s]),y=P.useCallback((w={},E={},S=()=>{})=>{const{pulsate:A=!1,center:k=i||E.pulsate,fakeElement:M=!1}=E;if((w==null?void 0:w.type)==="mousedown"&&h.current){h.current=!1;return}(w==null?void 0:w.type)==="touchstart"&&(h.current=!0);const I=M?null:m.current,B=I?I.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,O,C;if(k||w===void 0||w.clientX===0&&w.clientY===0||!w.clientX&&!w.touches)R=Math.round(B.width/2),O=Math.round(B.height/2);else{const{clientX:F,clientY:q}=w.touches&&w.touches.length>0?w.touches[0]:w;R=Math.round(F-B.left),O=Math.round(q-B.top)}if(k)C=Math.sqrt((2*B.width**2+B.height**2)/3),C%2===0&&(C+=1);else{const F=Math.max(Math.abs((I?I.clientWidth:0)-R),R)*2+2,q=Math.max(Math.abs((I?I.clientHeight:0)-O),O)*2+2;C=Math.sqrt(F**2+q**2)}w!=null&&w.touches?p.current===null&&(p.current=()=>{b({pulsate:A,rippleX:R,rippleY:O,rippleSize:C,cb:S})},f.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},Eae)):b({pulsate:A,rippleX:R,rippleY:O,rippleSize:C,cb:S})},[i,b]),x=P.useCallback(()=>{y({},{pulsate:!0})},[y]),_=P.useCallback((w,E)=>{if(clearTimeout(f.current),(w==null?void 0:w.type)==="touchend"&&p.current){p.current(),p.current=null,f.current=setTimeout(()=>{_(w,E)});return}p.current=null,c(S=>S.length>0?S.slice(1):S),d.current=E},[]);return P.useImperativeHandle(n,()=>({pulsate:x,start:y,stop:_}),[x,y,_]),J.jsx(Aae,z({className:ze(Go.root,s.root,o),ref:m},a,{children:J.jsx(nae,{component:null,exit:!0,children:l})}))}),Iae=Rae;function Mae(t){return ut("MuiButtonBase",t)}const Lae=st("MuiButtonBase",["root","disabled","focusVisible"]),kae=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Oae=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=ct({root:["root",e&&"disabled",n&&"focusVisible"]},Mae,i);return n&&r&&(o.root+=` ${r}`),o},Nae=Ae("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Lae.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Dae=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:b,onDragLeave:y,onFocus:x,onFocusVisible:_,onKeyDown:w,onKeyUp:E,onMouseDown:S,onMouseLeave:A,onMouseUp:k,onTouchEnd:M,onTouchMove:I,onTouchStart:B,tabIndex:R=0,TouchRippleProps:O,touchRippleRef:C,type:F}=r,q=He(r,kae),G=P.useRef(null),j=P.useRef(null),H=$n(j,C),{isFocusVisibleRef:Z,onFocus:X,onBlur:ee,ref:ve}=jT(),[oe,fe]=P.useState(!1);c&&oe&&fe(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{fe(!0),G.current.focus()}}),[]);const[be,Le]=P.useState(!1);P.useEffect(()=>{Le(!0)},[]);const se=be&&!u&&!c;P.useEffect(()=>{oe&&h&&!u&&be&&j.current.pulsate()},[u,h,oe,be]);function ue(Ve,Bt,yt=d){return Yr(Ot=>(Bt&&Bt(Ot),!yt&&j.current&&j.current[Ve](Ot),!0))}const Te=ue("start",S),ge=ue("stop",b),Me=ue("stop",y),Se=ue("stop",k),D=ue("stop",Ve=>{oe&&Ve.preventDefault(),A&&A(Ve)}),ie=ue("start",B),ae=ue("stop",M),K=ue("stop",I),W=ue("stop",Ve=>{ee(Ve),Z.current===!1&&fe(!1),p&&p(Ve)},!1),ne=Yr(Ve=>{G.current||(G.current=Ve.currentTarget),X(Ve),Z.current===!0&&(fe(!0),_&&_(Ve)),x&&x(Ve)}),pe=()=>{const Ve=G.current;return l&&l!=="button"&&!(Ve.tagName==="A"&&Ve.href)},me=P.useRef(!1),he=Yr(Ve=>{h&&!me.current&&oe&&j.current&&Ve.key===" "&&(me.current=!0,j.current.stop(Ve,()=>{j.current.start(Ve)})),Ve.target===Ve.currentTarget&&pe()&&Ve.key===" "&&Ve.preventDefault(),w&&w(Ve),Ve.target===Ve.currentTarget&&pe()&&Ve.key==="Enter"&&!c&&(Ve.preventDefault(),m&&m(Ve))}),Pe=Yr(Ve=>{h&&Ve.key===" "&&j.current&&oe&&!Ve.defaultPrevented&&(me.current=!1,j.current.stop(Ve,()=>{j.current.pulsate(Ve)})),E&&E(Ve),m&&Ve.target===Ve.currentTarget&&pe()&&Ve.key===" "&&!Ve.defaultPrevented&&m(Ve)});let Oe=l;Oe==="button"&&(q.href||q.to)&&(Oe=f);const de={};Oe==="button"?(de.type=F===void 0?"button":F,de.disabled=c):(!q.href&&!q.to&&(de.role="button"),c&&(de["aria-disabled"]=c));const Ce=$n(n,ve,G),Ye=z({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:R,focusVisible:oe}),Fe=Oae(Ye);return J.jsxs(Nae,z({as:Oe,className:ze(Fe.root,a),ownerState:Ye,onBlur:W,onClick:m,onContextMenu:ge,onFocus:ne,onKeyDown:he,onKeyUp:Pe,onMouseDown:Te,onMouseLeave:D,onMouseUp:Se,onDragLeave:Me,onTouchEnd:ae,onTouchMove:K,onTouchStart:ie,ref:Ce,tabIndex:c?-1:R,type:F},de,q,{children:[o,se?J.jsx(Iae,z({ref:H,center:s},O)):null]}))}),sa=Dae;function Bae(t){return ut("MuiIconButton",t)}const Fae=st("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),zae=["edge","children","className","color","disabled","disableFocusRipple","size"],Uae=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${Ee(r)}`,i&&`edge${Ee(i)}`,`size${Ee(s)}`]};return ct(o,Bae,e)},$ae=Ae(sa,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Ee(n.color)}`],n.edge&&e[`edge${Ee(n.edge)}`],e[`size${Ee(n.size)}`]]}})(({theme:t,ownerState:e})=>z({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return z({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&z({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":z({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Fae.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),jae=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=He(r,zae),h=z({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),f=Uae(h);return J.jsx($ae,z({className:ze(f.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:h},d,{children:s}))}),bs=jae;function Gae(t){return ut("MuiTypography",t)}st("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Hae=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Vae=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${Ee(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return ct(a,Gae,o)},Wae=Ae("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Ee(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>z({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),e5={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Xae={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Yae=t=>Xae[t]||t,qae=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTypography"}),i=Yae(r.color),s=aO(z({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=e5}=s,p=He(s,Hae),m=z({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:h,variantMapping:f}),b=l||(d?"p":f[h]||e5[h])||"span",y=Vae(m);return J.jsx(Wae,z({as:b,ref:n,ownerState:m,className:ze(y.root,a)},p))}),En=qae;function Kae(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,s=HV({badgeContent:e,max:r});let o=n;n===!1&&e===0&&!i&&(o=!0);const{badgeContent:a,max:l=r}=o?s:t,c=a&&Number(a)>l?`${l}+`:a;return{badgeContent:a,invisible:o,max:l,displayValue:c}}const aW="base";function Zae(t){return`${aW}--${t}`}function Qae(t,e){return`${aW}-${t}-${e}`}function lW(t,e){const n=WV[e];return n?Zae(n):Qae(t,e)}function Jae(t,e){const n={};return e.forEach(r=>{n[r]=lW(t,r)}),n}function t5(t){return t.substring(2).toLowerCase()}function ele(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function tle(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=P.useRef(!1),a=P.useRef(null),l=P.useRef(!1),c=P.useRef(!1);P.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=$n(e.ref,a),d=Yr(p=>{const m=c.current;c.current=!1;const b=Zn(a.current);if(!l.current||!a.current||"clientX"in p&&ele(p,b))return;if(o.current){o.current=!1;return}let y;p.composedPath?y=p.composedPath().indexOf(a.current)>-1:y=!b.documentElement.contains(p.target)||a.current.contains(p.target),!y&&(n||!m)&&i(p)}),h=p=>m=>{c.current=!0;const b=e.props[p];b&&b(m)},f={ref:u};return s!==!1&&(f[s]=h(s)),P.useEffect(()=>{if(s!==!1){const p=t5(s),m=Zn(a.current),b=()=>{o.current=!0};return m.addEventListener(p,d),m.addEventListener("touchmove",b),()=>{m.removeEventListener(p,d),m.removeEventListener("touchmove",b)}}},[d,s]),r!==!1&&(f[r]=h(r)),P.useEffect(()=>{if(r!==!1){const p=t5(r),m=Zn(a.current);return m.addEventListener(p,d),()=>{m.removeEventListener(p,d)}}},[d,r]),J.jsx(P.Fragment,{children:P.cloneElement(e,f)})}const nle=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function rle(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function ile(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function sle(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||ile(t))}function ole(t){const e=[],n=[];return Array.from(t.querySelectorAll(nle)).forEach((r,i)=>{const s=rle(r);s===-1||!sle(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function ale(){return!0}function lle(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=ole,isEnabled:o=ale,open:a}=t,l=P.useRef(!1),c=P.useRef(null),u=P.useRef(null),d=P.useRef(null),h=P.useRef(null),f=P.useRef(!1),p=P.useRef(null),m=$n(e.ref,p),b=P.useRef(null);P.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),P.useEffect(()=>{if(!a||!p.current)return;const _=Zn(p.current);return p.current.contains(_.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),P.useEffect(()=>{if(!a||!p.current)return;const _=Zn(p.current),w=A=>{b.current=A,!(r||!o()||A.key!=="Tab")&&_.activeElement===p.current&&A.shiftKey&&(l.current=!0,u.current&&u.current.focus())},E=()=>{const A=p.current;if(A===null)return;if(!_.hasFocus()||!o()||l.current){l.current=!1;return}if(A.contains(_.activeElement)||r&&_.activeElement!==c.current&&_.activeElement!==u.current)return;if(_.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let k=[];if((_.activeElement===c.current||_.activeElement===u.current)&&(k=s(p.current)),k.length>0){var M,I;const B=!!((M=b.current)!=null&&M.shiftKey&&((I=b.current)==null?void 0:I.key)==="Tab"),R=k[0],O=k[k.length-1];typeof R!="string"&&typeof O!="string"&&(B?O.focus():R.focus())}else A.focus()};_.addEventListener("focusin",E),_.addEventListener("keydown",w,!0);const S=setInterval(()=>{_.activeElement&&_.activeElement.tagName==="BODY"&&E()},50);return()=>{clearInterval(S),_.removeEventListener("focusin",E),_.removeEventListener("keydown",w,!0)}},[n,r,i,o,a,s]);const y=_=>{d.current===null&&(d.current=_.relatedTarget),f.current=!0,h.current=_.target;const w=e.props.onFocus;w&&w(_)},x=_=>{d.current===null&&(d.current=_.relatedTarget),f.current=!0};return J.jsxs(P.Fragment,{children:[J.jsx("div",{tabIndex:a?0:-1,onFocus:x,ref:c,"data-testid":"sentinelStart"}),P.cloneElement(e,{ref:m,onFocus:y}),J.jsx("div",{tabIndex:a?0:-1,onFocus:x,ref:u,"data-testid":"sentinelEnd"})]})}var Us="top",oa="bottom",aa="right",$s="left",fO="auto",eb=[Us,oa,aa,$s],fg="start",ey="end",cle="clippingParents",cW="viewport",Wm="popper",ule="reference",n5=eb.reduce(function(t,e){return t.concat([e+"-"+fg,e+"-"+ey])},[]),uW=[].concat(eb,[fO]).reduce(function(t,e){return t.concat([e,e+"-"+fg,e+"-"+ey])},[]),dle="beforeRead",hle="read",fle="afterRead",ple="beforeMain",gle="main",mle="afterMain",vle="beforeWrite",yle="write",ble="afterWrite",_le=[dle,hle,fle,ple,gle,mle,vle,yle,ble];function Dl(t){return t?(t.nodeName||"").toLowerCase():null}function xo(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function $h(t){var e=xo(t).Element;return t instanceof e||t instanceof Element}function ea(t){var e=xo(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function pO(t){if(typeof ShadowRoot>"u")return!1;var e=xo(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function xle(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!ea(s)||!Dl(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function wle(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!ea(i)||!Dl(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Ele={name:"applyStyles",enabled:!0,phase:"write",fn:xle,effect:wle,requires:["computeStyles"]};function Ll(t){return t.split("-")[0]}var vh=Math.max,zw=Math.min,pg=Math.round;function eI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function dW(){return!/^((?!chrome|android).)*safari/i.test(eI())}function gg(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&ea(t)&&(i=t.offsetWidth>0&&pg(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&pg(r.height)/t.offsetHeight||1);var o=$h(t)?xo(t):window,a=o.visualViewport,l=!dW()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function gO(t){var e=gg(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function hW(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&pO(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Rc(t){return xo(t).getComputedStyle(t)}function Tle(t){return["table","td","th"].indexOf(Dl(t))>=0}function yd(t){return(($h(t)?t.ownerDocument:t.document)||window.document).documentElement}function iS(t){return Dl(t)==="html"?t:t.assignedSlot||t.parentNode||(pO(t)?t.host:null)||yd(t)}function r5(t){return!ea(t)||Rc(t).position==="fixed"?null:t.offsetParent}function Sle(t){var e=/firefox/i.test(eI()),n=/Trident/i.test(eI());if(n&&ea(t)){var r=Rc(t);if(r.position==="fixed")return null}var i=iS(t);for(pO(i)&&(i=i.host);ea(i)&&["html","body"].indexOf(Dl(i))<0;){var s=Rc(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function tb(t){for(var e=xo(t),n=r5(t);n&&Tle(n)&&Rc(n).position==="static";)n=r5(n);return n&&(Dl(n)==="html"||Dl(n)==="body"&&Rc(n).position==="static")?e:n||Sle(t)||e}function mO(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function lv(t,e,n){return vh(t,zw(e,n))}function Cle(t,e,n){var r=lv(t,e,n);return r>n?n:r}function fW(){return{top:0,right:0,bottom:0,left:0}}function pW(t){return Object.assign({},fW(),t)}function gW(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Ale=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,pW(typeof e!="number"?e:gW(e,eb))};function Ple(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ll(n.placement),l=mO(a),c=[$s,aa].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=Ale(i.padding,n),h=gO(s),f=l==="y"?Us:$s,p=l==="y"?oa:aa,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],b=o[l]-n.rects.reference[l],y=tb(s),x=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,_=m/2-b/2,w=d[f],E=x-h[u]-d[p],S=x/2-h[u]/2+_,A=lv(w,S,E),k=l;n.modifiersData[r]=(e={},e[k]=A,e.centerOffset=A-S,e)}}function Rle(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||hW(e.elements.popper,i)&&(e.elements.arrow=i))}const Ile={name:"arrow",enabled:!0,phase:"main",fn:Ple,effect:Rle,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mg(t){return t.split("-")[1]}var Mle={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Lle(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:pg(n*i)/i||0,y:pg(r*i)/i||0}}function i5(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,m=p===void 0?0:p,b=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=b.x,m=b.y;var y=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),_=$s,w=Us,E=window;if(c){var S=tb(n),A="clientHeight",k="clientWidth";if(S===xo(n)&&(S=yd(n),Rc(S).position!=="static"&&a==="absolute"&&(A="scrollHeight",k="scrollWidth")),S=S,i===Us||(i===$s||i===aa)&&s===ey){w=oa;var M=d&&S===E&&E.visualViewport?E.visualViewport.height:S[A];m-=M-r.height,m*=l?1:-1}if(i===$s||(i===Us||i===oa)&&s===ey){_=aa;var I=d&&S===E&&E.visualViewport?E.visualViewport.width:S[k];f-=I-r.width,f*=l?1:-1}}var B=Object.assign({position:a},c&&Mle),R=u===!0?Lle({x:f,y:m},xo(n)):{x:f,y:m};if(f=R.x,m=R.y,l){var O;return Object.assign({},B,(O={},O[w]=x?"0":"",O[_]=y?"0":"",O.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",O))}return Object.assign({},B,(e={},e[w]=x?m+"px":"",e[_]=y?f+"px":"",e.transform="",e))}function kle(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ll(e.placement),variation:mg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,i5(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,i5(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ole={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kle,data:{}};var j1={passive:!0};function Nle(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=xo(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,j1)}),a&&l.addEventListener("resize",n.update,j1),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,j1)}),a&&l.removeEventListener("resize",n.update,j1)}}const Dle={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Nle,data:{}};var Ble={left:"right",right:"left",bottom:"top",top:"bottom"};function Rx(t){return t.replace(/left|right|bottom|top/g,function(e){return Ble[e]})}var Fle={start:"end",end:"start"};function s5(t){return t.replace(/start|end/g,function(e){return Fle[e]})}function vO(t){var e=xo(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function yO(t){return gg(yd(t)).left+vO(t).scrollLeft}function zle(t,e){var n=xo(t),r=yd(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=dW();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+yO(t),y:l}}function Ule(t){var e,n=yd(t),r=vO(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=vh(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=vh(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+yO(t),l=-r.scrollTop;return Rc(i||n).direction==="rtl"&&(a+=vh(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function bO(t){var e=Rc(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function mW(t){return["html","body","#document"].indexOf(Dl(t))>=0?t.ownerDocument.body:ea(t)&&bO(t)?t:mW(iS(t))}function cv(t,e){var n;e===void 0&&(e=[]);var r=mW(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=xo(r),o=i?[s].concat(s.visualViewport||[],bO(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(cv(iS(o)))}function tI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function $le(t,e){var n=gg(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function o5(t,e,n){return e===cW?tI(zle(t,n)):$h(e)?$le(e,n):tI(Ule(yd(t)))}function jle(t){var e=cv(iS(t)),n=["absolute","fixed"].indexOf(Rc(t).position)>=0,r=n&&ea(t)?tb(t):t;return $h(r)?e.filter(function(i){return $h(i)&&hW(i,r)&&Dl(i)!=="body"}):[]}function Gle(t,e,n,r){var i=e==="clippingParents"?jle(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=o5(t,c,r);return l.top=vh(u.top,l.top),l.right=zw(u.right,l.right),l.bottom=zw(u.bottom,l.bottom),l.left=vh(u.left,l.left),l},o5(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vW(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ll(r):null,s=r?mg(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Us:l={x:o,y:e.y-n.height};break;case oa:l={x:o,y:e.y+e.height};break;case aa:l={x:e.x+e.width,y:a};break;case $s:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?mO(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case fg:l[c]=l[c]-(e[u]/2-n[u]/2);break;case ey:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function ty(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?cle:a,c=n.rootBoundary,u=c===void 0?cW:c,d=n.elementContext,h=d===void 0?Wm:d,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,b=m===void 0?0:m,y=pW(typeof b!="number"?b:gW(b,eb)),x=h===Wm?ule:Wm,_=t.rects.popper,w=t.elements[p?x:h],E=Gle($h(w)?w:w.contextElement||yd(t.elements.popper),l,u,o),S=gg(t.elements.reference),A=vW({reference:S,element:_,strategy:"absolute",placement:i}),k=tI(Object.assign({},_,A)),M=h===Wm?k:S,I={top:E.top-M.top+y.top,bottom:M.bottom-E.bottom+y.bottom,left:E.left-M.left+y.left,right:M.right-E.right+y.right},B=t.modifiersData.offset;if(h===Wm&&B){var R=B[i];Object.keys(I).forEach(function(O){var C=[aa,oa].indexOf(O)>=0?1:-1,F=[Us,oa].indexOf(O)>=0?"y":"x";I[O]+=R[F]*C})}return I}function Hle(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?uW:l,u=mg(r),d=u?a?n5:n5.filter(function(p){return mg(p)===u}):eb,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=ty(t,{placement:m,boundary:i,rootBoundary:s,padding:o})[Ll(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function Vle(t){if(Ll(t)===fO)return[];var e=Rx(t);return[s5(t),e,s5(e)]}function Wle(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,b=e.options.placement,y=Ll(b),x=y===b,_=l||(x||!p?[Rx(b)]:Vle(b)),w=[b].concat(_).reduce(function(oe,fe){return oe.concat(Ll(fe)===fO?Hle(e,{placement:fe,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),E=e.rects.reference,S=e.rects.popper,A=new Map,k=!0,M=w[0],I=0;I<w.length;I++){var B=w[I],R=Ll(B),O=mg(B)===fg,C=[Us,oa].indexOf(R)>=0,F=C?"width":"height",q=ty(e,{placement:B,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),G=C?O?aa:$s:O?oa:Us;E[F]>S[F]&&(G=Rx(G));var j=Rx(G),H=[];if(s&&H.push(q[R]<=0),a&&H.push(q[G]<=0,q[j]<=0),H.every(function(oe){return oe})){M=B,k=!1;break}A.set(B,H)}if(k)for(var Z=p?3:1,X=function(fe){var be=w.find(function(Le){var se=A.get(Le);if(se)return se.slice(0,fe).every(function(ue){return ue})});if(be)return M=be,"break"},ee=Z;ee>0;ee--){var ve=X(ee);if(ve==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const Xle={name:"flip",enabled:!0,phase:"main",fn:Wle,requiresIfExists:["offset"],data:{_skip:!1}};function a5(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function l5(t){return[Us,aa,oa,$s].some(function(e){return t[e]>=0})}function Yle(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=ty(e,{elementContext:"reference"}),a=ty(e,{altBoundary:!0}),l=a5(o,r),c=a5(a,i,s),u=l5(l),d=l5(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const qle={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yle};function Kle(t,e,n){var r=Ll(t),i=[$s,Us].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[$s,aa].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Zle(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=uW.reduce(function(u,d){return u[d]=Kle(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Qle={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Zle};function Jle(t){var e=t.state,n=t.name;e.modifiersData[n]=vW({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const ece={name:"popperOffsets",enabled:!0,phase:"read",fn:Jle,data:{}};function tce(t){return t==="x"?"y":"x"}function nce(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,b=ty(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=Ll(e.placement),x=mg(e.placement),_=!x,w=mO(y),E=tce(w),S=e.modifiersData.popperOffsets,A=e.rects.reference,k=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(S){if(s){var O,C=w==="y"?Us:$s,F=w==="y"?oa:aa,q=w==="y"?"height":"width",G=S[w],j=G+b[C],H=G-b[F],Z=f?-k[q]/2:0,X=x===fg?A[q]:k[q],ee=x===fg?-k[q]:-A[q],ve=e.elements.arrow,oe=f&&ve?gO(ve):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:fW(),be=fe[C],Le=fe[F],se=lv(0,A[q],oe[q]),ue=_?A[q]/2-Z-se-be-I.mainAxis:X-se-be-I.mainAxis,Te=_?-A[q]/2+Z+se+Le+I.mainAxis:ee+se+Le+I.mainAxis,ge=e.elements.arrow&&tb(e.elements.arrow),Me=ge?w==="y"?ge.clientTop||0:ge.clientLeft||0:0,Se=(O=B==null?void 0:B[w])!=null?O:0,D=G+ue-Se-Me,ie=G+Te-Se,ae=lv(f?zw(j,D):j,G,f?vh(H,ie):H);S[w]=ae,R[w]=ae-G}if(a){var K,W=w==="x"?Us:$s,ne=w==="x"?oa:aa,pe=S[E],me=E==="y"?"height":"width",he=pe+b[W],Pe=pe-b[ne],Oe=[Us,$s].indexOf(y)!==-1,de=(K=B==null?void 0:B[E])!=null?K:0,Ce=Oe?he:pe-A[me]-k[me]-de+I.altAxis,Ye=Oe?pe+A[me]+k[me]-de-I.altAxis:Pe,Fe=f&&Oe?Cle(Ce,pe,Ye):lv(f?Ce:he,pe,f?Ye:Pe);S[E]=Fe,R[E]=Fe-pe}e.modifiersData[r]=R}}const rce={name:"preventOverflow",enabled:!0,phase:"main",fn:nce,requiresIfExists:["offset"]};function ice(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function sce(t){return t===xo(t)||!ea(t)?vO(t):ice(t)}function oce(t){var e=t.getBoundingClientRect(),n=pg(e.width)/t.offsetWidth||1,r=pg(e.height)/t.offsetHeight||1;return n!==1||r!==1}function ace(t,e,n){n===void 0&&(n=!1);var r=ea(e),i=ea(e)&&oce(e),s=yd(e),o=gg(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Dl(e)!=="body"||bO(s))&&(a=sce(e)),ea(e)?(l=gg(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=yO(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function lce(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function cce(t){var e=lce(t);return _le.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function uce(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function dce(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var c5={placement:"bottom",modifiers:[],strategy:"absolute"};function u5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function hce(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?c5:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},c5,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var x=typeof y=="function"?y(u.options):y;m(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:$h(a)?cv(a):a.contextElement?cv(a.contextElement):[],popper:cv(l)};var _=cce(dce([].concat(r,u.options.modifiers)));return u.orderedModifiers=_.filter(function(w){return w.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,x=y.reference,_=y.popper;if(u5(x,_)){u.rects={reference:ace(x,tb(_),u.options.strategy==="fixed"),popper:gO(_)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(I){return u.modifiersData[I.name]=Object.assign({},I.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var E=u.orderedModifiers[w],S=E.fn,A=E.options,k=A===void 0?{}:A,M=E.name;typeof S=="function"&&(u=S({state:u,options:k,name:M,instance:f})||u)}}}},update:uce(function(){return new Promise(function(b){f.forceUpdate(),b(u)})}),destroy:function(){m(),h=!0}};if(!u5(a,l))return f;f.setOptions(c).then(function(b){!h&&c.onFirstUpdate&&c.onFirstUpdate(b)});function p(){u.orderedModifiers.forEach(function(b){var y=b.name,x=b.options,_=x===void 0?{}:x,w=b.effect;if(typeof w=="function"){var E=w({state:u,name:y,instance:f,options:_}),S=function(){};d.push(E||S)}})}function m(){d.forEach(function(b){return b()}),d=[]}return f}}var fce=[Dle,ece,Ole,Ele,Qle,Xle,rce,Ile,qle],pce=hce({defaultModifiers:fce});function gce(t){return typeof t=="function"?t():t}const yW=P.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=P.useState(null),l=$n(P.isValidElement(r)?r.ref:null,n);if(_s(()=>{s||a(gce(i)||document.body)},[i,s]),_s(()=>{if(o&&!s)return Ow(n,o),()=>{Ow(n,null)}},[n,o,s]),s){if(P.isValidElement(r)){const c={ref:l};return P.cloneElement(r,c)}return J.jsx(P.Fragment,{children:r})}return J.jsx(P.Fragment,{children:o&&Fc.createPortal(r,o)})}),bW="Popper";function mce(t){return lW(bW,t)}Jae(bW,["root"]);const vce=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],yce=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function bce(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function nI(t){return typeof t=="function"?t():t}function _ce(t){return t.nodeType!==void 0}const xce=()=>ct({root:["root"]},vae(mce)),wce={},Ece=P.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:f={},slots:p={},TransitionProps:m}=e,b=He(e,vce),y=P.useRef(null),x=$n(y,n),_=P.useRef(null),w=$n(_,h),E=P.useRef(w);_s(()=>{E.current=w},[w]),P.useImperativeHandle(h,()=>_.current,[]);const S=bce(u,o),[A,k]=P.useState(S),[M,I]=P.useState(nI(i));P.useEffect(()=>{_.current&&_.current.forceUpdate()}),P.useEffect(()=>{i&&I(nI(i))},[i]),_s(()=>{if(!M||!c)return;const F=j=>{k(j.placement)};let q=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:j})=>{F(j)}}];l!=null&&(q=q.concat(l)),d&&d.modifiers!=null&&(q=q.concat(d.modifiers));const G=pce(M,y.current,z({placement:S},d,{modifiers:q}));return E.current(G),()=>{G.destroy(),E.current(null)}},[M,a,l,c,d,S]);const B={placement:A};m!==null&&(B.TransitionProps=m);const R=xce(),O=(r=p.root)!=null?r:"div",C=Ir({elementType:O,externalSlotProps:f.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:x},ownerState:e,className:R.root});return J.jsx(O,z({},C,{children:typeof s=="function"?s(B):s}))}),Tce=P.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=wce,popperRef:f,style:p,transition:m=!1,slotProps:b={},slots:y={}}=e,x=He(e,yce),[_,w]=P.useState(!0),E=()=>{w(!1)},S=()=>{w(!0)};if(!l&&!u&&(!m||_))return null;let A;if(s)A=s;else if(r){const I=nI(r);A=I&&_ce(I)?Zn(I).body:Zn(null).body}const k=!u&&l&&(!m||_)?"none":void 0,M=m?{in:u,onEnter:E,onExited:S}:void 0;return J.jsx(yW,{disablePortal:a,container:A,children:J.jsx(Ece,z({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:m?!_:u,placement:d,popperOptions:h,popperRef:f,slotProps:b,slots:y},x,{style:z({position:"fixed",top:0,left:0,display:k},p),TransitionProps:M,children:i}))})});function Sce(t){const e=Zn(t);return e.body===t?Nl(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function uv(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function d5(t){return parseInt(Nl(t).getComputedStyle(t).paddingRight,10)||0}function Cce(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function h5(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!Cce(o);a&&l&&uv(o,i)})}function DA(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function Ace(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Sce(r)){const o=jV(Zn(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${d5(r)+o}px`;const a=Zn(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${d5(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Zn(r).body;else{const o=r.parentElement,a=Nl(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function Pce(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Rce{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&uv(e.modalRef,!1);const i=Pce(n);h5(n,e.mount,e.modalRef,i,!0);const s=DA(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=DA(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=Ace(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=DA(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&uv(e.modalRef,n),h5(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&uv(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Ice(t){return typeof t=="function"?t():t}function Mce(t){return t?t.props.hasOwnProperty("in"):!1}const Lce=new Rce;function kce(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=Lce,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,h=P.useRef({}),f=P.useRef(null),p=P.useRef(null),m=$n(p,d),[b,y]=P.useState(!u),x=Mce(l);let _=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(_=!1);const w=()=>Zn(f.current),E=()=>(h.current.modalRef=p.current,h.current.mount=f.current,h.current),S=()=>{i.mount(E(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},A=Yr(()=>{const q=Ice(e)||w().body;i.add(E(),q),p.current&&S()}),k=P.useCallback(()=>i.isTopModal(E()),[i]),M=Yr(q=>{f.current=q,q&&(u&&k()?S():p.current&&uv(p.current,_))}),I=P.useCallback(()=>{i.remove(E(),_)},[_,i]);P.useEffect(()=>()=>{I()},[I]),P.useEffect(()=>{u?A():(!x||!s)&&I()},[u,I,x,s,A]);const B=q=>G=>{var j;(j=q.onKeyDown)==null||j.call(q,G),!(G.key!=="Escape"||G.which===229||!k())&&(n||(G.stopPropagation(),c&&c(G,"escapeKeyDown")))},R=q=>G=>{var j;(j=q.onClick)==null||j.call(q,G),G.target===G.currentTarget&&c&&c(G,"backdropClick")};return{getRootProps:(q={})=>{const G=av(t);delete G.onTransitionEnter,delete G.onTransitionExited;const j=z({},G,q);return z({role:"presentation"},j,{onKeyDown:B(j),ref:m})},getBackdropProps:(q={})=>{const G=q;return z({"aria-hidden":!0},G,{onClick:R(G),open:u})},getTransitionProps:()=>{const q=()=>{y(!1),o&&o()},G=()=>{y(!0),a&&a(),s&&I()};return{onEnter:YR(q,l==null?void 0:l.props.onEnter),onExited:YR(G,l==null?void 0:l.props.onExited)}},rootRef:m,portalRef:M,isTopModal:k,exited:b,hasTransition:x}}const Oce=2;function _W(t,e){return t-e}function f5(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function G1(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Uw(t,e,n){return(t-e)*100/(n-e)}function Nce(t,e,n){return(n-e)*t+e}function Dce(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Bce(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Dce(e)))}function p5({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(_W)}function H1({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=Zn(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function V1(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?pae(t,e):!1}const Fce={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},zce=t=>t;let W1;function g5(){return W1===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?W1=CSS.supports("touch-action","none"):W1=!0),W1}function Uce(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:h="horizontal",rootRef:f,scale:p=zce,step:m=1,tabIndex:b,value:y}=t,x=P.useRef(),[_,w]=P.useState(-1),[E,S]=P.useState(-1),[A,k]=P.useState(!1),M=P.useRef(0),[I,B]=Fh({controlled:y,default:n??l,name:"Slider"}),R=u&&((de,Ce,Ye)=>{const Fe=de.nativeEvent||de,Ve=new Fe.constructor(Fe.type,Fe);Object.defineProperty(Ve,"target",{writable:!0,value:{value:Ce,name:c}}),u(Ve,Ce,Ye)}),O=Array.isArray(I);let C=O?I.slice().sort(_W):[I];C=C.map(de=>de==null?l:nh(de,l,a));const F=o===!0&&m!==null?[...Array(Math.floor((a-l)/m)+1)].map((de,Ce)=>({value:l+m*Ce})):o||[],q=F.map(de=>de.value),{isFocusVisibleRef:G,onBlur:j,onFocus:H,ref:Z}=jT(),[X,ee]=P.useState(-1),ve=P.useRef(),oe=$n(Z,ve),fe=$n(f,oe),be=de=>Ce=>{var Ye;const Fe=Number(Ce.currentTarget.getAttribute("data-index"));H(Ce),G.current===!0&&ee(Fe),S(Fe),de==null||(Ye=de.onFocus)==null||Ye.call(de,Ce)},Le=de=>Ce=>{var Ye;j(Ce),G.current===!1&&ee(-1),S(-1),de==null||(Ye=de.onBlur)==null||Ye.call(de,Ce)};_s(()=>{if(r&&ve.current.contains(document.activeElement)){var de;(de=document.activeElement)==null||de.blur()}},[r]),r&&_!==-1&&w(-1),r&&X!==-1&&ee(-1);const se=de=>Ce=>{var Ye;(Ye=de.onChange)==null||Ye.call(de,Ce);const Fe=Number(Ce.currentTarget.getAttribute("data-index")),Ve=C[Fe],Bt=q.indexOf(Ve);let yt=Ce.target.valueAsNumber;if(F&&m==null){const Ot=q[q.length-1];yt>Ot?yt=Ot:yt<q[0]?yt=q[0]:yt=yt<Ve?q[Bt-1]:q[Bt+1]}if(yt=nh(yt,l,a),O){i&&(yt=nh(yt,C[Fe-1]||-1/0,C[Fe+1]||1/0));const Ot=yt;yt=p5({values:C,newValue:yt,index:Fe});let Ge=Fe;i||(Ge=yt.indexOf(Ot)),H1({sliderRef:ve,activeIndex:Ge})}B(yt),ee(Fe),R&&!V1(yt,I)&&R(Ce,yt,Fe),d&&d(Ce,yt)},ue=P.useRef();let Te=h;s&&h==="horizontal"&&(Te+="-reverse");const ge=({finger:de,move:Ce=!1})=>{const{current:Ye}=ve,{width:Fe,height:Ve,bottom:Bt,left:yt}=Ye.getBoundingClientRect();let Ot;Te.indexOf("vertical")===0?Ot=(Bt-de.y)/Ve:Ot=(de.x-yt)/Fe,Te.indexOf("-reverse")!==-1&&(Ot=1-Ot);let Ge;if(Ge=Nce(Ot,l,a),m)Ge=Bce(Ge,m,l);else{const Xe=f5(q,Ge);Ge=q[Xe]}Ge=nh(Ge,l,a);let Pt=0;if(O){Ce?Pt=ue.current:Pt=f5(C,Ge),i&&(Ge=nh(Ge,C[Pt-1]||-1/0,C[Pt+1]||1/0));const Xe=Ge;Ge=p5({values:C,newValue:Ge,index:Pt}),i&&Ce||(Pt=Ge.indexOf(Xe),ue.current=Pt)}return{newValue:Ge,activeIndex:Pt}},Me=Yr(de=>{const Ce=G1(de,x);if(!Ce)return;if(M.current+=1,de.type==="mousemove"&&de.buttons===0){Se(de);return}const{newValue:Ye,activeIndex:Fe}=ge({finger:Ce,move:!0});H1({sliderRef:ve,activeIndex:Fe,setActive:w}),B(Ye),!A&&M.current>Oce&&k(!0),R&&!V1(Ye,I)&&R(de,Ye,Fe)}),Se=Yr(de=>{const Ce=G1(de,x);if(k(!1),!Ce)return;const{newValue:Ye}=ge({finger:Ce,move:!0});w(-1),de.type==="touchend"&&S(-1),d&&d(de,Ye),x.current=void 0,ie()}),D=Yr(de=>{if(r)return;g5()||de.preventDefault();const Ce=de.changedTouches[0];Ce!=null&&(x.current=Ce.identifier);const Ye=G1(de,x);if(Ye!==!1){const{newValue:Ve,activeIndex:Bt}=ge({finger:Ye});H1({sliderRef:ve,activeIndex:Bt,setActive:w}),B(Ve),R&&!V1(Ve,I)&&R(de,Ve,Bt)}M.current=0;const Fe=Zn(ve.current);Fe.addEventListener("touchmove",Me,{passive:!0}),Fe.addEventListener("touchend",Se,{passive:!0})}),ie=P.useCallback(()=>{const de=Zn(ve.current);de.removeEventListener("mousemove",Me),de.removeEventListener("mouseup",Se),de.removeEventListener("touchmove",Me),de.removeEventListener("touchend",Se)},[Se,Me]);P.useEffect(()=>{const{current:de}=ve;return de.addEventListener("touchstart",D,{passive:g5()}),()=>{de.removeEventListener("touchstart",D),ie()}},[ie,D]),P.useEffect(()=>{r&&ie()},[r,ie]);const ae=de=>Ce=>{var Ye;if((Ye=de.onMouseDown)==null||Ye.call(de,Ce),r||Ce.defaultPrevented||Ce.button!==0)return;Ce.preventDefault();const Fe=G1(Ce,x);if(Fe!==!1){const{newValue:Bt,activeIndex:yt}=ge({finger:Fe});H1({sliderRef:ve,activeIndex:yt,setActive:w}),B(Bt),R&&!V1(Bt,I)&&R(Ce,Bt,yt)}M.current=0;const Ve=Zn(ve.current);Ve.addEventListener("mousemove",Me,{passive:!0}),Ve.addEventListener("mouseup",Se)},K=Uw(O?C[0]:l,l,a),W=Uw(C[C.length-1],l,a)-K,ne=(de={})=>{const Ce=av(de),Ye={onMouseDown:ae(Ce||{})},Fe=z({},Ce,Ye);return z({},de,{ref:fe},Fe)},pe=de=>Ce=>{var Ye;(Ye=de.onMouseOver)==null||Ye.call(de,Ce);const Fe=Number(Ce.currentTarget.getAttribute("data-index"));S(Fe)},me=de=>Ce=>{var Ye;(Ye=de.onMouseLeave)==null||Ye.call(de,Ce),S(-1)};return{active:_,axis:Te,axisProps:Fce,dragging:A,focusedThumbIndex:X,getHiddenInputProps:(de={})=>{var Ce;const Ye=av(de),Fe={onChange:se(Ye||{}),onFocus:be(Ye||{}),onBlur:Le(Ye||{})},Ve=z({},Ye,Fe);return z({tabIndex:b,"aria-labelledby":e,"aria-orientation":h,"aria-valuemax":p(a),"aria-valuemin":p(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(Ce=t.step)!=null?Ce:void 0,disabled:r},de,Ve,{style:z({},Vie,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:ne,getThumbProps:(de={})=>{const Ce=av(de),Ye={onMouseOver:pe(Ce||{}),onMouseLeave:me(Ce||{})};return z({},de,Ce,Ye)},marks:F,open:E,range:O,rootRef:fe,trackLeap:W,trackOffset:K,values:C,getThumbStyle:de=>({pointerEvents:_!==-1&&_!==de?"none":void 0})}}const $ce=["onChange","maxRows","minRows","style","value"];function X1(t){return parseInt(t,10)||0}const jce={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function m5(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const Gce=P.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=He(e,$ce),{current:c}=P.useRef(a!=null),u=P.useRef(null),d=$n(n,u),h=P.useRef(null),f=P.useRef(0),[p,m]=P.useState({outerHeightStyle:0}),b=P.useCallback(()=>{const w=u.current,S=Nl(w).getComputedStyle(w);if(S.width==="0px")return{outerHeightStyle:0};const A=h.current;A.style.width=S.width,A.value=w.value||e.placeholder||"x",A.value.slice(-1)===`
`&&(A.value+=" ");const k=S.boxSizing,M=X1(S.paddingBottom)+X1(S.paddingTop),I=X1(S.borderBottomWidth)+X1(S.borderTopWidth),B=A.scrollHeight;A.value="x";const R=A.scrollHeight;let O=B;s&&(O=Math.max(Number(s)*R,O)),i&&(O=Math.min(Number(i)*R,O)),O=Math.max(O,R);const C=O+(k==="border-box"?M+I:0),F=Math.abs(O-B)<=1;return{outerHeightStyle:C,overflow:F}},[i,s,e.placeholder]),y=(w,E)=>{const{outerHeightStyle:S,overflow:A}=E;return f.current<20&&(S>0&&Math.abs((w.outerHeightStyle||0)-S)>1||w.overflow!==A)?(f.current+=1,{overflow:A,outerHeightStyle:S}):w},x=P.useCallback(()=>{const w=b();m5(w)||m(E=>y(E,w))},[b]);_s(()=>{const w=()=>{const B=b();m5(B)||Fc.flushSync(()=>{m(R=>y(R,B))})},E=()=>{f.current=0,w()};let S;const A=Ky(E),k=u.current,M=Nl(k);M.addEventListener("resize",A);let I;return typeof ResizeObserver<"u"&&(I=new ResizeObserver(E),I.observe(k)),()=>{A.clear(),cancelAnimationFrame(S),M.removeEventListener("resize",A),I&&I.disconnect()}},[b]),_s(()=>{x()}),P.useEffect(()=>{f.current=0},[a]);const _=w=>{f.current=0,c||x(),r&&r(w)};return J.jsxs(P.Fragment,{children:[J.jsx("textarea",z({value:a,onChange:_,ref:d,rows:s,style:z({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),J.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:z({},jce.shadow,o,{paddingTop:0,paddingBottom:0})})]})}),Hce=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Vce=Ae(Tce,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Wce=P.forwardRef(function(e,n){var r;const i=oO(),s=ht({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:m,popperOptions:b,popperRef:y,transition:x,slots:_,slotProps:w}=s,E=He(s,Hce),S=(r=_==null?void 0:_.root)!=null?r:l==null?void 0:l.Root,A=z({anchorEl:o,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:m,popperOptions:b,popperRef:y,transition:x},E);return J.jsx(Vce,z({as:a,direction:i==null?void 0:i.direction,slots:{root:S},slotProps:w??c},A,{ref:n}))}),_O=Wce,Xce=vt(J.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Yce(t){return ut("MuiChip",t)}const qce=st("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_n=qce,Kce=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Zce=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${Ee(r)}`,`color${Ee(i)}`,a&&"clickable",a&&`clickableColor${Ee(i)}`,o&&"deletable",o&&`deletableColor${Ee(i)}`,`${l}${Ee(i)}`],label:["label",`label${Ee(r)}`],avatar:["avatar",`avatar${Ee(r)}`,`avatarColor${Ee(i)}`],icon:["icon",`icon${Ee(r)}`,`iconColor${Ee(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Ee(r)}`,`deleteIconColor${Ee(i)}`,`deleteIcon${Ee(l)}Color${Ee(i)}`]};return ct(c,Yce,e)},Qce=Ae("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=n;return[{[`& .${_n.avatar}`]:e.avatar},{[`& .${_n.avatar}`]:e[`avatar${Ee(a)}`]},{[`& .${_n.avatar}`]:e[`avatarColor${Ee(r)}`]},{[`& .${_n.icon}`]:e.icon},{[`& .${_n.icon}`]:e[`icon${Ee(a)}`]},{[`& .${_n.icon}`]:e[`iconColor${Ee(i)}`]},{[`& .${_n.deleteIcon}`]:e.deleteIcon},{[`& .${_n.deleteIcon}`]:e[`deleteIcon${Ee(a)}`]},{[`& .${_n.deleteIcon}`]:e[`deleteIconColor${Ee(r)}`]},{[`& .${_n.deleteIcon}`]:e[`deleteIcon${Ee(l)}Color${Ee(r)}`]},e.root,e[`size${Ee(a)}`],e[`color${Ee(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${Ee(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${Ee(r)}`],e[l],e[`${l}${Ee(r)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return z({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${_n.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${_n.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${_n.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${_n.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${_n.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${_n.icon}`]:z({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&z({color:t.vars?t.vars.palette.Chip.defaultIconColor:n},e.color!=="default"&&{color:"inherit"})),[`& .${_n.deleteIcon}`]:z({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:nn(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:nn(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:nn(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${_n.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:nn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${_n.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>z({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:nn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${_n.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:nn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${_n.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>z({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${_n.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${_n.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${_n.avatar}`]:{marginLeft:4},[`& .${_n.avatarSmall}`]:{marginLeft:2},[`& .${_n.icon}`]:{marginLeft:4},[`& .${_n.iconSmall}`]:{marginLeft:2},[`& .${_n.deleteIcon}`]:{marginRight:5},[`& .${_n.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:nn(t.palette[e.color].main,.7)}`,[`&.${_n.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${_n.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:nn(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${_n.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:nn(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),Jce=Ae("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Ee(r)}`]]}})(({ownerState:t})=>z({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function v5(t){return t.key==="Backspace"||t.key==="Delete"}const eue=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:f,onDelete:p,onKeyDown:m,onKeyUp:b,size:y="medium",variant:x="filled",tabIndex:_,skipFocusWhenDisabled:w=!1}=r,E=He(r,Kce),S=P.useRef(null),A=$n(S,n),k=H=>{H.stopPropagation(),p&&p(H)},M=H=>{H.currentTarget===H.target&&v5(H)&&H.preventDefault(),m&&m(H)},I=H=>{H.currentTarget===H.target&&(p&&v5(H)?p(H):H.key==="Escape"&&S.current&&S.current.blur()),b&&b(H)},B=o!==!1&&f?!0:o,R=B||p?sa:l||"div",O=z({},r,{component:R,disabled:u,size:y,color:a,iconColor:P.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:B,variant:x}),C=Zce(O),F=R===sa?z({component:l||"div",focusVisibleClassName:C.focusVisible},p&&{disableRipple:!0}):{};let q=null;p&&(q=c&&P.isValidElement(c)?P.cloneElement(c,{className:ze(c.props.className,C.deleteIcon),onClick:k}):J.jsx(Xce,{className:ze(C.deleteIcon),onClick:k}));let G=null;i&&P.isValidElement(i)&&(G=P.cloneElement(i,{className:ze(C.avatar,i.props.className)}));let j=null;return d&&P.isValidElement(d)&&(j=P.cloneElement(d,{className:ze(C.icon,d.props.className)})),J.jsxs(Qce,z({as:R,className:ze(C.root,s),disabled:B&&u?!0:void 0,onClick:f,onKeyDown:M,onKeyUp:I,ref:A,tabIndex:w&&u?-1:_,ownerState:O},F,E,{children:[G||j,J.jsx(Jce,{className:ze(C.label),ownerState:O,children:h}),q]}))}),Y1=eue;function rf({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const tue=P.createContext(void 0),xO=tue;function bd(){return P.useContext(xO)}function nue(t){return J.jsx(Vse,z({},t,{defaultTheme:tS,themeId:qy}))}function y5(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function $w(t,e=!1){return t&&(y5(t.value)&&t.value!==""||e&&y5(t.defaultValue)&&t.defaultValue!=="")}function rue(t){return t.startAdornment}function iue(t){return ut("MuiInputBase",t)}const sue=st("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),vg=sue,oue=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],sS=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Ee(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},oS=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},aue=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t,m={root:["root",`color${Ee(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",h&&h!=="medium"&&`size${Ee(h)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return ct(m,iue,e)},aS=Ae("div",{name:"MuiInputBase",slot:"Root",overridesResolver:sS})(({theme:t,ownerState:e})=>z({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${vg.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&z({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),lS=Ae("input",{name:"MuiInputBase",slot:"Input",overridesResolver:oS})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=z({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return z({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${vg.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${vg.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),lue=J.jsx(nue,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),cue=P.forwardRef(function(e,n){var r;const i=ht({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:m=!1,id:b,inputComponent:y="input",inputProps:x={},inputRef:_,maxRows:w,minRows:E,multiline:S=!1,name:A,onBlur:k,onChange:M,onClick:I,onFocus:B,onKeyDown:R,onKeyUp:O,placeholder:C,readOnly:F,renderSuffix:q,rows:G,slotProps:j={},slots:H={},startAdornment:Z,type:X="text",value:ee}=i,ve=He(i,oue),oe=x.value!=null?x.value:ee,{current:fe}=P.useRef(oe!=null),be=P.useRef(),Le=P.useCallback(Fe=>{},[]),se=$n(be,_,x.ref,Le),[ue,Te]=P.useState(!1),ge=bd(),Me=rf({props:i,muiFormControl:ge,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Me.focused=ge?ge.focused:ue,P.useEffect(()=>{!ge&&h&&ue&&(Te(!1),k&&k())},[ge,h,ue,k]);const Se=ge&&ge.onFilled,D=ge&&ge.onEmpty,ie=P.useCallback(Fe=>{$w(Fe)?Se&&Se():D&&D()},[Se,D]);_s(()=>{fe&&ie({value:oe})},[oe,ie,fe]);const ae=Fe=>{if(Me.disabled){Fe.stopPropagation();return}B&&B(Fe),x.onFocus&&x.onFocus(Fe),ge&&ge.onFocus?ge.onFocus(Fe):Te(!0)},K=Fe=>{k&&k(Fe),x.onBlur&&x.onBlur(Fe),ge&&ge.onBlur?ge.onBlur(Fe):Te(!1)},W=(Fe,...Ve)=>{if(!fe){const Bt=Fe.target||be.current;if(Bt==null)throw new Error(rd(1));ie({value:Bt.value})}x.onChange&&x.onChange(Fe,...Ve),M&&M(Fe,...Ve)};P.useEffect(()=>{ie(be.current)},[]);const ne=Fe=>{be.current&&Fe.currentTarget===Fe.target&&be.current.focus(),I&&I(Fe)};let pe=y,me=x;S&&pe==="input"&&(G?me=z({type:void 0,minRows:G,maxRows:G},me):me=z({type:void 0,maxRows:w,minRows:E},me),pe=Gce);const he=Fe=>{ie(Fe.animationName==="mui-auto-fill-cancel"?be.current:{value:"x"})};P.useEffect(()=>{ge&&ge.setAdornedStart(!!Z)},[ge,Z]);const Pe=z({},i,{color:Me.color||"primary",disabled:Me.disabled,endAdornment:p,error:Me.error,focused:Me.focused,formControl:ge,fullWidth:m,hiddenLabel:Me.hiddenLabel,multiline:S,size:Me.size,startAdornment:Z,type:X}),Oe=aue(Pe),de=H.root||c.Root||aS,Ce=j.root||u.root||{},Ye=H.input||c.Input||lS;return me=z({},me,(r=j.input)!=null?r:u.input),J.jsxs(P.Fragment,{children:[!f&&lue,J.jsxs(de,z({},Ce,!Yu(de)&&{ownerState:z({},Pe,Ce.ownerState)},{ref:n,onClick:ne},ve,{className:ze(Oe.root,Ce.className,l,F&&"MuiInputBase-readOnly"),children:[Z,J.jsx(xO.Provider,{value:null,children:J.jsx(Ye,z({ownerState:Pe,"aria-invalid":Me.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:Me.disabled,id:b,onAnimationStart:he,name:A,placeholder:C,readOnly:F,required:Me.required,rows:G,value:oe,onKeyDown:R,onKeyUp:O,type:X},me,!Yu(Ye)&&{as:pe,ownerState:z({},Pe,me.ownerState)},{ref:se,className:ze(Oe.input,me.className,F&&"MuiInputBase-readOnly"),onBlur:K,onChange:W,onFocus:ae}))}),p,q?q(z({},Me,{startAdornment:Z})):null]}))]})}),wO=cue;function uue(t){return ut("MuiInput",t)}const due=z({},vg,st("MuiInput",["root","underline","input"])),Xm=due;function hue(t){return ut("MuiOutlinedInput",t)}const fue=z({},vg,st("MuiOutlinedInput",["root","notchedOutline","input"])),ru=fue;function pue(t){return ut("MuiFilledInput",t)}const gue=z({},vg,st("MuiFilledInput",["root","underline","input"])),Od=gue,mue=vt(J.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),vue=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],yue={entering:{opacity:1},entered:{opacity:1}},bue=P.forwardRef(function(e,n){const r=Ss(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:m,style:b,timeout:y=i,TransitionComponent:x=nS}=e,_=He(e,vue),w=P.useRef(null),E=$n(w,a.ref,n),S=C=>F=>{if(C){const q=w.current;F===void 0?C(q):C(q,F)}},A=S(h),k=S((C,F)=>{hO(C);const q=id({style:b,timeout:y,easing:l},{mode:"enter"});C.style.webkitTransition=r.transitions.create("opacity",q),C.style.transition=r.transitions.create("opacity",q),u&&u(C,F)}),M=S(d),I=S(m),B=S(C=>{const F=id({style:b,timeout:y,easing:l},{mode:"exit"});C.style.webkitTransition=r.transitions.create("opacity",F),C.style.transition=r.transitions.create("opacity",F),f&&f(C)}),R=S(p),O=C=>{s&&s(w.current,C)};return J.jsx(x,z({appear:o,in:c,nodeRef:w,onEnter:k,onEntered:M,onEntering:A,onExit:B,onExited:R,onExiting:I,addEndListener:O,timeout:y},_,{children:(C,F)=>P.cloneElement(a,z({style:z({opacity:0,visibility:C==="exited"&&!c?"hidden":void 0},yue[C],b,a.props.style),ref:E},F))}))}),xW=bue;function _ue(t){return ut("MuiBackdrop",t)}st("MuiBackdrop",["root","invisible"]);const xue=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],wue=t=>{const{classes:e,invisible:n}=t;return ct({root:["root",n&&"invisible"]},_ue,e)},Eue=Ae("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>z({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),Tue=P.forwardRef(function(e,n){var r,i,s;const o=ht({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:h=!1,open:f,slotProps:p={},slots:m={},TransitionComponent:b=xW,transitionDuration:y}=o,x=He(o,xue),_=z({},o,{component:c,invisible:h}),w=wue(_),E=(r=p.root)!=null?r:d.root;return J.jsx(b,z({in:f,timeout:y},x,{children:J.jsx(Eue,z({"aria-hidden":!0},E,{as:(i=(s=m.root)!=null?s:u.Root)!=null?i:c,className:ze(w.root,l,E==null?void 0:E.className),ownerState:z({},_,E==null?void 0:E.ownerState),classes:w,ref:n,children:a}))}))}),EO=Tue;function Sue(t){return ut("MuiBadge",t)}const Cue=st("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),iu=Cue,Aue=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],BA=10,FA=4,Pue=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:s,classes:o={}}=t,a={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${Ee(n.vertical)}${Ee(n.horizontal)}`,`anchorOrigin${Ee(n.vertical)}${Ee(n.horizontal)}${Ee(i)}`,`overlap${Ee(i)}`,e!=="default"&&`color${Ee(e)}`]};return ct(a,Sue,o)},Rue=Ae("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Iue=Ae("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Ee(n.anchorOrigin.vertical)}${Ee(n.anchorOrigin.horizontal)}${Ee(n.overlap)}`],n.color!=="default"&&e[`color${Ee(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:BA*2,lineHeight:1,padding:"0 6px",height:BA*2,borderRadius:BA,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:FA,height:FA*2,minWidth:FA*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${iu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),Mue=P.forwardRef(function(e,n){var r,i,s,o,a,l;const c=ht({props:e,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:h,components:f={},componentsProps:p={},children:m,overlap:b="rectangular",color:y="default",invisible:x=!1,max:_=99,badgeContent:w,slots:E,slotProps:S,showZero:A=!1,variant:k="standard"}=c,M=He(c,Aue),{badgeContent:I,invisible:B,max:R,displayValue:O}=Kae({max:_,invisible:x,badgeContent:w,showZero:A}),C=HV({anchorOrigin:u,color:y,overlap:b,variant:k,badgeContent:w}),F=B||I==null&&k!=="dot",{color:q=y,overlap:G=b,anchorOrigin:j=u,variant:H=k}=F?C:c,Z=H!=="dot"?O:void 0,X=z({},c,{badgeContent:I,invisible:F,max:R,displayValue:Z,showZero:A,anchorOrigin:j,color:q,overlap:G,variant:H}),ee=Pue(X),ve=(r=(i=E==null?void 0:E.root)!=null?i:f.Root)!=null?r:Rue,oe=(s=(o=E==null?void 0:E.badge)!=null?o:f.Badge)!=null?s:Iue,fe=(a=S==null?void 0:S.root)!=null?a:p.root,be=(l=S==null?void 0:S.badge)!=null?l:p.badge,Le=Ir({elementType:ve,externalSlotProps:fe,externalForwardedProps:M,additionalProps:{ref:n,as:h},ownerState:X,className:ze(fe==null?void 0:fe.className,ee.root,d)}),se=Ir({elementType:oe,externalSlotProps:be,ownerState:X,className:ze(ee.badge,be==null?void 0:be.className)});return J.jsxs(ve,z({},Le,{children:[m,J.jsx(oe,z({},se,{children:Z}))]}))}),Lue=Mue,kue=st("MuiBox",["root"]),Oue=kue,Nue=rW(),Due=qse({themeId:qy,defaultTheme:Nue,defaultClassName:Oue.root,generateClassName:eO.generate}),Vt=Due;function Bue(t){return ut("MuiButton",t)}const Fue=st("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),q1=Fue,zue=P.createContext({}),wW=zue,Uue=P.createContext(void 0),EW=Uue,$ue=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],jue=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${Ee(e)}`,`size${Ee(i)}`,`${s}Size${Ee(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Ee(i)}`],endIcon:["endIcon",`iconSize${Ee(i)}`]},l=ct(a,Bue,o);return z({},o,l)},TW=t=>z({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Gue=Ae(sa,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Ee(n.color)}`],e[`size${Ee(n.size)}`],e[`${n.variant}Size${Ee(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return z({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":z({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":z({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${q1.focusVisible}`]:z({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${q1.disabled}`]:z({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${nn(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${q1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${q1.disabled}`]:{boxShadow:"none"}}),Hue=Ae("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Ee(n.size)}`]]}})(({ownerState:t})=>z({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},TW(t))),Vue=Ae("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Ee(n.size)}`]]}})(({ownerState:t})=>z({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},TW(t))),Wue=P.forwardRef(function(e,n){const r=P.useContext(wW),i=P.useContext(EW),s=GT(r,e),o=ht({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:m,fullWidth:b=!1,size:y="medium",startIcon:x,type:_,variant:w="text"}=o,E=He(o,$ue),S=z({},o,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:b,size:y,type:_,variant:w}),A=jue(S),k=x&&J.jsx(Hue,{className:A.startIcon,ownerState:S,children:x}),M=p&&J.jsx(Vue,{className:A.endIcon,ownerState:S,children:p}),I=i||"";return J.jsxs(Gue,z({ownerState:S,className:ze(r.className,A.root,u,I),component:c,disabled:d,focusRipple:!f,focusVisibleClassName:ze(A.focusVisible,m),ref:n,type:_},E,{classes:A,children:[k,a,M]}))}),Ds=Wue;function Xue(t){return ut("MuiButtonGroup",t)}const Oi=st("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Yue=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],que=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Oi.grouped}`]:e.grouped},{[`& .${Oi.grouped}`]:e[`grouped${Ee(n.orientation)}`]},{[`& .${Oi.grouped}`]:e[`grouped${Ee(n.variant)}`]},{[`& .${Oi.grouped}`]:e[`grouped${Ee(n.variant)}${Ee(n.orientation)}`]},{[`& .${Oi.grouped}`]:e[`grouped${Ee(n.variant)}${Ee(n.color)}`]},{[`& .${Oi.firstButton}`]:e.firstButton},{[`& .${Oi.lastButton}`]:e.lastButton},{[`& .${Oi.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},Kue=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:o,variant:a}=t,l={root:["root",a,o==="vertical"&&"vertical",s&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${Ee(o)}`,`grouped${Ee(a)}`,`grouped${Ee(a)}${Ee(o)}`,`grouped${Ee(a)}${Ee(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ct(l,Xue,e)},Zue=Ae("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:que})(({theme:t,ownerState:e})=>z({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Oi.grouped}`]:z({minWidth:40,"&:hover":z({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Oi.firstButton},& .${Oi.middleButton}`]:z({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Oi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Oi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:nn(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Oi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Oi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":z({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Oi.lastButton},& .${Oi.middleButton}`]:z({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),Que=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:h=!1,orientation:f="horizontal",size:p="medium",variant:m="outlined"}=r,b=He(r,Yue),y=z({},r,{color:o,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:h,orientation:f,size:p,variant:m}),x=Kue(y),_=P.useMemo(()=>({className:x.grouped,color:o,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:h,size:p,variant:m}),[o,l,c,u,d,h,p,m,x.grouped]),w=VV(i),E=w.length,S=A=>{const k=A===0,M=A===E-1;return k&&M?"":k?x.firstButton:M?x.lastButton:x.middleButton};return J.jsx(Zue,z({as:a,role:"group",className:ze(x.root,s),ref:n,ownerState:y},b,{children:J.jsx(wW.Provider,{value:_,children:w.map((A,k)=>J.jsx(EW.Provider,{value:S(k),children:A},k))})}))}),Jue=Que;function ede(t){return ut("MuiCard",t)}st("MuiCard",["root"]);const tde=["className","raised"],nde=t=>{const{classes:e}=t;return ct({root:["root"]},ede,e)},rde=Ae(nf,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),ide=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=He(r,tde),a=z({},r,{raised:s}),l=nde(a);return J.jsx(rde,z({className:ze(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),SW=ide;function sde(t){return ut("MuiCardActionArea",t)}const ode=st("MuiCardActionArea",["root","focusVisible","focusHighlight"]),zA=ode,ade=["children","className","focusVisibleClassName"],lde=t=>{const{classes:e}=t;return ct({root:["root"],focusHighlight:["focusHighlight"]},sde,e)},cde=Ae(sa,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${zA.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${zA.focusVisible} .${zA.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),ude=Ae("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),dde=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:o}=r,a=He(r,ade),l=r,c=lde(l);return J.jsxs(cde,z({className:ze(c.root,s),focusVisibleClassName:ze(o,c.focusVisible),ref:n,ownerState:l},a,{children:[i,J.jsx(ude,{className:c.focusHighlight,ownerState:l})]}))}),hde=dde;function fde(t){return ut("MuiCardActions",t)}st("MuiCardActions",["root","spacing"]);const pde=["disableSpacing","className"],gde=t=>{const{classes:e,disableSpacing:n}=t;return ct({root:["root",!n&&"spacing"]},fde,e)},mde=Ae("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),vde=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=He(r,pde),a=z({},r,{disableSpacing:i}),l=gde(a);return J.jsx(mde,z({className:ze(l.root,s),ownerState:a,ref:n},o))}),yde=vde;function bde(t){return ut("MuiCardContent",t)}st("MuiCardContent",["root"]);const _de=["className","component"],xde=t=>{const{classes:e}=t;return ct({root:["root"]},bde,e)},wde=Ae("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Ede=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=He(r,_de),a=z({},r,{component:s}),l=xde(a);return J.jsx(wde,z({as:s,className:ze(l.root,i),ownerState:a,ref:n},o))}),TO=Ede;function Tde(t){return ut("MuiCardHeader",t)}const Sde=st("MuiCardHeader",["root","avatar","action","content","title","subheader"]),b5=Sde,Cde=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Ade=t=>{const{classes:e}=t;return ct({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Tde,e)},Pde=Ae("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>z({[`& .${b5.title}`]:e.title,[`& .${b5.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),Rde=Ae("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Ide=Ae("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Mde=Ae("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),Lde=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCardHeader"}),{action:i,avatar:s,className:o,component:a="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:d,titleTypographyProps:h}=r,f=He(r,Cde),p=z({},r,{component:a,disableTypography:l}),m=Ade(p);let b=d;b!=null&&b.type!==En&&!l&&(b=J.jsx(En,z({variant:s?"body2":"h5",className:m.title,component:"span",display:"block"},h,{children:b})));let y=c;return y!=null&&y.type!==En&&!l&&(y=J.jsx(En,z({variant:s?"body2":"body1",className:m.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:y}))),J.jsxs(Pde,z({className:ze(m.root,o),as:a,ref:n,ownerState:p},f,{children:[s&&J.jsx(Rde,{className:m.avatar,ownerState:p,children:s}),J.jsxs(Mde,{className:m.content,ownerState:p,children:[b,y]}),i&&J.jsx(Ide,{className:m.action,ownerState:p,children:i})]}))}),kde=Lde;function Ode(t){return ut("PrivateSwitchBase",t)}st("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Nde=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Dde=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${Ee(i)}`],input:["input"]};return ct(s,Ode,e)},Bde=Ae(sa)(({ownerState:t})=>z({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),Fde=Ae("input",{shouldForwardProp:is})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),zde=P.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:d,id:h,inputProps:f,inputRef:p,name:m,onBlur:b,onChange:y,onFocus:x,readOnly:_,required:w=!1,tabIndex:E,type:S,value:A}=e,k=He(e,Nde),[M,I]=Fh({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),B=bd(),R=H=>{x&&x(H),B&&B.onFocus&&B.onFocus(H)},O=H=>{b&&b(H),B&&B.onBlur&&B.onBlur(H)},C=H=>{if(H.nativeEvent.defaultPrevented)return;const Z=H.target.checked;I(Z),y&&y(H,Z)};let F=l;B&&typeof F>"u"&&(F=B.disabled);const q=S==="checkbox"||S==="radio",G=z({},e,{checked:M,disabled:F,disableFocusRipple:c,edge:u}),j=Dde(G);return J.jsxs(Bde,z({component:"span",className:ze(j.root,o),centerRipple:!0,focusRipple:!c,disabled:F,tabIndex:null,role:void 0,onFocus:R,onBlur:O,ownerState:G,ref:n},k,{children:[J.jsx(Fde,z({autoFocus:r,checked:i,defaultChecked:a,className:j.input,disabled:F,id:q?h:void 0,name:m,onChange:C,readOnly:_,ref:p,required:w,ownerState:G,tabIndex:E,type:S},S==="checkbox"&&A===void 0?{}:{value:A},f)),M?s:d]}))}),Ude=zde,$de=vt(J.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),jde=vt(J.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Gde=vt(J.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Hde(t){return ut("MuiCheckbox",t)}const Vde=st("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),UA=Vde,Wde=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Xde=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${Ee(r)}`,`size${Ee(i)}`]},o=ct(s,Hde,e);return z({},e,o)},Yde=Ae(Ude,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${Ee(n.size)}`],n.color!=="default"&&e[`color${Ee(n.color)}`]]}})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${UA.checked}, &.${UA.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${UA.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),qde=J.jsx(jde,{}),Kde=J.jsx($de,{}),Zde=J.jsx(Gde,{}),Qde=P.forwardRef(function(e,n){var r,i;const s=ht({props:e,name:"MuiCheckbox"}),{checkedIcon:o=qde,color:a="primary",icon:l=Kde,indeterminate:c=!1,indeterminateIcon:u=Zde,inputProps:d,size:h="medium",className:f}=s,p=He(s,Wde),m=c?u:l,b=c?u:o,y=z({},s,{color:a,indeterminate:c,size:h}),x=Xde(y);return J.jsx(Yde,z({type:"checkbox",inputProps:z({"data-indeterminate":c},d),icon:P.cloneElement(m,{fontSize:(r=m.props.fontSize)!=null?r:h}),checkedIcon:P.cloneElement(b,{fontSize:(i=b.props.fontSize)!=null?i:h}),ownerState:y,ref:n,className:ze(x.root,f)},p,{classes:x}))}),R0=Qde;function Jde(t){return ut("MuiCircularProgress",t)}st("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ehe=["className","color","disableShrink","size","style","thickness","value","variant"];let cS=t=>t,_5,x5,w5,E5;const su=44,the=vd(_5||(_5=cS`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),nhe=vd(x5||(x5=cS`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),rhe=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${Ee(r)}`],svg:["svg"],circle:["circle",`circle${Ee(n)}`,i&&"circleDisableShrink"]};return ct(s,Jde,e)},ihe=Ae("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Ee(n.color)}`]]}})(({ownerState:t,theme:e})=>z({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&tf(w5||(w5=cS`
      animation: ${0} 1.4s linear infinite;
    `),the)),she=Ae("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),ohe=Ae("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Ee(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>z({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&tf(E5||(E5=cS`
      animation: ${0} 1.4s ease-in-out infinite;
    `),nhe)),ahe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:d="indeterminate"}=r,h=He(r,ehe),f=z({},r,{color:s,disableShrink:o,size:a,thickness:c,value:u,variant:d}),p=rhe(f),m={},b={},y={};if(d==="determinate"){const x=2*Math.PI*((su-c)/2);m.strokeDasharray=x.toFixed(3),y["aria-valuenow"]=Math.round(u),m.strokeDashoffset=`${((100-u)/100*x).toFixed(3)}px`,b.transform="rotate(-90deg)"}return J.jsx(ihe,z({className:ze(p.root,i),style:z({width:a,height:a},b,l),ownerState:f,ref:n,role:"progressbar"},y,h,{children:J.jsx(she,{className:p.svg,ownerState:f,viewBox:`${su/2} ${su/2} ${su} ${su}`,children:J.jsx(ohe,{className:p.circle,style:m,ownerState:f,cx:su,cy:su,r:(su-c)/2,fill:"none",strokeWidth:c})})}))}),yg=ahe;function lhe(t){return ut("MuiModal",t)}st("MuiModal",["root","hidden","backdrop"]);const che=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],uhe=t=>{const{open:e,exited:n,classes:r}=t;return ct({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},lhe,r)},dhe=Ae("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>z({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),hhe=Ae(EO,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),fhe=P.forwardRef(function(e,n){var r,i,s,o,a,l;const c=ht({name:"MuiModal",props:e}),{BackdropComponent:u=hhe,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:m,component:b,components:y={},componentsProps:x={},disableAutoFocus:_=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:E=!1,disablePortal:S=!1,disableRestoreFocus:A=!1,disableScrollLock:k=!1,hideBackdrop:M=!1,keepMounted:I=!1,onBackdropClick:B,open:R,slotProps:O,slots:C}=c,F=He(c,che),q=z({},c,{closeAfterTransition:f,disableAutoFocus:_,disableEnforceFocus:w,disableEscapeKeyDown:E,disablePortal:S,disableRestoreFocus:A,disableScrollLock:k,hideBackdrop:M,keepMounted:I}),{getRootProps:G,getBackdropProps:j,getTransitionProps:H,portalRef:Z,isTopModal:X,exited:ee,hasTransition:ve}=kce(z({},q,{rootRef:n})),oe=z({},q,{exited:ee}),fe=uhe(oe),be={};if(p.props.tabIndex===void 0&&(be.tabIndex="-1"),ve){const{onEnter:Se,onExited:D}=H();be.onEnter=Se,be.onExited=D}const Le=(r=(i=C==null?void 0:C.root)!=null?i:y.Root)!=null?r:dhe,se=(s=(o=C==null?void 0:C.backdrop)!=null?o:y.Backdrop)!=null?s:u,ue=(a=O==null?void 0:O.root)!=null?a:x.root,Te=(l=O==null?void 0:O.backdrop)!=null?l:x.backdrop,ge=Ir({elementType:Le,externalSlotProps:ue,externalForwardedProps:F,getSlotProps:G,additionalProps:{ref:n,as:b},ownerState:oe,className:ze(h,ue==null?void 0:ue.className,fe==null?void 0:fe.root,!oe.open&&oe.exited&&(fe==null?void 0:fe.hidden))}),Me=Ir({elementType:se,externalSlotProps:Te,additionalProps:d,getSlotProps:Se=>j(z({},Se,{onClick:D=>{B&&B(D),Se!=null&&Se.onClick&&Se.onClick(D)}})),className:ze(Te==null?void 0:Te.className,d==null?void 0:d.className,fe==null?void 0:fe.backdrop),ownerState:oe});return!I&&!R&&(!ve||ee)?null:J.jsx(yW,{ref:Z,container:m,disablePortal:S,children:J.jsxs(Le,z({},ge,{children:[!M&&u?J.jsx(se,z({},Me)):null,J.jsx(lle,{disableEnforceFocus:w,disableAutoFocus:_,disableRestoreFocus:A,isEnabled:X,open:R,children:P.cloneElement(p,be)})]}))})}),CW=fhe;function phe(t){return ut("MuiDialog",t)}const ghe=st("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),$A=ghe,mhe=P.createContext({}),AW=mhe,vhe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],yhe=Ae(EO,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),bhe=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${Ee(n)}`],paper:["paper",`paperScroll${Ee(n)}`,`paperWidth${Ee(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return ct(o,phe,e)},_he=Ae(CW,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),xhe=Ae("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Ee(n.scroll)}`]]}})(({ownerState:t})=>z({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),whe=Ae(nf,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Ee(n.scroll)}`],e[`paperWidth${Ee(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>z({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${$A.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${$A.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${$A.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Ehe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiDialog"}),i=Ss(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:m="sm",onBackdropClick:b,onClose:y,open:x,PaperComponent:_=nf,PaperProps:w={},scroll:E="paper",TransitionComponent:S=xW,transitionDuration:A=s,TransitionProps:k}=r,M=He(r,vhe),I=z({},r,{disableEscapeKeyDown:h,fullScreen:f,fullWidth:p,maxWidth:m,scroll:E}),B=bhe(I),R=P.useRef(),O=G=>{R.current=G.target===G.currentTarget},C=G=>{R.current&&(R.current=null,b&&b(G),y&&y(G,"backdropClick"))},F=Qg(a),q=P.useMemo(()=>({titleId:F}),[F]);return J.jsx(_he,z({className:ze(B.root,d),closeAfterTransition:!0,components:{Backdrop:yhe},componentsProps:{backdrop:z({transitionDuration:A,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:x,ref:n,onClick:C,ownerState:I},M,{children:J.jsx(S,z({appear:!0,in:x,timeout:A,role:"presentation"},k,{children:J.jsx(xhe,{className:ze(B.container),onMouseDown:O,ownerState:I,children:J.jsx(whe,z({as:_,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":F},w,{className:ze(B.paper,w.className),ownerState:I,children:J.jsx(AW.Provider,{value:q,children:u})}))})}))}))}),Jg=Ehe;function The(t){return ut("MuiDialogActions",t)}st("MuiDialogActions",["root","spacing"]);const She=["className","disableSpacing"],Che=t=>{const{classes:e,disableSpacing:n}=t;return ct({root:["root",!n&&"spacing"]},The,e)},Ahe=Ae("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Phe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=He(r,She),a=z({},r,{disableSpacing:s}),l=Che(a);return J.jsx(Ahe,z({className:ze(l.root,i),ownerState:a,ref:n},o))}),nb=Phe;function Rhe(t){return ut("MuiDialogContent",t)}st("MuiDialogContent",["root","dividers"]);function Ihe(t){return ut("MuiDialogTitle",t)}const Mhe=st("MuiDialogTitle",["root"]),Lhe=Mhe,khe=["className","dividers"],Ohe=t=>{const{classes:e,dividers:n}=t;return ct({root:["root",n&&"dividers"]},Rhe,e)},Nhe=Ae("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>z({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${Lhe.root} + &`]:{paddingTop:0}})),Dhe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=He(r,khe),a=z({},r,{dividers:s}),l=Ohe(a);return J.jsx(Nhe,z({className:ze(l.root,i),ownerState:a,ref:n},o))}),em=Dhe;function Bhe(t){return ut("MuiDialogContentText",t)}st("MuiDialogContentText",["root"]);const Fhe=["children","className"],zhe=t=>{const{classes:e}=t,r=ct({root:["root"]},Bhe,e);return z({},e,r)},Uhe=Ae(En,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),$he=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=He(r,Fhe),o=zhe(s);return J.jsx(Uhe,z({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:ze(o.root,i)},r,{classes:o}))}),ac=$he,jhe=["className","id"],Ghe=t=>{const{classes:e}=t;return ct({root:["root"]},Ihe,e)},Hhe=Ae(En,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),Vhe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=He(r,jhe),a=r,l=Ghe(a),{titleId:c=s}=P.useContext(AW);return J.jsx(Hhe,z({component:"h2",className:ze(l.root,i),ownerState:a,ref:n,variant:"h6",id:s??c},o))}),tm=Vhe,Whe=st("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),T5=Whe;function Xhe(t){return ut("MuiFab",t)}const Yhe=st("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),S5=Yhe,qhe=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],Khe=t=>{const{color:e,variant:n,classes:r,size:i}=t,s={root:["root",n,`size${Ee(i)}`,e==="inherit"?"colorInherit":e]},o=ct(s,Xhe,r);return z({},r,o)},Zhe=Ae(sa,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>is(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Ee(n.size)}`],n.color==="inherit"&&e.colorInherit,e[Ee(n.size)],e[n.color]]}})(({theme:t,ownerState:e})=>{var n,r;return z({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${S5.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]}},e.size==="small"&&{width:40,height:40},e.size==="medium"&&{width:48,height:48},e.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},e.variant==="extended"&&e.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},e.variant==="extended"&&e.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},e.color==="inherit"&&{color:"inherit"})},({theme:t,ownerState:e})=>z({},e.color!=="inherit"&&e.color!=="default"&&(t.vars||t).palette[e.color]!=null&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}}),({theme:t})=>({[`&.${S5.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}})),Qhe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiFab"}),{children:i,className:s,color:o="default",component:a="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:d="large",variant:h="circular"}=r,f=He(r,qhe),p=z({},r,{color:o,component:a,disabled:l,disableFocusRipple:c,size:d,variant:h}),m=Khe(p);return J.jsx(Zhe,z({className:ze(m.root,s),component:a,disabled:l,focusRipple:!c,focusVisibleClassName:ze(m.focusVisible,u),ownerState:p,ref:n},f,{classes:m,children:i}))}),PW=Qhe,Jhe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],efe=t=>{const{classes:e,disableUnderline:n}=t,i=ct({root:["root",!n&&"underline"],input:["input"]},pue,e);return z({},e,i)},tfe=Ae(aS,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...sS(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return z({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Od.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Od.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Od.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Od.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Od.disabled}, .${Od.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Od.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&z({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),nfe=Ae(lS,{name:"MuiFilledInput",slot:"Input",overridesResolver:oS})(({theme:t,ownerState:e})=>z({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),RW=P.forwardRef(function(e,n){var r,i,s,o;const a=ht({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:m="text"}=a,b=He(a,Jhe),y=z({},a,{fullWidth:u,inputComponent:d,multiline:h,type:m}),x=efe(a),_={root:{ownerState:y},input:{ownerState:y}},w=f??c?ts(_,f??c):_,E=(r=(i=p.root)!=null?i:l.Root)!=null?r:tfe,S=(s=(o=p.input)!=null?o:l.Input)!=null?s:nfe;return J.jsx(wO,z({slots:{root:E,input:S},componentsProps:w,fullWidth:u,inputComponent:d,multiline:h,ref:n,type:m},b,{classes:x}))});RW.muiName="Input";const IW=RW;function rfe(t){return ut("MuiFormControl",t)}st("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const ife=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],sfe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Ee(n)}`,r&&"fullWidth"]};return ct(i,rfe,e)},ofe=Ae("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>z({},e.root,e[`margin${Ee(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>z({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),afe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:m="medium",variant:b="outlined"}=r,y=He(r,ife),x=z({},r,{color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:m,variant:b}),_=sfe(x),[w,E]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,C=>{if(!Gp(C,["Input","Select"]))return;const F=Gp(C,["Select"])?C.props.input:C;F&&rue(F.props)&&(O=!0)}),O}),[S,A]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,C=>{Gp(C,["Input","Select"])&&($w(C.props,!0)||$w(C.props.inputProps,!0))&&(O=!0)}),O}),[k,M]=P.useState(!1);l&&k&&M(!1);const I=u!==void 0&&!l?u:k;let B;const R=P.useMemo(()=>({adornedStart:w,setAdornedStart:E,color:o,disabled:l,error:c,filled:S,focused:I,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{M(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{M(!0)},registerEffect:B,required:p,variant:b}),[w,o,l,c,S,I,d,h,B,p,m,b]);return J.jsx(xO.Provider,{value:R,children:J.jsx(ofe,z({as:a,ownerState:x,className:ze(_.root,s),ref:n},y,{children:i}))})}),SO=afe,lfe=yoe({createStyledComponent:Ae("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>ht({props:t,name:"MuiStack"})}),cfe=lfe;function ufe(t){return ut("MuiFormGroup",t)}st("MuiFormGroup",["root","row","error"]);const dfe=["className","row"],hfe=t=>{const{classes:e,row:n,error:r}=t;return ct({root:["root",n&&"row",r&&"error"]},ufe,e)},ffe=Ae("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>z({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),pfe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=r,o=He(r,dfe),a=bd(),l=rf({props:r,muiFormControl:a,states:["error"]}),c=z({},r,{row:s,error:l.error}),u=hfe(c);return J.jsx(ffe,z({className:ze(u.root,i),ownerState:c,ref:n},o))}),gfe=pfe;function mfe(t){return ut("MuiFormHelperText",t)}const vfe=st("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),C5=vfe;var A5;const yfe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],bfe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${Ee(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return ct(c,mfe,e)},_fe=Ae("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Ee(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${C5.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${C5.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),xfe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=He(r,yfe),l=bd(),c=rf({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=z({},r,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=bfe(u);return J.jsx(_fe,z({as:o,ownerState:u,className:ze(d.root,s),ref:n},a,{children:i===" "?A5||(A5=J.jsx("span",{className:"notranslate",children:""})):i}))}),wfe=xfe;function Efe(t){return ut("MuiFormLabel",t)}const Tfe=st("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),dv=Tfe,Sfe=["children","className","color","component","disabled","error","filled","focused","required"],Cfe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${Ee(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return ct(l,Efe,e)},Afe=Ae("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>z({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>z({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${dv.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${dv.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${dv.error}`]:{color:(t.vars||t).palette.error.main}})),Pfe=Ae("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${dv.error}`]:{color:(t.vars||t).palette.error.main}})),Rfe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=He(r,Sfe),l=bd(),c=rf({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=z({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=Cfe(u);return J.jsxs(Afe,z({as:o,ownerState:u,className:ze(d.root,s),ref:n},a,{children:[i,c.required&&J.jsxs(Pfe,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),Ife=Rfe,Mfe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function rI(t){return`scale(${t}, ${t**2})`}const Lfe={entering:{opacity:1,transform:rI(1)},entered:{opacity:1,transform:"none"}},jA=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),MW=P.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:m="auto",TransitionComponent:b=nS}=e,y=He(e,Mfe),x=P.useRef(),_=P.useRef(),w=Ss(),E=P.useRef(null),S=$n(E,s.ref,n),A=F=>q=>{if(F){const G=E.current;q===void 0?F(G):F(G,q)}},k=A(u),M=A((F,q)=>{hO(F);const{duration:G,delay:j,easing:H}=id({style:p,timeout:m,easing:o},{mode:"enter"});let Z;m==="auto"?(Z=w.transitions.getAutoHeightDuration(F.clientHeight),_.current=Z):Z=G,F.style.transition=[w.transitions.create("opacity",{duration:Z,delay:j}),w.transitions.create("transform",{duration:jA?Z:Z*.666,delay:j,easing:H})].join(","),l&&l(F,q)}),I=A(c),B=A(f),R=A(F=>{const{duration:q,delay:G,easing:j}=id({style:p,timeout:m,easing:o},{mode:"exit"});let H;m==="auto"?(H=w.transitions.getAutoHeightDuration(F.clientHeight),_.current=H):H=q,F.style.transition=[w.transitions.create("opacity",{duration:H,delay:G}),w.transitions.create("transform",{duration:jA?H:H*.666,delay:jA?G:G||H*.333,easing:j})].join(","),F.style.opacity=0,F.style.transform=rI(.75),d&&d(F)}),O=A(h),C=F=>{m==="auto"&&(x.current=setTimeout(F,_.current||0)),r&&r(E.current,F)};return P.useEffect(()=>()=>{clearTimeout(x.current)},[]),J.jsx(b,z({appear:i,in:a,nodeRef:E,onEnter:M,onEntered:I,onEntering:k,onExit:R,onExited:O,onExiting:B,addEndListener:C,timeout:m==="auto"?null:m},y,{children:(F,q)=>P.cloneElement(s,z({style:z({opacity:0,transform:rI(.75),visibility:F==="exited"&&!a?"hidden":void 0},Lfe[F],p,s.props.style),ref:S},q))}))});MW.muiSupportAuto=!0;const jw=MW;function kfe(t,e,n,r,i){const[s,o]=P.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return _s(()=>{let a=!0;if(!n)return;const l=n(t),c=()=>{a&&o(l.matches)};return c(),l.addListener(c),()=>{a=!1,l.removeListener(c)}},[t,n]),s}const LW=P.useSyncExternalStore;function Ofe(t,e,n,r,i){const s=P.useCallback(()=>e,[e]),o=P.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:u}=r(t);return()=>u}return s},[s,t,r,i,n]),[a,l]=P.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const u=n(t);return[()=>u.matches,d=>(u.addListener(d),()=>{u.removeListener(d)})]},[s,n,t]);return LW(l,a,o)}function Nfe(t,e={}){const n=oO(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=eW({name:"MuiUseMediaQuery",props:e,theme:n});let l=typeof t=="function"?t(n):t;return l=l.replace(/^@media( ?)/m,""),(LW!==void 0?Ofe:kfe)(l,i,s,o,a)}const Dfe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Bfe=t=>{const{classes:e,disableUnderline:n}=t,i=ct({root:["root",!n&&"underline"],input:["input"]},uue,e);return z({},e,i)},Ffe=Ae(aS,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...sS(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),z({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Xm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Xm.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Xm.disabled}, .${Xm.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Xm.disabled}:before`]:{borderBottomStyle:"dotted"}})}),zfe=Ae(lS,{name:"MuiInput",slot:"Input",overridesResolver:oS})({}),kW=P.forwardRef(function(e,n){var r,i,s,o;const a=ht({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:h="input",multiline:f=!1,slotProps:p,slots:m={},type:b="text"}=a,y=He(a,Dfe),x=Bfe(a),w={root:{ownerState:{disableUnderline:l}}},E=p??u?ts(p??u,w):w,S=(r=(i=m.root)!=null?i:c.Root)!=null?r:Ffe,A=(s=(o=m.input)!=null?o:c.Input)!=null?s:zfe;return J.jsx(wO,z({slots:{root:S,input:A},slotProps:E,fullWidth:d,inputComponent:h,multiline:f,ref:n,type:b},y,{classes:x}))});kW.muiName="Input";const OW=kW;function Ufe(t){return ut("MuiInputLabel",t)}st("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const $fe=["disableAnimation","margin","shrink","variant","className"],jfe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Ee(r)}`,o],asterisk:[a&&"asterisk"]},c=ct(l,Ufe,e);return z({},e,c)},Gfe=Ae(Ife,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${dv.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>z({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&z({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&z({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&z({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Hfe=P.forwardRef(function(e,n){const r=ht({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=He(r,$fe),l=bd();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=rf({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=z({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),h=jfe(d);return J.jsx(Gfe,z({"data-shrink":c,ownerState:d,ref:n,className:ze(h.root,o)},a,{classes:h}))}),NW=Hfe;function Vfe(t){return ut("MuiLinearProgress",t)}st("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Wfe=["className","color","value","valueBuffer","variant"];let nm=t=>t,P5,R5,I5,M5,L5,k5;const iI=4,Xfe=vd(P5||(P5=nm`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Yfe=vd(R5||(R5=nm`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),qfe=vd(I5||(I5=nm`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Kfe=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${Ee(r)}`,n],dashed:["dashed",`dashedColor${Ee(r)}`],bar1:["bar",`barColor${Ee(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${Ee(r)}`,n==="buffer"&&`color${Ee(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return ct(i,Vfe,e)},CO=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?Jy(t.palette[e].main,.62):Qy(t.palette[e].main,.5),Zfe=Ae("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Ee(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>z({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:CO(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),Qfe=Ae("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${Ee(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=CO(e,t.color);return z({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},tf(M5||(M5=nm`
    animation: ${0} 3s infinite linear;
  `),qfe)),Jfe=Ae("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Ee(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>z({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${iI}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${iI}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&tf(L5||(L5=nm`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Xfe)),epe=Ae("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Ee(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>z({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:CO(e,t.color),transition:`transform .${iI}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&tf(k5||(k5=nm`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Yfe)),tpe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:l="indeterminate"}=r,c=He(r,Wfe),u=z({},r,{color:s,variant:l}),d=Kfe(u),h=Ss(),f={},p={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let m=o-100;h.direction==="rtl"&&(m=-m),p.bar1.transform=`translateX(${m}%)`}if(l==="buffer"&&a!==void 0){let m=(a||0)-100;h.direction==="rtl"&&(m=-m),p.bar2.transform=`translateX(${m}%)`}return J.jsxs(Zfe,z({className:ze(d.root,i),ownerState:u,role:"progressbar"},f,{ref:n},c,{children:[l==="buffer"?J.jsx(Qfe,{className:d.dashed,ownerState:u}):null,J.jsx(Jfe,{className:d.bar1,ownerState:u,style:p.bar1}),l==="determinate"?null:J.jsx(epe,{className:d.bar2,ownerState:u,style:p.bar2})]}))}),sI=tpe,npe=P.createContext({}),ny=npe;function rpe(t){return ut("MuiList",t)}st("MuiList",["root","padding","dense","subheader"]);const ipe=["children","className","component","dense","disablePadding","subheader"],spe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return ct({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},rpe,e)},ope=Ae("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>z({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),ape=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=He(r,ipe),d=P.useMemo(()=>({dense:a}),[a]),h=z({},r,{component:o,dense:a,disablePadding:l}),f=spe(h);return J.jsx(ny.Provider,{value:d,children:J.jsxs(ope,z({as:o,className:ze(f.root,s),ref:n,ownerState:h},u,{children:[c,i]}))})}),lpe=ape;function cpe(t){return ut("MuiListItemIcon",t)}const upe=st("MuiListItemIcon",["root","alignItemsFlexStart"]),O5=upe,dpe=["className"],hpe=t=>{const{alignItems:e,classes:n}=t;return ct({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},cpe,n)},fpe=Ae("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>z({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),ppe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiListItemIcon"}),{className:i}=r,s=He(r,dpe),o=P.useContext(ny),a=z({},r,{alignItems:o.alignItems}),l=hpe(a);return J.jsx(fpe,z({className:ze(l.root,i),ownerState:a,ref:n},s))}),GA=ppe;function gpe(t){return ut("MuiListItemText",t)}const mpe=st("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Gw=mpe,vpe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],ype=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return ct({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},gpe,e)},bpe=Ae("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Gw.primary}`]:e.primary},{[`& .${Gw.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>z({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),_pe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=He(r,vpe),{dense:f}=P.useContext(ny);let p=l??i,m=u;const b=z({},r,{disableTypography:o,inset:a,primary:!!p,secondary:!!m,dense:f}),y=ype(b);return p!=null&&p.type!==En&&!o&&(p=J.jsx(En,z({variant:f?"body2":"body1",className:y.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:p}))),m!=null&&m.type!==En&&!o&&(m=J.jsx(En,z({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},d,{children:m}))),J.jsxs(bpe,z({className:ze(y.root,s),ownerState:b,ref:n},h,{children:[p,m]}))}),Ix=_pe,xpe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function HA(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function N5(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function DW(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function Ym(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!DW(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const wpe=P.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=He(e,xpe),f=P.useRef(null),p=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});_s(()=>{i&&f.current.focus()},[i]),P.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(_,w)=>{const E=!f.current.style.width;if(_.clientHeight<f.current.clientHeight&&E){const S=`${jV(Zn(_))}px`;f.current.style[w.direction==="rtl"?"paddingLeft":"paddingRight"]=S,f.current.style.width=`calc(100% + ${S})`}return f.current}}),[]);const m=_=>{const w=f.current,E=_.key,S=Zn(w).activeElement;if(E==="ArrowDown")_.preventDefault(),Ym(w,S,c,l,HA);else if(E==="ArrowUp")_.preventDefault(),Ym(w,S,c,l,N5);else if(E==="Home")_.preventDefault(),Ym(w,null,c,l,HA);else if(E==="End")_.preventDefault(),Ym(w,null,c,l,N5);else if(E.length===1){const A=p.current,k=E.toLowerCase(),M=performance.now();A.keys.length>0&&(M-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&k!==A.keys[0]&&(A.repeating=!1)),A.lastTime=M,A.keys.push(k);const I=S&&!A.repeating&&DW(S,A);A.previousKeyMatched&&(I||Ym(w,S,!1,l,HA,A))?_.preventDefault():A.previousKeyMatched=!1}u&&u(_)},b=$n(f,n);let y=-1;P.Children.forEach(o,(_,w)=>{if(!P.isValidElement(_)){y===w&&(y+=1,y>=o.length&&(y=-1));return}_.props.disabled||(d==="selectedMenu"&&_.props.selected||y===-1)&&(y=w),y===w&&(_.props.disabled||_.props.muiSkipListHighlight||_.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const x=P.Children.map(o,(_,w)=>{if(w===y){const E={};return s&&(E.autoFocus=!0),_.props.tabIndex===void 0&&d==="selectedMenu"&&(E.tabIndex=0),P.cloneElement(_,E)}return _});return J.jsx(lpe,z({role:"menu",ref:b,className:a,onKeyDown:m,tabIndex:i?0:-1},h,{children:x}))}),BW=wpe;function Epe(t){return ut("MuiPopover",t)}st("MuiPopover",["root","paper"]);const Tpe=["onEntering"],Spe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Cpe=["slotProps"];function D5(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function B5(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function F5(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function VA(t){return typeof t=="function"?t():t}const Ape=t=>{const{classes:e}=t;return ct({root:["root"],paper:["paper"]},Epe,e)},Ppe=Ae(CW,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),FW=Ae(nf,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Rpe=P.forwardRef(function(e,n){var r,i,s;const o=ht({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:m=8,marginThreshold:b=16,open:y,PaperProps:x={},slots:_,slotProps:w,transformOrigin:E={vertical:"top",horizontal:"left"},TransitionComponent:S=jw,transitionDuration:A="auto",TransitionProps:{onEntering:k}={},disableScrollLock:M=!1}=o,I=He(o.TransitionProps,Tpe),B=He(o,Spe),R=(r=w==null?void 0:w.paper)!=null?r:x,O=P.useRef(),C=$n(O,R.ref),F=z({},o,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:b,externalPaperSlotProps:R,transformOrigin:E,TransitionComponent:S,transitionDuration:A,TransitionProps:I}),q=Ape(F),G=P.useCallback(()=>{if(d==="anchorPosition")return u;const Se=VA(l),ie=(Se&&Se.nodeType===1?Se:Zn(O.current).body).getBoundingClientRect();return{top:ie.top+D5(ie,c.vertical),left:ie.left+B5(ie,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),j=P.useCallback(Se=>({vertical:D5(Se,E.vertical),horizontal:B5(Se,E.horizontal)}),[E.horizontal,E.vertical]),H=P.useCallback(Se=>{const D={width:Se.offsetWidth,height:Se.offsetHeight},ie=j(D);if(d==="none")return{top:null,left:null,transformOrigin:F5(ie)};const ae=G();let K=ae.top-ie.vertical,W=ae.left-ie.horizontal;const ne=K+D.height,pe=W+D.width,me=Nl(VA(l)),he=me.innerHeight-b,Pe=me.innerWidth-b;if(b!==null&&K<b){const Oe=K-b;K-=Oe,ie.vertical+=Oe}else if(b!==null&&ne>he){const Oe=ne-he;K-=Oe,ie.vertical+=Oe}if(b!==null&&W<b){const Oe=W-b;W-=Oe,ie.horizontal+=Oe}else if(pe>Pe){const Oe=pe-Pe;W-=Oe,ie.horizontal+=Oe}return{top:`${Math.round(K)}px`,left:`${Math.round(W)}px`,transformOrigin:F5(ie)}},[l,d,G,j,b]),[Z,X]=P.useState(y),ee=P.useCallback(()=>{const Se=O.current;if(!Se)return;const D=H(Se);D.top!==null&&(Se.style.top=D.top),D.left!==null&&(Se.style.left=D.left),Se.style.transformOrigin=D.transformOrigin,X(!0)},[H]);P.useEffect(()=>(M&&window.addEventListener("scroll",ee),()=>window.removeEventListener("scroll",ee)),[l,M,ee]);const ve=(Se,D)=>{k&&k(Se,D),ee()},oe=()=>{X(!1)};P.useEffect(()=>{y&&ee()}),P.useImperativeHandle(a,()=>y?{updatePosition:()=>{ee()}}:null,[y,ee]),P.useEffect(()=>{if(!y)return;const Se=Ky(()=>{ee()}),D=Nl(l);return D.addEventListener("resize",Se),()=>{Se.clear(),D.removeEventListener("resize",Se)}},[l,y,ee]);let fe=A;A==="auto"&&!S.muiSupportAuto&&(fe=void 0);const be=p||(l?Zn(VA(l)).body:void 0),Le=(i=_==null?void 0:_.root)!=null?i:Ppe,se=(s=_==null?void 0:_.paper)!=null?s:FW,ue=Ir({elementType:se,externalSlotProps:z({},R,{style:Z?R.style:z({},R.style,{opacity:0})}),additionalProps:{elevation:m,ref:C},ownerState:F,className:ze(q.paper,R==null?void 0:R.className)}),Te=Ir({elementType:Le,externalSlotProps:(w==null?void 0:w.root)||{},externalForwardedProps:B,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:be,open:y},ownerState:F,className:ze(q.root,f)}),{slotProps:ge}=Te,Me=He(Te,Cpe);return J.jsx(Le,z({},Me,!Yu(Le)&&{slotProps:ge,disableScrollLock:M},{children:J.jsx(S,z({appear:!0,in:y,onEntering:ve,onExited:oe,timeout:fe},I,{children:J.jsx(se,z({},ue,{children:h}))}))}))}),Ipe=Rpe;function Mpe(t){return ut("MuiMenu",t)}st("MuiMenu",["root","paper","list"]);const Lpe=["onEntering"],kpe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Ope={vertical:"top",horizontal:"right"},Npe={vertical:"top",horizontal:"left"},Dpe=t=>{const{classes:e}=t;return ct({root:["root"],paper:["paper"],list:["list"]},Mpe,e)},Bpe=Ae(Ipe,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Fpe=Ae(FW,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),zpe=Ae(BW,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Upe=P.forwardRef(function(e,n){var r,i;const s=ht({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:b}={},variant:y="selectedMenu",slots:x={},slotProps:_={}}=s,w=He(s.TransitionProps,Lpe),E=He(s,kpe),S=Ss(),A=S.direction==="rtl",k=z({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:b,PaperProps:f,transitionDuration:m,TransitionProps:w,variant:y}),M=Dpe(k),I=o&&!c&&h,B=P.useRef(null),R=(H,Z)=>{B.current&&B.current.adjustStyleForScrollbar(H,S),b&&b(H,Z)},O=H=>{H.key==="Tab"&&(H.preventDefault(),d&&d(H,"tabKeyDown"))};let C=-1;P.Children.map(a,(H,Z)=>{P.isValidElement(H)&&(H.props.disabled||(y==="selectedMenu"&&H.props.selected||C===-1)&&(C=Z))});const F=(r=x.paper)!=null?r:Fpe,q=(i=_.paper)!=null?i:f,G=Ir({elementType:x.root,externalSlotProps:_.root,ownerState:k,className:[M.root,l]}),j=Ir({elementType:F,externalSlotProps:q,ownerState:k,className:M.paper});return J.jsx(Bpe,z({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?Ope:Npe,slots:{paper:F,root:x.root},slotProps:{root:G,paper:j},open:h,ref:n,transitionDuration:m,TransitionProps:z({onEntering:R},w),ownerState:k},E,{classes:p,children:J.jsx(zpe,z({onKeyDown:O,actions:B,autoFocus:o&&(C===-1||c),autoFocusItem:I,variant:y},u,{className:ze(M.list,u.className),children:a}))}))}),$pe=Upe;function jpe(t){return ut("MuiMenuItem",t)}const Gpe=st("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),qm=Gpe,Hpe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Vpe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Wpe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=ct({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},jpe,o);return z({},o,l)},Xpe=Ae(sa,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Vpe})(({theme:t,ownerState:e})=>z({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${qm.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:nn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${qm.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:nn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${qm.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:nn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:nn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${qm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${qm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${T5.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${T5.inset}`]:{marginLeft:52},[`& .${Gw.root}`]:{marginTop:0,marginBottom:0},[`& .${Gw.inset}`]:{paddingLeft:36},[`& .${O5.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&z({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${O5.root} svg`]:{fontSize:"1.25rem"}}))),Ype=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,f=He(r,Hpe),p=P.useContext(ny),m=P.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),b=P.useRef(null);_s(()=>{i&&b.current&&b.current.focus()},[i]);const y=z({},r,{dense:m.dense,divider:a,disableGutters:l}),x=Wpe(r),_=$n(b,n);let w;return r.disabled||(w=d!==void 0?d:-1),J.jsx(ny.Provider,{value:m,children:J.jsx(Xpe,z({ref:_,role:u,tabIndex:w,component:s,focusVisibleClassName:ze(x.focusVisible,c),className:ze(x.root,h)},f,{ownerState:y,classes:x}))})}),Mx=Ype;function qpe(t){return ut("MuiNativeSelect",t)}const Kpe=st("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),AO=Kpe,Zpe=["className","disabled","error","IconComponent","inputRef","variant"],Qpe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Ee(n)}`,s&&"iconOpen",r&&"disabled"]};return ct(a,qpe,e)},zW=({ownerState:t,theme:e})=>z({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":z({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${AO.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),Jpe=Ae("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:is,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${AO.multiple}`]:e.multiple}]}})(zW),UW=({ownerState:t,theme:e})=>z({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${AO.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),ege=Ae("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Ee(n.variant)}`],n.open&&e.iconOpen]}})(UW),tge=P.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=He(e,Zpe),u=z({},e,{disabled:i,variant:l,error:s}),d=Qpe(u);return J.jsxs(P.Fragment,{children:[J.jsx(Jpe,z({ownerState:u,className:ze(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:J.jsx(ege,{as:o,ownerState:u,className:d.icon})]})}),nge=tge;var z5;const rge=["children","classes","className","label","notched"],ige=Ae("fieldset",{shouldForwardProp:is})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sge=Ae("legend",{shouldForwardProp:is})(({ownerState:t,theme:e})=>z({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&z({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function oge(t){const{className:e,label:n,notched:r}=t,i=He(t,rge),s=n!=null&&n!=="",o=z({},t,{notched:r,withLabel:s});return J.jsx(ige,z({"aria-hidden":!0,className:e,ownerState:o},i,{children:J.jsx(sge,{ownerState:o,children:s?J.jsx("span",{children:n}):z5||(z5=J.jsx("span",{className:"notranslate",children:""}))})}))}const age=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],lge=t=>{const{classes:e}=t,r=ct({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},hue,e);return z({},e,r)},cge=Ae(aS,{shouldForwardProp:t=>is(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:sS})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return z({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${ru.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${ru.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${ru.focused} .${ru.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${ru.error} .${ru.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${ru.disabled} .${ru.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&z({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),uge=Ae(oge,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),dge=Ae(lS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:oS})(({theme:t,ownerState:e})=>z({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),$W=P.forwardRef(function(e,n){var r,i,s,o,a;const l=ht({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:m={},type:b="text"}=l,y=He(l,age),x=lge(l),_=bd(),w=rf({props:l,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),E=z({},l,{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:_,fullWidth:u,hiddenLabel:w.hiddenLabel,multiline:f,size:w.size,type:b}),S=(r=(i=m.root)!=null?i:c.Root)!=null?r:cge,A=(s=(o=m.input)!=null?o:c.Input)!=null?s:dge;return J.jsx(wO,z({slots:{root:S,input:A},renderSuffix:k=>J.jsx(uge,{ownerState:E,className:x.notchedOutline,label:h!=null&&h!==""&&w.required?a||(a=J.jsxs(P.Fragment,{children:[h,"","*"]})):h,notched:typeof p<"u"?p:!!(k.startAdornment||k.filled||k.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:n,type:b},y,{classes:z({},x,{notchedOutline:null})}))});$W.muiName="Input";const jW=$W;function hge(t){return ut("MuiSelect",t)}const Km=st("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var U5;const fge=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],pge=Ae("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Km.select}`]:e.select},{[`&.${Km.select}`]:e[n.variant]},{[`&.${Km.error}`]:e.error},{[`&.${Km.multiple}`]:e.multiple}]}})(zW,{[`&.${Km.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),gge=Ae("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Ee(n.variant)}`],n.open&&e.iconOpen]}})(UW),mge=Ae("input",{shouldForwardProp:t=>cO(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function $5(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function vge(t){return t==null||typeof t=="string"&&!t.trim()}const yge=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Ee(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ct(a,hge,e)},bge=P.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:m,inputRef:b,labelId:y,MenuProps:x={},multiple:_,name:w,onBlur:E,onChange:S,onClose:A,onFocus:k,onOpen:M,open:I,readOnly:B,renderValue:R,SelectDisplayProps:O={},tabIndex:C,value:F,variant:q="standard"}=e,G=He(e,fge),[j,H]=Fh({controlled:F,default:d,name:"Select"}),[Z,X]=Fh({controlled:I,default:u,name:"Select"}),ee=P.useRef(null),ve=P.useRef(null),[oe,fe]=P.useState(null),{current:be}=P.useRef(I!=null),[Le,se]=P.useState(),ue=$n(n,b),Te=P.useCallback(Ge=>{ve.current=Ge,Ge&&fe(Ge)},[]),ge=oe==null?void 0:oe.parentNode;P.useImperativeHandle(ue,()=>({focus:()=>{ve.current.focus()},node:ee.current,value:j}),[j]),P.useEffect(()=>{u&&Z&&oe&&!be&&(se(a?null:ge.clientWidth),ve.current.focus())},[oe,a]),P.useEffect(()=>{o&&ve.current.focus()},[o]),P.useEffect(()=>{if(!y)return;const Ge=Zn(ve.current).getElementById(y);if(Ge){const Pt=()=>{getSelection().isCollapsed&&ve.current.focus()};return Ge.addEventListener("click",Pt),()=>{Ge.removeEventListener("click",Pt)}}},[y]);const Me=(Ge,Pt)=>{Ge?M&&M(Pt):A&&A(Pt),be||(se(a?null:ge.clientWidth),X(Ge))},Se=Ge=>{Ge.button===0&&(Ge.preventDefault(),ve.current.focus(),Me(!0,Ge))},D=Ge=>{Me(!1,Ge)},ie=P.Children.toArray(l),ae=Ge=>{const Pt=ie.find(Xe=>Xe.props.value===Ge.target.value);Pt!==void 0&&(H(Pt.props.value),S&&S(Ge,Pt))},K=Ge=>Pt=>{let Xe;if(Pt.currentTarget.hasAttribute("tabindex")){if(_){Xe=Array.isArray(j)?j.slice():[];const Ze=j.indexOf(Ge.props.value);Ze===-1?Xe.push(Ge.props.value):Xe.splice(Ze,1)}else Xe=Ge.props.value;if(Ge.props.onClick&&Ge.props.onClick(Pt),j!==Xe&&(H(Xe),S)){const Ze=Pt.nativeEvent||Pt,Nt=new Ze.constructor(Ze.type,Ze);Object.defineProperty(Nt,"target",{writable:!0,value:{value:Xe,name:w}}),S(Nt,Ge)}_||Me(!1,Pt)}},W=Ge=>{B||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ge.key)!==-1&&(Ge.preventDefault(),Me(!0,Ge))},ne=oe!==null&&Z,pe=Ge=>{!ne&&E&&(Object.defineProperty(Ge,"target",{writable:!0,value:{value:j,name:w}}),E(Ge))};delete G["aria-invalid"];let me,he;const Pe=[];let Oe=!1;($w({value:j})||f)&&(R?me=R(j):Oe=!0);const de=ie.map(Ge=>{if(!P.isValidElement(Ge))return null;let Pt;if(_){if(!Array.isArray(j))throw new Error(rd(2));Pt=j.some(Xe=>$5(Xe,Ge.props.value)),Pt&&Oe&&Pe.push(Ge.props.children)}else Pt=$5(j,Ge.props.value),Pt&&Oe&&(he=Ge.props.children);return P.cloneElement(Ge,{"aria-selected":Pt?"true":"false",onClick:K(Ge),onKeyUp:Xe=>{Xe.key===" "&&Xe.preventDefault(),Ge.props.onKeyUp&&Ge.props.onKeyUp(Xe)},role:"option",selected:Pt,value:void 0,"data-value":Ge.props.value})});Oe&&(_?Pe.length===0?me=null:me=Pe.reduce((Ge,Pt,Xe)=>(Ge.push(Pt),Xe<Pe.length-1&&Ge.push(", "),Ge),[]):me=he);let Ce=Le;!a&&be&&oe&&(Ce=ge.clientWidth);let Ye;typeof C<"u"?Ye=C:Ye=h?null:0;const Fe=O.id||(w?`mui-component-select-${w}`:void 0),Ve=z({},e,{variant:q,value:j,open:ne,error:p}),Bt=yge(Ve),yt=z({},x.PaperProps,(r=x.slotProps)==null?void 0:r.paper),Ot=Qg();return J.jsxs(P.Fragment,{children:[J.jsx(pge,z({ref:Te,tabIndex:Ye,role:"combobox","aria-controls":Ot,"aria-disabled":h?"true":void 0,"aria-expanded":ne?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,Fe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:W,onMouseDown:h||B?null:Se,onBlur:pe,onFocus:k},O,{ownerState:Ve,className:ze(O.className,Bt.select,c),id:Fe,children:vge(me)?U5||(U5=J.jsx("span",{className:"notranslate",children:""})):me})),J.jsx(mge,z({"aria-invalid":p,value:Array.isArray(j)?j.join(","):j,name:w,ref:ee,"aria-hidden":!0,onChange:ae,tabIndex:-1,disabled:h,className:Bt.nativeInput,autoFocus:o,ownerState:Ve},G)),J.jsx(gge,{as:m,className:Bt.icon,ownerState:Ve}),J.jsx($pe,z({id:`menu-${w||""}`,anchorEl:ge,open:ne,onClose:D,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x,{MenuListProps:z({"aria-labelledby":y,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:Ot},x.MenuListProps),slotProps:z({},x.slotProps,{paper:z({},yt,{style:z({minWidth:Ce},yt!=null?yt.style:null)})}),children:de}))]})}),_ge=bge,xge=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],wge=["root"],Ege=t=>{const{classes:e}=t;return e},PO={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>is(t)&&t!=="variant",slot:"Root"},Tge=Ae(OW,PO)(""),Sge=Ae(jW,PO)(""),Cge=Ae(IW,PO)(""),GW=P.forwardRef(function(e,n){const r=ht({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=mue,id:d,input:h,inputProps:f,label:p,labelId:m,MenuProps:b,multiple:y=!1,native:x=!1,onClose:_,onOpen:w,open:E,renderValue:S,SelectDisplayProps:A,variant:k="outlined"}=r,M=He(r,xge),I=x?nge:_ge,B=bd(),R=rf({props:r,muiFormControl:B,states:["variant","error"]}),O=R.variant||k,C=z({},r,{variant:O,classes:o}),F=Ege(C),q=He(F,wge),G=h||{standard:J.jsx(Tge,{ownerState:C}),outlined:J.jsx(Sge,{label:p,ownerState:C}),filled:J.jsx(Cge,{ownerState:C})}[O],j=$n(n,G.ref);return J.jsx(P.Fragment,{children:P.cloneElement(G,z({inputComponent:I,inputProps:z({children:s,error:R.error,IconComponent:u,variant:O,type:void 0,multiple:y},x?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:b,onClose:_,onOpen:w,open:E,renderValue:S,SelectDisplayProps:z({id:d},A)},f,{classes:f?ts(q,f.classes):q},h?h.props.inputProps:{})},y&&x&&O==="outlined"?{notched:!0}:{},{ref:j,className:ze(G.props.className,a,F.root)},!h&&{variant:O},M))})});GW.muiName="Select";const HW=GW,Age=t=>!t||!Yu(t);function Pge(t){return ut("MuiSlider",t)}const Ma=st("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Rge=t=>{const{open:e}=t;return{offset:ze(e&&Ma.valueLabelOpen),circle:Ma.valueLabelCircle,label:Ma.valueLabelLabel}};function Ige(t){const{children:e,className:n,value:r}=t,i=Rge(t);return e?P.cloneElement(e,{className:ze(e.props.className)},J.jsxs(P.Fragment,{children:[e.props.children,J.jsx("span",{className:ze(i.offset,n),"aria-hidden":!0,children:J.jsx("span",{className:i.circle,children:J.jsx("span",{className:i.label,children:r})})})]})):null}const Mge=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function j5(t){return t}const Lge=Ae("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Ee(n.color)}`],n.size!=="medium"&&e[`size${Ee(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t,ownerState:e})=>z({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(t.vars||t).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&z({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&z({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${Ma.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ma.dragging}`]:{[`& .${Ma.thumb}, & .${Ma.track}`]:{transition:"none"}}})),kge=Ae("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})(({ownerState:t})=>z({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},t.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track==="inverted"&&{opacity:1})),Oge=Ae("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?Jy(t.palette[e.color].main,.62):Qy(t.palette[e.color].main,.5);return z({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n,borderColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n})}),Nge=Ae("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Ee(n.color)}`],n.size!=="medium"&&e[`thumbSize${Ee(n.size)}`]]}})(({theme:t,ownerState:e})=>z({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&::before":z({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${Ma.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:nn(t.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Ma.active}`]:{boxShadow:`0px 0px 0px 14px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:nn(t.palette[e.color].main,.16)}`},[`&.${Ma.disabled}`]:{"&:hover":{boxShadow:"none"}}})),Dge=Ae(Ige,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t,ownerState:e})=>z({[`&.${Ma.valueLabelOpen}`]:{transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:e.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},e.size==="small"&&{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),Bge=Ae("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>cO(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t,ownerState:e,markActive:n})=>z({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})),Fge=Ae("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>cO(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t,ownerState:e,markLabelActive:n})=>z({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})),zge=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${Ee(a)}`,l&&`size${Ee(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${Ee(l)}`,a&&`thumbColor${Ee(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ct(c,Pge,o)},Uge=({children:t})=>t,$ge=P.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,b,y,x,_,w,E,S,A,k,M,I;const B=ht({props:e,name:"MuiSlider"}),O=Ss().direction==="rtl",{"aria-label":C,"aria-valuetext":F,"aria-labelledby":q,component:G="span",components:j={},componentsProps:H={},color:Z="primary",classes:X,className:ee,disableSwap:ve=!1,disabled:oe=!1,getAriaLabel:fe,getAriaValueText:be,marks:Le=!1,max:se=100,min:ue=0,orientation:Te="horizontal",size:ge="medium",step:Me=1,scale:Se=j5,slotProps:D,slots:ie,track:ae="normal",valueLabelDisplay:K="off",valueLabelFormat:W=j5}=B,ne=He(B,Mge),pe=z({},B,{isRtl:O,max:se,min:ue,classes:X,disabled:oe,disableSwap:ve,orientation:Te,marks:Le,color:Z,size:ge,step:Me,scale:Se,track:ae,valueLabelDisplay:K,valueLabelFormat:W}),{axisProps:me,getRootProps:he,getHiddenInputProps:Pe,getThumbProps:Oe,open:de,active:Ce,axis:Ye,focusedThumbIndex:Fe,range:Ve,dragging:Bt,marks:yt,values:Ot,trackOffset:Ge,trackLeap:Pt,getThumbStyle:Xe}=Uce(z({},pe,{rootRef:n}));pe.marked=yt.length>0&&yt.some(hn=>hn.label),pe.dragging=Bt,pe.focusedThumbIndex=Fe;const Ze=zge(pe),Nt=(r=(i=ie==null?void 0:ie.root)!=null?i:j.Root)!=null?r:Lge,zt=(s=(o=ie==null?void 0:ie.rail)!=null?o:j.Rail)!=null?s:kge,pn=(a=(l=ie==null?void 0:ie.track)!=null?l:j.Track)!=null?a:Oge,Dn=(c=(u=ie==null?void 0:ie.thumb)!=null?u:j.Thumb)!=null?c:Nge,Wn=(d=(h=ie==null?void 0:ie.valueLabel)!=null?h:j.ValueLabel)!=null?d:Dge,Jn=(f=(p=ie==null?void 0:ie.mark)!=null?p:j.Mark)!=null?f:Bge,le=(m=(b=ie==null?void 0:ie.markLabel)!=null?b:j.MarkLabel)!=null?m:Fge,_e=(y=(x=ie==null?void 0:ie.input)!=null?x:j.Input)!=null?y:"input",Re=(_=D==null?void 0:D.root)!=null?_:H.root,tt=(w=D==null?void 0:D.rail)!=null?w:H.rail,it=(E=D==null?void 0:D.track)!=null?E:H.track,Ft=(S=D==null?void 0:D.thumb)!=null?S:H.thumb,St=(A=D==null?void 0:D.valueLabel)!=null?A:H.valueLabel,Ct=(k=D==null?void 0:D.mark)!=null?k:H.mark,ft=(M=D==null?void 0:D.markLabel)!=null?M:H.markLabel,Zt=(I=D==null?void 0:D.input)!=null?I:H.input,Tn=Ir({elementType:Nt,getSlotProps:he,externalSlotProps:Re,externalForwardedProps:ne,additionalProps:z({},Age(Nt)&&{as:G}),ownerState:z({},pe,Re==null?void 0:Re.ownerState),className:[Ze.root,ee]}),Mt=Ir({elementType:zt,externalSlotProps:tt,ownerState:pe,className:Ze.rail}),Wt=Ir({elementType:pn,externalSlotProps:it,additionalProps:{style:z({},me[Ye].offset(Ge),me[Ye].leap(Pt))},ownerState:z({},pe,it==null?void 0:it.ownerState),className:Ze.track}),Sn=Ir({elementType:Dn,getSlotProps:Oe,externalSlotProps:Ft,ownerState:z({},pe,Ft==null?void 0:Ft.ownerState),className:Ze.thumb}),ar=Ir({elementType:Wn,externalSlotProps:St,ownerState:z({},pe,St==null?void 0:St.ownerState),className:Ze.valueLabel}),yn=Ir({elementType:Jn,externalSlotProps:Ct,ownerState:pe,className:Ze.mark}),Qr=Ir({elementType:le,externalSlotProps:ft,ownerState:pe,className:Ze.markLabel}),Hs=Ir({elementType:_e,getSlotProps:Pe,externalSlotProps:Zt,ownerState:pe});return J.jsxs(Nt,z({},Tn,{children:[J.jsx(zt,z({},Mt)),J.jsx(pn,z({},Wt)),yt.filter(hn=>hn.value>=ue&&hn.value<=se).map((hn,gn)=>{const $r=Uw(hn.value,ue,se),jr=me[Ye].offset($r);let mr;return ae===!1?mr=Ot.indexOf(hn.value)!==-1:mr=ae==="normal"&&(Ve?hn.value>=Ot[0]&&hn.value<=Ot[Ot.length-1]:hn.value<=Ot[0])||ae==="inverted"&&(Ve?hn.value<=Ot[0]||hn.value>=Ot[Ot.length-1]:hn.value>=Ot[0]),J.jsxs(P.Fragment,{children:[J.jsx(Jn,z({"data-index":gn},yn,!Yu(Jn)&&{markActive:mr},{style:z({},jr,yn.style),className:ze(yn.className,mr&&Ze.markActive)})),hn.label!=null?J.jsx(le,z({"aria-hidden":!0,"data-index":gn},Qr,!Yu(le)&&{markLabelActive:mr},{style:z({},jr,Qr.style),className:ze(Ze.markLabel,Qr.className,mr&&Ze.markLabelActive),children:hn.label})):null]},gn)}),Ot.map((hn,gn)=>{const $r=Uw(hn,ue,se),jr=me[Ye].offset($r),mr=K==="off"?Uge:Wn;return J.jsx(mr,z({},!Yu(mr)&&{valueLabelFormat:W,valueLabelDisplay:K,value:typeof W=="function"?W(Se(hn),gn):W,index:gn,open:de===gn||Ce===gn||K==="on",disabled:oe},ar,{children:J.jsx(Dn,z({"data-index":gn},Sn,{className:ze(Ze.thumb,Sn.className,Ce===gn&&Ze.active,Fe===gn&&Ze.focusVisible),style:z({},jr,Xe(gn),Sn.style),children:J.jsx(_e,z({"data-index":gn,"aria-label":fe?fe(gn):C,"aria-valuenow":Se(hn),"aria-labelledby":q,"aria-valuetext":be?be(Se(hn),gn):F,value:Ot[gn]},Hs))}))}),gn)})]}))}),rb=$ge,jge=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Gge={entering:{transform:"none"},entered:{transform:"none"}},Hge=P.forwardRef(function(e,n){const r=Ss(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:m,style:b,timeout:y=i,TransitionComponent:x=nS}=e,_=He(e,jge),w=P.useRef(null),E=$n(w,a.ref,n),S=C=>F=>{if(C){const q=w.current;F===void 0?C(q):C(q,F)}},A=S(h),k=S((C,F)=>{hO(C);const q=id({style:b,timeout:y,easing:l},{mode:"enter"});C.style.webkitTransition=r.transitions.create("transform",q),C.style.transition=r.transitions.create("transform",q),u&&u(C,F)}),M=S(d),I=S(m),B=S(C=>{const F=id({style:b,timeout:y,easing:l},{mode:"exit"});C.style.webkitTransition=r.transitions.create("transform",F),C.style.transition=r.transitions.create("transform",F),f&&f(C)}),R=S(p),O=C=>{s&&s(w.current,C)};return J.jsx(x,z({appear:o,in:c,nodeRef:w,onEnter:k,onEntered:M,onEntering:A,onExit:B,onExited:R,onExiting:I,addEndListener:O,timeout:y},_,{children:(C,F)=>P.cloneElement(a,z({style:z({transform:"scale(0)",visibility:C==="exited"&&!c?"hidden":void 0},Gge[C],b,a.props.style),ref:E},F))}))}),Vge=Hge;function Wge(t){return ut("MuiSpeedDial",t)}const Xge=st("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),K1=Xge,Yge=["ref"],qge=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],Kge=["ref"],Zge=t=>{const{classes:e,open:n,direction:r}=t,i={root:["root",`direction${Ee(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return ct(i,Wge,e)};function Zm(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const ou=32,Z1=16,Qge=Ae("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`direction${Ee(n.direction)}`]]}})(({theme:t,ownerState:e})=>z({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},e.direction==="up"&&{flexDirection:"column-reverse",[`& .${K1.actions}`]:{flexDirection:"column-reverse",marginBottom:-ou,paddingBottom:Z1+ou}},e.direction==="down"&&{flexDirection:"column",[`& .${K1.actions}`]:{flexDirection:"column",marginTop:-ou,paddingTop:Z1+ou}},e.direction==="left"&&{flexDirection:"row-reverse",[`& .${K1.actions}`]:{flexDirection:"row-reverse",marginRight:-ou,paddingRight:Z1+ou}},e.direction==="right"&&{flexDirection:"row",[`& .${K1.actions}`]:{flexDirection:"row",marginLeft:-ou,paddingLeft:Z1+ou}})),Jge=Ae(PW,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,e)=>e.fab})(()=>({pointerEvents:"auto"})),eme=Ae("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.actions,!n.open&&e.actionsClosed]}})(({ownerState:t})=>z({display:"flex",pointerEvents:"auto"},!t.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),tme=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiSpeedDial"}),i=Ss(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:o,FabProps:{ref:a}={},children:l,className:c,direction:u="up",hidden:d=!1,icon:h,onBlur:f,onClose:p,onFocus:m,onKeyDown:b,onMouseEnter:y,onMouseLeave:x,onOpen:_,open:w,TransitionComponent:E=Vge,transitionDuration:S=s,TransitionProps:A}=r,k=He(r.FabProps,Yge),M=He(r,qge),[I,B]=Fh({controlled:w,default:!1,name:"SpeedDial",state:"open"}),R=z({},r,{open:I,direction:u}),O=Zge(R),C=P.useRef();P.useEffect(()=>()=>{clearTimeout(C.current)},[]);const F=P.useRef(0),q=P.useRef(),G=P.useRef([]);G.current=[G.current[0]];const j=P.useCallback(se=>{G.current[0]=se},[]),H=$n(a,j),Z=(se,ue)=>Te=>{G.current[se+1]=Te,ue&&ue(Te)},X=se=>{b&&b(se);const ue=se.key.replace("Arrow","").toLowerCase(),{current:Te=ue}=q;if(se.key==="Escape"){B(!1),G.current[0].focus(),p&&p(se,"escapeKeyDown");return}if(Zm(ue)===Zm(Te)&&Zm(ue)!==void 0){se.preventDefault();const ge=ue===Te?1:-1,Me=nh(F.current+ge,0,G.current.length-1);G.current[Me].focus(),F.current=Me,q.current=Te}};P.useEffect(()=>{I||(F.current=0,q.current=void 0)},[I]);const ee=se=>{se.type==="mouseleave"&&x&&x(se),se.type==="blur"&&f&&f(se),clearTimeout(C.current),se.type==="blur"?C.current=setTimeout(()=>{B(!1),p&&p(se,"blur")}):(B(!1),p&&p(se,"mouseLeave"))},ve=se=>{k.onClick&&k.onClick(se),clearTimeout(C.current),I?(B(!1),p&&p(se,"toggle")):(B(!0),_&&_(se,"toggle"))},oe=se=>{se.type==="mouseenter"&&y&&y(se),se.type==="focus"&&m&&m(se),clearTimeout(C.current),I||(C.current=setTimeout(()=>{B(!0),_&&_(se,{focus:"focus",mouseenter:"mouseEnter"}[se.type])}))},fe=o.replace(/^[^a-z]+|[^\w:.-]+/gi,""),be=P.Children.toArray(l).filter(se=>P.isValidElement(se)),Le=be.map((se,ue)=>{const Te=se.props,{FabProps:{ref:ge}={},tooltipPlacement:Me}=Te,Se=He(Te.FabProps,Kge),D=Me||(Zm(u)==="vertical"?"left":"top");return P.cloneElement(se,{FabProps:z({},Se,{ref:Z(ue,ge)}),delay:30*(I?ue:be.length-ue),open:I,tooltipPlacement:D,id:`${fe}-action-${ue}`})});return J.jsxs(Qge,z({className:ze(O.root,c),ref:n,role:"presentation",onKeyDown:X,onBlur:ee,onFocus:oe,onMouseEnter:oe,onMouseLeave:ee,ownerState:R},M,{children:[J.jsx(E,z({in:!d,timeout:S,unmountOnExit:!0},A,{children:J.jsx(Jge,z({color:"primary","aria-label":o,"aria-haspopup":"true","aria-expanded":I,"aria-controls":`${fe}-actions`},k,{onClick:ve,className:ze(O.fab,k.className),ref:H,ownerState:R,children:P.isValidElement(h)&&Gp(h,["SpeedDialIcon"])?P.cloneElement(h,{open:I}):h}))})),J.jsx(eme,{id:`${fe}-actions`,role:"menu","aria-orientation":Zm(u),className:ze(O.actions,!I&&O.actionsClosed),ownerState:R,children:Le})]}))}),VW=tme;function nme(t){return ut("MuiTooltip",t)}const rme=st("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ou=rme,ime=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function sme(t){return Math.round(t*1e5)/1e5}const ome=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Ee(s.split("-")[0])}`],arrow:["arrow"]};return ct(o,nme,e)},ame=Ae(_O,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>z({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ou.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ou.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ou.arrow}`]:z({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ou.arrow}`]:z({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),lme=Ae("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Ee(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>z({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:nn(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${sme(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Ou.popper}[data-popper-placement*="left"] &`]:z({transformOrigin:"right center"},e.isRtl?z({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):z({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ou.popper}[data-popper-placement*="right"] &`]:z({transformOrigin:"left center"},e.isRtl?z({marginRight:"14px"},e.touch&&{marginRight:"24px"}):z({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ou.popper}[data-popper-placement*="top"] &`]:z({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ou.popper}[data-popper-placement*="bottom"] &`]:z({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),cme=Ae("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:nn(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Q1=!1,WA=null,Qm={x:0,y:0};function J1(t,e){return n=>{e&&e(n),t(n)}}const ume=P.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,b,y,x,_,w,E;const S=ht({props:e,name:"MuiTooltip"}),{arrow:A=!1,children:k,components:M={},componentsProps:I={},describeChild:B=!1,disableFocusListener:R=!1,disableHoverListener:O=!1,disableInteractive:C=!1,disableTouchListener:F=!1,enterDelay:q=100,enterNextDelay:G=0,enterTouchDelay:j=700,followCursor:H=!1,id:Z,leaveDelay:X=0,leaveTouchDelay:ee=1500,onClose:ve,onOpen:oe,open:fe,placement:be="bottom",PopperComponent:Le,PopperProps:se={},slotProps:ue={},slots:Te={},title:ge,TransitionComponent:Me=jw,TransitionProps:Se}=S,D=He(S,ime),ie=P.isValidElement(k)?k:J.jsx("span",{children:k}),ae=Ss(),K=ae.direction==="rtl",[W,ne]=P.useState(),[pe,me]=P.useState(null),he=P.useRef(!1),Pe=C||H,Oe=P.useRef(),de=P.useRef(),Ce=P.useRef(),Ye=P.useRef(),[Fe,Ve]=Fh({controlled:fe,default:!1,name:"Tooltip",state:"open"});let Bt=Fe;const yt=Qg(Z),Ot=P.useRef(),Ge=P.useCallback(()=>{Ot.current!==void 0&&(document.body.style.WebkitUserSelect=Ot.current,Ot.current=void 0),clearTimeout(Ye.current)},[]);P.useEffect(()=>()=>{clearTimeout(Oe.current),clearTimeout(de.current),clearTimeout(Ce.current),Ge()},[Ge]);const Pt=Ht=>{clearTimeout(WA),Q1=!0,Ve(!0),oe&&!Bt&&oe(Ht)},Xe=Yr(Ht=>{clearTimeout(WA),WA=setTimeout(()=>{Q1=!1},800+X),Ve(!1),ve&&Bt&&ve(Ht),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{he.current=!1},ae.transitions.duration.shortest)}),Ze=Ht=>{he.current&&Ht.type!=="touchstart"||(W&&W.removeAttribute("title"),clearTimeout(de.current),clearTimeout(Ce.current),q||Q1&&G?de.current=setTimeout(()=>{Pt(Ht)},Q1?G:q):Pt(Ht))},Nt=Ht=>{clearTimeout(de.current),clearTimeout(Ce.current),Ce.current=setTimeout(()=>{Xe(Ht)},X)},{isFocusVisibleRef:zt,onBlur:pn,onFocus:Dn,ref:Wn}=jT(),[,Jn]=P.useState(!1),le=Ht=>{pn(Ht),zt.current===!1&&(Jn(!1),Nt(Ht))},_e=Ht=>{W||ne(Ht.currentTarget),Dn(Ht),zt.current===!0&&(Jn(!0),Ze(Ht))},Re=Ht=>{he.current=!0;const Yt=ie.props;Yt.onTouchStart&&Yt.onTouchStart(Ht)},tt=Ze,it=Nt,Ft=Ht=>{Re(Ht),clearTimeout(Ce.current),clearTimeout(Oe.current),Ge(),Ot.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ye.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ot.current,Ze(Ht)},j)},St=Ht=>{ie.props.onTouchEnd&&ie.props.onTouchEnd(Ht),Ge(),clearTimeout(Ce.current),Ce.current=setTimeout(()=>{Xe(Ht)},ee)};P.useEffect(()=>{if(!Bt)return;function Ht(Yt){(Yt.key==="Escape"||Yt.key==="Esc")&&Xe(Yt)}return document.addEventListener("keydown",Ht),()=>{document.removeEventListener("keydown",Ht)}},[Xe,Bt]);const Ct=$n(ie.ref,Wn,ne,n);!ge&&ge!==0&&(Bt=!1);const ft=P.useRef(),Zt=Ht=>{const Yt=ie.props;Yt.onMouseMove&&Yt.onMouseMove(Ht),Qm={x:Ht.clientX,y:Ht.clientY},ft.current&&ft.current.update()},Tn={},Mt=typeof ge=="string";B?(Tn.title=!Bt&&Mt&&!O?ge:null,Tn["aria-describedby"]=Bt?yt:null):(Tn["aria-label"]=Mt?ge:null,Tn["aria-labelledby"]=Bt&&!Mt?yt:null);const Wt=z({},Tn,D,ie.props,{className:ze(D.className,ie.props.className),onTouchStart:Re,ref:Ct},H?{onMouseMove:Zt}:{}),Sn={};F||(Wt.onTouchStart=Ft,Wt.onTouchEnd=St),O||(Wt.onMouseOver=J1(tt,Wt.onMouseOver),Wt.onMouseLeave=J1(it,Wt.onMouseLeave),Pe||(Sn.onMouseOver=tt,Sn.onMouseLeave=it)),R||(Wt.onFocus=J1(_e,Wt.onFocus),Wt.onBlur=J1(le,Wt.onBlur),Pe||(Sn.onFocus=_e,Sn.onBlur=le));const ar=P.useMemo(()=>{var Ht;let Yt=[{name:"arrow",enabled:!!pe,options:{element:pe,padding:4}}];return(Ht=se.popperOptions)!=null&&Ht.modifiers&&(Yt=Yt.concat(se.popperOptions.modifiers)),z({},se.popperOptions,{modifiers:Yt})},[pe,se]),yn=z({},S,{isRtl:K,arrow:A,disableInteractive:Pe,placement:be,PopperComponentProp:Le,touch:he.current}),Qr=ome(yn),Hs=(r=(i=Te.popper)!=null?i:M.Popper)!=null?r:ame,hn=(s=(o=(a=Te.transition)!=null?a:M.Transition)!=null?o:Me)!=null?s:jw,gn=(l=(c=Te.tooltip)!=null?c:M.Tooltip)!=null?l:lme,$r=(u=(d=Te.arrow)!=null?d:M.Arrow)!=null?u:cme,jr=P0(Hs,z({},se,(h=ue.popper)!=null?h:I.popper,{className:ze(Qr.popper,se==null?void 0:se.className,(f=(p=ue.popper)!=null?p:I.popper)==null?void 0:f.className)}),yn),mr=P0(hn,z({},Se,(m=ue.transition)!=null?m:I.transition),yn),Vs=P0(gn,z({},(b=ue.tooltip)!=null?b:I.tooltip,{className:ze(Qr.tooltip,(y=(x=ue.tooltip)!=null?x:I.tooltip)==null?void 0:y.className)}),yn),ss=P0($r,z({},(_=ue.arrow)!=null?_:I.arrow,{className:ze(Qr.arrow,(w=(E=ue.arrow)!=null?E:I.arrow)==null?void 0:w.className)}),yn);return J.jsxs(P.Fragment,{children:[P.cloneElement(ie,Wt),J.jsx(Hs,z({as:Le??_O,placement:be,anchorEl:H?{getBoundingClientRect:()=>({top:Qm.y,left:Qm.x,right:Qm.x,bottom:Qm.y,width:0,height:0})}:W,popperRef:ft,open:W?Bt:!1,id:yt,transition:!0},Sn,jr,{popperOptions:ar,children:({TransitionProps:Ht})=>J.jsx(hn,z({timeout:ae.transitions.duration.shorter},Ht,mr,{children:J.jsxs(gn,z({},Vs,{children:[ge,A?J.jsx($r,z({},ss,{ref:me})):null]}))}))}))]})}),bg=ume;function dme(t){return ut("MuiSpeedDialAction",t)}const hme=st("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),fme=hme,pme=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],gme=t=>{const{open:e,tooltipPlacement:n,classes:r}=t,i={fab:["fab",!e&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Ee(n)}`,!e&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ct(i,dme,r)},mme=Ae(PW,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.fab,!n.open&&e.fabClosed]}})(({theme:t,ownerState:e})=>z({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:uoe(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!e.open&&{opacity:0,transform:"scale(0)"})),vme=Ae("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.staticTooltip,!n.open&&e.staticTooltipClosed,e[`tooltipPlacement${Ee(n.tooltipPlacement)}`]]}})(({theme:t,ownerState:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${fme.staticTooltipLabel}`]:z({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},!e.open&&{opacity:0,transform:"scale(0.5)"},e.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},e.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),yme=Ae("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,e)=>e.staticTooltipLabel})(({theme:t})=>z({position:"absolute"},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),bme=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiSpeedDialAction"}),{className:i,delay:s=0,FabProps:o={},icon:a,id:l,open:c,TooltipClasses:u,tooltipOpen:d=!1,tooltipPlacement:h="left",tooltipTitle:f}=r,p=He(r,pme),m=z({},r,{tooltipPlacement:h}),b=gme(m),[y,x]=P.useState(d),_=()=>{x(!1)},w=()=>{x(!0)},E={transitionDelay:`${s}ms`},S=J.jsx(mme,z({size:"small",className:ze(b.fab,i),tabIndex:-1,role:"menuitem",ownerState:m},o,{style:z({},E,o.style),children:a}));return d?J.jsxs(vme,z({id:l,ref:n,className:b.staticTooltip,ownerState:m},p,{children:[J.jsx(yme,{style:E,id:`${l}-label`,className:b.staticTooltipLabel,ownerState:m,children:f}),P.cloneElement(S,{"aria-labelledby":`${l}-label`})]})):(!c&&y&&x(!1),J.jsx(bg,z({id:l,ref:n,title:f,placement:h,onClose:_,onOpen:w,open:c&&y,classes:u},p,{children:S})))}),WW=bme,_me=vt(J.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function xme(t){return ut("MuiSpeedDialIcon",t)}const wme=st("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),Nd=wme,Eme=["className","icon","open","openIcon"],Tme=t=>{const{classes:e,open:n,openIcon:r}=t;return ct({root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]},xme,e)},Sme=Ae("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Nd.icon}`]:e.icon},{[`& .${Nd.icon}`]:n.open&&e.iconOpen},{[`& .${Nd.icon}`]:n.open&&n.openIcon&&e.iconWithOpenIconOpen},{[`& .${Nd.openIcon}`]:e.openIcon},{[`& .${Nd.openIcon}`]:n.open&&e.openIconOpen},e.root]}})(({theme:t,ownerState:e})=>({height:24,[`& .${Nd.icon}`]:z({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short})},e.open&&z({transform:"rotate(45deg)"},e.openIcon&&{opacity:0})),[`& .${Nd.openIcon}`]:z({position:"absolute",transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},e.open&&{transform:"rotate(0deg)",opacity:1})})),XW=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiSpeedDialIcon"}),{className:i,icon:s,openIcon:o}=r,a=He(r,Eme),l=r,c=Tme(l);function u(d,h){return P.isValidElement(d)?P.cloneElement(d,{className:h}):d}return J.jsxs(Sme,z({className:ze(c.root,i),ref:n,ownerState:l},a,{children:[o?u(o,c.openIcon):null,s?u(s,c.icon):J.jsx(_me,{className:c.icon})]}))});XW.muiName="SpeedDialIcon";const YW=XW,Cme=P.createContext({}),ib=Cme,Ame=P.createContext({}),uS=Ame;function Pme(t){return ut("MuiStep",t)}st("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Rme=["active","children","className","component","completed","disabled","expanded","index","last"],Ime=t=>{const{classes:e,orientation:n,alternativeLabel:r,completed:i}=t;return ct({root:["root",n,r&&"alternativeLabel",i&&"completed"]},Pme,e)},Mme=Ae("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>z({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),Lme=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiStep"}),{active:i,children:s,className:o,component:a="div",completed:l,disabled:c,expanded:u=!1,index:d,last:h}=r,f=He(r,Rme),{activeStep:p,connector:m,alternativeLabel:b,orientation:y,nonLinear:x}=P.useContext(ib);let[_=!1,w=!1,E=!1]=[i,l,c];p===d?_=i!==void 0?i:!0:!x&&p>d?w=l!==void 0?l:!0:!x&&p<d&&(E=c!==void 0?c:!0);const S=P.useMemo(()=>({index:d,last:h,expanded:u,icon:d+1,active:_,completed:w,disabled:E}),[d,h,u,_,w,E]),A=z({},r,{active:_,orientation:y,alternativeLabel:b,completed:w,disabled:E,expanded:u,component:a}),k=Ime(A),M=J.jsxs(Mme,z({as:a,className:ze(k.root,o),ref:n,ownerState:A},f,{children:[m&&b&&d!==0?m:null,s]}));return J.jsx(uS.Provider,{value:S,children:m&&!b&&d!==0?J.jsxs(P.Fragment,{children:[m,M]}):M})}),kme=Lme,Ome=vt(J.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Nme=vt(J.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Dme(t){return ut("MuiStepIcon",t)}const Bme=st("MuiStepIcon",["root","active","completed","error","text"]),XA=Bme;var G5;const Fme=["active","className","completed","error","icon"],zme=t=>{const{classes:e,active:n,completed:r,error:i}=t;return ct({root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]},Dme,e)},YA=Ae(Jv,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${XA.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${XA.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${XA.error}`]:{color:(t.vars||t).palette.error.main}})),Ume=Ae("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,e)=>e.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),$me=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:o=!1,error:a=!1,icon:l}=r,c=He(r,Fme),u=z({},r,{active:i,completed:o,error:a}),d=zme(u);if(typeof l=="number"||typeof l=="string"){const h=ze(s,d.root);return a?J.jsx(YA,z({as:Nme,className:h,ref:n,ownerState:u},c)):o?J.jsx(YA,z({as:Ome,className:h,ref:n,ownerState:u},c)):J.jsxs(YA,z({className:h,ref:n,ownerState:u},c,{children:[G5||(G5=J.jsx("circle",{cx:"12",cy:"12",r:"12"})),J.jsx(Ume,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:l})]}))}return l}),jme=$me;function Gme(t){return ut("MuiStepLabel",t)}const Hme=st("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Nu=Hme,Vme=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Wme=t=>{const{classes:e,orientation:n,active:r,completed:i,error:s,disabled:o,alternativeLabel:a}=t;return ct({root:["root",n,s&&"error",o&&"disabled",a&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],labelContainer:["labelContainer",a&&"alternativeLabel"]},Gme,e)},Xme=Ae("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation]]}})(({ownerState:t})=>z({display:"flex",alignItems:"center",[`&.${Nu.alternativeLabel}`]:{flexDirection:"column"},[`&.${Nu.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Yme=Ae("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t})=>z({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${Nu.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${Nu.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${Nu.alternativeLabel}`]:{marginTop:16},[`&.${Nu.error}`]:{color:(t.vars||t).palette.error.main}})),qme=Ae("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,e)=>e.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${Nu.alternativeLabel}`]:{paddingRight:0}})),Kme=Ae("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,e)=>e.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${Nu.alternativeLabel}`]:{textAlign:"center"}})),qW=P.forwardRef(function(e,n){var r;const i=ht({props:e,name:"MuiStepLabel"}),{children:s,className:o,componentsProps:a={},error:l=!1,icon:c,optional:u,slotProps:d={},StepIconComponent:h,StepIconProps:f}=i,p=He(i,Vme),{alternativeLabel:m,orientation:b}=P.useContext(ib),{active:y,disabled:x,completed:_,icon:w}=P.useContext(uS),E=c||w;let S=h;E&&!S&&(S=jme);const A=z({},i,{active:y,alternativeLabel:m,completed:_,disabled:x,error:l,orientation:b}),k=Wme(A),M=(r=d.label)!=null?r:a.label;return J.jsxs(Xme,z({className:ze(k.root,o),ref:n,ownerState:A},p,{children:[E||S?J.jsx(qme,{className:k.iconContainer,ownerState:A,children:J.jsx(S,z({completed:_,active:y,error:l,icon:E},f))}):null,J.jsxs(Kme,{className:k.labelContainer,ownerState:A,children:[s?J.jsx(Yme,z({ownerState:A},M,{className:ze(k.label,M==null?void 0:M.className),children:s})):null,u]})]}))});qW.muiName="StepLabel";const Zme=qW;function Qme(t){return ut("MuiStepButton",t)}const Jme=st("MuiStepButton",["root","horizontal","vertical","touchRipple"]),H5=Jme,e0e=["children","className","icon","optional"],t0e=t=>{const{classes:e,orientation:n}=t;return ct({root:["root",n],touchRipple:["touchRipple"]},Qme,e)},n0e=Ae(sa,{name:"MuiStepButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${H5.touchRipple}`]:e.touchRipple},e.root,e[n.orientation]]}})(({ownerState:t})=>z({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},t.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${H5.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),r0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiStepButton"}),{children:i,className:s,icon:o,optional:a}=r,l=He(r,e0e),{disabled:c,active:u}=P.useContext(uS),{orientation:d}=P.useContext(ib),h=z({},r,{orientation:d}),f=t0e(h),p={icon:o,optional:a},m=Gp(i,["StepLabel"])?P.cloneElement(i,p):J.jsx(Zme,z({},p,{children:i}));return J.jsx(n0e,z({focusRipple:!0,disabled:c,TouchRippleProps:{className:f.touchRipple},className:ze(f.root,s),ref:n,ownerState:h,"aria-current":u?"step":void 0},l,{children:m}))}),i0e=r0e;function s0e(t){return ut("MuiStepConnector",t)}st("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const o0e=["className"],a0e=t=>{const{classes:e,orientation:n,alternativeLabel:r,active:i,completed:s,disabled:o}=t,a={root:["root",n,r&&"alternativeLabel",i&&"active",s&&"completed",o&&"disabled"],line:["line",`line${Ee(n)}`]};return ct(a,s0e,e)},l0e=Ae("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>z({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),c0e=Ae("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.line,e[`line${Ee(n.orientation)}`]]}})(({ownerState:t,theme:e})=>{const n=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return z({display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:n},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),u0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiStepConnector"}),{className:i}=r,s=He(r,o0e),{alternativeLabel:o,orientation:a="horizontal"}=P.useContext(ib),{active:l,disabled:c,completed:u}=P.useContext(uS),d=z({},r,{alternativeLabel:o,orientation:a,active:l,completed:u,disabled:c}),h=a0e(d);return J.jsx(l0e,z({className:ze(h.root,i),ref:n,ownerState:d},s,{children:J.jsx(c0e,{className:h.line,ownerState:d})}))}),d0e=u0e;function h0e(t){return ut("MuiStepper",t)}st("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const f0e=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],p0e=t=>{const{orientation:e,alternativeLabel:n,classes:r}=t;return ct({root:["root",e,n&&"alternativeLabel"]},h0e,r)},g0e=Ae("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel]}})(({ownerState:t})=>z({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),m0e=J.jsx(d0e,{}),v0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:o,className:a,component:l="div",connector:c=m0e,nonLinear:u=!1,orientation:d="horizontal"}=r,h=He(r,f0e),f=z({},r,{alternativeLabel:s,orientation:d,component:l}),p=p0e(f),m=P.Children.toArray(o).filter(Boolean),b=m.map((x,_)=>P.cloneElement(x,z({index:_,last:_+1===m.length},x.props))),y=P.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:c,nonLinear:u,orientation:d}),[i,s,c,u,d]);return J.jsx(ib.Provider,{value:y,children:J.jsx(g0e,z({as:l,ownerState:f,className:ze(p.root,a),ref:n},h,{children:b}))})}),y0e=v0e;function b0e(t){return ut("MuiTab",t)}const _0e=st("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Dd=_0e,x0e=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],w0e=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:s,label:o,selected:a,disabled:l}=t,c={root:["root",s&&o&&"labelIcon",`textColor${Ee(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return ct(c,b0e,e)},E0e=Ae(sa,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${Ee(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>z({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Dd.iconWrapper}`]:z({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Dd.selected}`]:{opacity:1},[`&.${Dd.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Dd.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Dd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Dd.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Dd.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),T0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:o=!1,fullWidth:a,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:f,onFocus:p,selected:m,selectionFollowsFocus:b,textColor:y="inherit",value:x,wrapped:_=!1}=r,w=He(r,x0e),E=z({},r,{disabled:s,disableFocusRipple:o,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:a,textColor:y,wrapped:_}),S=w0e(E),A=l&&d&&P.isValidElement(l)?P.cloneElement(l,{className:ze(S.iconWrapper,l.props.className)}):l,k=I=>{!m&&h&&h(I,x),f&&f(I)},M=I=>{b&&!m&&h&&h(I,x),p&&p(I)};return J.jsxs(E0e,z({focusRipple:!o,className:ze(S.root,i),ref:n,role:"tab","aria-selected":m,disabled:s,onClick:k,onFocus:M,ownerState:E,tabIndex:m?0:-1},w,{children:[c==="top"||c==="start"?J.jsxs(P.Fragment,{children:[A,d]}):J.jsxs(P.Fragment,{children:[d,A]}),u]}))}),V5=T0e,S0e=P.createContext(),KW=S0e;function C0e(t){return ut("MuiTable",t)}st("MuiTable",["root","stickyHeader"]);const A0e=["className","component","padding","size","stickyHeader"],P0e=t=>{const{classes:e,stickyHeader:n}=t;return ct({root:["root",n&&"stickyHeader"]},C0e,e)},R0e=Ae("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>z({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":z({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),W5="table",I0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTable"}),{className:i,component:s=W5,padding:o="normal",size:a="medium",stickyHeader:l=!1}=r,c=He(r,A0e),u=z({},r,{component:s,padding:o,size:a,stickyHeader:l}),d=P0e(u),h=P.useMemo(()=>({padding:o,size:a,stickyHeader:l}),[o,a,l]);return J.jsx(KW.Provider,{value:h,children:J.jsx(R0e,z({as:s,role:s===W5?null:"table",ref:n,className:ze(d.root,i),ownerState:u},c))})}),RO=I0e,M0e=P.createContext(),dS=M0e;function L0e(t){return ut("MuiTableBody",t)}st("MuiTableBody",["root"]);const k0e=["className","component"],O0e=t=>{const{classes:e}=t;return ct({root:["root"]},L0e,e)},N0e=Ae("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),D0e={variant:"body"},X5="tbody",B0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTableBody"}),{className:i,component:s=X5}=r,o=He(r,k0e),a=z({},r,{component:s}),l=O0e(a);return J.jsx(dS.Provider,{value:D0e,children:J.jsx(N0e,z({className:ze(l.root,i),as:s,ref:n,role:s===X5?null:"rowgroup",ownerState:a},o))})}),IO=B0e;function F0e(t){return ut("MuiTableCell",t)}const z0e=st("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),U0e=z0e,$0e=["align","className","component","padding","scope","size","sortDirection","variant"],j0e=t=>{const{classes:e,variant:n,align:r,padding:i,size:s,stickyHeader:o}=t,a={root:["root",n,o&&"stickyHeader",r!=="inherit"&&`align${Ee(r)}`,i!=="normal"&&`padding${Ee(i)}`,`size${Ee(s)}`]};return ct(a,F0e,e)},G0e=Ae("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Ee(n.size)}`],n.padding!=="normal"&&e[`padding${Ee(n.padding)}`],n.align!=="inherit"&&e[`align${Ee(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>z({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?Jy(nn(t.palette.divider,1),.88):Qy(nn(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${U0e.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),H0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:o,padding:a,scope:l,size:c,sortDirection:u,variant:d}=r,h=He(r,$0e),f=P.useContext(KW),p=P.useContext(dS),m=p&&p.variant==="head";let b;o?b=o:b=m?"th":"td";let y=l;b==="td"?y=void 0:!y&&m&&(y="col");const x=d||p&&p.variant,_=z({},r,{align:i,component:b,padding:a||(f&&f.padding?f.padding:"normal"),size:c||(f&&f.size?f.size:"medium"),sortDirection:u,stickyHeader:x==="head"&&f&&f.stickyHeader,variant:x}),w=j0e(_);let E=null;return u&&(E=u==="asc"?"ascending":"descending"),J.jsx(G0e,z({as:b,ref:n,className:ze(w.root,s),"aria-sort":E,scope:y,ownerState:_},h))}),qn=H0e;function V0e(t){return ut("MuiTableContainer",t)}st("MuiTableContainer",["root"]);const W0e=["className","component"],X0e=t=>{const{classes:e}=t;return ct({root:["root"]},V0e,e)},Y0e=Ae("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,e)=>e.root})({width:"100%",overflowX:"auto"}),q0e=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTableContainer"}),{className:i,component:s="div"}=r,o=He(r,W0e),a=z({},r,{component:s}),l=X0e(a);return J.jsx(Y0e,z({ref:n,as:s,className:ze(l.root,i),ownerState:a},o))}),ZW=q0e;function K0e(t){return ut("MuiTableHead",t)}st("MuiTableHead",["root"]);const Z0e=["className","component"],Q0e=t=>{const{classes:e}=t;return ct({root:["root"]},K0e,e)},J0e=Ae("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),eve={variant:"head"},Y5="thead",tve=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTableHead"}),{className:i,component:s=Y5}=r,o=He(r,Z0e),a=z({},r,{component:s}),l=Q0e(a);return J.jsx(dS.Provider,{value:eve,children:J.jsx(J0e,z({as:s,className:ze(l.root,i),ref:n,role:s===Y5?null:"rowgroup",ownerState:a},o))})}),MO=tve,nve=vt(J.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),rve=vt(J.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function ive(t){return ut("MuiTableRow",t)}const sve=st("MuiTableRow",["root","selected","hover","head","footer"]),q5=sve,ove=["className","component","hover","selected"],ave=t=>{const{classes:e,selected:n,hover:r,head:i,footer:s}=t;return ct({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},ive,e)},lve=Ae("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${q5.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${q5.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:nn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:nn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),K5="tr",cve=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTableRow"}),{className:i,component:s=K5,hover:o=!1,selected:a=!1}=r,l=He(r,ove),c=P.useContext(dS),u=z({},r,{component:s,hover:o,selected:a,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),d=ave(u);return J.jsx(lve,z({as:s,ref:n,className:ze(d.root,i),role:s===K5?null:"row",ownerState:u},l))}),_g=cve;function uve(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function dve(t,e,n,r={},i=()=>{}){const{ease:s=uve,duration:o=300}=r;let a=null;const l=e[t];let c=!1;const u=()=>{c=!0},d=h=>{if(c){i(new Error("Animation cancelled"));return}a===null&&(a=h);const f=Math.min(1,(h-a)/o);if(e[t]=s(f)*(n-l)+l,f>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const hve=["onChange"],fve={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function pve(t){const{onChange:e}=t,n=He(t,hve),r=P.useRef(),i=P.useRef(null),s=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return _s(()=>{const o=Ky(()=>{const l=r.current;s(),l!==r.current&&e(r.current)}),a=Nl(i.current);return a.addEventListener("resize",o),()=>{o.clear(),a.removeEventListener("resize",o)}},[e]),P.useEffect(()=>{s(),e(r.current)},[e]),J.jsx("div",z({style:fve,ref:i},n))}function gve(t){return ut("MuiTabScrollButton",t)}const mve=st("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),vve=mve,yve=["className","slots","slotProps","direction","orientation","disabled"],bve=t=>{const{classes:e,orientation:n,disabled:r}=t;return ct({root:["root",n,r&&"disabled"]},gve,e)},_ve=Ae(sa,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>z({width:40,flexShrink:0,opacity:.8,[`&.${vve.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),xve=P.forwardRef(function(e,n){var r,i;const s=ht({props:e,name:"MuiTabScrollButton"}),{className:o,slots:a={},slotProps:l={},direction:c}=s,u=He(s,yve),h=Ss().direction==="rtl",f=z({isRtl:h},s),p=bve(f),m=(r=a.StartScrollButtonIcon)!=null?r:nve,b=(i=a.EndScrollButtonIcon)!=null?i:rve,y=Ir({elementType:m,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),x=Ir({elementType:b,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return J.jsx(_ve,z({component:"div",className:ze(p.root,o),ref:n,role:null,ownerState:f,tabIndex:null},u,{children:c==="left"?J.jsx(m,z({},y)):J.jsx(b,z({},x))}))}),wve=xve;function Eve(t){return ut("MuiTabs",t)}const Tve=st("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),qA=Tve,Sve=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Z5=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,Q5=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,e_=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=n(t,i);else{i.focus();return}}},Cve=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:s,centered:o,scrollButtonsHideMobile:a,classes:l}=t;return ct({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},Eve,l)},Ave=Ae("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${qA.scrollButtons}`]:e.scrollButtons},{[`& .${qA.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>z({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${qA.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),Pve=Ae("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>z({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Rve=Ae("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>z({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),Ive=Ae("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>z({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),Mve=Ae(pve)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),J5={},Lve=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTabs"}),i=Ss(),s=i.direction==="rtl",{"aria-label":o,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:f=!1,indicatorColor:p="primary",onChange:m,orientation:b="horizontal",ScrollButtonComponent:y=wve,scrollButtons:x="auto",selectionFollowsFocus:_,slots:w={},slotProps:E={},TabIndicatorProps:S={},TabScrollButtonProps:A={},textColor:k="primary",value:M,variant:I="standard",visibleScrollbar:B=!1}=r,R=He(r,Sve),O=I==="scrollable",C=b==="vertical",F=C?"scrollTop":"scrollLeft",q=C?"top":"left",G=C?"bottom":"right",j=C?"clientHeight":"clientWidth",H=C?"height":"width",Z=z({},r,{component:h,allowScrollButtonsMobile:f,indicatorColor:p,orientation:b,vertical:C,scrollButtons:x,textColor:k,variant:I,visibleScrollbar:B,fixed:!O,hideScrollbar:O&&!B,scrollableX:O&&!C,scrollableY:O&&C,centered:c&&!O,scrollButtonsHideMobile:!f}),X=Cve(Z),ee=Ir({elementType:w.StartScrollButtonIcon,externalSlotProps:E.startScrollButtonIcon,ownerState:Z}),ve=Ir({elementType:w.EndScrollButtonIcon,externalSlotProps:E.endScrollButtonIcon,ownerState:Z}),[oe,fe]=P.useState(!1),[be,Le]=P.useState(J5),[se,ue]=P.useState(!1),[Te,ge]=P.useState(!1),[Me,Se]=P.useState(!1),[D,ie]=P.useState({overflow:"hidden",scrollbarWidth:0}),ae=new Map,K=P.useRef(null),W=P.useRef(null),ne=()=>{const Xe=K.current;let Ze;if(Xe){const zt=Xe.getBoundingClientRect();Ze={clientWidth:Xe.clientWidth,scrollLeft:Xe.scrollLeft,scrollTop:Xe.scrollTop,scrollLeftNormalized:Gie(Xe,i.direction),scrollWidth:Xe.scrollWidth,top:zt.top,bottom:zt.bottom,left:zt.left,right:zt.right}}let Nt;if(Xe&&M!==!1){const zt=W.current.children;if(zt.length>0){const pn=zt[ae.get(M)];Nt=pn?pn.getBoundingClientRect():null}}return{tabsMeta:Ze,tabMeta:Nt}},pe=Yr(()=>{const{tabsMeta:Xe,tabMeta:Ze}=ne();let Nt=0,zt;if(C)zt="top",Ze&&Xe&&(Nt=Ze.top-Xe.top+Xe.scrollTop);else if(zt=s?"right":"left",Ze&&Xe){const Dn=s?Xe.scrollLeftNormalized+Xe.clientWidth-Xe.scrollWidth:Xe.scrollLeft;Nt=(s?-1:1)*(Ze[zt]-Xe[zt]+Dn)}const pn={[zt]:Nt,[H]:Ze?Ze[H]:0};if(isNaN(be[zt])||isNaN(be[H]))Le(pn);else{const Dn=Math.abs(be[zt]-pn[zt]),Wn=Math.abs(be[H]-pn[H]);(Dn>=1||Wn>=1)&&Le(pn)}}),me=(Xe,{animation:Ze=!0}={})=>{Ze?dve(F,K.current,Xe,{duration:i.transitions.duration.standard}):K.current[F]=Xe},he=Xe=>{let Ze=K.current[F];C?Ze+=Xe:(Ze+=Xe*(s?-1:1),Ze*=s&&GV()==="reverse"?-1:1),me(Ze)},Pe=()=>{const Xe=K.current[j];let Ze=0;const Nt=Array.from(W.current.children);for(let zt=0;zt<Nt.length;zt+=1){const pn=Nt[zt];if(Ze+pn[j]>Xe){zt===0&&(Ze=Xe);break}Ze+=pn[j]}return Ze},Oe=()=>{he(-1*Pe())},de=()=>{he(Pe())},Ce=P.useCallback(Xe=>{ie({overflow:null,scrollbarWidth:Xe})},[]),Ye=()=>{const Xe={};Xe.scrollbarSizeListener=O?J.jsx(Mve,{onChange:Ce,className:ze(X.scrollableX,X.hideScrollbar)}):null;const Nt=O&&(x==="auto"&&(se||Te)||x===!0);return Xe.scrollButtonStart=Nt?J.jsx(y,z({slots:{StartScrollButtonIcon:w.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:ee},orientation:b,direction:s?"right":"left",onClick:Oe,disabled:!se},A,{className:ze(X.scrollButtons,A.className)})):null,Xe.scrollButtonEnd=Nt?J.jsx(y,z({slots:{EndScrollButtonIcon:w.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ve},orientation:b,direction:s?"left":"right",onClick:de,disabled:!Te},A,{className:ze(X.scrollButtons,A.className)})):null,Xe},Fe=Yr(Xe=>{const{tabsMeta:Ze,tabMeta:Nt}=ne();if(!(!Nt||!Ze)){if(Nt[q]<Ze[q]){const zt=Ze[F]+(Nt[q]-Ze[q]);me(zt,{animation:Xe})}else if(Nt[G]>Ze[G]){const zt=Ze[F]+(Nt[G]-Ze[G]);me(zt,{animation:Xe})}}}),Ve=Yr(()=>{O&&x!==!1&&Se(!Me)});P.useEffect(()=>{const Xe=Ky(()=>{K.current&&pe()});let Ze;const Nt=Dn=>{Dn.forEach(Wn=>{Wn.removedNodes.forEach(Jn=>{var le;(le=Ze)==null||le.unobserve(Jn)}),Wn.addedNodes.forEach(Jn=>{var le;(le=Ze)==null||le.observe(Jn)})}),Xe(),Ve()},zt=Nl(K.current);zt.addEventListener("resize",Xe);let pn;return typeof ResizeObserver<"u"&&(Ze=new ResizeObserver(Xe),Array.from(W.current.children).forEach(Dn=>{Ze.observe(Dn)})),typeof MutationObserver<"u"&&(pn=new MutationObserver(Nt),pn.observe(W.current,{childList:!0})),()=>{var Dn,Wn;Xe.clear(),zt.removeEventListener("resize",Xe),(Dn=pn)==null||Dn.disconnect(),(Wn=Ze)==null||Wn.disconnect()}},[pe,Ve]),P.useEffect(()=>{const Xe=Array.from(W.current.children),Ze=Xe.length;if(typeof IntersectionObserver<"u"&&Ze>0&&O&&x!==!1){const Nt=Xe[0],zt=Xe[Ze-1],pn={root:K.current,threshold:.99},Dn=_e=>{ue(!_e[0].isIntersecting)},Wn=new IntersectionObserver(Dn,pn);Wn.observe(Nt);const Jn=_e=>{ge(!_e[0].isIntersecting)},le=new IntersectionObserver(Jn,pn);return le.observe(zt),()=>{Wn.disconnect(),le.disconnect()}}},[O,x,Me,u==null?void 0:u.length]),P.useEffect(()=>{fe(!0)},[]),P.useEffect(()=>{pe()}),P.useEffect(()=>{Fe(J5!==be)},[Fe,be]),P.useImperativeHandle(l,()=>({updateIndicator:pe,updateScrollButtons:Ve}),[pe,Ve]);const Bt=J.jsx(Ive,z({},S,{className:ze(X.indicator,S.className),ownerState:Z,style:z({},be,S.style)}));let yt=0;const Ot=P.Children.map(u,Xe=>{if(!P.isValidElement(Xe))return null;const Ze=Xe.props.value===void 0?yt:Xe.props.value;ae.set(Ze,yt);const Nt=Ze===M;return yt+=1,P.cloneElement(Xe,z({fullWidth:I==="fullWidth",indicator:Nt&&!oe&&Bt,selected:Nt,selectionFollowsFocus:_,onChange:m,textColor:k,value:Ze},yt===1&&M===!1&&!Xe.props.tabIndex?{tabIndex:0}:{}))}),Ge=Xe=>{const Ze=W.current,Nt=Zn(Ze).activeElement;if(Nt.getAttribute("role")!=="tab")return;let pn=b==="horizontal"?"ArrowLeft":"ArrowUp",Dn=b==="horizontal"?"ArrowRight":"ArrowDown";switch(b==="horizontal"&&s&&(pn="ArrowRight",Dn="ArrowLeft"),Xe.key){case pn:Xe.preventDefault(),e_(Ze,Nt,Q5);break;case Dn:Xe.preventDefault(),e_(Ze,Nt,Z5);break;case"Home":Xe.preventDefault(),e_(Ze,null,Z5);break;case"End":Xe.preventDefault(),e_(Ze,null,Q5);break}},Pt=Ye();return J.jsxs(Ave,z({className:ze(X.root,d),ownerState:Z,ref:n,as:h},R,{children:[Pt.scrollButtonStart,Pt.scrollbarSizeListener,J.jsxs(Pve,{className:X.scroller,ownerState:Z,style:{overflow:D.overflow,[C?`margin${s?"Left":"Right"}`:"marginBottom"]:B?void 0:-D.scrollbarWidth},ref:K,children:[J.jsx(Rve,{"aria-label":o,"aria-labelledby":a,"aria-orientation":b==="vertical"?"vertical":null,className:X.flexContainer,ownerState:Z,onKeyDown:Ge,ref:W,role:"tablist",children:Ot}),oe&&Bt]}),Pt.scrollButtonEnd]}))}),kve=Lve;function Ove(t){return ut("MuiTextField",t)}st("MuiTextField",["root"]);const Nve=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Dve={standard:OW,filled:IW,outlined:jW},Bve=t=>{const{classes:e}=t;return ct({root:["root"]},Ove,e)},Fve=Ae(SO,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),zve=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:m,InputLabelProps:b,inputProps:y,InputProps:x,inputRef:_,label:w,maxRows:E,minRows:S,multiline:A=!1,name:k,onBlur:M,onChange:I,onFocus:B,placeholder:R,required:O=!1,rows:C,select:F=!1,SelectProps:q,type:G,value:j,variant:H="outlined"}=r,Z=He(r,Nve),X=z({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:f,multiline:A,required:O,select:F,variant:H}),ee=Bve(X),ve={};H==="outlined"&&(b&&typeof b.shrink<"u"&&(ve.notched=b.shrink),ve.label=w),F&&((!q||!q.native)&&(ve.id=void 0),ve["aria-describedby"]=void 0);const oe=Qg(m),fe=p&&oe?`${oe}-helper-text`:void 0,be=w&&oe?`${oe}-label`:void 0,Le=Dve[H],se=J.jsx(Le,z({"aria-describedby":fe,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:f,multiline:A,name:k,rows:C,maxRows:E,minRows:S,type:G,value:j,id:oe,inputRef:_,onBlur:M,onChange:I,onFocus:B,placeholder:R,inputProps:y},ve,x));return J.jsxs(Fve,z({className:ze(ee.root,a),disabled:u,error:d,fullWidth:f,ref:n,required:O,color:l,variant:H,ownerState:X},Z,{children:[w!=null&&w!==""&&J.jsx(NW,z({htmlFor:oe,id:be},b,{children:w})),F?J.jsx(HW,z({"aria-describedby":fe,id:oe,labelId:be,value:j,input:se},q,{children:o})):se,p&&J.jsx(wfe,z({id:fe},h,{children:p}))]}))}),ez=zve;function Uve(t){return ut("MuiToggleButton",t)}const $ve=st("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Rp=$ve,jve=P.createContext({}),QW=jve,Gve=P.createContext(void 0),JW=Gve;function Hve(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const Vve=["value"],Wve=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Xve=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${Ee(s)}`,o]};return ct(a,Uve,e)},Yve=Ae(sa,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${Ee(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),z({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${Rp.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:nn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Rp.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:nn(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:nn(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:nn(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),qve=P.forwardRef(function(e,n){const r=P.useContext(QW),{value:i}=r,s=He(r,Vve),o=P.useContext(JW),a=GT(z({},s,{selected:Hve(e.value,i)}),e),l=ht({props:a,name:"MuiToggleButton"}),{children:c,className:u,color:d="standard",disabled:h=!1,disableFocusRipple:f=!1,fullWidth:p=!1,onChange:m,onClick:b,selected:y,size:x="medium",value:_}=l,w=He(l,Wve),E=z({},l,{color:d,disabled:h,disableFocusRipple:f,fullWidth:p,size:x}),S=Xve(E),A=M=>{b&&(b(M,_),M.defaultPrevented)||m&&m(M,_)},k=o||"";return J.jsx(Yve,z({className:ze(s.className,S.root,u,k),disabled:h,focusRipple:!f,ref:n,onClick:A,onChange:m,value:_,ownerState:E,"aria-pressed":y},w,{children:c}))}),Kve=qve;function Zve(t){return ut("MuiToggleButtonGroup",t)}const Qve=st("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),hr=Qve,Jve=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],eye=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${Ee(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ct(s,Zve,e)},tye=Ae("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${hr.grouped}`]:e.grouped},{[`& .${hr.grouped}`]:e[`grouped${Ee(n.orientation)}`]},{[`& .${hr.firstButton}`]:e.firstButton},{[`& .${hr.lastButton}`]:e.lastButton},{[`& .${hr.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>z({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${hr.grouped}`]:z({},t.orientation==="horizontal"?{[`&.${hr.selected} + .${hr.grouped}.${hr.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${hr.selected} + .${hr.grouped}.${hr.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${hr.firstButton},& .${hr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${hr.lastButton},& .${hr.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${hr.firstButton},& .${hr.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${hr.lastButton},& .${hr.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${hr.lastButton}.${Rp.disabled},& .${hr.middleButton}.${Rp.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${hr.lastButton}.${Rp.disabled},& .${hr.middleButton}.${Rp.disabled}`]:{borderTop:"1px solid transparent"}})),nye=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:o="standard",disabled:a=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:d="horizontal",size:h="medium",value:f}=r,p=He(r,Jve),m=z({},r,{disabled:a,fullWidth:c,orientation:d,size:h}),b=eye(m),y=P.useCallback((A,k)=>{if(!u)return;const M=f&&f.indexOf(k);let I;f&&M>=0?(I=f.slice(),I.splice(M,1)):I=f?f.concat(k):[k],u(A,I)},[u,f]),x=P.useCallback((A,k)=>{u&&u(A,f===k?null:k)},[u,f]),_=P.useMemo(()=>({className:b.grouped,onChange:l?x:y,value:f,size:h,fullWidth:c,color:o,disabled:a}),[b.grouped,l,x,y,f,h,c,o,a]),w=VV(i),E=w.length,S=A=>{const k=A===0,M=A===E-1;return k&&M?"":k?b.firstButton:M?b.lastButton:b.middleButton};return J.jsx(tye,z({role:"group",className:ze(b.root,s),ref:n,ownerState:m},p,{children:J.jsx(QW.Provider,{value:_,children:w.map((A,k)=>J.jsx(JW.Provider,{value:S(k),children:A},k))})}))}),rye=nye,jh="Eco-Geo",KA={latitude:47.65,longitude:7,zoom:4.5,maxZoom:20,maxPitch:89,bearing:0},iye=vt([J.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),J.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),sye=vt(J.jsx("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2zM18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2z"}),"AddRoad"),oye=vt([J.jsx("path",{d:"M19.5 12c.93 0 1.78.28 2.5.76V8c0-1.1-.9-2-2-2h-6.29l-1.06-1.06 1.41-1.41-.71-.71-3.53 3.53.71.71 1.41-1.41L13 6.71V9c0 1.1-.9 2-2 2h-.54c.95 1.06 1.54 2.46 1.54 4 0 .34-.04.67-.09 1h3.14c.25-2.25 2.14-4 4.45-4"},"0"),J.jsx("path",{d:"M19.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M4 9h5c0-1.1-.9-2-2-2H4c-.55 0-1 .45-1 1s.45 1 1 1m5.83 4.82-.18-.47.93-.35c-.46-1.06-1.28-1.91-2.31-2.43l-.4.89-.46-.21.4-.9C7.26 10.13 6.64 10 6 10c-.53 0-1.04.11-1.52.26l.34.91-.47.18-.35-.93c-1.06.46-1.91 1.28-2.43 2.31l.89.4-.21.46-.9-.4C1.13 13.74 1 14.36 1 15c0 .53.11 1.04.26 1.52l.91-.34.18.47-.93.35c.46 1.06 1.28 1.91 2.31 2.43l.4-.89.46.21-.4.9c.55.22 1.17.35 1.81.35.53 0 1.04-.11 1.52-.26l-.34-.91.47-.18.35.93c1.06-.46 1.91-1.28 2.43-2.31l-.89-.4.21-.46.9.4c.22-.55.35-1.17.35-1.81 0-.53-.11-1.04-.26-1.52zm-2.68 3.95c-1.53.63-3.29-.09-3.92-1.62-.63-1.53.09-3.29 1.62-3.92 1.53-.63 3.29.09 3.92 1.62.64 1.53-.09 3.29-1.62 3.92"},"1")],"Agriculture"),aye=vt(J.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.42 0 2.13.54 2.39 1.4.12.4.45.7.87.7h.3c.66 0 1.13-.65.9-1.27-.42-1.18-1.4-2.16-2.96-2.54V4.5c0-.83-.67-1.5-1.5-1.5S10 3.67 10 4.5v.66c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-1.65 0-2.5-.59-2.83-1.43-.15-.39-.49-.67-.9-.67h-.28c-.67 0-1.14.68-.89 1.3.57 1.39 1.9 2.21 3.4 2.53v.67c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-.65c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoneyRounded"),e9=vt(J.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),lye=vt(J.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),ry=vt(J.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),cye=vt(J.jsx("path",{d:"M22 3.41 16.71 8.7 20 12h-8V4l3.29 3.29L20.59 2zM3.41 22l5.29-5.29L12 20v-8H4l3.29 3.29L2 20.59z"}),"CloseFullscreen"),t9=vt(J.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),uye=vt(J.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),dye=vt(J.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Domain"),hye=vt(J.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"}),"DomainAdd"),fye=vt(J.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),pye=vt(J.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),LO=vt(J.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),n9=vt(J.jsx("path",{d:"M22 10v12H2V10l7-3v2l5-2v3zm-4.8-1.5L18 2h3l.8 6.5zM11 18h2v-4h-2zm-4 0h2v-4H7zm10-4h-2v4h2z"}),"Factory"),gye=vt(J.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),mye=vt(J.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),r9=vt(J.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),vye=vt(J.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"}),"FitScreen"),Hw=vt(J.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),i9=vt(J.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),s9=vt(J.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),yye=vt(J.jsx("path",{d:"M17.2 3H6.8l-5.2 9 5.2 9h10.4l5.2-9z"}),"Hexagon"),o9=vt(J.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),bye=vt(J.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),a9=vt(J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),_ye=vt(J.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch"),l9=vt(J.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),c9=vt(J.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),Vw=vt(J.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),tz=vt(J.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull"),u9=vt(J.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PanoramaFishEye"),xye=vt(J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"}),"PauseCircle"),wye=vt(J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle"),Eye=vt(J.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m-8 6H8v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1H8v-1H6v-2h4v-1H7c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2zm4 6.25-2-2h4zM14 10l2-2 2 2z"}),"PriceChange"),d9=vt(J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),Tye=vt([J.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"},"0"),J.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-5.99 13c-.59 0-1.05-.47-1.05-1.05 0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04-.01.58-.45 1.05-1.04 1.05m2.5-6.17c-.63.93-1.23 1.21-1.56 1.81-.13.24-.18.4-.18 1.18h-1.52c0-.41-.06-1.08.26-1.65.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.88 0-1.32.67-1.5 1.23l-1.37-.57C11.51 5.96 12.52 5 13.99 5c1.23 0 2.08.56 2.51 1.26.37.61.58 1.73.01 2.57"},"1")],"Quiz"),Sye=vt(J.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),Cye=vt(J.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Aye=vt(J.jsx("path",{d:"M18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2zm11.5.41L21.09 15 19 17.09 16.91 15l-1.41 1.41 2.09 2.09-2.09 2.09L16.91 22 19 19.91 21.09 22l1.41-1.41-2.09-2.09z"}),"RemoveRoad"),h9=vt(J.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"ReportProblem"),Pye=vt(J.jsx("path",{d:"m19.41 7.41-4.83-4.83c-.37-.37-.88-.58-1.41-.58H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.42M14 13c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1c0 .55-.45 1-1 1s-1-.45-1-1h-1c-.55 0-1-.45-1-1s.45-1 1-1h3v-1h-3c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-.55.45-1 1-1s1 .45 1 1h1c.55 0 1 .45 1 1s-.45 1-1 1h-3v1zm0-5c-.55 0-1-.45-1-1V3.5L17.5 8z"}),"RequestQuoteRounded"),Rye=vt(J.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),iy=vt(J.jsx("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82"}),"Route"),kO=vt(J.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),Iye=vt(J.jsx("path",{d:"M3 3h18v18H3z"}),"Square"),f9=vt(J.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer"),Mye=vt(J.jsx("path",{d:"m22 12-4-4v3H3v2h15v3z"}),"TrendingFlat"),p9=vt(J.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),Lye=vt(J.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo"),g9=vt([J.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),J.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),kye=vt(J.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),Oye=At.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  margin-top: 40px;
  font-size: 20px;
  gap: 10px;
`;function Nye(){return Be(Oye,{children:[$(En,{children:"If you already have some local files of the types described above, Drag and Drop them here!"}),$(r9,{fontSize:"large"}),$(Tye,{fontSize:"large",style:{fontSize:"35px"}})]})}var _u=(t=>(t[t.resources=0]="resources",t[t.projects=1]="projects",t))(_u||{});const Dye=At.div`
  display: flex;
  gap: 40px;
  margin-bottom: 60px;
  justify-content: center;
  align-items: center;
`,Bye=At(Ds)`
  margin-top: 40px;
  padding: 40px;
  display: block;
`,Fye=At.div`
  margin-top: 10px;
`,nz=t=>{const e=Ts();return P.useEffect(()=>{document.title=jh+(t.type==_u.resources?" - Select Resource Type":" - Select Project Type")},[]),Be("div",{children:[$(Dye,{children:t.items.map((n,r)=>Be(Bye,{variant:"outlined",title:n.tooltip,onClick:()=>e(n.url),children:[$("div",{children:n.name}),$(Fye,{children:n.icon})]},r))}),$("hr",{}),$(Zk,{}),$(Nye,{})]})},ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kr=Object.keys,Ji=Array.isArray;function xs(t,e){return typeof e!="object"||Kr(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||ir.Promise||(ir.Promise=Promise);const sy=Object.getPrototypeOf,zye={}.hasOwnProperty;function wo(t,e){return zye.call(t,e)}function xg(t,e){typeof e=="function"&&(e=e(sy(t))),(typeof Reflect>"u"?Kr:Reflect.ownKeys)(e).forEach(n=>{xc(t,n,e[n])})}const m9=Object.defineProperty;function xc(t,e,n,r){m9(t,e,xs(n&&wo(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Vp(t){return{from:function(e){return t.prototype=Object.create(e.prototype),xc(t.prototype,"constructor",t),{extend:xg.bind(null,t.prototype)}}}}const Uye=Object.getOwnPropertyDescriptor;function OO(t,e){let n;return Uye(t,e)||(n=sy(t))&&OO(n,e)}const $ye=[].slice;function Ww(t,e,n){return $ye.call(t,e,n)}function v9(t,e){return e(t)}function I0(t){if(!t)throw new Error("Assertion Failed")}function y9(t){ir.setImmediate?setImmediate(t):setTimeout(t,0)}function b9(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function wc(t,e){if(wo(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=wc(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:wc(a,e.substr(o+1))}}function $a(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){I0(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)$a(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?Ji(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&wo(t,o)||(l=t[o]={}),$a(l,a,n)}}else n===void 0?Ji(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function _9(t){var e={};for(var n in t)wo(t,n)&&(e[n]=t[n]);return e}const jye=[].concat;function x9(t){return jye.apply([],t)}const w9="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x9([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>ir[t]),Gye=w9.map(t=>ir[t]);b9(w9,t=>[t,!0]);let xu=null;function sb(t){xu=typeof WeakMap<"u"&&new WeakMap;const e=oI(t);return xu=null,e}function oI(t){if(!t||typeof t!="object")return t;let e=xu&&xu.get(t);if(e)return e;if(Ji(t)){e=[],xu&&xu.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(oI(t[n]))}else if(Gye.indexOf(t.constructor)>=0)e=t;else{const s=sy(t);for(var i in e=s===Object.prototype?{}:Object.create(s),xu&&xu.set(t,e),t)wo(t,i)&&(e[i]=oI(t[i]))}return e}const{toString:Hye}={};function aI(t){return Hye.call(t).slice(8,-1)}const lI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Vye=typeof lI=="symbol"?function(t){var e;return t!=null&&(e=t[lI])&&e.apply(t)}:function(){return null},op={};function hc(t){var e,n,r,i;if(arguments.length===1){if(Ji(t))return t.slice();if(this===op&&typeof t=="string")return[t];if(i=Vye(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const NO=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Gl=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function E9(t,e){Gl=t,T9=e}var T9=()=>!0;const Wye=!new Error("").stack;function sf(){if(Wye)try{throw sf.arguments,new Error}catch(t){return t}return new Error}function cI(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(T9).map(r=>`
`+r).join("")):""}var S9=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],DO=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(S9),Xye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Wp(t,e){this._e=sf(),this.name=t,this.message=e}function C9(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Xw(t,e,n,r){this._e=sf(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=C9(t,e)}function hv(t,e){this._e=sf(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=C9(t,e)}Vp(Wp).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+cI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Vp(Xw).from(Wp),Vp(hv).from(Wp);var BO=DO.reduce((t,e)=>(t[e]=e+"Error",t),{});const Yye=Wp;var jt=DO.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=sf(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Xye[e]||n,this.inner=null)}return Vp(r).from(Yye),t[e]=r,t},{});jt.Syntax=SyntaxError,jt.Type=TypeError,jt.Range=RangeError;var rz=S9.reduce((t,e)=>(t[e+"Error"]=jt[e],t),{}),Lx=DO.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=jt[e]),t),{});function Vn(){}function oy(t){return t}function qye(t,e){return t==null||t===oy?e:function(n){return e(t(n))}}function Gh(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Kye(t,e){return t===Vn?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Gh(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Gh(i,this.onerror):i),s!==void 0?s:n}}function Zye(t,e){return t===Vn?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Gh(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Gh(r,this.onerror):r)}}function Qye(t,e){return t===Vn?e:function(n){var r=t.apply(this,arguments);xs(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Gh(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Gh(s,this.onerror):s),r===void 0?o===void 0?void 0:o:xs(r,o)}}function Jye(t,e){return t===Vn?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function FO(t,e){return t===Vn?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}Lx.ModifyError=Xw,Lx.DexieError=Wp,Lx.BulkError=hv;var ay={};const A9=100,[uI,Yw,dI]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,sy(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,sy(e),t]})(),P9=Yw&&Yw.then,kx=uI&&uI.constructor,zO=!!dI;var hI=!1,ebe=dI?()=>{dI.then(t_)}:ir.setImmediate?setImmediate.bind(null,t_):ir.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{t_(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(t_,0)},fv=function(t,e){M0.push([t,e]),qw&&(ebe(),qw=!1)},fI=!0,qw=!0,yh=[],Ox=[],pI=null,gI=oy,Xp={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oz,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{oz(t[0],t[1])}catch{}})}},Lt=Xp,M0=[],bh=0,Nx=[];function mt(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Vn,this._lib=!1;var e=this._PSD=Lt;if(Gl&&(this._stackHolder=sf(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ay)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&vI(this,this._value))}this._state=null,this._value=null,++e.ref,I9(this,t)}const mI={get:function(){var t=Lt,e=Kw;function n(r,i){var s=!t.global&&(t!==Lt||e!==Kw);const o=s&&!Ic();var a=new mt((l,c)=>{UO(this,new R9(Zw(r,t,s,o),Zw(i,t,s,o),l,c,t))});return Gl&&k9(a,this),a}return n.prototype=ay,n},set:function(t){xc(this,"then",t&&t.prototype===ay?mI:{get:function(){return t},set:mI.set})}};function R9(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function I9(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ob();n&&typeof n.then=="function"?I9(t,(i,s)=>{n instanceof mt?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,M9(t)),r&&ab()}},vI.bind(null,t))}catch(n){vI(t,n)}}function vI(t,e){if(Ox.push(e),t._state===null){var n=t._lib&&ob();e=gI(e),t._state=!1,t._value=e,Gl&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=OO(e,"stack");e._promise=t,xc(e,"stack",{get:()=>hI?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){yh.some(i=>i._value===r._value)||yh.push(r)}(t),M9(t),n&&ab()}}function M9(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)UO(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),bh===0&&(++bh,fv(()=>{--bh==0&&$O()},[]))}function UO(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++bh,fv(tbe,[n,t,e])}else t._listeners.push(e)}function tbe(t,e,n){try{pI=e;var r,i=e._value;e._state?r=t(i):(Ox.length&&(Ox=[]),r=t(i),Ox.indexOf(i)===-1&&function(s){for(var o=yh.length;o;)if(yh[--o]._value===s._value)return void yh.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{pI=null,--bh==0&&$O(),--n.psd.ref||n.psd.finalize()}}function L9(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=cI(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return Gl&&((r=cI(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&L9(t._prev,e,n)),e}function k9(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function t_(){ob()&&ab()}function ob(){var t=fI;return fI=!1,qw=!1,t}function ab(){var t,e,n;do for(;M0.length>0;)for(t=M0,M0=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(M0.length>0);fI=!0,qw=!0}function $O(){var t=yh;yh=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Nx.slice(0),n=e.length;n;)e[--n]()}function n_(t){return new mt(ay,!1,t)}function pr(t,e){var n=Lt;return function(){var r=ob(),i=Lt;try{return od(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{od(i,!1),r&&ab()}}}xg(mt.prototype,{then:mI,_then:function(t,e){UO(this,new R9(null,null,t,e,Lt))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):n_(r)):this.then(null,r=>r&&r.name===e?n(r):n_(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),n_(e)))},stack:{get:function(){if(this._stack)return this._stack;try{hI=!0;var t=L9(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{hI=!1}}},timeout:function(t,e){return t<1/0?new mt((n,r)=>{var i=setTimeout(()=>r(new jt.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&xc(mt.prototype,Symbol.toStringTag,"Dexie.Promise"),Xp.env=O9(),xg(mt,{all:function(){var t=hc.apply(null,arguments).map(r_);return new mt(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>mt.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof mt)return t;if(t&&typeof t.then=="function")return new mt((n,r)=>{t.then(n,r)});var e=new mt(ay,!0,t);return k9(e,pI),e},reject:n_,race:function(){var t=hc.apply(null,arguments).map(r_);return new mt((e,n)=>{t.map(r=>mt.resolve(r).then(e,n))})},PSD:{get:()=>Lt,set:t=>Lt=t},totalEchoes:{get:()=>Kw},newPSD:sd,usePSD:im,scheduler:{get:()=>fv,set:t=>{fv=t}},rejectionMapper:{get:()=>gI,set:t=>{gI=t}},follow:(t,e)=>new mt((n,r)=>sd((i,s)=>{var o=Lt;o.unhandleds=[],o.onunhandled=s,o.finalize=Gh(function(){(function(a){function l(){a(),Nx.splice(Nx.indexOf(l),1)}Nx.push(l),++bh,fv(()=>{--bh==0&&$O()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),kx&&(kx.allSettled&&xc(mt,"allSettled",function(){const t=hc.apply(null,arguments).map(r_);return new mt(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>mt.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),kx.any&&typeof AggregateError<"u"&&xc(mt,"any",function(){const t=hc.apply(null,arguments).map(r_);return new mt((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>mt.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const Zi={awaits:0,echoes:0,id:0};var nbe=0,Dx=[],ZA=0,Kw=0,rbe=0;function sd(t,e,n,r){var i=Lt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++rbe;var o=Xp.env;s.env=zO?{Promise:mt,PromiseProp:{value:mt,configurable:!0,writable:!0},all:mt.all,race:mt.race,allSettled:mt.allSettled,any:mt.any,resolve:mt.resolve,reject:mt.reject,nthen:iz(o.nthen,s),gthen:iz(o.gthen,s)}:{},e&&xs(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=im(s,t,n,r);return s.ref===0&&s.finalize(),a}function rm(){return Zi.id||(Zi.id=++nbe),++Zi.awaits,Zi.echoes+=A9,Zi.id}function Ic(){return!!Zi.awaits&&(--Zi.awaits==0&&(Zi.id=0),Zi.echoes=Zi.awaits*A9,!0)}function r_(t){return Zi.echoes&&t&&t.constructor===kx?(rm(),t.then(e=>(Ic(),e),e=>(Ic(),ai(e)))):t}function ibe(t){++Kw,Zi.echoes&&--Zi.echoes!=0||(Zi.echoes=Zi.id=0),Dx.push(Lt),od(t,!0)}function sbe(){var t=Dx[Dx.length-1];Dx.pop(),od(t,!1)}function od(t,e){var n=Lt;if((e?!Zi.echoes||ZA++&&t===Lt:!ZA||--ZA&&t===Lt)||N9(e?ibe.bind(null,t):sbe),t!==Lt&&(Lt=t,n===Xp&&(Xp.env=O9()),zO)){var r=Xp.env.Promise,i=t.env;Yw.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(ir,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function O9(){var t=ir.Promise;return zO?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ir,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Yw.then,gthen:t.prototype.then}:{}}function im(t,e,n,r,i){var s=Lt;try{return od(t,!0),e(n,r,i)}finally{od(s,!1)}}function N9(t){P9.call(uI,t)}function Zw(t,e,n,r){return typeof t!="function"?t:function(){var i=Lt;n&&rm(),od(e,!0);try{return t.apply(this,arguments)}finally{od(i,!1),r&&N9(Ic)}}}function iz(t,e){return function(n,r){return t.call(this,Zw(n,e),Zw(r,e))}}(""+P9).indexOf("[native code]")===-1&&(rm=Ic=Vn);const sz="unhandledrejection";function oz(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(ir.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(sz,!0,!0),xs(r,i)):ir.CustomEvent&&xs(r=new CustomEvent(sz,{detail:i}),i),r&&ir.dispatchEvent&&(dispatchEvent(r),!ir.PromiseRejectionEvent&&ir.onunhandledrejection))try{ir.onunhandledrejection(r)}catch{}Gl&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ai=mt.reject;function yI(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Lt.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===BO.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>yI(t,e,n,r))):ai(s)}return i._promise(e,(s,o)=>sd(()=>(Lt.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return ai(new jt.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ai(new jt.DatabaseClosed);t.open().catch(Vn)}return t._state.dbReadyPromise.then(()=>yI(t,e,n,r))}const az="3.2.4",uh="",bI=-1/0,Jl="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",D9="String expected.",pv=[],hS=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),obe=hS,abe=hS,B9=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),fS="__dbnames",QA="readonly",JA="readwrite";function Hh(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const F9={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function i_(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=sb(e))[t],e)}class lbe{_trans(e,n,r){const i=this._tx||Lt.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new jt.NotFound("Table "+s+" not part of transaction");return n(u.idbtrans,u)}const a=ob();try{return i&&i.db===this.db?i===Lt.trans?i._promise(e,o,r):sd(()=>i._promise(e,o,r),{trans:i,transless:Lt.transless||Lt}):yI(this.db,e,[this.name],o)}finally{a&&ab()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Ji(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Kr(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)&&c.keyPath.every(u=>n.indexOf(u)>=0))[0];if(r&&this.db._maxKey!==uh)return this.where(r.name).equals(r.keyPath.map(c=>e[c]));!r&&Gl&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,u){try{return s.cmp(c,u)===0}catch{return!1}}const[a,l]=n.reduce(([c,u],d)=>{const h=i[d],f=e[d];return[c||h,c||!h?Hh(u,h&&h.multi?p=>{const m=wc(p,d);return Ji(m)&&m.some(b=>o(f,b))}:p=>o(f,wc(p,d))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Ji(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(wo(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){xs(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=i_(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{$a(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||Ji(e))return this.where(":id").equals(e).modify(n);{const r=wc(e,this.schema.primKey.keyPath);if(r===void 0)return ai(new jt.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Kr(n).forEach(i=>{$a(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=i_(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{$a(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?mt.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:F9})).then(e=>e.numFailures?mt.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new jt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new jt.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(i_(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(d===0)return s?h:f;throw new hv(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,p)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new jt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new jt.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(i_(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(d===0)return s?h:f;throw new hv(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,p)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new hv(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function gv(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[o].subscribe.apply(null,c),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var c;a||(a=Jye),l||(l=Vn);var u={subscribers:[],fire:l,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=a(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(a,l)}};return e[o]=n[o]=u,u}Kr(c=o).forEach(function(d){var h=c[d];if(Ji(h))s(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new jt.InvalidArgument("Invalid event config");var f=s(d,oy,function(){for(var p=arguments.length,m=new Array(p);p--;)m[p]=arguments[p];f.subscribers.forEach(function(b){y9(function(){b.apply(null,m)})})})}})}}function Jm(t,e){return Vp(e).from({prototype:t}),e}function Ff(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function eP(t,e){t.filter=Hh(t.filter,e)}function tP(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Hh(r(),e()):e,t.justLimit=n&&!r}function Bx(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new jt.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function lz(t,e,n){const r=Bx(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function s_(t,e,n,r){const i=t.replayFilter?Hh(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,c)=>{if(!i||i(l,c,h=>l.stop(h),h=>l.fail(h))){var u=l.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),wo(s,d)||(s[d]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),cz(lz(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return cz(lz(t,r,n),Hh(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function cz(t,e,n,r){var i=pr(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=Vn},a=>{s.fail(a),o=Vn})||i(s.value,s,a=>o=a),o()})})}function gs(t,e){try{const n=uz(t),r=uz(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===a?0:o<a?-1:1}(dz(t),dz(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c){const u=gs(i[c],s[c]);if(u!==0)return u}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function uz(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=aI(t);return n==="ArrayBuffer"?"binary":n}function dz(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class cbe{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ai.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ai.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Hh(n.algorithm,e)}_iterate(e,n){return s_(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&xs(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>s_(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(Ff(r,!0))return i.count({trans:n,query:{index:Bx(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return s_(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var d=o(c,s),h=o(u,s);return d<h?-a:d>h?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Ff(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Bx(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return s_(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Ff(n)?tP(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):tP(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),tP(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return eP(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return eP(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=Hh(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Ff(n,!0)&&n.limit>0)return this._read(i=>{var s=Bx(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return eP(this._ctx,function(i){var s=i.primaryKey.toString(),o=wo(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=Kr(e),o=s.length;i=function(m){for(var b=!1,y=0;y<o;++y){var x=s[y],_=e[x];wc(m,x)!==_&&($a(m,x,_),b=!0)}return b}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const f=[],p=(m,b)=>{const{failures:y,numFailures:x}=b;h+=m-x;for(let _ of Kr(y))d.push(y[_])};return this.clone().primaryKeys().then(m=>{const b=y=>{const x=Math.min(u,m.length-y);return a.getMany({trans:r,keys:m.slice(y,y+x),cache:"immutable"}).then(_=>{const w=[],E=[],S=l?[]:null,A=[];for(let M=0;M<x;++M){const I=_[M],B={value:sb(I),primKey:m[y+M]};i.call(B,B.value,B)!==!1&&(B.value==null?A.push(m[y+M]):l||gs(c(I),c(B.value))===0?(E.push(B.value),l&&S.push(m[y+M])):(A.push(m[y+M]),w.push(B.value)))}const k=Ff(n)&&n.limit===1/0&&(typeof e!="function"||e===nP)&&{index:n.index,range:n.range};return Promise.resolve(w.length>0&&a.mutate({trans:r,type:"add",values:w}).then(M=>{for(let I in M.failures)A.splice(parseInt(I),1);p(w.length,M)})).then(()=>(E.length>0||k&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:S,values:E,criteria:k,changeSpec:typeof e!="function"&&e}).then(M=>p(E.length,M))).then(()=>(A.length>0||k&&e===nP)&&a.mutate({trans:r,type:"delete",keys:A,criteria:k}).then(M=>p(A.length,M))).then(()=>m.length>y+x&&b(y+u))})};return b(0).then(()=>{if(d.length>0)throw new Xw("Error modifying one or more objects",d,h,f);return m.length})})})}delete(){var e=this._ctx,n=e.range;return Ff(e)&&(e.isPrimKey&&!abe||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new Xw("Could not delete some values",Object.keys(a).map(d=>a[d]),o-u);return o-u}))}):this.modify(nP)}}const nP=(t,e)=>e.value=null;function ube(t,e){return t<e?-1:t===e?0:1}function dbe(t,e){return t>e?-1:t===e?0:1}function Js(t,e,n){var r=t instanceof U9?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function zf(t){return new t.Collection(t,()=>z9("")).limit(0)}function hbe(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function o_(t,e,n,r){var i,s,o,a,l,c,u,d=n.length;if(!n.every(m=>typeof m=="string"))return Js(t,D9);function h(m){i=function(y){return y==="next"?x=>x.toUpperCase():x=>x.toLowerCase()}(m),s=function(y){return y==="next"?x=>x.toLowerCase():x=>x.toUpperCase()}(m),o=m==="next"?ube:dbe;var b=n.map(function(y){return{lower:s(y),upper:i(y)}}).sort(function(y,x){return o(y.lower,x.lower)});a=b.map(function(y){return y.upper}),l=b.map(function(y){return y.lower}),c=m,u=m==="next"?"":r}h("next");var f=new t.Collection(t,()=>mu(a[0],l[d-1]+r));f._ondirectionchange=function(m){h(m)};var p=0;return f._addAlgorithm(function(m,b,y){var x=m.key;if(typeof x!="string")return!1;var _=s(x);if(e(_,l,p))return!0;for(var w=null,E=p;E<d;++E){var S=hbe(x,_,a[E],l[E],o,c);S===null&&w===null?p=E+1:(w===null||o(w,S)>0)&&(w=S)}return b(w!==null?function(){m.continue(w+u)}:y),!1}),f}function mu(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function z9(t){return{type:1,lower:t,upper:t}}let U9=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?zf(this):new this.Collection(this,()=>mu(e,n,!r,!i))}catch{return Js(this,Jl)}}equals(e){return e==null?Js(this,Jl):new this.Collection(this,()=>z9(e))}above(e){return e==null?Js(this,Jl):new this.Collection(this,()=>mu(e,void 0,!0))}aboveOrEqual(e){return e==null?Js(this,Jl):new this.Collection(this,()=>mu(e,void 0,!1))}below(e){return e==null?Js(this,Jl):new this.Collection(this,()=>mu(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Js(this,Jl):new this.Collection(this,()=>mu(void 0,e))}startsWith(e){return typeof e!="string"?Js(this,D9):this.between(e,e+uh,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):o_(this,(n,r)=>n.indexOf(r[0])===0,[e],uh)}equalsIgnoreCase(e){return o_(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=hc.apply(op,arguments);return e.length===0?zf(this):o_(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=hc.apply(op,arguments);return e.length===0?zf(this):o_(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,uh)}anyOf(){const e=hc.apply(op,arguments);let n=this._cmp;try{e.sort(n)}catch{return Js(this,Jl)}if(e.length===0)return zf(this);const r=new this.Collection(this,()=>mu(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[bI,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=hc.apply(op,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Js(this,Jl)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[bI,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return zf(this);if(!e.every(x=>x[0]!==void 0&&x[1]!==void 0&&i(x[0],x[1])<=0))return Js(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",jt.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=i;function h(x,_){return d(x[0],_[0])}try{u=e.reduce(function(x,_){let w=0,E=x.length;for(;w<E;++w){const S=x[w];if(r(_[0],S[1])<0&&r(_[1],S[0])>0){S[0]=o(S[0],_[0]),S[1]=a(S[1],_[1]);break}}return w===E&&x.push(_),x},[]),u.sort(h)}catch{return Js(this,Jl)}let f=0;const p=c?x=>i(x,u[f][1])>0:x=>i(x,u[f][1])>=0,m=l?x=>s(x,u[f][0])>0:x=>s(x,u[f][0])>=0;let b=p;const y=new this.Collection(this,()=>mu(u[0][0],u[u.length-1][1],!l,!c));return y._ondirectionchange=x=>{x==="next"?(b=p,d=i):(b=m,d=s),u.sort(h)},y._addAlgorithm((x,_,w)=>{for(var E=x.key;b(E);)if(++f,f===u.length)return _(w),!1;return!!function(S){return!p(S)&&!m(S)}(E)||(this._cmp(E,u[f][1])===0||this._cmp(E,u[f][0])===0||_(()=>{d===i?x.continue(u[f][0]):x.continue(u[f][1])}),!1)}),y}startsWithAnyOf(){const e=hc.apply(op,arguments);return e.every(n=>typeof n=="string")?e.length===0?zf(this):this.inAnyRange(e.map(n=>[n,n+uh])):Js(this,"startsWithAnyOf() only works with strings")}};function _l(t){return pr(function(e){return ly(e),t(e.target.error),!1})}function ly(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const cy="storagemutated",Au="x-storagemutated-1",ad=gv(null,cy);let fbe=class{_lock(){return I0(!Lt.global),++this._reculock,this._reculock!==1||Lt.global||(Lt.lockOwnerFor=this),this}_unlock(){if(I0(!Lt.global),--this._reculock==0)for(Lt.global||(Lt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{im(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Lt.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(I0(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new jt.DatabaseClosed(r);case"MissingAPIError":throw new jt.MissingAPI(r.message,r);default:throw new jt.OpenFailed(r)}if(!this.active)throw new jt.TransactionInactive;return I0(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=pr(i=>{ly(i),this._reject(e.error)}),e.onabort=pr(i=>{ly(i),this.active&&this._reject(new jt.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=pr(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&ad.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ai(new jt.ReadOnly("Transaction is readonly"));if(!this.active)return ai(new jt.TransactionInactive);if(this._locked())return new mt((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},Lt])});if(r)return sd(()=>{var s=new mt((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new mt((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=mt.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new mt((o,a)=>{r.then(l=>n._waitingQueue.push(pr(o.bind(null,l))),l=>n._waitingQueue.push(pr(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new jt.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(wo(n,e))return n[e];const r=this.schema[e];if(!r)throw new jt.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}};function _I(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+$9(e)}}function $9(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function j9(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:b9(n,r=>[r.name,r])}}let uy=t=>{try{return t.only([[]]),uy=()=>[[]],[[]]}catch{return uy=()=>uh,uh}};function xI(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>wc(r,e)}(t):e=>wc(e,t)}function hz(t){return[].slice.call(t)}let pbe=0;function mv(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function gbe(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:i,hasGetAll:s}=function(l,c){const u=hz(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:f}=d,p=Ji(h),m=h==null,b={},y={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:p,keyPath:h,autoIncrement:f,unique:!0,extractKey:xI(h)},indexes:hz(d.indexNames).map(x=>d.index(x)).map(x=>{const{name:_,unique:w,multiEntry:E,keyPath:S}=x,A={name:_,compound:Ji(S),keyPath:S,unique:w,multiEntry:E,extractKey:xI(S)};return b[mv(S)]=A,A}),getIndexByKeyPath:x=>b[mv(x)]};return b[":id"]=y.primaryKey,h!=null&&(b[mv(h)]=y.primaryKey),y})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:f,values:p,range:m}){return new Promise((b,y)=>{b=pr(b);const x=d.objectStore(u),_=x.keyPath==null,w=h==="put"||h==="add";if(!w&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:E}=f||p||{length:1};if(f&&p&&f.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(E===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const A=[],k=[];let M=0;const I=R=>{++M,ly(R)};if(h==="deleteRange"){if(m.type===4)return b({numFailures:M,failures:k,results:[],lastResult:void 0});m.type===3?A.push(S=x.clear()):A.push(S=x.delete(r(m)))}else{const[R,O]=w?_?[p,f]:[p,null]:[f,null];if(w)for(let C=0;C<E;++C)A.push(S=O&&O[C]!==void 0?x[h](R[C],O[C]):x[h](R[C])),S.onerror=I;else for(let C=0;C<E;++C)A.push(S=x[h](R[C])),S.onerror=I}const B=R=>{const O=R.target.result;A.forEach((C,F)=>C.error!=null&&(k[F]=C.error)),b({numFailures:M,failures:k,results:h==="delete"?f:A.map(C=>C.result),lastResult:O})};S.onerror=R=>{I(R),B(R)},S.onsuccess=B})},getMany:({trans:d,keys:h})=>new Promise((f,p)=>{f=pr(f);const m=d.objectStore(u),b=h.length,y=new Array(b);let x,_=0,w=0;const E=A=>{const k=A.target;y[k._pos]=k.result,++w===_&&f(y)},S=_l(p);for(let A=0;A<b;++A)h[A]!=null&&(x=m.get(h[A]),x._pos=A,x.onsuccess=E,x.onerror=S,++_);_===0&&f(y)}),get:({trans:d,key:h})=>new Promise((f,p)=>{f=pr(f);const m=d.objectStore(u).get(h);m.onsuccess=b=>f(b.target.result),m.onerror=_l(p)}),query:function(d){return h=>new Promise((f,p)=>{f=pr(f);const{trans:m,values:b,limit:y,query:x}=h,_=y===1/0?void 0:y,{index:w,range:E}=x,S=m.objectStore(u),A=w.isPrimaryKey?S:S.index(w.name),k=r(E);if(y===0)return f({result:[]});if(d){const M=b?A.getAll(k,_):A.getAllKeys(k,_);M.onsuccess=I=>f({result:I.target.result}),M.onerror=_l(p)}else{let M=0;const I=b||!("openKeyCursor"in A)?A.openCursor(k):A.openKeyCursor(k),B=[];I.onsuccess=R=>{const O=I.result;return O?(B.push(b?O.value:O.primaryKey),++M===y?f({result:B}):void O.continue()):f({result:B})},I.onerror=_l(p)}})}(s),openCursor:function({trans:d,values:h,query:f,reverse:p,unique:m}){return new Promise((b,y)=>{b=pr(b);const{index:x,range:_}=f,w=d.objectStore(u),E=x.isPrimaryKey?w:w.index(x.name),S=p?m?"prevunique":"prev":m?"nextunique":"next",A=h||!("openKeyCursor"in E)?E.openCursor(r(_),S):E.openKeyCursor(r(_),S);A.onerror=_l(y),A.onsuccess=pr(k=>{const M=A.result;if(!M)return void b(null);M.___id=++pbe,M.done=!1;const I=M.continue.bind(M);let B=M.continuePrimaryKey;B&&(B=B.bind(M));const R=M.advance.bind(M),O=()=>{throw new Error("Cursor not stopped")};M.trans=d,M.stop=M.continue=M.continuePrimaryKey=M.advance=()=>{throw new Error("Cursor not started")},M.fail=pr(y),M.next=function(){let C=1;return this.start(()=>C--?this.continue():this.stop()).then(()=>this)},M.start=C=>{const F=new Promise((G,j)=>{G=pr(G),A.onerror=_l(j),M.fail=j,M.stop=H=>{M.stop=M.continue=M.continuePrimaryKey=M.advance=O,G(H)}}),q=()=>{if(A.result)try{C()}catch(G){M.fail(G)}else M.done=!0,M.start=()=>{throw new Error("Cursor behind last entry")},M.stop()};return A.onsuccess=pr(G=>{A.onsuccess=q,q()}),M.continue=I,M.continuePrimaryKey=B,M.advance=R,q(),F},b(M)},y)})},count({query:d,trans:h}){const{index:f,range:p}=d;return new Promise((m,b)=>{const y=h.objectStore(u),x=f.isPrimaryKey?y:y.index(f.name),_=r(p),w=_?x.count(_):x.count();w.onsuccess=pr(E=>m(E.target.result)),w.onerror=_l(b)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:uy(e),schema:i}}function wI({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(u,d){return d.reduce((h,{create:f})=>({...h,...f(h)}),u)}(gbe(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function Qw({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=OO(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?xc(o,i,{get(){return this.table(i)},set(l){m9(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function EI({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function mbe(t,e){return t._cfg.version-e._cfg.version}function vbe(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=Lt.transless||Lt;sd(()=>{Lt.trans=s,Lt.transless=a,e===0?(Kr(i).forEach(l=>{rP(n,l,i[l].primKey,i[l].indexes)}),wI(t,n),mt.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},c,u,d){const h=[],f=l._versions;let p=l._dbSchema=SI(l,l.idbdb,d),m=!1;const b=f.filter(x=>x._cfg.version>=c);function y(){return h.length?mt.resolve(h.shift()(u.idbtrans)).then(y):mt.resolve()}return b.forEach(x=>{h.push(()=>{const _=p,w=x._cfg.dbschema;CI(l,_,d),CI(l,w,d),p=l._dbSchema=w;const E=G9(_,w);E.add.forEach(A=>{rP(d,A[0],A[1].primKey,A[1].indexes)}),E.change.forEach(A=>{if(A.recreate)throw new jt.Upgrade("Not yet support for changing primary key");{const k=d.objectStore(A.name);A.add.forEach(M=>TI(k,M)),A.change.forEach(M=>{k.deleteIndex(M.name),TI(k,M)}),A.del.forEach(M=>k.deleteIndex(M))}});const S=x._cfg.contentUpgrade;if(S&&x._cfg.version>c){wI(l,d),u._memoizedTables={},m=!0;let A=_9(w);E.del.forEach(B=>{A[B]=_[B]}),EI(l,[l.Transaction.prototype]),Qw(l,[l.Transaction.prototype],Kr(A),A),u.schema=A;const k=NO(S);let M;k&&rm();const I=mt.follow(()=>{if(M=S(u),M&&k){var B=Ic.bind(null,null);M.then(B,B)}});return M&&typeof M.then=="function"?mt.resolve(M):I.then(()=>M)}}),h.push(_=>{(!m||!obe)&&function(w,E){[].slice.call(E.db.objectStoreNames).forEach(S=>w[S]==null&&E.db.deleteObjectStore(S))}(x._cfg.dbschema,_),EI(l,[l.Transaction.prototype]),Qw(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),y().then(()=>{var x,_;_=d,Kr(x=p).forEach(w=>{_.db.objectStoreNames.contains(w)||rP(_,w,x[w].primKey,x[w].indexes)})})}(t,e,s,n).catch(o)})}function G9(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!hS)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const u=a[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function rP(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>TI(i,s)),i}function TI(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function SI(t,e,n){const r={};return Ww(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=_I($9(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let u=0;u<s.indexNames.length;++u){const d=s.index(s.indexNames[u]);o=d.keyPath;var c=_I(d.name,o,!!d.unique,!!d.multiEntry,!1,o&&typeof o!="string",!1);l.push(c)}r[i]=j9(i,a,l)}),r}function CI({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+Ww(c).join("+")+"]";if(e[s]){const d=e[s].idxByName[u];d&&(d.name=l,delete e[s].idxByName[u],e[s].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ir.WorkerGlobalScope&&ir instanceof ir.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let ybe=class{_parseStoresSpec(e,n){Kr(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return _I(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Ji(c),a===0)}),s=i.shift();if(s.multi)throw new jt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new jt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new jt.Schema("Index must have a name and cannot be an empty string")}),n[r]=j9(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?xs(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{xs(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,EI(n,[n._allTables,n,n.Transaction.prototype]),Qw(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Kr(s),s),n._storeNames=Kr(s),this}upgrade(e){return this._cfg.contentUpgrade=FO(this._cfg.contentUpgrade||Vn,e),this}};function jO(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Kt(fS,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function GO(t){return t&&typeof t.databases=="function"}function AI(t){return sd(function(){return Lt.letThrough=!0,t()})}function bbe(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function _be(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ai(e.dbOpenError):t);Gl&&(e.openCanceller._stackHolder=sf()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new jt.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return mt.race([r,(typeof navigator>"u"?mt.resolve():bbe()).then(()=>new mt((l,c)=>{if(i(),!n)throw new jt.MissingAPI;const u=t.name,d=e.autoSchema?n.open(u):n.open(u,Math.round(10*t.verno));if(!d)throw new jt.MissingAPI;d.onerror=_l(c),d.onblocked=pr(t._fireOnBlocked),d.onupgradeneeded=pr(h=>{if(o=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=ly,o.abort(),d.result.close();const p=n.deleteDatabase(u);p.onsuccess=p.onerror=pr(()=>{c(new jt.NoSuchDatabase(`Database ${u} doesnt exist`))})}else{o.onerror=_l(c);var f=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;a=f<1,t._novip.idbdb=d.result,vbe(t,f/10,o,c)}},c),d.onsuccess=pr(()=>{o=null;const h=t._novip.idbdb=d.result,f=Ww(h.objectStoreNames);if(f.length>0)try{const m=h.transaction((p=f).length===1?p[0]:p,"readonly");e.autoSchema?function({_novip:b},y,x){b.verno=y.version/10;const _=b._dbSchema=SI(0,y,x);b._storeNames=Ww(y.objectStoreNames,0),Qw(b,[b._allTables],Kr(_),_)}(t,h,m):(CI(t,t._dbSchema,m),function(b,y){const x=G9(SI(0,b.idbdb,y),b._dbSchema);return!(x.add.length||x.change.some(_=>_.add.length||_.change.length))}(t,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wI(t,m)}catch{}var p;pv.push(t),h.onversionchange=pr(m=>{e.vcFired=!0,t.on("versionchange").fire(m)}),h.onclose=pr(m=>{t.on("close").fire(m)}),a&&function({indexedDB:m,IDBKeyRange:b},y){!GO(m)&&y!==fS&&jO(m,b).put({name:y}).catch(Vn)}(t._deps,u),l()},c)}))]).then(()=>(i(),e.onReadyBeingFired=[],mt.resolve(AI(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(FO,Vn);return e.onReadyBeingFired=[],mt.resolve(AI(()=>c(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),ai(l)}).finally(()=>{e.openComplete=!0,s()})}function PI(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):Ji(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function xbe(t,e,n){var r=arguments.length;if(r<2)throw new jt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,x9(i),n]}function H9(t,e,n,r,i){return mt.resolve().then(()=>{const s=Lt.transless||Lt,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===BO.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>H9(t,e,n,null,i))):ai(d)}const l=NO(i);let c;l&&rm();const u=mt.follow(()=>{if(c=i.call(o,o),c)if(l){var d=Ic.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=PI(c))},a);return(c&&typeof c.then=="function"?mt.resolve(c).then(d=>o.active?d:ai(new jt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&o._resolve(),o._completion.then(()=>d))).catch(d=>(o._reject(d),ai(d)))})}function a_(t,e,n){const r=Ji(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const wbe={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(u,d,h){const f=mv(u),p=i[f]=i[f]||[],m=u==null?0:typeof u=="string"?1:u.length,b=d>0,y={...h,isVirtual:b,keyTail:d,keyLength:m,extractKey:xI(u),unique:!b&&h.unique};return p.push(y),y.isPrimaryKey||s.push(y),m>1&&o(m===2?u[0]:u.slice(0,m-1),d+1,h),p.sort((x,_)=>x.keyTail-_.keyTail),y}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const u of r.indexes)o(u.keyPath,0,u);function l(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,f=d.keyTail,{type:h.type===1?2:h.type,lower:a_(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,f),lowerOpen:!0,upper:a_(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,f),upperOpen:!0})}}:u;var h,f}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(u){const d=i[mv(u)];return d&&d[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:f}=u.query.index;return h?n.openCursor(l(u)).then(p=>p&&function(m){return Object.create(m,{continue:{value:function(y){y!=null?m.continue(a_(y,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?m.continue(m.key.slice(0,f).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):m.continue()}},continuePrimaryKey:{value(y,x){m.continuePrimaryKey(a_(y,t.MAX_KEY,d),x)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const y=m.key;return f===1?y[0]:y.slice(0,f)}},value:{get:()=>m.value}})}(p)):n.openCursor(u)}}}}}};function HO(t,e,n,r){return n=n||{},r=r||"",Kr(t).forEach(i=>{if(wo(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=aI(s);a!==aI(o)?n[r+i]=e[i]:a==="Object"?HO(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),Kr(e).forEach(i=>{wo(t,i)||(n[r+i]=e[i])}),n}const Ebe={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=Lt.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(s.type){case"add":if(l.fire===Vn)break;return o._promise("readwrite",()=>u(s),!0);case"put":if(l.fire===Vn&&c.fire===Vn)break;return o._promise("readwrite",()=>u(s),!0);case"delete":if(a.fire===Vn)break;return o._promise("readwrite",()=>u(s),!0);case"deleteRange":if(a.fire===Vn)break;return o._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(s),!0)}return n.mutate(s);function u(h){const f=Lt.trans,p=h.keys||function(m,b){return b.type==="delete"?b.keys:b.keys||b.values.map(m.extractKey)}(r,h);if(!p)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:p}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(m,b,y){return b.type==="add"?Promise.resolve([]):m.getMany({trans:b.trans,keys:y,cache:"immutable"})}(n,h,p).then(m=>{const b=p.map((y,x)=>{const _=m[x],w={onerror:null,onsuccess:null};if(h.type==="delete")a.fire.call(w,y,_,f);else if(h.type==="add"||_===void 0){const E=l.fire.call(w,y,h.values[x],f);y==null&&E!=null&&(y=E,h.keys[x]=y,r.outbound||$a(h.values[x],r.keyPath,y))}else{const E=HO(_,h.values[x]),S=c.fire.call(w,E,y,_,f);if(S){const A=h.values[x];Object.keys(S).forEach(k=>{wo(A,k)?A[k]=S[k]:$a(A,k,S[k])})}}return w});return n.mutate(h).then(({failures:y,results:x,numFailures:_,lastResult:w})=>{for(let E=0;E<p.length;++E){const S=x?x[E]:p[E],A=b[E];S==null?A.onerror&&A.onerror(y[E]):A.onsuccess&&A.onsuccess(h.type==="put"&&m[E]?h.values[E]:S)}return{failures:y,results:x,numFailures:_,lastResult:w}}).catch(y=>(b.forEach(x=>x.onerror&&x.onerror(y)),Promise.reject(y)))})}function d(h,f,p){return n.query({trans:h,values:!1,query:{index:r,range:f},limit:p}).then(({result:m})=>u({type:"delete",keys:m,trans:h}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):m.length<p?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...f,lower:m[m.length-1],lowerOpen:!0},p)))}}}}})};function V9(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)gs(e.keys[i],t[s])===0&&(r.push(n?sb(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const Tbe={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=V9(r.keys,r.trans._cache,r.cache==="clone");return i?mt.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?sb(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function VO(t){return!("from"in t)}const lc=function(t,e){if(!this){const n=new lc;return t&&"d"in t&&xs(n,t),n}xs(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function dy(t,e,n){const r=gs(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(VO(t))return xs(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(gs(n,t.from)<0)return i?dy(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},fz(t);if(gs(e,t.to)>0)return s?dy(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},fz(t);gs(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),gs(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&Jw(t,i),s&&o&&Jw(t,s)}function Jw(t,e){VO(e)||function n(r,{from:i,to:s,l:o,r:a}){dy(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function Sbe(t,e){const n=RI(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=RI(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(gs(a.from,i.to)<=0&&gs(a.to,i.from)>=0)return!0;gs(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function RI(t){let e=VO(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&gs(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||gs(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function fz(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=pz(o)}t.d=pz(t)}function pz({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}xg(lc.prototype,{add(t){return Jw(this,t),this},addKey(t){return dy(this,t,t),this},addKeys(t){return t.forEach(e=>dy(this,e,e)),this},[lI](){return RI(this)}});const Cbe={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new lc(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,c={...i,mutate:h=>{const f=h.trans,p=f.mutatedParts||(f.mutatedParts={}),m=S=>{const A=`idb://${e}/${r}/${S}`;return p[A]||(p[A]=new lc)},b=m(""),y=m(":dels"),{type:x}=h;let[_,w]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const E=h.trans._cache;return i.mutate(h).then(S=>{if(Ji(_)){x!=="delete"&&(_=S.results),b.addKeys(_);const A=V9(_,E);A||x==="add"||y.addKeys(_),(A||w)&&function(k,M,I,B){function R(O){const C=k(O.name||"");function F(G){return G!=null?O.extractKey(G):null}const q=G=>O.multiEntry&&Ji(G)?G.forEach(j=>C.addKey(j)):C.addKey(G);(I||B).forEach((G,j)=>{const H=I&&F(I[j]),Z=B&&F(B[j]);gs(H,Z)!==0&&(H!=null&&q(H),Z!=null&&q(Z))})}M.indexes.forEach(R)}(m,s,A,w)}else if(_){const A={from:_.lower,to:_.upper};y.add(A),b.add(A)}else b.add(n),y.add(n),s.indexes.forEach(A=>m(A.name).add(n));return S})}},u=({query:{index:h,range:f}})=>{var p,m;return[h,new lc((p=f.lower)!==null&&p!==void 0?p:t.MIN_KEY,(m=f.upper)!==null&&m!==void 0?m:t.MAX_KEY)]},d={get:h=>[o,new lc(h.key)],getMany:h=>[o,new lc().addKeys(h.keys)],count:u,query:u,openCursor:u};return Kr(d).forEach(h=>{c[h]=function(f){const{subscr:p}=Lt;if(p){const m=w=>{const E=`idb://${e}/${r}/${w}`;return p[E]||(p[E]=new lc)},b=m(""),y=m(":dels"),[x,_]=d[h](f);if(m(x.name||"").add(_),!x.isPrimaryKey){if(h!=="count"){const w=h==="query"&&l&&f.values&&i.query({...f,values:!1});return i[h].apply(this,arguments).then(E=>{if(h==="query"){if(l&&f.values)return w.then(({result:A})=>(b.addKeys(A),E));const S=f.values?E.result.map(a):E.result;f.values?b.addKeys(S):y.addKeys(S)}else if(h==="openCursor"){const S=E,A=f.values;return S&&Object.create(S,{key:{get:()=>(y.addKey(S.primaryKey),S.key)},primaryKey:{get(){const k=S.primaryKey;return y.addKey(k),k}},value:{get:()=>(A&&b.addKey(S.primaryKey),S.value)}})}return E})}y.add(n)}}return i[h].apply(this,arguments)}}),c}}}};class Kt{constructor(e,n){this._middlewares={},this.verno=0;const r=Kt.dependencies;this._options=n={addons:Kt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Vn,dbReadyPromise:null,cancelOpen:Vn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new mt(a=>{s.dbReadyResolve=a}),s.openCanceller=new mt((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=gv(this,"populate","blocked","versionchange","close",{ready:[FO,Vn]}),this.on.ready.subscribe=v9(this.on.ready.subscribe,a=>(l,c)=>{Kt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||mt.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const d=this;c||a(function h(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(h)})}})}),this.Collection=(o=this,Jm(cbe.prototype,function(a,l){this.db=o;let c=F9,u=null;if(l)try{c=l()}catch(p){u=p}const d=a._ctx,h=d.table,f=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:f!==oy?f:null}})),this.Table=function(a){return Jm(lbe.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:gv(null,{creating:[Kye,Vn],reading:[qye,oy],updating:[Qye,Vn],deleting:[Zye,Vn]})})}(this),this.Transaction=function(a){return Jm(fbe.prototype,function(l,c,u,d,h){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=gv(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new mt((f,p)=>{this._resolve=f,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},f=>{var p=this.active;return this.active=!1,this.on.error.fire(f),this.parent?this.parent._reject(f):p&&this.idbtrans&&this.idbtrans.abort(),ai(f)})})}(this),this.Version=function(a){return Jm(ybe.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Jm(U9.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:u};const d=a._deps.indexedDB;if(!d)throw new jt.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,f)=>d.cmp(f,h),this._max=(h,f)=>d.cmp(h,f)>0?h:f,this._min=(h,f)=>d.cmp(h,f)<0?h:f,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=uy(n.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),pv.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(wbe),this.use(Ebe),this.use(Cbe),this.use(Tbe),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new jt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new jt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(mbe),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Lt.letThrough||this._vip)?e():new mt((n,r)=>{if(this._state.openComplete)return r(new jt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new jt.DatabaseClosed);this.open().catch(Vn)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return _be(this)}_close(){const e=this._state,n=pv.indexOf(this);if(n>=0&&pv.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new mt(r=>{e.dbReadyResolve=r}),e.openCanceller=new mt((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new jt.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new mt((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=pr(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!GO(a)&&c!==fS&&jO(a,l).delete(c).catch(Vn)})(this._deps,this.name),r()}),o.onerror=_l(i),o.onblocked=this._fireOnBlocked};if(e)throw new jt.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Kr(this._allTables).map(e=>this._allTables[e])}transaction(){const e=xbe.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Lt.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===QA)o=QA;else{if(e!="rw"&&e!=JA)throw new jt.InvalidArgument("Invalid transaction mode: "+e);o=JA}if(i){if(i.mode===QA&&o===JA){if(!s)throw new jt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new jt.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,d)=>{d(c)}):ai(c)}const l=H9.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):Lt.trans?im(Lt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!wo(this._allTables,e))throw new jt.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Abe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Pbe{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[Abe](){return this}}function W9(t,e){return Kr(e).forEach(n=>{Jw(t[n]||(t[n]=new lc),e[n])}),t}function Rbe(t){let e,n=!1;const r=new Pbe(i=>{const s=NO(t);let o=!1,a={},l={};const c={get closed(){return o},unsubscribe:()=>{o=!0,ad.storagemutated.unsubscribe(f)}};i.start&&i.start(c);let u=!1,d=!1;function h(){return Kr(l).some(m=>a[m]&&Sbe(a[m],l[m]))}const f=m=>{W9(a,m),h()&&p()},p=()=>{if(u||o)return;a={};const m={},b=function(y){s&&rm();const x=()=>sd(t,{subscr:y,trans:null}),_=Lt.trans?im(Lt.transless,x):x();return s&&_.then(Ic,Ic),_}(m);d||(ad(cy,f),d=!0),u=!0,Promise.resolve(b).then(y=>{n=!0,e=y,u=!1,o||(h()?p():(a={},l=m,i.next&&i.next(y)))},y=>{u=!1,n=!1,i.error&&i.error(y),c.unsubscribe()})};return p(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let II;try{II={indexedDB:ir.indexedDB||ir.mozIndexedDB||ir.webkitIndexedDB||ir.msIndexedDB,IDBKeyRange:ir.IDBKeyRange||ir.webkitIDBKeyRange}}catch{II={indexedDB:null,IDBKeyRange:null}}const Bd=Kt;function Fx(t){let e=vc;try{vc=!0,ad.storagemutated.fire(t)}finally{vc=e}}xg(Bd,{...Lx,delete:t=>new Bd(t,{addons:[]}).delete(),exists:t=>new Bd(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return GO(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==fS)):jO(e,n).toCollection().primaryKeys()}(Bd.dependencies).then(t)}catch{return ai(new jt.MissingAPI)}},defineClass:()=>function(t){xs(this,t)},ignoreTransaction:t=>Lt.trans?im(Lt.transless,t):t(),vip:AI,async:function(t){return function(){try{var e=PI(t.apply(this,arguments));return e&&typeof e.then=="function"?e:mt.resolve(e)}catch(n){return ai(n)}}},spawn:function(t,e,n){try{var r=PI(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:mt.resolve(r)}catch(i){return ai(i)}},currentTransaction:{get:()=>Lt.trans||null},waitFor:function(t,e){const n=mt.resolve(typeof t=="function"?Bd.ignoreTransaction(t):t).timeout(e||6e4);return Lt.trans?Lt.trans.waitFor(n):n},Promise:mt,debug:{get:()=>Gl,set:t=>{E9(t,t==="dexie"?()=>!0:B9)}},derive:Vp,extend:xs,props:xg,override:v9,Events:gv,on:ad,liveQuery:Rbe,extendObservabilitySet:W9,getByKeyPath:wc,setByKeyPath:$a,delByKeyPath:function(t,e){typeof e=="string"?$a(t,e,void 0):"length"in e&&[].map.call(e,function(n){$a(t,n,void 0)})},shallowClone:_9,deepClone:sb,getObjectDiff:HO,cmp:gs,asap:y9,minKey:bI,addons:[],connections:pv,errnames:BO,dependencies:II,semVer:az,version:az.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Bd.maxKey=uy(Bd.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ad(cy,t=>{if(!vc){let e;hS?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Au,!0,!0,t)):e=new CustomEvent(Au,{detail:t}),vc=!0,dispatchEvent(e),vc=!1}}),addEventListener(Au,({detail:t})=>{vc||Fx(t)}));let vc=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Au);typeof t.unref=="function"&&t.unref(),ad(cy,e=>{vc||t.postMessage(e)}),t.onmessage=e=>{e.data&&Fx(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){ad(cy,e=>{try{vc||(typeof localStorage<"u"&&localStorage.setItem(Au,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Au,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Au){const n=JSON.parse(e.newValue);n&&Fx(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Au&&Fx(e.changedParts)})}mt.rejectionMapper=function(t,e){if(!t||t instanceof Wp||t instanceof TypeError||t instanceof SyntaxError||!t.name||!rz[t.name])return t;var n=new rz[t.name](e||t.message,t);return"stack"in t&&xc(n,"stack",{get:function(){return this.inner.stack}}),n},E9(Gl,B9);let l_;const Ibe=new Uint8Array(16);function Mbe(){if(!l_&&(l_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l_(Ibe)}const Li=[];for(let t=0;t<256;++t)Li.push((t+256).toString(16).slice(1));function Lbe(t,e=0){return Li[t[e+0]]+Li[t[e+1]]+Li[t[e+2]]+Li[t[e+3]]+"-"+Li[t[e+4]]+Li[t[e+5]]+"-"+Li[t[e+6]]+Li[t[e+7]]+"-"+Li[t[e+8]]+Li[t[e+9]]+"-"+Li[t[e+10]]+Li[t[e+11]]+Li[t[e+12]]+Li[t[e+13]]+Li[t[e+14]]+Li[t[e+15]]}const kbe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gz={randomUUID:kbe};function lb(t,e,n){if(gz.randomUUID&&!e&&!t)return gz.randomUUID();t=t||{};const r=t.random||(t.rng||Mbe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Lbe(r)}const kl=10,Obe={NOT_CONTAINED:-1},wg=256;function hy(t,e){let n=Math.sin(t.lat*Math.PI/180);n=Math.min(Math.max(n,-.9999),.9999);const r=wg*(.5+t.lng/360)*Math.pow(2,e),i=wg*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))*Math.pow(2,e);return{x:r,y:i}}function mz(t,e){const n=Math.pow(2,e),r=(t.x/n/wg-.5)*360,i=(t.y/n/wg-.5)*(-2*Math.PI);return{lat:Math.atan(Math.sinh(i))*180/Math.PI,lng:r}}function eE(t,e){return{x:Math.floor(t.x/wg),y:Math.floor(t.y/wg),z:e}}function MI({x:t,y:e,z:n}){let r=0;for(let i=0;i<n;i++){const s=1<<i;t&s&&(r|=1<<2*i),e&s&&(r|=1<<2*i+1)}return r}function Nbe(t,e){let n=kl;for(;n>0;){const r=eE(hy(t,n),n),i=eE(hy(e,n),n),s=MI(r),o=MI(i);if(s!==o)break;n--}return n}function WO(t,e,n){if(n===void 0&&(n=Nbe(t,e)),n<0||n>kl)throw new Error(`Invalid zoom level: ${n}`);if(t.lng>e.lng){const r=iP(t,{lat:e.lat,lng:180},n),i=iP({lat:t.lat,lng:-180},e,n);return[r,i]}else return t.lng===-180&&e.lng===180?[[0]]:[iP(t,e,n)]}function iP(t,e,n){const r=hy(t,n),i=hy(e,n),s=eE(r,n),o=eE(i,n),a=[];for(let l=s.x;l<=o.x;l++)for(let c=s.y;c<=o.y;c++)a.push(MI({x:l,y:c,z:n}));return a}function Dbe(t,e,n){if(n<0||n>kl)throw new Error(`Invalid max zoom level: ${n}`);const r=new Array(kl);for(let i=0;i<=n;i++)r[i]=WO(t,e,i);for(let i=n+1;i<=kl;i++)r[i]=r[i-1];return r}function Bbe(t,e,n){if(n<0||n>kl)throw new Error(`Invalid max zoom level: ${n}`);const r={};for(let i=0;i<=n;i++)r[`z${i}`]=WO(t,e,i);return r}const Fbe=t=>{const e=[];return t.forEach((n,r)=>{r===0?e.push(n):e.push(n.length===1?[t[r][0].concat(e[r-1][0])]:n.length===2?[e[r-1][0].concat(t[r][0]),e[r-1].length===2?e[r-1][1].concat(t[r][1]):t[r][1]]:[])}),e},e0="z0, z1, z2, z3, z4, z5, z6, z7, z8, z9, z10",c_="z0_, z1_, z2_, z3_, z4_, z5_, z6_, z7_, z8_, z9_, z10_";class pS extends Kt{constructor(e){super(e),this.version(8).stores({countries:"++id, name, &gid_0, "+e0+","+c_,regions1:"++id, name, resourceIdRef, &[gid_0+gid_1], "+e0+","+c_,regions2:"++id, resourceIdRef, name, &[gid_0+gid_1+gid_2], "+e0+","+c_,points:"++id, resourceIdRef, type, country, name_1, name, &[country+name_1+name], "+e0,routeSegments:"++id, resourceIdRef, mode, sourceCountry, sourceName1, sourceName2, sourceName, targetCountry, targetName1, targetName2, targetName, sourceIdRef, targetIdRef, &[sourceIdRef+targetIdRef], "+e0+","+c_}),this.countries=this.table("countries"),this.regions1=this.table("regions1"),this.regions2=this.table("regions2"),this.points=this.table("points"),this.routeSegments=this.table("routeSegments")}static async open(e){return new pS(e)}async findAllGeoRegions(e,n){const r=0<=n&&n<=2?[this.countries]:n<=4?[this.countries,this.regions1]:[this.regions1,this.regions2];return Promise.all(r.map(async i=>{const s=[];for(let o=n;o>=0;o--)if(e[n].length==1){if(s.push(i.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length==1)break}else s.push(i.where(`z${n}`).anyOf(e[n].length==2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return Promise.all(s)}))}async findAllGeoPoints(e,n){const r=this.points,i=[];for(let s=n;s>=0;s--)if(e[n].length==1){if(i.push(r.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length==1)break}else i.push(r.where(`z${n}`).anyOf(e[n].length==2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return Promise.all(i)}async findAllGeoLineStrings(e,n){const r=this.routeSegments,i=[];for(let s=n;s>=0;s--)if(e[n].length==1){if(i.push(r.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length==1)break}else i.push(r.where(`z${n}`).anyOf(e[n].length==2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return Promise.all(i)}async storeGISRouteSegment(e){const n=await Promise.all(e.map(async r=>{const{sourceCountry:i,sourceName1:s,sourceName2:o,sourceName:a,targetCountry:l,targetName1:c,targetName2:u,targetName:d}=r,h=await this.findGISPoint({country:i,name_1:s,name_2:o,name:a}),f=await this.findGISPoint({country:l,name_1:c,name_2:u,name:d});if(h==null||f==null||h.id==null||f.id==null)throw new Error;const[p,m]=h.lat>f.lat?[h.lat,f.lat]:[f.lat,h.lat],[b,y]=h.lng>f.lng?[h.lng,f.lng]:[f.lng,h.lng],x=Bbe({lat:p,lng:b},{lat:m,lng:y},kl),_={...r,uuid:lb(),sourceIdRef:h.uuid,targetIdRef:f.uuid,...x};return console.log(_),_}));await this.routeSegments.bulkAdd(n)}async findGISPoint({country:e,name_1:n,name_2:r,name:i}){return this.points.where("[country+name_1+name_2+name]").equals(e+n+r+i).last()}}const sP="databases";class si extends Kt{constructor(){super(sP),this.version(3).stores({[sP]:"++id, &uuid, type, name"}),this.databases=this.table(sP)}static getSingleton(){return si.singleton||(si.singleton=new si),si.singleton}static async getDatabases(){return si.getSingleton().databases.toArray()}static async createDatabase(e){const n=lb();await si.getSingleton().databases.add({...e,uuid:n,updatedAt:e.createdAt}),(await pS.open(n)).close()}static async updateDatabase(e,n){const r=await si.getSingleton().databases.where("uuid").equals(e).last();r&&await si.getSingleton().databases.update(r,{...n,updatedAt:Date.now()})}}const oP=()=>async({params:t})=>t.uuid!==void 0?await si.getSingleton().databases.where("uuid").equals(t.uuid).last():{uuid:void 0,type:t.type},sn={Racetrack:"Racetrack",Graph:"Graph",RealWorld:"RealWorld"};function LI(t){return t.viewportCenter?`/${t.type}/${t.uuid}/${t.viewportCenter[0]}/${t.viewportCenter[1]}/${t.viewportCenter[2]}/`:`/${t.type}/${t.uuid}/1/0/0/`}const go={gadmShapes:"gadmShapes",idegsmCities:"idegsmCities",idegsmRoutes:"idegsmRoutes"},zbe=()=>{const{uuid:t,type:e,name:n,viewportCenter:r}=Uc(),i=Ts(),s=()=>{switch(e){case sn.Racetrack:case sn.Graph:case sn.RealWorld:i("/projects",{replace:!0});break;case go.gadmShapes:case go.idegsmCities:case go.idegsmRoutes:i("/resources",{replace:!0});break;default:throw new Error(`Unknown ProjectType: ${e}`)}},o=P.useCallback(async()=>{await si.getSingleton().databases.where("uuid").equals(t).delete(),await Kt.delete(t),s()},[t]),a=P.useCallback(()=>{s()},[]);return Be(Jg,{open:!0,children:[$(tm,{children:"Delete Project Confirmation"}),Be(em,{dividers:!0,children:[$(En,{children:"Are you sure you want to delete the following project?"}),$(NV,{to:LI({uuid:t,type:e,viewportCenter:r}),children:n})]}),Be(nb,{children:[$(Ds,{variant:"contained",autoFocus:!0,onClick:a,children:"Cancel"}),$(Ds,{variant:"outlined",onClick:o,children:"DELETE"})]})]})},vz=t=>{const{children:e,value:n,index:r,...i}=t;return $("div",{role:"tabpanel",hidden:n!==r,id:`vertical-tabpanel-${r}`,"aria-labelledby":`vertical-tab-${r}`,...i,children:n===r&&$(Vt,{sx:{p:3},children:e})})};function yz(t){return{id:`vertical-tab-${t}`,"aria-controls":`vertical-tabpanel-${t}`}}const u_=t=>{const e=Ts(),n=(r,i)=>{e(i==0?"/resources":"/projects",{replace:!0})};return Be(Vt,{children:[$(Vt,{sx:{borderBottom:1,borderColor:"divider"},children:Be(kve,{variant:"fullWidth",value:t.type,onChange:n,"aria-label":"tabs",children:[$(V5,{label:"Resources",...yz(0)}),$(V5,{label:"Projects",...yz(1)})]})}),$(vz,{value:t.type,index:0,children:t.type==0&&t.items[0]}),$(vz,{value:t.type,index:1,children:t.type==1&&t.items[1]}),$(Zk,{})]})};var X9={},XO={};Object.defineProperty(XO,"__esModule",{value:!0});XO.default=function(){return`
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
  0%, 100% {
    transform: rotate(0deg);
  }

  20%, 60% {
    transform: rotate(-25deg);
  }

  40%, 80% {
    transform: rotate(10deg);
  }
}

@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none;
    }

    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out;
    }
}
`};Object.defineProperty(X9,"__esModule",{value:!0});var bz=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ube=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Y9=P,t0=q9(Y9),$be=XO,jbe=q9($be);function q9(t){return t&&t.__esModule?t:{default:t}}function Gbe(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function Hbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vbe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _z="____GITHUB_CORNER_SUPER_SECRET___",xz=(0,jbe.default)(),K9=function(t){Wbe(e,t);function e(){return Hbe(this,e),Vbe(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Ube(e,[{key:"componentDidMount",value:function(){if(!document.getElementById(_z)){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id=_z,i.styleSheet?i.styleSheet.cssText=xz:i.appendChild(document.createTextNode(xz)),r.appendChild(i)}}},{key:"render",value:function(){var r=this.props,i=r.href,s=r.size,o=r.direction,a=r.octoColor,l=r.bannerColor,c=r.ariaLabel,u=r.className,d=r.svgStyle,h=Gbe(r,["href","size","direction","octoColor","bannerColor","ariaLabel","className","svgStyle"]),f={position:"absolute",top:0,fill:a},p={},m="",b="",y="";o==="left"?(m="M250 0L135 115h-15l-12 27L0 250V0z",b="M122 109c15-9 9-19 9-19-3-7-2-11-2-11 1-7-3-2-3-2-4 5-2 11-2 11 3 10-5 15-9 16",y="M135 115s-4 2-5 0l-14-14c-3-2-6-3-8-3 8-11 15-24-2-41-5-5-10-7-16-7-1-2-3-7-12-11 0 0-5 3-7 16-4 2-8 5-12 9s-7 8-9 12c-14 4-17 9-17 9 4 8 9 11 11 11 0 6 2 11 7 16 16 16 30 10 41 2 0 3 1 7 5 11l12 11c1 2-1 6-1 6z",f.left=0,p.WebkitTransformOrigin="120px 144px",p.transformOrigin="120px 144px"):(m="M0 0l115 115h15l12 27 108 108V0z",b="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16",y="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z",f.right=0,p.WebkitTransformOrigin="130px 106px",p.transformOrigin="130px 106px");var x=typeof u=="string"?" "+u:"";return t0.default.createElement("a",bz({},h,{href:i,className:"github-corner"+x,"aria-label":c}),t0.default.createElement("svg",{width:s,height:s,viewBox:"0 0 250 250",style:bz({},f,d)},t0.default.createElement("path",{className:"octo-banner",d:m,fill:l}),t0.default.createElement("path",{className:"octo-arm",d:b,style:p}),t0.default.createElement("path",{className:"octo-body",d:y})))}}]),e}(Y9.Component);K9.defaultProps={href:"/",size:80,direction:"right",octoColor:"#fff",bannerColor:"#151513",ariaLabel:"Open GitHub project"};var Xbe=X9.default=K9;const Ybe=At(Vt)`
  height: calc(100vh - 1px);
  padding: 0;
  margin: 0;
  align-items: center;
  justify-content: space-around;
  overflow: hidden;
  scroll-behavior: unset;
`,qbe=t=>$(Ybe,{children:t.children}),Kbe=At.div`
  padding-top: 8px;
  padding-bottom: 4px;
  align-self: center;
  justify-content: center;
  align-items: center;
  text-align: center;
  display: flex;
`;function Zbe(t){return Be(Kbe,{children:[t.startIcon,$(En,{sx:{fontSize:"1.8em",marginLeft:"0.2em"},children:t.children})]})}const Qbe=()=>{const t=Ts();return P.useEffect(()=>{window.location.pathname=="/"&&t("/projects",{replace:!0})},[]),$(qbe,{children:Be(Vt,{style:{margin:"20px"},children:[$(Xbe,{href:"https://github.com/kubohiroya/racetrack-economy-model",size:64}),$(Zbe,{startIcon:$(kO,{fontSize:"large"}),children:"Geo-Eco: Graph Structured Economy Model Simulator"}),$(Zk,{})]})})},wz=t=>$("span",{style:{display:"inline",verticalAlign:"middle",margin:"3px"},children:t.children});function d_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z9={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var d=typeof d_=="function"&&d_;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[c]={exports:{}};r[c][0].call(f.exports,function(p){var m=r[c][1][p];return o(m||p)},f,f.exports,n,r,i,s)}return i[c].exports}for(var a=typeof d_=="function"&&d_,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,h,f,p,m,b=[],y=0,x=l.length,_=x,w=s.getTypeOf(l)!=="string";y<l.length;)_=x-y,d=w?(c=l[y++],u=y<x?l[y++]:0,y<x?l[y++]:0):(c=l.charCodeAt(y++),u=y<x?l.charCodeAt(y++):0,y<x?l.charCodeAt(y++):0),h=c>>2,f=(3&c)<<4|u>>4,p=1<_?(15&u)<<2|d>>6:64,m=2<_?63&d:64,b.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(m));return b.join("")},i.decode=function(l){var c,u,d,h,f,p,m=0,b=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var x,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|_):new Array(0|_);m<l.length;)c=a.indexOf(l.charAt(m++))<<2|(h=a.indexOf(l.charAt(m++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(m++)))>>2,d=(3&f)<<6|(p=a.indexOf(l.charAt(m++))),x[b++]=c,f!==64&&(x[b++]=u),p!==64&&(x[b++]=d);return x}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,f,p){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(f,p){var m,b="";for(m=0;m<p;m++)b+=String.fromCharCode(255&f),f>>>=8;return b}function o(f,p,m,b,y,x){var _,w,E=f.file,S=f.compression,A=x!==c.utf8encode,k=a.transformTo("string",x(E.name)),M=a.transformTo("string",c.utf8encode(E.name)),I=E.comment,B=a.transformTo("string",x(I)),R=a.transformTo("string",c.utf8encode(I)),O=M.length!==E.name.length,C=R.length!==I.length,F="",q="",G="",j=E.dir,H=E.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(Z.crc32=f.crc32,Z.compressedSize=f.compressedSize,Z.uncompressedSize=f.uncompressedSize);var X=0;p&&(X|=8),A||!O&&!C||(X|=2048);var ee=0,ve=0;j&&(ee|=16),y==="UNIX"?(ve=798,ee|=function(fe,be){var Le=fe;return fe||(Le=be?16893:33204),(65535&Le)<<16}(E.unixPermissions,j)):(ve=20,ee|=function(fe){return 63&(fe||0)}(E.dosPermissions)),_=H.getUTCHours(),_<<=6,_|=H.getUTCMinutes(),_<<=5,_|=H.getUTCSeconds()/2,w=H.getUTCFullYear()-1980,w<<=4,w|=H.getUTCMonth()+1,w<<=5,w|=H.getUTCDate(),O&&(q=s(1,1)+s(u(k),4)+M,F+="up"+s(q.length,2)+q),C&&(G=s(1,1)+s(u(B),4)+R,F+="uc"+s(G.length,2)+G);var oe="";return oe+=`
\0`,oe+=s(X,2),oe+=S.magic,oe+=s(_,2),oe+=s(w,2),oe+=s(Z.crc32,4),oe+=s(Z.compressedSize,4),oe+=s(Z.uncompressedSize,4),oe+=s(k.length,2),oe+=s(F.length,2),{fileRecord:d.LOCAL_FILE_HEADER+oe+k+F,dirRecord:d.CENTRAL_FILE_HEADER+s(ve,2)+oe+s(B.length,2)+"\0\0\0\0"+s(ee,4)+s(b,4)+k+F+B}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(f,p,m,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=b,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-b-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=o(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=o(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(b){return d.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,b=function(y,x,_,w,E){var S=a.transformTo("string",E(w));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(x,4)+s(_,4)+s(S.length,2)+S}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var p=function(x,_){var w=x||_,E=s[w];if(!E)throw new Error(w+" is not a valid compression method !");return E}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},b=f.dir,y=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:h,dir:b,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new o.Promise(function(f,p){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(b){p(b)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var p=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var b=new l(f);return b.load(m),b}).then(function(m){var b=[o.Promise.resolve(m)],y=m.files;if(f.checkCRC32)for(var x=0;x<y.length;x++)b.push(d(y[x]));return o.Promise.all(b)}).then(function(m){for(var b=m.shift(),y=b.files,x=0;x<y.length;x++){var _=y[x],w=_.fileNameStr,E=s.resolve(_.fileNameStr);p.file(E,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:f.createFolders}),_.dir||(p.file(E).unsafeOriginalName=w)}return b.zipComment.length&&(p.comment=b.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(E,S,A){var k,M=a.getTypeOf(S),I=a.extend(A||{},u);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(E=y(E)),I.createFolders&&(k=b(E))&&x.call(this,k,!0);var B=M==="string"&&I.binary===!1&&I.base64===!1;A&&A.binary!==void 0||(I.binary=!B),(S instanceof d&&S.uncompressedSize===0||I.dir||!S||S.length===0)&&(I.base64=!1,I.binary=!0,S="",I.compression="STORE",M="string");var R=null;R=S instanceof d||S instanceof l?S:p.isNode&&p.isStream(S)?new m(E,S):a.prepareContent(E,S,I.binary,I.optimizedBinaryString,I.base64);var O=new h(E,R,I);this.files[E]=O}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),p=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),b=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var S=E.lastIndexOf("/");return 0<S?E.substring(0,S):""},y=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},x=function(E,S){return S=S!==void 0?S:u.createFolders,E=y(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:S}),this.files[E]};function _(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var S,A,k;for(S in this.files)k=this.files[S],(A=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&E(A,k)},filter:function(E){var S=[];return this.forEach(function(A,k){E(A,k)&&S.push(k)}),S},file:function(E,S,A){if(arguments.length!==1)return E=this.root+E,s.call(this,E,S,A),this;if(_(E)){var k=E;return this.filter(function(I,B){return!B.dir&&k.test(I)})}var M=this.files[this.root+E];return M&&!M.dir?M:null},folder:function(E){if(!E)return this;if(_(E))return this.filter(function(M,I){return I.dir&&E.test(M)});var S=this.root+E,A=x.call(this,S),k=this.clone();return k.root=A.name,k},remove:function(E){E=this.root+E;var S=this.files[E];if(S||(E.slice(-1)!=="/"&&(E+="/"),S=this.files[E]),S&&!S.dir)delete this.files[E];else for(var A=this.filter(function(M,I){return I.name.slice(0,E.length)===E}),k=0;k<A.length;k++)delete this.files[A[k].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var S,A={};try{if((A=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");a.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var k=A.comment||this.comment||"";S=f.generateWorker(this,A,k)}catch(M){(S=new l("error")).error(M)}return new c(S,A.type||"string",A.mimeType)},generateAsync:function(E,S){return this.generateInternalStream(E).accumulate(S)},generateNodeStream:function(E,S){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(S)}};r.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(d):o.uint8array?new u(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new u.Promise(function(b,y){var x=[],_=p._internalType,w=p._outputType,E=p._mimeType;p.on("data",function(S,A){x.push(S),m&&m(A)}).on("error",function(S){x=[],y(S)}).on("end",function(){try{var S=function(A,k,M){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",k),M);case"base64":return l.encode(k);default:return s.transformTo(A,k)}}(w,function(A,k){var M,I=0,B=null,R=0;for(M=0;M<k.length;M++)R+=k[M].length;switch(A){case"string":return k.join("");case"array":return Array.prototype.concat.apply([],k);case"uint8array":for(B=new Uint8Array(R),M=0;M<k.length;M++)B.set(k[M],I),I+=k[M].length;return B;case"nodebuffer":return Buffer.concat(k);default:throw new Error("concat : unsupported type '"+A+"'")}}(_,x),E);b(S)}catch(A){y(A)}x=[]}).resume()})}function f(p,m,b){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=b,s.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var b=this;return p==="data"?this._worker.on(p,function(y){m.call(b,y.data,y.meta)}):this._worker.on(p,function(){s.delay(m,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(p){var m,b,y,x,_,w=p.length,E=0;for(x=0;x<w;x++)(64512&(b=p.charCodeAt(x)))==55296&&x+1<w&&(64512&(y=p.charCodeAt(x+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),x++),E+=b<128?1:b<2048?2:b<65536?3:4;for(m=o.uint8array?new Uint8Array(E):new Array(E),x=_=0;_<E;x++)(64512&(b=p.charCodeAt(x)))==55296&&x+1<w&&(64512&(y=p.charCodeAt(x+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),x++),b<128?m[_++]=b:(b<2048?m[_++]=192|b>>>6:(b<65536?m[_++]=224|b>>>12:(m[_++]=240|b>>>18,m[_++]=128|b>>>12&63),m[_++]=128|b>>>6&63),m[_++]=128|63&b);return m}(f)},i.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,b,y,x,_=p.length,w=new Array(2*_);for(m=b=0;m<_;)if((y=p[m++])<128)w[b++]=y;else if(4<(x=c[y]))w[b++]=65533,m+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&m<_;)y=y<<6|63&p[m++],x--;1<x?w[b++]=65533:y<65536?w[b++]=y:(y-=65536,w[b++]=55296|y>>10&1023,w[b++]=56320|1023&y)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),s.applyFromCharCode(w)}(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(d,l),d.prototype.processChunk=function(f){var p=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var b=function(x,_){var w;for((_=_||x.length)>x.length&&(_=x.length),w=_-1;0<=w&&(192&x[w])==128;)w--;return w<0||w===0?_:w+c[x[w]]>_?w:_}(p),y=p;b!==p.length&&(o.uint8array?(y=p.subarray(0,b),this.leftOver=p.subarray(b,p.length)):(y=p.slice(0,b),this.leftOver=p.slice(b,p.length))),this.push({data:i.utf8decode(y),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(m){return m}function u(m,b){for(var y=0;y<m.length;++y)b[y]=255&m.charCodeAt(y);return b}n("setimmediate"),i.newBlob=function(m,b){i.checkSupport("blob");try{return new Blob([m],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,b,y){var x=[],_=0,w=m.length;if(w<=y)return String.fromCharCode.apply(null,m);for(;_<w;)b==="array"||b==="nodebuffer"?x.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+y,w)))):x.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+y,w)))),_+=y;return x.join("")},stringifyByChar:function(m){for(var b="",y=0;y<m.length;y++)b+=String.fromCharCode(m[y]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var b=65536,y=i.getTypeOf(m),x=!0;if(y==="uint8array"?x=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(x=d.applyCanBeUsed.nodebuffer),x)for(;1<b;)try{return d.stringifyByChunk(m,y,b)}catch{b=Math.floor(b/2)}return d.stringifyByChar(m)}function f(m,b){for(var y=0;y<m.length;y++)b[y]=m[y];return b}i.applyFromCharCode=h;var p={};p.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},p.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,b){if(b=b||"",!m)return b;i.checkSupport(m);var y=i.getTypeOf(b);return p[y][m](b)},i.resolve=function(m){for(var b=m.split("/"),y=[],x=0;x<b.length;x++){var _=b[x];_==="."||_===""&&x!==0&&x!==b.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var b,y,x="";for(y=0;y<(m||"").length;y++)x+="\\x"+((b=m.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return x},i.delay=function(m,b,y){setImmediate(function(){m.apply(y||null,b||[])})},i.inherits=function(m,b){function y(){}y.prototype=b.prototype,m.prototype=new y},i.extend=function(){var m,b,y={};for(m=0;m<arguments.length;m++)for(b in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],b)&&y[b]===void 0&&(y[b]=arguments[m][b]);return y},i.prepareContent=function(m,b,y,x,_){return l.Promise.resolve(b).then(function(w){return s.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,S){var A=new FileReader;A.onload=function(k){E(k.target.result)},A.onerror=function(k){S(k.target.error)},A.readAsArrayBuffer(w)}):w}).then(function(w){var E=i.getTypeOf(w);return E?(E==="arraybuffer"?w=i.transformTo("uint8array",w):E==="string"&&(_?w=o.decode(w):y&&x!==!0&&(w=function(S){return u(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(w))),w):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(b){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===b)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,b,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)p=f.readInt(2),m=f.readInt(2),b=f.readData(m),this.extraFields[p]={id:p,length:m,value:b};f.setIndex(y)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(p,m,b){this.name=p,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=m,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(p){var m=null,b="string";try{if(!p)throw new Error("No output type specified.");var y=(b=p.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),m=this._decompressWorker();var x=!this._dataBinary;x&&!y&&(m=m.pipe(new l.Utf8EncodeWorker)),!x&&y&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(_){(m=new u("error")).error(_)}return new o(m,b,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(b,p,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(p),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var f=[];function p(){var m,b;a=!0;for(var y=f.length;y;){for(b=f,f=[],m=-1;++m<y;)b[m]();y=f.length}a=!1}r.exports=function(m){f.push(m)!==1||a||o()}}).call(this,typeof xi<"u"?xi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function h(y,x,_){this.promise=y,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function f(y,x,_){s(function(){var w;try{w=x(_)}catch(E){return a.reject(y,E)}w===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,w)})}function p(y){var x=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof x=="function")return function(){x.apply(y,arguments)}}function m(y,x){var _=!1;function w(A){_||(_=!0,a.reject(y,A))}function E(A){_||(_=!0,a.resolve(y,A))}var S=b(function(){x(E,w)});S.status==="error"&&w(S.value)}function b(y,x){var _={};try{_.value=y(x),_.status="success"}catch(w){_.status="error",_.value=w}return _}(r.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var x=this.constructor;return this.then(function(_){return x.resolve(y()).then(function(){return _})},function(_){return x.resolve(y()).then(function(){throw _})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,x){if(typeof y!="function"&&this.state===c||typeof x!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==u?f(_,this.state===c?y:x,this.outcome):this.queue.push(new h(_,y,x)),_},h.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){a.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},a.resolve=function(y,x){var _=b(p,x);if(_.status==="error")return a.reject(y,_.value);var w=_.value;if(w)m(y,w);else{y.state=c,y.outcome=x;for(var E=-1,S=y.queue.length;++E<S;)y.queue[E].callFulfilled(x)}return y},a.reject=function(y,x){y.state=l,y.outcome=x;for(var _=-1,w=y.queue.length;++_<w;)y.queue[_].callRejected(x);return y},d.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},d.reject=function(y){var x=new this(o);return a.reject(x,y)},d.all=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,w=!1;if(!_)return this.resolve([]);for(var E=new Array(_),S=0,A=-1,k=new this(o);++A<_;)M(y[A],A);return k;function M(I,B){x.resolve(I).then(function(R){E[B]=R,++S!==_||w||(w=!0,a.resolve(k,E))},function(R){w||(w=!0,a.reject(k,R))})}},d.race=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,w=!1;if(!_)return this.resolve([]);for(var E=-1,S=new this(o);++E<_;)A=y[E],x.resolve(A).then(function(k){w||(w=!0,a.resolve(S,k))},function(k){w||(w=!0,a.reject(S,k))});var A;return S}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(_!==d)throw new Error(l[_]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var w;if(w=typeof x.dictionary=="string"?a.string2buf(x.dictionary):u.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(_=s.deflateSetDictionary(this.strm,w))!==d)throw new Error(l[_]);this._dict_set=!0}}function b(y,x){var _=new m(x);if(_.push(y,!0),_.err)throw _.msg||l[_.err];return _.result}m.prototype.push=function(y,x){var _,w,E=this.strm,S=this.options.chunkSize;if(this.ended)return!1;w=x===~~x?x:x===!0?4:0,typeof y=="string"?E.input=a.string2buf(y):u.call(y)==="[object ArrayBuffer]"?E.input=new Uint8Array(y):E.input=y,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(S),E.next_out=0,E.avail_out=S),(_=s.deflate(E,w))!==1&&_!==d)return this.onEnd(_),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&_!==1);return w===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===d):w!==2||(this.onEnd(d),!(E.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=m,i.deflate=b,i.deflateRaw=function(y,x){return(x=x||{}).raw=!0,b(y,x)},i.gzip=function(y,x){return(x=x||{}).gzip=!0,b(y,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||m&&m.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function p(m,b){var y=new f(b);if(y.push(m,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(m,b){var y,x,_,w,E,S,A=this.strm,k=this.options.chunkSize,M=this.options.dictionary,I=!1;if(this.ended)return!1;x=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?A.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(k),A.next_out=0,A.avail_out=k),(y=s.inflate(A,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(S=typeof M=="string"?a.string2buf(M):h.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,y=s.inflateSetDictionary(this.strm,S)),y===l.Z_BUF_ERROR&&I===!0&&(y=l.Z_OK,I=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&y!==l.Z_STREAM_END&&(A.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(A.output,A.next_out),w=A.next_out-_,E=a.buf2string(A.output,_),A.next_out=w,A.avail_out=k-w,w&&o.arraySet(A.output,A.output,_,w,0),this.onData(E)):this.onData(o.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(I=!0)}while((0<A.avail_in||A.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(A.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=f,i.inflate=p,i.inflateRaw=function(m,b){return(b=b||{}).raw=!0,p(m,b)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,p;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(p=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],p.set(f,h),h+=f.length;return p}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}l[254]=l[254]=1,i.string2buf=function(d){var h,f,p,m,b,y=d.length,x=0;for(m=0;m<y;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),x+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(x),m=b=0;b<x;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?h[b++]=f:(f<2048?h[b++]=192|f>>>6:(f<65536?h[b++]=224|f>>>12:(h[b++]=240|f>>>18,h[b++]=128|f>>>12&63),h[b++]=128|f>>>6&63),h[b++]=128|63&f);return h},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},i.buf2string=function(d,h){var f,p,m,b,y=h||d.length,x=new Array(2*y);for(f=p=0;f<y;)if((m=d[f++])<128)x[p++]=m;else if(4<(b=l[m]))x[p++]=65533,f+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&f<y;)m=m<<6|63&d[f++],b--;1<b?x[p++]=65533:m<65536?x[p++]=m:(m-=65536,x[p++]=55296|m>>10&1023,x[p++]=56320|1023&m)}return u(x,p)},i.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=s,d=c+l;o^=-1;for(var h=c;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,f=0,p=-2,m=-1,b=4,y=2,x=8,_=9,w=286,E=30,S=19,A=2*w+1,k=15,M=3,I=258,B=I+M+1,R=42,O=113,C=1,F=2,q=3,G=4;function j(D,ie){return D.msg=u[ie],ie}function H(D){return(D<<1)-(4<D?9:0)}function Z(D){for(var ie=D.length;0<=--ie;)D[ie]=0}function X(D){var ie=D.state,ae=ie.pending;ae>D.avail_out&&(ae=D.avail_out),ae!==0&&(o.arraySet(D.output,ie.pending_buf,ie.pending_out,ae,D.next_out),D.next_out+=ae,ie.pending_out+=ae,D.total_out+=ae,D.avail_out-=ae,ie.pending-=ae,ie.pending===0&&(ie.pending_out=0))}function ee(D,ie){a._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,ie),D.block_start=D.strstart,X(D.strm)}function ve(D,ie){D.pending_buf[D.pending++]=ie}function oe(D,ie){D.pending_buf[D.pending++]=ie>>>8&255,D.pending_buf[D.pending++]=255&ie}function fe(D,ie){var ae,K,W=D.max_chain_length,ne=D.strstart,pe=D.prev_length,me=D.nice_match,he=D.strstart>D.w_size-B?D.strstart-(D.w_size-B):0,Pe=D.window,Oe=D.w_mask,de=D.prev,Ce=D.strstart+I,Ye=Pe[ne+pe-1],Fe=Pe[ne+pe];D.prev_length>=D.good_match&&(W>>=2),me>D.lookahead&&(me=D.lookahead);do if(Pe[(ae=ie)+pe]===Fe&&Pe[ae+pe-1]===Ye&&Pe[ae]===Pe[ne]&&Pe[++ae]===Pe[ne+1]){ne+=2,ae++;do;while(Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&Pe[++ne]===Pe[++ae]&&ne<Ce);if(K=I-(Ce-ne),ne=Ce-I,pe<K){if(D.match_start=ie,me<=(pe=K))break;Ye=Pe[ne+pe-1],Fe=Pe[ne+pe]}}while((ie=de[ie&Oe])>he&&--W!=0);return pe<=D.lookahead?pe:D.lookahead}function be(D){var ie,ae,K,W,ne,pe,me,he,Pe,Oe,de=D.w_size;do{if(W=D.window_size-D.lookahead-D.strstart,D.strstart>=de+(de-B)){for(o.arraySet(D.window,D.window,de,de,0),D.match_start-=de,D.strstart-=de,D.block_start-=de,ie=ae=D.hash_size;K=D.head[--ie],D.head[ie]=de<=K?K-de:0,--ae;);for(ie=ae=de;K=D.prev[--ie],D.prev[ie]=de<=K?K-de:0,--ae;);W+=de}if(D.strm.avail_in===0)break;if(pe=D.strm,me=D.window,he=D.strstart+D.lookahead,Pe=W,Oe=void 0,Oe=pe.avail_in,Pe<Oe&&(Oe=Pe),ae=Oe===0?0:(pe.avail_in-=Oe,o.arraySet(me,pe.input,pe.next_in,Oe,he),pe.state.wrap===1?pe.adler=l(pe.adler,me,Oe,he):pe.state.wrap===2&&(pe.adler=c(pe.adler,me,Oe,he)),pe.next_in+=Oe,pe.total_in+=Oe,Oe),D.lookahead+=ae,D.lookahead+D.insert>=M)for(ne=D.strstart-D.insert,D.ins_h=D.window[ne],D.ins_h=(D.ins_h<<D.hash_shift^D.window[ne+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[ne+M-1])&D.hash_mask,D.prev[ne&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=ne,ne++,D.insert--,!(D.lookahead+D.insert<M)););}while(D.lookahead<B&&D.strm.avail_in!==0)}function Le(D,ie){for(var ae,K;;){if(D.lookahead<B){if(be(D),D.lookahead<B&&ie===d)return C;if(D.lookahead===0)break}if(ae=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),ae!==0&&D.strstart-ae<=D.w_size-B&&(D.match_length=fe(D,ae)),D.match_length>=M)if(K=a._tr_tally(D,D.strstart-D.match_start,D.match_length-M),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=M){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else K=a._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(K&&(ee(D,!1),D.strm.avail_out===0))return C}return D.insert=D.strstart<M-1?D.strstart:M-1,ie===h?(ee(D,!0),D.strm.avail_out===0?q:G):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?C:F}function se(D,ie){for(var ae,K,W;;){if(D.lookahead<B){if(be(D),D.lookahead<B&&ie===d)return C;if(D.lookahead===0)break}if(ae=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=M-1,ae!==0&&D.prev_length<D.max_lazy_match&&D.strstart-ae<=D.w_size-B&&(D.match_length=fe(D,ae),D.match_length<=5&&(D.strategy===1||D.match_length===M&&4096<D.strstart-D.match_start)&&(D.match_length=M-1)),D.prev_length>=M&&D.match_length<=D.prev_length){for(W=D.strstart+D.lookahead-M,K=a._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-M),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=W&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,ae=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=M-1,D.strstart++,K&&(ee(D,!1),D.strm.avail_out===0))return C}else if(D.match_available){if((K=a._tr_tally(D,0,D.window[D.strstart-1]))&&ee(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return C}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(K=a._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<M-1?D.strstart:M-1,ie===h?(ee(D,!0),D.strm.avail_out===0?q:G):D.last_lit&&(ee(D,!1),D.strm.avail_out===0)?C:F}function ue(D,ie,ae,K,W){this.good_length=D,this.max_lazy=ie,this.nice_length=ae,this.max_chain=K,this.func=W}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(k+1),this.heap=new o.Buf16(2*w+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(D){var ie;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=y,(ie=D.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?R:O,D.adler=ie.wrap===2?0:1,ie.last_flush=d,a._tr_init(ie),f):j(D,p)}function Me(D){var ie=ge(D);return ie===f&&function(ae){ae.window_size=2*ae.w_size,Z(ae.head),ae.max_lazy_match=s[ae.level].max_lazy,ae.good_match=s[ae.level].good_length,ae.nice_match=s[ae.level].nice_length,ae.max_chain_length=s[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=M-1,ae.match_available=0,ae.ins_h=0}(D.state),ie}function Se(D,ie,ae,K,W,ne){if(!D)return p;var pe=1;if(ie===m&&(ie=6),K<0?(pe=0,K=-K):15<K&&(pe=2,K-=16),W<1||_<W||ae!==x||K<8||15<K||ie<0||9<ie||ne<0||b<ne)return j(D,p);K===8&&(K=9);var me=new Te;return(D.state=me).strm=D,me.wrap=pe,me.gzhead=null,me.w_bits=K,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=W+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+M-1)/M),me.window=new o.Buf8(2*me.w_size),me.head=new o.Buf16(me.hash_size),me.prev=new o.Buf16(me.w_size),me.lit_bufsize=1<<W+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new o.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=ie,me.strategy=ne,me.method=ae,Me(D)}s=[new ue(0,0,0,0,function(D,ie){var ae=65535;for(ae>D.pending_buf_size-5&&(ae=D.pending_buf_size-5);;){if(D.lookahead<=1){if(be(D),D.lookahead===0&&ie===d)return C;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var K=D.block_start+ae;if((D.strstart===0||D.strstart>=K)&&(D.lookahead=D.strstart-K,D.strstart=K,ee(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-B&&(ee(D,!1),D.strm.avail_out===0))return C}return D.insert=0,ie===h?(ee(D,!0),D.strm.avail_out===0?q:G):(D.strstart>D.block_start&&(ee(D,!1),D.strm.avail_out),C)}),new ue(4,4,8,4,Le),new ue(4,5,16,8,Le),new ue(4,6,32,32,Le),new ue(4,4,16,16,se),new ue(8,16,32,32,se),new ue(8,16,128,128,se),new ue(8,32,128,256,se),new ue(32,128,258,1024,se),new ue(32,258,258,4096,se)],i.deflateInit=function(D,ie){return Se(D,ie,x,15,8,0)},i.deflateInit2=Se,i.deflateReset=Me,i.deflateResetKeep=ge,i.deflateSetHeader=function(D,ie){return D&&D.state?D.state.wrap!==2?p:(D.state.gzhead=ie,f):p},i.deflate=function(D,ie){var ae,K,W,ne;if(!D||!D.state||5<ie||ie<0)return D?j(D,p):p;if(K=D.state,!D.output||!D.input&&D.avail_in!==0||K.status===666&&ie!==h)return j(D,D.avail_out===0?-5:p);if(K.strm=D,ae=K.last_flush,K.last_flush=ie,K.status===R)if(K.wrap===2)D.adler=0,ve(K,31),ve(K,139),ve(K,8),K.gzhead?(ve(K,(K.gzhead.text?1:0)+(K.gzhead.hcrc?2:0)+(K.gzhead.extra?4:0)+(K.gzhead.name?8:0)+(K.gzhead.comment?16:0)),ve(K,255&K.gzhead.time),ve(K,K.gzhead.time>>8&255),ve(K,K.gzhead.time>>16&255),ve(K,K.gzhead.time>>24&255),ve(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),ve(K,255&K.gzhead.os),K.gzhead.extra&&K.gzhead.extra.length&&(ve(K,255&K.gzhead.extra.length),ve(K,K.gzhead.extra.length>>8&255)),K.gzhead.hcrc&&(D.adler=c(D.adler,K.pending_buf,K.pending,0)),K.gzindex=0,K.status=69):(ve(K,0),ve(K,0),ve(K,0),ve(K,0),ve(K,0),ve(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),ve(K,3),K.status=O);else{var pe=x+(K.w_bits-8<<4)<<8;pe|=(2<=K.strategy||K.level<2?0:K.level<6?1:K.level===6?2:3)<<6,K.strstart!==0&&(pe|=32),pe+=31-pe%31,K.status=O,oe(K,pe),K.strstart!==0&&(oe(K,D.adler>>>16),oe(K,65535&D.adler)),D.adler=1}if(K.status===69)if(K.gzhead.extra){for(W=K.pending;K.gzindex<(65535&K.gzhead.extra.length)&&(K.pending!==K.pending_buf_size||(K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),X(D),W=K.pending,K.pending!==K.pending_buf_size));)ve(K,255&K.gzhead.extra[K.gzindex]),K.gzindex++;K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),K.gzindex===K.gzhead.extra.length&&(K.gzindex=0,K.status=73)}else K.status=73;if(K.status===73)if(K.gzhead.name){W=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),X(D),W=K.pending,K.pending===K.pending_buf_size)){ne=1;break}ne=K.gzindex<K.gzhead.name.length?255&K.gzhead.name.charCodeAt(K.gzindex++):0,ve(K,ne)}while(ne!==0);K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),ne===0&&(K.gzindex=0,K.status=91)}else K.status=91;if(K.status===91)if(K.gzhead.comment){W=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),X(D),W=K.pending,K.pending===K.pending_buf_size)){ne=1;break}ne=K.gzindex<K.gzhead.comment.length?255&K.gzhead.comment.charCodeAt(K.gzindex++):0,ve(K,ne)}while(ne!==0);K.gzhead.hcrc&&K.pending>W&&(D.adler=c(D.adler,K.pending_buf,K.pending-W,W)),ne===0&&(K.status=103)}else K.status=103;if(K.status===103&&(K.gzhead.hcrc?(K.pending+2>K.pending_buf_size&&X(D),K.pending+2<=K.pending_buf_size&&(ve(K,255&D.adler),ve(K,D.adler>>8&255),D.adler=0,K.status=O)):K.status=O),K.pending!==0){if(X(D),D.avail_out===0)return K.last_flush=-1,f}else if(D.avail_in===0&&H(ie)<=H(ae)&&ie!==h)return j(D,-5);if(K.status===666&&D.avail_in!==0)return j(D,-5);if(D.avail_in!==0||K.lookahead!==0||ie!==d&&K.status!==666){var me=K.strategy===2?function(he,Pe){for(var Oe;;){if(he.lookahead===0&&(be(he),he.lookahead===0)){if(Pe===d)return C;break}if(he.match_length=0,Oe=a._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++,Oe&&(ee(he,!1),he.strm.avail_out===0))return C}return he.insert=0,Pe===h?(ee(he,!0),he.strm.avail_out===0?q:G):he.last_lit&&(ee(he,!1),he.strm.avail_out===0)?C:F}(K,ie):K.strategy===3?function(he,Pe){for(var Oe,de,Ce,Ye,Fe=he.window;;){if(he.lookahead<=I){if(be(he),he.lookahead<=I&&Pe===d)return C;if(he.lookahead===0)break}if(he.match_length=0,he.lookahead>=M&&0<he.strstart&&(de=Fe[Ce=he.strstart-1])===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]){Ye=he.strstart+I;do;while(de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&de===Fe[++Ce]&&Ce<Ye);he.match_length=I-(Ye-Ce),he.match_length>he.lookahead&&(he.match_length=he.lookahead)}if(he.match_length>=M?(Oe=a._tr_tally(he,1,he.match_length-M),he.lookahead-=he.match_length,he.strstart+=he.match_length,he.match_length=0):(Oe=a._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++),Oe&&(ee(he,!1),he.strm.avail_out===0))return C}return he.insert=0,Pe===h?(ee(he,!0),he.strm.avail_out===0?q:G):he.last_lit&&(ee(he,!1),he.strm.avail_out===0)?C:F}(K,ie):s[K.level].func(K,ie);if(me!==q&&me!==G||(K.status=666),me===C||me===q)return D.avail_out===0&&(K.last_flush=-1),f;if(me===F&&(ie===1?a._tr_align(K):ie!==5&&(a._tr_stored_block(K,0,0,!1),ie===3&&(Z(K.head),K.lookahead===0&&(K.strstart=0,K.block_start=0,K.insert=0))),X(D),D.avail_out===0))return K.last_flush=-1,f}return ie!==h?f:K.wrap<=0?1:(K.wrap===2?(ve(K,255&D.adler),ve(K,D.adler>>8&255),ve(K,D.adler>>16&255),ve(K,D.adler>>24&255),ve(K,255&D.total_in),ve(K,D.total_in>>8&255),ve(K,D.total_in>>16&255),ve(K,D.total_in>>24&255)):(oe(K,D.adler>>>16),oe(K,65535&D.adler)),X(D),0<K.wrap&&(K.wrap=-K.wrap),K.pending!==0?f:1)},i.deflateEnd=function(D){var ie;return D&&D.state?(ie=D.state.status)!==R&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==O&&ie!==666?j(D,p):(D.state=null,ie===O?j(D,-3):f):p},i.deflateSetDictionary=function(D,ie){var ae,K,W,ne,pe,me,he,Pe,Oe=ie.length;if(!D||!D.state||(ne=(ae=D.state).wrap)===2||ne===1&&ae.status!==R||ae.lookahead)return p;for(ne===1&&(D.adler=l(D.adler,ie,Oe,0)),ae.wrap=0,Oe>=ae.w_size&&(ne===0&&(Z(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),Pe=new o.Buf8(ae.w_size),o.arraySet(Pe,ie,Oe-ae.w_size,ae.w_size,0),ie=Pe,Oe=ae.w_size),pe=D.avail_in,me=D.next_in,he=D.input,D.avail_in=Oe,D.next_in=0,D.input=ie,be(ae);ae.lookahead>=M;){for(K=ae.strstart,W=ae.lookahead-(M-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[K+M-1])&ae.hash_mask,ae.prev[K&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=K,K++,--W;);ae.strstart=K,ae.lookahead=M-1,be(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=M-1,ae.match_available=0,D.next_in=me,D.input=he,D.avail_in=pe,ae.wrap=ne,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,d,h,f,p,m,b,y,x,_,w,E,S,A,k,M,I,B,R,O,C,F;a=s.state,l=s.next_in,C=s.input,c=l+(s.avail_in-5),u=s.next_out,F=s.output,d=u-(o-s.avail_out),h=u+(s.avail_out-257),f=a.dmax,p=a.wsize,m=a.whave,b=a.wnext,y=a.window,x=a.hold,_=a.bits,w=a.lencode,E=a.distcode,S=(1<<a.lenbits)-1,A=(1<<a.distbits)-1;e:do{_<15&&(x+=C[l++]<<_,_+=8,x+=C[l++]<<_,_+=8),k=w[x&S];t:for(;;){if(x>>>=M=k>>>24,_-=M,(M=k>>>16&255)===0)F[u++]=65535&k;else{if(!(16&M)){if(!(64&M)){k=w[(65535&k)+(x&(1<<M)-1)];continue t}if(32&M){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}I=65535&k,(M&=15)&&(_<M&&(x+=C[l++]<<_,_+=8),I+=x&(1<<M)-1,x>>>=M,_-=M),_<15&&(x+=C[l++]<<_,_+=8,x+=C[l++]<<_,_+=8),k=E[x&A];n:for(;;){if(x>>>=M=k>>>24,_-=M,!(16&(M=k>>>16&255))){if(!(64&M)){k=E[(65535&k)+(x&(1<<M)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(B=65535&k,_<(M&=15)&&(x+=C[l++]<<_,(_+=8)<M&&(x+=C[l++]<<_,_+=8)),f<(B+=x&(1<<M)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=M,_-=M,(M=u-d)<B){if(m<(M=B-M)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(O=y,(R=0)===b){if(R+=p-M,M<I){for(I-=M;F[u++]=y[R++],--M;);R=u-B,O=F}}else if(b<M){if(R+=p+b-M,(M-=b)<I){for(I-=M;F[u++]=y[R++],--M;);if(R=0,b<I){for(I-=M=b;F[u++]=y[R++],--M;);R=u-B,O=F}}}else if(R+=b-M,M<I){for(I-=M;F[u++]=y[R++],--M;);R=u-B,O=F}for(;2<I;)F[u++]=O[R++],F[u++]=O[R++],F[u++]=O[R++],I-=3;I&&(F[u++]=O[R++],1<I&&(F[u++]=O[R++]))}else{for(R=u-B;F[u++]=F[R++],F[u++]=F[R++],F[u++]=F[R++],2<(I-=3););I&&(F[u++]=F[R++],1<I&&(F[u++]=F[R++]))}break}}break}}while(l<c&&u<h);l-=I=_>>3,x&=(1<<(_-=I<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),a.hold=x,a.bits=_}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,f=-2,p=1,m=852,b=592;function y(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(R){var O;return R&&R.state?(O=R.state,R.total_in=R.total_out=O.total=0,R.msg="",O.wrap&&(R.adler=1&O.wrap),O.mode=p,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new s.Buf32(m),O.distcode=O.distdyn=new s.Buf32(b),O.sane=1,O.back=-1,h):f}function w(R){var O;return R&&R.state?((O=R.state).wsize=0,O.whave=0,O.wnext=0,_(R)):f}function E(R,O){var C,F;return R&&R.state?(F=R.state,O<0?(C=0,O=-O):(C=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?f:(F.window!==null&&F.wbits!==O&&(F.window=null),F.wrap=C,F.wbits=O,w(R))):f}function S(R,O){var C,F;return R?(F=new x,(R.state=F).window=null,(C=E(R,O))!==h&&(R.state=null),C):f}var A,k,M=!0;function I(R){if(M){var O;for(A=new s.Buf32(512),k=new s.Buf32(32),O=0;O<144;)R.lens[O++]=8;for(;O<256;)R.lens[O++]=9;for(;O<280;)R.lens[O++]=7;for(;O<288;)R.lens[O++]=8;for(c(u,R.lens,0,288,A,0,R.work,{bits:9}),O=0;O<32;)R.lens[O++]=5;c(d,R.lens,0,32,k,0,R.work,{bits:5}),M=!1}R.lencode=A,R.lenbits=9,R.distcode=k,R.distbits=5}function B(R,O,C,F){var q,G=R.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),F>=G.wsize?(s.arraySet(G.window,O,C-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(F<(q=G.wsize-G.wnext)&&(q=F),s.arraySet(G.window,O,C-F,q,G.wnext),(F-=q)?(s.arraySet(G.window,O,C-F,F,0),G.wnext=F,G.whave=G.wsize):(G.wnext+=q,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=q))),0}i.inflateReset=w,i.inflateReset2=E,i.inflateResetKeep=_,i.inflateInit=function(R){return S(R,15)},i.inflateInit2=S,i.inflate=function(R,O){var C,F,q,G,j,H,Z,X,ee,ve,oe,fe,be,Le,se,ue,Te,ge,Me,Se,D,ie,ae,K,W=0,ne=new s.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return f;(C=R.state).mode===12&&(C.mode=13),j=R.next_out,q=R.output,Z=R.avail_out,G=R.next_in,F=R.input,H=R.avail_in,X=C.hold,ee=C.bits,ve=H,oe=Z,ie=h;e:for(;;)switch(C.mode){case p:if(C.wrap===0){C.mode=13;break}for(;ee<16;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(2&C.wrap&&X===35615){ne[C.check=0]=255&X,ne[1]=X>>>8&255,C.check=a(C.check,ne,2,0),ee=X=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&X)<<8)+(X>>8))%31){R.msg="incorrect header check",C.mode=30;break}if((15&X)!=8){R.msg="unknown compression method",C.mode=30;break}if(ee-=4,D=8+(15&(X>>>=4)),C.wbits===0)C.wbits=D;else if(D>C.wbits){R.msg="invalid window size",C.mode=30;break}C.dmax=1<<D,R.adler=C.check=1,C.mode=512&X?10:12,ee=X=0;break;case 2:for(;ee<16;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(C.flags=X,(255&C.flags)!=8){R.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){R.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=X>>8&1),512&C.flags&&(ne[0]=255&X,ne[1]=X>>>8&255,C.check=a(C.check,ne,2,0)),ee=X=0,C.mode=3;case 3:for(;ee<32;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.head&&(C.head.time=X),512&C.flags&&(ne[0]=255&X,ne[1]=X>>>8&255,ne[2]=X>>>16&255,ne[3]=X>>>24&255,C.check=a(C.check,ne,4,0)),ee=X=0,C.mode=4;case 4:for(;ee<16;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.head&&(C.head.xflags=255&X,C.head.os=X>>8),512&C.flags&&(ne[0]=255&X,ne[1]=X>>>8&255,C.check=a(C.check,ne,2,0)),ee=X=0,C.mode=5;case 5:if(1024&C.flags){for(;ee<16;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.length=X,C.head&&(C.head.extra_len=X),512&C.flags&&(ne[0]=255&X,ne[1]=X>>>8&255,C.check=a(C.check,ne,2,0)),ee=X=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(H<(fe=C.length)&&(fe=H),fe&&(C.head&&(D=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),s.arraySet(C.head.extra,F,G,fe,D)),512&C.flags&&(C.check=a(C.check,F,fe,G)),H-=fe,G+=fe,C.length-=fe),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(H===0)break e;for(fe=0;D=F[G+fe++],C.head&&D&&C.length<65536&&(C.head.name+=String.fromCharCode(D)),D&&fe<H;);if(512&C.flags&&(C.check=a(C.check,F,fe,G)),H-=fe,G+=fe,D)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(H===0)break e;for(fe=0;D=F[G+fe++],C.head&&D&&C.length<65536&&(C.head.comment+=String.fromCharCode(D)),D&&fe<H;);if(512&C.flags&&(C.check=a(C.check,F,fe,G)),H-=fe,G+=fe,D)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;ee<16;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(X!==(65535&C.check)){R.msg="header crc mismatch",C.mode=30;break}ee=X=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),R.adler=C.check=0,C.mode=12;break;case 10:for(;ee<32;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}R.adler=C.check=y(X),ee=X=0,C.mode=11;case 11:if(C.havedict===0)return R.next_out=j,R.avail_out=Z,R.next_in=G,R.avail_in=H,C.hold=X,C.bits=ee,2;R.adler=C.check=1,C.mode=12;case 12:if(O===5||O===6)break e;case 13:if(C.last){X>>>=7&ee,ee-=7&ee,C.mode=27;break}for(;ee<3;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}switch(C.last=1&X,ee-=1,3&(X>>>=1)){case 0:C.mode=14;break;case 1:if(I(C),C.mode=20,O!==6)break;X>>>=2,ee-=2;break e;case 2:C.mode=17;break;case 3:R.msg="invalid block type",C.mode=30}X>>>=2,ee-=2;break;case 14:for(X>>>=7&ee,ee-=7&ee;ee<32;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if((65535&X)!=(X>>>16^65535)){R.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&X,ee=X=0,C.mode=15,O===6)break e;case 15:C.mode=16;case 16:if(fe=C.length){if(H<fe&&(fe=H),Z<fe&&(fe=Z),fe===0)break e;s.arraySet(q,F,G,fe,j),H-=fe,G+=fe,Z-=fe,j+=fe,C.length-=fe;break}C.mode=12;break;case 17:for(;ee<14;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(C.nlen=257+(31&X),X>>>=5,ee-=5,C.ndist=1+(31&X),X>>>=5,ee-=5,C.ncode=4+(15&X),X>>>=4,ee-=4,286<C.nlen||30<C.ndist){R.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;ee<3;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.lens[pe[C.have++]]=7&X,X>>>=3,ee-=3}for(;C.have<19;)C.lens[pe[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,ae={bits:C.lenbits},ie=c(0,C.lens,0,19,C.lencode,0,C.work,ae),C.lenbits=ae.bits,ie){R.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;ue=(W=C.lencode[X&(1<<C.lenbits)-1])>>>16&255,Te=65535&W,!((se=W>>>24)<=ee);){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(Te<16)X>>>=se,ee-=se,C.lens[C.have++]=Te;else{if(Te===16){for(K=se+2;ee<K;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(X>>>=se,ee-=se,C.have===0){R.msg="invalid bit length repeat",C.mode=30;break}D=C.lens[C.have-1],fe=3+(3&X),X>>>=2,ee-=2}else if(Te===17){for(K=se+3;ee<K;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}ee-=se,D=0,fe=3+(7&(X>>>=se)),X>>>=3,ee-=3}else{for(K=se+7;ee<K;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}ee-=se,D=0,fe=11+(127&(X>>>=se)),X>>>=7,ee-=7}if(C.have+fe>C.nlen+C.ndist){R.msg="invalid bit length repeat",C.mode=30;break}for(;fe--;)C.lens[C.have++]=D}}if(C.mode===30)break;if(C.lens[256]===0){R.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,ae={bits:C.lenbits},ie=c(u,C.lens,0,C.nlen,C.lencode,0,C.work,ae),C.lenbits=ae.bits,ie){R.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,ae={bits:C.distbits},ie=c(d,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,ae),C.distbits=ae.bits,ie){R.msg="invalid distances set",C.mode=30;break}if(C.mode=20,O===6)break e;case 20:C.mode=21;case 21:if(6<=H&&258<=Z){R.next_out=j,R.avail_out=Z,R.next_in=G,R.avail_in=H,C.hold=X,C.bits=ee,l(R,oe),j=R.next_out,q=R.output,Z=R.avail_out,G=R.next_in,F=R.input,H=R.avail_in,X=C.hold,ee=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;ue=(W=C.lencode[X&(1<<C.lenbits)-1])>>>16&255,Te=65535&W,!((se=W>>>24)<=ee);){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(ue&&!(240&ue)){for(ge=se,Me=ue,Se=Te;ue=(W=C.lencode[Se+((X&(1<<ge+Me)-1)>>ge)])>>>16&255,Te=65535&W,!(ge+(se=W>>>24)<=ee);){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}X>>>=ge,ee-=ge,C.back+=ge}if(X>>>=se,ee-=se,C.back+=se,C.length=Te,ue===0){C.mode=26;break}if(32&ue){C.back=-1,C.mode=12;break}if(64&ue){R.msg="invalid literal/length code",C.mode=30;break}C.extra=15&ue,C.mode=22;case 22:if(C.extra){for(K=C.extra;ee<K;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.length+=X&(1<<C.extra)-1,X>>>=C.extra,ee-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;ue=(W=C.distcode[X&(1<<C.distbits)-1])>>>16&255,Te=65535&W,!((se=W>>>24)<=ee);){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(!(240&ue)){for(ge=se,Me=ue,Se=Te;ue=(W=C.distcode[Se+((X&(1<<ge+Me)-1)>>ge)])>>>16&255,Te=65535&W,!(ge+(se=W>>>24)<=ee);){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}X>>>=ge,ee-=ge,C.back+=ge}if(X>>>=se,ee-=se,C.back+=se,64&ue){R.msg="invalid distance code",C.mode=30;break}C.offset=Te,C.extra=15&ue,C.mode=24;case 24:if(C.extra){for(K=C.extra;ee<K;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}C.offset+=X&(1<<C.extra)-1,X>>>=C.extra,ee-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){R.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(Z===0)break e;if(fe=oe-Z,C.offset>fe){if((fe=C.offset-fe)>C.whave&&C.sane){R.msg="invalid distance too far back",C.mode=30;break}be=fe>C.wnext?(fe-=C.wnext,C.wsize-fe):C.wnext-fe,fe>C.length&&(fe=C.length),Le=C.window}else Le=q,be=j-C.offset,fe=C.length;for(Z<fe&&(fe=Z),Z-=fe,C.length-=fe;q[j++]=Le[be++],--fe;);C.length===0&&(C.mode=21);break;case 26:if(Z===0)break e;q[j++]=C.length,Z--,C.mode=21;break;case 27:if(C.wrap){for(;ee<32;){if(H===0)break e;H--,X|=F[G++]<<ee,ee+=8}if(oe-=Z,R.total_out+=oe,C.total+=oe,oe&&(R.adler=C.check=C.flags?a(C.check,q,oe,j-oe):o(C.check,q,oe,j-oe)),oe=Z,(C.flags?X:y(X))!==C.check){R.msg="incorrect data check",C.mode=30;break}ee=X=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;ee<32;){if(H===0)break e;H--,X+=F[G++]<<ee,ee+=8}if(X!==(4294967295&C.total)){R.msg="incorrect length check",C.mode=30;break}ee=X=0}C.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return f}return R.next_out=j,R.avail_out=Z,R.next_in=G,R.avail_in=H,C.hold=X,C.bits=ee,(C.wsize||oe!==R.avail_out&&C.mode<30&&(C.mode<27||O!==4))&&B(R,R.output,R.next_out,oe-R.avail_out)?(C.mode=31,-4):(ve-=R.avail_in,oe-=R.avail_out,R.total_in+=ve,R.total_out+=oe,C.total+=oe,C.wrap&&oe&&(R.adler=C.check=C.flags?a(C.check,q,oe,R.next_out-oe):o(C.check,q,oe,R.next_out-oe)),R.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(ve==0&&oe===0||O===4)&&ie===h&&(ie=-5),ie)},i.inflateEnd=function(R){if(!R||!R.state)return f;var O=R.state;return O.window&&(O.window=null),R.state=null,h},i.inflateGetHeader=function(R,O){var C;return R&&R.state&&2&(C=R.state).wrap?((C.head=O).done=!1,h):f},i.inflateSetDictionary=function(R,O){var C,F=O.length;return R&&R.state?(C=R.state).wrap!==0&&C.mode!==11?f:C.mode===11&&o(1,O,F,0)!==C.check?-3:B(R,O,F,F)?(C.mode=31,-4):(C.havedict=1,h):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,f,p,m,b,y){var x,_,w,E,S,A,k,M,I,B=y.bits,R=0,O=0,C=0,F=0,q=0,G=0,j=0,H=0,Z=0,X=0,ee=null,ve=0,oe=new s.Buf16(16),fe=new s.Buf16(16),be=null,Le=0;for(R=0;R<=15;R++)oe[R]=0;for(O=0;O<f;O++)oe[d[h+O]]++;for(q=B,F=15;1<=F&&oe[F]===0;F--);if(F<q&&(q=F),F===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(C=1;C<F&&oe[C]===0;C++);for(q<C&&(q=C),R=H=1;R<=15;R++)if(H<<=1,(H-=oe[R])<0)return-1;if(0<H&&(u===0||F!==1))return-1;for(fe[1]=0,R=1;R<15;R++)fe[R+1]=fe[R]+oe[R];for(O=0;O<f;O++)d[h+O]!==0&&(b[fe[d[h+O]]++]=O);if(A=u===0?(ee=be=b,19):u===1?(ee=o,ve-=257,be=a,Le-=257,256):(ee=l,be=c,-1),R=C,S=m,j=O=X=0,w=-1,E=(Z=1<<(G=q))-1,u===1&&852<Z||u===2&&592<Z)return 1;for(;;){for(k=R-j,I=b[O]<A?(M=0,b[O]):b[O]>A?(M=be[Le+b[O]],ee[ve+b[O]]):(M=96,0),x=1<<R-j,C=_=1<<G;p[S+(X>>j)+(_-=x)]=k<<24|M<<16|I|0,_!==0;);for(x=1<<R-1;X&x;)x>>=1;if(x!==0?(X&=x-1,X+=x):X=0,O++,--oe[R]==0){if(R===F)break;R=d[h+b[O]]}if(q<R&&(X&E)!==w){for(j===0&&(j=q),S+=C,H=1<<(G=R-j);G+j<F&&!((H-=oe[G+j])<=0);)G++,H<<=1;if(Z+=1<<G,u===1&&852<Z||u===2&&592<Z)return 1;p[w=X&E]=q<<24|G<<16|S-m|0}}return X!==0&&(p[S+X]=R-j<<24|64<<16|0),y.bits=q,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(W){for(var ne=W.length;0<=--ne;)W[ne]=0}var c=0,u=29,d=256,h=d+1+u,f=30,p=19,m=2*h+1,b=15,y=16,x=7,_=256,w=16,E=17,S=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(h+2));l(B);var R=new Array(2*f);l(R);var O=new Array(512);l(O);var C=new Array(256);l(C);var F=new Array(u);l(F);var q,G,j,H=new Array(f);function Z(W,ne,pe,me,he){this.static_tree=W,this.extra_bits=ne,this.extra_base=pe,this.elems=me,this.max_length=he,this.has_stree=W&&W.length}function X(W,ne){this.dyn_tree=W,this.max_code=0,this.stat_desc=ne}function ee(W){return W<256?O[W]:O[256+(W>>>7)]}function ve(W,ne){W.pending_buf[W.pending++]=255&ne,W.pending_buf[W.pending++]=ne>>>8&255}function oe(W,ne,pe){W.bi_valid>y-pe?(W.bi_buf|=ne<<W.bi_valid&65535,ve(W,W.bi_buf),W.bi_buf=ne>>y-W.bi_valid,W.bi_valid+=pe-y):(W.bi_buf|=ne<<W.bi_valid&65535,W.bi_valid+=pe)}function fe(W,ne,pe){oe(W,pe[2*ne],pe[2*ne+1])}function be(W,ne){for(var pe=0;pe|=1&W,W>>>=1,pe<<=1,0<--ne;);return pe>>>1}function Le(W,ne,pe){var me,he,Pe=new Array(b+1),Oe=0;for(me=1;me<=b;me++)Pe[me]=Oe=Oe+pe[me-1]<<1;for(he=0;he<=ne;he++){var de=W[2*he+1];de!==0&&(W[2*he]=be(Pe[de]++,de))}}function se(W){var ne;for(ne=0;ne<h;ne++)W.dyn_ltree[2*ne]=0;for(ne=0;ne<f;ne++)W.dyn_dtree[2*ne]=0;for(ne=0;ne<p;ne++)W.bl_tree[2*ne]=0;W.dyn_ltree[2*_]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function ue(W){8<W.bi_valid?ve(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function Te(W,ne,pe,me){var he=2*ne,Pe=2*pe;return W[he]<W[Pe]||W[he]===W[Pe]&&me[ne]<=me[pe]}function ge(W,ne,pe){for(var me=W.heap[pe],he=pe<<1;he<=W.heap_len&&(he<W.heap_len&&Te(ne,W.heap[he+1],W.heap[he],W.depth)&&he++,!Te(ne,me,W.heap[he],W.depth));)W.heap[pe]=W.heap[he],pe=he,he<<=1;W.heap[pe]=me}function Me(W,ne,pe){var me,he,Pe,Oe,de=0;if(W.last_lit!==0)for(;me=W.pending_buf[W.d_buf+2*de]<<8|W.pending_buf[W.d_buf+2*de+1],he=W.pending_buf[W.l_buf+de],de++,me===0?fe(W,he,ne):(fe(W,(Pe=C[he])+d+1,ne),(Oe=A[Pe])!==0&&oe(W,he-=F[Pe],Oe),fe(W,Pe=ee(--me),pe),(Oe=k[Pe])!==0&&oe(W,me-=H[Pe],Oe)),de<W.last_lit;);fe(W,_,ne)}function Se(W,ne){var pe,me,he,Pe=ne.dyn_tree,Oe=ne.stat_desc.static_tree,de=ne.stat_desc.has_stree,Ce=ne.stat_desc.elems,Ye=-1;for(W.heap_len=0,W.heap_max=m,pe=0;pe<Ce;pe++)Pe[2*pe]!==0?(W.heap[++W.heap_len]=Ye=pe,W.depth[pe]=0):Pe[2*pe+1]=0;for(;W.heap_len<2;)Pe[2*(he=W.heap[++W.heap_len]=Ye<2?++Ye:0)]=1,W.depth[he]=0,W.opt_len--,de&&(W.static_len-=Oe[2*he+1]);for(ne.max_code=Ye,pe=W.heap_len>>1;1<=pe;pe--)ge(W,Pe,pe);for(he=Ce;pe=W.heap[1],W.heap[1]=W.heap[W.heap_len--],ge(W,Pe,1),me=W.heap[1],W.heap[--W.heap_max]=pe,W.heap[--W.heap_max]=me,Pe[2*he]=Pe[2*pe]+Pe[2*me],W.depth[he]=(W.depth[pe]>=W.depth[me]?W.depth[pe]:W.depth[me])+1,Pe[2*pe+1]=Pe[2*me+1]=he,W.heap[1]=he++,ge(W,Pe,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],function(Fe,Ve){var Bt,yt,Ot,Ge,Pt,Xe,Ze=Ve.dyn_tree,Nt=Ve.max_code,zt=Ve.stat_desc.static_tree,pn=Ve.stat_desc.has_stree,Dn=Ve.stat_desc.extra_bits,Wn=Ve.stat_desc.extra_base,Jn=Ve.stat_desc.max_length,le=0;for(Ge=0;Ge<=b;Ge++)Fe.bl_count[Ge]=0;for(Ze[2*Fe.heap[Fe.heap_max]+1]=0,Bt=Fe.heap_max+1;Bt<m;Bt++)Jn<(Ge=Ze[2*Ze[2*(yt=Fe.heap[Bt])+1]+1]+1)&&(Ge=Jn,le++),Ze[2*yt+1]=Ge,Nt<yt||(Fe.bl_count[Ge]++,Pt=0,Wn<=yt&&(Pt=Dn[yt-Wn]),Xe=Ze[2*yt],Fe.opt_len+=Xe*(Ge+Pt),pn&&(Fe.static_len+=Xe*(zt[2*yt+1]+Pt)));if(le!==0){do{for(Ge=Jn-1;Fe.bl_count[Ge]===0;)Ge--;Fe.bl_count[Ge]--,Fe.bl_count[Ge+1]+=2,Fe.bl_count[Jn]--,le-=2}while(0<le);for(Ge=Jn;Ge!==0;Ge--)for(yt=Fe.bl_count[Ge];yt!==0;)Nt<(Ot=Fe.heap[--Bt])||(Ze[2*Ot+1]!==Ge&&(Fe.opt_len+=(Ge-Ze[2*Ot+1])*Ze[2*Ot],Ze[2*Ot+1]=Ge),yt--)}}(W,ne),Le(Pe,Ye,W.bl_count)}function D(W,ne,pe){var me,he,Pe=-1,Oe=ne[1],de=0,Ce=7,Ye=4;for(Oe===0&&(Ce=138,Ye=3),ne[2*(pe+1)+1]=65535,me=0;me<=pe;me++)he=Oe,Oe=ne[2*(me+1)+1],++de<Ce&&he===Oe||(de<Ye?W.bl_tree[2*he]+=de:he!==0?(he!==Pe&&W.bl_tree[2*he]++,W.bl_tree[2*w]++):de<=10?W.bl_tree[2*E]++:W.bl_tree[2*S]++,Pe=he,Ye=(de=0)===Oe?(Ce=138,3):he===Oe?(Ce=6,3):(Ce=7,4))}function ie(W,ne,pe){var me,he,Pe=-1,Oe=ne[1],de=0,Ce=7,Ye=4;for(Oe===0&&(Ce=138,Ye=3),me=0;me<=pe;me++)if(he=Oe,Oe=ne[2*(me+1)+1],!(++de<Ce&&he===Oe)){if(de<Ye)for(;fe(W,he,W.bl_tree),--de!=0;);else he!==0?(he!==Pe&&(fe(W,he,W.bl_tree),de--),fe(W,w,W.bl_tree),oe(W,de-3,2)):de<=10?(fe(W,E,W.bl_tree),oe(W,de-3,3)):(fe(W,S,W.bl_tree),oe(W,de-11,7));Pe=he,Ye=(de=0)===Oe?(Ce=138,3):he===Oe?(Ce=6,3):(Ce=7,4)}}l(H);var ae=!1;function K(W,ne,pe,me){oe(W,(c<<1)+(me?1:0),3),function(he,Pe,Oe,de){ue(he),de&&(ve(he,Oe),ve(he,~Oe)),s.arraySet(he.pending_buf,he.window,Pe,Oe,he.pending),he.pending+=Oe}(W,ne,pe,!0)}i._tr_init=function(W){ae||(function(){var ne,pe,me,he,Pe,Oe=new Array(b+1);for(he=me=0;he<u-1;he++)for(F[he]=me,ne=0;ne<1<<A[he];ne++)C[me++]=he;for(C[me-1]=he,he=Pe=0;he<16;he++)for(H[he]=Pe,ne=0;ne<1<<k[he];ne++)O[Pe++]=he;for(Pe>>=7;he<f;he++)for(H[he]=Pe<<7,ne=0;ne<1<<k[he]-7;ne++)O[256+Pe++]=he;for(pe=0;pe<=b;pe++)Oe[pe]=0;for(ne=0;ne<=143;)B[2*ne+1]=8,ne++,Oe[8]++;for(;ne<=255;)B[2*ne+1]=9,ne++,Oe[9]++;for(;ne<=279;)B[2*ne+1]=7,ne++,Oe[7]++;for(;ne<=287;)B[2*ne+1]=8,ne++,Oe[8]++;for(Le(B,h+1,Oe),ne=0;ne<f;ne++)R[2*ne+1]=5,R[2*ne]=be(ne,5);q=new Z(B,A,d+1,h,b),G=new Z(R,k,0,f,b),j=new Z(new Array(0),M,0,p,x)}(),ae=!0),W.l_desc=new X(W.dyn_ltree,q),W.d_desc=new X(W.dyn_dtree,G),W.bl_desc=new X(W.bl_tree,j),W.bi_buf=0,W.bi_valid=0,se(W)},i._tr_stored_block=K,i._tr_flush_block=function(W,ne,pe,me){var he,Pe,Oe=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=function(de){var Ce,Ye=4093624447;for(Ce=0;Ce<=31;Ce++,Ye>>>=1)if(1&Ye&&de.dyn_ltree[2*Ce]!==0)return o;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return a;for(Ce=32;Ce<d;Ce++)if(de.dyn_ltree[2*Ce]!==0)return a;return o}(W)),Se(W,W.l_desc),Se(W,W.d_desc),Oe=function(de){var Ce;for(D(de,de.dyn_ltree,de.l_desc.max_code),D(de,de.dyn_dtree,de.d_desc.max_code),Se(de,de.bl_desc),Ce=p-1;3<=Ce&&de.bl_tree[2*I[Ce]+1]===0;Ce--);return de.opt_len+=3*(Ce+1)+5+5+4,Ce}(W),he=W.opt_len+3+7>>>3,(Pe=W.static_len+3+7>>>3)<=he&&(he=Pe)):he=Pe=pe+5,pe+4<=he&&ne!==-1?K(W,ne,pe,me):W.strategy===4||Pe===he?(oe(W,2+(me?1:0),3),Me(W,B,R)):(oe(W,4+(me?1:0),3),function(de,Ce,Ye,Fe){var Ve;for(oe(de,Ce-257,5),oe(de,Ye-1,5),oe(de,Fe-4,4),Ve=0;Ve<Fe;Ve++)oe(de,de.bl_tree[2*I[Ve]+1],3);ie(de,de.dyn_ltree,Ce-1),ie(de,de.dyn_dtree,Ye-1)}(W,W.l_desc.max_code+1,W.d_desc.max_code+1,Oe+1),Me(W,W.dyn_ltree,W.dyn_dtree)),se(W),me&&ue(W)},i._tr_tally=function(W,ne,pe){return W.pending_buf[W.d_buf+2*W.last_lit]=ne>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&ne,W.pending_buf[W.l_buf+W.last_lit]=255&pe,W.last_lit++,ne===0?W.dyn_ltree[2*pe]++:(W.matches++,ne--,W.dyn_ltree[2*(C[pe]+d+1)]++,W.dyn_dtree[2*ee(ne)]++),W.last_lit===W.lit_bufsize-1},i._tr_align=function(W){oe(W,2,3),fe(W,_,B),function(ne){ne.bi_valid===16?(ve(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(W)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,d,h=1,f={},p=!1,m=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){x(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,E=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=E,w}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(w){o.postMessage(d+w,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(w){x(w.data)},function(w){u.port2.postMessage(w)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(w){var E=m.createElement("script");E.onreadystatechange=function(){x(w),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(w){setTimeout(x,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var E=new Array(arguments.length-1),S=0;S<E.length;S++)E[S]=arguments[S+1];var A={callback:w,args:E};return f[h]=A,l(h),h++},b.clearImmediate=y}function y(w){delete f[w]}function x(w){if(p)setTimeout(x,0,w);else{var E=f[w];if(E){p=!0;try{(function(S){var A=S.callback,k=S.args;switch(k.length){case 0:A();break;case 1:A(k[0]);break;case 2:A(k[0],k[1]);break;case 3:A(k[0],k[1],k[2]);break;default:A.apply(a,k)}})(E)}finally{y(w),p=!1}}}}function _(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(d)===0&&x(+w.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof xi<"u"?xi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Z9);var Jbe=Z9.exports;const e1e=hd(Jbe);async function t1e(t){const e=[];let n=0;for(;;){const{value:s,done:o}=await t.read();if(o)break;e.push(s),n+=s.length}const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return r.buffer}const Q9=async t=>{const e=await fetch(t,{method:"GET"}).catch(n=>{throw n});return await t1e(e.body.getReader())},n1e=async()=>{const t=await Q9(a1e(!0)),e=new TextDecoder("utf-8").decode(t),n=/<option value="([^"]+)_(.+?)_(\d+)">(.+?)<\/option>/g,r=[];let i;for(;(i=n.exec(e))!==null;){const[s,o,a,l]=i;r.push({code:o,name:a,level:parseInt(l,10)-1})}return r};async function r1e(t){const n=await new e1e().loadAsync(t),r=Object.keys(n.files);if(r.length!==1)throw new Error("ZIP1");return await n.file(r[0]).async("string")}function Ez(t){return new Promise(e=>setTimeout(e,t))}var zx=(t=>(t[t.staged=0]="staged",t[t.loading=1]="loading",t[t.success=2]="success",t[t.error=3]="error",t))(zx||{});function i1e(t,e,n){const r=[];for(let i=0;i<t.length;i++){const s=t[i];for(let o=0;o<=s.level;o++)e[i]&&e[i][o]&&r.push(o1e(s.code,o,n))}return r}const s1e=async(t,e,n,r)=>{const i={},o=t.length;n({progress:0,index:0,total:o});for(const a of t){try{e(a,{status:1});const l=await Q9(a);if(a.endsWith(".zip")){const c=await r1e(l);r({url:a,data:c})}else r({url:a,data:l});e(a,{status:2})}catch(l){if(console.error(l),e(a,{status:3,error:l,retry:i[a]||0}),l.message.startsWith("Failed to fetch")||l.message.startsWith("Access to fetch")){await Ez(3333+Math.random()*3333),i[a]=(i[a]||0)+1;continue}}n({progress:1/o*100,index:1,total:o}),await Ez(100+Math.random()*500)}n({progress:100,index:o,total:o})},YO=t=>t.replace("https://","/").replace("http://","/"),o1e=(t,e,n)=>{const r=`https://geodata.ucdavis.edu/gadm/gadm4.1/json/gadm41_${t}_${e}.json${e==0?"":".zip"}`;return n?YO(r):r},a1e=t=>{const e="https://gadm.org/download_country.html";return t?YO(e):e};var ri={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let l1e=0;function ua(t,e){const n=`atom${++l1e}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=c1e,r.write=u1e),e&&(r.write=e),r}function c1e(t){return t(this)}function u1e(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const h_=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,aP=t=>"init"in t,lP=t=>!!t.write,tE=new WeakMap,d1e=(t,e)=>{tE.set(t,e),t.catch(()=>{}).finally(()=>tE.delete(t))},Tz=(t,e)=>{const n=tE.get(t);n&&(tE.delete(t),n(e))},Sz=(t,e)=>{t.status="fulfilled",t.value=e},Cz=(t,e)=>{t.status="rejected",t.reason=e},h1e=t=>typeof(t==null?void 0:t.then)=="function",n0=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),Az=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),Uf=t=>!!t&&"v"in t&&t.v instanceof Promise,f1e=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,f_=t=>{if("e"in t)throw t.e;return t.v},p1e=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(ri?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=k=>t.get(k),o=(k,M)=>{(ri?"production":void 0)!=="production"&&Object.freeze(M);const I=t.get(k);if(t.set(k,M),n.has(k)||n.set(k,I),Uf(I)){const B="v"in M?M.v instanceof Promise?M.v:Promise.resolve(M.v):Promise.reject(M.e);I.v!==B&&Tz(I.v,B)}},a=(k,M,I,B)=>{const R=new Map(B?M.d:null);let O=!1;I.forEach((C,F)=>{!C&&h_(k,F)&&(C=M),C?(R.set(F,C),M.d.get(F)!==C&&(O=!0)):(ri?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(O||M.d.size!==R.size)&&(M.d=R)},l=(k,M,I,B)=>{const R=s(k),O={d:(R==null?void 0:R.d)||new Map,v:M};if(I&&a(k,O,I,B),n0(R,O)&&R.d===O.d)return R;if(Uf(R)&&Uf(O)&&f1e(R,O)){if(R.d===O.d)return R;O.v=R.v}return o(k,O),O},c=(k,M,I,B)=>{if(h1e(M)){let R;const O=()=>{const F=s(k);if(!Uf(F)||F.v!==C)return;const q=l(k,C,I);e.has(k)&&F.d!==q.d&&E(k,q,F.d)},C=new Promise((F,q)=>{let G=!1;M.then(j=>{G||(G=!0,Sz(C,j),F(j),O())},j=>{G||(G=!0,Cz(C,j),q(j),O())}),R=j=>{G||(G=!0,j.then(H=>Sz(C,H),H=>Cz(C,H)),F(j))}});return C.orig=M,C.status="pending",d1e(C,F=>{F&&R(F),B==null||B()}),l(k,C,I,!0)}return l(k,M,I)},u=(k,M,I)=>{const B=s(k),R={d:(B==null?void 0:B.d)||new Map,e:M};return I&&a(k,R,I),Az(B,R)&&B.d===R.d?B:(o(k,R),R)},d=(k,M)=>{const I=s(k);if(!M&&I&&(e.has(k)||Array.from(I.d).every(([G,j])=>{if(h_(k,G))return!0;const H=d(G);return H===j||n0(H,j)})))return I;const B=new Map;let R=!0;const O=G=>{if(h_(k,G)){const H=s(G);if(H)return B.set(G,H),f_(H);if(aP(G))return B.set(G,void 0),G.init;throw new Error("no atom init")}const j=d(G);return B.set(G,j),f_(j)};let C,F;const q={get signal(){return C||(C=new AbortController),C.signal},get setSelf(){return(ri?"production":void 0)!=="production"&&!lP(k)&&console.warn("setSelf function cannot be used with read-only atom"),!F&&lP(k)&&(F=(...G)=>{if((ri?"production":void 0)!=="production"&&R&&console.warn("setSelf function cannot be called in sync"),!R)return x(k,...G)}),F}};try{const G=k.read(O,q);return c(k,G,B,()=>C==null?void 0:C.abort())}catch(G){return u(k,G,B)}finally{R=!1}},h=k=>f_(d(k)),f=k=>{let M=e.get(k);return M||(M=_(k)),M},p=(k,M)=>!M.l.size&&(!M.t.size||M.t.size===1&&M.t.has(k)),m=k=>{const M=e.get(k);M&&p(k,M)&&w(k)},b=k=>{const M=new Map,I=new WeakMap,B=C=>{var F;const q=new Set((F=e.get(C))==null?void 0:F.t);return n.forEach((G,j)=>{var H;(H=s(j))!=null&&H.d.has(C)&&q.add(j)}),q},R=C=>{B(C).forEach(F=>{F!==C&&(M.set(F,(M.get(F)||new Set).add(C)),I.set(F,(I.get(F)||0)+1),R(F))})};R(k);const O=C=>{B(C).forEach(F=>{var q;if(F!==C){let G=I.get(F);if(G&&I.set(F,--G),!G){let j=!!((q=M.get(F))!=null&&q.size);if(j){const H=s(F),Z=d(F,!0);j=!n0(H,Z)}j||M.forEach(H=>H.delete(F))}O(F)}})};O(k)},y=(k,...M)=>{let I=!0;const B=C=>f_(d(C)),R=(C,...F)=>{let q;if(h_(k,C)){if(!aP(C))throw new Error("atom not writable");const G=s(C),j=c(C,F[0]);n0(G,j)||b(C)}else q=y(C,...F);if(!I){const G=S();(ri?"production":void 0)!=="production"&&r.forEach(j=>j({type:"async-write",flushed:G}))}return q},O=k.write(B,R,...M);return I=!1,O},x=(k,...M)=>{const I=y(k,...M),B=S();return(ri?"production":void 0)!=="production"&&r.forEach(R=>R({type:"write",flushed:B})),I},_=(k,M,I)=>{var B;const R=I||[];(B=s(k))==null||B.d.forEach((C,F)=>{const q=e.get(F);q?q.t.add(k):F!==k&&_(F,k,R)}),d(k);const O={t:new Set(M&&[M]),l:new Set};if(e.set(k,O),(ri?"production":void 0)!=="production"&&i.add(k),lP(k)&&k.onMount){const{onMount:C}=k;R.push(()=>{const F=C((...q)=>x(k,...q));F&&(O.u=F)})}return I||R.forEach(C=>C()),O},w=k=>{var M;const I=(M=e.get(k))==null?void 0:M.u;I&&I(),e.delete(k),(ri?"production":void 0)!=="production"&&i.delete(k);const B=s(k);B?(Uf(B)&&Tz(B.v),B.d.forEach((R,O)=>{if(O!==k){const C=e.get(O);C&&(C.t.delete(k),p(O,C)&&w(O))}})):(ri?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",k)},E=(k,M,I)=>{const B=new Set(M.d.keys()),R=new Set;I==null||I.forEach((O,C)=>{if(B.has(C)){B.delete(C);return}R.add(C);const F=e.get(C);F&&F.t.delete(k)}),B.forEach(O=>{const C=e.get(O);C?C.t.add(k):e.has(k)&&_(O,k)}),R.forEach(O=>{const C=e.get(O);C&&p(O,C)&&w(O)})},S=()=>{let k;for((ri?"production":void 0)!=="production"&&(k=new Set);n.size;){const M=Array.from(n);n.clear(),M.forEach(([I,B])=>{const R=s(I);if(R){const O=e.get(I);O&&R.d!==(B==null?void 0:B.d)&&E(I,R,B==null?void 0:B.d),O&&!(!Uf(B)&&(n0(B,R)||Az(B,R)))&&(O.l.forEach(C=>C()),(ri?"production":void 0)!=="production"&&k.add(I))}else(ri?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((ri?"production":void 0)!=="production")return k},A=(k,M)=>{const I=f(k),B=S(),R=I.l;return R.add(M),(ri?"production":void 0)!=="production"&&r.forEach(O=>O({type:"sub",flushed:B})),()=>{R.delete(M),m(k),(ri?"production":void 0)!=="production"&&r.forEach(O=>O({type:"unsub"}))}};return(ri?"production":void 0)!=="production"?{get:h,set:x,sub:A,dev_subscribe_store:(k,M)=>{if(M!==2)throw new Error("The current StoreListener revision is 2.");return r.add(k),()=>{r.delete(k)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:k=>t.get(k),dev_get_mounted:k=>e.get(k),dev_restore_atoms:k=>{for(const[I,B]of k)aP(I)&&(c(I,B),b(I));const M=S();r.forEach(I=>I({type:"restore",flushed:M}))}}:{get:h,set:x,sub:A}};let cP;(ri?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const g1e=()=>(cP||((ri?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),cP=p1e()),cP);var m1e={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const v1e=P.createContext(void 0),J9=t=>{const e=P.useContext(v1e);return(t==null?void 0:t.store)||e||g1e()},y1e=t=>typeof(t==null?void 0:t.then)=="function",b1e=Rn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function _h(t,e){const n=J9(e),[[r,i,s],o]=P.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return P.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),P.useDebugValue(a),y1e(a)?b1e(a):a}function e7(t,e){const n=J9(e);return P.useCallback((...i)=>{if((m1e?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function qu(t,e){return[_h(t,e),e7(t,e)]}const sm=(t,e)=>{const n=[];for(let r=0;r<t;r++){const i=[];for(let s=0;s<t;s++)i.push(e?e(r,s):0);n.push(i)}return n};function _1e(t,e){const n=new Set(e),r=new Set(t.concat(e)),i=new Set(t.filter(s=>n.has(s)));return Array.from(r).filter(s=>!i.has(s))}const Yp=(t,e)=>{e||(e=t-1,t=0);const n=[];for(let r=t;r<=e;r++)n.push(r);return n};function kI(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return i}else t[i].id<e?n=i+1:r=i-1}return-1}function Eg(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return t[i]}else t[i].id<e?n=i+1:r=i-1}return null}function x1e(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function Pz(t){const e={};return t.forEach(([n,r])=>{e[n]=r}),e}const w1e=P.memo(({levelMax:t,countries:e})=>{const[n,r]=qu(QO),i=Yp(t),s=f=>{let p=0,m=0,b=0;for(let y=1;y<n.length;y++)if(f<n[y].length){if(p++,n[y][f]?m++:b++,p===m||p===b)continue;return!0}return!1},o=f=>{let p=0,m=0,b=0;for(let y=0;y+1<n[f].length;y++)if(p++,n[f][y+1]?m++:b++,!(p===m||p===b))return!0;return!1},a=(f,p)=>{r(m=>(m[f][p]=!m[f][p],m))},l=f=>{r(p=>{const m=!p[f][0];p[f][0]=m;for(let b=1;b<p[f].length;b++)p[f][b]=p[f][0];return p})},c=f=>{r(p=>{const m=!p[0][f];p[0][f]=m;for(let b=1;b<p.length;b++)f<p[b].length&&(p[b][f]=m);return p})},u=()=>{r(f=>{const p=!f[0][0];for(let m=0;m<f.length;m++)for(let b=0;b<f[m].length;b++)f[m][b]=p;return f})},d=P.useMemo(()=>Object.keys(n).length>0&&Be(lo,{children:[Be(qn,{component:"th",scope:"row",children:[$(R0,{checked:n[0][0],indeterminate:n[0][0]===void 0,onChange:u,name:"all"}),$(En,{sx:{fontStyle:"bold"},children:"Select/Unselect All"})]}),i.map(f=>Be(qn,{component:"th",scope:"row",children:[$(R0,{checked:n[0][f+1],indeterminate:s(f+1),onChange:()=>c(f+1),name:`${f}`}),Be(En,{sx:{fontStyle:"bold"},children:["Level ",f]})]},f))]}),[n]),h=P.useMemo(()=>n.length>0&&e.map((f,p)=>Be(_g,{children:[Be(qn,{component:"th",scope:"row",children:[$(R0,{checked:n[p+1][0],indeterminate:o(p+1),onChange:()=>l(p+1),name:`${p+1}`}),Be("a",{href:`https://gadm.org/maps/${f.code}.html`,target:"_blank",rel:"noreferrer",children:[f.name,"(",f.code,")"]})]}),i.map(m=>$(qn,{children:m<=f.level&&Be(lo,{children:[$(R0,{checked:n[p+1][m+1],onChange:()=>a(p+1,m+1),name:`${p+1}_${m+1}`}),m===0&&$("a",{href:`https://gadm.org/maps/${f.code}.html`,target:"_blank",rel:"noreferrer",children:m}),m===1&&$("a",{href:`https://gadm.org/maps/${f.code}_${m}.html`,target:"_blank",rel:"noreferrer",children:m})]})},m))]},p)),[e,n]);return Object.keys(n).length===0?$(Vt,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:$(yg,{})}):$(Vt,{children:Be(RO,{stickyHeader:!0,size:"small",children:[$(MO,{children:$(_g,{children:d})}),$(IO,{children:h})]})})});function E1e(t){return Be(Vt,{sx:{display:"flex",alignItems:"center"},children:[$(Vt,{sx:{width:"100%",mr:1},children:$(sI,{variant:"determinate",...t})}),$(Vt,{sx:{minWidth:130},children:t.total>0&&`${t.index} / ${t.total} (${Math.round(100*t.index/t.total)} %)`})]})}var et;(function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.FORM_FEED=12]="FORM_FEED",t[t.NEWLINE=10]="NEWLINE",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.DOLLAR_SIGN=36]="DOLLAR_SIGN",t[t.PERCENT_SIGN=37]="PERCENT_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",t[t.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",t[t.ASTERISK=42]="ASTERISK",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.COMMA=44]="COMMA",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.FULL_STOP=46]="FULL_STOP",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_ZERO=48]="DIGIT_ZERO",t[t.DIGIT_ONE=49]="DIGIT_ONE",t[t.DIGIT_TWO=50]="DIGIT_TWO",t[t.DIGIT_THREE=51]="DIGIT_THREE",t[t.DIGIT_FOUR=52]="DIGIT_FOUR",t[t.DIGIT_FIVE=53]="DIGIT_FIVE",t[t.DIGIT_SIX=54]="DIGIT_SIX",t[t.DIGIT_SEVEN=55]="DIGIT_SEVEN",t[t.DIGIT_EIGHT=56]="DIGIT_EIGHT",t[t.DIGIT_NINE=57]="DIGIT_NINE",t[t.COLON=58]="COLON",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.COMMERCIAL_AT=64]="COMMERCIAL_AT",t[t.LATIN_CAPITAL_LETTER_A=65]="LATIN_CAPITAL_LETTER_A",t[t.LATIN_CAPITAL_LETTER_B=66]="LATIN_CAPITAL_LETTER_B",t[t.LATIN_CAPITAL_LETTER_C=67]="LATIN_CAPITAL_LETTER_C",t[t.LATIN_CAPITAL_LETTER_D=68]="LATIN_CAPITAL_LETTER_D",t[t.LATIN_CAPITAL_LETTER_E=69]="LATIN_CAPITAL_LETTER_E",t[t.LATIN_CAPITAL_LETTER_F=70]="LATIN_CAPITAL_LETTER_F",t[t.LATIN_CAPITAL_LETTER_G=71]="LATIN_CAPITAL_LETTER_G",t[t.LATIN_CAPITAL_LETTER_H=72]="LATIN_CAPITAL_LETTER_H",t[t.LATIN_CAPITAL_LETTER_I=73]="LATIN_CAPITAL_LETTER_I",t[t.LATIN_CAPITAL_LETTER_J=74]="LATIN_CAPITAL_LETTER_J",t[t.LATIN_CAPITAL_LETTER_K=75]="LATIN_CAPITAL_LETTER_K",t[t.LATIN_CAPITAL_LETTER_L=76]="LATIN_CAPITAL_LETTER_L",t[t.LATIN_CAPITAL_LETTER_M=77]="LATIN_CAPITAL_LETTER_M",t[t.LATIN_CAPITAL_LETTER_N=78]="LATIN_CAPITAL_LETTER_N",t[t.LATIN_CAPITAL_LETTER_O=79]="LATIN_CAPITAL_LETTER_O",t[t.LATIN_CAPITAL_LETTER_P=80]="LATIN_CAPITAL_LETTER_P",t[t.LATIN_CAPITAL_LETTER_Q=81]="LATIN_CAPITAL_LETTER_Q",t[t.LATIN_CAPITAL_LETTER_R=82]="LATIN_CAPITAL_LETTER_R",t[t.LATIN_CAPITAL_LETTER_S=83]="LATIN_CAPITAL_LETTER_S",t[t.LATIN_CAPITAL_LETTER_T=84]="LATIN_CAPITAL_LETTER_T",t[t.LATIN_CAPITAL_LETTER_U=85]="LATIN_CAPITAL_LETTER_U",t[t.LATIN_CAPITAL_LETTER_V=86]="LATIN_CAPITAL_LETTER_V",t[t.LATIN_CAPITAL_LETTER_W=87]="LATIN_CAPITAL_LETTER_W",t[t.LATIN_CAPITAL_LETTER_X=88]="LATIN_CAPITAL_LETTER_X",t[t.LATIN_CAPITAL_LETTER_Y=89]="LATIN_CAPITAL_LETTER_Y",t[t.LATIN_CAPITAL_LETTER_Z=90]="LATIN_CAPITAL_LETTER_Z",t[t.LEFT_SQUARE_BRACKET=91]="LEFT_SQUARE_BRACKET",t[t.REVERSE_SOLIDUS=92]="REVERSE_SOLIDUS",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.CIRCUMFLEX_ACCENT=94]="CIRCUMFLEX_ACCENT",t[t.LOW_LINE=95]="LOW_LINE",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_LETTER_A=97]="LATIN_SMALL_LETTER_A",t[t.LATIN_SMALL_LETTER_B=98]="LATIN_SMALL_LETTER_B",t[t.LATIN_SMALL_LETTER_C=99]="LATIN_SMALL_LETTER_C",t[t.LATIN_SMALL_LETTER_D=100]="LATIN_SMALL_LETTER_D",t[t.LATIN_SMALL_LETTER_E=101]="LATIN_SMALL_LETTER_E",t[t.LATIN_SMALL_LETTER_F=102]="LATIN_SMALL_LETTER_F",t[t.LATIN_SMALL_LETTER_G=103]="LATIN_SMALL_LETTER_G",t[t.LATIN_SMALL_LETTER_H=104]="LATIN_SMALL_LETTER_H",t[t.LATIN_SMALL_LETTER_I=105]="LATIN_SMALL_LETTER_I",t[t.LATIN_SMALL_LETTER_J=106]="LATIN_SMALL_LETTER_J",t[t.LATIN_SMALL_LETTER_K=107]="LATIN_SMALL_LETTER_K",t[t.LATIN_SMALL_LETTER_L=108]="LATIN_SMALL_LETTER_L",t[t.LATIN_SMALL_LETTER_M=109]="LATIN_SMALL_LETTER_M",t[t.LATIN_SMALL_LETTER_N=110]="LATIN_SMALL_LETTER_N",t[t.LATIN_SMALL_LETTER_O=111]="LATIN_SMALL_LETTER_O",t[t.LATIN_SMALL_LETTER_P=112]="LATIN_SMALL_LETTER_P",t[t.LATIN_SMALL_LETTER_Q=113]="LATIN_SMALL_LETTER_Q",t[t.LATIN_SMALL_LETTER_R=114]="LATIN_SMALL_LETTER_R",t[t.LATIN_SMALL_LETTER_S=115]="LATIN_SMALL_LETTER_S",t[t.LATIN_SMALL_LETTER_T=116]="LATIN_SMALL_LETTER_T",t[t.LATIN_SMALL_LETTER_U=117]="LATIN_SMALL_LETTER_U",t[t.LATIN_SMALL_LETTER_V=118]="LATIN_SMALL_LETTER_V",t[t.LATIN_SMALL_LETTER_W=119]="LATIN_SMALL_LETTER_W",t[t.LATIN_SMALL_LETTER_X=120]="LATIN_SMALL_LETTER_X",t[t.LATIN_SMALL_LETTER_Y=121]="LATIN_SMALL_LETTER_Y",t[t.LATIN_SMALL_LETTER_Z=122]="LATIN_SMALL_LETTER_Z",t[t.LEFT_CURLY_BRACKET=123]="LEFT_CURLY_BRACKET",t[t.VERTICAL_LINE=124]="VERTICAL_LINE",t[t.RIGHT_CURLY_BRACKET=125]="RIGHT_CURLY_BRACKET",t[t.TILDE=126]="TILDE"})(et||(et={}));const T1e={[et.QUOTATION_MARK]:et.QUOTATION_MARK,[et.REVERSE_SOLIDUS]:et.REVERSE_SOLIDUS,[et.SOLIDUS]:et.SOLIDUS,[et.LATIN_SMALL_LETTER_B]:et.BACKSPACE,[et.LATIN_SMALL_LETTER_F]:et.FORM_FEED,[et.LATIN_SMALL_LETTER_N]:et.NEWLINE,[et.LATIN_SMALL_LETTER_R]:et.CARRIAGE_RETURN,[et.LATIN_SMALL_LETTER_T]:et.TAB};class Rz{constructor(){this.decoder=new TextDecoder("utf-8"),this.strings=[],this.byteLength=0}appendChar(e){this.strings.push(String.fromCharCode(e)),this.byteLength+=1}appendBuf(e,n=0,r=e.length){this.strings.push(this.decoder.decode(e.subarray(n,r))),this.byteLength+=r-n}reset(){this.strings=[],this.byteLength=0}toString(){return this.strings.join("")}}class Iz{constructor(e){this.decoder=new TextDecoder("utf-8"),this.bufferOffset=0,this.string="",this.byteLength=0,this.buffer=new Uint8Array(e)}appendChar(e){this.bufferOffset>=this.buffer.length&&this.flushStringBuffer(),this.buffer[this.bufferOffset++]=e,this.byteLength+=1}appendBuf(e,n=0,r=e.length){const i=r-n;this.bufferOffset+i>this.buffer.length&&this.flushStringBuffer(),this.buffer.set(e.subarray(n,r),this.bufferOffset),this.bufferOffset+=i,this.byteLength+=i}flushStringBuffer(){this.string+=this.decoder.decode(this.buffer.subarray(0,this.bufferOffset)),this.bufferOffset=0}reset(){this.string="",this.bufferOffset=0,this.byteLength=0}toString(){return this.flushStringBuffer(),this.string}}var OI;(function(t){t[t.LEFT_BRACE=0]="LEFT_BRACE",t[t.RIGHT_BRACE=1]="RIGHT_BRACE",t[t.LEFT_BRACKET=2]="LEFT_BRACKET",t[t.RIGHT_BRACKET=3]="RIGHT_BRACKET",t[t.COLON=4]="COLON",t[t.COMMA=5]="COMMA",t[t.TRUE=6]="TRUE",t[t.FALSE=7]="FALSE",t[t.NULL=8]="NULL",t[t.STRING=9]="STRING",t[t.NUMBER=10]="NUMBER",t[t.SEPARATOR=11]="SEPARATOR"})(OI||(OI={}));const mn=OI;var je;(function(t){t[t.START=0]="START",t[t.ENDED=1]="ENDED",t[t.ERROR=2]="ERROR",t[t.TRUE1=3]="TRUE1",t[t.TRUE2=4]="TRUE2",t[t.TRUE3=5]="TRUE3",t[t.FALSE1=6]="FALSE1",t[t.FALSE2=7]="FALSE2",t[t.FALSE3=8]="FALSE3",t[t.FALSE4=9]="FALSE4",t[t.NULL1=10]="NULL1",t[t.NULL2=11]="NULL2",t[t.NULL3=12]="NULL3",t[t.STRING_DEFAULT=13]="STRING_DEFAULT",t[t.STRING_AFTER_BACKSLASH=14]="STRING_AFTER_BACKSLASH",t[t.STRING_UNICODE_DIGIT_1=15]="STRING_UNICODE_DIGIT_1",t[t.STRING_UNICODE_DIGIT_2=16]="STRING_UNICODE_DIGIT_2",t[t.STRING_UNICODE_DIGIT_3=17]="STRING_UNICODE_DIGIT_3",t[t.STRING_UNICODE_DIGIT_4=18]="STRING_UNICODE_DIGIT_4",t[t.STRING_INCOMPLETE_CHAR=19]="STRING_INCOMPLETE_CHAR",t[t.NUMBER_AFTER_INITIAL_MINUS=20]="NUMBER_AFTER_INITIAL_MINUS",t[t.NUMBER_AFTER_INITIAL_ZERO=21]="NUMBER_AFTER_INITIAL_ZERO",t[t.NUMBER_AFTER_INITIAL_NON_ZERO=22]="NUMBER_AFTER_INITIAL_NON_ZERO",t[t.NUMBER_AFTER_FULL_STOP=23]="NUMBER_AFTER_FULL_STOP",t[t.NUMBER_AFTER_DECIMAL=24]="NUMBER_AFTER_DECIMAL",t[t.NUMBER_AFTER_E=25]="NUMBER_AFTER_E",t[t.NUMBER_AFTER_E_AND_SIGN=26]="NUMBER_AFTER_E_AND_SIGN",t[t.NUMBER_AFTER_E_AND_DIGIT=27]="NUMBER_AFTER_E_AND_DIGIT",t[t.SEPARATOR=28]="SEPARATOR",t[t.BOM_OR_START=29]="BOM_OR_START",t[t.BOM=30]="BOM"})(je||(je={}));function Mz(t){return["START","ENDED","ERROR","TRUE1","TRUE2","TRUE3","FALSE1","FALSE2","FALSE3","FALSE4","NULL1","NULL2","NULL3","STRING_DEFAULT","STRING_AFTER_BACKSLASH","STRING_UNICODE_DIGIT_1","STRING_UNICODE_DIGIT_2","STRING_UNICODE_DIGIT_3","STRING_UNICODE_DIGIT_4","STRING_INCOMPLETE_CHAR","NUMBER_AFTER_INITIAL_MINUS","NUMBER_AFTER_INITIAL_ZERO","NUMBER_AFTER_INITIAL_NON_ZERO","NUMBER_AFTER_FULL_STOP","NUMBER_AFTER_DECIMAL","NUMBER_AFTER_E","NUMBER_AFTER_E_AND_SIGN","NUMBER_AFTER_E_AND_DIGIT","SEPARATOR","BOM_OR_START","BOM"][t]}const S1e={stringBufferSize:0,numberBufferSize:0,separator:void 0,emitPartialTokens:!1};class vv extends Error{constructor(e){super(e),Object.setPrototypeOf(this,vv.prototype)}}class t7{constructor(e){this.state=je.BOM_OR_START,this.bomIndex=0,this.separatorIndex=0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.char_split_buffer=new Uint8Array(4),this.encoder=new TextEncoder,this.offset=-1,e=Object.assign(Object.assign({},S1e),e),this.emitPartialTokens=e.emitPartialTokens===!0,this.bufferedString=e.stringBufferSize&&e.stringBufferSize>4?new Iz(e.stringBufferSize):new Rz,this.bufferedNumber=e.numberBufferSize&&e.numberBufferSize>0?new Iz(e.numberBufferSize):new Rz,this.separator=e.separator,this.separatorBytes=e.separator?this.encoder.encode(e.separator):void 0}get isEnded(){return this.state===je.ENDED}write(e){try{let n;if(e instanceof Uint8Array)n=e;else if(typeof e=="string")n=this.encoder.encode(e);else if(Array.isArray(e))n=Uint8Array.from(e);else if(ArrayBuffer.isView(e))n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else throw new TypeError("Unexpected type. The `write` function only accepts Arrays, TypedArrays and Strings.");for(let r=0;r<n.length;r+=1){const i=n[r];switch(this.state){case je.BOM_OR_START:if(e instanceof Uint8Array&&i===239){this.bom=[239,187,191],this.bomIndex+=1,this.state=je.BOM;continue}if(e instanceof Uint16Array){if(i===254){this.bom=[254,255],this.bomIndex+=1,this.state=je.BOM;continue}if(i===255){this.bom=[255,254],this.bomIndex+=1,this.state=je.BOM;continue}}if(e instanceof Uint32Array){if(i===0){this.bom=[0,0,254,255],this.bomIndex+=1,this.state=je.BOM;continue}if(i===255){this.bom=[255,254,0,0],this.bomIndex+=1,this.state=je.BOM;continue}}case je.START:if(this.offset+=1,this.separatorBytes&&i===this.separatorBytes[0]){if(this.separatorBytes.length===1){this.state=je.START,this.onToken({token:mn.SEPARATOR,value:this.separator,offset:this.offset+this.separatorBytes.length-1});continue}this.state=je.SEPARATOR;continue}if(i===et.SPACE||i===et.NEWLINE||i===et.CARRIAGE_RETURN||i===et.TAB)continue;if(i===et.LEFT_CURLY_BRACKET){this.onToken({token:mn.LEFT_BRACE,value:"{",offset:this.offset});continue}if(i===et.RIGHT_CURLY_BRACKET){this.onToken({token:mn.RIGHT_BRACE,value:"}",offset:this.offset});continue}if(i===et.LEFT_SQUARE_BRACKET){this.onToken({token:mn.LEFT_BRACKET,value:"[",offset:this.offset});continue}if(i===et.RIGHT_SQUARE_BRACKET){this.onToken({token:mn.RIGHT_BRACKET,value:"]",offset:this.offset});continue}if(i===et.COLON){this.onToken({token:mn.COLON,value:":",offset:this.offset});continue}if(i===et.COMMA){this.onToken({token:mn.COMMA,value:",",offset:this.offset});continue}if(i===et.LATIN_SMALL_LETTER_T){this.state=je.TRUE1;continue}if(i===et.LATIN_SMALL_LETTER_F){this.state=je.FALSE1;continue}if(i===et.LATIN_SMALL_LETTER_N){this.state=je.NULL1;continue}if(i===et.QUOTATION_MARK){this.bufferedString.reset(),this.state=je.STRING_DEFAULT;continue}if(i>=et.DIGIT_ONE&&i<=et.DIGIT_NINE){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_INITIAL_NON_ZERO;continue}if(i===et.DIGIT_ZERO){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_INITIAL_ZERO;continue}if(i===et.HYPHEN_MINUS){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_INITIAL_MINUS;continue}break;case je.STRING_DEFAULT:if(i===et.QUOTATION_MARK){const o=this.bufferedString.toString();this.state=je.START,this.onToken({token:mn.STRING,value:o,offset:this.offset}),this.offset+=this.bufferedString.byteLength+1;continue}if(i===et.REVERSE_SOLIDUS){this.state=je.STRING_AFTER_BACKSLASH;continue}if(i>=128){if(i>=194&&i<=223?this.bytes_in_sequence=2:i<=239?this.bytes_in_sequence=3:this.bytes_in_sequence=4,this.bytes_in_sequence<=n.length-r){this.bufferedString.appendBuf(n,r,r+this.bytes_in_sequence),r+=this.bytes_in_sequence-1;continue}this.bytes_remaining=r+this.bytes_in_sequence-n.length,this.char_split_buffer.set(n.subarray(r)),r=n.length-1,this.state=je.STRING_INCOMPLETE_CHAR;continue}if(i>=et.SPACE){this.bufferedString.appendChar(i);continue}break;case je.STRING_INCOMPLETE_CHAR:this.char_split_buffer.set(n.subarray(r,r+this.bytes_remaining),this.bytes_in_sequence-this.bytes_remaining),this.bufferedString.appendBuf(this.char_split_buffer,0,this.bytes_in_sequence),r=this.bytes_remaining-1,this.state=je.STRING_DEFAULT;continue;case je.STRING_AFTER_BACKSLASH:const s=T1e[i];if(s){this.bufferedString.appendChar(s),this.state=je.STRING_DEFAULT;continue}if(i===et.LATIN_SMALL_LETTER_U){this.unicode="",this.state=je.STRING_UNICODE_DIGIT_1;continue}break;case je.STRING_UNICODE_DIGIT_1:case je.STRING_UNICODE_DIGIT_2:case je.STRING_UNICODE_DIGIT_3:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE||i>=et.LATIN_CAPITAL_LETTER_A&&i<=et.LATIN_CAPITAL_LETTER_F||i>=et.LATIN_SMALL_LETTER_A&&i<=et.LATIN_SMALL_LETTER_F){this.unicode+=String.fromCharCode(i),this.state+=1;continue}break;case je.STRING_UNICODE_DIGIT_4:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE||i>=et.LATIN_CAPITAL_LETTER_A&&i<=et.LATIN_CAPITAL_LETTER_F||i>=et.LATIN_SMALL_LETTER_A&&i<=et.LATIN_SMALL_LETTER_F){const o=parseInt(this.unicode+String.fromCharCode(i),16);this.highSurrogate===void 0?o>=55296&&o<=56319?this.highSurrogate=o:this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(o))):(o>=56320&&o<=57343?this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate,o))):this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.state=je.STRING_DEFAULT;continue}break;case je.NUMBER_AFTER_INITIAL_MINUS:if(i===et.DIGIT_ZERO){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_INITIAL_ZERO;continue}if(i>=et.DIGIT_ONE&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_INITIAL_NON_ZERO;continue}break;case je.NUMBER_AFTER_INITIAL_ZERO:if(i===et.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_FULL_STOP;continue}if(i===et.LATIN_SMALL_LETTER_E||i===et.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_E;continue}r-=1,this.state=je.START,this.emitNumber();continue;case je.NUMBER_AFTER_INITIAL_NON_ZERO:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===et.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_FULL_STOP;continue}if(i===et.LATIN_SMALL_LETTER_E||i===et.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_E;continue}r-=1,this.state=je.START,this.emitNumber();continue;case je.NUMBER_AFTER_FULL_STOP:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_DECIMAL;continue}break;case je.NUMBER_AFTER_DECIMAL:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===et.LATIN_SMALL_LETTER_E||i===et.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_E;continue}r-=1,this.state=je.START,this.emitNumber();continue;case je.NUMBER_AFTER_E:if(i===et.PLUS_SIGN||i===et.HYPHEN_MINUS){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_E_AND_SIGN;continue}case je.NUMBER_AFTER_E_AND_SIGN:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=je.NUMBER_AFTER_E_AND_DIGIT;continue}break;case je.NUMBER_AFTER_E_AND_DIGIT:if(i>=et.DIGIT_ZERO&&i<=et.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}r-=1,this.state=je.START,this.emitNumber();continue;case je.TRUE1:if(i===et.LATIN_SMALL_LETTER_R){this.state=je.TRUE2;continue}break;case je.TRUE2:if(i===et.LATIN_SMALL_LETTER_U){this.state=je.TRUE3;continue}break;case je.TRUE3:if(i===et.LATIN_SMALL_LETTER_E){this.state=je.START,this.onToken({token:mn.TRUE,value:!0,offset:this.offset}),this.offset+=3;continue}break;case je.FALSE1:if(i===et.LATIN_SMALL_LETTER_A){this.state=je.FALSE2;continue}break;case je.FALSE2:if(i===et.LATIN_SMALL_LETTER_L){this.state=je.FALSE3;continue}break;case je.FALSE3:if(i===et.LATIN_SMALL_LETTER_S){this.state=je.FALSE4;continue}break;case je.FALSE4:if(i===et.LATIN_SMALL_LETTER_E){this.state=je.START,this.onToken({token:mn.FALSE,value:!1,offset:this.offset}),this.offset+=4;continue}break;case je.NULL1:if(i===et.LATIN_SMALL_LETTER_U){this.state=je.NULL2;continue}break;case je.NULL2:if(i===et.LATIN_SMALL_LETTER_L){this.state=je.NULL3;continue}break;case je.NULL3:if(i===et.LATIN_SMALL_LETTER_L){this.state=je.START,this.onToken({token:mn.NULL,value:null,offset:this.offset}),this.offset+=3;continue}break;case je.SEPARATOR:if(this.separatorIndex+=1,!this.separatorBytes||i!==this.separatorBytes[this.separatorIndex])break;this.separatorIndex===this.separatorBytes.length-1&&(this.state=je.START,this.onToken({token:mn.SEPARATOR,value:this.separator,offset:this.offset+this.separatorIndex}),this.separatorIndex=0);continue;case je.BOM:if(i===this.bom[this.bomIndex]){if(this.bomIndex===this.bom.length-1){this.state=je.START,this.bom=void 0,this.bomIndex=0;continue}this.bomIndex+=1;continue}break;case je.ENDED:if(i===et.SPACE||i===et.NEWLINE||i===et.CARRIAGE_RETURN||i===et.TAB)continue}throw new vv(`Unexpected "${String.fromCharCode(i)}" at position "${r}" in state ${Mz(this.state)}`)}if(this.emitPartialTokens)switch(this.state){case je.TRUE1:case je.TRUE2:case je.TRUE3:this.onToken({token:mn.TRUE,value:!0,offset:this.offset,partial:!0});break;case je.FALSE1:case je.FALSE2:case je.FALSE3:case je.FALSE4:this.onToken({token:mn.FALSE,value:!1,offset:this.offset,partial:!0});break;case je.NULL1:case je.NULL2:case je.NULL3:this.onToken({token:mn.NULL,value:null,offset:this.offset,partial:!0});break;case je.STRING_DEFAULT:{const r=this.bufferedString.toString();this.onToken({token:mn.STRING,value:r,offset:this.offset,partial:!0});break}case je.NUMBER_AFTER_INITIAL_ZERO:case je.NUMBER_AFTER_INITIAL_NON_ZERO:case je.NUMBER_AFTER_DECIMAL:case je.NUMBER_AFTER_E_AND_DIGIT:try{this.onToken({token:mn.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset,partial:!0})}catch{}}}catch(n){this.error(n)}}emitNumber(){this.onToken({token:mn.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset}),this.offset+=this.bufferedNumber.byteLength-1}parseNumber(e){return Number(e)}error(e){this.state!==je.ENDED&&(this.state=je.ERROR),this.onError(e)}end(){switch(this.state){case je.NUMBER_AFTER_INITIAL_ZERO:case je.NUMBER_AFTER_INITIAL_NON_ZERO:case je.NUMBER_AFTER_DECIMAL:case je.NUMBER_AFTER_E_AND_DIGIT:this.state=je.ENDED,this.emitNumber(),this.onEnd();break;case je.BOM_OR_START:case je.START:case je.ERROR:case je.SEPARATOR:this.state=je.ENDED,this.onEnd();break;default:this.error(new vv(`Tokenizer ended in the middle of a token (state: ${Mz(this.state)}). Either not all the data was received or the data was invalid.`))}}onToken(e){throw new vv(`Can't emit tokens before the "onToken" callback has been set up.`)}onError(e){throw e}onEnd(){}}var cs;(function(t){t[t.OBJECT=0]="OBJECT",t[t.ARRAY=1]="ARRAY"})(cs||(cs={}));var Hn;(function(t){t[t.VALUE=0]="VALUE",t[t.KEY=1]="KEY",t[t.COLON=2]="COLON",t[t.COMMA=3]="COMMA",t[t.ENDED=4]="ENDED",t[t.ERROR=5]="ERROR",t[t.SEPARATOR=6]="SEPARATOR"})(Hn||(Hn={}));function Lz(t){return["VALUE","KEY","COLON","COMMA","ENDED","ERROR","SEPARATOR"][t]}const C1e={paths:void 0,keepStack:!0,separator:void 0,emitPartialValues:!1};class Ip extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ip.prototype)}}class n7{constructor(e){this.state=Hn.VALUE,this.mode=void 0,this.key=void 0,this.value=void 0,this.stack=[],e=Object.assign(Object.assign({},C1e),e),e.paths&&(this.paths=e.paths.map(n=>{if(n===void 0||n==="$*")return;if(!n.startsWith("$"))throw new Ip(`Invalid selector "${n}". Should start with "$".`);const r=n.split(".").slice(1);if(r.includes(""))throw new Ip(`Invalid selector "${n}". ".." syntax not supported.`);return r})),this.keepStack=e.keepStack||!1,this.separator=e.separator,e.emitPartialValues||(this.emitPartial=()=>{})}shouldEmit(){return this.paths?this.paths.some(e=>{var n;if(e===void 0)return!0;if(e.length!==this.stack.length)return!1;for(let i=0;i<e.length-1;i++){const s=e[i],o=this.stack[i+1].key;if(s!=="*"&&s!==o)return!1}const r=e[e.length-1];return r==="*"?!0:r===((n=this.key)===null||n===void 0?void 0:n.toString())}):!0}push(){this.stack.push({key:this.key,value:this.value,mode:this.mode,emit:this.shouldEmit()})}pop(){const e=this.value;let n;({key:this.key,value:this.value,mode:this.mode,emit:n}=this.stack.pop()),this.state=this.mode!==void 0?Hn.COMMA:Hn.VALUE,this.emit(e,n)}emit(e,n){!this.keepStack&&this.value&&this.stack.every(r=>!r.emit)&&delete this.value[this.key],n&&this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack}),this.stack.length===0&&(this.separator?this.state=Hn.SEPARATOR:this.separator===void 0&&this.end())}emitPartial(e){if(this.shouldEmit()){if(this.state===Hn.KEY){this.onValue({value:void 0,key:e,parent:this.value,stack:this.stack,partial:!0});return}this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack,partial:!0})}}get isEnded(){return this.state===Hn.ENDED}write({token:e,value:n,partial:r}){try{if(r){this.emitPartial(n);return}if(this.state===Hn.VALUE){if(e===mn.STRING||e===mn.NUMBER||e===mn.TRUE||e===mn.FALSE||e===mn.NULL){this.mode===cs.OBJECT?(this.value[this.key]=n,this.state=Hn.COMMA):this.mode===cs.ARRAY&&(this.value.push(n),this.state=Hn.COMMA),this.emit(n,this.shouldEmit());return}if(e===mn.LEFT_BRACE){if(this.push(),this.mode===cs.OBJECT)this.value=this.value[this.key]={};else if(this.mode===cs.ARRAY){const i={};this.value.push(i),this.value=i}else this.value={};this.mode=cs.OBJECT,this.state=Hn.KEY,this.key=void 0,this.emitPartial();return}if(e===mn.LEFT_BRACKET){if(this.push(),this.mode===cs.OBJECT)this.value=this.value[this.key]=[];else if(this.mode===cs.ARRAY){const i=[];this.value.push(i),this.value=i}else this.value=[];this.mode=cs.ARRAY,this.state=Hn.VALUE,this.key=0,this.emitPartial();return}if(this.mode===cs.ARRAY&&e===mn.RIGHT_BRACKET&&this.value.length===0){this.pop();return}}if(this.state===Hn.KEY){if(e===mn.STRING){this.key=n,this.state=Hn.COLON,this.emitPartial();return}if(e===mn.RIGHT_BRACE&&Object.keys(this.value).length===0){this.pop();return}}if(this.state===Hn.COLON&&e===mn.COLON){this.state=Hn.VALUE;return}if(this.state===Hn.COMMA){if(e===mn.COMMA){if(this.mode===cs.ARRAY){this.state=Hn.VALUE,this.key+=1;return}if(this.mode===cs.OBJECT){this.state=Hn.KEY;return}}if(e===mn.RIGHT_BRACE&&this.mode===cs.OBJECT||e===mn.RIGHT_BRACKET&&this.mode===cs.ARRAY){this.pop();return}}if(this.state===Hn.SEPARATOR&&e===mn.SEPARATOR&&n===this.separator){this.state=Hn.VALUE;return}throw new Ip(`Unexpected ${mn[e]} (${JSON.stringify(n)}) in state ${Lz(this.state)}`)}catch(i){this.error(i)}}error(e){this.state!==Hn.ENDED&&(this.state=Hn.ERROR),this.onError(e)}end(){this.state!==Hn.VALUE&&this.state!==Hn.SEPARATOR||this.stack.length>0?this.error(new Error(`Parser ended in mid-parsing (state: ${Lz(this.state)}). Either not all the data was received or the data was invalid.`)):(this.state=Hn.ENDED,this.onEnd())}onValue(e){throw new Ip(`Can't emit data before the "onValue" callback has been set up.`)}onError(e){throw e}onEnd(){}}class A1e{constructor(e={}){this.tokenizer=new t7(e),this.tokenParser=new n7(e),this.tokenizer.onToken=this.tokenParser.write.bind(this.tokenParser),this.tokenizer.onEnd=()=>{this.tokenParser.isEnded||this.tokenParser.end()},this.tokenParser.onError=this.tokenizer.error.bind(this.tokenizer),this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end()}}get isEnded(){return this.tokenizer.isEnded&&this.tokenParser.isEnded}write(e){this.tokenizer.write(e)}end(){this.tokenizer.end()}set onToken(e){this.tokenizer.onToken=n=>{e(n),this.tokenParser.write(n)}}set onValue(e){this.tokenParser.onValue=e}set onError(e){this.tokenizer.onError=e}set onEnd(e){this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end(),e.call(this.tokenParser)}}}function r7(t){const{value:e,key:n,parent:r,stack:i,partial:s}=t;return{value:e,key:n,parent:kz(r),stack:kz(i),partial:s}}function kz(t){return typeof t!="object"||Array.isArray(t)&&t.filter(e=>e).length===0?t:JSON.parse(JSON.stringify(t))}class P1e extends A1e{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(r7(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class R1e extends TransformStream{constructor(e,n,r){const i=new P1e(e);super(i,n,r)}}class I1e extends t7{constructor(e){super(e),this.onToken=n=>this.controller.enqueue(n),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class XGe extends TransformStream{constructor(e,n,r){const i=new I1e(e);super(i,n,r)}}class M1e extends n7{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(r7(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class YGe extends TransformStream{constructor(e,n,r){const i=new M1e(e);super(i,n,r)}}var qp=(t=>(t.started="started",t.progress="progress",t.cancel="cancel",t.error="error",t.finished="finished",t))(qp||{});function L1e(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const s of t)for(const o of s)for(const a of o){let l=a[0],c=a[1];l<e&&(e=l),l>n&&(n=l),c<r&&(r=c),c>i&&(i=c)}return{topLeft:{lng:e,lat:i},bottomRight:{lng:n,lat:r}}}function k1e(t,e,n,r){const i=hy(n,r),s={x:i.x-t/2,y:i.y-e/2},o={x:i.x+t/2,y:i.y+e/2};return{topLeft:mz(s,r),bottomRight:mz(o,r)}}function O1e(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function N1e(t,e,n){let r=e[0],i=e[1],s=n[0]-r,o=n[1]-i;if(s!==0||o!==0){const a=((t[0]-r)*s+(t[1]-i)*o)/(s*s+o*o);a>1?(r=n[0],i=n[1]):a>0&&(r+=s*a,i+=o*a)}return s=t[0]-r,o=t[1]-i,s*s+o*o}function D1e(t,e){let n=t[0];const r=[n];let i=null;for(let s=1,o=t.length;s<o;s++)i=t[s],O1e(i,n)>e&&(r.push(i),n=i);return n!==i&&r.push(i),r}function NI(t,e,n,r,i){let s=r,o=0;for(let a=e+1;a<n;a++){const l=N1e(t[a],t[e],t[n]);l>s&&(o=a,s=l)}s>r&&(o-e>1&&NI(t,e,o,r,i),i.push(t[o]),n-o>1&&NI(t,o,n,r,i))}function B1e(t,e){const n=t.length-1,r=[t[0]];return NI(t,0,n,e,r),r.push(t[n]),r}function F1e(t,e,n){if(t.length<=2)return t;const r=e!==void 0?e*e:1;return t=n?t:D1e(t,r),t=B1e(t,r),t}function Pu(t,e=1e4){return Math.round((t[0]+180)*e)*(1e3*e)+Math.round((t[1]+90)*e)}function z1e(t,e){const n=[],r=t.map(o=>{const a=Pu(o);return e.has(a)});let i=0,s=r[0];for(let o=1;o<=r.length;o++)(o===r.length||r[o]!==s)&&(n.push({isCached:s,startIndex:i,endIndex:o-1}),i=o,s=o<r.length?r[o]:!s);return n}function U1e(t,e,n,r){let i=0,s=0;for(;i<e.length&&s<n.length;){const o=n[s],a=Pu(o),l=e[i],c=Pu(l);r.set(c,a),c===a?(i++,s++):i++}return r}const $1e=new Map;function j1e(t,e,n,r,i){return e.map((s,o)=>s.map((a,l)=>{const c=[];return z1e(a,i).forEach((d,h)=>{if(d.isCached)for(let f=d.startIndex;f<=d.endIndex;f++){const p=a[f],m=Pu(p);i.get(m)===m&&c.push(p)}else{const f=a.slice(d.startIndex,d.endIndex+1),p=F1e(f,n,r);f.length>0&&p.length>0&&(Pu(f[0])!==Pu(p[0])&&p.unshift(f[0]),Pu(f[f.length-1])!==Pu(p[p.length-1])&&p.push(f[f.length-1])),c.push(...p),U1e(t,f,p,i)}}),c}).filter(a=>a.length>2)).filter(s=>s.length>0)}const G1e=.05,H1e=async({db:t,stream:e,fileName:n,fileSize:r,startedCallback:i,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:l})=>{let u=[],d=[],h=[];const f=new R1e({stringBufferSize:void 0,paths:["$.features"],keepStack:!1}),p=async(y,x,_)=>{console.log("bulkAdd",_,x.length),y.bulkAdd(x).catch(w=>{o(_,w.message)})};let m=0;const b=async y=>{i(n,t.name),y.getReader().read().then(x=>{const{done:_,value:w}=x;if(_)return;const E=w.value;m+=E.length,E.forEach((S,A)=>{const{COUNTRY:k,NAME_1:M,NAME_2:I,GID_0:B,GID_1:R,GID_2:O}=S.properties,C=S.geometry.coordinates,F=j1e(`${k}	${M}	${I}`,C,G1e,!0,$1e),q={},G=L1e(F);for(let H=0;H<=kl;H++){const Z=WO(G.topLeft,G.bottomRight,H);if(Z.length===0)q[`z${H}`]=Obe.NOT_CONTAINED;else if(Z.length===1)if(Z[0].length===1)q[`z${H}`]=Z[0][0];else if(Z[0].length>=2)q[`z${H}`]=q[`z${H-1}`];else throw new Error;else if(Z.length===2)Z[1].length===1?q[`z${H}_`]=Z[1][0]:Z[1].length>=2&&(q[`z${H}_`]=q[`z${H-1}_`]);else throw new Error("mortonNumber.length > 2 :"+Z.join(" ,"))}const j={country:k,gid_0:B,coordinates:F,...q};j.coordinates.length>0&&j.country&&(M?I?h.push({...j,name_1:M,gid_1:R,name_2:I,gid_2:O,name:j.name_2}):d.push({...j,name_1:M,gid_1:R,name:j.name_1}):u.push({...j,name:j.country}),s({type:qp.progress,progress:A/E.length*100,index:A,total:m,unit:"items",fileName:n,fileSize:r||-1}),u.length===64&&(p(t.countries,u,n),u=[]),d.length===64&&(p(t.regions1,d,n),d=[]),h.length===64&&(p(t.regions2,h,n),h=[]))}),u.length>0&&p(t.countries,u,n),d.length>0&&p(t.regions1,d,n),h.length>0&&p(t.regions2,h,n),s({type:qp.progress,fileName:n,fileSize:r,progress:100,total:m,index:m,unit:"items_end"}),a(n)})};try{await b(e.pipeThrough(f))}catch(y){console.error(y),o(n,y.message);return}};var qO=Symbol.for("immer-nothing"),yv=Symbol.for("immer-draftable"),Eo=Symbol.for("immer-state");function Qi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Vh=Object.getPrototypeOf;function Wh(t){return!!t&&!!t[Eo]}function ld(t){var e;return t?i7(t)||Array.isArray(t)||!!t[yv]||!!((e=t.constructor)!=null&&e[yv])||cb(t)||ub(t):!1}var V1e=Object.prototype.constructor.toString();function i7(t){if(!t||typeof t!="object")return!1;const e=Vh(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===V1e}function Tg(t,e){Xh(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function Xh(t){const e=t[Eo];return e?e.type_:Array.isArray(t)?1:cb(t)?2:ub(t)?3:0}function fy(t,e){return Xh(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function uP(t,e){return Xh(t)===2?t.get(e):t[e]}function s7(t,e,n){const r=Xh(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function W1e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function cb(t){return t instanceof Map}function ub(t){return t instanceof Set}function Kd(t){return t.copy_||t.base_}function DI(t,e){if(cb(t))return new Map(t);if(ub(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&i7(t))return Vh(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[Eo];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Vh(t),n)}function KO(t,e=!1){return gS(t)||Wh(t)||!ld(t)||(Xh(t)>1&&(t.set=t.add=t.clear=t.delete=X1e),Object.freeze(t),e&&Tg(t,(n,r)=>KO(r,!0))),t}function X1e(){Qi(2)}function gS(t){return Object.isFrozen(t)}var BI={};function Yh(t){const e=BI[t];return e||Qi(0,t),e}function Y1e(t,e){BI[t]||(BI[t]=e)}var py;function o7(){return py}function q1e(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Oz(t,e){e&&(Yh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function FI(t){zI(t),t.drafts_.forEach(K1e),t.drafts_=null}function zI(t){t===py&&(py=t.parent_)}function Nz(t){return py=q1e(py,t)}function K1e(t){const e=t[Eo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Dz(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Eo].modified_&&(FI(e),Qi(4)),ld(t)&&(t=nE(e,t),e.parent_||rE(e,t)),e.patches_&&Yh("Patches").generateReplacementPatches_(n[Eo].base_,t,e.patches_,e.inversePatches_)):t=nE(e,n,[]),FI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==qO?t:void 0}function nE(t,e,n){if(gS(e))return e;const r=e[Eo];if(!r)return Tg(e,(i,s)=>Bz(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return rE(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Tg(s,(a,l)=>Bz(t,r,i,a,l,n,o)),rE(t,i,!1),n&&t.patches_&&Yh("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Bz(t,e,n,r,i,s,o){if(Wh(i)){const a=s&&e&&e.type_!==3&&!fy(e.assigned_,r)?s.concat(r):void 0,l=nE(t,i,a);if(s7(n,r,l),Wh(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ld(i)&&!gS(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;nE(t,i),(!e||!e.scope_.parent_)&&rE(t,i)}}function rE(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&KO(e,n)}function Z1e(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:o7(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ZO;n&&(i=[r],s=gy);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ZO={get(t,e){if(e===Eo)return t;const n=Kd(t);if(!fy(n,e))return Q1e(t,n,e);const r=n[e];return t.finalized_||!ld(r)?r:r===dP(t.base_,e)?(hP(t),t.copy_[e]=$I(r,t)):r},has(t,e){return e in Kd(t)},ownKeys(t){return Reflect.ownKeys(Kd(t))},set(t,e,n){const r=a7(Kd(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=dP(Kd(t),e),s=i==null?void 0:i[Eo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(W1e(n,i)&&(n!==void 0||fy(t.base_,e)))return!0;hP(t),UI(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return dP(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,hP(t),UI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Kd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Qi(11)},getPrototypeOf(t){return Vh(t.base_)},setPrototypeOf(){Qi(12)}},gy={};Tg(ZO,(t,e)=>{gy[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gy.deleteProperty=function(t,e){return gy.set.call(this,t,e,void 0)};gy.set=function(t,e,n){return ZO.set.call(this,t[0],e,n,t[0])};function dP(t,e){const n=t[Eo];return(n?Kd(n):t)[e]}function Q1e(t,e,n){var i;const r=a7(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function a7(t,e){if(!(e in t))return;let n=Vh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Vh(n)}}function UI(t){t.modified_||(t.modified_=!0,t.parent_&&UI(t.parent_))}function hP(t){t.copy_||(t.copy_=DI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var J1e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Qi(6),r!==void 0&&typeof r!="function"&&Qi(7);let i;if(ld(e)){const s=Nz(this),o=$I(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?FI(s):zI(s)}return Oz(s,r),Dz(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===qO&&(i=void 0),this.autoFreeze_&&KO(i,!0),r){const s=[],o=[];Yh("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Qi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ld(t)||Qi(8),Wh(t)&&(t=e_e(t));const e=Nz(this),n=$I(t,void 0);return n[Eo].isManual_=!0,zI(e),n}finishDraft(t,e){const n=t&&t[Eo];(!n||!n.isManual_)&&Qi(9);const{scope_:r}=n;return Oz(r,e),Dz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Yh("Patches").applyPatches_;return Wh(t)?r(t,e):this.produce(t,i=>r(i,e))}};function $I(t,e){const n=cb(t)?Yh("MapSet").proxyMap_(t,e):ub(t)?Yh("MapSet").proxySet_(t,e):Z1e(t,e);return(e?e.scope_:o7()).drafts_.push(n),n}function e_e(t){return Wh(t)||Qi(10,t),l7(t)}function l7(t){if(!ld(t)||gS(t))return t;const e=t[Eo];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=DI(t,e.scope_.immer_.useStrictShallowCopy_)}else n=DI(t,!0);return Tg(n,(r,i)=>{s7(n,r,l7(i))}),e&&(e.finalized_=!1),n}function c7(){const e="replace",n="add",r="remove";function i(h,f,p,m){switch(h.type_){case 0:case 2:return o(h,f,p,m);case 1:return s(h,f,p,m);case 3:return a(h,f,p,m)}}function s(h,f,p,m){let{base_:b,assigned_:y}=h,x=h.copy_;x.length<b.length&&([b,x]=[x,b],[p,m]=[m,p]);for(let _=0;_<b.length;_++)if(y[_]&&x[_]!==b[_]){const w=f.concat([_]);p.push({op:e,path:w,value:d(x[_])}),m.push({op:e,path:w,value:d(b[_])})}for(let _=b.length;_<x.length;_++){const w=f.concat([_]);p.push({op:n,path:w,value:d(x[_])})}for(let _=x.length-1;b.length<=_;--_){const w=f.concat([_]);m.push({op:r,path:w})}}function o(h,f,p,m){const{base_:b,copy_:y}=h;Tg(h.assigned_,(x,_)=>{const w=uP(b,x),E=uP(y,x),S=_?fy(b,x)?e:n:r;if(w===E&&S===e)return;const A=f.concat(x);p.push(S===r?{op:S,path:A}:{op:S,path:A,value:E}),m.push(S===n?{op:r,path:A}:S===r?{op:n,path:A,value:d(w)}:{op:e,path:A,value:d(w)})})}function a(h,f,p,m){let{base_:b,copy_:y}=h,x=0;b.forEach(_=>{if(!y.has(_)){const w=f.concat([x]);p.push({op:r,path:w,value:_}),m.unshift({op:n,path:w,value:_})}x++}),x=0,y.forEach(_=>{if(!b.has(_)){const w=f.concat([x]);p.push({op:n,path:w,value:_}),m.unshift({op:r,path:w,value:_})}x++})}function l(h,f,p,m){p.push({op:e,path:[],value:f===qO?void 0:f}),m.push({op:e,path:[],value:h})}function c(h,f){return f.forEach(p=>{const{path:m,op:b}=p;let y=h;for(let E=0;E<m.length-1;E++){const S=Xh(y);let A=m[E];typeof A!="string"&&typeof A!="number"&&(A=""+A),(S===0||S===1)&&(A==="__proto__"||A==="constructor")&&Qi(19),typeof y=="function"&&A==="prototype"&&Qi(19),y=uP(y,A),typeof y!="object"&&Qi(18,m.join("/"))}const x=Xh(y),_=u(p.value),w=m[m.length-1];switch(b){case e:switch(x){case 2:return y.set(w,_);case 3:Qi(16);default:return y[w]=_}case n:switch(x){case 1:return w==="-"?y.push(_):y.splice(w,0,_);case 2:return y.set(w,_);case 3:return y.add(_);default:return y[w]=_}case r:switch(x){case 1:return y.splice(w,1);case 2:return y.delete(w);case 3:return y.delete(p.value);default:return delete y[w]}default:Qi(17,b)}}),h}function u(h){if(!ld(h))return h;if(Array.isArray(h))return h.map(u);if(cb(h))return new Map(Array.from(h.entries()).map(([p,m])=>[p,u(m)]));if(ub(h))return new Set(Array.from(h).map(u));const f=Object.create(Vh(h));for(const p in h)f[p]=u(h[p]);return fy(h,yv)&&(f[yv]=h[yv]),f}function d(h){return Wh(h)?u(h):h}Y1e("Patches",{applyPatches_:c,generatePatches_:i,generateReplacementPatches_:l})}var To=new J1e,u7=To.produce,t_e=To.produceWithPatches.bind(To);To.setAutoFreeze.bind(To);To.setUseStrictShallowCopy.bind(To);var Fz=To.applyPatches.bind(To);To.createDraft.bind(To);To.finishDraft.bind(To);function d7(t){const e=ua(t,(n,r,i)=>r(e,u7(n(e),typeof i=="function"?i:()=>i)));return e}function n_e(t,e){const n=e7(t,e);return P.useCallback(r=>n(u7(r)),[n])}function h7(t,e){return[_h(t,e),n_e(t,e)]}const r_e=({text:t})=>{const[e,n]=P.useState(null),r=P.useCallback(async()=>{try{await navigator.clipboard.writeText(t),n(!0)}catch(i){console.error("Failed to copy: ",i),n(!1)}},[t]);return $(bs,{onClick:r,children:Be(En,{children:[$(t9,{}),e===null?null:e?$(lye,{}):$(h9,{})]})})},Rs={onEnterTask:0,display:1,onLeaveTask:2,done:3},i_e=5,s_e=[],QO=d7(s_e),f7=ua(t=>t(QO).slice(1).map(e=>e.slice(1))),o_e=ua(t=>t(f7).flat().filter(e=>e).length),p7=ua(t=>i1e(t(g7),t(f7),!1)),a_e=ua(t=>t(p7).join(`
`)),l_e=[],c_e={},g7=ua(l_e),u_e=ua(c_e),d_e=()=>{var k,M;const[t,e]=Rn.useState(0),[n,r]=Rn.useState(new Array(i_e)),[i,s]=qu(QO),o=_h(p7),[a,l]=qu(u_e),c=_h(a_e),[u,d]=qu(g7),h=_h(o_e);P.useEffect(()=>{document.title=jh+" - Setup GADM maps"},[]);const[,f]=P.useState(3),[p,m]=P.useState(null),b=4,y=()=>Object.values(n).every(I=>I===Rs.done),x=async()=>{await E(t),e(t-1),await S(t-1)},_=Ts(),w=async()=>{0<=t&&await E(t),t<A.length&&(e(t+1),await S(t+1))},E=async I=>{r(B=>{const R=[...B];return R[I]=Rs.onLeaveTask,R}),A[I]&&await A[I].onLeave(),r(B=>{const R=[...B];return R[I]=Rs.done,R})},S=async I=>{0<=I&&(r(B=>{const R=[...B];return R[I]=Rs.onEnterTask,R}),A[I]&&await A[I].onEnter(),r(B=>{const R=[...B];return R[I]=Rs.display,R}))};P.useEffect(()=>{S(0)},[]);const A=[{label:"Step 1: Accept the GADM license",contents:Be(lo,{children:[$(ac,{children:"The data are freely available for academic use and other non-commercial use. Redistribution, or commercial use is not allowed without prior permission. See the license for more details."}),$(Vt,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:$(Ds,{variant:"outlined",onClick:()=>S(1),children:Be("a",{href:"https://gadm.org/license.html",target:"_blank",rel:"noreferrer",children:["See the license",$(wz,{children:$(_ye,{})})]})})})]}),onEnter:async()=>{console.log("onEnter 1")},onLeave:async()=>{console.log("onLeave 1")}},{label:"Step 2: Download the index file",contents:Be(lo,{children:[$(ac,{children:"The country index is a list of all the countries that are available. This is used to download the maps."}),$(Vt,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:$(Ds,{size:"large",variant:"contained",onClick:()=>w(),disabled:n[1]===Rs.onLeaveTask||n[1]===Rs.done,children:n[1]===Rs.display?"Download GADM Index":n[1]===Rs.onLeaveTask?"download GADM files...":"download GADM files finished"})})]}),onEnter:async()=>{console.log("onEnter 2")},onLeave:async()=>{console.log("onLeave 2");const I=await n1e();d(I),s(B=>(B[0]=new Array(b+2).fill(!1),I.forEach((R,O)=>{B[O+1]=new Array(R.level+2),B[O+1].fill(!1)}),B))}},{label:"Step 3: Select data files",contents:Be(gfe,{children:[Be(ac,{children:["Please select data items to download :",i&&i.length>0&&i[0].length>0?i[0][0]:"undefined"]}),!u||u.length===0?$(Vt,{style:{display:"flex",justifyContent:"center",margin:"8px"},children:$(yg,{variant:"indeterminate"})}):Be(Vt,{children:[$(w1e,{countries:u,levelMax:b}),h>0&&$(Vt,{style:{position:"absolute",bottom:"10px",width:"100vw",display:"flex",justifyContent:"center",textAlign:"center"},children:Be(En,{children:[h+(h>1?" files":" file")+" selected"," ",$(wz,{children:$(r_e,{text:c})})]})})]})]}),onEnter:async()=>{},onLeave:async()=>{}},{label:"Step 4: Download data files",contents:Be(lo,{children:[o.length===0&&$(Vt,{children:Be(ac,{children:["[",o.length,"] No data file to download at this time. Skip to next."]})}),p&&(p==null?void 0:p.progress)<100&&Be(Vt,{children:[$(yg,{variant:"indeterminate"})," downloading..."]}),o&&o.length>=1&&p&&$(E1e,{variant:"determinate",index:p.index,total:p.total,value:p.progress}),$(Vt,{style:{margin:"20px"},children:$(cfe,{direction:"column",spacing:2,children:o&&o.map((I,B)=>{const R=a[I];if(R){if(R.status===zx.loading)return $(Y1,{label:I,deleteIcon:$(pye,{})},B);if(R.status===zx.success)return $(Y1,{color:"success",label:I,deleteIcon:$(fye,{})},B);if(R.status===zx.error)return $(Lue,{badgeContent:R.retry,color:"warning",children:$(Y1,{color:"warning",label:I,deleteIcon:$(h9,{})})})}else return $(Y1,{label:I,color:"primary"},B)})})})]}),onEnter:async()=>{const I=lb();si.getSingleton().databases.add({uuid:I,name:"GADM GeoJSON",description:(o==null?void 0:o.join(`
`))||"",type:go.gadmShapes,urls:Array.from(o),createdAt:Date.now(),updatedAt:Date.now()});const B=await si.getSingleton().databases.where("uuid").equals(I).last();if(!B)throw new Error("Database not found");const R=`database${B.id}`,O=await pS.open(R);console.log(R),requestIdleCallback(async()=>{await s1e(o.map(C=>YO(C)),(C,F)=>{l(q=>({...q,[C]:F}))},({progress:C,index:F,total:q})=>{m({progress:C,index:F,total:q})},async({url:C,data:F})=>{const q=new Uint8Array(F),G=new ReadableStream({start(j){j.enqueue(q),j.close()}});await H1e({db:O,stream:G,fileName:C,fileSize:void 0,cancelCallback(j){console.warn("*cancel",j)},errorCallback(j,H){console.error("*error",j)},progressCallback(j){console.log("*progress",j)},startedCallback(j){console.log("*start",j)},finishedCallback(j){console.log("*finish",j)}})})})},onLeave:async()=>{l({})}},{label:"Step 5: Simplify polygons",contents:Be(lo,{children:[$(ac,{children:"Simplify polygons to reduce heavy load of CPU/Memory/Storage."}),$(Vt,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:$(rb,{sx:{width:"70%"},min:0,defaultValue:3,max:6,step:1,marks:[{value:0,label:"0.1 (Low Quality)"},{value:1,label:"0.05"},{value:2,label:"0.01"},{value:3,label:"0.005"},{value:4,label:"0.001"},{value:5,label:"0.0005"},{value:6,label:"0.0001 (High Quality)"}],onChangeCommitted:(I,B)=>{f(B)}})})]}),onEnter:async()=>{},onLeave:async()=>{}},{label:"Step 6: Finish",contents:$(ac,{children:"Congratulations! You finished the GADM resource preparation."}),onEnter:async()=>{},onLeave:async()=>_("/resources",{replace:!0})}];return Be(Jg,{open:!0,maxWidth:"xl",children:[Be(tm,{children:[$(En,{children:"Setup the GADM maps"}),$(y0e,{activeStep:t,style:{marginLeft:"48px",marginRight:"48px",marginTop:"16px"},children:A.map((I,B)=>$(kme,{completed:n[B]===Rs.done,children:$(i0e,{color:"inherit",children:I.label})},I.label))})]}),$(em,{children:$(Vt,{children:$("div",{children:y()?$(En,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}):Be(SW,{children:[Be(TO,{children:[$(En,{sx:{fontSize:"18px",fontStyle:"bold"},children:(k=A[t])==null?void 0:k.label}),(M=A[t])==null?void 0:M.contents]}),$(hde,{})]})})})}),Be(nb,{sx:{margin:"10px"},children:[$(NV,{to:"/resources",children:$(bs,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},children:$(ry,{})})}),$(Ds,{size:"large",style:{padding:"16px 48px 16px 48px"},variant:"contained",color:"inherit",disabled:t===0||n[t]===Rs.onEnterTask,onClick:x,children:"Back"}),$(Vt,{sx:{flex:"1 1 auto"}}),$(Ds,{size:"large",style:{padding:"16px 48px 16px 48px"},variant:"contained",disabled:n[t]===Rs.onEnterTask||n[t]===Rs.onLeaveTask||n[t]===Rs.done,title:t<A.length-1?`Step ${t+1}`:"Finish",onClick:w,children:t<A.length-1?"Next":"Finish"})]})]})},h_e=()=>{P.useEffect(()=>{document.title=jh+" - IDE GSM Cities"},[]);const t=Ts();return Be(Jg,{open:!0,maxWidth:"xl",children:[$(tm,{children:$(En,{children:"IDE GSM Cities"})}),$(em,{children:$(ac,{children:"Please upload your local cities.csv files."})}),$(nb,{sx:{margin:"10px"},children:$(bs,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},onClick:()=>{t("/resources",{replace:!0})},children:$(ry,{})})})]})},f_e=()=>{P.useEffect(()=>{document.title=jh+" - IDE GSM Routes"},[]);const t=Ts();return Be(Jg,{open:!0,maxWidth:"xl",children:[$(tm,{children:$(En,{children:"IDE GSM Routes"})}),$(em,{children:$(ac,{children:"Please upload your local routes.csv files."})}),$(nb,{sx:{margin:"10px"},children:$(bs,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},onClick:()=>{t("/resources",{replace:!0})},children:$(ry,{})})})]})};var JO={},m7={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(m7);var e3=m7.exports,fP={};const p_e=In(Yoe);var zz;function t3(){return zz||(zz=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=p_e}(fP)),fP}var g_e=e3;Object.defineProperty(JO,"__esModule",{value:!0});var v7=JO.default=void 0,m_e=g_e(t3()),v_e=J;v7=JO.default=(0,m_e.default)((0,v_e.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");const y7=({item:t})=>{const e=P.useRef(null),[n,r]=Rn.useState(!1),i=Ts(),s=P.useCallback(()=>{r(!1)},[]),o=P.useCallback(c=>()=>{r(c)},[]),a=P.useCallback(()=>{i(`/update/${t.type}/${t.uuid}`)},[]),l=P.useCallback(()=>{i(`/delete/${t.type}/${t.uuid}`)},[]);return Be(lo,{children:[$(bs,{ref:e,onClick:o(!0),children:$(v7,{})}),$(_O,{open:n,anchorEl:e.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,style:{zIndex:1e3},children:({TransitionProps:c,placement:u})=>$(jw,{...c,style:{transformOrigin:u==="bottom-start"?"left top":"left bottom"},children:$(nf,{children:$(tle,{onClickAway:s,children:Be(BW,{autoFocusItem:n,id:"composition-menu","aria-labelledby":"composition-button",children:[Be(Mx,{onClick:a,children:[$(GA,{children:$(LO,{})}),$(Ix,{children:"Edit"})]}),Be(Mx,{onClick:s,disabled:!0,children:[$(GA,{children:$(t9,{})}),$(Ix,{children:"Duplicate"})]}),Be(Mx,{onClick:l,children:[$(GA,{children:$(uye,{})}),$(Ix,{children:"Delete"})]})]})})})})})]})},Uz=()=>{const{projects:t}=Uc(),[e,n]=Rn.useState(t),r=Ts();P.useEffect(()=>{document.location.pathname.startsWith("/projects")&&(document.title=jh+" - Projects"),document.location.pathname.startsWith("/resource")&&(document.title=jh+" - Resources")},[]);const i=Zg();P.useEffect(()=>{if(i.pathname.endsWith("/projects")&&t.length==0)return r("/projects/new")},[]),P.useEffect(()=>{si.getSingleton().on("changes",async a=>{})},[]);const s={RealWorld:$(d9,{}),Graph:$(kO,{}),Racetrack:$(u9,{})},o=[{icon:s[sn.Racetrack],name:sn.Racetrack,onClick:()=>r(`/create/${sn.Racetrack}`)},{icon:s[sn.Graph],name:sn.Graph,onClick:()=>r(`/create/${sn.Graph}`)},{icon:s[sn.RealWorld],name:sn.RealWorld,onClick:()=>r(`/create/${sn.RealWorld}`)}];return $(Vt,{children:t.length>0&&Be(ZW,{component:nf,children:[Be(RO,{children:[$(MO,{children:Be(_g,{children:[$(qn,{}),$(qn,{children:"name"}),$(qn,{children:"description"}),$(qn,{children:"time"}),$(qn,{})]})}),$(IO,{children:e.filter(a=>a.type!=="Resource").map(a=>Be(_g,{children:[$(qn,{children:$("a",{href:LI(a),target:"_blank",children:$(bs,{color:"primary",size:"large",children:s[a.type]})})}),$(qn,{children:$("a",{href:LI(a),target:"_blank",children:a.name})}),$(qn,{children:$("pre",{children:a.description})}),Be(qn,{children:[Be("div",{children:["Created: ",new Date(a.createdAt).toISOString()]}),Be("div",{children:["Updated: ",new Date(a.updatedAt).toISOString()]})]}),$(qn,{children:$(y7,{item:a})})]},a.uuid))})]}),$(VW,{style:{justifyContent:"center",margin:"6px",marginLeft:"120px"},direction:"right",ariaLabel:"SpeedDial basic example",icon:$(YW,{}),children:o.map(a=>$(WW,{icon:a.icon,tooltipTitle:a.name,onClick:a.onClick},a.name))})]})})};function b7(){}function y_e(t,e){return t===b7?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){var r=this,i=arguments;return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}function b_e(){var t=Date.now(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n==="x"?r:r&7|8).toString(16)});return e}function __e(t,e){return function(r){return function(i,s,o,a){if(t.dynamicallyOpened())return r.apply(this,arguments);var l=!1;i==="readwrite"&&s.some(function(u){return o[u]&&o[u].observable})&&(l=!0,s=s.slice(0),s.indexOf("_changes")===-1&&s.push("_changes"));var c=r.call(this,i,s,o,a);return l&&(c._lastWrittenRevision=0,c.on("complete",function(){if(c._lastWrittenRevision)if(!a)e.timeoutHandle&&clearTimeout(e.timeoutHandle),e.timeoutHandle=setTimeout(function(){delete e.timeoutHandle,e(c._lastWrittenRevision)},25);else{var u=function d(h){return h.parent?d(h.parent):h}(a);u._lastWrittenRevision=Math.max(c._lastWrittenRevision,u.lastWrittenRevision||0)}}),c.parent&&c.parent.source&&(c.source=c.parent.source)),c}}}function x_e(t,e,n){return function(i){e.latestRevision[t.name]<i&&(e.latestRevision[t.name]=i,Kt.ignoreTransaction(function(){e.on("latestRevisionIncremented").fire(t.name,i)}),n&&n.setItem("Dexie.Observable/latestRevision/"+t.name,i))}}var w_e=1,E_e=2,T_e=3;function S_e(t,e){return function(r,i,s){var o=void 0;r===void 0&&e.schema.primKey.uuid&&(r=o=Kt.Observable.createUUID(),e.schema.primKey.keyPath&&Kt.setByKeyPath(i,e.schema.primKey.keyPath,r));var a={source:s.source||null,table:e.name,key:r===void 0?null:r,type:w_e,obj:i},l=t._changes.add(a).then(function(c){return s._lastWrittenRevision=Math.max(s._lastWrittenRevision,c),c});return this.onsuccess=function(c){r!=c&&l._then(function(){a.key=c,t._changes.put(a)})},this.onerror=function(){l._then(function(c){t._changes.delete(c)})},o}}function C_e(t,e){return function(r,i,s,o){var a={},l=!1,c=Kt.deepClone(s);for(var u in r){var d=r[u];if(typeof d>"u")Kt.delByKeyPath(c,u),a[u]=null,l=!0;else{var h=Kt.getByKeyPath(s,u);d!==h&&JSON.stringify(d)!==JSON.stringify(h)&&(Kt.setByKeyPath(c,u,d),a[u]=d,l=!0)}}if(l){var f={source:o.source||null,table:e,key:i,type:E_e,mods:a,oldObj:s,obj:c},p=t._changes.add(f);this.onsuccess=function(){p._then(function(m){o._lastWrittenRevision=Math.max(o._lastWrittenRevision,m)})},this.onerror=function(){p._then(function(m){t._changes.delete(m)})}}}}function A_e(t,e){return function(r,i,s){var o=t._changes.add({source:s.source||null,table:e,key:r,type:T_e,oldObj:i}).then(function(a){return s._lastWrittenRevision=Math.max(s._lastWrittenRevision,a),a}).catch(function(a){console.log(i),console.log(a.stack)});this.onerror=function(){o._then(function(a){t._changes.delete(a)})}}}function P_e(t){return function(n){if(!n.hook._observing){n.hook._observing=!0;var r=n.name;n.hook("creating").subscribe(S_e(t,n)),n.hook("updating").subscribe(C_e(t,r)),n.hook("deleting").subscribe(A_e(t,r))}}}function R_e(t){return function(n){if(n.key&&n.key.indexOf("Dexie.Observable/")===0){var r=n.key.split("/"),i=r[1],s=r[2];if(i==="latestRevision"){var o=parseInt(n.newValue,10);!isNaN(o)&&o>t.latestRevision[s]&&(t.latestRevision[s]=o,Kt.ignoreTransaction(function(){t.on("latestRevisionIncremented").fire(s,o)}))}else if(i.indexOf("deadnode:")===0){var a=parseInt(i.split(":")[1],10);n.newValue&&t.on.suicideNurseCall.fire(s,a)}else i==="intercomm"&&n.newValue&&t.on.intercomm.fire(s)}}}function I_e(t,e,n){return function(i){return function(){return Object.keys(t._allTables).forEach(function(s){var o=t._allTables[s];o.schema.observable&&n(o),o.name==="_syncNodes"&&o.mapToClass(e)}),i.apply(this,arguments)}}}var r0=Kt.Promise;function M_e(t,e,n,r,i){var s={};t.observable.sendMessage=function(c,u,d,h){if(h=h||{},!r.node)return h.wantReply?r0.reject(new Kt.DatabaseClosedError):r0.resolve();var f={message:u,destinationNode:d,sender:r.node.id,type:c};return Kt.extend(f,h),Kt.ignoreTransaction(function(){var p=["_intercomm"];h.wantReply&&p.push("_syncNodes");var m=t.transaction("rw",p,function(){return h.wantReply?t._syncNodes.where("id").equals(d).count(function(b){return b?t._intercomm.add(f):t._syncNodes.where("isMaster").above(0).first(function(y){return f.destinationNode=y.id,t._intercomm.add(f)})}):t._intercomm.add(f)}).then(function(b){var y=null;return h.wantReply&&(y=new r0(function(x,_){s[b.toString()]={resolve:x,reject:_}})),i&&i.setItem("Dexie.Observable/intercomm/"+t.name,b.toString()),e.on.intercomm.fire(t.name),y});if(h.wantReply)return m;m.catch(function(){})})},t.observable.broadcastMessage=function(c,u,d){if(r.node){var h=r.node.id;Kt.ignoreTransaction(function(){t._syncNodes.toArray(function(f){return r0.all(f.filter(function(p){return p.type==="local"&&(d||p.id!==h)}).map(function(p){return t.observable.sendMessage(c,u,p.id)}))}).catch(function(){})})}};function o(){return r.node?Kt.ignoreTransaction(function(){return t.transaction("rw","_intercomm",function(){return t._intercomm.where({destinationNode:r.node.id}).toArray(function(c){return c.forEach(function(u){return a(u)}),t._intercomm.where("id").anyOf(c.map(function(u){return u.id})).delete()})})}):r0.reject(new Kt.DatabaseClosedError)}function a(c){if(c.type==="response"){var u=s[c.requestId.toString()];u&&(c.isFailure?u.reject(c.message.error):u.resolve(c.message.result),delete s[c.requestId.toString()])}else c.resolve=function(d){t.observable.sendMessage("response",{result:d},c.sender,{requestId:c.id})},c.reject=function(d){t.observable.sendMessage("response",{error:d.toString()},c.sender,{isFailure:!0,requestId:c.id})},t.on.message.fire(c)}function l(c){c===t.name&&o().catch("DatabaseClosedError",function(){})}return{onIntercomm:l,consumeIntercommMessages:o}}function L_e(t){return function(e,n){e._changes="++rev",e._syncNodes="++id,myRevision,lastHeartBeat,&url,isMaster,type,status",e._intercomm="++id,destinationNode",e._uncommittedChanges="++id,node",t.call(this,e,n),Object.keys(n).forEach(function(r){var i=n[r];i.primKey.name.indexOf("$$")===0&&(i.primKey.uuid=!0,i.primKey.name=i.primKey.name.substr(2),i.primKey.keyPath=i.primKey.keyPath.substr(2))}),Object.keys(n).forEach(function(r){r.indexOf("_")!==0&&r.indexOf("$")!==0&&(n[r].observable=!0)})}}function _7(t){var e=100;Kt.ignoreTransaction(function(){return t._syncNodes.orderBy("myRevision").first(function(n){return t._changes.where("rev").below(n.myRevision).limit(e).primaryKeys()}).then(function(n){if(n.length!==0)return t._changes.bulkDelete(n).then(function(){n.length===e&&setTimeout(function(){return t.isOpen()&&_7(t)},500)})})}).catch(function(){})}var Ru=self,k_e=Kt.defineClass({rev:Number,source:String,table:String,key:Object,type:Number,obj:Object,mods:Object,oldObj:Object}),i0=Kt.override,$z=Kt.Promise,jz=!1;function rn(t){if(!/^(3|4)\./.test(Kt.version))throw new Error("Missing dexie version 3.x or 4.x");if(t.observable){if(t.observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable");return}var e=2e4,n=2e4,r=500,i=e-5e3,s=rn.localStorageImpl,o=Kt.defineClass({myRevision:Number,type:String,lastHeartBeat:Number,deleteTimeStamp:Number,url:String,isMaster:Number,syncProtocol:String,syncContext:null,syncOptions:Object,connected:!1,status:Number,appliedRemoteRevision:null,remoteBaseRevisions:[{local:Number,remote:null}],dbUploadState:{tablesToUpload:[String],currentTable:String,currentKey:null,localBaseRevision:Number}});t.observable={version:"{version}"},t.observable.SyncNode=o;var a=x_e(t,rn,s),l=__e(t,a),c=P_e(t),u=I_e(t,o,c),d={node:null},h=M_e(t,rn,o,d,s),f=h.onIntercomm,p=h.consumeIntercommMessages;Object.defineProperty(t,"_localSyncNode",{get:function(){return d.node}});var m=null,b=null;Kt.fake&&(t.version(1).stores({_syncNodes:"++id,myRevision,lastHeartBeat",_changes:"++rev",_intercomm:"++id,destinationNode",_uncommittedChanges:"++id,node"}),t._syncNodes.mapToClass(o),t._changes.mapToClass(k_e),d.node=new o({myRevision:0,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null})),t.Version.prototype._parseStoresSpec=i0(t.Version.prototype._parseStoresSpec,L_e),t.on.addEventType({changes:"asap",cleanup:[y_e,b7],message:"asap"}),t._createTransaction=i0(t._createTransaction,l),rn.latestRevision[t.name]=rn.latestRevision[t.name]||0,t.open=i0(t.open,u),t.close=i0(t.close,function(M){return function(){return t.dynamicallyOpened()?M.apply(this,arguments):(a.timeoutHandle&&(clearTimeout(a.timeoutHandle),delete a.timeoutHandle),rn.on("latestRevisionIncremented").unsubscribe(x),rn.on("suicideNurseCall").unsubscribe(k),rn.on("intercomm").unsubscribe(f),rn.on("beforeunload").unsubscribe(A),d.node&&d.node.id&&(rn.on.suicideNurseCall.fire(t.name,d.node.id),s&&s.setItem("Dexie.Observable/deadnode:"+d.node.id.toString()+"/"+t.name,"dead"),d.node.deleteTimeStamp=1,d.node.lastHeartBeat=0,t._syncNodes.put(d.node),d.node=null),m&&clearTimeout(m),m=null,b&&clearTimeout(b),b=null,M.apply(this,arguments))}}),t.delete=i0(t.delete,function(M){return function(){return M.apply(this,arguments).then(function(I){return rn.latestRevision[t.name]=0,I})}}),t.on("ready",function(){return t.dynamicallyOpened()?t:t.table("_changes").orderBy("rev").last(function(I){var B=I?I.rev:0;return d.node=new o({myRevision:B,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null,isMaster:0}),rn.latestRevision[t.name]<B&&(rn.latestRevision[t.name]=B,Kt.ignoreTransaction(function(){rn.on.latestRevisionIncremented.fire(B)})),t._syncNodes.put(d.node).then(Kt.ignoreTransaction(function(){var R=1;return t._syncNodes.orderBy("isMaster").reverse().modify(function(O){O.isMaster&&(O.lastHeartBeat<Date.now()-e?O.isMaster=0:R=0),d.node&&O.id===d.node.id&&(O.isMaster=d.node.isMaster=R)})})).then(function(){rn.on("latestRevisionIncremented",x),rn.on("beforeunload",A),rn.on("suicideNurseCall",k),rn.on("intercomm",f),m=setTimeout(E,r),b=setTimeout(w,i)}).then(function(){S()})})},!0);var y=0;function x(M,I){if(M===t.name){if(y>=I)return;y=I,Kt.vip(function(){_().catch("DatabaseClosedError",function(){})})}}function _(M,I,B){if(!I&&_.ongoingOperation)return _.ongoingOperation;var R=!1,O=d.node;if(!O)return $z.reject(new Kt.DatabaseClosedError);var C=1e3,F=t._changes.where("rev").above(O.myRevision).limit(C).toArray(function(q){if(q.length>0){var G=q[q.length-1];R=q.length===C,t.on("changes").fire(q,R),O.myRevision=G.rev}else B&&t.on("changes").fire([],!1);var j=!1;return t._syncNodes.where(":id").equals(O.id).modify(function(H){j=!0,H.lastHeartBeat=Date.now(),H.deleteTimeStamp=null,H.myRevision=Math.max(H.myRevision,O.myRevision)}).then(function(){return j})}).then(function(q){if(!q)throw jz?new Error("Browser is shutting down"):(t.close(),console.error("Out of sync"),Ru.location&&Ru.location.reload(!0),new Error("Out of sync"));if(R||rn.latestRevision[t.name]>O.myRevision)return _(rn.latestRevision[t.name],(I||0)+1,R)}).finally(function(){delete _.ongoingOperation});return I||(_.ongoingOperation=F),F}function w(){b=null;var M=d.node&&d.node.id;M&&t.transaction("rw!",t._syncNodes,function(){t._syncNodes.where({id:M}).first(function(I){if(!I){t.isOpen()&&t.close();return}return I.lastHeartBeat=Date.now(),I.deleteTimeStamp=null,t._syncNodes.put(I)})}).catch("DatabaseClosedError",function(){}).finally(function(){d.node&&d.node.id===M&&t.isOpen()&&(b=setTimeout(w,i))})}function E(){m=null;var M=d.node&&d.node.id;M&&Kt.vip(function(){_(rn.latestRevision[t.name]).then(S).then(p).catch("DatabaseClosedError",function(){}).finally(function(){d.node&&d.node.id===M&&t.isOpen()&&(m=setTimeout(E,r))})})}function S(){var M=d.node;return M?t.transaction("rw","_syncNodes","_changes","_intercomm",function(){var I=!1;t._syncNodes.where("lastHeartBeat").below(Date.now()-e).filter(function(B){return B.type==="local"}).modify(function(B){B.deleteTimeStamp&&B.deleteTimeStamp<Date.now()?(delete this.value,s&&s.removeItem("Dexie.Observable/deadnode:"+B.id+"/"+t.name),B.isMaster&&(t._syncNodes.update(M,{isMaster:1}),I=!0),t._intercomm.where({destinationNode:B.id}).modify(function(R){R.wantReply?R.destinationNode=M.id:delete this.value})):B.deleteTimeStamp||(B.deleteTimeStamp=Date.now()+n)}).then(function(){return rn.deleteOldChanges(t),t.on("cleanup").fire(I)})}):$z.reject(new Kt.DatabaseClosedError)}function A(){d.node&&(jz=!0,d.node.deleteTimeStamp=1,d.node.lastHeartBeat=0,t._syncNodes.put(d.node),rn.wereTheOneDying=!0,s&&s.setItem("Dexie.Observable/deadnode:"+d.node.id.toString()+"/"+t.name,"dead"))}function k(M,I){M===t.name&&!rn.wereTheOneDying&&Kt.vip(function(){t._syncNodes.update(I,{deleteTimeStamp:1,lastHeartBeat:0}).then(S)})}}rn.version="{version}";rn.latestRevision={};rn.on=Kt.Events(null,"latestRevisionIncremented","suicideNurseCall","intercomm","beforeunload");rn.createUUID=b_e;rn.deleteOldChanges=_7;rn._onStorage=R_e(rn);rn._onBeforeUnload=function(){rn.on.beforeunload.fire()};try{rn.localStorageImpl=Ru.localStorage}catch{}Ru!=null&&Ru.addEventListener&&(Ru.addEventListener("storage",rn._onStorage),Ru.addEventListener("beforeunload",rn._onBeforeUnload));if(Kt.Observable){if(Kt.Observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable")}else Kt.Observable=rn,Kt.addons.push(rn);Kt.Observable;const Gz=()=>{const{resources:t}=Uc(),[e,n]=Rn.useState(t),r=Ts(),i=Zg();P.useEffect(()=>{if(i.pathname.endsWith("/resources")&&t.length===0)return r("/resources/new")},[]),P.useEffect(()=>{si.getSingleton().on("changes",async a=>{})},[]);const s=[{icon:$(Hw,{}),name:"GADM GeoJSON",onClick:()=>r("/resources/gadm")},{icon:$(Vw,{}),name:"IDE-GSM Cities",onClick:()=>r("/resources/cities")},{icon:$(iy,{}),name:"IDE-GSM Routes",onClick:()=>r("/resources/routes")}],o={[go.gadmShapes]:$(Hw,{}),[go.idegsmCities]:$(Vw,{}),[go.idegsmRoutes]:$(iy,{})};return $(Vt,{children:Be(ZW,{component:nf,children:[Be(RO,{children:[$(MO,{children:Be(_g,{children:[$(qn,{}),$(qn,{children:"name"}),$(qn,{children:"description"}),$(qn,{children:"url"}),$(qn,{children:"time"}),$(qn,{})]})}),$(IO,{children:e.map(a=>Be(_g,{children:[$(qn,{children:$(bs,{color:"primary",size:"large",onClick:()=>r(a.urls[0]),children:o[a.type]})}),$(qn,{children:a.name}),$(qn,{children:$("pre",{children:a.description})}),$(qn,{children:$("ul",{children:a.urls.map(l=>$("li",{children:$("a",{href:l,target:"_blank",children:l})},l))})}),$(qn,{children:Be("div",{children:["Updated: ",new Date(a.updatedAt).toISOString()]})}),$(qn,{children:$(y7,{item:a})})]},a.uuid))})]}),$("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"6px",paddingLeft:"170px"},children:$(VW,{direction:"right",ariaLabel:"Import Resources",icon:$(YW,{}),children:s.map(a=>$(WW,{icon:a.icon,tooltipTitle:a.name,onClick:a.onClick},a.name))})})]})})};var jI=(t=>(t.start="start",t.cancel="cancel",t))(jI||{});function Hz(t,e){const n=[];for(let r=0;r<t.length;r++){const s=t[r].name,o=s.slice(s.lastIndexOf(".")),a=e.includes(o);n.push(a)}return n}const O_e=At.div`
  height: calc(100vh - 20px);
  // border: 10px dashed gray;
  align-items: center;
  justify-content: center;
  background-color: ${t=>t.isError?"#ff000040":t.isDragOver?"#00ff0010":"transparent"};
`,N_e=At.div`
  padding: 10px;
`,D_e=At.div`
  color: red;
`;At.div`
  color: grey;
`;const B_e=At(em)`
  padding: 30px;
`,F_e=At.div`
  flex: 1;
  height: calc(100% - 50px);
  overflow: scroll;
`,z_e=ua({}),Vz=t=>{const[e,n]=P.useState(null),[r,i]=P.useState(!1),[s,o]=P.useState(!1),[a,l]=P.useState(!1),[c,u]=P.useState(!1),[d,h]=qu(z_e),[f,p]=P.useState(!0),m=P.useRef(null),b=I=>{u(!1),l(!0),h(B=>({...B,[I.fileName]:I}))},y=I=>{h(B=>({...B,[I.fileName]:I})),I.progress==100&&Object.values(d).every(R=>R.progress==100)&&(u(!0),t.onFinish&&t.onFinish(Date.now()))},x=P.useCallback(I=>{if(I.preventDefault(),i(!0),t.acceptableSuffixes){const B=Hz(I.dataTransfer.files,t.acceptableSuffixes);o(B.some(R=>!R))}else o(!1)},[]),_=P.useCallback(I=>{I.preventDefault(),i(!1),o(!1)},[]),w=I=>{const R=Hz(I,t.acceptableSuffixes).some(O=>!O);o(R),t.handleFiles&&t.handleFiles(I),h(()=>({}));for(let O=0;O<I.length;O++)e.postMessage({type:jI.start,payload:{file:I[O]}})},E=P.useCallback(I=>{I.preventDefault(),i(!1);const B=I.dataTransfer.files;I.dataTransfer&&(t.handleFiles?t.handleFiles(B):w(B))},[w]),S=P.useCallback(I=>{const B=I.target.files;B&&(t.handleFiles?t.handleFiles(B):w(B),document.getElementById("file").value=null)},[w]),A=P.useCallback(()=>{e.postMessage({type:jI.cancel}),l(!1),h(()=>({}))},[e]),k=P.useCallback(()=>{l(!1),h(()=>({}))},[e]);P.useEffect(()=>{const I=new Worker(new URL("/assets/FileLoaderWorker-43_bKCU1.js",import.meta.url),{type:"module"});return I.onmessage=B=>{const R=B.data;switch(R.value.type){case qp.started:b(R.value);break;case qp.progress:y(R.value);break;case qp.cancel:h(()=>({}));break}},n(I),()=>{I.terminate()}},[]),P.useEffect(()=>{if(f){const I=m.current;I&&(I.scrollTop=I==null?void 0:I.scrollHeight)}},[d,m,f]);const M=()=>{const I=m.current;I&&I.scrollTop<I.scrollHeight-I.offsetHeight&&p(!1)};return Be(O_e,{isDragOver:r,onDragOver:x,onDragLeave:_,onDrop:E,isError:s,children:[Be("div",{children:[t.children,t.prompt]}),$("div",{children:$(bg,{title:"resource files(GADM Shapes GeoJSON files, IDE-GSM cities and routes csv files) and project files",children:Be(N_e,{children:[$(En,{style:{textAlign:"center",fontWeight:"bold"}}),$("div",{style:{textAlign:"center",marginTop:"20px",marginLeft:"40px"},children:$("input",{id:"file",onChange:S,type:"file",multiple:!0})}),$(D_e,{children:s&&":"})]})})}),Be(Jg,{open:a,fullScreen:!0,children:[$(tm,{children:" Processing File "}),Be(B_e,{children:[$(F_e,{ref:m,onScroll:M,children:Object.values(d).map(I=>Be("div",{children:[Be(En,{children:["FileName: ",I.fileName]}),I.progress?Be(lo,{children:[Be(En,{style:{textAlign:"right"},children:[I.index.toLocaleString()," /"," ",I.total.toLocaleString()," (",I.progress,"%)"]}),$(sI,{variant:"determinate",value:I.progress}),$(En,{children:$("strong",{children:I.errorMessage&&I.errorMessage})})]}):$(sI,{variant:"indeterminate"})]},I.fileName))}),Be(Vt,{style:{margin:"8px",display:"flex",gap:"8px",height:"40px",alignItems:"center"},children:[$(Ds,{variant:"contained",onClick:A,disabled:c,children:"Cancel"}),$(Ds,{variant:"contained",onClick:k,disabled:!c,children:"Close"})]})]})]})]})};var n3={};Object.defineProperty(n3,"__esModule",{value:!0});var x7=n3.useGeolocated=void 0;const Is=P;function U_e(t={}){const{positionOptions:e={enableHighAccuracy:!0,maximumAge:0,timeout:1/0},isOptimisticGeolocationEnabled:n=!0,userDecisionTimeout:r=void 0,suppressLocationOnMount:i=!1,watchPosition:s=!1,geolocationProvider:o=typeof navigator<"u"?navigator.geolocation:void 0,watchLocationPermissionChange:a=!1,onError:l,onSuccess:c}=t,u=(0,Is.useRef)(0),d=(0,Is.useRef)(!0),h=(0,Is.useRef)(0),[f,p]=(0,Is.useState)(n),[m,b]=(0,Is.useState)(),[y,x]=(0,Is.useState)(),[_,w]=(0,Is.useState)(),[E,S]=(0,Is.useState)(),A=(0,Is.useCallback)(()=>{u.current&&window.clearTimeout(u.current)},[]),k=(0,Is.useCallback)(B=>{A(),d.current&&(b(()=>{}),p(!1),w(B)),l==null||l(B)},[l,A]),M=(0,Is.useCallback)(B=>{A(),d.current&&(b(B.coords),x(B.timestamp),p(!0),w(()=>{})),c==null||c(B)},[c,A]),I=(0,Is.useCallback)(()=>{if(!o||!o.getCurrentPosition||!o.watchPosition)throw new Error("The provided geolocation provider is invalid");r&&(u.current=window.setTimeout(()=>{k()},r)),s?h.current=o.watchPosition(M,k,e):o.getCurrentPosition(M,k,e)},[o,s,r,k,M,e]);return(0,Is.useEffect)(()=>{let B;return a&&o&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(R=>{B=R,B.onchange=()=>{S(B.state)}}).catch(R=>{console.error("Error updating the permissions",R)}),()=>{B&&(B.onchange=null)}},[]),(0,Is.useEffect)(()=>(i||I(),()=>{A(),s&&h.current&&(o==null||o.clearWatch(h.current))}),[E]),{getPosition:I,coords:m,timestamp:y,isGeolocationEnabled:f,isGeolocationAvailable:!!o,positionError:_}}x7=n3.useGeolocated=U_e;const $_e=({uuid:t,type:e,name:n,description:r,onSubmit:i})=>{const s=Ss(),o=Nfe(s.breakpoints.down("md")),a=Ts(),l=()=>{switch(e){case sn.Racetrack:case sn.Graph:case sn.RealWorld:a("/projects",{replace:!0});break;case go.gadmShapes:case go.idegsmCities:case go.idegsmRoutes:a("/resources",{replace:!0});break;default:throw new Error(`Unknown ProjectType: ${e}`)}},c=()=>l();return P.useEffect(()=>{document.title=jh+`- ${t?"Update ":"Create New"} ${e}`},[t,e]),Be(Jg,{open:!0,fullScreen:o,PaperProps:{component:"form",onSubmit:async u=>{u.preventDefault();const d=new FormData(u.currentTarget),h=Object.fromEntries(d.entries()),f=h.name,p=h.description;await i({uuid:t,type:e,name:f,description:p}),l()}},children:[Be(tm,{children:[t?"Edit":"Create New"," ",e," Project"]}),Be(em,{children:[$(ac,{children:"Please enter the name and description of the project."}),Be(SO,{style:{display:"flex"},children:[$(ez,{name:"name",autoComplete:"off",defaultValue:n,label:"Project Name",autoFocus:!0,required:!0,fullWidth:!0,margin:"dense"}),$(ez,{autoComplete:"off",name:"description",defaultValue:r,label:"Project Description",multiline:!0,rows:8,fullWidth:!0,margin:"dense"})]}),$(nb,{children:Be(Vt,{css:tf`
              display: flex;
              gap: 10px;
              align-content: center;
              justify-content: center;
            `,children:[$(Ds,{variant:"outlined",onClick:c,children:"Cancel"}),$(Ds,{variant:"contained",type:"submit",children:"Create"})]})})]})]})},Wz=()=>{const{uuid:t,type:e,name:n,description:r}=Uc(),{coords:i}=x7({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3}),{latitude:s,longitude:o,zoom:a}={latitude:(i==null?void 0:i.latitude)||KA.latitude,longitude:(i==null?void 0:i.longitude)||KA.longitude,zoom:KA.zoom},l=P.useCallback(async c=>{t?await si.updateDatabase(t,{...c}):await si.createDatabase({...c,type:e,urls:[],version:1,createdAt:Date.now(),viewportCenter:[a,s,o]})},[]);return $($_e,{uuid:t,type:e,name:n,description:r,onSubmit:l})};var w7,Xz=Fc;w7=Xz.createRoot,Xz.hydrateRoot;const j_e=t=>({current:t,history:[],future:[],staging:[]});function G_e(t){const e=new Set,n=new Set,r=[],i=[];for(let s=t.length-1;s>=0;s--){const o=t[s];for(let a=t[s].patch.length-1;a>=0;a--){const l=o.patch[a],c=JSON.stringify(l.path);l.op==="replace"&&e.has(c)||(e.add(c),r.push(l))}}for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<t[s].patch.length;a++){const l=o.inversePatch[a],c=JSON.stringify(l.path);l.op==="replace"&&n.has(c)||(n.add(c),i.push(l))}}return r.length===0&&i.length===0?null:{patch:r.reverse(),inversePatch:i}}const mS=(t,e=30)=>{const[{history:n,future:r,current:i,staging:s},o]=qu(t);return{set:(u,d=!0,h)=>{const[f,p,m]=t_e(i,u),b={patch:p,inversePatch:m,label:h};if(d){const y=G_e(s.length>0?s:[b]);if(y==null)return;o(x=>{const _=x.history.length>=e?[...x.history.slice(1),y]:[...x.history,y];return{current:f,history:_,future:[],staging:[]}})}else{const y=[...s,b];o(x=>({...x,current:f,staging:y}))}},undo:()=>{o(u=>{if(n.length===0||u.history.length===0)return u;const d=n[u.history.length-1];if(!d)return u;const h=Fz(u.current,d.inversePatch);return{history:u.history.slice(0,-1),future:[d,...u.future],current:h,staging:[]}})},redo:()=>{o(u=>{if(r.length===0||u.future.length===0)return u;const d=u.future[0];if(!d)return u;const h=Fz(u.current,d.patch);return{history:[...u.history,d],future:u.future.slice(1),current:h,staging:[]}})},history:n,future:r,staging:s,current:i}},Ia={ManufactureShare:"Share of Manufacturing",AgricultureShare:"Share of Agriculture",PriceIndex:"Price Index",NominalWage:"Nominal Wage",RealWage:"Real Wage"},H_e=[Ia.ManufactureShare,Ia.AgricultureShare,Ia.PriceIndex,Ia.NominalWage,Ia.RealWage];function p_(t,e){return t.toFixed(2).toString()}function Mc(t){return t===Number.POSITIVE_INFINITY||t>=1e9||isNaN(t)}const Yz=(t,e,n)=>{const r=Math.log(t),i=Math.log(e),s=r+(1-n)*(i-r);return Math.exp(s)};var r3={exports:{}};r3.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(xi,t,!1)})(r3);var V_e=r3.exports,i3={exports:{}};i3.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(xi,t,!1)})(i3);var W_e=i3.exports,s3={exports:{}};s3.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(xi,t,!1)})(s3);var X_e=s3.exports,o3={exports:{}};o3.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(xi,t,!1)})(o3);var Y_e=o3.exports,a3={exports:{}};a3.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,b,y=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),p=0,m=-32;m<x;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(b=b+1640531527|0,h=y[m&127]^=f+b,p=h==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=y[p+34&127],h=y[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,y[p]=f^h;u.w=b,u.X=y,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(xi,t,!1)})(a3);var q_e=a3.exports,l3={exports:{}};l3.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(xi,t,!1)})(l3);var K_e=l3.exports,E7={exports:{}};const Z_e={},Q_e=Object.freeze(Object.defineProperty({__proto__:null,default:Z_e},Symbol.toStringTag,{value:"Module"})),T7=In(Q_e);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,h;function f(w,E,S){var A=[];E=E==!0?{entropy:!0}:E||{};var k=y(b(E.entropy?[w,_(n)]:w??x(),3),A),M=new p(A),I=function(){for(var B=M.g(s),R=l,O=0;B<c;)B=(B+O)*i,R*=i,O=M.g(1);for(;B>=u;)B/=2,R/=2,O>>>=1;return(B+O)/R};return I.int32=function(){return M.g(4)|0},I.quick=function(){return M.g(4)/4294967296},I.double=I,y(_(M.S),n),(E.pass||S||function(B,R,O,C){return C&&(C.S&&m(C,M),B.state=function(){return m(M,{})}),O?(r[a]=B,R):B})(I,k,"global"in E?E.global:this==r,E.state)}function p(w){var E,S=w.length,A=this,k=0,M=A.i=A.j=0,I=A.S=[];for(S||(w=[S++]);k<i;)I[k]=k++;for(k=0;k<i;k++)I[k]=I[M=d&M+w[k%S]+(E=I[k])],I[M]=E;(A.g=function(B){for(var R,O=0,C=A.i,F=A.j,q=A.S;B--;)R=q[C=d&C+1],O=O*i+q[d&(q[C]=q[F=d&F+R])+(q[F]=R)];return A.i=C,A.j=F,O})(i)}function m(w,E){return E.i=w.i,E.j=w.j,E.S=w.S.slice(),E}function b(w,E){var S=[],A=typeof w,k;if(E&&A=="object")for(k in w)try{S.push(b(w[k],E-1))}catch{}return S.length?S:A=="string"?w:w+"\0"}function y(w,E){for(var S=w+"",A,k=0;k<S.length;)E[d&k]=d&(A^=E[d&k]*19)+S.charCodeAt(k++);return _(E)}function x(){try{var w;return h&&(w=h.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),_(w)}catch{var E=e.navigator,S=E&&E.plugins;return[+new Date,e,S,e.screen,_(n)]}}function _(w){return String.fromCharCode.apply(0,w)}if(y(r.random(),n),t.exports){t.exports=f;try{h=T7}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:xi,[],Math)})(E7);var J_e=E7.exports,exe=V_e,txe=W_e,nxe=X_e,rxe=Y_e,ixe=q_e,sxe=K_e,of=J_e;of.alea=exe;of.xor128=txe;of.xorwow=nxe;of.xorshift7=rxe;of.xor4096=ixe;of.tychei=sxe;var oxe=of;const axe=hd(oxe);class S7{constructor(e){e===void 0&&(e=Math.random().toString()),this.rng=axe(e.toString())}random(){return this.rng.double()}}const lxe=new URLSearchParams(window.location.search).get("seed")||Math.random(),iE=new S7(lxe),cxe=.05,sE=(t,e)=>e*(1+(t.random()-.5)*cxe),C7=({id:t,label:e,point:n,share:r,randomize:i})=>{const s=i?sE(iE,r):r,o=i?sE(iE,r):r;return{id:t,label:e,point:n,velocity:[0,0],manufactureShare:s,manufactureShare0:s,agricultureShare:o,priceIndex:1,priceIndex0:1,nominalWage:1,nominalWage0:1,realWage:1,income:1,income0:1}};function uxe(t,e){return t.priceIndex=1,t.priceIndex0=1,t.nominalWage=1,t.nominalWage0=1,t.realWage=1,t.income=1,t.income0=1,e&&0<e&&(t.manufactureShare=sE(iE,1/e),t.agricultureShare=sE(iE,1/e),t.manufactureShare0=t.manufactureShare),t}function dxe(t){t.income0=t.income,t.nominalWage0=t.nominalWage,t.priceIndex0=t.priceIndex,t.manufactureShare0=t.manufactureShare}function hxe(t,e){return t*e.manufactureShare*e.nominalWage+(1-t)*e.agricultureShare}function fxe(t,e,n,r,i){const s=t.map((o,a)=>{const l=n[i][a];return Mc(l)?0:o.manufactureShare*Math.pow(o.nominalWage0*l,1-e)}).reduce((o,a)=>o+a,0);return Math.pow(s,1/(1-e))}function pxe(t,e,n,r){const i=t.map((s,o)=>{const a=n[r][o];return Mc(a)?0:s.income0*Math.pow(a,1-e)*Math.pow(s.priceIndex0,e-1)}).reduce((s,o)=>s+o,0);return Math.pow(i,1/e)}function gxe(t,e){return e.nominalWage*Math.pow(e.priceIndex,-1*t)}function mxe(t,e,n,r){return r.manufactureShare>1/t/10?e*(r.realWage-n)*r.manufactureShare:1/t/10}var Ms=63710088e-1,vxe={centimeters:Ms*100,centimetres:Ms*100,degrees:Ms/111325,feet:Ms*3.28084,inches:Ms*39.37,kilometers:Ms/1e3,kilometres:Ms/1e3,meters:Ms,metres:Ms,miles:Ms/1609.344,millimeters:Ms*1e3,millimetres:Ms*1e3,nauticalmiles:Ms/1852,radians:1,yards:Ms*1.0936};function yxe(t,e){e===void 0&&(e="kilometers");var n=vxe[e];if(!n)throw new Error(e+" units is invalid");return t*n}function g_(t){var e=t%360;return e*Math.PI/180}function qz(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bxe(t,e,n){n===void 0&&(n={});var r=qz(t),i=qz(e),s=g_(i[1]-r[1]),o=g_(i[0]-r[0]),a=g_(r[1]),l=g_(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return yxe(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var c3={exports:{}};c3.exports=vS;c3.exports.default=vS;function vS(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=A7(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,d,h,f;if(r&&(s=Txe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var p=n;p<i;p+=n)d=t[p],h=t[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return my(s,o,n,a,l,f,0),o}function A7(t,e,n,r,i){var s,o;if(i===VI(t,e,n,r)>0)for(s=e;s<n;s+=r)o=Kz(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=Kz(s,t[s],t[s+1],o);return o&&yS(o,o.next)&&(yy(o),o=o.next),o}function qh(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(yS(n,n.next)||_r(n.prev,n,n.next)===0)){if(yy(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function my(t,e,n,r,i,s,o){if(t){!o&&s&&Rxe(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?xxe(t,r,i,s):_xe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),yy(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=wxe(qh(t),e,n),my(t,e,n,r,i,s,2)):o===2&&Exe(t,e,n,r,i,s):my(qh(t),e,n,r,i,s,1);break}}}}function _xe(t){var e=t.prev,n=t,r=t.next;if(_r(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&Mp(i,a,s,l,o,c,p.x,p.y)&&_r(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function xxe(t,e,n,r){var i=t.prev,s=t,o=t.next;if(_r(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,b=u>d?u>h?u:h:d>h?d:h,y=GI(f,p,e,n,r),x=GI(m,b,e,n,r),_=t.prevZ,w=t.nextZ;_&&_.z>=y&&w&&w.z<=x;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=b&&_!==i&&_!==o&&Mp(a,u,l,d,c,h,_.x,_.y)&&_r(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=b&&w!==i&&w!==o&&Mp(a,u,l,d,c,h,w.x,w.y)&&_r(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=b&&_!==i&&_!==o&&Mp(a,u,l,d,c,h,_.x,_.y)&&_r(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=x;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=b&&w!==i&&w!==o&&Mp(a,u,l,d,c,h,w.x,w.y)&&_r(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function wxe(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!yS(i,s)&&P7(i,r,r.next,s)&&vy(i,s)&&vy(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),yy(r),yy(r.next),r=t=s),r=r.next}while(r!==t);return qh(r)}function Exe(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Lxe(o,a)){var l=R7(o,a);o=qh(o,o.next),l=qh(l,l.next),my(o,e,n,r,i,s,0),my(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Txe(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=A7(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Mxe(c));for(i.sort(Sxe),s=0;s<i.length;s++)n=Cxe(i[s],n);return n}function Sxe(t,e){return t.x-e.x}function Cxe(t,e){var n=Axe(t,e);if(!n)return e;var r=R7(n,t);return qh(r,r.next),qh(n,n.next)}function Axe(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,d=1/0,h;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&Mp(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),vy(n,t)&&(h<d||h===d&&(n.x>o.x||n.x===o.x&&Pxe(o,n)))&&(o=n,d=h)),n=n.next;while(n!==l);return o}function Pxe(t,e){return _r(t.prev,t,e.prev)<0&&_r(e.next,t,t.next)<0}function Rxe(t,e,n,r){var i=t;do i.z===0&&(i.z=GI(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Ixe(i)}function Ixe(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function GI(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Mxe(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Mp(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Lxe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!kxe(t,e)&&(vy(t,e)&&vy(e,t)&&Oxe(t,e)&&(_r(t.prev,t,e.prev)||_r(t,e.prev,e))||yS(t,e)&&_r(t.prev,t,t.next)>0&&_r(e.prev,e,e.next)>0)}function _r(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function yS(t,e){return t.x===e.x&&t.y===e.y}function P7(t,e,n,r){var i=v_(_r(t,e,n)),s=v_(_r(t,e,r)),o=v_(_r(n,r,t)),a=v_(_r(n,r,e));return!!(i!==s&&o!==a||i===0&&m_(t,n,e)||s===0&&m_(t,r,e)||o===0&&m_(n,t,r)||a===0&&m_(n,e,r))}function m_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function v_(t){return t>0?1:t<0?-1:0}function kxe(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&P7(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function vy(t,e){return _r(t.prev,t,t.next)<0?_r(t,e,t.next)>=0&&_r(t,t.prev,e)>=0:_r(t,e,t.prev)<0||_r(t,t.next,e)<0}function Oxe(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function R7(t,e){var n=new HI(t.i,t.x,t.y),r=new HI(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Kz(t,e,n,r){var i=new HI(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function yy(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function HI(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}vS.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(VI(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(VI(t,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function VI(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}vS.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var Nxe=c3.exports;const u3=hd(Nxe);var Dxe=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Zz=typeof Symbol<"u"&&Symbol,Bxe=Dxe,Fxe=function(){return typeof Zz!="function"||typeof Symbol!="function"||typeof Zz("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bxe()},Qz={foo:{}},zxe=Object,Uxe=function(){return{__proto__:Qz}.foo===Qz.foo&&!({__proto__:null}instanceof zxe)},$xe="Function.prototype.bind called on incompatible ",jxe=Object.prototype.toString,Gxe=Math.max,Hxe="[object Function]",Jz=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},Vxe=function(e,n){for(var r=[],i=n||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},Wxe=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},Xxe=function(e){var n=this;if(typeof n!="function"||jxe.apply(n)!==Hxe)throw new TypeError($xe+n);for(var r=Vxe(arguments,1),i,s=function(){if(this instanceof i){var u=n.apply(this,Jz(r,arguments));return Object(u)===u?u:this}return n.apply(e,Jz(r,arguments))},o=Gxe(0,n.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Wxe(a,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var c=function(){};c.prototype=n.prototype,i.prototype=new c,c.prototype=null}return i},Yxe=Xxe,d3=Function.prototype.bind||Yxe,qxe=Function.prototype.call,Kxe=Object.prototype.hasOwnProperty,Zxe=d3,Qxe=Zxe.call(qxe,Kxe),ln,Sg=SyntaxError,I7=Function,Kp=TypeError,pP=function(t){try{return I7('"use strict"; return ('+t+").constructor;")()}catch{}},xh=Object.getOwnPropertyDescriptor;if(xh)try{xh({},"")}catch{xh=null}var gP=function(){throw new Kp},Jxe=xh?function(){try{return arguments.callee,gP}catch{try{return xh(arguments,"callee").get}catch{return gP}}}():gP,$f=Fxe(),ewe=Uxe(),mi=Object.getPrototypeOf||(ewe?function(t){return t.__proto__}:null),ap={},twe=typeof Uint8Array>"u"||!mi?ln:mi(Uint8Array),wh={"%AggregateError%":typeof AggregateError>"u"?ln:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ln:ArrayBuffer,"%ArrayIteratorPrototype%":$f&&mi?mi([][Symbol.iterator]()):ln,"%AsyncFromSyncIteratorPrototype%":ln,"%AsyncFunction%":ap,"%AsyncGenerator%":ap,"%AsyncGeneratorFunction%":ap,"%AsyncIteratorPrototype%":ap,"%Atomics%":typeof Atomics>"u"?ln:Atomics,"%BigInt%":typeof BigInt>"u"?ln:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ln:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ln:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ln:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ln:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ln:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ln:FinalizationRegistry,"%Function%":I7,"%GeneratorFunction%":ap,"%Int8Array%":typeof Int8Array>"u"?ln:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ln:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ln:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$f&&mi?mi(mi([][Symbol.iterator]())):ln,"%JSON%":typeof JSON=="object"?JSON:ln,"%Map%":typeof Map>"u"?ln:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$f||!mi?ln:mi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ln:Promise,"%Proxy%":typeof Proxy>"u"?ln:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ln:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ln:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$f||!mi?ln:mi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ln:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$f&&mi?mi(""[Symbol.iterator]()):ln,"%Symbol%":$f?Symbol:ln,"%SyntaxError%":Sg,"%ThrowTypeError%":Jxe,"%TypedArray%":twe,"%TypeError%":Kp,"%Uint8Array%":typeof Uint8Array>"u"?ln:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ln:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ln:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ln:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ln:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ln:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ln:WeakSet};if(mi)try{null.error}catch(t){var nwe=mi(mi(t));wh["%Error.prototype%"]=nwe}var rwe=function t(e){var n;if(e==="%AsyncFunction%")n=pP("async function () {}");else if(e==="%GeneratorFunction%")n=pP("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=pP("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&mi&&(n=mi(i.prototype))}return wh[e]=n,n},eU={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},db=d3,oE=Qxe,iwe=db.call(Function.call,Array.prototype.concat),swe=db.call(Function.apply,Array.prototype.splice),tU=db.call(Function.call,String.prototype.replace),aE=db.call(Function.call,String.prototype.slice),owe=db.call(Function.call,RegExp.prototype.exec),awe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,lwe=/\\(\\)?/g,cwe=function(e){var n=aE(e,0,1),r=aE(e,-1);if(n==="%"&&r!=="%")throw new Sg("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Sg("invalid intrinsic syntax, expected opening `%`");var i=[];return tU(e,awe,function(s,o,a,l){i[i.length]=a?tU(l,lwe,"$1"):o||s}),i},uwe=function(e,n){var r=e,i;if(oE(eU,r)&&(i=eU[r],r="%"+i[0]+"%"),oE(wh,r)){var s=wh[r];if(s===ap&&(s=rwe(r)),typeof s>"u"&&!n)throw new Kp("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new Sg("intrinsic "+e+" does not exist!")},af=function(e,n){if(typeof e!="string"||e.length===0)throw new Kp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Kp('"allowMissing" argument must be a boolean');if(owe(/^%?[^%]*%?$/,e)===null)throw new Sg("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=cwe(e),i=r.length>0?r[0]:"",s=uwe("%"+i+"%",n),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],swe(r,iwe([0,1],c)));for(var u=1,d=!0;u<r.length;u+=1){var h=r[u],f=aE(h,0,1),p=aE(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Sg("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,o="%"+i+"%",oE(wh,o))a=wh[o];else if(a!=null){if(!(h in a)){if(!n)throw new Kp("base intrinsic for "+e+" exists, but the property is not available.");return}if(xh&&u+1>=r.length){var m=xh(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=oE(a,h),a=a[h];d&&!l&&(wh[o]=a)}}return a},M7={exports:{}},dwe=af,WI=dwe("%Object.defineProperty%",!0),XI=function(){if(WI)try{return WI({},"a",{value:1}),!0}catch{return!1}return!1};XI.hasArrayLengthDefineBug=function(){if(!XI())return null;try{return WI([],"length",{value:1}).length!==1}catch{return!0}};var L7=XI,hwe=af,Ux=hwe("%Object.getOwnPropertyDescriptor%",!0);if(Ux)try{Ux([],"length")}catch{Ux=null}var k7=Ux,fwe=L7(),h3=af,bv=fwe&&h3("%Object.defineProperty%",!0);if(bv)try{bv({},"a",{value:1})}catch{bv=!1}var pwe=h3("%SyntaxError%"),jf=h3("%TypeError%"),nU=k7,gwe=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new jf("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new jf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new jf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new jf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new jf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new jf("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!nU&&nU(e,n);if(bv)bv(e,n,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[n]=r;else throw new pwe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},O7=af,rU=gwe,mwe=L7(),iU=k7,sU=O7("%TypeError%"),vwe=O7("%Math.floor%"),ywe=function(e,n){if(typeof e!="function")throw new sU("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||vwe(n)!==n)throw new sU("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&iU){var o=iU(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(mwe?rU(e,"length",n,!0,!0):rU(e,"length",n)),e};(function(t){var e=d3,n=af,r=ywe,i=n("%TypeError%"),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(o,s),l=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var f=a(e,o,arguments);return r(f,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(M7);var bwe=M7.exports,N7=af,D7=bwe,_we=D7(N7("String.prototype.indexOf")),xwe=function(e,n){var r=N7(e,!!n);return typeof r=="function"&&_we(e,".prototype.")>-1?D7(r):r};const Eh=.01;function Kh(t,e,n){return t&&e?n?bxe(t,e,{units:"kilometers"}):Math.sqrt(((t[0]-e[0])*Eh)**2+((t[1]-e[1])*Eh)**2):Number.NaN}function wwe(t,e,n){const r=Eg(t,e),i=Eg(t,n);return Kh(r==null?void 0:r.point,i==null?void 0:i.point,!1)}function B7(t,e){const n=t.locations.length/e;let r=t.locationSerialNumber;const i=Yp(e).map(a=>{const l=1/Eh/(2*Math.sin(Math.PI/e)),c=-1*(2*Math.PI*a)/e-Math.PI/2,u=l*Math.cos(c),d=l*Math.sin(c);if(a==0&&e==1)return{...t.locations[0],point:[0,0],manufactureShare:1,agricultureShare:1};if(a<t.locations.length){const h=t.locations[a];return{...h,point:[u,d],manufactureShare:n*h.manufactureShare,agricultureShare:n*h.agricultureShare}}else return C7({id:r++,label:lb(),point:[u,d],share:1/e,randomize:!0})}),s=t.parameterSet.units=="degrees",o=e==1?[]:Yp(e).map(a=>{const[l,c]=a!=e-1?[i[a],i[a+1]]:[i[0],i[e-1]];return{source:l.id,target:c.id,distance:Kh(l.point,c.point,s)}});return{locations:i,edges:o,locationSerialNumber:r,addedIndices:e>t.locations.length?Yp(e-t.locations.length).map(a=>a+t.locations.length):[]}}function Ewe(t,e,n,r){const i=t[t.length-1];return n.map(s=>({source:t[s].id,target:i.id,distance:Kh(t[s].point,i.point,r)}))}const Twe=.5;function Swe(t,e,n){const r="_",i=new Set(e.map(c=>`${c.source}${r}${c.target}`)),s=[];for(let c=0;c<t.length;c++)for(let u=c+1;u<t.length;u++)i.has(`${c}${r}${u}`)||s.push(c+r+u);const o=new Set(t.map(c=>c.id)),a=x1e(s).filter((c,u)=>u<t.length*Twe).map(c=>{const[u,d]=c.split(r).map(f=>parseInt(f)),h=Kh(t[u].point,t[d].point,n);return{source:t[u].id,target:t[d].id,distance:h}});if(a.forEach(c=>{o.delete(c.source),o.delete(c.target)}),o.size==0)throw new Error;const l=[...o].map(c=>{const u=t.filter(d=>d.id!=c).map(d=>({location:d,distance:Kh(d.point,t[c].point,n)})).reduce((d,h)=>d===null||d.distance>h.distance?h:d,null);return u?c<(u==null?void 0:u.location.id)?{source:c,target:u==null?void 0:u.location.id,id:c,distance:u==null?void 0:u.distance}:{source:u==null?void 0:u.location.id,id:c,target:c,distance:u==null?void 0:u.distance}:null}).filter(c=>c!==null);return e.concat(a).concat(l)}function F7(t,e,n){const r=n??t.locations.length+1,i=new S7(t.locations.length),s=t.locations.length/r,o=t.locations.map(b=>({...b,manufactureShare:b.manufactureShare*s,agricultureShare:b.agricultureShare*s}));let a=i.random()*2*Math.PI,l=0,c=1/Eh;const u=[];let d=t.locationSerialNumber;for(let b=t.locations.length;b<r;b++){l=2*i.random()-.5,a+=2*Math.PI*(i.random()-.5)/2,c=Math.min(50,Math.max(400,c+l));const{x:y,y:x}=t.locations.length==0&&b==0?{x:0,y:0}:b<t.locations.length?{x:t.locations[b].point[0],y:t.locations[b].point[1]}:b==t.locations.length?{x:t.locations[t.locations.length-1].point[0]+c*Math.cos(a),y:t.locations[t.locations.length-1].point[1]+c*Math.sin(a)}:{x:u[b-t.locations.length-1].point[0]+c*Math.cos(a),y:u[b-t.locations.length-1].point[1]+c*Math.sin(a)},_=C7({id:d++,label:lb(),point:[y,x],share:1/r,randomize:!0});u.push(_)}const h=[...o,...u],f=t.parameterSet.units=="degrees",p=n==null?Ewe(h,t.edges,e,f):Swe(h,t.edges,f),m=[...t.edges,...p];return{locations:h,edges:m,locationSerialNumber:d,addedIndices:Yp(u.length).map(b=>b+o.length)}}const f3=(t,e,n)=>{switch(console.log(t),t.parameterSet.type){case"Racetrack":return B7(t,n);case"Graph":return F7(t,e,n);default:return{...t,addedIndices:[]}}};function Cwe(t,e){const n=new Set(e.locations.filter((o,a)=>t<=a).map(o=>o.id)),r=e.locations.length/t,i=e.locations.filter((o,a)=>a<t).map(o=>({...o,manufactureShare:o.manufactureShare*r,agricultureShare:o.agricultureShare*r})),s=e.edges.filter(o=>!n.has(o.source)&&!n.has(o.target));return{locations:i,edges:s,locationSerialNumber:e.locationSerialNumber}}const Awe=(t,e)=>{switch(e.parameterSet.type){case"Racetrack":return B7(e,t);case"Graph":return Cwe(t,e);default:throw new Error}},Cg={[sn.Racetrack]:[{caseId:"Racetrack-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-1",title:"Case i",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Racetrack-2",title:"Case ii",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-3",title:"Case iii",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Racetrack",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[sn.Graph]:[{caseId:"Graph-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-1",title:"Case A",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Graph-2",title:"Case B",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:"Graph",numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-3",title:"Case C",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:"Graph",numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[sn.RealWorld]:[{caseId:"RealWorld-0",title:"IDE-GSM 0",description:"sample 0",type:"RealWorld",numLocations:4,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"},{caseId:"RealWorld-1",title:"IDE-GSM 1",description:"sample 1",type:"RealWorld",numLocations:10,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"}]};c7();const mP=window.location.pathname,Pwe=mP.startsWith("/"+sn.Racetrack)?sn.Racetrack:mP.startsWith("/"+sn.Graph)?sn.Graph:mP.startsWith("/"+sn.RealWorld)?sn.RealWorld:sn.Racetrack,YI=Cg[Pwe][0],vP=f3({parameterSet:YI,locations:[],edges:[],locationSerialNumber:0},[],YI.numLocations),Rwe={parameterSet:YI,locations:vP.locations,edges:vP.edges,locationSerialNumber:vP.locationSerialNumber},Iwe=j_e(Rwe),Th=d7(Iwe),Mwe=ua({adjacencyMatrix:[],distanceMatrix:[],predecessorMatrix:[],transportationCostMatrix:[]}),Lwe=ua({viewportCenter:[1,0,0],focusedIndices:[],selectedIndices:[],draggingIndex:null,chartScale:1,chartType:Ia.ManufactureShare,autoLayoutFinished:!0}),kwe=async function(t){const e=t.params.projectType,n=t.params.uuid,r=parseFloat(t.params.zoom),i=parseFloat(t.params.y),s=parseFloat(t.params.x);return{uuid:n,type:e,y:i,x:s,zoom:r}};class z7{constructor(e,n){this.numLocations=e,this.numEdges=n}getNumLocations(){return this.numLocations}getNumEdges(){return this.numEdges}getAdjacencyMatrix(e,n,r){return this.adjacencyMatrix?Promise.resolve(this.adjacencyMatrix):this.createAdjacencyMatrix(e,n,r)}async getDistanceMatrix(e,n,r){return this.distanceMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.distanceMatrix)}async getPredecessorMatrix(e,n,r){return this.predecessorMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.predecessorMatrix)}getTransportationCostMatrix(e,n,r){return this.transportationCostMatrix?Promise.resolve(this.transportationCostMatrix):this.createTransportationCostMatrix(e,n,r)}async updateAdjacencyMatrix(e,n,r){return this.adjacencyMatrix=void 0,this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r),adjacencyMatrix:await this.getAdjacencyMatrix(e,n,r)}}async updateDistanceAndPredecessorMatrix(e,n,r){return this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r)}}async updateTransportationCostMatrix(e,n,r){return this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r)}}}const Owe=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let index = global_id.x;
    let totalSize = numVertices * numVertices;
    let items = max(1, totalSize / WORK_GROUP_SIZE);
    // 
    let start = index * items; // 
    let end = min((index + 1) * items, totalSize); // 

    for (var i: u32 = start; i < end; i++) {
        let rowIndex = i / numVertices;
        let colIndex = i % numVertices;
        if (rowIndex == colIndex) {
           adjacencyMatrix[i] = f32(0); // 0
        } else {
            adjacencyMatrix[i] = f32(1e10); // 1e10
        }
    }
}
`,Nwe=()=>`
struct Vertex {
    x: f32,
    y: f32
};

struct Edge {
    start: u32,
    end: u32
};

fn distance(a: vec2<f32>, b:vec2<f32>) -> f32 {
    let dx: f32 = a.x - b.x;
    let dy: f32 = a.y - b.y;
    return sqrt(dx * dx + dy * dy) * ${Eh};
}

fn distance4(ax: f32, ay: f32, bx: f32, by: f32) -> f32 {
    let dx: f32 = ax - bx;
    let dy: f32 = ay - by;
    return sqrt(dx * dx + dy * dy) * ${Eh};
}

@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(1) var<uniform> numEdges: u32;
@group(0) @binding(2) var<storage, read> vertices: array<vec2<f32>>;
@group(0) @binding(3) var<storage, read> edges: array<u32>;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let edgeIndex: u32 = global_id.x;
    let edgeItems: u32 = max(1u, numEdges / WORK_GROUP_SIZE);
    let startEdgeIndex: u32 = edgeIndex * edgeItems; // 
    let endEdgeIndex: u32 = min((edgeIndex + 1u) * edgeItems, numEdges); // 

    for (var edgeIndex: u32 = startEdgeIndex; edgeIndex < endEdgeIndex; edgeIndex++) {
      //let edge = edges[edgeIndex * 2];
      //let startVertexIndex: u32 = edge.x;
      //let endVertexIndex: u32 = edge.y;
      //let edge = edges[edgeIndex * 2];
      let startVertexIndex: u32 = edges[edgeIndex * 2];
      let endVertexIndex: u32 = edges[edgeIndex * 2 + 1];
      
      let dx = vertices[startVertexIndex][0] - vertices[endVertexIndex][0];
      let dy = vertices[startVertexIndex][1] - vertices[endVertexIndex][1];
      let distance: f32 = sqrt(dx * dx + dy * dy) * ${Eh};
      
      let matrixIndex1: u32 = (startVertexIndex * numVertices) + endVertexIndex;
      let matrixIndex2: u32 = (endVertexIndex * numVertices) + startVertexIndex;

      adjacencyMatrix[matrixIndex1] = distance;
      adjacencyMatrix[matrixIndex2] = distance;

/*
      adjacencyMatrix[edgeIndex*4+0u] = f32(startVertexIndex); 
      adjacencyMatrix[edgeIndex*4+1u] = f32(endVertexIndex);
      adjacencyMatrix[edgeIndex*4+2u] = f32(startVertexIndex * numVertices + endVertexIndex);
      adjacencyMatrix[edgeIndex*4+3u] = f32(endVertexIndex * numVertices + startVertexIndex);
      */
      //adjacencyMatrix[edgeIndex*4+3u] = distance;
    }
}
`,Dwe=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(6) var<storage, read_write> predecessorMatrix: array<i32>;

const WORKGROUP_SIZE = 64u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let numElements = numVertices * numVertices;
    let numElementsPerThread: u32 = (numElements + WORKGROUP_SIZE - 1u) / WORKGROUP_SIZE;
    let startIndex: u32 = global_id.x * numElementsPerThread;
    let endIndex: u32 = min(startIndex + numElementsPerThread, numElements);

    // 
    for (var index: u32 = startIndex; index < endIndex; index++) {
        let i = index / numVertices;
        let j = index % numVertices;

        // distanceMatrixpredecessorMatrix
        if (i < numVertices && j < numVertices) {
            distanceMatrix[index] = adjacencyMatrix[index];
            predecessorMatrix[index] = i32(j);
        }
    }

    // Floyd-Warshall
    for (var k: u32 = 0; k < numVertices; k++) {
        workgroupBarrier(); // 

        for (var index: u32 = startIndex; index < endIndex; index++) {
            let i = index / numVertices;
            let j = index % numVertices;

            if (i < numVertices && j < numVertices) {
                let ik = i * numVertices + k;
                let kj = k * numVertices + j;
                let newDist = distanceMatrix[ik] + distanceMatrix[kj];

                if (newDist < distanceMatrix[index]) {
                    distanceMatrix[index] = newDist;
                    predecessorMatrix[index] = predecessorMatrix[ik];
                }
            }
        }
    }
}`,Bwe=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer : array<f32>;

const WORKGROUP_SIZE = 1u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id : vec3<u32>, @builtin(local_invocation_id) local_id : vec3<u32>) {

    var max_value: f32 = -1e10;

    // 
    for (var i: u32 = 0; i < arrayLength(&distanceMatrix); i = i + 1) {
        let value = distanceMatrix[i];
        if (value != 1e10 && value > max_value) {
            max_value = value;
        }
    }
    // 
    maxValueBuffer[0] = max_value;
}
`,Fwe=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer: array<f32>;
@group(0) @binding(8) var<storage, read_write> transportationCostBuffer: array<f32>;
@group(0) @binding(9) var<storage, read_write> transportationCostMatrix: array<f32>;

@compute @workgroup_size(64)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {

  let i = global_id.x;
  if(distanceMatrix[i] != f32(1e10)) {
    let normalized = exp(transportationCostBuffer[0] * distanceMatrix[i] / maxValueBuffer[0]);
    transportationCostMatrix[i] = normalized;
  }else{
    transportationCostMatrix[i] = f32(1e10);
  }
}
 `,zwe=t=>t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:6,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:7,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:8,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage",minBindingSize:4}},{binding:9,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),Uwe=async()=>{var e;const t=await((e=navigator.gpu)==null?void 0:e.requestAdapter());if(!t)throw new Error("GPU Adapter is not available");return await t.requestDevice()},oU=({device:t,vertexBuffer:e,edgeBuffer:n,transportationCostBuffer:r},i,s,o)=>{const a=new Map;i.forEach((u,d)=>{a.set(u.id,d)});const l=new Float32Array(i.length*2),c=new Uint32Array(s.length*2);if(l.set(i.flatMap(u=>u.point)),c.set(s.flatMap(u=>{const d=a.get(u.source),h=a.get(u.target);return[d??-1,h??-1]})),t.queue.writeBuffer(e,0,l),t.queue.writeBuffer(n,0,c),o!=null){const u=Math.log(o);t.queue.writeBuffer(r,0,new Float32Array([u]))}},$we=async(t,e)=>{const n=await Uwe(),r=zwe(n),i=n.createShaderModule({code:Owe()}),s=n.createShaderModule({code:Nwe()}),o=n.createShaderModule({code:Dwe()}),a=n.createShaderModule({code:Bwe()}),l=n.createShaderModule({code:Fwe()}),c=t**2*4,u=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(u,0,new Uint32Array([t]));const d=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(d,0,new Uint32Array([e]));const h=n.createBuffer({size:t*2*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),f=n.createBuffer({size:Math.max(4,e*2*4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),p=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),m=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),b=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),y=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),x=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),_=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),w=new ArrayBuffer(t*4*2),E=new ArrayBuffer(Math.max(4,e*4*2)),S=n.createBindGroup({entries:[{binding:0,resource:{buffer:u}},{binding:1,resource:{buffer:d}},{binding:2,resource:{buffer:h}},{binding:3,resource:{buffer:f}},{binding:4,resource:{buffer:p}},{binding:5,resource:{buffer:m}},{binding:6,resource:{buffer:b}},{binding:7,resource:{buffer:y}},{binding:8,resource:{buffer:x}},{binding:9,resource:{buffer:_}}],layout:r}),A=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:i,entryPoint:"main"}}),k=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:s,entryPoint:"main"}}),M=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:o,entryPoint:"main"}}),I=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:a,entryPoint:"main"}}),B=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:l,entryPoint:"main"}});return{device:n,numVertices:t,numEdges:e,matrixSize:c,vertexData:w,edgeData:E,vertexBuffer:h,edgeBuffer:f,bindGroup:S,initializeAdjacencyMatrixShaderModule:i,createAdjacencyMatrixShaderModule:s,createDistanceAndPredecessorMatrixShaderModule:o,findMaxValueShaderModule:a,createTransportationCostMatrixShaderModule:l,adjacencyMatrixBuffer:p,distanceMatrixBuffer:m,predecessorMatrixBuffer:b,maxValueBuffer:y,transportationCostBuffer:x,transportationCostMatrixBuffer:_,initializeAdjacencyMatrixPipeline:A,createAdjacencyMatrixPipeline:k,createDistanceAndPredecessorMatrixPipeline:M,findMaxValuePipeline:I,createTransportationCostMatrixPipeline:B}},by=(t,e,n,r,i,s,o)=>{const a=t.createCommandEncoder(),l=a.beginComputePass();return l.setPipeline(r),l.setBindGroup(e,n),l.dispatchWorkgroups(i,s,o),l.end(),a},yP=t=>{const e=[by(t.device,0,t.bindGroup,t.initializeAdjacencyMatrixPipeline,Math.ceil(t.matrixSize/64)),by(t.device,0,t.bindGroup,t.createAdjacencyMatrixPipeline,Math.max(1,Math.ceil(t.numEdges/64)))],n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return e[1].copyBufferToBuffer(t.adjacencyMatrixBuffer,0,n,0,t.matrixSize),{adjacencyMatrixReadBuffer:n,gpuCommandBuffers:e.map(r=>r.finish())}},bP=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=sm(e,(i,s)=>n[i*e+s]);return t.unmap(),r},aU=t=>{const e=by(t.device,0,t.bindGroup,t.createDistanceAndPredecessorMatrixPipeline,Math.ceil(t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.distanceMatrixBuffer,0,n,0,t.matrixSize),e.copyBufferToBuffer(t.predecessorMatrixBuffer,0,r,0,t.matrixSize);const i=e.finish();return{distanceMatrixReadBuffer:n,predecessorMatrixReadBuffer:r,gpuCommandBuffer:i}},lU=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=sm(e,(i,s)=>n[i*e+s]);return t.unmap(),r},cU=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Int32Array(t.getMappedRange()),r=sm(e,(i,s)=>n[i*e+s]);return t.unmap(),r},jwe=t=>{const e=by(t.device,0,t.bindGroup,t.findMaxValuePipeline,1),n=t.device.createBuffer({size:4,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.maxValueBuffer,0,n,0,4);const r=e.finish();return{maxValueReadBuffer:n,gpuCommandBuffer:r}},Gwe=t=>{const e=by(t.device,0,t.bindGroup,t.createTransportationCostMatrixPipeline,Math.ceil(t.numVertices*t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.transportationCostMatrixBuffer,0,n,0,t.matrixSize);const r=e.finish();return{transportationCostMatrixReadBuffer:n,gpuCommandBuffer:r}},Hwe=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=sm(e,(i,s)=>n[i*e+s]);return t.unmap(),r};class Vwe extends z7{constructor(e,n){super(e,n)}async update(e,n,r){return(!this.resources||this.resources.numVertices!=e.length||this.resources.numEdges!=n.length)&&(this.resources=await $we(e.length,n.length)),oU(this.resources,e,n,r),this.resources}async createAdjacencyMatrix(e,n,r){const i=await this.update(e,n,r),{gpuCommandBuffers:s,adjacencyMatrixReadBuffer:o}=yP(i);i.device.queue.submit(s);const a=await bP(o,i.numVertices);return this.adjacencyMatrix=a}async createDistanceAndPredecessorMatrix(e,n,r){const i=await this.update(e,n,r);oU(i,e,n,r);const{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=yP(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=aU(i);i.device.queue.submit(o.concat(c));const u=await bP(s,i.numVertices),d=await lU(a,i.numVertices),h=await cU(l,i.numVertices);return this.adjacencyMatrix=u,this.distanceMatrix=d,this.predecessorMatrix=h,Promise.resolve([d,h])}async createTransportationCostMatrix(e,n,r){const i=await this.update(e,n,r),{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=yP(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=aU(i),{maxValueReadBuffer:u,gpuCommandBuffer:d}=jwe(i),{transportationCostMatrixReadBuffer:h,gpuCommandBuffer:f}=Gwe(i);i.device.queue.submit(o.concat(c).concat([d,f]));const p=await bP(s,i.numVertices),m=await lU(a,i.numVertices),b=await cU(l,i.numVertices),y=await Hwe(h,i.numVertices);return this.adjacencyMatrix=p,this.distanceMatrix=m,this.predecessorMatrix=b,this.transportationCostMatrix=y,Promise.resolve(y)}}const Gf=16;function uU(t){const e=t.length,n=new Array(e),r=new Array(e);for(let i=0;i<e;i++){n[i]=new Array(e),r[i]=new Array(e);for(let s=0;s<e;s++)n[i][s]=t[i][s],r[i][s]=s}for(let i=0;i<e;i+=Gf)for(let s=0;s<e;s+=Gf)for(let o=0;o<e;o+=Gf)for(let a=i;a<Math.min(e,i+Gf);a++)for(let l=s;l<Math.min(e,s+Gf);l++)for(let c=o;c<Math.min(e,o+Gf);c++)n[l][a]+n[a][c]<n[l][c]&&(n[l][c]=n[l][a]+n[a][c],r[l][c]=r[l][a]);for(let i=0;i<e;i++)for(let s=0;s<e;s++)for(let o=0;o<e;o++)n[s][i]+n[i][o]<n[s][o]&&(n[s][o]=n[s][i]+n[i][o],r[s][o]=r[s][i]);return[n,r]}function dU(t,e){const n=sm(t.length,(i,s)=>i!=s?Number.POSITIVE_INFINITY:0),r=new Map(t.map((i,s)=>[i.id,s]));return e.forEach(i=>{const s=i.distance||(i.distance=wwe(t,i.source,i.target)),o=r.get(i.source),a=r.get(i.target);o!=null&&a!=null&&(n[o][a]=s,n[a][o]=s)}),n}function hU(t,e){const n=t.length;let r=0;for(let o=0;o<n;o++)if(t&&o<t.length)for(let a=0;a<n;a++)a<t[o].length&&t[o][a]!=Number.POSITIVE_INFINITY&&(r=Math.max(t[o][a],r));const i=sm(n,(o,a)=>o!=a?Number.POSITIVE_INFINITY:0);if(r==0)return i;const s=Math.log(e);for(let o=0;o<n;o++)if(t&&o<t.length){for(let a=o;a<n;a++)if(a<t[o].length)if(t[o][a]!=Number.POSITIVE_INFINITY){const l=t[o][a]/r;i[a][o]=i[o][a]=Math.exp(s*l)}else i[a][o]=i[o][a]=Number.POSITIVE_INFINITY}return i}class fU extends z7{createAdjacencyMatrix(e,n){return Promise.resolve(this.adjacencyMatrix=dU(e,n))}async createDistanceAndPredecessorMatrix(e,n,r){const[i,s]=uU(await this.getAdjacencyMatrix(e,n,r));return this.distanceMatrix=i,this.predecessorMatrix=s,Promise.resolve([this.distanceMatrix,this.predecessorMatrix])}async createTransportationCostMatrix(e,n,r){const i=hU(await this.getDistanceMatrix(e,n,r),r);return this.transportationCostMatrix=i,Promise.resolve(i)}async createMatrices(e,n,r){const i=dU(e,n),[s,o]=uU(i),a=hU(s,r);return this.adjacencyMatrix=i,this.distanceMatrix=s,this.predecessorMatrix=o,this.transportationCostMatrix=a,Promise.resolve({adjacencyMatrix:i,distanceMatrix:s,predecessorMatrix:o,transportationCostMatrix:a})}}const qI={GPUMatrixEngine:"GPUFloydWarshall",CPUMatrixEngine:"CPUFloydWarshall"},U7=qI.CPUMatrixEngine,Wwe=new URLSearchParams(location.search),pU=Wwe.get("engine")||U7,gU=(t,e)=>pU===qI.CPUMatrixEngine?new fU(t,e):pU===qI.GPUMatrixEngine?new Vwe(t,e):new fU(t,e),Xwe={maxRowColLength:30,matrixEngineType:U7},Ywe=ua(Xwe);function qwe(t){const e=t.map(n=>n.manufactureShare).reduce((n,r)=>n+r,0);t.forEach(n=>{n.manufactureShare=n.manufactureShare/e})}const Kwe=50;function Zwe(t,e){Yp(Kwe).forEach(()=>{t.locations.forEach((r,i)=>{dxe(r)}),t.locations.forEach((r,i)=>{r.income=hxe(t.parameterSet.manufactureShare,r)}),t.locations.forEach((r,i)=>{r.priceIndex=fxe(t.locations,t.parameterSet.elasticitySubstitution,e,r,i)}),t.locations.forEach((r,i)=>{r.nominalWage=pxe(t.locations,t.parameterSet.elasticitySubstitution,e,i)}),t.locations.forEach((r,i)=>{r.realWage=gxe(t.parameterSet.manufactureShare,r)})});const n=t.locations.map(r=>r.realWage*r.manufactureShare).reduce((r,i)=>r+i,0);t.locations.forEach((r,i)=>{r.manufactureShare+=mxe(t.parameterSet.numLocations,t.parameterSet.elasticitySubstitution,n,r)}),qwe(t.locations)}function Qwe(t,e){const[n,r]=P.useState(gU(t,e));return P.useEffect(()=>{r(gU(t,e))},[t,e]),n}var $7={exports:{}},hb={},KI={exports:{}};(function(t,e){(function(n,r){r(e)})(xi,function(n){function r(se){return function(Te,ge,Me,Se,D,ie,ae){return se(Te,ge,ae)}}function i(se){return function(Te,ge,Me,Se){if(!Te||!ge||typeof Te!="object"||typeof ge!="object")return se(Te,ge,Me,Se);var D=Se.get(Te),ie=Se.get(ge);if(D&&ie)return D===ge&&ie===Te;Se.set(Te,ge),Se.set(ge,Te);var ae=se(Te,ge,Me,Se);return Se.delete(Te),Se.delete(ge),ae}}function s(se,ue){var Te={};for(var ge in se)Te[ge]=se[ge];for(var ge in ue)Te[ge]=ue[ge];return Te}function o(se){return se.constructor===Object||se.constructor==null}function a(se){return typeof se.then=="function"}function l(se,ue){return se===ue||se!==se&&ue!==ue}var c="[object Arguments]",u="[object Boolean]",d="[object Date]",h="[object RegExp]",f="[object Map]",p="[object Number]",m="[object Object]",b="[object Set]",y="[object String]",x=Object.prototype.toString;function _(se){var ue=se.areArraysEqual,Te=se.areDatesEqual,ge=se.areMapsEqual,Me=se.areObjectsEqual,Se=se.areRegExpsEqual,D=se.areSetsEqual,ie=se.createIsNestedEqual,ae=ie(K);function K(W,ne,pe){if(W===ne)return!0;if(!W||!ne||typeof W!="object"||typeof ne!="object")return W!==W&&ne!==ne;if(o(W)&&o(ne))return Me(W,ne,ae,pe);var me=Array.isArray(W),he=Array.isArray(ne);if(me||he)return me===he&&ue(W,ne,ae,pe);var Pe=x.call(W);return Pe!==x.call(ne)?!1:Pe===d?Te(W,ne,ae,pe):Pe===h?Se(W,ne,ae,pe):Pe===f?ge(W,ne,ae,pe):Pe===b?D(W,ne,ae,pe):Pe===m||Pe===c?a(W)||a(ne)?!1:Me(W,ne,ae,pe):Pe===u||Pe===p||Pe===y?l(W.valueOf(),ne.valueOf()):!1}return K}function w(se,ue,Te,ge){var Me=se.length;if(ue.length!==Me)return!1;for(;Me-- >0;)if(!Te(se[Me],ue[Me],Me,Me,se,ue,ge))return!1;return!0}var E=i(w);function S(se,ue){return l(se.valueOf(),ue.valueOf())}function A(se,ue,Te,ge){var Me=se.size===ue.size;if(!Me)return!1;if(!se.size)return!0;var Se={},D=0;return se.forEach(function(ie,ae){if(Me){var K=!1,W=0;ue.forEach(function(ne,pe){!K&&!Se[W]&&(K=Te(ae,pe,D,W,se,ue,ge)&&Te(ie,ne,ae,pe,se,ue,ge))&&(Se[W]=!0),W++}),D++,Me=K}}),Me}var k=i(A),M="_owner",I=Object.prototype.hasOwnProperty;function B(se,ue,Te,ge){var Me=Object.keys(se),Se=Me.length;if(Object.keys(ue).length!==Se)return!1;for(var D;Se-- >0;){if(D=Me[Se],D===M){var ie=!!se.$$typeof,ae=!!ue.$$typeof;if((ie||ae)&&ie!==ae)return!1}if(!I.call(ue,D)||!Te(se[D],ue[D],D,D,se,ue,ge))return!1}return!0}var R=i(B);function O(se,ue){return se.source===ue.source&&se.flags===ue.flags}function C(se,ue,Te,ge){var Me=se.size===ue.size;if(!Me)return!1;if(!se.size)return!0;var Se={};return se.forEach(function(D,ie){if(Me){var ae=!1,K=0;ue.forEach(function(W,ne){!ae&&!Se[K]&&(ae=Te(D,W,ie,ne,se,ue,ge))&&(Se[K]=!0),K++}),Me=ae}}),Me}var F=i(C),q=Object.freeze({areArraysEqual:w,areDatesEqual:S,areMapsEqual:A,areObjectsEqual:B,areRegExpsEqual:O,areSetsEqual:C,createIsNestedEqual:r}),G=Object.freeze({areArraysEqual:E,areDatesEqual:S,areMapsEqual:k,areObjectsEqual:R,areRegExpsEqual:O,areSetsEqual:F,createIsNestedEqual:r}),j=_(q);function H(se,ue){return j(se,ue,void 0)}var Z=_(s(q,{createIsNestedEqual:function(){return l}}));function X(se,ue){return Z(se,ue,void 0)}var ee=_(G);function ve(se,ue){return ee(se,ue,new WeakMap)}var oe=_(s(G,{createIsNestedEqual:function(){return l}}));function fe(se,ue){return oe(se,ue,new WeakMap)}function be(se){return _(s(q,se(q)))}function Le(se){var ue=_(s(G,se(G)));return function(Te,ge,Me){return Me===void 0&&(Me=new WeakMap),ue(Te,ge,Me)}}n.circularDeepEqual=ve,n.circularShallowEqual=fe,n.createCustomCircularEqual=Le,n.createCustomEqual=be,n.deepEqual=H,n.sameValueZeroEqual=l,n.shallowEqual=X,Object.defineProperty(n,"__esModule",{value:!0})})})(KI,KI.exports);var p3=KI.exports,ZI={exports:{}};function j7(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=j7(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mU(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=j7(t))&&(r&&(r+=" "),r+=e);return r}ZI.exports=mU,ZI.exports.clsx=mU;var g3=ZI.exports,on={},Jwe=function(e,n,r){return e===n?!0:e.className===n.className&&r(e.style,n.style)&&e.width===n.width&&e.autoSize===n.autoSize&&e.cols===n.cols&&e.draggableCancel===n.draggableCancel&&e.draggableHandle===n.draggableHandle&&r(e.verticalCompact,n.verticalCompact)&&r(e.compactType,n.compactType)&&r(e.layout,n.layout)&&r(e.margin,n.margin)&&r(e.containerPadding,n.containerPadding)&&e.rowHeight===n.rowHeight&&e.maxRows===n.maxRows&&e.isBounded===n.isBounded&&e.isDraggable===n.isDraggable&&e.isResizable===n.isResizable&&e.allowOverlap===n.allowOverlap&&e.preventCollision===n.preventCollision&&e.useCSSTransforms===n.useCSSTransforms&&e.transformScale===n.transformScale&&e.isDroppable===n.isDroppable&&r(e.resizeHandles,n.resizeHandles)&&r(e.resizeHandle,n.resizeHandle)&&e.onLayoutChange===n.onLayoutChange&&e.onDragStart===n.onDragStart&&e.onDrag===n.onDrag&&e.onDragStop===n.onDragStop&&e.onResizeStart===n.onResizeStart&&e.onResize===n.onResize&&e.onResizeStop===n.onResizeStop&&e.onDrop===n.onDrop&&r(e.droppingItem,n.droppingItem)&&r(e.innerRef,n.innerRef)};Object.defineProperty(on,"__esModule",{value:!0});on.bottom=m3;on.childrenEqual=nEe;on.cloneLayout=G7;on.cloneLayoutItem=Sh;on.collides=bS;on.compact=V7;on.compactItem=W7;on.compactType=mEe;on.correctBounds=X7;on.fastPositionEqual=rEe;on.fastRGLPropsEqual=void 0;on.getAllCollisions=Y7;on.getFirstCollision=dh;on.getLayoutItem=v3;on.getStatics=y3;on.modifyLayout=H7;on.moveElement=k0;on.moveElementAwayFromCollision=JI;on.noop=void 0;on.perc=sEe;on.resizeItemInDirection=dEe;on.setTopLeft=fEe;on.setTransform=hEe;on.sortLayoutItems=T3;on.sortLayoutItemsByColRow=J7;on.sortLayoutItemsByRowCol=Q7;on.synchronizeLayoutWithChildren=pEe;on.validateLayout=gEe;on.withLayoutItem=tEe;var vU=p3,L0=eEe(P);function eEe(t){return t&&t.__esModule?t:{default:t}}function m3(t){let e=0,n;for(let r=0,i=t.length;r<i;r++)n=t[r].y+t[r].h,n>e&&(e=n);return e}function G7(t){const e=Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=Sh(t[n]);return e}function H7(t,e){const n=Array(t.length);for(let r=0,i=t.length;r<i;r++)e.i===t[r].i?n[r]=e:n[r]=t[r];return n}function tEe(t,e,n){let r=v3(t,e);return r?(r=n(Sh(r)),t=H7(t,r),[t,r]):[t,null]}function Sh(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function nEe(t,e){return(0,vU.deepEqual)(L0.default.Children.map(t,n=>n==null?void 0:n.key),L0.default.Children.map(e,n=>n==null?void 0:n.key))&&(0,vU.deepEqual)(L0.default.Children.map(t,n=>n==null?void 0:n.props["data-grid"]),L0.default.Children.map(e,n=>n==null?void 0:n.props["data-grid"]))}on.fastRGLPropsEqual=Jwe;function rEe(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function bS(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function V7(t,e,n,r){const i=y3(t),s=T3(t,e),o=Array(t.length);for(let a=0,l=s.length;a<l;a++){let c=Sh(s[a]);c.static||(c=W7(i,c,e,n,s,r),i.push(c)),o[t.indexOf(s[a])]=c,c.moved=!1}return o}const iEe={x:"w",y:"h"};function QI(t,e,n,r){const i=iEe[r];e[r]+=1;const s=t.map(o=>o.i).indexOf(e.i);for(let o=s+1;o<t.length;o++){const a=t[o];if(!a.static){if(a.y>e.y+e.h)break;bS(e,a)&&QI(t,a,n+e[i],r)}}e[r]=n}function W7(t,e,n,r,i,s){const o=n==="vertical",a=n==="horizontal";if(o)for(e.y=Math.min(m3(t),e.y);e.y>0&&!dh(t,e);)e.y--;else if(a)for(;e.x>0&&!dh(t,e);)e.x--;let l;for(;(l=dh(t,e))&&!(n===null&&s);)if(a?QI(i,e,l.x+l.w,"x"):QI(i,e,l.y+l.h,"y"),a&&e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!dh(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function X7(t,e){const n=y3(t);for(let r=0,i=t.length;r<i;r++){const s=t[r];if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)n.push(s);else for(;dh(n,s);)s.y++}return t}function v3(t,e){for(let n=0,r=t.length;n<r;n++)if(t[n].i===e)return t[n]}function dh(t,e){for(let n=0,r=t.length;n<r;n++)if(bS(t[n],e))return t[n]}function Y7(t,e){return t.filter(n=>bS(n,e))}function y3(t){return t.filter(e=>e.static)}function k0(t,e,n,r,i,s,o,a,l){if(e.static&&e.isDraggable!==!0||e.y===r&&e.x===n)return t;`${e.i}${String(n)}${String(r)}${e.x}${e.y}`;const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof r=="number"&&(e.y=r),e.moved=!0;let d=T3(t,o);(o==="vertical"&&typeof r=="number"?u>=r:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const f=Y7(d,e),p=f.length>0;if(p&&l)return G7(t);if(p&&s)return`${e.i}`,e.x=c,e.y=u,e.moved=!1,t;for(let m=0,b=f.length;m<b;m++){const y=f[m];`${e.i}${e.x}${e.y}${y.i}${y.x}${y.y}`,!y.moved&&(y.static?t=JI(t,y,e,i,o):t=JI(t,e,y,i,o))}return t}function JI(t,e,n,r,i,s){const o=i==="horizontal",a=i==="vertical",l=e.static;if(r){r=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},h=dh(t,d),f=h&&h.y+h.h>e.y,p=h&&e.x+e.w>h.x;if(h){if(f&&a)return k0(t,n,void 0,e.y+1,r,l,i);if(f&&i==null)return e.y=n.y,n.y=n.y+n.h,t;if(p&&o)return k0(t,e,n.x,void 0,r,l,i)}else return`${n.i}${d.x}${d.y}`,k0(t,n,o?d.x:void 0,a?d.y:void 0,r,l,i)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c==null&&u==null?t:k0(t,n,o?n.x+1:void 0,a?n.y+1:void 0,r,l,i)}function sEe(t){return t*100+"%"}const q7=(t,e,n,r)=>t+n>r?e:n,K7=(t,e,n)=>t<0?e:n,Z7=t=>Math.max(0,t),b3=t=>Math.max(0,t),_3=(t,e,n)=>{let{left:r,height:i,width:s}=e;const o=t.top-(i-t.height);return{left:r,width:s,height:K7(o,t.height,i),top:b3(o)}},x3=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{top:r,height:s,width:q7(t.left,t.width,o,n),left:Z7(i)}},w3=(t,e,n)=>{let{top:r,height:i,width:s}=e;const o=t.left-(s-t.width);return{height:i,width:o<0?t.width:q7(t.left,t.width,s,n),top:b3(r),left:Z7(o)}},E3=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{width:o,left:i,height:K7(r,t.height,s),top:b3(r)}},oEe=function(){return _3(arguments.length<=0?void 0:arguments[0],x3(...arguments))},aEe=function(){return _3(arguments.length<=0?void 0:arguments[0],w3(...arguments))},lEe=function(){return E3(arguments.length<=0?void 0:arguments[0],x3(...arguments))},cEe=function(){return E3(arguments.length<=0?void 0:arguments[0],w3(...arguments))},uEe={n:_3,ne:oEe,e:x3,se:lEe,s:E3,sw:cEe,w:w3,nw:aEe};function dEe(t,e,n,r){const i=uEe[t];return i?i(e,{...e,...n},r):n}function hEe(t){let{top:e,left:n,width:r,height:i}=t;const s=`translate(${n}px,${e}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function fEe(t){let{top:e,left:n,width:r,height:i}=t;return{top:`${e}px`,left:`${n}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function T3(t,e){return e==="horizontal"?J7(t):e==="vertical"?Q7(t):t}function Q7(t){return t.slice(0).sort(function(e,n){return e.y>n.y||e.y===n.y&&e.x>n.x?1:e.y===n.y&&e.x===n.x?0:-1})}function J7(t){return t.slice(0).sort(function(e,n){return e.x>n.x||e.x===n.x&&e.y>n.y?1:-1})}function pEe(t,e,n,r,i){t=t||[];const s=[];L0.default.Children.forEach(e,a=>{if((a==null?void 0:a.key)==null)return;const l=v3(t,String(a.key)),c=a.props["data-grid"];l&&c==null?s.push(Sh(l)):c?s.push(Sh({...c,i:a.key})):s.push(Sh({w:1,h:1,x:0,y:m3(s),i:String(a.key)}))});const o=X7(s,{cols:n});return i?o:V7(o,r,n)}function gEe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,i=t.length;r<i;r++){const s=t[r];for(let o=0;o<n.length;o++)if(typeof s[n[o]]!="number")throw new Error("ReactGridLayout: "+e+"["+r+"]."+n[o]+" must be a number!")}}function mEe(t){const{verticalCompact:e,compactType:n}=t||{};return e===!1?null:n}const vEe=()=>{};on.noop=vEe;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.calcGridColWidth=_S;Hl.calcGridItemPosition=yEe;Hl.calcGridItemWHPx=eM;Hl.calcWH=_Ee;Hl.calcXY=bEe;Hl.clamp=hh;function _S(t){const{margin:e,containerPadding:n,containerWidth:r,cols:i}=t;return(r-e[0]*(i-1)-n[0]*2)/i}function eM(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function yEe(t,e,n,r,i,s){const{margin:o,containerPadding:a,rowHeight:l}=t,c=_S(t),u={};return s&&s.resizing?(u.width=Math.round(s.resizing.width),u.height=Math.round(s.resizing.height)):(u.width=eM(r,c,o[0]),u.height=eM(i,l,o[1])),s&&s.dragging?(u.top=Math.round(s.dragging.top),u.left=Math.round(s.dragging.left)):s&&s.resizing&&typeof s.resizing.top=="number"&&typeof s.resizing.left=="number"?(u.top=Math.round(s.resizing.top),u.left=Math.round(s.resizing.left)):(u.top=Math.round((l+o[1])*n+a[1]),u.left=Math.round((c+o[0])*e+a[0])),u}function bEe(t,e,n,r,i){const{margin:s,cols:o,rowHeight:a,maxRows:l}=t,c=_S(t);let u=Math.round((n-s[0])/(c+s[0])),d=Math.round((e-s[1])/(a+s[1]));return u=hh(u,0,o-r),d=hh(d,0,l-i),{x:u,y:d}}function _Ee(t,e,n,r,i,s){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=_S(t);let d=Math.round((e+o[0])/(u+o[0])),h=Math.round((n+o[1])/(c+o[1])),f=hh(d,0,l-r),p=hh(h,0,a-i);return["sw","w","nw"].indexOf(s)!==-1&&(f=hh(d,0,l)),["nw","n","ne"].indexOf(s)!==-1&&(p=hh(h,0,a)),{w:f,h:p}}function hh(t,e,n){return Math.max(Math.min(t,n),e)}var xS={},wS={exports:{}},eX={};function tX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=tX(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function yU(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=tX(t))&&(r&&(r+=" "),r+=e);return r}const xEe=Object.freeze(Object.defineProperty({__proto__:null,clsx:yU,default:yU},Symbol.toStringTag,{value:"Module"})),wEe=In(xEe);var kr={},Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.dontSetMe=AEe;Vl.findInArray=EEe;Vl.int=CEe;Vl.isFunction=TEe;Vl.isNum=SEe;function EEe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function TEe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function SEe(t){return typeof t=="number"&&!isNaN(t)}function CEe(t){return parseInt(t,10)}function AEe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.browserPrefixToKey=rX;lf.browserPrefixToStyle=PEe;lf.default=void 0;lf.getPrefix=nX;const _P=["Moz","Webkit","O","ms"];function nX(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<_P.length;r++)if(rX(e,_P[r])in n)return _P[r];return""}function rX(t,e){return e?"".concat(e).concat(REe(t)):t}function PEe(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function REe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}lf.default=nX();Object.defineProperty(kr,"__esModule",{value:!0});kr.addClassName=oX;kr.addEvent=LEe;kr.addUserSelectStyles=GEe;kr.createCSSTransform=zEe;kr.createSVGTransform=UEe;kr.getTouch=$Ee;kr.getTouchIdentifier=jEe;kr.getTranslation=S3;kr.innerHeight=DEe;kr.innerWidth=BEe;kr.matchesSelector=sX;kr.matchesSelectorAndParentsTo=MEe;kr.offsetXYFromParent=FEe;kr.outerHeight=OEe;kr.outerWidth=NEe;kr.removeClassName=aX;kr.removeEvent=kEe;kr.removeUserSelectStyles=HEe;var mo=Vl,bU=IEe(lf);function iX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(iX=function(r){return r?n:e})(t)}function IEe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=iX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}let y_="";function sX(t,e){return y_||(y_=(0,mo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,mo.isFunction)(t[n])})),(0,mo.isFunction)(t[y_])?t[y_](e):!1}function MEe(t,e,n){let r=t;do{if(sX(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function LEe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function kEe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function OEe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,mo.int)(n.borderTopWidth),e+=(0,mo.int)(n.borderBottomWidth),e}function NEe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,mo.int)(n.borderLeftWidth),e+=(0,mo.int)(n.borderRightWidth),e}function DEe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,mo.int)(n.paddingTop),e-=(0,mo.int)(n.paddingBottom),e}function BEe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,mo.int)(n.paddingLeft),e-=(0,mo.int)(n.paddingRight),e}function FEe(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:s,y:o}}function zEe(t,e){const n=S3(t,e,"px");return{[(0,bU.browserPrefixToKey)("transform",bU.default)]:n}}function UEe(t,e){return S3(t,e,"")}function S3(t,e,n){let{x:r,y:i}=t,s="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);s="translate(".concat(o,", ").concat(a,")")+s}return s}function $Ee(t,e){return t.targetTouches&&(0,mo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,mo.findInArray)(t.changedTouches,n=>e===n.identifier)}function jEe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function GEe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&oX(t.body,"react-draggable-transparent-selection")}function HEe(t){if(t)try{if(t.body&&aX(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function oX(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function aX(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.canDragX=XEe;Wl.canDragY=YEe;Wl.createCoreData=KEe;Wl.createDraggableData=ZEe;Wl.getBoundPosition=VEe;Wl.getControlPosition=qEe;Wl.snapToGrid=WEe;var eo=Vl,Lp=kr;function VEe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:QEe(r);const i=C3(t);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,eo.int)(u.paddingLeft)+(0,eo.int)(c.marginLeft),top:-i.offsetTop+(0,eo.int)(u.paddingTop)+(0,eo.int)(c.marginTop),right:(0,Lp.innerWidth)(l)-(0,Lp.outerWidth)(i)-i.offsetLeft+(0,eo.int)(u.paddingRight)-(0,eo.int)(c.marginRight),bottom:(0,Lp.innerHeight)(l)-(0,Lp.outerHeight)(i)-i.offsetTop+(0,eo.int)(u.paddingBottom)-(0,eo.int)(c.marginBottom)}}return(0,eo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,eo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,eo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,eo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function WEe(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function XEe(t){return t.props.axis==="both"||t.props.axis==="x"}function YEe(t){return t.props.axis==="both"||t.props.axis==="y"}function qEe(t,e,n){const r=typeof e=="number"?(0,Lp.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=C3(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Lp.offsetXYFromParent)(r||t,s,n.props.scale)}function KEe(t,e,n){const r=!(0,eo.isNum)(t.lastX),i=C3(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function ZEe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function QEe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function C3(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var ES={},TS={};Object.defineProperty(TS,"__esModule",{value:!0});TS.default=JEe;function JEe(){}Object.defineProperty(ES,"__esModule",{value:!0});ES.default=void 0;var xP=tTe(P),Ls=A3($c),eTe=A3(Fc),Hi=kr,au=Wl,wP=Vl,s0=A3(TS);function A3(t){return t&&t.__esModule?t:{default:t}}function lX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(lX=function(r){return r?n:e})(t)}function tTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=lX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function us(t,e,n){return e=nTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nTe(t){var e=rTe(t,"string");return typeof e=="symbol"?e:String(e)}function rTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const wa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let lu=wa.mouse,SS=class extends xP.Component{constructor(){super(...arguments),us(this,"dragging",!1),us(this,"lastX",NaN),us(this,"lastY",NaN),us(this,"touchIdentifier",null),us(this,"mounted",!1),us(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Hi.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Hi.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,Hi.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,au.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,au.createCoreData)(this,o,a);(0,s0.default)("DraggableCore: handleDragStart: %j",l),(0,s0.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Hi.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Hi.addEvent)(r,lu.move,this.handleDrag),(0,Hi.addEvent)(r,lu.stop,this.handleDragStop))}),us(this,"handleDrag",e=>{const n=(0,au.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,au.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,au.createCoreData)(this,r,i);if((0,s0.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),us(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,au.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,au.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,au.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Hi.removeUserSelectStyles)(a.ownerDocument),(0,s0.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,s0.default)("DraggableCore: Removing handlers"),(0,Hi.removeEvent)(a.ownerDocument,lu.move,this.handleDrag),(0,Hi.removeEvent)(a.ownerDocument,lu.stop,this.handleDragStop))}),us(this,"onMouseDown",e=>(lu=wa.mouse,this.handleDragStart(e))),us(this,"onMouseUp",e=>(lu=wa.mouse,this.handleDragStop(e))),us(this,"onTouchStart",e=>(lu=wa.touch,this.handleDragStart(e))),us(this,"onTouchEnd",e=>(lu=wa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Hi.addEvent)(e,wa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Hi.removeEvent)(n,wa.mouse.move,this.handleDrag),(0,Hi.removeEvent)(n,wa.touch.move,this.handleDrag),(0,Hi.removeEvent)(n,wa.mouse.stop,this.handleDragStop),(0,Hi.removeEvent)(n,wa.touch.stop,this.handleDragStop),(0,Hi.removeEvent)(e,wa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Hi.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:eTe.default.findDOMNode(this)}render(){return xP.cloneElement(xP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};ES.default=SS;us(SS,"displayName","DraggableCore");us(SS,"propTypes",{allowAnyClick:Ls.default.bool,children:Ls.default.node.isRequired,disabled:Ls.default.bool,enableUserSelectHack:Ls.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ls.default.arrayOf(Ls.default.number),handle:Ls.default.string,cancel:Ls.default.string,nodeRef:Ls.default.object,onStart:Ls.default.func,onDrag:Ls.default.func,onStop:Ls.default.func,onMouseDown:Ls.default.func,scale:Ls.default.number,className:wP.dontSetMe,style:wP.dontSetMe,transform:wP.dontSetMe});us(SS,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=h(P),n=u($c),r=u(Fc),i=u(wEe),s=kr,o=Wl,a=Vl,l=u(ES),c=u(TS);function u(x){return x&&x.__esModule?x:{default:x}}function d(x){if(typeof WeakMap!="function")return null;var _=new WeakMap,w=new WeakMap;return(d=function(E){return E?w:_})(x)}function h(x,_){if(!_&&x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var w=d(_);if(w&&w.has(x))return w.get(x);var E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in x)if(A!=="default"&&Object.prototype.hasOwnProperty.call(x,A)){var k=S?Object.getOwnPropertyDescriptor(x,A):null;k&&(k.get||k.set)?Object.defineProperty(E,A,k):E[A]=x[A]}return E.default=x,w&&w.set(x,E),E}function f(){return f=Object.assign?Object.assign.bind():function(x){for(var _=1;_<arguments.length;_++){var w=arguments[_];for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(x[E]=w[E])}return x},f.apply(this,arguments)}function p(x,_,w){return _=m(_),_ in x?Object.defineProperty(x,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[_]=w,x}function m(x){var _=b(x,"string");return typeof _=="symbol"?_:String(_)}function b(x,_){if(typeof x!="object"||x===null)return x;var w=x[Symbol.toPrimitive];if(w!==void 0){var E=w.call(x,_||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(x)}class y extends e.Component{static getDerivedStateFromProps(_,w){let{position:E}=_,{prevPropsPosition:S}=w;return E&&(!S||E.x!==S.x||E.y!==S.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:S}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(_){super(_),p(this,"onDragStart",(w,E)=>{if((0,c.default)("Draggable: onDragStart: %j",E),this.props.onStart(w,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(w,E)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",E);const S=(0,o.createDraggableData)(this,E),A={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:M,y:I}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[B,R]=(0,o.getBoundPosition)(this,A.x,A.y);A.x=B,A.y=R,A.slackX=this.state.slackX+(M-A.x),A.slackY=this.state.slackY+(I-A.y),S.x=A.x,S.y=A.y,S.deltaX=A.x-this.state.x,S.deltaY=A.y-this.state.y}if(this.props.onDrag(w,S)===!1)return!1;this.setState(A)}),p(this,"onDragStop",(w,E)=>{if(!this.state.dragging||this.props.onStop(w,(0,o.createDraggableData)(this,E))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",E);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:M,y:I}=this.props.position;A.x=M,A.y=I}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:_.position?_.position.x:_.defaultPosition.x,y:_.position?_.position.y:_.defaultPosition.y,prevPropsPosition:{..._.position},slackX:0,slackY:0,isElementSVG:!1},_.position&&!(_.onDrag||_.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var _,w;return(_=(w=this.props)===null||w===void 0||(w=w.nodeRef)===null||w===void 0?void 0:w.current)!==null&&_!==void 0?_:r.default.findDOMNode(this)}render(){const{axis:_,bounds:w,children:E,defaultPosition:S,defaultClassName:A,defaultClassNameDragging:k,defaultClassNameDragged:M,position:I,positionOffset:B,scale:R,...O}=this.props;let C={},F=null;const G=!!!I||this.state.dragging,j=I||S,H={x:(0,o.canDragX)(this)&&G?this.state.x:j.x,y:(0,o.canDragY)(this)&&G?this.state.y:j.y};this.state.isElementSVG?F=(0,s.createSVGTransform)(H,B):C=(0,s.createCSSTransform)(H,B);const Z=(0,i.default)(E.props.className||"",A,{[k]:this.state.dragging,[M]:this.state.dragged});return e.createElement(l.default,f({},O,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:Z,style:{...E.props.style,...C},transform:F}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(eX);const{default:cX,DraggableCore:iTe}=eX;wS.exports=cX;wS.exports.default=cX;wS.exports.DraggableCore=iTe;var uX=wS.exports,CS={exports:{}},fb={},P3={};P3.__esModule=!0;P3.cloneElement=uTe;var sTe=oTe(P);function oTe(t){return t&&t.__esModule?t:{default:t}}function _U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(n),!0).forEach(function(r){aTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aTe(t,e,n){return e=lTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lTe(t){var e=cTe(t,"string");return typeof e=="symbol"?e:String(e)}function cTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uTe(t,e){return e.style&&t.props.style&&(e.style=xU(xU({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),sTe.default.cloneElement(t,e)}var pb={};pb.__esModule=!0;pb.resizableProps=void 0;var Jt=dTe($c);function dTe(t){return t&&t.__esModule?t:{default:t}}var hTe={axis:Jt.default.oneOf(["both","x","y","none"]),className:Jt.default.string,children:Jt.default.element.isRequired,draggableOpts:Jt.default.shape({allowAnyClick:Jt.default.bool,cancel:Jt.default.string,children:Jt.default.node,disabled:Jt.default.bool,enableUserSelectHack:Jt.default.bool,offsetParent:Jt.default.node,grid:Jt.default.arrayOf(Jt.default.number),handle:Jt.default.string,nodeRef:Jt.default.object,onStart:Jt.default.func,onDrag:Jt.default.func,onStop:Jt.default.func,onMouseDown:Jt.default.func,scale:Jt.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var s;return(s=Jt.default.number).isRequired.apply(s,n)}return Jt.default.number.apply(Jt.default,n)},handle:Jt.default.oneOfType([Jt.default.node,Jt.default.func]),handleSize:Jt.default.arrayOf(Jt.default.number),lockAspectRatio:Jt.default.bool,maxConstraints:Jt.default.arrayOf(Jt.default.number),minConstraints:Jt.default.arrayOf(Jt.default.number),onResizeStop:Jt.default.func,onResizeStart:Jt.default.func,onResize:Jt.default.func,resizeHandles:Jt.default.arrayOf(Jt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Jt.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var s;return(s=Jt.default.number).isRequired.apply(s,n)}return Jt.default.number.apply(Jt.default,n)}};pb.resizableProps=hTe;fb.__esModule=!0;fb.default=void 0;var o0=vTe(P),fTe=uX,pTe=P3,gTe=pb,mTe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function dX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(dX=function(i){return i?n:e})(t)}function vTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=dX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function tM(){return tM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tM.apply(this,arguments)}function yTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(n),!0).forEach(function(r){bTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bTe(t,e,n){return e=_Te(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Te(t){var e=xTe(t,"string");return typeof e=="symbol"?e:String(e)}function xTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wTe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,nM(t,e)}function nM(t,e){return nM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nM(t,e)}var R3=function(t){wTe(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,s){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[i,s];if(c){var u=this.props.width/this.props.height,d=i-this.props.width,h=s-this.props.height;Math.abs(d)>Math.abs(h*u)?s=i/u:i=s*u}var f=i,p=s,m=this.slack||[0,0],b=m[0],y=m[1];return i+=b,s+=y,a&&(i=Math.max(a[0],i),s=Math.max(a[1],s)),l&&(i=Math.min(l[0],i),s=Math.min(l[1],s)),this.slack=[b+(f-i),y+(p-s)],[i,s]},n.resizeHandler=function(i,s){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;i==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&s!=="n"&&s!=="s",f=(o.props.axis==="both"||o.props.axis==="y")&&s!=="e"&&s!=="w";if(!(!h&&!f)){var p=s[0],m=s[s.length-1],b=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(m==="w"){var y=b.left-o.lastHandleRect.left;u+=y}if(p==="n"){var x=b.top-o.lastHandleRect.top;d+=x}}o.lastHandleRect=b,m==="w"&&(u=-u),p==="n"&&(d=-d);var _=o.props.width+(h?u/o.props.transformScale:0),w=o.props.height+(f?d/o.props.transformScale:0),E=o.runConstraints(_,w);_=E[0],w=E[1];var S=_!==o.props.width||w!==o.props.height,A=typeof o.props[i]=="function"?o.props[i]:null,k=i==="onResize"&&!S;A&&!k&&(a.persist==null||a.persist(),A(a,{node:c,size:{width:_,height:w},handle:s})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,s){var o=this.props.handle;if(!o)return o0.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:s});if(typeof o=="function")return o(i,s);var a=typeof o.type=="string",l=EP({ref:s},a?{}:{handleAxis:i});return o0.cloneElement(o,l)},n.render=function(){var i=this,s=this.props,o=s.children,a=s.className,l=s.draggableOpts;s.width,s.height,s.handle,s.handleSize,s.lockAspectRatio,s.axis,s.minConstraints,s.maxConstraints,s.onResize,s.onResizeStop,s.onResizeStart;var c=s.resizeHandles;s.transformScale;var u=yTe(s,mTe);return(0,pTe.cloneElement)(o,EP(EP({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var h,f=(h=i.handleRefs[d])!=null?h:i.handleRefs[d]=o0.createRef();return o0.createElement(fTe.DraggableCore,tM({},l,{nodeRef:f,key:"resizableHandle-"+d,onStop:i.resizeHandler("onResizeStop",d),onStart:i.resizeHandler("onResizeStart",d),onDrag:i.resizeHandler("onResize",d)}),i.renderResizeHandle(d,f))}))}))},e}(o0.Component);fb.default=R3;R3.propTypes=gTe.resizableProps;R3.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var AS={};AS.__esModule=!0;AS.default=void 0;var TP=ATe(P),ETe=hX($c),TTe=hX(fb),STe=pb,CTe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function hX(t){return t&&t.__esModule?t:{default:t}}function fX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(fX=function(i){return i?n:e})(t)}function ATe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=fX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function rM(){return rM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rM.apply(this,arguments)}function EU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(n),!0).forEach(function(r){PTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PTe(t,e,n){return e=RTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RTe(t){var e=ITe(t,"string");return typeof e=="symbol"?e:String(e)}function ITe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LTe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,iM(t,e)}function iM(t,e){return iM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iM(t,e)}var pX=function(t){LTe(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(a,l){var c=l.size;r.props.onResize?(a.persist==null||a.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(a,l)})):r.setState(c)},r}e.getDerivedStateFromProps=function(i,s){return s.propsWidth!==i.width||s.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,s=i.handle,o=i.handleSize;i.onResize;var a=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,u=i.minConstraints,d=i.maxConstraints,h=i.lockAspectRatio,f=i.axis;i.width,i.height;var p=i.resizeHandles,m=i.style,b=i.transformScale,y=MTe(i,CTe);return TP.createElement(TTe.default,{axis:f,draggableOpts:c,handle:s,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:p,transformScale:b,width:this.state.width},TP.createElement("div",rM({},y,{style:lE(lE({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(TP.Component);AS.default=pX;pX.propTypes=lE(lE({},STe.resizableProps),{},{children:ETe.default.element});CS.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};CS.exports.Resizable=fb.default;CS.exports.ResizableBox=AS.default;var kTe=CS.exports,Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.resizeHandleType=Ec.resizeHandleAxesType=Ec.default=void 0;var tn=gX($c),OTe=gX(P);function gX(t){return t&&t.__esModule?t:{default:t}}const NTe=Ec.resizeHandleAxesType=tn.default.arrayOf(tn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),DTe=Ec.resizeHandleType=tn.default.oneOfType([tn.default.node,tn.default.func]);Ec.default={className:tn.default.string,style:tn.default.object,width:tn.default.number,autoSize:tn.default.bool,cols:tn.default.number,draggableCancel:tn.default.string,draggableHandle:tn.default.string,verticalCompact:function(t){t.verticalCompact},compactType:tn.default.oneOf(["vertical","horizontal"]),layout:function(t){var e=t.layout;e!==void 0&&on.validateLayout(e,"layout")},margin:tn.default.arrayOf(tn.default.number),containerPadding:tn.default.arrayOf(tn.default.number),rowHeight:tn.default.number,maxRows:tn.default.number,isBounded:tn.default.bool,isDraggable:tn.default.bool,isResizable:tn.default.bool,allowOverlap:tn.default.bool,preventCollision:tn.default.bool,useCSSTransforms:tn.default.bool,transformScale:tn.default.number,isDroppable:tn.default.bool,resizeHandles:NTe,resizeHandle:DTe,onLayoutChange:tn.default.func,onDragStart:tn.default.func,onDrag:tn.default.func,onDragStop:tn.default.func,onResizeStart:tn.default.func,onResize:tn.default.func,onResizeStop:tn.default.func,onDrop:tn.default.func,droppingItem:tn.default.shape({i:tn.default.string.isRequired,w:tn.default.number.isRequired,h:tn.default.number.isRequired}),children:function(t,e){const n=t[e],r={};OTe.default.Children.forEach(n,function(i){if((i==null?void 0:i.key)!=null){if(r[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');r[i.key]=!0}})},innerRef:tn.default.any};Object.defineProperty(xS,"__esModule",{value:!0});xS.default=void 0;var Hf=I3(P),Cn=I3($c),BTe=uX,FTe=kTe,Vf=on,Ri=Hl,TU=Ec,zTe=I3(g3);function I3(t){return t&&t.__esModule?t:{default:t}}function bl(t,e,n){return e=UTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UTe(t){var e=$Te(t,"string");return typeof e=="symbol"?e:String(e)}function $Te(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class M3 extends Hf.default.Component{constructor(){super(...arguments),bl(this,"state",{resizing:null,dragging:null,className:""}),bl(this,"elementRef",Hf.default.createRef()),bl(this,"onDragStart",(e,n)=>{let{node:r}=n;const{onDragStart:i,transformScale:s}=this.props;if(!i)return;const o={top:0,left:0},{offsetParent:a}=r;if(!a)return;const l=a.getBoundingClientRect(),c=r.getBoundingClientRect(),u=c.left/s,d=l.left/s,h=c.top/s,f=l.top/s;o.left=u-d+a.scrollLeft,o.top=h-f+a.scrollTop,this.setState({dragging:o});const{x:p,y:m}=(0,Ri.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return i.call(this,this.props.i,p,m,{e,node:r,newPosition:o})}),bl(this,"onDrag",(e,n)=>{let{node:r,deltaX:i,deltaY:s}=n;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let a=this.state.dragging.top+s,l=this.state.dragging.left+i;const{isBounded:c,i:u,w:d,h,containerWidth:f}=this.props,p=this.getPositionParams();if(c){const{offsetParent:_}=r;if(_){const{margin:w,rowHeight:E,containerPadding:S}=this.props,A=_.clientHeight-(0,Ri.calcGridItemWHPx)(h,E,w[1]);a=(0,Ri.clamp)(a-S[1],0,A);const k=(0,Ri.calcGridColWidth)(p),M=f-(0,Ri.calcGridItemWHPx)(d,k,w[0]);l=(0,Ri.clamp)(l-S[0],0,M)}}const m={top:a,left:l};this.setState({dragging:m});const{containerPadding:b}=this.props,{x:y,y:x}=(0,Ri.calcXY)(p,a-b[1],l-b[0],d,h);return o.call(this,u,y,x,{e,node:r,newPosition:m})}),bl(this,"onDragStop",(e,n)=>{let{node:r}=n;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:s,h:o,i:a,containerPadding:l}=this.props,{left:c,top:u}=this.state.dragging,d={top:u,left:c};this.setState({dragging:null});const{x:h,y:f}=(0,Ri.calcXY)(this.getPositionParams(),u-l[1],c-l[0],s,o);return i.call(this,a,h,f,{e,node:r,newPosition:d})}),bl(this,"onResizeStop",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStop")),bl(this,"onResizeStart",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStart")),bl(this,"onResize",(e,n,r)=>this.onResizeHandler(e,n,r,"onResize"))}shouldComponentUpdate(e,n){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,Ri.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,Ri.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,n);return!(0,Vf.fastPositionEqual)(r,i)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:n}=this.props;if(!n)return;const r=this.elementRef.current;if(!r)return;const i=e.droppingPosition||{left:0,top:0},{dragging:s}=this.state,o=s&&n.left!==i.left||n.top!==i.top;if(!s)this.onDragStart(n.e,{node:r,deltaX:n.left,deltaY:n.top});else if(o){const a=n.left-s.left,l=n.top-s.top;this.onDrag(n.e,{node:r,deltaX:a,deltaY:l})}}getPositionParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:n,containerWidth:r,useCSSTransforms:i}=this.props;let s;return i?s=(0,Vf.setTransform)(e):(s=(0,Vf.setTopLeft)(e),n&&(s.left=(0,Vf.perc)(e.left/r),s.width=(0,Vf.perc)(e.width/r))),s}mixinDraggable(e,n){return Hf.default.createElement(BTe.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,n){return(r,i)=>n(r,i,e)}mixinResizable(e,n,r){const{cols:i,minW:s,minH:o,maxW:a,maxH:l,transformScale:c,resizeHandles:u,resizeHandle:d}=this.props,h=this.getPositionParams(),f=(0,Ri.calcGridItemPosition)(h,0,0,i,0).width,p=(0,Ri.calcGridItemPosition)(h,0,0,s,o),m=(0,Ri.calcGridItemPosition)(h,0,0,a,l),b=[p.width,p.height],y=[Math.min(m.width,f),Math.min(m.height,1/0)];return Hf.default.createElement(FTe.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:b,maxConstraints:y,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:c,resizeHandles:u,handle:d},e)}onResizeHandler(e,n,r,i){let{node:s,size:o,handle:a}=n;const l=this.props[i];if(!l)return;const{x:c,y:u,i:d,maxH:h,minH:f,containerWidth:p}=this.props,{minW:m,maxW:b}=this.props;let y=o;s&&(y=(0,Vf.resizeItemInDirection)(a,r,o,p),this.setState({resizing:i==="onResizeStop"?null:y}));let{w:x,h:_}=(0,Ri.calcWH)(this.getPositionParams(),y.width,y.height,c,u,a);x=(0,Ri.clamp)(x,Math.max(m,1),b),_=(0,Ri.clamp)(_,f,h),l.call(this,d,x,_,{e,node:s,size:y,handle:a})}render(){const{x:e,y:n,w:r,h:i,isDraggable:s,isResizable:o,droppingPosition:a,useCSSTransforms:l}=this.props,c=(0,Ri.calcGridItemPosition)(this.getPositionParams(),e,n,r,i,this.state),u=Hf.default.Children.only(this.props.children);let d=Hf.default.cloneElement(u,{ref:this.elementRef,className:(0,zTe.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":s,"react-draggable-dragging":!!this.state.dragging,dropping:!!a,cssTransforms:l}),style:{...this.props.style,...u.props.style,...this.createStyle(c)}});return d=this.mixinResizable(d,c,o),d=this.mixinDraggable(d,s),d}}xS.default=M3;bl(M3,"propTypes",{children:Cn.default.element,cols:Cn.default.number.isRequired,containerWidth:Cn.default.number.isRequired,rowHeight:Cn.default.number.isRequired,margin:Cn.default.array.isRequired,maxRows:Cn.default.number.isRequired,containerPadding:Cn.default.array.isRequired,x:Cn.default.number.isRequired,y:Cn.default.number.isRequired,w:Cn.default.number.isRequired,h:Cn.default.number.isRequired,minW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minWidth not Number");if(n>t.w||n>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxWidth not Number");if(n<t.w||n<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minHeight not Number");if(n>t.h||n>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxHeight not Number");if(n<t.h||n<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:Cn.default.string.isRequired,resizeHandles:TU.resizeHandleAxesType,resizeHandle:TU.resizeHandleType,onDragStop:Cn.default.func,onDragStart:Cn.default.func,onDrag:Cn.default.func,onResizeStop:Cn.default.func,onResizeStart:Cn.default.func,onResize:Cn.default.func,isDraggable:Cn.default.bool.isRequired,isResizable:Cn.default.bool.isRequired,isBounded:Cn.default.bool.isRequired,static:Cn.default.bool,useCSSTransforms:Cn.default.bool.isRequired,transformScale:Cn.default.number,className:Cn.default.string,handle:Cn.default.string,cancel:Cn.default.string,droppingPosition:Cn.default.shape({e:Cn.default.object.isRequired,left:Cn.default.number.isRequired,top:Cn.default.number.isRequired})});bl(M3,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(hb,"__esModule",{value:!0});hb.default=void 0;var Fd=VTe(P),SP=p3,jTe=L3(g3),Xt=on,GTe=Hl,SU=L3(xS),HTe=L3(Ec);function L3(t){return t&&t.__esModule?t:{default:t}}function mX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(mX=function(r){return r?n:e})(t)}function VTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=mX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Xi(t,e,n){return e=WTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WTe(t){var e=XTe(t,"string");return typeof e=="symbol"?e:String(e)}function XTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const CU="react-grid-layout";let vX=!1;try{vX=/firefox/i.test(navigator.userAgent)}catch{}class PS extends Fd.Component{constructor(){super(...arguments),Xi(this,"state",{activeDrag:null,layout:(0,Xt.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Xt.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Xi(this,"dragEnterCounter",0),Xi(this,"onDragStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Xt.getLayoutItem)(a,e);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,Xt.cloneLayoutItem)(l),oldLayout:a,activeDrag:c}),this.props.onDragStart(a,l,l,null,s,o)}),Xi(this,"onDrag",(e,n,r,i)=>{let{e:s,node:o}=i;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:u,preventCollision:d}=this.props,h=(0,Xt.getLayoutItem)(l,e);if(!h)return;const f={w:h.w,h:h.h,x:h.x,y:h.y,placeholder:!0,i:e};l=(0,Xt.moveElement)(l,h,n,r,!0,d,(0,Xt.compactType)(this.props),c,u),this.props.onDrag(l,a,h,f,s,o),this.setState({layout:u?l:(0,Xt.compact)(l,(0,Xt.compactType)(this.props),c),activeDrag:f})}),Xi(this,"onDragStop",(e,n,r,i)=>{let{e:s,node:o}=i;if(!this.state.activeDrag)return;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:u,allowOverlap:d}=this.props,h=(0,Xt.getLayoutItem)(l,e);if(!h)return;l=(0,Xt.moveElement)(l,h,n,r,!0,u,(0,Xt.compactType)(this.props),c,d);const p=d?l:(0,Xt.compact)(l,(0,Xt.compactType)(this.props),c);this.props.onDragStop(p,a,h,null,s,o);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:p,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,m)}),Xi(this,"onResizeStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,Xt.getLayoutItem)(a,e);l&&(this.setState({oldResizeItem:(0,Xt.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(a,l,l,null,s,o))}),Xi(this,"onResize",(e,n,r,i)=>{let{e:s,node:o,size:a,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:u}=this.state,{cols:d,preventCollision:h,allowOverlap:f}=this.props;let p=!1,m,b,y;const[x,_]=(0,Xt.withLayoutItem)(u,e,E=>{let S;return b=E.x,y=E.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(b=E.x+(E.w-n),n=E.x!==b&&b<0?E.w:n,b=b<0?0:b),["ne","n","nw"].indexOf(l)!==-1&&(y=E.y+(E.h-r),r=E.y!==y&&y<0?E.h:r,y=y<0?0:y),p=!0),h&&!f&&(S=(0,Xt.getAllCollisions)(u,{...E,w:n,h:r,x:b,y}).filter(k=>k.i!==E.i).length>0,S&&(y=E.y,r=E.h,b=E.x,n=E.w,p=!1)),E.w=n,E.h=r,E});if(!_)return;m=x,p&&(m=(0,Xt.moveElement)(x,_,b,y,!0,this.props.preventCollision,(0,Xt.compactType)(this.props),d,f));const w={w:_.w,h:_.h,x:_.x,y:_.y,static:!0,i:e};this.props.onResize(m,c,_,w,s,o),this.setState({layout:f?m:(0,Xt.compact)(m,(0,Xt.compactType)(this.props),d),activeDrag:w})}),Xi(this,"onResizeStop",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a,oldResizeItem:l}=this.state,{cols:c,allowOverlap:u}=this.props,d=(0,Xt.getLayoutItem)(a,e),h=u?a:(0,Xt.compact)(a,(0,Xt.compactType)(this.props),c);this.props.onResizeStop(h,l,d,null,s,o);const{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:h,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(h,f)}),Xi(this,"onDragOver",e=>{var x;if(e.preventDefault(),e.stopPropagation(),vX&&!((x=e.nativeEvent.target)!=null&&x.classList.contains(CU)))return!1;const{droppingItem:n,onDropDragOver:r,margin:i,cols:s,rowHeight:o,maxRows:a,width:l,containerPadding:c,transformScale:u}=this.props,d=r==null?void 0:r(e);if(d===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const h={...n,...d},{layout:f}=this.state,p=e.currentTarget.getBoundingClientRect(),m=e.clientX-p.left,b=e.clientY-p.top,y={left:m/u,top:b/u,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:_,top:w}=this.state.droppingPosition;(_!=m||w!=b)&&this.setState({droppingPosition:y})}}else{const _={cols:s,margin:i,maxRows:a,rowHeight:o,containerWidth:l,containerPadding:c||i},w=(0,GTe.calcXY)(_,b,m,h.w,h.h);this.setState({droppingDOMNode:Fd.createElement("div",{key:h.i}),droppingPosition:y,layout:[...f,{...h,x:w.x,y:w.y,static:!1,isDraggable:!0}]})}}),Xi(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:n}=this.props,{layout:r}=this.state,i=(0,Xt.compact)(r.filter(s=>s.i!==e.i),(0,Xt.compactType)(this.props),n,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Xi(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Xi(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),Xi(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:n}=this.props,{layout:r}=this.state,i=r.find(s=>s.i===n.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,i,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let r;return n.activeDrag?null:(!(0,SP.deepEqual)(e.layout,n.propsLayout)||e.compactType!==n.compactType?r=e.layout:(0,Xt.childrenEqual)(e.children,n.children)||(r=n.layout),r?{layout:(0,Xt.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,Xt.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,Xt.fastRGLPropsEqual)(this.props,e,SP.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,n){if(!this.state.activeDrag){const r=this.state.layout,i=n.layout;this.onLayoutMaybeChanged(r,i)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,Xt.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+n*2+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,SP.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:n,cols:r,margin:i,containerPadding:s,rowHeight:o,maxRows:a,useCSSTransforms:l,transformScale:c}=this.props;return Fd.createElement(SU.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:n,cols:r,margin:i,containerPadding:s||i,maxRows:a,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Fd.createElement("div",null))}processGridItem(e,n){if(!e||!e.key)return;const r=(0,Xt.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:i,cols:s,margin:o,containerPadding:a,rowHeight:l,maxRows:c,isDraggable:u,isResizable:d,isBounded:h,useCSSTransforms:f,transformScale:p,draggableCancel:m,draggableHandle:b,resizeHandles:y,resizeHandle:x}=this.props,{mounted:_,droppingPosition:w}=this.state,E=typeof r.isDraggable=="boolean"?r.isDraggable:!r.static&&u,S=typeof r.isResizable=="boolean"?r.isResizable:!r.static&&d,A=r.resizeHandles||y,k=E&&h&&r.isBounded!==!1;return Fd.createElement(SU.default,{containerWidth:i,cols:s,margin:o,containerPadding:a||o,maxRows:c,rowHeight:l,cancel:m,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:E,isResizable:S,isBounded:k,useCSSTransforms:f&&_,usePercentages:!_,transformScale:p,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:n?w:void 0,resizeHandles:A,resizeHandle:x},e)}render(){const{className:e,style:n,isDroppable:r,innerRef:i}=this.props,s=(0,jTe.default)(CU,e),o={height:this.containerHeight(),...n};return Fd.createElement("div",{ref:i,className:s,style:o,onDrop:r?this.onDrop:Xt.noop,onDragLeave:r?this.onDragLeave:Xt.noop,onDragEnter:r?this.onDragEnter:Xt.noop,onDragOver:r?this.onDragOver:Xt.noop},Fd.Children.map(this.props.children,a=>this.processGridItem(a)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}hb.default=PS;Xi(PS,"displayName","ReactGridLayout");Xi(PS,"propTypes",HTe.default);Xi(PS,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Xt.noop,onDragStart:Xt.noop,onDrag:Xt.noop,onDragStop:Xt.noop,onResizeStart:Xt.noop,onResize:Xt.noop,onResizeStop:Xt.noop,onDrop:Xt.noop,onDropDragOver:Xt.noop});var RS={},cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.findOrGenerateResponsiveLayout=KTe;cf.getBreakpointFromWidth=YTe;cf.getColsFromBreakpoint=qTe;cf.sortBreakpoints=k3;var b_=on;function YTe(t,e){const n=k3(t);let r=n[0];for(let i=1,s=n.length;i<s;i++){const o=n[i];e>t[o]&&(r=o)}return r}function qTe(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function KTe(t,e,n,r,i,s){if(t[n])return(0,b_.cloneLayout)(t[n]);let o=t[r];const a=k3(e),l=a.slice(a.indexOf(n));for(let c=0,u=l.length;c<u;c++){const d=l[c];if(t[d]){o=t[d];break}}return o=(0,b_.cloneLayout)(o||[]),(0,b_.compact)((0,b_.correctBounds)(o,{cols:i}),s,i)}function k3(t){return Object.keys(t).sort(function(n,r){return t[n]-t[r]})}Object.defineProperty(RS,"__esModule",{value:!0});RS.default=void 0;var AU=QTe(P),ks=yX($c),CP=p3,Zp=on,zd=cf,ZTe=yX(hb);function yX(t){return t&&t.__esModule?t:{default:t}}function bX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(bX=function(r){return r?n:e})(t)}function QTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=bX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function sM(){return sM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sM.apply(this,arguments)}function cE(t,e,n){return e=JTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JTe(t){var e=eSe(t,"string");return typeof e=="symbol"?e:String(e)}function eSe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const PU=t=>Object.prototype.toString.call(t);function __(t,e){return t==null?null:Array.isArray(t)?t:t[e]}class O3 extends AU.Component{constructor(){super(...arguments),cE(this,"state",this.generateInitialState()),cE(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){const{width:e,breakpoints:n,layouts:r,cols:i}=this.props,s=(0,zd.getBreakpointFromWidth)(n,e),o=(0,zd.getColsFromBreakpoint)(s,i),a=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,zd.findOrGenerateResponsiveLayout)(r,n,s,s,o,a),breakpoint:s,cols:o}}static getDerivedStateFromProps(e,n){if(!(0,CP.deepEqual)(e.layouts,n.layouts)){const{breakpoint:r,cols:i}=n;return{layout:(0,zd.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,i,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,CP.deepEqual)(this.props.breakpoints,e.breakpoints)||!(0,CP.deepEqual)(this.props.cols,e.cols))&&this.onWidthChange(e)}onWidthChange(e){const{breakpoints:n,cols:r,layouts:i,compactType:s}=this.props,o=this.props.breakpoint||(0,zd.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),a=this.state.breakpoint,l=(0,zd.getColsFromBreakpoint)(o,r),c={...i};if(a!==o||e.breakpoints!==n||e.cols!==r){a in c||(c[a]=(0,Zp.cloneLayout)(this.state.layout));let h=(0,zd.findOrGenerateResponsiveLayout)(c,n,o,a,l,s);h=(0,Zp.synchronizeLayoutWithChildren)(h,this.props.children,l,s,this.props.allowOverlap),c[o]=h,this.props.onLayoutChange(h,c),this.props.onBreakpointChange(o,l),this.setState({breakpoint:o,layout:h,cols:l})}const u=__(this.props.margin,o),d=__(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,l,d)}render(){const{breakpoint:e,breakpoints:n,cols:r,layouts:i,margin:s,containerPadding:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,...u}=this.props;return AU.createElement(ZTe.default,sM({},u,{margin:__(s,this.state.breakpoint),containerPadding:__(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}RS.default=O3;cE(O3,"propTypes",{breakpoint:ks.default.string,breakpoints:ks.default.object,allowOverlap:ks.default.bool,cols:ks.default.object,margin:ks.default.oneOfType([ks.default.array,ks.default.object]),containerPadding:ks.default.oneOfType([ks.default.array,ks.default.object]),layouts(t,e){if(PU(t[e])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+PU(t[e]));Object.keys(t[e]).forEach(n=>{if(!(n in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Zp.validateLayout)(t.layouts[n],"layouts."+n)})},width:ks.default.number.isRequired,onBreakpointChange:ks.default.func,onLayoutChange:ks.default.func,onWidthChange:ks.default.func});cE(O3,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:Zp.noop,onLayoutChange:Zp.noop,onWidthChange:Zp.noop});var N3={},_X=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];n.call(r,o[1],o[0])}},e}()}(),oM=typeof window<"u"&&typeof document<"u"&&window.document===document,uE=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),tSe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(uE):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),nSe=2;function rSe(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&a()}function o(){tSe(s)}function a(){var l=Date.now();if(n){if(l-i<nSe)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return a}var iSe=20,sSe=["top","right","bottom","left","width","height","size","weight"],oSe=typeof MutationObserver<"u",aSe=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=rSe(this.refresh.bind(this),iSe)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!oM||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),oSe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!oM||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=sSe.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),xX=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Ag=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||uE},wX=IS(0,0,0,0);function dE(t){return parseFloat(t)||0}function RU(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var s=t["border-"+i+"-width"];return r+dE(s)},0)}function lSe(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var s=i[r],o=t["padding-"+s];n[s]=dE(o)}return n}function cSe(t){var e=t.getBBox();return IS(0,0,e.width,e.height)}function uSe(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return wX;var r=Ag(t).getComputedStyle(t),i=lSe(r),s=i.left+i.right,o=i.top+i.bottom,a=dE(r.width),l=dE(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=RU(r,"left","right")+s),Math.round(l+o)!==n&&(l-=RU(r,"top","bottom")+o)),!hSe(t)){var c=Math.round(a+s)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return IS(i.left,i.top,a,l)}var dSe=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Ag(t).SVGGraphicsElement}:function(t){return t instanceof Ag(t).SVGElement&&typeof t.getBBox=="function"}}();function hSe(t){return t===Ag(t).document.documentElement}function fSe(t){return oM?dSe(t)?cSe(t):uSe(t):wX}function pSe(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return xX(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function IS(t,e,n,r){return{x:t,y:e,width:n,height:r}}var gSe=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=IS(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=fSe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),mSe=function(){function t(e,n){var r=pSe(n);xX(this,{target:e,contentRect:r})}return t}(),vSe=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new _X,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ag(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new gSe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Ag(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new mSe(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),EX=typeof WeakMap<"u"?new WeakMap:new _X,TX=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=aSe.getInstance(),r=new vSe(e,n,this);EX.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){TX.prototype[t]=function(){var e;return(e=EX.get(this))[t].apply(e,arguments)}});var ySe=function(){return typeof uE.ResizeObserver<"u"?uE.ResizeObserver:TX}();const bSe=Object.freeze(Object.defineProperty({__proto__:null,default:ySe},Symbol.toStringTag,{value:"Module"})),_Se=In(bSe);Object.defineProperty(N3,"__esModule",{value:!0});N3.default=PSe;var x_=TSe(P),xSe=D3($c),wSe=D3(_Se),ESe=D3(g3);function D3(t){return t&&t.__esModule?t:{default:t}}function SX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(SX=function(r){return r?n:e})(t)}function TSe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=SX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function aM(){return aM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aM.apply(this,arguments)}function Wf(t,e,n){return e=SSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SSe(t){var e=CSe(t,"string");return typeof e=="symbol"?e:String(e)}function CSe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ASe="react-grid-layout";function PSe(t){var e;return e=class extends x_.Component{constructor(){super(...arguments),Wf(this,"state",{width:1280}),Wf(this,"elementRef",x_.createRef()),Wf(this,"mounted",!1),Wf(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new wSe.default(i=>{if(this.elementRef.current instanceof HTMLElement){const o=i[0].contentRect.width;this.setState({width:o})}});const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.observe(r)}componentWillUnmount(){this.mounted=!1;const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.unobserve(r),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:r,...i}=this.props;return r&&!this.mounted?x_.createElement("div",{className:(0,ESe.default)(this.props.className,ASe),style:this.props.style,ref:this.elementRef}):x_.createElement(t,aM({innerRef:this.elementRef},i,this.state))}},Wf(e,"defaultProps",{measureBeforeMount:!1}),Wf(e,"propTypes",{measureBeforeMount:xSe.default.bool}),e}(function(t){t.exports=hb.default,t.exports.utils=on,t.exports.calculateUtils=Hl,t.exports.Responsive=RS.default,t.exports.Responsive.utils=cf,t.exports.WidthProvider=N3.default})($7);var RSe=$7.exports;function IU(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}function B3(){const[t,e]=P.useState(IU());return P.useEffect(()=>{function n(){e(IU())}return window.addEventListener("load",n),window.addEventListener("resize",n),()=>{window.removeEventListener("load",n),window.removeEventListener("resize",n)}},[]),t}const CX=At(Vt)`
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  white-space: nowrap;
`,ISe=At.div`
  width: 6px;
  height: 32px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  margin-right: 2px;
`,MSe=P.forwardRef((t,e)=>{const[n,r]=P.useState(null),i=P.useCallback(a=>{r(a),t.onMouseDown&&t.onMouseDown(a)},[]),s=P.useCallback(a=>{n&&n.clientX===a.clientX&&n.clientY===a.clientY&&!t.disabled?t.onClick():t.onMouseUp&&t.onMouseUp(a),r(null)},[n]),o=P.useCallback(a=>{t.onTouchEnd&&t.onTouchEnd(a)},[]);return $(Vt,{id:t.id,style:{...t.style,width:40,left:-8},onMouseDown:i,onTouchEnd:o,onMouseUp:s,ref:e,children:Be(CX,{children:[$(ISe,{className:"draggable",style:{userSelect:"none",paddingTop:5,width:"8px",height:"32px",cursor:"move"},children:$(En,{style:{color:"blue"}})}),t.disabled?$(bs,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},disabled:!0,children:$(Vt,{style:{marginTop:"4px"},children:t.children})}):$(bg,{title:t.tooltip,placement:"right",children:$(bs,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},children:$(Vt,{style:{marginTop:"4px"},children:t.children})})})]})},t.key)}),LSe=At(SW)`
  background-color: rgba(255, 255, 255, 0.95);
`,AP=At(bs)`
  padding: 2px;
  height: 18px;
  margin: 7px 4px 3px 0;
  border-radius: 16px;
  border: 1px solid rgba(0, 0, 0, 0.2);

  .MuiSvgIcon-root {
    width: 12px;
    height: 12px;
  }
`,kSe=At(Vt)`
  margin-top: 4px;
`,OSe=P.forwardRef(({id:t,key:e,title:n,icon:r,rowHeight:i,subheader:s,children:o,style:a,onMouseDown:l,onMouseUp:c,onTouchEnd:u,setToFront:d,onClose:h,maximized:f,onMaximize:p,onDemaximize:m,titleBarMode:b},y)=>{const x=()=>{h&&h()},_=()=>{p&&p()},w=()=>{m&&m()},S=26*(b==="win"?2:0);return Be(LSe,{id:t,ref:y,style:{...a,borderRadius:"8px"},onMouseDown:A=>{const k=document.getElementById(t).getBoundingClientRect();S<k.right-A.clientX&&A.clientY-k.top<26&&(d(),l&&l(A))},onMouseUp:c,onTouchEnd:u,children:[$(kde,{title:Be(Vt,{style:{userSelect:"none",position:"absolute",top:0,left:0,width:"100%",height:i+"px",display:"flex",flexDirection:"row",marginLeft:"8px"},children:[b=="mac"&&Be(lo,{children:[$(AP,{size:"small",onClick:()=>{console.log("close")},children:$(ry,{})}),$(AP,{size:"small",onClick:()=>{console.log("remove")},children:$(Cye,{})}),$(AP,{size:"small",onClick:()=>{console.log("open in full")},children:$(tz,{})})]}),Be(CX,{className:"draggable",children:[$(kSe,{children:r}),$(En,{style:{marginLeft:"4px",marginTop:"4px"},children:n})]}),b=="win"&&Be(lo,{children:[f?$(bs,{size:"small",style:{margin:0,padding:0},"aria-label":"demaximize",title:"demaximize",onClick:w,children:$(cye,{style:{width:"18px",height:"18px"}})}):$(bs,{size:"small",style:{margin:0,padding:0},"aria-label":"maximize",title:"maximize",onClick:_,children:$(tz,{style:{width:"18px",height:"18px"}})}),$(bs,{size:"small","aria-label":"close",style:{marginRight:"6px"},onClick:x,title:"close",children:$(ry,{})})]})]}),style:{cursor:"move",height:"16px",backgroundColor:"rgba(255,255,255,0.90)",padding:"8px",borderBottom:"1px solid rgba(0,0,0,0.1)"},titleTypographyProps:{fontSize:"16px"}}),o,$(yde,{})]},e)}),Qn={BackgroundPanel:"BackgroundPanel",FloatingButton:"FloatingButton",FloatingPanel:"FloatingPanel"},lM=32,PP=32,NSe=At(TO)`
  padding: 8px;
  margin: 0;
  overflow: hidden;
`,DSe=At(RSe.Responsive)`
  .react-grid-item.react-grid-placeholder {
    background: grey !important;
  }
`,BSe=t=>{const e=Ts(),{width:n,height:r}=B3(),i=Math.floor((r-10)/PP-3),[s,o]=P.useState(""),[a,l]=P.useState([...t.initialLayouts.map(I=>({...I,y:t.resources[I.i].shown?I.y:I.y+i*2}))]),[c,u]=P.useState(null),[d,h]=P.useState(Pz(a.map(I=>{t.resources[I.i]||console.error("ERROR",I.i,t.resources);const B=t.resources[I.i].shown||!1,R=t.resources[I.i].type===Qn.FloatingButton?t.resources[I.i].enabled:!0;return[I.i,{shown:B,enabled:R}]}))),[f,p]=P.useState(null),m=(I,B)=>{const R=B.findIndex(F=>F.i===I);if(R<0)return B;const O=B[R],C=new Array(B.length);for(let F=0;F<R;F++)C[F]=B[F];for(let F=R;F<B.length-1;F++)C[F]=B[F+1];return C[B.length-1]=O,C},b=I=>{const B=I[I.length-1];u({...B});const R=[...I];return R[I.length-1]={...B,x:0,y:0,w:lM,h:Math.floor((r-10)/PP-3)},R},y=()=>{if(c){const I=[...a];I[a.length-1]=c,l(I),u(null)}},x=I=>{l(R=>R.map(O=>O.i!==I?O:{...O,y:O.y-i}));const B=t.resources[I].bindToButtonId;B&&h(R=>({...R,[I]:{...R[I],shown:!0},[B]:{...R[B],enabled:!1}}))},_=I=>{a.find(O=>O.i===I)&&l(O=>O.map(C=>C.i!==I?C:{...C,y:C.y+i}));const R=t.resources[I].bindToButtonId;R&&h(O=>({...O,[I]:{...O[I],shown:!1},[R]:{...O[R],enabled:!0}}))},w=I=>{o(I),l(B=>m(I,B))},E=I=>{o(I),l(B=>b(m(I,B)))},S=(I,B,R,O,C,F)=>{const q=m(B.i,I);l(q)},A=(I,B,R,O,C,F)=>{const q=m(B.i,I);l(q)},k=I=>{if(I.length===0)return;const B=m(s,I);l(B)},M=(I,B,R)=>{var O;if(!B)return null;switch(B.type){case"FloatingButton":{const C=B;return $(MSe,{id:I,tooltip:B.tooltip,onClick:()=>{C.bindToPanelId?(x(C.bindToPanelId),w(C.bindToPanelId)):C.onClick?C.onClick():C.navigateTo&&e(C.navigateTo)},disabled:!((O=d[I])!=null&&O.enabled),children:B.icon},I)}case"FloatingPanel":return $(OSe,{id:I,title:B.title,icon:B.icon,setToFront:()=>w(I),rowHeight:B.rowHeight,titleBarMode:B.titleBarMode,onClose:()=>{_(B.id)},onMaximize:()=>{E(I)},onDemaximize:()=>{y()},maximized:(c==null?void 0:c.i)===I,children:$(NSe,{children:R})},I);case"BackgroundPanel":default:return $("div",{id:I},I)}};return P.useEffect(()=>{a.length>0&&Object.keys(t.resources).length>0&&p(Pz(a.map(I=>[I.i,M(I.i,t.resources[I.i],t.gridItemChildrenMap[I.i])])))},[a,t.resources,t.gridItemChildrenMap]),$(Vt,{style:{margin:0,padding:0,border:"none"},children:n===0||a.length===0||f==null?$(Vt,{sx:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",backgroundColor:"#ccc"},children:$(yg,{variant:"indeterminate",size:100})}):Be(DSe,{style:{backgroundColor:t.backgroundColor,margin:0,padding:0},compactType:"vertical",autoSize:!0,allowOverlap:!0,isResizable:!1,isBounded:!1,width:n,draggableHandle:".draggable",breakpoints:{lg:1140},cols:{lg:lM},rowHeight:PP,margin:[4,4],containerPadding:[8,2],layouts:{lg:a},onLayoutChange:k,onDragStop:A,onResizeStop:S,children:[$(Vt,{sx:{position:"absolute",top:"-2px",left:"-8px"},children:t.children},"BackgroundPanel"),a.filter(I=>I.i!=="BackgroundPanel").map((I,B)=>f[I.i])]})})};function FSe(t){return{layout:{i:"HomeButton",x:0,y:0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"HomeButton",type:Qn.FloatingButton,tooltip:"Home",icon:$(bye,{}),navigateTo:"/",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function MU(t){return{layout:{i:"ZoomInButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomInButton",type:Qn.FloatingButton,tooltip:"zoom in",icon:$(g9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function LU(t){return{layout:{i:"ZoomOutButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"ZoomOutButton",type:Qn.FloatingButton,tooltip:"zoom out",icon:$(kye,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function kU(t){return{layout:{i:"FitScreenButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.w)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"FitScreenButton",type:Qn.FloatingButton,tooltip:"fit to screen",icon:$(vye,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function zSe(t){return{layout:{i:"InputOutputButton",x:0,y:(t==null?void 0:t.y)??1,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InputOutputButton",type:Qn.FloatingButton,bindToPanelId:"InputOutputPanel",tooltip:"Open Input/Output Panel",icon:$(i9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function USe(t){return{layout:{i:"InputOutputPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??3,minW:5,minH:2,resizeHandles:Gc,isDraggable:!0,isResizable:!0},resource:{id:"InputOutputPanel",type:Qn.FloatingPanel,title:"Input/Output",icon:$(i9,{}),titleBarMode:"win",rowHeight:Xl,shown:t==null?void 0:t.shown,bindToButtonId:"InputOutputButton"}}}function $Se(t){return{layout:{i:"ChartPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??10,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"ChartPanel",type:Qn.FloatingPanel,title:"Chart",icon:$(e9,{}),titleBarMode:"win",rowHeight:Xl,shown:!0,bindToButtonId:"ChartButton"}}}function OU(t){return t.parameterSet.units==="degrees"}const jSe=({sessionState:t,setSessionState:e,uiState:n,setUIState:r,matrices:i,updateAndSetMatrices:s})=>{var I,B;const[o,a]=P.useState(null),l=P.useCallback((R,O)=>{requestAnimationFrame(()=>{const{locations:C,edges:F,locationSerialNumber:q}=Awe(R,t);e(G=>{G.locations=C,G.edges=F,G.parameterSet.numLocations=R,G.locationSerialNumber=q},O||!1,"removeBulkLocations"),s(C,F),r(G=>{G.selectedIndices=[]})})},[t==null?void 0:t.locations,t==null?void 0:t.edges,(I=t==null?void 0:t.parameterSet)==null?void 0:I.transportationCost]),c=P.useCallback(()=>{u(t,n)},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,t==null?void 0:t.locationSerialNumber]),u=P.useCallback((R,O)=>{requestAnimationFrame(()=>{const{locations:C,edges:F,locationSerialNumber:q,addedIndices:G}=F7(R,O.selectedIndices);e(j=>{j.locations=C,j.edges=F,j.parameterSet.numLocations=j.parameterSet.numLocations+1,j.locationSerialNumber=q},!0,"addLocation"),s(C,F),r(j=>{j.focusedIndices=[...O.selectedIndices],j.selectedIndices=[...G]})})},[s,r]),d=P.useCallback((R,O)=>{requestAnimationFrame(()=>{e(C=>{const{locations:F,edges:q,locationSerialNumber:G,addedIndices:j}=f3(t,n.selectedIndices,R);C.locations=F,C.edges=q,C.parameterSet.numLocations=R,C.locationSerialNumber=G,s(F,q),r(H=>{H.selectedIndices=[],H.focusedIndices=j})},O||!1,"addBulkLocations")})},[n,t,r,e]),h=P.useCallback((R,O,C)=>{if(!C)return[];const F=new Set(R.map(q=>{var G;return(G=t.locations[q])==null?void 0:G.id}));return O.filter(q=>!F.has(q.source)&&!F.has(q.target))},[t]),f=P.useCallback((R,O,C,F)=>{if(!F)return[];const q=new Set;function G(j,H){return j<H?`${j},${H}`:`${H},${j}`}for(let j=0;R!==O&&j<F.length;j++){const H=F[R][O];if(H===-1)break;q.add(G(t.locations[R].id,t.locations[H].id)),R=H}return C.filter((j,H)=>!q.has(G(j.source,j.target)))},[t]),p=P.useCallback(()=>{requestAnimationFrame(()=>{e(R=>{const O=[];for(let C=0;C<n.selectedIndices.length;C++)for(let F=C+1;F<n.selectedIndices.length;F++){const q=n.selectedIndices[C],G=t.locations[q],j=n.selectedIndices[F],H=t.locations[j];if(Mc(i.adjacencyMatrix[q][j])){const Z=Kh(G.point,H.point,OU(t)),X={source:G.id,target:H.id,distance:Z};O.push(X)}}R.edges=[...R.edges,...O],s(t.locations,t.edges)},!0,"addEdge")})},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,(B=t==null?void 0:t.parameterSet)==null?void 0:B.transportationCost,e,i==null?void 0:i.adjacencyMatrix,r]),m=P.useCallback(()=>{if(n.selectedIndices.length===2){const R=f(n.selectedIndices[0],n.selectedIndices[1],t.edges,i.predecessorMatrix);e(O=>{O.edges=R},!0,"removePath")}else{const R=h(n.selectedIndices,t.edges,i.predecessorMatrix);e(O=>{O.edges=R||[]},!0,"removeEdge")}},[n==null?void 0:n.selectedIndices,t==null?void 0:t.edges,i==null?void 0:i.predecessorMatrix]),b=P.useCallback(()=>{requestAnimationFrame(()=>{const R=h(n.selectedIndices,t.edges,i.predecessorMatrix)||[],O=(t.locations.length+n.selectedIndices.length)/t.locations.length,C=t.locations.filter((F,q)=>!n.selectedIndices.includes(q)).map(F=>({...F,manufactureShare:F.manufactureShare*O,agricultureShare:F.agricultureShare*O}));e(F=>{F.locations=C,F.edges=R,F.parameterSet.numLocations=C.length},!0,"removeLocation"),s(C,R),r(F=>{F.selectedIndices=[]})})},[]),y=P.useCallback((R,O,C)=>{a({x:R,y:O}),r(F=>{F.draggingIndex=C})},[a,r]),x=P.useCallback((R,O,C)=>{o===null||Math.abs(o.x-R)<=1&&Math.abs(o.y-O)<=1||requestAnimationFrame(()=>{r(F=>{F.draggingIndex=null,F.focusedIndices=[]}),a(null),e(F=>{},!0,"dragEnd"),s(t.locations,t.edges)})},[t,e,r,a,s]),_=P.useCallback((R,O,C)=>{(R!==0||O!==0)&&o!==null&&requestAnimationFrame(()=>{const q=n.selectedIndices.includes(C)?n.selectedIndices:[...n.selectedIndices,C];e(G=>{q.forEach(j=>{const H=G.locations[j].id,Z=G.locations[j];Z.point[0]+=R,Z.point[1]+=O,i.adjacencyMatrix&&G.edges.filter(X=>X.source===H||X.target===H).forEach(X=>{const ee=X.source===H?X.target:X.source,ve=kI(t.locations,ee);X.distance=Kh(Z.point,t.locations[ve].point,OU(t))})})},!1,"drag")})},[n==null?void 0:n.selectedIndices,i==null?void 0:i.adjacencyMatrix,t,o]),w=P.useCallback(R=>{const O=R.filter(C=>C!==-1);r(C=>{C.focusedIndices=O})},[]),E=P.useCallback(R=>{r(O=>{O.focusedIndices=[]})},[]),S=P.useCallback((R,O)=>{r(C=>{const F=_1e(R,O).sort();C.selectedIndices=F,C.draggingIndex=null})},[r]),A=P.useCallback((R,O)=>{r(C=>{const F=R.filter(q=>!O.includes(q));C.selectedIndices=F,C.draggingIndex=null})},[r]),k=P.useCallback((R,O,C)=>{C>=0&&(o===null||o.x===R&&o.y===O)&&(n.selectedIndices.includes(C)?A(n.selectedIndices,[C]):S(n.selectedIndices,[C]))},[o,S,A,n==null?void 0:n.selectedIndices]),M=P.useCallback(()=>{A(n.selectedIndices,n.selectedIndices)},[n==null?void 0:n.selectedIndices]);return{onAddLocation:c,onAddBulkLocations:d,onRemoveLocation:b,onRemoveBulkLocations:l,onAddEdge:p,onRemoveEdge:m,onDragStart:y,onDrag:_,onDragEnd:x,onFocus:w,onUnfocus:E,onSelect:S,onUnselect:A,onPointerUp:k,onClearSelection:M}},GSe=({setUIState:t})=>{const e=P.useCallback(r=>{t(i=>{i.chartType=r})},[t]);return{setSessionChartScale:P.useCallback(r=>{t(i=>{i.chartScale=r})},[t]),setSessionChartType:e}};function AX(t){if(!t||t.length==0)return{top:Number.NEGATIVE_INFINITY,left:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY,right:Number.POSITIVE_INFINITY};let e=t[0].point[0],n=t[0].point[0],r=t[0].point[1],i=t[0].point[1];for(let s=1;s<t.length;s++)e=Math.min(e,t[s].point[0]),n=Math.max(n,t[s].point[0]),r=Math.min(r,t[s].point[1]),i=Math.max(i,t[s].point[1]);return{top:r,left:e,bottom:i,right:n}}const PX=t=>{const e=(t.left+t.right)/2,n=(t.top+t.bottom)/2,r=t.width/(t.right-t.left)*t.paddingMarginRatio,i=t.height/(t.bottom-t.top)*t.paddingMarginRatio;return[Math.min(r,i),n,e]},RX=16448250,HSe=400,IX=.4,VSe=({width:t,height:e,locations:n,uiState:r,setUIState:i})=>{const s=P.useCallback((a,l)=>{if((l==null?void 0:l.length)>1){const c=AX(l);return PX({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:t,height:e,paddingMarginRatio:a.viewportCenter&&a.viewportCenter[0]<1.7?IX:.5})}return a.viewportCenter},[e,t]);return{onFit:P.useCallback(()=>s(r,n),[s,r,n])}};function WSe(t){return{layout:{i:"ChartButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??6,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ChartButton",type:Qn.FloatingButton,bindToPanelId:"ChartPanel",tooltip:"Open Chart Panel",icon:$(e9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function XSe(){return window.matchMedia("(hover: hover)").matches}const YSe=At(bs)`
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  right: 10px;
  border-radius: 20px;
  border: 1px solid gray;
`,qSe=At(YSe)`
  top: 40px;
`,KSe=At(rb)`
  width: 120px;
  padding: 18px;
  margin-right: 5px;
  margin-left: 20px;
`,ZSe=At.div`
  position: absolute;
  width: 210px;
  height: 50px;
  top: 40px;
  right: 55px;
  background-color: white;
  border-radius: 20px;
  border: 1px solid gray;
  box-shadow: 0 0 1px gray;
`,QSe=t=>{const[e,n]=P.useState(!1);return t.shown?Be(lo,{children:[$(qSe,{color:"primary",title:"Change scale of display chart",onClick:()=>n(!e),children:$(g9,{})}),$(EO,{open:e,onClick:()=>{setTimeout(()=>{n(!1)},HSe)},sx:{backgroundColor:"#00000030",zIndex:r=>r.zIndex.drawer+1},children:$(ZSe,{children:$(KSe,{"aria-label":"Change scale of display chart",value:t.scale,min:1,max:21,step:null,marks:[{value:1,label:"1"},{value:2,label:""},{value:3,label:"3"},{value:5,label:"5"},{value:8,label:"8"},{value:13,label:"13"},{value:21,label:"21"}],onChange:(r,i)=>t.onChangeScale(i)})})})]}):null},JSe=At.div`
  width: 100%;
  height: 100%;
  border-radius: 8px;
`,eCe=At(Vt)`
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  justify-content: center;
  align-items: center;
  align-content: center;
  border-radius: 8px;
  background-color: #f5f5f5;
`,tCe=At(Vt)`
  position: absolute;
  bottom: 5px;
  width: 100%;
  display: flex;
  justify-content: center;
`,nCe={[Ia.ManufactureShare]:$(n9,{}),[Ia.AgricultureShare]:$(oye,{}),[Ia.PriceIndex]:$(Eye,{}),[Ia.NominalWage]:$(Pye,{}),[Ia.RealWage]:$(aye,{})},rCe=Object.values(H_e).map(t=>({label:t,icon:nCe[t],value:t})),iCe=At(Vt)`
  display: flex;
  align-items: center;
  margin: 0;
`,sCe=At(Vt)`
  justify-content: center;
  margin-right: 8px;
  vertical-align: middle;
`;function oCe(t){return Be(SO,{size:"small",children:[$(NW,{id:"select-label",children:"Chart"}),$(HW,{labelId:"select-label",id:"chart-title-select",value:t.chartType,label:"title",onChange:e=>t.onChangeChartType(e.target.value),children:rCe.map(e=>$(Mx,{value:e.value,children:Be(iCe,{children:[$(sCe,{children:e.icon}),$(Ix,{children:e.label})]})},e.value))})]})}const aCe=Rn.memo(t=>{const[e,n]=P.useState(!1);return Be(JSe,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[$(QSe,{shown:e||!XSe(),scale:t.scale,onChangeScale:t.onChangeScale}),$(eCe,{children:t.children}),$(tCe,{children:$(oCe,{chartType:t.chartType,onChangeChartType:t.onChangeChartType})})]})}),lCe={"Share of Manufacturing":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.01,lineDash:[3,3]}],bar:t=>t.manufactureShare,toFixed:2},"Share of Agriculture":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.25,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.02,lineDash:[5,3]}],bar:t=>t.agricultureShare,toFixed:2},"Price Index":{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]}],line:t=>t.priceIndex,toFixed:2},"Nominal Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.95,max:1.05,step:.005,lineDash:[5,5]}],line:t=>t.nominalWage,toFixed:3},"Real Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.9,max:1.1,step:.01,lineDash:[5,5]},{min:.95,max:1.05,step:.005,lineDash:[3,3]}],line:t=>t.realWage,toFixed:3}},w_=32,ti=48,E_=32,Ii=95,NU="#f5f5f5",cCe=(t,e,n,r,i,s,o)=>{if(t.textAlign="left",r<=20)for(let l=0;l<r;l+=1){const c=n+(l+.5)*e-(l<10?4:8);s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}else for(let l=10;l<r;l+=10){const c=n/2+l*e;s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}},uCe=Rn.memo(({width:t,height:e,chartTypeKey:n,scale:r,locations:i,focusedIndices:s,selectedIndices:o,onFocus:a,onUnfocus:l,onSelect:c,onUnselect:u})=>{const d=P.useRef(null),[h,f]=P.useState(null),p=_=>{if(!i||i.length==0)return null;const w=(t-ti-E_)/i.length;if(_){if(_.x<ti)return null;for(let E=0;E<i.length;E++)if(_.x<ti+(E+1)*w)return E}return null},m=(_,w)=>{w.clearRect(0,0,_.width,_.height),w.fillStyle=NU,w.fillRect(ti,0,_.width-ti-E_,_.height-Ii);const E=lCe[n];if(!E)throw new Error("ERROR ChartTypeKey="+n);if(!i||i.length==0)return;const S=(_.width-ti-E_)/i.length;w.textAlign="right";const A=_.width-ti-E_,k=_.height-w_-Ii,M=F=>I(F,E.max,E.min,k,E.oy,r),I=(F,q,G,j,H=0,Z=1)=>{const X=(F-H)/(q-G);return j*Z*X+H*j/2};(()=>{for(let F=0;F<E.ticks.length;F++){const{min:q,max:G,step:j,lineDash:H}=E.ticks[F];w.lineWidth=1,w.setLineDash(H),w.strokeStyle="#ddd";let Z=0;for(let X=q;X<=G;X+=j){const ee=_.height-Ii-M(X);0<=ee&&ee<=_.height-Ii&&(w.beginPath(),w.moveTo(ti,ee),w.lineTo(ti+A,ee),w.stroke(),Z++)}if(Z>3)break}w.setLineDash([])})(),i.forEach((F,q)=>{function G(){s.includes(q)&&(w.fillStyle="rgb(255,255,0,0.3)",w.fillRect(ti+q*S,0,Math.max(S-1,1),_.height-Ii))}function j(X,ee){const ve=s.includes(q),oe=o.includes(q);(ve||oe)&&(w.lineWidth=2,w.strokeStyle=oe?"#f83":"#ff0",0<=X&&X<=_.height-Ii?w.strokeRect(ti+q*S+2,_.height-Ii-X+2,Math.max(S-1,1)-4,X-4):_.height-Ii<X&&w.strokeRect(ti+q*S,0,Math.max(S-1,1),_.height-Ii),w.strokeStyle=ee)}function H(X){0<=X&&X<=_.height-Ii?w.fillRect(ti+q*S,_.height-Ii-X,Math.max(S-1,1),X):_.height-Ii<X&&w.fillRect(ti+q*S,0,Math.max(S-1,1),_.height-Ii)}function Z(){const X=o.includes(q),ee=E.bar?E.bar(F):null;if(ee!=null){const ve=ee<0?"#88e":X?"#ff8":"rgb(25,118,210)";w.strokeStyle=w.fillStyle=ve;const oe=M(ee);H(oe),j(oe,ve)}}G(),Z()});function R(){w.beginPath(),i.forEach((F,q)=>{const G=E.line?E.line(F):null;if(G!=null){const j=_.height-Ii-M(G);w.strokeStyle="#88e",w.lineWidth=2,q==0?w.moveTo(ti+(q+.5)*S,j):w.lineTo(ti+(q+.5)*S,j);const H=s.includes(q),Z=o.includes(q);(H||Z)&&(w.save(),w.fillStyle=H&&Z?"red":"blue",w.fillRect(ti+(q+.5)*S-3,j-3,6,6),w.restore())}}),w.stroke()}R();const O=()=>{for(let F=0;F<E.ticks.length;F++){const{min:q,max:G,step:j}=E.ticks[F];let H=0;for(let Z=q;Z<=G;Z+=j){const X=_.height-Ii-M(Z);if(w_<=X&&X<=_.height-w_+Ii){w.fillStyle="#888";const ee=Z.toFixed(E.toFixed);w.fillText(ee,ti-6,X),H++}}if(H>3)break}};w.fillStyle=NU,w.fillRect(0,0,_.width,w_),O(),cCe(w,S,ti,i.length,_.height-Ii+13,s,o);function C(F){F!=null&&s.includes(F)&&h!=null&&(w.fillStyle="rgb(10,10,10,0.3)",w.fillRect(Math.min(t-230,h.x),h.y+12,230,20),w.fillStyle="rgb(255,255,255,1)",w.textAlign="left",w.fillText(i[F].label,Math.min(t-230+16,h.x+8),h.y+26))}C(p(h))},b=P.useCallback(_=>{const w=d.current,E=p({x:_.offsetX,y:_.offsetY});E==null?l(s):s.includes(E)?w.style.cursor="pointer":(w.style.cursor="pointer",l(s),a([E])),f({x:_.offsetX,y:_.offsetY})},[d.current,s]),y=P.useCallback(_=>{d.current,p({x:_.offsetX,y:_.offsetY}),s.length>0&&l(s)},[d.current,s]),x=P.useCallback(_=>{d.current;const w=p({x:_.offsetX,y:_.offsetY});w!=null&&(o.includes(w)?u(o,[w]):c(o,[w]))},[d.current,o]);return P.useEffect(()=>{const _=d.current;_.onmousemove=b,_.onmouseleave=y,_.onmousedown=x},[d.current,b,y,x]),P.useEffect(()=>{const w=d.current.getContext("2d");if(!w)throw new Error("Canvas2D is not supported");m(d.current,w)},[r,t,e,n,s,o,i]),$("canvas",{ref:d,width:t,height:e})}),DU=({sessionState:t,uiState:e,setSessionChartType:n,setSessionChartScale:r,onSelect:i,onUnselect:s,onFocus:o,onUnfocus:a})=>$(aCe,{onChangeChartType:n,onChangeScale:r,scale:e==null?void 0:e.chartScale,chartType:e==null?void 0:e.chartType,children:$(uCe,{width:300,height:300,chartTypeKey:e==null?void 0:e.chartType,scale:e==null?void 0:e.chartScale,locations:t==null?void 0:t.locations,focusedIndices:e==null?void 0:e.focusedIndices,selectedIndices:e==null?void 0:e.selectedIndices,onFocus:o,onUnfocus:a,onSelect:i,onUnselect:s})}),dCe=()=>Be(Vt,{style:{display:"flex",gap:"10px"},children:[$(Ds,{variant:"contained",startIcon:$(r9,{}),title:"Import a simulation from a file",children:"Import"}),$(Ds,{variant:"contained",startIcon:$(mye,{}),title:"Export a simulation from a file",children:"Export"})]}),MS=At(bs)`
  background-color: rgba(255, 255, 255, 0.5);
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  border-radius: 20px;
  border: 1px solid gray;
  z-index: 101;
`,hCe=At(MS)``,fCe=At(MS)``,pCe=At(MS)``,gCe=At(MS)``,mCe=t=>{var e,n,r,i;return Be(Vt,{style:{display:"flex",gap:"10px"},children:[$(hCe,{id:"addNodeButton",disabled:!((e=t.state)!=null&&e.addLocation),color:"primary",title:"Add a location",onClick:t.onAddLocation,children:$(hye,{})}),$(fCe,{id:"removeNodeButton",disabled:!((n=t.state)!=null&&n.removeLocation),color:"primary",title:"Remove selected location(s)",onClick:t.onRemoveLocation,children:Be(Jv,{children:[$("path",{d:"M18 11h-2v2h2z"}),$("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2z"}),$("path",{d:"m21.398 15.596-1.662 1.664-1.63-1.631-1.413 1.41 1.631 1.63-1.795 1.798 1.41 1.41 1.795-1.795 1.83 1.828 1.41-1.412-1.828-1.828 1.665-1.664-1.413-1.41z"})]})}),$(pCe,{id:"addEdgeButton",disabled:!((r=t.state)!=null&&r.addEdge),color:"primary",title:"Add edge(s) between selected locations",onClick:t.onAddEdge,children:$(sye,{})}),$(gCe,{id:"removeEdgeButton",disabled:!((i=t.state)!=null&&i.removeEdge),color:"primary",title:"Remove edge(s) between selected locations",onClick:t.onRemoveEdge,children:$(Aye,{})})]})};function vCe(t){return{layout:{i:"BackgroundPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],static:!0},resource:{id:"BackgroundPanel",type:Qn.BackgroundPanel,shown:!0}}}const yCe=({type:t,sessionState:e,setSessionState:n,onAddBulkLocations:r,onRemoveBulkLocations:i})=>{const s=P.useCallback(u=>{n(d=>(d.parameterSet=Cg[t].find(h=>h.caseId===u)||d.parameterSet,d),!0,"changeCase")},[n]),o=P.useCallback((u,d)=>{n(h=>{h.parameterSet.manufactureShare=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),a=P.useCallback((u,d)=>{n(h=>{h.parameterSet.transportationCost=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),l=P.useCallback((u,d)=>{n(h=>{h.parameterSet.elasticitySubstitution=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),c=P.useCallback((u,d)=>{u<e.locations.length?i(u,d):e.locations.length<u&&(console.log("onAddBulkLocations",u),r(u,d))},[]);return{onParameterSetChange:s,setManufactureShare:o,setTransportationCost:a,setElasticitySubstitution:l,setNumLocations:c}};class bCe{constructor(){this.controller=null}async runAsyncFunction(e){this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal,e()}async cancelAll(){this.controller&&this.controller.abort()}}const _Ce=()=>$(Vt,{style:{display:"flex",gap:"10px"}}),xCe=["element"];function wCe(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}function ECe(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2);if(t[i].element===e)return i;t[i].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?r=i-1:n=i+1}return n}const MX=P.createContext({});function TCe(t){const e=P.useRef(null);return P.useEffect(()=>{e.current=t},[t]),e.current}const BU=()=>{};function SCe(t){const[,e]=P.useState(),{registerDescendant:n=BU,unregisterDescendant:r=BU,descendants:i=[],parentId:s=null}=P.useContext(MX),o=wCe(i,c=>c.element===t.element),a=TCe(i),l=i.some((c,u)=>a&&a[u]&&a[u].element!==c.element);return _s(()=>{if(t.element)return n(z({},t,{index:o})),()=>{r(t.element)};e({})},[n,r,o,l,t]),{parentId:s,index:o}}function LX(t){const{children:e,id:n}=t,[r,i]=P.useState([]),s=P.useCallback(l=>{let{element:c}=l,u=He(l,xCe);i(d=>{if(d.length===0)return[z({},u,{element:c,index:0})];const h=ECe(d,c);let f;if(d[h]&&d[h].element===c)f=d;else{const p=z({},u,{element:c,index:h});f=d.slice(),f.splice(h,0,p)}return f.forEach((p,m)=>{p.index=m}),f})},[]),o=P.useCallback(l=>{i(c=>c.filter(u=>l!==u.element))},[]),a=P.useMemo(()=>({descendants:r,registerDescendant:s,unregisterDescendant:o,parentId:n}),[r,s,o,n]);return J.jsx(MX.Provider,{value:a,children:e})}const kX={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},OX=P.createContext(kX),NX=()=>P.useContext(OX);function CCe(t){const{instance:e,multiSelect:n}=NX(),r=e?e.isNodeExpandable(t):!1,i=e?e.isNodeExpanded(t):!1,s=e?e.isNodeFocused(t):!1,o=e?e.isNodeSelected(t):!1,a=e?e.isNodeDisabled(t):!1;return{disabled:a,expanded:i,selected:o,focused:s,handleExpansion:d=>{if(e&&!a){s||e.focusNode(d,t);const h=n&&(d.shiftKey||d.ctrlKey||d.metaKey);r&&!(h&&e.isNodeExpanded(t))&&e.toggleNodeExpansion(d,t)}},handleSelection:d=>{e&&!a&&(s||e.focusNode(d,t),n&&(d.shiftKey||d.ctrlKey||d.metaKey)?d.shiftKey?e.selectRange(d,{end:t}):e.selectNode(d,t,!0):e.selectNode(d,t))},preventSelection:d=>{(d.shiftKey||d.ctrlKey||d.metaKey||a)&&d.preventDefault()}}}const ACe=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],DX=P.forwardRef(function(e,n){const{classes:r,className:i,displayIcon:s,expansionIcon:o,icon:a,label:l,nodeId:c,onClick:u,onMouseDown:d}=e,h=He(e,ACe),{disabled:f,expanded:p,selected:m,focused:b,handleExpansion:y,handleSelection:x,preventSelection:_}=CCe(c),w=a||o||s,E=A=>{_(A),d&&d(A)},S=A=>{y(A),x(A),u&&u(A)};return J.jsxs("div",z({},h,{className:ze(i,r.root,p&&r.expanded,m&&r.selected,b&&r.focused,f&&r.disabled),onClick:S,onMouseDown:E,ref:n,children:[J.jsx("div",{className:r.iconContainer,children:w}),J.jsx("div",{className:r.label,children:l})]}))});function PCe(t){return ut("MuiTreeItem",t)}const jo=st("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),RCe=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],ICe=t=>{const{classes:e}=t;return ct({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},PCe,e)},MCe=Ae("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),LCe=Ae(DX,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${jo.iconContainer}`]:e.iconContainer},e.label&&{[`& .${jo.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${jo.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${jo.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${jo.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:nn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:nn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:nn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${jo.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:nn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${jo.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${jo.label}`]:z({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1)})),kCe=Ae(oW,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),OCe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTreeItem"}),{children:i,className:s,collapseIcon:o,ContentComponent:a=DX,ContentProps:l,endIcon:c,expandIcon:u,disabled:d,icon:h,id:f,label:p,nodeId:m,onClick:b,onMouseDown:y,TransitionComponent:x=oW,TransitionProps:_}=r,w=He(r,RCe),{icons:E,multiSelect:S,disabledItemsFocusable:A,treeId:k,instance:M}=NX();let I;f!=null?I=f:k&&m&&(I=`${k}-${m}`);const[B,R]=P.useState(null),O=P.useRef(null),C=$n(R,n),F=P.useMemo(()=>({element:B,id:m}),[m,B]),{index:q,parentId:G}=SCe(F),j=!!(Array.isArray(i)?i.length:i),H=M?M.isNodeExpanded(m):!1,Z=M?M.isNodeFocused(m):!1,X=M?M.isNodeSelected(m):!1,ee=M?M.isNodeDisabled(m):!1,ve=z({},r,{expanded:H,focused:Z,selected:X,disabled:ee}),oe=ICe(ve);let fe,be;j&&(H?be=o||E.defaultCollapseIcon:be=u||E.defaultExpandIcon),j?fe=E.defaultParentIcon:fe=c||E.defaultEndIcon,P.useEffect(()=>{if(M&&q!==-1)return M.updateNode({id:m,idAttribute:I,index:q,parentId:G,expandable:j,disabled:d}),()=>M.removeNode(m)},[M,G,q,m,j,d,I]),P.useEffect(()=>{if(M&&p){var ue,Te;return M.mapFirstChar(m,((ue=(Te=O.current)==null?void 0:Te.textContent)!=null?ue:"").substring(0,1).toLowerCase())}},[M,m,p]);let Le;S?Le=X:X&&(Le=!0);function se(ue){if(ue.target===ue.currentTarget){let ge;typeof ue.target.getRootNode=="function"?ge=ue.target.getRootNode():ge=Zn(ue.target),ge.getElementById(k).focus({preventScroll:!0})}const Te=!A&&ee;M&&!Z&&ue.currentTarget===ue.target&&!Te&&M.focusNode(ue,m)}return J.jsxs(MCe,z({className:ze(oe.root,s),role:"treeitem","aria-expanded":j?H:void 0,"aria-selected":Le,"aria-disabled":ee||void 0,id:I,tabIndex:-1},w,{ownerState:ve,onFocus:se,ref:C,children:[J.jsx(LCe,z({as:a,ref:O,classes:{root:oe.content,expanded:oe.expanded,selected:oe.selected,focused:oe.focused,disabled:oe.disabled,iconContainer:oe.iconContainer,label:oe.label},label:p,nodeId:m,onClick:b,onMouseDown:y,icon:h,expansionIcon:be,displayIcon:fe,ownerState:ve},l)),i&&J.jsx(LX,{id:m,children:J.jsx(kCe,z({as:x,unmountOnExit:!0,className:oe.group,in:H,component:"ul",role:"group"},_,{children:i}))})]}))});function NCe(t){return ut("MuiTreeView",t)}st("MuiTreeView",["root"]);const DCe=(t,e)=>{const n=P.useRef({}),[r,i]=P.useState(()=>{const o={};return t.forEach(a=>{a.models&&Object.entries(a.models).forEach(([l,c])=>{n.current[l]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:e[c.controlledProp]!==void 0},o[l]=e[c.defaultProp]})}),o});return Object.fromEntries(Object.entries(n.current).map(([o,a])=>{const l=a.isControlled?e[a.controlledProp]:r[o];return[o,{value:l,setValue:c=>{a.isControlled||i(u=>z({},u,{[o]:c}))}}]}))};let BCe=class{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,n,r={}){let i=this.events[e];i||(i={highPriority:new Map,regular:new Map},this.events[e]=i),r.isFirst?i.highPriority.set(n,!0):i.regular.set(n,!0)}removeListener(e,n){this.events[e]&&(this.events[e].regular.delete(n),this.events[e].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(e,...n){const r=this.events[e];if(!r)return;const i=Array.from(r.highPriority.keys()),s=Array.from(r.regular.keys());for(let o=i.length-1;o>=0;o-=1){const a=i[o];r.highPriority.has(a)&&a.apply(this,n)}for(let o=0;o<s.length;o+=1){const a=s[o];r.regular.has(a)&&a.apply(this,n)}}once(e,n){const r=this;this.on(e,function i(...s){r.removeListener(e,i),n.apply(r,s)})}};const RP=(t,e)=>{const n=t.getNode(e),r=t.getNavigableChildrenIds(n.parentId),i=r.indexOf(e);if(i===0)return n.parentId;let s=r[i-1];for(;t.isNodeExpanded(s)&&t.getNavigableChildrenIds(s).length>0;)s=t.getNavigableChildrenIds(s).pop();return s},O0=(t,e)=>{if(t.isNodeExpanded(e)&&t.getNavigableChildrenIds(e).length>0)return t.getNavigableChildrenIds(e)[0];let n=t.getNode(e);for(;n!=null;){const r=t.getNavigableChildrenIds(n.parentId),i=r[r.indexOf(n.id)+1];if(i)return i;n=t.getNode(n.parentId)}return null},cM=t=>{let e=t.getNavigableChildrenIds(null).pop();for(;t.isNodeExpanded(e);)e=t.getNavigableChildrenIds(e).pop();return e},uM=t=>t.getNavigableChildrenIds(null)[0],om=(t,e)=>{Object.assign(t,e)},FCe=t=>t.isPropagationStopped!==void 0,zCe=({instance:t})=>{const[e]=P.useState(()=>new BCe),n=P.useCallback((...i)=>{const[s,o,a={}]=i;a.defaultMuiPrevented=!1,!(FCe(a)&&a.isPropagationStopped())&&e.emit(s,o,a)},[e]),r=P.useCallback((i,s)=>(e.on(i,s),()=>{e.removeListener(i,s)}),[e]);om(t,{$$publishEvent:n,$$subscribeEvent:r})},UCe=[zCe],$Ce=t=>{const e=[...UCe,...t.plugins],n=e.reduce((p,m)=>m.getDefaultizedParams?m.getDefaultizedParams(p):p,t),r=DCe(e,n),s=P.useRef({}).current,o=P.useRef(null),a=$n(o,t.rootRef),[l,c]=P.useState(()=>{const p={};return e.forEach(m=>{m.getInitialState&&Object.assign(p,m.getInitialState(n))}),p}),u=[];let d=kX;const h=p=>{const m=p({instance:s,params:n,state:l,setState:c,rootRef:o,models:r})||{};m.getRootProps&&u.push(m.getRootProps),m.contextValue&&(d=m.contextValue)};return e.forEach(h),{getRootProps:(p={})=>{const m=z({role:"tree",tabIndex:0},p,{ref:a});return u.forEach(b=>{Object.assign(m,b(p))}),m},rootRef:a,contextValue:d}};function jCe(t){const{value:e,children:n}=t;return J.jsx(OX.Provider,{value:e,children:J.jsx(LX,{children:n})})}const GCe=(t,e,n)=>{t.$$publishEvent(e,n)},HCe=({instance:t,params:e})=>{const n=P.useRef({}),r=P.useCallback(c=>n.current[c],[]),i=P.useCallback(c=>{n.current[c.id]=c},[]),s=P.useCallback(c=>{const u=z({},n.current);delete u[c],n.current=u,GCe(t,"removeNode",{id:c})},[t]),o=P.useCallback(c=>{if(c==null)return!1;let u=t.getNode(c);if(!u)return!1;if(u.disabled)return!0;for(;u.parentId!=null;)if(u=t.getNode(u.parentId),u.disabled)return!0;return!1},[t]),a=Yr(c=>Object.values(n.current).filter(u=>u.parentId===c).sort((u,d)=>u.index-d.index).map(u=>u.id));om(t,{getNode:r,updateNode:i,removeNode:s,getChildrenIds:a,getNavigableChildrenIds:c=>{let u=t.getChildrenIds(c);return e.disabledItemsFocusable||(u=u.filter(d=>!t.isNodeDisabled(d))),u},isNodeDisabled:o})},F3=({instance:t,params:e,models:n})=>{const r=P.useCallback(a=>Array.isArray(n.expanded.value)?n.expanded.value.indexOf(a)!==-1:!1,[n.expanded.value]),i=P.useCallback(a=>{var l;return!!((l=t.getNode(a))!=null&&l.expandable)},[t]),s=Yr((a,l)=>{if(l==null)return;let c;n.expanded.value.indexOf(l)!==-1?c=n.expanded.value.filter(u=>u!==l):c=[l].concat(n.expanded.value),e.onNodeToggle&&e.onNodeToggle(a,c),n.expanded.setValue(c)});om(t,{isNodeExpanded:r,isNodeExpandable:i,toggleNodeExpansion:s,expandAllSiblings:(a,l)=>{const c=t.getNode(l),d=t.getChildrenIds(c.parentId).filter(f=>t.isNodeExpandable(f)&&!t.isNodeExpanded(f)),h=n.expanded.value.concat(d);d.length>0&&(n.expanded.setValue(h),e.onNodeToggle&&e.onNodeToggle(a,h))}})};F3.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const VCe=[];F3.getDefaultizedParams=t=>{var e;return z({},t,{defaultExpanded:(e=t.defaultExpanded)!=null?e:VCe})};const WCe=(t,e,n)=>{if(e===n)return[e,n];const r=t.getNode(e),i=t.getNode(n);if(r.parentId===i.id||i.parentId===r.id)return i.parentId===r.id?[r.id,i.id]:[i.id,r.id];const s=[r.id],o=[i.id];let a=r.parentId,l=i.parentId,c=o.indexOf(a)!==-1,u=s.indexOf(l)!==-1,d=!0,h=!0;for(;!u&&!c;)d&&(s.push(a),c=o.indexOf(a)!==-1,d=a!==null,!c&&d&&(a=t.getNode(a).parentId)),h&&!c&&(o.push(l),u=s.indexOf(l)!==-1,h=l!==null,!u&&h&&(l=t.getNode(l).parentId));const f=c?a:l,p=t.getChildrenIds(f),m=s[s.indexOf(f)-1],b=o[o.indexOf(f)-1];return p.indexOf(m)<p.indexOf(b)?[e,n]:[n,e]},z3=({instance:t,params:e,models:n})=>{const r=P.useRef(null),i=P.useRef(!1),s=P.useRef([]),o=p=>Array.isArray(n.selected.value)?n.selected.value.indexOf(p)!==-1:n.selected.value===p,a=(p,m,b=!1)=>{if(!e.disableSelection){if(b){if(Array.isArray(n.selected.value)){let y;n.selected.value.indexOf(m)!==-1?y=n.selected.value.filter(x=>x!==m):y=[m].concat(n.selected.value),e.onNodeSelect&&e.onNodeSelect(p,y),n.selected.setValue(y)}}else{const y=e.multiSelect?[m]:m;e.onNodeSelect&&e.onNodeSelect(p,y),n.selected.setValue(y)}r.current=m,i.current=!1,s.current=[]}},l=(p,m)=>{const[b,y]=WCe(t,p,m),x=[b];let _=b;for(;_!==y;)_=O0(t,_),x.push(_);return x},c=(p,m)=>{let b=n.selected.value.slice();const{start:y,next:x,current:_}=m;!x||!_||(s.current.indexOf(_)===-1&&(s.current=[]),i.current?s.current.indexOf(x)!==-1?(b=b.filter(w=>w===y||w!==_),s.current=s.current.filter(w=>w===y||w!==_)):(b.push(x),s.current.push(x)):(b.push(x),s.current.push(_,x)),e.onNodeSelect&&e.onNodeSelect(p,b),n.selected.setValue(b))},u=(p,m)=>{let b=n.selected.value.slice();const{start:y,end:x}=m;i.current&&(b=b.filter(E=>s.current.indexOf(E)===-1));let _=l(y,x);_=_.filter(E=>!t.isNodeDisabled(E)),s.current=_;let w=b.concat(_);w=w.filter((E,S)=>w.indexOf(E)===S),e.onNodeSelect&&e.onNodeSelect(p,w),n.selected.setValue(w)};return om(t,{isNodeSelected:o,selectNode:a,selectRange:(p,m,b=!1)=>{if(e.disableSelection)return;const{start:y=r.current,end:x,current:_}=m;b?c(p,{start:y,next:x,current:_}):y!=null&&x!=null&&u(p,{start:y,end:x}),i.current=!0},rangeSelectToLast:(p,m)=>{r.current||(r.current=m);const b=i.current?r.current:m;t.selectRange(p,{start:b,end:cM(t)})},rangeSelectToFirst:(p,m)=>{r.current||(r.current=m);const b=i.current?r.current:m;t.selectRange(p,{start:b,end:uM(t)})}}),{getRootProps:()=>({"aria-multiselectable":e.multiSelect})}};z3.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const XCe=[];z3.getDefaultizedParams=t=>{var e,n,r;return z({},t,{disableSelection:(e=t.disableSelection)!=null?e:!1,multiSelect:(n=t.multiSelect)!=null?n:!1,defaultSelected:(r=t.defaultSelected)!=null?r:t.multiSelect?XCe:null})};const FU=1e3;class YCe{constructor(e=FU){this.timeouts=new Map,this.cleanupTimeout=FU,this.cleanupTimeout=e}register(e,n,r){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,i)}unregister(e){const n=this.timeouts.get(e.cleanupToken);n&&(this.timeouts.delete(e.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((e,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class qCe{constructor(){this.registry=new FinalizationRegistry(e=>{typeof e=="function"&&e()})}register(e,n,r){this.registry.register(e,n,r)}unregister(e){this.registry.unregister(e)}reset(){}}class KCe{}function ZCe(t){let e=0;return function(r,i,s){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new qCe:new YCe);const[o]=P.useState(new KCe),a=P.useRef(null),l=P.useRef();l.current=s;const c=P.useRef(null);if(!a.current&&l.current){const u=(d,h)=>{if(!h.defaultMuiPrevented){var f;(f=l.current)==null||f.call(l,d,h)}};a.current=r.$$subscribeEvent(i,u),e+=1,c.current={cleanupToken:e},t.registry.register(o,()=>{var d;(d=a.current)==null||d.call(a),a.current=null,c.current=null},c.current)}else!l.current&&a.current&&(a.current(),a.current=null,c.current&&(t.registry.unregister(c.current),c.current=null));P.useEffect(()=>{if(!a.current&&l.current){const u=(d,h)=>{if(!h.defaultMuiPrevented){var f;(f=l.current)==null||f.call(l,d,h)}};a.current=r.$$subscribeEvent(i,u)}return c.current&&t.registry&&(t.registry.unregister(c.current),c.current=null),()=>{var u;(u=a.current)==null||u.call(a),a.current=null}},[r,i])}}const QCe={registry:null},JCe=ZCe(QCe),U3=({instance:t,params:e,state:n,setState:r,models:i,rootRef:s})=>{const o=Yr(f=>{const p=typeof f=="function"?f(n.focusedNodeId):f;r(m=>z({},m,{focusedNodeId:p}))}),a=P.useCallback(f=>n.focusedNodeId===f,[n.focusedNodeId]),l=Yr((f,p)=>{p&&(o(p),e.onNodeFocus&&e.onNodeFocus(f,p))});om(t,{isNodeFocused:a,focusNode:l}),JCe(t,"removeNode",({id:f})=>{o(p=>p===f&&s.current===Zn(s.current).activeElement?t.getChildrenIds(null)[0]:p)});const c=f=>p=>{var m;if((m=f.onFocus)==null||m.call(f,p),p.target===p.currentTarget){const b=x=>{const _=t.getNode(x);return _&&(_.parentId==null||t.isNodeExpanded(_.parentId))};let y;Array.isArray(i.selected.value)?y=i.selected.value.find(b):i.selected.value!=null&&b(i.selected.value)&&(y=i.selected.value),y==null&&(y=t.getNavigableChildrenIds(null)[0]),t.focusNode(p,y)}},u=f=>p=>{var m;(m=f.onBlur)==null||m.call(f,p),o(null)},d=t.getNode(n.focusedNodeId),h=d?d.idAttribute:null;return{getRootProps:f=>({onFocus:c(f),onBlur:u(f),"aria-activedescendant":h??void 0})}};U3.getInitialState=()=>({focusedNodeId:null});U3.getDefaultizedParams=t=>{var e;return z({},t,{disabledItemsFocusable:(e=t.disabledItemsFocusable)!=null?e:!1})};function eAe(t){return t&&t.length===1&&t.match(/\S/)}function zU(t,e,n){for(let r=e;r<t.length;r+=1)if(n===t[r])return r;return-1}const tAe=({instance:t,params:e,state:n})=>{const i=Ss().direction==="rtl",s=P.useRef({}),o=Yr((f,p)=>(s.current[f]=p,()=>{const m=z({},s.current);delete m[f],s.current=m}));om(t,{mapFirstChar:o});const a=f=>(n.focusedNodeId!=null&&t.isNodeExpandable(n.focusedNodeId)&&(t.isNodeExpanded(n.focusedNodeId)?t.focusNode(f,O0(t,n.focusedNodeId)):t.isNodeDisabled(n.focusedNodeId)||t.toggleNodeExpansion(f,n.focusedNodeId)),!0),l=f=>{if(n.focusedNodeId==null)return!1;if(t.isNodeExpanded(n.focusedNodeId)&&!t.isNodeDisabled(n.focusedNodeId))return t.toggleNodeExpansion(f,n.focusedNodeId),!0;const p=t.getNode(n.focusedNodeId).parentId;return p?(t.focusNode(f,p),!0):!1},c=(f,p,m)=>{let b,y;const x=m.toLowerCase(),_=[],w=[];Object.keys(s.current).forEach(E=>{const S=t.getNode(E),A=S.parentId?t.isNodeExpanded(S.parentId):!0,k=e.disabledItemsFocusable?!1:t.isNodeDisabled(E);A&&!k&&(_.push(E),w.push(s.current[E]))}),b=_.indexOf(p)+1,b>=_.length&&(b=0),y=zU(w,b,x),y===-1&&(y=zU(w,0,x)),y>-1&&t.focusNode(f,_[y])},u=(f,p)=>{t.isNodeDisabled(O0(t,p))||t.selectRange(f,{end:O0(t,p),current:p},!0)},d=(f,p)=>{t.isNodeDisabled(RP(t,p))||t.selectRange(f,{end:RP(t,p),current:p},!0)},h=f=>p=>{var m;(m=f.onKeyDown)==null||m.call(f,p);let b=!1;const y=p.key;if(p.altKey||p.currentTarget!==p.target||n.focusedNodeId==null)return;const x=p.ctrlKey||p.metaKey;switch(y){case" ":!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&(b=!0,e.multiSelect&&p.shiftKey?t.selectRange(p,{end:n.focusedNodeId}):e.multiSelect?t.selectNode(p,n.focusedNodeId,!0):t.selectNode(p,n.focusedNodeId)),p.stopPropagation();break;case"Enter":t.isNodeDisabled(n.focusedNodeId)||(t.isNodeExpandable(n.focusedNodeId)?(t.toggleNodeExpansion(p,n.focusedNodeId),b=!0):e.disableSelection||(b=!0,e.multiSelect?t.selectNode(p,n.focusedNodeId,!0):t.selectNode(p,n.focusedNodeId))),p.stopPropagation();break;case"ArrowDown":e.multiSelect&&p.shiftKey&&!e.disableSelection&&u(p,n.focusedNodeId),t.focusNode(p,O0(t,n.focusedNodeId)),b=!0;break;case"ArrowUp":e.multiSelect&&p.shiftKey&&!e.disableSelection&&d(p,n.focusedNodeId),t.focusNode(p,RP(t,n.focusedNodeId)),b=!0;break;case"ArrowRight":i?b=l(p):b=a(p);break;case"ArrowLeft":i?b=a(p):b=l(p);break;case"Home":e.multiSelect&&x&&p.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToFirst(p,n.focusedNodeId),t.focusNode(p,uM(t)),b=!0;break;case"End":e.multiSelect&&x&&p.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToLast(p,n.focusedNodeId),t.focusNode(p,cM(t)),b=!0;break;default:y==="*"?(t.expandAllSiblings(p,n.focusedNodeId),b=!0):e.multiSelect&&x&&y.toLowerCase()==="a"&&!e.disableSelection?(t.selectRange(p,{start:uM(t),end:cM(t)}),b=!0):!x&&!p.shiftKey&&eAe(y)&&(c(p,n.focusedNodeId,y),b=!0)}b&&(p.preventDefault(),p.stopPropagation())};return{getRootProps:f=>({onKeyDown:h(f)})}},nAe=({instance:t,params:e})=>{const n=Qg(e.id);return{getRootProps:()=>({id:n}),contextValue:{treeId:n,instance:t,multiSelect:e.multiSelect,disabledItemsFocusable:e.disabledItemsFocusable,icons:{defaultCollapseIcon:e.defaultCollapseIcon,defaultEndIcon:e.defaultEndIcon,defaultExpandIcon:e.defaultExpandIcon,defaultParentIcon:e.defaultParentIcon}}}},rAe=[HCe,F3,z3,U3,tAe,nAe],iAe=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],sAe=t=>{const{classes:e}=t;return ct({root:["root"]},NCe,e)},UU=Ae("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0}),oAe=P.forwardRef(function(e,n){const r=ht({props:e,name:"MuiTreeView"}),i=r,s=r,{disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:d,defaultSelected:h,selected:f,multiSelect:p,onNodeSelect:m,id:b,defaultCollapseIcon:y,defaultEndIcon:x,defaultExpandIcon:_,defaultParentIcon:w,children:E}=s,S=He(s,iAe),{getRootProps:A,contextValue:k}=$Ce({disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:d,defaultSelected:h,selected:f,multiSelect:p,onNodeSelect:m,id:b,defaultCollapseIcon:y,defaultEndIcon:x,defaultExpandIcon:_,defaultParentIcon:w,plugins:rAe,rootRef:n}),M=sAe(r),I=Ir({elementType:UU,externalSlotProps:{},externalForwardedProps:S,className:M.root,getSlotProps:A,ownerState:i});return J.jsx(jCe,{value:k,children:J.jsx(UU,z({},I,{children:E}))})});var $3={},aAe=e3;Object.defineProperty($3,"__esModule",{value:!0});var BX=$3.default=void 0,lAe=aAe(t3()),cAe=J;BX=$3.default=(0,lAe.default)((0,cAe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var j3={},uAe=e3;Object.defineProperty(j3,"__esModule",{value:!0});var FX=j3.default=void 0,dAe=uAe(t3()),hAe=J;FX=j3.default=(0,dAe.default)((0,hAe.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const fAe=Ae(OCe)(({theme:t})=>({color:t.palette.text.secondary,[`& .${jo.content}`]:{color:t.palette.text.secondary,borderTopRightRadius:t.spacing(2),borderBottomRightRadius:t.spacing(2),paddingRight:t.spacing(1),fontWeight:t.typography.fontWeightMedium,"&.Mui-expanded":{fontWeight:t.typography.fontWeightRegular},"&:hover":{backgroundColor:t.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:`var(--tree-view-bg-color, ${t.palette.action.selected})`,color:"var(--tree-view-color)"},[`& .${jo.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${jo.group}`]:{marginLeft:0,[`& .${jo.content}`]:{paddingLeft:t.spacing(1)}}})),a0=Rn.forwardRef(function(e,n){const r=Ss(),{bgColor:i,color:s,level:o=1,labelIcon:a,labelInfo:l,labelText:c,colorForDarkMode:u,bgColorForDarkMode:d,...h}=e,f={"--tree-view-color":r.palette.mode!=="dark"?s:u,"--tree-view-bg-color":r.palette.mode!=="dark"?i:d};return $(fAe,{label:Be(Vt,{sx:{display:"flex",alignItems:"center",p:.1,marginLeft:(e.level-1)*2,pr:0},children:[$(R0,{onClick:p=>p.stopPropagation()}),$(Vt,{component:a,color:"inherit",sx:{mr:.1}}),$(En,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:c}),$(En,{variant:"caption",color:"inherit",children:l})]}),style:f,...h,ref:n})}),pAe=()=>$(TO,{style:{height:"300px",overflowY:"scroll"},children:Be(oAe,{defaultCollapseIcon:$(BX,{}),defaultExpandIcon:$(FX,{}),defaultExpanded:["1","2"],children:[$(a0,{nodeId:"1",level:1,labelText:"Country Shapes",labelIcon:Hw,children:$(a0,{nodeId:"1-1",level:2,labelText:"Region1 Shapes",labelIcon:yye,children:$(a0,{nodeId:"1-1-1",level:3,labelText:"Region2 Shapes",labelIcon:Iye})})}),$(a0,{nodeId:"2",level:1,labelText:"Cities",labelIcon:Vw}),$(a0,{nodeId:"3",level:1,labelText:"Routes",labelIcon:iy})]})}),gAe=At.div`
  display: flex;
  gap: 10px;
  align-content: center;
  align-items: center;
`,mAe=At.div`
  display: flex;
  gap: 4px;
  margin-top: -5px;
  vertical-align: top;
`,vAe=At.div`
  padding-top: 4px;
  margin-left: 10px;
  text-align: center;
  width: 100px;
`,yAe=At(rb)`
  margin-top: 2px;
`;function T_(t){return Be(gAe,{children:[$(bg,{title:t.title,children:Be(vAe,{children:[t.icon,Be(mAe,{children:[Be(En,{children:[t.label," ="]}),$(En,{children:t.value})]})]})}),$(yAe,{"aria-label":t.label,value:t.value,getAriaValueText:e=>`${e}`,step:t.step,marks:t.marks,min:t.min,max:t.max,valueLabelDisplay:"auto",onChange:t.onChange,onChangeCommitted:t.onChangeCommitted})]})}const bAe=At.div`
  margin-left: 0;
  margin-right: 10px;
`,_Ae=P.forwardRef((t,e)=>{const{set:n,current:r}=mS(Th);P.useImperativeHandle(e,()=>({resetToDefault(){const f=Cg[t.type].find(p=>r.parameterSet.caseId===p.caseId);n(p=>{p.parameterSet.numLocations=f.numLocations,p.parameterSet.manufactureShare=f.manufactureShare,p.parameterSet.transportationCost=f.transportationCost,p.parameterSet.elasticitySubstitution=f.elasticitySubstitution},!0,"resetToDefault")}}));const i=Cg[t.type],s=P.useCallback((f,p)=>{t.setNumLocations(p,!1)},[n]),o=P.useCallback((f,p)=>{t.setNumLocations(p,!0)},[n]),a=P.useCallback((f,p)=>{n(m=>{m.parameterSet.manufactureShare=p},!1,"set parameter")},[n]),l=P.useCallback((f,p)=>{n(m=>{m.parameterSet.manufactureShare=p},!0,"set parameter")},[n]),c=P.useCallback((f,p)=>{n(m=>{m.parameterSet.transportationCost=p},!1,"set parameter")},[n]),u=P.useCallback((f,p)=>{n(m=>{m.parameterSet.transportationCost=p},!0,"set parameter")},[n]),d=P.useCallback((f,p)=>{n(m=>{m.parameterSet.elasticitySubstitution=p},!1,"set parameter")},[n]),h=P.useCallback((f,p)=>{n(m=>{m.parameterSet.elasticitySubstitution=p},!0,"set parameter")},[n]);return Be(bAe,{children:[$(rye,{exclusive:!0,value:r.parameterSet.caseId,onChange:(f,p)=>{p!=null&&t.onParameterSetChange(p,!0)},sx:{display:"flex",justifyContent:"center",marginTop:"4px",marginBottom:"8px"},children:i.map((f,p)=>$(Kve,{size:"small",title:f.title+": "+f.description,value:f.caseId,children:f.title},p))}),$(T_,{title:"K: The number of locations connected by transportation network.",icon:$(dye,{}),label:"K",step:1,marks:[{value:1,label:"1"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"60"},{value:80,label:"80"},{value:100,label:"100"}],value:r.parameterSet.numLocations||0,onChange:s,onChangeCommitted:o,min:1,max:100}),$(T_,{title:": The share of manufacturing goods in expenditure.",icon:$(n9,{}),label:"",step:.01,marks:[{value:0,label:"0"},{value:.2,label:"0.2"},{value:.4,label:"0.4"},{value:.6,label:"0.6"},{value:.8,label:"0.8"},{value:1,label:"1.0"}],value:r.parameterSet.manufactureShare||0,onChange:a,onChangeCommitted:l,min:0,max:1}),$(T_,{title:": The level of transportation cost among locations. A value of 1 represents no transportation cost, while a value of 10 represents significant transportation cost.",icon:$(c9,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:4,label:"4"},{value:7,label:"7"},{value:10,label:"10"}],value:r.parameterSet.transportationCost||0,onChange:c,onChangeCommitted:u,min:1,max:10}),$(T_,{title:": The elasticity of substitution among manufactured goods. A value of 1 represents a strong love of variety, while a value of 20 represents a limited love of variety.",icon:$(gye,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"}],value:r.parameterSet.elasticitySubstitution||0,onChange:d,onChangeCommitted:h,min:1,max:20})]})});function $U({type:t,onParameterSetChange:e,setNumLocations:n}){return $(_Ae,{type:t,onParameterSetChange:e,setNumLocations:n})}const xAe=At.div`
  color: black;
  width: 33%;
`,wAe=At.h3`
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 0;
  margin-bottom: 10px;
`,EAe=At.div`
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: auto;
`,TAe=At.table`
  border-collapse: collapse;
  border: 0 solid black;
  text-align: center;
  box-shadow: 1px 1px 1px 3px #ccc inset;
  max-height: 40vh;

  th,
  td {
    border: 0 solid white;
    cursor: pointer;
  }

  th {
    background-color: #e0e0e0;

    position: sticky;
    left: 0;
    top: 0; /* Don't forget this, required for the stickiness */
    box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.4);
  }

  th.selected,
  td.selected {
    border: 0 solid #e0e0e0 !important;
  }

  .selected.focused {
    color: red;
  }

  th.focused,
  td.focused {
    color: rgba(100, 100, 0, 1);
  }

  tr:first-of-type > th.selected,
  tr > th:first-of-type.selected {
    border: 0 solid yellow !important;
    background-color: #dd1 !important;
  }

  tr:first-of-type > th.focused,
  tr > th:first-of-type.focused {
    background-color: rgb(255, 255, 0, 1) !important;
  }

  tr:first-of-type > th.focused.selected,
  tr > th:first-of-type.focused.selected {
    background-color: #ff0 !important;
  }
`,SAe=At(Vt)`
  flex: 1;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
`;function CAe(t,e,n,r,i){return Mc(e)?i?r?{style:{backgroundColor:"#eee",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#ccc",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#bbb",color:"#ccc"},valueString:""}:e==0?i?{style:{backgroundColor:"#ddd",color:"#833"},valueString:p_(e)}:{style:{backgroundColor:"#888",color:"#ccc"},valueString:p_(e)}:i?{style:{backgroundColor:`rgba(${t.r},${t.g},${t.b},${e/n})`,color:"#f33"},valueString:p_(e)}:{style:{backgroundColor:`rgba(${t.r*.9},${t.g*.9},${t.b*.9},${e/n})`,color:"#ccc"},valueString:p_(e)}}const IP=(t,e,n,r,i)=>{r-1==e||n-1==e||i(t,n,r)},S_=(t,e,n,r,i)=>{r-1==e||n-1==e||i(t,n,r)},jU=(t,e,n,r,i)=>{r-1==e||n-1==e||i(t,n,r)},MP=t=>{const e=t.data&&t.data.reduce((r,i)=>Math.max(r,...i.filter(s=>!Mc(s))),0)||0;function n(r){return[r.some(i=>t.focusedIndices.includes(i))?"focused":"",r.some(i=>t.selectedIndices.includes(i))?"selected":""].filter(i=>i!="").join(" ")}return Be(xAe,{children:[Be(wAe,{children:[t.icon,t.title]}),t.data==null?$(SAe,{children:$(yg,{})}):$(EAe,{children:$(Vt,{className:"fog-added",children:Be(TAe,{id:t.matrixId,className:t.focused?"focused":"",ref:t.tableRef,children:[$("thead",{children:Be("tr",{children:[$("th",{}),t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&$("th",{title:t.locations[i].label,onMouseEnter:()=>IP(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseEnter),onMouseLeave:()=>S_(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseLeave),onMouseDown:()=>jU(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseDown),className:n([i]),children:i==t.maxRowColLength?"...":i},i))]})}),$("tbody",{children:t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&Be("tr",{title:t.locations[i].label,children:[$("th",{onMouseEnter:()=>IP(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseEnter),onMouseLeave:()=>S_(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseLeave),onMouseDown:()=>S_(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseDown),className:n([i]),children:i==t.maxRowColLength?"...":i}),r.filter((s,o)=>o<=t.maxRowColLength).map((s,o)=>{const{style:a,valueString:l}=i==t.maxRowColLength||o==t.maxRowColLength?{style:{},valueString:"..."}:CAe(t.rgb,s,e,[o,i].some(c=>t.focusedIndices.includes(c)),[o,i].some(c=>t.selectedIndices.includes(c)));return $("td",{title:`(${o}, ${i}) = ${l}`,onMouseEnter:()=>IP(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseEnter),onMouseLeave:()=>S_(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseLeave),onMouseDown:()=>jU(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseDown),className:i<t.maxRowColLength?n([i,o]):"",style:a,children:l},o+1)})]},i))})]})})})]})},AAe=At.div`
  div.focused > div > table > tbody > tr > td:not(.focused) {
    background-color: #e0e0e0 !important;
    color: #333;
  }
`,PAe=At(Vt)`
  font-size: 75%;
  display: flex;
  gap: 20px;
`,RAe=P.forwardRef((t,e)=>{var _;const[n,r]=P.useState(null),[i,s]=P.useState([]),o=[P.useRef(null),P.useRef(null),P.useRef(null)],a=(w,E,S)=>{w&&w.rows&&S.forEach(A=>{var k,M,I;A<=E&&((k=w.rows[0].cells[A+1])==null||k.classList.add("selected"),(I=(M=w.rows[A+1])==null?void 0:M.cells[0])==null||I.classList.add("selected"))})},l=(w,E,S)=>{w&&w.rows&&S.forEach(A=>{var k,M,I;A<=E&&((k=w.rows[0].cells[A+1])==null||k.classList.remove("selected"),(I=(M=w.rows[A+1])==null?void 0:M.cells[0])==null||I.classList.remove("selected"))})},c=w=>{m(null,w)},u=w=>{b(null,w)},d=w=>{f(w)},h=w=>{p(w)};P.useImperativeHandle(e,()=>({onFocus:c,onUnfocus:u,onSelect:d,onUnselect:h}));const f=w=>{o.forEach(E=>{a(E.current,t.maxRowColLength,w)})},p=w=>{o.forEach(E=>{l(E.current,t.maxRowColLength,w)})},m=(w,E)=>{r(w),w&&t.onFocus(E.map(S=>S-1))},b=(w,E)=>{r(null),w&&t.onUnfocus(E.map(S=>S-1))},y=(w,E)=>{const S=i,A=E.map(C=>C-1).filter(C=>C>=0),k=new Set(A),M=S.filter(C=>k.has(C)),I=new Set(M),B=S.filter(C=>!I.has(C)),R=A.filter(C=>!I.has(C)),O=B.concat(R);M.length>0&&p(M.map(C=>C)),R.length>0&&f(R.map(C=>C)),s(O)},x=(w,E)=>{o.forEach(A=>{y(A.current,E)});const S=E.map(A=>A-1).filter(A=>0<=A);w&&t.onSelected(i,S)};return $(AAe,{children:Be(PAe,{className:((_=t.focusedIndices)==null?void 0:_.length)>0?"focused":"",children:[$(MP,{matrixId:"adjacencyMatrix",locations:t.locations,focused:n=="adjacencyMatrix",tableRef:o[0],icon:$(Mye,{}),title:"Adjacency distances",maxRowColLength:t.maxRowColLength,data:t.adjacencyMatrix,rgb:t.rgb,onMouseEnter:(w,E,S)=>m(w,[E,S]),onMouseLeave:(w,E,S)=>b(w,[E,S]),onMouseDown:(w,E,S)=>x(w,[E,S]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),$(MP,{matrixId:"distanceMatrix",locations:t.locations,focused:n=="distanceMatrix",tableRef:o[1],icon:$(iy,{}),title:"Path distances",maxRowColLength:t.maxRowColLength,data:t.distanceMatrix,rgb:t.rgb,onMouseEnter:(w,E,S)=>m(w,[E,S]),onMouseLeave:(w,E,S)=>b(w,[E,S]),onMouseDown:(w,E,S)=>x(w,[E,S]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),$(MP,{matrixId:"transportationCostMatrix",locations:t.locations,focused:n=="transportationCostMatrix",tableRef:o[2],icon:$(c9,{}),title:"Transportation costs",maxRowColLength:t.maxRowColLength,data:t.transportationCostMatrix,rgb:t.rgb,onMouseEnter:(w,E,S)=>m(w,[E,S]),onMouseLeave:(w,E,S)=>b(w,[E,S]),onMouseDown:(w,E,S)=>x(w,[E,S]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices})]})})}),GU=({sessionState:t,matrices:e,uiState:n,preferences:r,onSelect:i,onFocus:s,onUnfocus:o})=>$(RAe,{locations:t==null?void 0:t.locations,maxRowColLength:r==null?void 0:r.maxRowColLength,adjacencyMatrix:e==null?void 0:e.adjacencyMatrix,distanceMatrix:e==null?void 0:e.distanceMatrix,transportationCostMatrix:e==null?void 0:e.transportationCostMatrix,rgb:{r:23,g:111,b:203},selectedIndices:n==null?void 0:n.selectedIndices,focusedIndices:n==null?void 0:n.focusedIndices,onSelected:i,onFocus:s,onUnfocus:o}),IAe=At.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  vertical-align: middle;
  align-content: center;
  align-items: center;
  margin-left: 0;
  margin-right: 8px;
  gap: 8px;
`,MAe=At(Jue)``,LP=At(Ds)`
  border-radius: 24px;
  padding-left: 20px;
  padding-right: 20px;
`,LAe=At.div`
  display: flex;
  gap: 5px;
`,kAe=At.div`
  display: flex;
  align-items: flex-end;
  margin-left: 8px;
  margin-right: 8px;
  font-size: 1em;
  white-space: nowrap;
  gap: 8px;

  input {
    text-align: right;
  }
`,OAe=At(rb)``,NAe=At.div`
  display: flex;
  width: 95%;
  gap: 15px;
  align-content: center;
  align-items: center;
`,HU=t=>({animation:`blinking ${1.5-t}s ease-in-out infinite alternate; @keyframes blinking { 0% { background-color: rgb(230,138,35);} 100% { background-color: rgb(180,88,25); }}`,color:"#444"});function DAe(t){return Be(IAe,{children:[Be(LAe,{children:[Be(MAe,{variant:"outlined","aria-label":"outlined primary button group",children:[$(LP,{variant:"contained",color:"primary",onClick:t.start,disabled:t.isStarted,startIcon:$(wye,{}),children:"Start"}),$(LP,{variant:"contained",color:"primary",onClick:t.stop,disabled:!t.isStarted,sx:{...t.isStarted?HU(t.intervalScale):{}},startIcon:$(xye,{}),children:"Stop"})]}),$(LP,{onClick:t.reset,variant:"contained",color:"primary",sx:{...t.isStarted?HU(t.intervalScale):{}},startIcon:$(Rye,{}),children:"Reset"})]}),Be(NAe,{children:[$(bg,{title:"Elapsed time",children:Be(kAe,{children:[$(iye,{}),$("input",{type:"text",value:t.counter,size:6,disabled:!0})]})}),$(bg,{title:"Simulation Speed",children:$(OAe,{"aria-label":"Simulation speed",value:t.intervalScale,step:.01,marks:[{value:0,label:""},{value:.2,label:"20%"},{value:.4,label:"40%"},{value:.6,label:"60%"},{value:.8,label:"80%"},{value:1,label:""}],onChange:(e,n)=>{t.changeIntervalScale(n)},min:0,max:1,valueLabelDisplay:"auto",sx:{"& .MuiSlider-markLabel":{fontSize:"70%"}}})})]})]})}const BAe={interval:0,isStarted:!1,counter:0},zX=ua(BAe),FAe=t=>{const[e,n]=h7(zX),r=P.useRef(Number.POSITIVE_INFINITY),i=P.useRef(null),s=c=>{n(u=>(u.interval=c,u))},o=()=>{n(c=>(c.isStarted=!0,c)),t.onStarted()},a=()=>{n(c=>(c.isStarted=!1,c))},l=()=>{n(c=>(c.counter=0,c)),t.onReset()};return P.useEffect(()=>(!e.isStarted&&i.current&&(clearInterval(i.current),i.current=null),e.isStarted&&r.current!==e.interval&&(r.current=e.interval,i.current=setInterval(()=>{t.tick(),n(c=>(c.counter++,c))},e.interval)),()=>{i.current&&(clearInterval(i.current),r.current=Number.POSITIVE_INFINITY)}),[e.counter,e.isStarted,e.interval]),{changeInterval:s,start:o,stop:a,reset:l}};function zAe(t){const[e,n]=P.useState(t.initialIntervalScale),r=Yz(t.minInterval,t.maxInterval,e),{changeInterval:i,start:s,stop:o,reset:a}=FAe({tick:t.tick,onStarted:t.onStarted,onReset:t.onReset,onStopped:t.onStopped});return{changeIntervalScale:c=>{n(c);const u=Yz(t.minInterval,t.maxInterval,c);i(u)},start:s,stop:o,reset:a,interval:r,intervalScale:e}}const UAe=({simulation:t})=>{const{counter:e,isStarted:n}=_h(zX);return $(DAe,{isStarted:n,counter:e,intervalScale:t.intervalScale,start:t.start,stop:t.stop,reset:t.reset,changeIntervalScale:t.changeIntervalScale})};function $Ae(t){return{layout:{i:"EditButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??2,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"EditButton",type:Qn.FloatingButton,bindToPanelId:"EditPanel",tooltip:"Open Edit Panel",icon:$(LO,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function jAe(t){return{layout:{i:"ParametersButton",x:0,y:(t==null?void 0:t.y)??3,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"ParametersButton",type:Qn.FloatingButton,bindToPanelId:"ParametersPanel",tooltip:"Open Parameters Panel",icon:$(p9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function GAe(t){return{layout:{i:"ParametersPanel",x:1,y:(t==null?void 0:t.y)??3,w:9,h:9,minW:9,minH:9,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"ParametersPanel",type:Qn.FloatingPanel,title:"Parameters",icon:$(p9,{}),titleBarMode:"win",rowHeight:Xl,bindToButtonId:"ParametersButton",shown:(t==null?void 0:t.shown)??!0}}}function HAe(t){return{layout:{i:"TimerControlButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??4,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimerControlButton",type:Qn.FloatingButton,bindToPanelId:"TimerControlPanel",tooltip:"Open TimerControl Panel",icon:$(f9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function VAe(t){return{layout:{i:"TimerControlPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??9,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??4,minW:8,minH:4,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"TimerControlPanel",type:Qn.FloatingPanel,title:"Timer Control",icon:$(f9,{}),titleBarMode:"win",rowHeight:Xl,shown:!0,bindToButtonId:"TimerControlButton"}}}function WAe(t){return{layout:{i:"MatricesButton",x:0,y:(t==null?void 0:t.y)??5,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"MatricesButton",type:Qn.FloatingButton,bindToPanelId:"MatricesPanel",tooltip:"Open Matrices Panel",icon:$(s9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function XAe(t){return{layout:{i:"MatricesPanel",x:(t==null?void 0:t.x)??10,y:(t==null?void 0:t.y)??5,w:(t==null?void 0:t.w)??23,h:(t==null?void 0:t.h)??9,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"MatricesPanel",type:Qn.FloatingPanel,title:"Matrices",icon:$(s9,{}),titleBarMode:"win",rowHeight:Xl,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"MatricesButton"}}}function YAe(t){return{layout:{i:"LayersButton",x:0,y:(t==null?void 0:t.y)??7,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"LayersButton",type:Qn.FloatingButton,bindToPanelId:"LayersPanel",tooltip:"Open Layers Panel",icon:$(l9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function qAe(t){return{layout:{i:"LayersPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??7,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??8,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"LayersPanel",type:Qn.FloatingPanel,title:"Layers",icon:$(l9,{}),titleBarMode:"win",rowHeight:Xl,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"LayersButton"}}}function KAe(t){return{layout:{i:"InfoButton",x:0,y:8,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"InfoButton",type:Qn.FloatingButton,tooltip:"Info",icon:$(a9,{}),bindToPanelId:"InfoPanel",shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function ZAe(t){return{layout:{i:"InfoPanel",x:10,y:(t==null?void 0:t.y)??0,w:5,h:3,minW:5,minH:3,resizeHandles:Gc,isDraggable:!0,isResizable:!0},resource:{id:"InfoPanel",type:Qn.FloatingPanel,title:"Information",icon:$(a9,{}),titleBarMode:"win",rowHeight:Xl,bindToButtonId:"InfoButton",shown:!1}}}function QAe(t){return{layout:{i:"UndoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"UndoButton",type:Qn.FloatingButton,tooltip:"undo",icon:$(Lye,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function JAe(t){return{layout:{i:"RedoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1},resource:{id:"RedoButton",type:Qn.FloatingButton,tooltip:"redo",icon:$(Sye,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,onClick:t==null?void 0:t.onClick}}}function ePe(t){return{layout:{i:"EditPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??9,h:(t==null?void 0:t.h)??3,resizeHandles:Gc,isDraggable:!0,isResizable:!0},resource:{id:"EditPanel",type:Qn.FloatingPanel,title:"Edit Panel",icon:$(LO,{}),titleBarMode:"win",rowHeight:Xl,shown:(t==null?void 0:t.shown)||!1,bindToButtonId:"EditButton"}}}function tPe(t){return{layout:{i:"TimeMachineButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??8,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[]},resource:{id:"TimeMachineButton",type:Qn.FloatingButton,bindToPanelId:"TimeMachinePanel",tooltip:"Open TimeMachine Panel",icon:$(o9,{}),shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0}}}function nPe(t){return{layout:{i:"TimeMachinePanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??20,w:(t==null?void 0:t.w)??12,h:(t==null?void 0:t.h)??3,minW:12,minH:3,isDraggable:!0,isResizable:!0,resizeHandles:Gc},resource:{id:"TimeMachinePanel",type:Qn.FloatingPanel,title:"Time Machine",icon:$(o9,{}),titleBarMode:"win",rowHeight:Xl,shown:(t==null?void 0:t.shown)??!0,bindToButtonId:"TimeMachineButton"}}}const rPe=At(Vt)`
  margin-top: 30px;
  margin-right: 20px;
  margin-left: 20px;
`,iPe=[{value:0,label:"0"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"40"}],sPe=()=>$(rPe,{children:$(rb,{defaultValue:0,step:1,marks:iPe,min:0,max:60,valueLabelDisplay:"on"})}),Xl=32,Gc=["se","sw","nw"],oPe=t=>t&&t>0?Math.floor(t/Xl)-3:0,aPe=(t,e)=>t.x?t.x>=0?t.x:lM+t.x:0,lPe=(t,e)=>{if(t.y){if(t.y>=0)return t.y;if(e.height&&e.height>0)return oPe(e.height)+t.y}return 0},VU=new bCe,cPe=t=>{const e=Ts(),{width:n,height:r}=B3(),{backgroundColor:i,type:s,uuid:o,uiState:a,setUIState:l,matrices:c,preferences:u,updateAndSetMatrices:d}=t,{set:h,current:f,undo:p,redo:m,history:b,future:y}=mS(Th),{setSessionChartScale:x,setSessionChartType:_}=GSe({setUIState:l}),[w,E]=P.useState([]),[S,A]=P.useState({}),[k,M]=P.useState({}),I=({zoom:K,y:W,x:ne})=>{},B=({zoom:K,y:W,x:ne})=>{l(pe=>{pe.viewportCenter=[K,W,ne],Te(pe.viewportCenter)})},{onFit:R}=VSe({width:n,height:r,locations:f==null?void 0:f.locations,uiState:a,setUIState:l}),O=P.useCallback(K=>{l(W=>{W.viewportCenter=K,Te(W.viewportCenter)})},[l]),{onAddBulkLocations:C,onRemoveBulkLocations:F,onDragStart:q,onDrag:G,onDragEnd:j,onFocus:H,onUnfocus:Z,onSelect:X,onUnselect:ee,onPointerUp:ve,onClearSelection:oe}=jSe({sessionState:f,setSessionState:h,uiState:a,setUIState:l,matrices:c,updateAndSetMatrices:d}),{onParameterSetChange:fe,setManufactureShare:be,setTransportationCost:Le,setElasticitySubstitution:se,setNumLocations:ue}=yCe({type:s,sessionState:f,setSessionState:h,onAddBulkLocations:C,onRemoveBulkLocations:F}),Te=P.useCallback(K=>{const W=K.map(pe=>parseFloat(pe.toFixed(4))),ne=`/${s}/${o}/${W[0]}/${W[1]}/${W[2]}/`;VU.runAsyncFunction(()=>{e(ne,{replace:!0})})},[e,s,o]),ge=P.useCallback(K=>{l(W=>(W.viewportCenter[0]+=K,Te(W.viewportCenter),W))},[l]),Me=P.useCallback(()=>ge(.25),[ge]),Se=P.useCallback(()=>ge(-.25),[ge]),D=P.useCallback(()=>{const K=R();l(W=>(W.viewportCenter=K,Te(K),W))},[R,Te,l]),ie={BackgroundPanel:{},HomeButton:{},ChartButton:{enabled:!1},ChartPanel:{},InputOutputButton:{enabled:!1},InputOutputPanel:{shown:!1},EditButton:{enabled:!1},EditPanel:{shown:!1},ParametersButton:{enabled:!1},ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},TimerControlButton:{enabled:!1},TimerControlPanel:{y:9},MatricesButton:{enabled:!1},MatricesPanel:{height:r,y:-9},LayersButton:{enabled:!1},LayersPanel:{shown:!1},TimeMachineButton:{enabled:!1},TimeMachinePanel:{shown:!0,x:-1,y:-4,height:r,w:27,h:3},InfoButton:{shown:!1},InfoPanel:{shown:!1},UndoButton:{height:r,y:-6,onClick:p,enabled:b.length>0},RedoButton:{height:r,y:-5,onClick:m,enabled:y.length>0},ZoomInButton:{height:r,y:-3,onClick:Me},ZoomOutButton:{height:r,y:-2,onClick:Se},FitScreenButton:{height:r,y:-1,onClick:D}},ae={[sn.Racetrack]:{...ie},[sn.Graph]:{...ie,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0}},[sn.RealWorld]:{...ie,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0},LayersPanel:{x:-1,y:10,shown:!0},MatricesButton:{enabled:!0},MatricesPanel:{height:r,y:-9,shown:!1}}};if(P.useEffect(()=>{const K=[],W={};return[vCe,FSe,zSe,USe,WSe,$Se,$Ae,ePe,jAe,GAe,HAe,VAe,tPe,nPe,WAe,XAe,YAe,qAe,KAe,ZAe,QAe,JAe,MU,LU,kU].forEach((ne,pe)=>{const me=ae[s][ne.name]&&ne(ae[s][ne.name]);me&&(me.layout&&(me.layout.x=aPe(me.layout,ae[s][ne.name]),me.layout.y=lPe(me.layout,ae[s][ne.name]),K.push({...me.layout})),me.resource&&(W[me.resource.id]=me.resource))}),E(K),A(W),M(ne=>({ChartPanel:$(DU,{sessionState:f,uiState:a,setSessionChartType:_,setSessionChartScale:x,onSelect:X,onUnselect:ee,onFocus:H,onUnfocus:Z}),ParametersPanel:$($U,{type:t.type,parameterSet:f.parameterSet,sessionStateAtom:Th,onParameterSetChange:fe,setNumLocations:ue}),InputOutputPanel:$(dCe,{}),EditPanel:$(mCe,{state:{addLocation:!1,removeLocation:!1,addEdge:!1,removeEdge:!1,autoGraphLayout:!1,undo:!1,redo:!1},onAddLocation:function(){throw new Error("Function not implemented.")},onRemoveLocation:function(){throw new Error("Function not implemented.")},onAddEdge:function(){throw new Error("Function not implemented.")},onRemoveEdge:function(){throw new Error("Function not implemented.")}}),InfoPanel:$(_Ce,{}),LayersPanel:$(pAe,{}),MatricesPanel:$(GU,{sessionState:f,matrices:c,uiState:a,preferences:u,onSelect:X,onFocus:H,onUnfocus:Z})})),()=>{VU.cancelAll(),console.warn("TODO: store viewportCenter in DB "+JSON.stringify(a.viewportCenter))}},[]),P.useEffect(()=>{A(K=>(K.ZoomInButton=MU({height:r,onClick:Me}).resource,K))},[Se]),P.useEffect(()=>{A(K=>(K.ZoomOutButton=LU({height:r,onClick:Se}).resource,K))},[Me]),P.useEffect(()=>{A(K=>(K.FitScreenButton=kU({height:r,onClick:D}).resource,K))},[D]),P.useEffect(()=>{M(K=>({...K,ParametersPanel:$($U,{type:t.type,sessionStateAtom:Th,parameterSet:f.parameterSet,onParameterSetChange:fe,setNumLocations:ue,setManufactureShare:be,setTransportationCost:Le,setElasticitySubstitution:se})}))},[f.parameterSet]),P.useEffect(()=>{M(K=>({...K,ChartPanel:$(DU,{sessionState:f,uiState:a,setSessionChartType:_,setSessionChartScale:x,onSelect:X,onUnselect:ee,onFocus:H,onUnfocus:Z})}))},[f.locations,a]),P.useEffect(()=>{M(K=>({...K,MatricesPanel:$(GU,{sessionState:f,matrices:c,uiState:a,preferences:u,onSelect:X,onFocus:H,onUnfocus:Z})}))},[c]),P.useEffect(()=>{M(K=>{const W={...K};return W.TimerControlPanel=$(UAe,{simulation:t.simulation}),W})},[t.simulation]),P.useEffect(()=>{M(K=>({...K,TimeMachinePanel:$(sPe,{})}))},[a]),!(w.length===0||Object.keys(S).length===0||Object.keys(k).length===0))return $(BSe,{initialLayouts:w,resources:S,gridItemChildrenMap:k,backgroundColor:i,children:t.backgroundPanel({width:n,height:r,sessionState:f,uiState:a,matrices:c,onDragStart:q,onDragEnd:j,onDrag:G,onFocus:H,onUnfocus:Z,onPointerUp:ve,onClearSelection:oe,onMoved:I,onMovedEnd:B,overrideViewportCenter:O})})},uPe=({startSimulation:t,stopSimulation:e,resetSimulation:n,tickSimulation:r})=>zAe({onStarted:()=>{requestAnimationFrame(()=>{t()})},onReset:()=>{requestAnimationFrame(()=>{n()})},onStopped:()=>{e()},tick:()=>{requestAnimationFrame(()=>{r()})},minInterval:5,maxInterval:2e3,initialIntervalScale:.5});function dPe(){const[t,e]=P.useState({open:!1,vertical:"top",horizontal:"center",message:""}),n=P.useCallback(i=>{e({...t,open:!0,message:i})},[t,e]),r=P.useCallback(()=>{e({...t,open:!1})},[t,e]);return{openSnackBar:n,closeSnackBar:r}}const hPe=function(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})},fPe=function(t){var e=[];return t.ctrlKey&&e.push("ctrlKey"),t.shiftKey&&e.push("shiftKey"),t.altKey&&e.push("altKey"),t.metaKey&&e.push("metaKey"),e};var pPe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};const WU=function(t){var e=t.toLowerCase();return e.length===1?[e]:e.includes("+")?e.replace(/\s+/g,"").split(/\b\+/g):pPe([],e.match(/[^\s"']+|"([^"]*)"|'([^']*)'/g)||[],!0).map(function(n){return n.replace(/("|').*?("|')/," ")})},gPe=function(t,e){return t.length===e.length&&t.every(function(n){return e.includes(n)})};var mPe={control:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"};const vPe=function(t){return t.map(function(e){return mPe[e]})},dM=function(t){return t.altKey||t.ctrlKey||t.shiftKey||t.metaKey},yPe=function(t){return t[t.length-1]},bPe=function(t){return t.slice(0,-1)};var _Pe=["INPUT","TEXTAREA"];const xPe=function(t,e,n){if(!t.key&&!dM(t))return!0;var r=t.target||{};return r.isContentEditable&&!e?!0:_Pe.includes(r.nodeName)&&!(n!=null&&n.includes(r.nodeName))};(function(){if(!(typeof self>"u"||!self.document)){var t=KeyboardEvent.prototype,e=Object.getOwnPropertyDescriptor(t,"key");if(e){var n={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};Object.defineProperty(t,"key",{get:function(){var r=e.get.call(this);return n.hasOwnProperty(r)?n[r]:r}})}}})();var wPe=1e3,EPe="*",C_=function(t,e,n){var r=P.useMemo(function(){return Array.isArray(t)?t.map(WU):[WU(t)]},[t]);P.useEffect(function(){var i={},s={},o=n||{},a=o.enabled,l=o.enableOnContentEditable,c=o.ignoredElementWhitelist,u=o.eventListenerOptions,d=function(b){clearTimeout(s[b])},h=function(b){d(b),i[b]=[]},f=function(b,y,x){d(x),i[x]=i[x]||[],s[x]=window.setTimeout(function(){h(x)},wPe);var _=i[x];_.push(b.key.toLowerCase()),hPe(_,y)&&(h(x),e(b))},p=function(b,y){var x=yPe(y),_=vPe(bPe(y)),w=fPe(b),E=gPe(_,w);E&&b.key.toLowerCase()===x&&e(b)},m=function(b){xPe(b,l,c)||r.forEach(function(y,x){if(y.length===1&&y[0]===EPe){e(b);return}if(dM(b)){p(b,y);return}if(y.length>1&&!dM(b)){f(b,y,x);return}b.key.toLowerCase()===y[0]&&e(b)})};return a!==!1&&window.addEventListener("keydown",m,u),function(){window.removeEventListener("keydown",m,u)}},[r,e,n==null?void 0:n.enabled,n==null?void 0:n.enableOnContentEditable,n==null?void 0:n.ignoredElementWhitelist,n==null?void 0:n.eventListenerOptions])};const TPe=({sessionStateAtom:t,openSnackBar:e,closeSnackBar:n,uiState:r,setUIState:i})=>{const{undo:s,redo:o,current:a,history:l,future:c,staging:u}=mS(t),d=P.useCallback(()=>{requestAnimationFrame(()=>{i(f=>{f.focusedIndices=[],f.selectedIndices=[]}),s()})},[s,i]),h=P.useCallback(()=>{requestAnimationFrame(()=>{i(f=>{f.focusedIndices=[],f.selectedIndices=[]}),o()})},[o,i]);C_(["Meta+z","Control+z"],()=>{if(l.length===0){e("No more undo!");return}d()}),C_(["Shift+Meta+z","Shift+Control+z"],()=>{if(c.length===0){e("No more redo!");return}h()}),C_(["h"],()=>{console.log({numLocations:a.locations.length,locations:a.locations,selectedIndices:r.selectedIndices}),console.log({sessionState:a,history:l,staging:u,future:c})}),C_(["e"],()=>{console.log(JSON.stringify(a.edges,null," "))})};c7();const G3=t=>{var k,M,I,B;const{type:e,uuid:n,backgroundPanel:r,backgroundColor:i,viewportCenter:s}=t,{set:o,current:a}=mS(Th),[l,c]=h7(Lwe),{openSnackBar:u,closeSnackBar:d}=dPe();TPe({uiState:l,setUIState:c,openSnackBar:u,closeSnackBar:d,sessionStateAtom:Th});const h=_h(Ywe),[f,p]=qu(Mwe);P.useEffect(()=>{c(R=>(R.viewportCenter=s,R))},[c,s]);const m=()=>{const R=Cg[e].find(O=>a.parameterSet.caseId===O.caseId);R&&o(O=>{O.parameterSet.numLocations=R.numLocations,O.parameterSet.manufactureShare=R.manufactureShare,O.parameterSet.transportationCost=R.transportationCost,O.parameterSet.elasticitySubstitution=R.elasticitySubstitution})};function b(){o(R=>{},!0,"simulationStart")}function y(){o(R=>{},!0,"simulationStop")}function x(){o(R=>{R.locations.forEach(O=>uxe(O,R.locations.length)),m()},!0,"resetSimulation")}function _(){o(R=>{Zwe(R,f.transportationCostMatrix)},!1,"tick")}const w=uPe({startSimulation:b,stopSimulation:y,resetSimulation:x,tickSimulation:_}),E=Qwe((k=a==null?void 0:a.locations)==null?void 0:k.length,(M=a==null?void 0:a.edges)==null?void 0:M.length),S=(R,O,C)=>{if(!E)throw new Error;return E.updateAdjacencyMatrix(R,O,C)},A=(R,O)=>{S(R,O,a.parameterSet.transportationCost).then(C=>{p({adjacencyMatrix:C.adjacencyMatrix,distanceMatrix:C.distanceMatrix,predecessorMatrix:C.predecessorMatrix,transportationCostMatrix:C.transportationCostMatrix})})};return P.useEffect(()=>{A(a==null?void 0:a.locations,a==null?void 0:a.edges)},[a==null?void 0:a.locations,a==null?void 0:a.edges,(I=a==null?void 0:a.parameterSet)==null?void 0:I.transportationCost]),P.useEffect(()=>{var R,O;(R=a==null?void 0:a.parameterSet)!=null&&R.title?document.title=`Eco-Geo - ${(O=a==null?void 0:a.parameterSet)==null?void 0:O.title}`:document.title="Eco-Geo - Geological Economics Modeling Simulator"},[(B=a==null?void 0:a.parameterSet)==null?void 0:B.title]),$(cPe,{backgroundColor:i,type:e,uuid:n,simulation:w,matrices:f,setMatrices:p,uiState:l,setUIState:c,preferences:h,updateMatrices:S,updateAndSetMatrices:A,backgroundPanel:r})};var UX={exports:{}},_d=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(_d||{}),H3=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(H3||{}),hE=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(hE||{}),kt=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(kt||{}),Zo=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Zo||{}),Qe=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Qe||{}),Ch=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Ch||{}),Et=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Et||{}),at=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(at||{}),Cl=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Cl||{}),Ol=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ol||{}),Xa=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Xa||{}),vs=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(vs||{}),Ra=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Ra||{}),LS=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(LS||{}),uo=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(uo||{}),Hr=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Hr||{}),$X=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))($X||{}),Fr=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Fr||{}),ja=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(ja||{});const jX={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},lt={ADAPTER:jX,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var kP=/iPhone/i,XU=/iPod/i,YU=/iPad/i,qU=/\biOS-universal(?:.+)Mac\b/i,OP=/\bAndroid(?:.+)Mobile\b/i,KU=/Android/i,Xf=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,A_=/Silk/i,ec=/Windows Phone/i,ZU=/\bWindows(?:.+)ARM\b/i,QU=/BlackBerry/i,JU=/BB10/i,e6=/Opera Mini/i,t6=/\b(CriOS|Chrome)(?:.+)Mobile/i,n6=/Mobile(?:.+)Firefox\b/i,r6=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function SPe(t){return function(e){return e.test(t)}}function i6(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=SPe(n),s={apple:{phone:i(kP)&&!i(ec),ipod:i(XU),tablet:!i(kP)&&(i(YU)||r6(e))&&!i(ec),universal:i(qU),device:(i(kP)||i(XU)||i(YU)||i(qU)||r6(e))&&!i(ec)},amazon:{phone:i(Xf),tablet:!i(Xf)&&i(A_),device:i(Xf)||i(A_)},android:{phone:!i(ec)&&i(Xf)||!i(ec)&&i(OP),tablet:!i(ec)&&!i(Xf)&&!i(OP)&&(i(A_)||i(KU)),device:!i(ec)&&(i(Xf)||i(A_)||i(OP)||i(KU))||i(/\bokhttp\b/i)},windows:{phone:i(ec),tablet:i(ZU),device:i(ec)||i(ZU)},other:{blackberry:i(QU),blackberry10:i(JU),opera:i(e6),firefox:i(n6),chrome:i(t6),device:i(QU)||i(JU)||i(e6)||i(n6)||i(t6)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const CPe=i6.default??i6,La=CPe(globalThis.navigator);lt.RETINA_PREFIX=/@([0-9\.]+)x/;lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var GX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,f,p){var m=n?n+c:c;if(!this._events[m])return!1;var b=this._events[m],y=arguments.length,x,_;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,d),!0;case 4:return b.fn.call(b.context,u,d,h),!0;case 5:return b.fn.call(b.context,u,d,h,f),!0;case 6:return b.fn.call(b.context,u,d,h,f,p),!0}for(_=1,x=new Array(y-1);_<y;_++)x[_-1]=arguments[_];b.fn.apply(b.context,x)}else{var w=b.length,E;for(_=0;_<w;_++)switch(b[_].once&&this.removeListener(c,b[_].fn,void 0,!0),y){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,u);break;case 3:b[_].fn.call(b[_].context,u,d);break;case 4:b[_].fn.call(b[_].context,u,d,h);break;default:if(!x)for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];b[_].fn.apply(b[_].context,x)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,b=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&b.push(p[m]);b.length?this._events[f]=b.length===1?b[0]:b:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(GX);var APe=GX.exports;const am=hd(APe);var fE={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */fE.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof xi=="object"&&xi;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,c=1,u=26,d=38,h=700,f=72,p=128,m="-",b=/^xn--/,y=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-c,E=Math.floor,S=String.fromCharCode,A;function k(Z){throw new RangeError(_[Z])}function M(Z,X){for(var ee=Z.length,ve=[];ee--;)ve[ee]=X(Z[ee]);return ve}function I(Z,X){var ee=Z.split("@"),ve="";ee.length>1&&(ve=ee[0]+"@",Z=ee[1]),Z=Z.replace(x,".");var oe=Z.split("."),fe=M(oe,X).join(".");return ve+fe}function B(Z){for(var X=[],ee=0,ve=Z.length,oe,fe;ee<ve;)oe=Z.charCodeAt(ee++),oe>=55296&&oe<=56319&&ee<ve?(fe=Z.charCodeAt(ee++),(fe&64512)==56320?X.push(((oe&1023)<<10)+(fe&1023)+65536):(X.push(oe),ee--)):X.push(oe);return X}function R(Z){return M(Z,function(X){var ee="";return X>65535&&(X-=65536,ee+=S(X>>>10&1023|55296),X=56320|X&1023),ee+=S(X),ee}).join("")}function O(Z){return Z-48<10?Z-22:Z-65<26?Z-65:Z-97<26?Z-97:l}function C(Z,X){return Z+22+75*(Z<26)-((X!=0)<<5)}function F(Z,X,ee){var ve=0;for(Z=ee?E(Z/h):Z>>1,Z+=E(Z/X);Z>w*u>>1;ve+=l)Z=E(Z/w);return E(ve+(w+1)*Z/(Z+d))}function q(Z){var X=[],ee=Z.length,ve,oe=0,fe=p,be=f,Le,se,ue,Te,ge,Me,Se,D,ie;for(Le=Z.lastIndexOf(m),Le<0&&(Le=0),se=0;se<Le;++se)Z.charCodeAt(se)>=128&&k("not-basic"),X.push(Z.charCodeAt(se));for(ue=Le>0?Le+1:0;ue<ee;){for(Te=oe,ge=1,Me=l;ue>=ee&&k("invalid-input"),Se=O(Z.charCodeAt(ue++)),(Se>=l||Se>E((a-oe)/ge))&&k("overflow"),oe+=Se*ge,D=Me<=be?c:Me>=be+u?u:Me-be,!(Se<D);Me+=l)ie=l-D,ge>E(a/ie)&&k("overflow"),ge*=ie;ve=X.length+1,be=F(oe-Te,ve,Te==0),E(oe/ve)>a-fe&&k("overflow"),fe+=E(oe/ve),oe%=ve,X.splice(oe++,0,fe)}return R(X)}function G(Z){var X,ee,ve,oe,fe,be,Le,se,ue,Te,ge,Me=[],Se,D,ie,ae;for(Z=B(Z),Se=Z.length,X=p,ee=0,fe=f,be=0;be<Se;++be)ge=Z[be],ge<128&&Me.push(S(ge));for(ve=oe=Me.length,oe&&Me.push(m);ve<Se;){for(Le=a,be=0;be<Se;++be)ge=Z[be],ge>=X&&ge<Le&&(Le=ge);for(D=ve+1,Le-X>E((a-ee)/D)&&k("overflow"),ee+=(Le-X)*D,X=Le,be=0;be<Se;++be)if(ge=Z[be],ge<X&&++ee>a&&k("overflow"),ge==X){for(se=ee,ue=l;Te=ue<=fe?c:ue>=fe+u?u:ue-fe,!(se<Te);ue+=l)ae=se-Te,ie=l-Te,Me.push(S(C(Te+ae%ie,0))),se=E(ae/ie);Me.push(S(C(se,0))),fe=F(ee,D,ve==oe),ee=0,++ve}++ee,++X}return Me.join("")}function j(Z){return I(Z,function(X){return b.test(X)?q(X.slice(4).toLowerCase()):X})}function H(Z){return I(Z,function(X){return y.test(X)?"xn--"+G(X):X})}if(o={version:"1.4.1",ucs2:{decode:B,encode:R},decode:q,encode:G,toASCII:H,toUnicode:j},r&&i)if(t.exports==r)i.exports=o;else for(A in o)o.hasOwnProperty(A)&&(r[A]=o[A]);else n.punycode=o})(xi)})(fE,fE.exports);var PPe=fE.exports,V3=typeof Map=="function"&&Map.prototype,NP=Object.getOwnPropertyDescriptor&&V3?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,pE=V3&&NP&&typeof NP.get=="function"?NP.get:null,s6=V3&&Map.prototype.forEach,W3=typeof Set=="function"&&Set.prototype,DP=Object.getOwnPropertyDescriptor&&W3?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,gE=W3&&DP&&typeof DP.get=="function"?DP.get:null,o6=W3&&Set.prototype.forEach,RPe=typeof WeakMap=="function"&&WeakMap.prototype,_v=RPe?WeakMap.prototype.has:null,IPe=typeof WeakSet=="function"&&WeakSet.prototype,xv=IPe?WeakSet.prototype.has:null,MPe=typeof WeakRef=="function"&&WeakRef.prototype,a6=MPe?WeakRef.prototype.deref:null,LPe=Boolean.prototype.valueOf,kPe=Object.prototype.toString,OPe=Function.prototype.toString,NPe=String.prototype.match,X3=String.prototype.slice,Du=String.prototype.replace,DPe=String.prototype.toUpperCase,l6=String.prototype.toLowerCase,HX=RegExp.prototype.test,c6=Array.prototype.concat,El=Array.prototype.join,BPe=Array.prototype.slice,u6=Math.floor,hM=typeof BigInt=="function"?BigInt.prototype.valueOf:null,BP=Object.getOwnPropertySymbols,fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="object",rs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Pg||!0)?Symbol.toStringTag:null,VX=Object.prototype.propertyIsEnumerable,d6=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function h6(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||HX.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-u6(-t):u6(t);if(r!==t){var i=String(r),s=X3.call(e,i.length+1);return Du.call(i,n,"$&_")+"."+Du.call(Du.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Du.call(e,n,"$&_")}var pM=T7,f6=pM.custom,p6=XX(f6)?f6:null,FPe=function t(e,n,r,i){var s=n||{};if(wu(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(wu(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=wu(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(wu(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(wu(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return qX(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?h6(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?h6(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return gM(e)?"[Array]":"[Object]";var d=n2e(s,r);if(typeof i>"u")i=[];else if(YX(i,e)>=0)return"[Circular]";function h(O,C,F){if(C&&(i=BPe.call(i),i.push(C)),F){var q={depth:s.depth};return wu(s,"quoteStyle")&&(q.quoteStyle=s.quoteStyle),t(O,q,r+1,i)}return t(O,s,r+1,i)}if(typeof e=="function"&&!g6(e)){var f=XPe(e),p=P_(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+El.call(p,", ")+" }":"")}if(XX(e)){var m=Pg?Du.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):fM.call(e);return typeof e=="object"&&!Pg?l0(m):m}if(JPe(e)){for(var b="<"+l6.call(String(e.nodeName)),y=e.attributes||[],x=0;x<y.length;x++)b+=" "+y[x].name+"="+WX(zPe(y[x].value),"double",s);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+l6.call(String(e.nodeName))+">",b}if(gM(e)){if(e.length===0)return"[]";var _=P_(e,h);return d&&!t2e(_)?"["+mM(_,d)+"]":"[ "+El.call(_,", ")+" ]"}if($Pe(e)){var w=P_(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!VX.call(e,"cause")?"{ ["+String(e)+"] "+El.call(c6.call("[cause]: "+h(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+El.call(w,", ")+" }"}if(typeof e=="object"&&o){if(p6&&typeof e[p6]=="function"&&pM)return pM(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(YPe(e)){var E=[];return s6&&s6.call(e,function(O,C){E.push(h(C,e,!0)+" => "+h(O,e))}),m6("Map",pE.call(e),E,d)}if(ZPe(e)){var S=[];return o6&&o6.call(e,function(O){S.push(h(O,e))}),m6("Set",gE.call(e),S,d)}if(qPe(e))return FP("WeakMap");if(QPe(e))return FP("WeakSet");if(KPe(e))return FP("WeakRef");if(GPe(e))return l0(h(Number(e)));if(VPe(e))return l0(h(hM.call(e)));if(HPe(e))return l0(LPe.call(e));if(jPe(e))return l0(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===xi)return"{ [object globalThis] }";if(!UPe(e)&&!g6(e)){var A=P_(e,h),k=d6?d6(e)===Object.prototype:e instanceof Object||e.constructor===Object,M=e instanceof Object?"":"null prototype",I=!k&&rs&&Object(e)===e&&rs in e?X3.call(xd(e),8,-1):M?"Object":"",B=k||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",R=B+(I||M?"["+El.call(c6.call([],I||[],M||[]),": ")+"] ":"");return A.length===0?R+"{}":d?R+"{"+mM(A,d)+"}":R+"{ "+El.call(A,", ")+" }"}return String(e)};function WX(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function zPe(t){return Du.call(String(t),/"/g,"&quot;")}function gM(t){return xd(t)==="[object Array]"&&(!rs||!(typeof t=="object"&&rs in t))}function UPe(t){return xd(t)==="[object Date]"&&(!rs||!(typeof t=="object"&&rs in t))}function g6(t){return xd(t)==="[object RegExp]"&&(!rs||!(typeof t=="object"&&rs in t))}function $Pe(t){return xd(t)==="[object Error]"&&(!rs||!(typeof t=="object"&&rs in t))}function jPe(t){return xd(t)==="[object String]"&&(!rs||!(typeof t=="object"&&rs in t))}function GPe(t){return xd(t)==="[object Number]"&&(!rs||!(typeof t=="object"&&rs in t))}function HPe(t){return xd(t)==="[object Boolean]"&&(!rs||!(typeof t=="object"&&rs in t))}function XX(t){if(Pg)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!fM)return!1;try{return fM.call(t),!0}catch{}return!1}function VPe(t){if(!t||typeof t!="object"||!hM)return!1;try{return hM.call(t),!0}catch{}return!1}var WPe=Object.prototype.hasOwnProperty||function(t){return t in this};function wu(t,e){return WPe.call(t,e)}function xd(t){return kPe.call(t)}function XPe(t){if(t.name)return t.name;var e=NPe.call(OPe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function YX(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function YPe(t){if(!pE||!t||typeof t!="object")return!1;try{pE.call(t);try{gE.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function qPe(t){if(!_v||!t||typeof t!="object")return!1;try{_v.call(t,_v);try{xv.call(t,xv)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function KPe(t){if(!a6||!t||typeof t!="object")return!1;try{return a6.call(t),!0}catch{}return!1}function ZPe(t){if(!gE||!t||typeof t!="object")return!1;try{gE.call(t);try{pE.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function QPe(t){if(!xv||!t||typeof t!="object")return!1;try{xv.call(t,xv);try{_v.call(t,_v)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function JPe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function qX(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return qX(X3.call(t,0,e.maxStringLength),e)+r}var i=Du.call(Du.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,e2e);return WX(i,"single",e)}function e2e(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+DPe.call(e.toString(16))}function l0(t){return"Object("+t+")"}function FP(t){return t+" { ? }"}function m6(t,e,n,r){var i=r?mM(n,r):El.call(n,", ");return t+" ("+e+") {"+i+"}"}function t2e(t){for(var e=0;e<t.length;e++)if(YX(t[e],`
`)>=0)return!1;return!0}function n2e(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=El.call(Array(t.indent+1)," ");else return null;return{base:n,prev:El.call(Array(e+1),n)}}function mM(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+El.call(t,","+n)+`
`+e.prev}function P_(t,e){var n=gM(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=wu(t,i)?e(t[i],t):""}var s=typeof BP=="function"?BP(t):[],o;if(Pg){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)wu(t,l)&&(n&&String(Number(l))===l&&l<t.length||Pg&&o["$"+l]instanceof Symbol||(HX.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof BP=="function")for(var c=0;c<s.length;c++)VX.call(t,s[c])&&r.push("["+e(s[c])+"]: "+e(t[s[c]],t));return r}var Y3=af,lm=xwe,r2e=FPe,i2e=Y3("%TypeError%"),R_=Y3("%WeakMap%",!0),I_=Y3("%Map%",!0),s2e=lm("WeakMap.prototype.get",!0),o2e=lm("WeakMap.prototype.set",!0),a2e=lm("WeakMap.prototype.has",!0),l2e=lm("Map.prototype.get",!0),c2e=lm("Map.prototype.set",!0),u2e=lm("Map.prototype.has",!0),q3=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},d2e=function(t,e){var n=q3(t,e);return n&&n.value},h2e=function(t,e,n){var r=q3(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},f2e=function(t,e){return!!q3(t,e)},p2e=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new i2e("Side channel does not contain "+r2e(s))},get:function(s){if(R_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return s2e(e,s)}else if(I_){if(n)return l2e(n,s)}else if(r)return d2e(r,s)},has:function(s){if(R_&&s&&(typeof s=="object"||typeof s=="function")){if(e)return a2e(e,s)}else if(I_){if(n)return u2e(n,s)}else if(r)return f2e(r,s);return!1},set:function(s,o){R_&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new R_),o2e(e,s,o)):I_?(n||(n=new I_),c2e(n,s,o)):(r||(r={key:{},next:null}),h2e(r,s,o))}};return i},g2e=String.prototype.replace,m2e=/%20/g,zP={RFC1738:"RFC1738",RFC3986:"RFC3986"},K3={default:zP.RFC3986,formatters:{RFC1738:function(t){return g2e.call(t,m2e,"+")},RFC3986:function(t){return String(t)}},RFC1738:zP.RFC1738,RFC3986:zP.RFC3986},v2e=K3,UP=Object.prototype.hasOwnProperty,rh=Array.isArray,cl=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),y2e=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(rh(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},KX=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},b2e=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(rh(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!UP.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return rh(e)&&!rh(n)&&(i=KX(e,r)),rh(e)&&rh(n)?(n.forEach(function(s,o){if(UP.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return UP.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},_2e=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},x2e=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},w2e=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===v2e.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+cl[c];continue}if(c<2048){a=a+(cl[192|c>>6]+cl[128|c&63]);continue}if(c<55296||c>=57344){a=a+(cl[224|c>>12]+cl[128|c>>6&63]+cl[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=cl[240|c>>18]+cl[128|c>>12&63]+cl[128|c>>6&63]+cl[128|c&63]}return a},E2e=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(n.push({obj:o,prop:c}),r.push(u))}return y2e(n),e},T2e=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},S2e=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},C2e=function(e,n){return[].concat(e,n)},A2e=function(e,n){if(rh(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},ZX={arrayToObject:KX,assign:_2e,combine:C2e,compact:E2e,decode:x2e,encode:w2e,isBuffer:S2e,isRegExp:T2e,maybeMap:A2e,merge:b2e},QX=p2e,$x=ZX,wv=K3,P2e=Object.prototype.hasOwnProperty,v6={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},cc=Array.isArray,R2e=Array.prototype.push,JX=function(t,e){R2e.apply(t,cc(e)?e:[e])},I2e=Date.prototype.toISOString,y6=wv.default,Yi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:$x.encode,encodeValuesOnly:!1,format:y6,formatter:wv.formatters[y6],indices:!1,serializeDate:function(e){return I2e.call(e)},skipNulls:!1,strictNullHandling:!1},M2e=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},$P={},L2e=function t(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,b){for(var y=e,x=b,_=0,w=!1;(x=x.get($P))!==void 0&&!w;){var E=x.get(e);if(_+=1,typeof E<"u"){if(E===_)throw new RangeError("Cyclic object value");w=!0}typeof x.get($P)>"u"&&(_=0)}if(typeof l=="function"?y=l(n,y):y instanceof Date?y=d(y):r==="comma"&&cc(y)&&(y=$x.maybeMap(y,function(q){return q instanceof Date?d(q):q})),y===null){if(s)return a&&!p?a(n,Yi.encoder,m,"key",h):n;y=""}if(M2e(y)||$x.isBuffer(y)){if(a){var S=p?n:a(n,Yi.encoder,m,"key",h);return[f(S)+"="+f(a(y,Yi.encoder,m,"value",h))]}return[f(n)+"="+f(String(y))]}var A=[];if(typeof y>"u")return A;var k;if(r==="comma"&&cc(y))p&&a&&(y=$x.maybeMap(y,a)),k=[{value:y.length>0?y.join(",")||null:void 0}];else if(cc(l))k=l;else{var M=Object.keys(y);k=c?M.sort(c):M}for(var I=i&&cc(y)&&y.length===1?n+"[]":n,B=0;B<k.length;++B){var R=k[B],O=typeof R=="object"&&typeof R.value<"u"?R.value:y[R];if(!(o&&O===null)){var C=cc(y)?typeof r=="function"?r(I,R):I:I+(u?"."+R:"["+R+"]");b.set(e,_);var F=QX();F.set($P,b),JX(A,t(O,C,r,i,s,o,r==="comma"&&p&&cc(y)?null:a,l,c,u,d,h,f,p,m,F))}}return A},k2e=function(e){if(!e)return Yi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||Yi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=wv.default;if(typeof e.format<"u"){if(!P2e.call(wv.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=wv.formatters[r],s=Yi.filter;return(typeof e.filter=="function"||cc(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Yi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Yi.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Yi.charsetSentinel,delimiter:typeof e.delimiter>"u"?Yi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Yi.encode,encoder:typeof e.encoder=="function"?e.encoder:Yi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Yi.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Yi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Yi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Yi.strictNullHandling}},O2e=function(t,e){var n=t,r=k2e(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):cc(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in v6?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=v6[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=QX(),d=0;d<i.length;++d){var h=i[d];r.skipNulls&&n[h]===null||JX(o,L2e(n[h],h,l,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var f=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Rg=ZX,vM=Object.prototype.hasOwnProperty,N2e=Array.isArray,pi={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Rg.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},D2e=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},eY=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},B2e="utf8=%26%2310003%3B",F2e="utf8=%E2%9C%93",z2e=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,l,c=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===F2e?c="utf-8":o[l]===B2e&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],d=u.indexOf("]="),h=d===-1?u.indexOf("="):d+1,f,p;h===-1?(f=n.decoder(u,pi.decoder,c,"key"),p=n.strictNullHandling?null:""):(f=n.decoder(u.slice(0,h),pi.decoder,c,"key"),p=Rg.maybeMap(eY(u.slice(h+1),n),function(m){return n.decoder(m,pi.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=D2e(p)),u.indexOf("[]=")>-1&&(p=N2e(p)?[p]:p),vM.call(r,f)?r[f]=Rg.combine(r[f],p):r[f]=p}return r},U2e=function(t,e,n,r){for(var i=r?e:eY(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!n.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},$2e=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!r.plainObjects&&vM.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var d=0;r.depth>0&&(l=a.exec(s))!==null&&d<r.depth;){if(d+=1,!r.plainObjects&&vM.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),U2e(u,n,r,i)}},j2e=function(e){if(!e)return pi;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?pi.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?pi.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:pi.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:pi.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:pi.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pi.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:pi.comma,decoder:typeof e.decoder=="function"?e.decoder:pi.decoder,delimiter:typeof e.delimiter=="string"||Rg.isRegExp(e.delimiter)?e.delimiter:pi.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:pi.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:pi.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:pi.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:pi.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pi.strictNullHandling}},G2e=function(t,e){var n=j2e(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?z2e(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=$2e(a,r[a],n,typeof t=="string");i=Rg.merge(i,l,n)}return n.allowSparse===!0?i:Rg.compact(i)},H2e=O2e,V2e=G2e,W2e=K3,X2e={formats:W2e,parse:V2e,stringify:H2e},Y2e=PPe;function Ga(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var q2e=/^([a-z0-9.+-]+:)/i,K2e=/:[0-9]*$/,Z2e=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Q2e=["<",">",'"',"`"," ","\r",`
`,"	"],J2e=["{","}","|","\\","^","`"].concat(Q2e),yM=["'"].concat(J2e),b6=["%","/","?",";","#"].concat(yM),_6=["/","?","#"],eRe=255,x6=/^[+a-z0-9A-Z_-]{0,63}$/,tRe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nRe={javascript:!0,"javascript:":!0},bM={javascript:!0,"javascript:":!0},Qp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_M=X2e;function kS(t,e,n){if(t&&typeof t=="object"&&t instanceof Ga)return t;var r=new Ga;return r.parse(t,e,n),r}Ga.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=Z2e.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=_M.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=q2e.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&bM[c])&&(a=a.substr(2),this.slashes=!0)}if(!bM[c]&&(d||c&&!Qp[c])){for(var h=-1,f=0;f<_6.length;f++){var p=a.indexOf(_6[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,b;h===-1?b=a.lastIndexOf("@"):b=a.lastIndexOf("@",h),b!==-1&&(m=a.slice(0,b),a=a.slice(b+1),this.auth=decodeURIComponent(m)),h=-1;for(var f=0;f<b6.length;f++){var p=a.indexOf(b6[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var x=this.hostname.split(/\./),f=0,_=x.length;f<_;f++){var w=x[f];if(w&&!w.match(x6)){for(var E="",S=0,A=w.length;S<A;S++)w.charCodeAt(S)>127?E+="x":E+=w[S];if(!E.match(x6)){var k=x.slice(0,f),M=x.slice(f+1),I=w.match(tRe);I&&(k.push(I[1]),M.unshift(I[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=k.join(".");break}}}this.hostname.length>eRe?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=Y2e.toASCII(this.hostname));var B=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+B,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!nRe[u])for(var f=0,_=yM.length;f<_;f++){var O=yM[f];if(a.indexOf(O)!==-1){var C=encodeURIComponent(O);C===O&&(C=escape(O)),a=a.split(O).join(C)}}var F=a.indexOf("#");F!==-1&&(this.hash=a.substr(F),a=a.slice(0,F));var q=a.indexOf("?");if(q!==-1?(this.search=a.substr(q),this.query=a.substr(q+1),e&&(this.query=_M.parse(this.query)),a=a.slice(0,q)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Qp[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",G=this.search||"";this.path=B+G}return this.href=this.format(),this};function rRe(t){return typeof t=="string"&&(t=kS(t)),t instanceof Ga?t.format():Ga.prototype.format.call(t)}Ga.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=_M.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Qp[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function iRe(t,e){return kS(t,!1,!0).resolve(e)}Ga.prototype.resolve=function(t){return this.resolveObject(kS(t,!1,!0)).format()};Ga.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Ga;e.parse(t,!1,!0),t=e}for(var n=new Ga,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return Qp[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Qp[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!bM[t.protocol]){for(var _=(t.pathname||"").split("/");_.length&&!(t.host=_.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),n.pathname=_.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var h=n.pathname||"",f=n.search||"";n.path=h+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var p=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",b=m||p||n.host&&t.pathname,y=b,x=n.pathname&&n.pathname.split("/")||[],_=t.pathname&&t.pathname.split("/")||[],w=n.protocol&&!Qp[n.protocol];if(w&&(n.hostname="",n.port=null,n.host&&(x[0]===""?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host=null),b=b&&(_[0]===""||x[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=_;else if(_.length)x||(x=[]),x.pop(),x=x.concat(_),n.search=t.search,n.query=t.query;else if(t.search!=null){if(w){n.host=x.shift(),n.hostname=n.host;var E=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;E&&(n.auth=E.shift(),n.hostname=E.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=x.slice(-1)[0],A=(n.host||t.host||x.length>1)&&(S==="."||S==="..")||S==="",k=0,M=x.length;M>=0;M--)S=x[M],S==="."?x.splice(M,1):S===".."?(x.splice(M,1),k++):k&&(x.splice(M,1),k--);if(!b&&!y)for(;k--;k)x.unshift("..");b&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),A&&x.join("/").substr(-1)!=="/"&&x.push("");var I=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(w){n.hostname=I?"":x.length?x.shift():"",n.host=n.hostname;var E=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;E&&(n.auth=E.shift(),n.hostname=E.shift(),n.host=n.hostname)}return b=b||n.host&&x.length,b&&!I&&x.unshift(""),x.length>0?n.pathname=x.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Ga.prototype.parseHost=function(){var t=this.host,e=K2e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var sRe=kS,oRe=iRe,aRe=rRe;const w6={};function $t(t,e,n=3){if(w6[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),w6[e]=!0}const lRe={get parse(){return $t("7.3.0","utils.url.parse is deprecated, use native URL API instead."),sRe},get format(){return $t("7.3.0","utils.url.format is deprecated, use native URL API instead."),aRe},get resolve(){return $t("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),oRe}};function _a(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function c0(t){return t.split("?")[0].split("#")[0]}function cRe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uRe(t,e,n){return t.replace(new RegExp(cRe(e),"g"),n)}function dRe(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Zr={toPosix(t){return uRe(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){_a(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(_a(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const r=c0(this.toPosix(e??lt.ADAPTER.getBaseUrl())),i=c0(this.toPosix(n??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?Zr.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(_a(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=dRe(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return _a(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(_a(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(_a(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){_a(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){_a(t),e&&_a(e),t=c0(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){_a(t),t=c0(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){_a(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=c0(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let jP;async function tY(){return jP??(jP=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return vs.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return vs.UNPACK;const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(r),t.deleteTexture(n),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?vs.PMA:vs.UNPACK})()),jP}function hRe(){$t("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function fRe(){$t("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let GP;function nY(){return typeof GP>"u"&&(GP=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!lt.ADAPTER.getWebGLRenderingContext())return!1;const n=lt.ADAPTER.createCanvas();let r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const i=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),GP}var pRe={grad:.9,turn:360,rad:360/(2*Math.PI)},tc=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},yi=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Qo=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},rY=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},E6=function(t){return{r:Qo(t.r,0,255),g:Qo(t.g,0,255),b:Qo(t.b,0,255),a:Qo(t.a)}},HP=function(t){return{r:yi(t.r),g:yi(t.g),b:yi(t.b),a:yi(t.a,3)}},gRe=/^#([0-9a-f]{3,8})$/i,M_=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},iY=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},sY=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},T6=function(t){return{h:rY(t.h),s:Qo(t.s,0,100),l:Qo(t.l,0,100),a:Qo(t.a)}},S6=function(t){return{h:yi(t.h),s:yi(t.s),l:yi(t.l),a:yi(t.a,3)}},C6=function(t){return sY((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Ev=function(t){return{h:(e=iY(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},mRe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vRe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yRe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bRe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xM={string:[[function(t){var e=gRe.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?yi(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?yi(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=yRe.exec(t)||bRe.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:E6({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=mRe.exec(t)||vRe.exec(t);if(!e)return null;var n,r,i=T6({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(pRe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return C6(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return tc(e)&&tc(n)&&tc(r)?E6({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!tc(e)||!tc(n)||!tc(r))return null;var o=T6({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return C6(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!tc(e)||!tc(n)||!tc(r))return null;var o=function(a){return{h:rY(a.h),s:Qo(a.s,0,100),v:Qo(a.v,0,100),a:Qo(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return sY(o)},"hsv"]]},A6=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},_Re=function(t){return typeof t=="string"?A6(t.trim(),xM.string):typeof t=="object"&&t!==null?A6(t,xM.object):[null,void 0]},VP=function(t,e){var n=Ev(t);return{h:n.h,s:Qo(n.s+100*e,0,100),l:n.l,a:n.a}},WP=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},P6=function(t,e){var n=Ev(t);return{h:n.h,s:n.s,l:Qo(n.l+100*e,0,100),a:n.a}},wM=function(){function t(e){this.parsed=_Re(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return yi(WP(this.rgba),2)},t.prototype.isDark=function(){return WP(this.rgba)<.5},t.prototype.isLight=function(){return WP(this.rgba)>=.5},t.prototype.toHex=function(){return e=HP(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?M_(yi(255*s)):"","#"+M_(n)+M_(r)+M_(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return HP(this.rgba)},t.prototype.toRgbString=function(){return e=HP(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return S6(Ev(this.rgba))},t.prototype.toHslString=function(){return e=S6(Ev(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=iY(this.rgba),{h:yi(e.h),s:yi(e.s),v:yi(e.v),a:yi(e.a,3)};var e},t.prototype.invert=function(){return pl({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),pl(VP(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),pl(VP(this.rgba,-e))},t.prototype.grayscale=function(){return pl(VP(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),pl(P6(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),pl(P6(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?pl({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):yi(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Ev(this.rgba);return typeof e=="number"?pl({h:e,s:n.s,l:n.l,a:n.a}):yi(n.h)},t.prototype.isEqual=function(e){return this.toHex()===pl(e).toHex()},t}(),pl=function(t){return t instanceof wM?t:new wM(t)},R6=[],xRe=function(t){t.forEach(function(e){R6.indexOf(e)<0&&(e(wM,xM),R6.push(e))})};function wRe(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,h="black";if(!s.length)for(var f in n)s[f]=new t(n[f]).toRgb();for(var p in n){var m=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<d&&(d=m,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}xRe([wRe]);const lp=class jx{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof jx)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,n){const r=typeof e;if(r!==typeof n)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((i,s)=>i===n[s]);if(e!==null&&n!==null){const i=Object.keys(e),s=Object.keys(n);return i.length!==s.length?!1:i.every(o=>e[o]===n[o])}return e===n}toRgba(){const[e,n,r,i]=this._components;return{r:e,g:n,b:r,a:i}}toRgb(){const[e,n,r]=this._components;return{r:e,g:n,b:r}}toRgbaString(){const[e,n,r]=this.toUint8RgbArray();return`rgba(${e},${n},${r},${this.alpha})`}toUint8RgbArray(e){const[n,r,i]=this._components;return e=e??[],e[0]=Math.round(n*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,r,i,s]=jx.temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return n&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[n,r,i]=this._components;return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[n,r,i,s]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let n,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;n=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,r,i,s=255]=e,n/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=jx.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=pl(e);o.isValid()&&({r:n,g:r,b:i,a:s}=o.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,n,r]=this._components;this._int=(e*255<<16)+(n*255<<8)+(r*255|0)}_clamp(e,n=0,r=1){return typeof e=="number"?Math.min(Math.max(e,n),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,n),r)}),e)}};lp.shared=new lp,lp.temp=new lp,lp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let wn=lp;function ERe(t,e=[]){return $t("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),wn.shared.setValue(t).toRgbArray(e)}function oY(t){return $t("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),wn.shared.setValue(t).toHex()}function TRe(t){return $t("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),wn.shared.setValue(t).toNumber()}function aY(t){return $t("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),wn.shared.setValue(t).toNumber()}function SRe(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[kt.NORMAL_NPM]=kt.NORMAL,t[kt.ADD_NPM]=kt.ADD,t[kt.SCREEN_NPM]=kt.SCREEN,e[kt.NORMAL]=kt.NORMAL_NPM,e[kt.ADD]=kt.ADD_NPM,e[kt.SCREEN]=kt.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const Z3=SRe();function Q3(t,e){return Z3[e?1:0][t]}function CRe(t,e,n,r=!0){return $t("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),wn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}function ARe(t,e){return $t("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),wn.shared.setValue(t).toPremultiplied(e)}function PRe(t,e,n,r=!0){return $t("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),wn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}const lY=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function cY(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function OS(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}const RRe={Float32Array,Uint32Array,Int32Array,Uint8Array};function IRe(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=OS(u);i[d]||(i[d]=new RRe[d](s)),o=i[d];for(let h=0;h<u.length;h++){const f=(h/c|0)*r+a,p=h%c;o[f+p]=u[h]}a+=c}return new Float32Array(s)}function _y(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function EM(t){return!(t&t-1)&&!!t}function TM(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function Ah(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function yc(t){return t===0?0:t<0?-1:1}let MRe=0;function cd(){return++MRe}const SM=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};SM.EMPTY=new SM(0,0,0,0);let CM=SM;const AM={},hs=Object.create(null),io=Object.create(null);function LRe(){let t;for(t in hs)hs[t].destroy();for(t in io)io[t].destroy()}function kRe(){let t;for(t in hs)delete hs[t];for(t in io)delete io[t]}class uY{constructor(e,n,r){this._canvas=lt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||lt.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function I6(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function M6(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function dY(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,e,n).data;let s=0,o=0,a=e-1,l=n-1;for(;o<n&&I6(i,e,o);)++o;if(o===n)return CM.EMPTY;for(;I6(i,e,l);)--l;for(;M6(i,e,s,o,l);)++s;for(;M6(i,e,a,o,l);)--a;return++a,++l,new CM(s,o,a,l)}function hY(t){const e=dY(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}function ORe(t){const e=lY.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function fY(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}function Bl(t,e=1){var r;const n=(r=lt.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}const NRe=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:io,BoundingBox:CM,CanvasRenderTarget:uY,DATA_URI:lY,EventEmitter:am,ProgramCache:AM,TextureCache:hs,clearTextureCache:kRe,correctBlendMode:Q3,createIndicesForQuads:cY,decomposeDataUri:ORe,deprecation:$t,destroyTextureCache:LRe,detectVideoAlphaMode:tY,determineCrossOrigin:fY,earcut:u3,getBufferType:OS,getCanvasBoundingBox:dY,getResolutionOfUrl:Bl,hex2rgb:ERe,hex2string:oY,interleaveTypedArrays:IRe,isMobile:La,isPow2:EM,isWebGLSupported:nY,log2:TM,nextPow2:_y,path:Zr,premultiplyBlendMode:Z3,premultiplyRgba:CRe,premultiplyTint:ARe,premultiplyTintToRgba:PRe,removeItems:Ah,rgb2hex:aY,sayHello:fRe,sign:yc,skipHello:hRe,string2hex:TRe,trimCanvas:hY,uid:cd,url:lRe},Symbol.toStringTag,{value:"Module"}));var rt=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(rt||{});const PM=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},L6=(t,e)=>PM(t).priority??e,bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(PM).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map(PM).forEach(e=>{e.type.forEach(n=>{var s,o;const r=this._addHandlers,i=this._queue;r[n]?(s=r[n])==null||s.call(r,e):(i[n]=i[n]||[],(o=i[n])==null||o.push(e))})}),this},handle(t,e,n){var o;const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>L6(s,n)-L6(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class mE{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const DRe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function BRe(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function pY(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=DRe.replace(/%forloop%/gi,BRe(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const XP=0,YP=1,qP=2,KP=3,ZP=4,QP=5;class qa{constructor(){this.data=0,this.blendMode=kt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<XP)}set blend(e){!!(this.data&1<<XP)!==e&&(this.data^=1<<XP)}get offsets(){return!!(this.data&1<<YP)}set offsets(e){!!(this.data&1<<YP)!==e&&(this.data^=1<<YP)}get culling(){return!!(this.data&1<<qP)}set culling(e){!!(this.data&1<<qP)!==e&&(this.data^=1<<qP)}get depthTest(){return!!(this.data&1<<KP)}set depthTest(e){!!(this.data&1<<KP)!==e&&(this.data^=1<<KP)}get depthMask(){return!!(this.data&1<<QP)}set depthMask(e){!!(this.data&1<<QP)!==e&&(this.data^=1<<QP)}get clockwiseFrontFace(){return!!(this.data&1<<ZP)}set clockwiseFrontFace(e){!!(this.data&1<<ZP)!==e&&(this.data^=1<<ZP)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==kt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new qa;return e.depthTest=!1,e.blend=!0,e}}qa.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const vE=[];function J3(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=vE.length-1;r>=0;--r){const i=vE[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class vo{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let d=0,h=u.length;d<h;d++)u[d][c](e,n,r,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(vo.prototype,{dispatch:{value:vo.prototype.emit},run:{value:vo.prototype.emit}});let Ig=class{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new vo("setRealSize"),this.onUpdate=new vo("update"),this.onError=new vo("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}};class gb extends Ig{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=n.unpackAlignment??4}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===vs.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const FRe={scaleMode:Cl.NEAREST,alphaMode:vs.NPM},RM=class cp extends am{constructor(e=null,n=null){super(),n=Object.assign({},cp.defaultOptions,n);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:d,target:h,resolution:f,resourceOptions:p}=n;e&&!(e instanceof Ig)&&(e=J3(e,p),e.internal=!0),this.resolution=f||lt.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=d,this.target=h,this.alphaMode=r,this.uid=cd(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,n){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,r=!0),r&&this.dirtyStyleId++,this}setSize(e,n,r){return r=r||this.resolution,this.setRealSize(e*r,n*r,r)}setRealSize(e,n,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=EM(this.realWidth)&&EM(this.realHeight)}setResolution(e){const n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete io[this.cacheId],delete hs[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),cp.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,n,r=lt.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${cd()}`}s=e._pixiId}let o=io[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new cp(e,n),o.cacheId=s,cp.addToCache(o,s)),o}static fromBuffer(e,n,r,i){e=e||new Float32Array(n*r*4);const s=new gb(e,{width:n,height:r,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=Qe.RGBA,a=Et.FLOAT):e instanceof Int32Array?(o=Qe.RGBA_INTEGER,a=Et.INT):e instanceof Uint32Array?(o=Qe.RGBA_INTEGER,a=Et.UNSIGNED_INT):e instanceof Int16Array?(o=Qe.RGBA_INTEGER,a=Et.SHORT):e instanceof Uint16Array?(o=Qe.RGBA_INTEGER,a=Et.UNSIGNED_SHORT):e instanceof Int8Array?(o=Qe.RGBA,a=Et.BYTE):(o=Qe.RGBA,a=Et.UNSIGNED_BYTE),s.internal=!0,new cp(s,Object.assign({},FRe,{type:a,format:o},i))}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),io[n]&&io[n]!==e&&console.warn(`BaseTexture added to the cache with an id [${n}] that already had an entry`),io[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=io[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete io[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)delete io[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}};RM.defaultOptions={mipmap:Xa.POW2,anisotropicLevel:0,scaleMode:Cl.LINEAR,wrapMode:Ol.CLAMP,alphaMode:vs.UNPACK,target:Ch.TEXTURE_2D,format:Qe.RGBA,type:Et.UNSIGNED_BYTE},RM._globalBatch=0;let qt=RM;class yE{constructor(){this.texArray=null,this.blend=0,this.type=Zo.TRIANGLES,this.start=0,this.size=0,this.data=null}}let zRe=0,Vr=class gY{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=zRe++,this.disposeRunner=new vo("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?ja.ELEMENT_ARRAY_BUFFER:ja.ARRAY_BUFFER}get index(){return this.type===ja.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new gY(e)}},IM=class mY{constructor(e,n=0,r=!1,i=Et.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new mY(e,n,r,i,s)}};const URe={Float32Array,Uint32Array,Int32Array,Uint8Array};function $Re(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=OS(u);i[d]||(i[d]=new URe[d](s)),o=i[d];for(let h=0;h<u.length;h++){const f=(h/c|0)*r+a,p=h%c;o[f+p]=u[h]}a+=c}return new Float32Array(s)}const k6={5126:4,5123:2,5121:1};let jRe=0;const GRe={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let cm=class MM{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=jRe++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new vo("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Vr||(n instanceof Array&&(n=new Float32Array(n)),n=new Vr(n));const c=e.split("|");if(c.length>1){for(let d=0;d<c.length;d++)this.addAttribute(c[d],n,r,i,s);return this}let u=this.buffers.indexOf(n);return u===-1&&(this.buffers.push(n),u=this.buffers.length-1),this.attributes[e]=new IM(u,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Vr||(e instanceof Array&&(e=new Uint16Array(e)),e=new Vr(e)),e.type=ja.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new Vr;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*k6[s.type]/4),s.buffer=0}for(r.data=$Re(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new MM;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new Vr(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new IM(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ja.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new MM,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new GRe[OS(o.buffers[a].data)](i[a]),n.buffers[a]=new Vr(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=ja.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){u=d;break}for(const d in o.attributes){const h=o.attributes[d];(h.buffer|0)===u&&(l+=h.size*k6[h.type]/4)}for(let d=0;d<e.length;d++){const h=e[d].indexBuffer.data;for(let f=0;f<h.length;f++)n.indexBuffer.data[f+c]+=a;a+=e[d].buffers[u].data.length/l,c+=h.length}}return n}};class eN extends cm{constructor(e=!1){super(),this._buffer=new Vr(null,e,!1),this._indexBuffer=new Vr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Et.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Et.FLOAT).addAttribute("aColor",this._buffer,4,!0,Et.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Et.FLOAT).addIndex(this._indexBuffer)}}const xy=Math.PI*2,vY=180/Math.PI,yY=Math.PI/180;var _i=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(_i||{});class It{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new It(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}}It.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const L_=[new It,new It,new It,new It];class Gt{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=_i.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Gt(0,0,0,0)}clone(){return new Gt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const k=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=k)return!1;const M=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>M}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=L_[0].set(e.left,e.top),l=L_[1].set(e.left,e.bottom),c=L_[2].set(e.right,e.top),u=L_[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(n.a*n.d-n.b*n.c);if(d===0||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=r||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const h=d*(l.y-a.y),f=d*(a.x-l.x),p=h*r+f*s,m=h*i+f*s,b=h*r+f*o,y=h*i+f*o;if(Math.max(p,m,b,y)<=h*a.x+f*a.y||Math.min(p,m,b,y)>=h*u.x+f*u.y)return!1;const x=d*(a.y-c.y),_=d*(c.x-a.x),w=x*r+_*s,E=x*i+_*s,S=x*r+_*o,A=x*i+_*o;return!(Math.max(w,E,S,A)<=x*a.x+_*a.y||Math.min(w,E,S,A)>=x*u.x+_*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}}Gt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class mb{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=_i.CIRC}clone(){return new mb(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new Gt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}mb.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class vb{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=_i.ELIP}clone(){return new vb(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new Gt(this.x-this.width,this.y-this.height,this.width,this.height)}}vb.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ku{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=_i.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Ku(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>n!=u>n&&e<(c-a)*((n-l)/(u-l))+a&&(r=!r)}return r}}Ku.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class yb{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=_i.RREC}clone(){return new yb(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}}yb.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let Lr=class Gx{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new It;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new It;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(a+l);return c<1e-5||Math.abs(xy-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Gx;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Gx}static get TEMP_MATRIX(){return new Gx}};Lr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Zd=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qd=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Jd=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],eh=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],LM=[],bY=[],k_=Math.sign;function HRe(){for(let t=0;t<16;t++){const e=[];LM.push(e);for(let n=0;n<16;n++){const r=k_(Zd[t]*Zd[n]+Jd[t]*Qd[n]),i=k_(Qd[t]*Zd[n]+eh[t]*Qd[n]),s=k_(Zd[t]*Jd[n]+Jd[t]*eh[n]),o=k_(Qd[t]*Jd[n]+eh[t]*eh[n]);for(let a=0;a<16;a++)if(Zd[a]===r&&Qd[a]===i&&Jd[a]===s&&eh[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Lr;e.set(Zd[t],Qd[t],Jd[t],eh[t],0,0),bY.push(e)}}HRe();const fr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Zd[t],uY:t=>Qd[t],vX:t=>Jd[t],vY:t=>eh[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>LM[t][e],sub:(t,e)=>LM[t][fr.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?fr.S:fr.N:Math.abs(e)*2<=Math.abs(t)?t>0?fr.E:fr.W:e>0?t>0?fr.SE:fr.SW:t>0?fr.NE:fr.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=bY[fr.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class ka{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new ka(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}ka.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const kM=class{constructor(){this.worldTransform=new Lr,this.localTransform=new Lr,this.position=new ka(this.onChange,this,0,0),this.scale=new ka(this.onChange,this,1,1),this.pivot=new ka(this.onChange,this,0,0),this.skew=new ka(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};kM.IDENTITY=new kM;let bb=kM;bb.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var VRe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,WRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function O6(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function JP(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function _Y(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return JP(2*e);case"bvec3":return JP(3*e);case"bvec4":return JP(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ph=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],XRe={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},YRe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function qRe(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((r=t.uniforms[i])==null?void 0:r.group)===!0&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<Ph.length;l++)if(Ph[l].test(s,o)){n.push(Ph[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?XRe:YRe)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const xY={};let Yf=xY;function wY(){if(Yf===xY||Yf!=null&&Yf.isContextLost()){const t=lt.ADAPTER.createCanvas();let e;lt.PREFER_ENV>=_d.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Yf=e}return Yf}let O_;function KRe(){if(!O_){O_=uo.MEDIUM;const t=wY();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(O_=e.precision?uo.HIGH:uo.MEDIUM)}}return O_}function N6(t,e){const n=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function ZRe(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||N6(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||N6(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const QRe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function EY(t){return QRe[t]}let N_=null;const D6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function TY(t,e){if(!N_){const n=Object.keys(D6);N_={};for(let r=0;r<n.length;++r){const i=n[r];N_[t[i]]=D6[i]}}return N_[e]}function B6(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===uo.HIGH&&n!==uo.HIGH&&(r=uo.MEDIUM),`precision ${r} float;
${t}`}else if(n!==uo.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let u0;function SY(){if(typeof u0=="boolean")return u0;try{u0=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{u0=!1}return u0}let JRe=0;const D_={},OM=class up{constructor(e,n,r="pixi-shader",i={}){this.extra={},this.id=JRe++,this.vertexSrc=e||up.defaultVertexSrc,this.fragmentSrc=n||up.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),D_[r]?(D_[r]++,r+=`-${D_[r]}`):D_[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=B6(this.vertexSrc,up.defaultVertexPrecision,uo.HIGH),this.fragmentSrc=B6(this.fragmentSrc,up.defaultFragmentPrecision,KRe())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return WRe}static get defaultFragmentSrc(){return VRe}static from(e,n,r){const i=e+n;let s=AM[i];return s||(AM[i]=s=new up(e,n,r)),s}};OM.defaultVertexPrecision=uo.HIGH,OM.defaultFragmentPrecision=La.apple.device?uo.HIGH:uo.MEDIUM;let Al=OM,eIe=0;class ta{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=eIe++,this.static=!!n,this.ubo=!!r,e instanceof Vr?(this.buffer=e,this.buffer.type=ja.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Vr(new Float32Array(1)),this.buffer.type=ja.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new ta(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new ta(e,n,r)}static uboFrom(e,n){return new ta(e,n??!0,!0)}}let Tc=class CY{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof ta?this.uniformGroup=n:this.uniformGroup=new ta(n):this.uniformGroup=new ta({}),this.disposeRunner=new vo("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Al.from(e,n);return new CY(i,r)}};class AY{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=ta.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Al(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:this.defaultGroupCache[e]};return new Tc(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class bE{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function tIe(){return!La.apple.device}function nIe(t){let e=!0;const n=lt.ADAPTER.getNavigator();if(La.tablet||La.phone){if(La.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(La.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class _b{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var rIe=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,iIe=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const N0=class Ea extends _b{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=eN,this.vertexSize=6,this.state=qa.for2d(),this.size=Ea.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??nIe(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??tIe(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return $t("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return iIe}static get defaultFragmentTemplate(){return rIe}setShaderGenerator({vertex:e=Ea.defaultVertexSrc,fragment:n=Ea.defaultFragmentTemplate}={}){this.shaderGenerator=new AY(e,n)}contextChange(){const e=this.renderer.gl;lt.PREFER_ENV===_d.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ea.defaultMaxTextures),this.maxTextures=pY(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:n}=Ea,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new yE);for(;n.length<i;)n.push(new bE);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:n}=this,r=Ea._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++qt._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(s,n);for(let d=0;d<this._bufferSize;++d){const h=e[d];e[d]=null,h._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,d),u=d,c=r[++l],++a),h._batchEnabled=a,h.touched=o,c.elements[c.count++]=h)}c.count>0&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let d=0;d<s.length;d++)s[d]=null;qt._globalBatch=a}buildDrawCalls(e,n,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Ea._drawCallPool;let c=this._dcIndex,u=this._aIndex,d=this._iIndex,h=l[c];h.start=this._iIndex,h.texArray=e;for(let f=n;f<r;++f){const p=i[f],m=p._texture.baseTexture,b=Z3[m.alphaMode?1:0][p.blendMode];i[f]=null,n<f&&h.blend!==b&&(h.size=d-h.start,n=f,h=l[++c],h.texArray=e,h.start=d),this.packInterleavedGeometry(p,s,o,u,d),u+=p.vertexData.length/2*a,d+=p.indices.length,h.blend=b}n<r&&(h.size=d-h.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=d}bindAndClearTexArray(e){const n=this.renderer.texture;for(let r=0;r<e.count;r++)n.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:n,_indexBuffer:r}=this;Ea.canUploadSameBuffer?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:n,state:r}=this.renderer,i=Ea._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:d}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=d,r.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ea.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const n=_y(Math.ceil(e/8)),r=TM(n),i=n*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new mE(i*this.vertexSize*4)),s}getIndexBuffer(e){const n=_y(Math.ceil(e/12)),r=TM(n),i=n*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,n,r,i,s){const{uint32View:o,float32View:a}=n,l=i/this.vertexSize,c=e.uvs,u=e.indices,d=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=wn.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<d.length;m+=2)a[i++]=d[m],a[i++]=d[m+1],a[i++]=c[m],a[i++]=c[m+1],o[i++]=p,a[i++]=h;for(let m=0;m<u.length;m++)r[s++]=l+u[m]}};N0.defaultBatchSize=4096,N0.extension={name:"batch",type:rt.RendererPlugin},N0._drawCallPool=[],N0._textureArrayPool=[];let Eu=N0;bt.add(Eu);var sIe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,oIe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const NM=class D0 extends Tc{constructor(e,n,r){const i=Al.from(e||D0.defaultVertexSrc,n||D0.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=D0.defaultResolution,this.multisample=D0.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new qa}apply(e,n,r,i,s){e.applyFilter(this,n,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return oIe}static get defaultFragmentSrc(){return sIe}};NM.defaultResolution=1,NM.defaultMultisample=Fr.NONE;let es=NM;class wy{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new wn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}wy.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},wy.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"background"};bt.add(wy);class tN{constructor(e){this.renderer=e,this.emptyRenderer=new _b(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],d=u._batchLocation;if(d>=0&&d<i&&n[d]===u){o[c]=d;continue}for(;l<i;){const h=n[l];if(h&&h._batchEnabled===r&&h._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,n[l]=u;break}}}destroy(){this.renderer=null}}tN.extension={type:rt.RendererSystem,name:"batch"};bt.add(tN);let F6=0;class Ey{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=F6++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=F6++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(lt.PREFER_ENV>=_d.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ey.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ey.extension={type:rt.RendererSystem,name:"context"};bt.add(Ey);let _E=class{constructor(e,n){if(this.width=Math.round(e),this.height=Math.round(n),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new vo("disposeFramebuffer"),this.multisample=Fr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new qt(null,{scaleMode:Cl.NEAREST,resolution:1,mipmap:Xa.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new qt(null,{scaleMode:Cl.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Xa.OFF,format:Qe.DEPTH_COMPONENT,type:Et.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!e||!n)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};class nN extends qt{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Fr.NONE),super(null,e),this.mipmap=Xa.OFF,this.valid=!0,this._clear=new wn([0,0,0,0]),this.framebuffer=new _E(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fl extends Ig{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.displayWidth||n.width,i=n.naturalHeight||n.videoHeight||n.displayHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=fY(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===vs.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class rN extends Fl{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;Fl.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??lt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===vs.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class NS{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=fr.add(r,fr.NW),this.x0=l+o*fr.uX(r),this.y0=c+a*fr.uY(r),r=fr.add(r,2),this.x1=l+o*fr.uX(r),this.y1=c+a*fr.uY(r),r=fr.add(r,2),this.x2=l+o*fr.uX(r),this.y2=c+a*fr.uY(r),r=fr.add(r,2),this.x3=l+o*fr.uX(r),this.y3=c+a*fr.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}NS.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const z6=new NS;function B_(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}let Dt=class Yn extends am{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new Gt(0,0,1,1)),e instanceof Yn&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=z6,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new It(o.x,o.y):new It(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&hs[n.url]&&Yn.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Yn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new Yn(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===z6&&(this._uvs=new NS),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=lt.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof qt){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${cd()}`,qt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${cd()}`}s=e._pixiId}let o=hs[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof qt)?(n.resolution||(n.resolution=Bl(e)),o=new Yn(new qt(e,n)),o.baseTexture.cacheId=s,qt.addToCache(o.baseTexture,s),Yn.addToCache(o,s)):!o&&e instanceof qt&&(o=new Yn(e),Yn.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=Yn.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new Yn(qt.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new qt(e,Object.assign({scaleMode:qt.defaultOptions.scaleMode,resolution:Bl(n)},i)),{resource:o}=s;o instanceof rN&&(o.url=n);const a=new Yn(s);return r||(r=n),qt.addToCache(a.baseTexture,r),Yn.addToCache(a,r),r!==n&&(qt.addToCache(a.baseTexture,n),Yn.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),hs[n]&&hs[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),hs[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=hs[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete hs[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)hs[e.textureCacheIds[n]]===e&&delete hs[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Yn._EMPTY||(Yn._EMPTY=new Yn(new qt),B_(Yn._EMPTY),B_(Yn._EMPTY.baseTexture)),Yn._EMPTY}static get WHITE(){if(!Yn._WHITE){const e=lt.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),Yn._WHITE=new Yn(qt.from(e)),B_(Yn._WHITE),B_(Yn._WHITE.baseTexture)}return Yn._WHITE}};class wd extends Dt{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new wd(new nN(e))}}class iN{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=Fr.NONE){const i=new nN(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new wd(i)}getOptimalTexture(e,n,r=1,i=Fr.NONE){let s;e=Math.max(Math.ceil(e*r-1e-6),1),n=Math.max(Math.ceil(n*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=_y(e),n=_y(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||Fr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}iN.SCREEN_KEY=-1;class PY extends cm{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class sN extends cm{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Vr(this.vertices),this.uvBuffer=new Vr(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class RY{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Fr.NONE,this.sourceFrame=new Gt,this.destinationFrame=new Gt,this.bindingSourceFrame=new Gt,this.bindingDestinationFrame=new Gt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const F_=[new It,new It,new It,new It],e2=new Lr;class oN{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new iN,this.statePool=[],this.quad=new PY,this.quadUv=new sN,this.tempRect=new Gt,this.activeState={},this.globalUniforms=new ta({outputFrame:new Gt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new RY,o=r.renderTexture;let a,l;if(o.current){const b=o.current;a=b.resolution,l=b.multisample}else a=r.resolution,l=r.multisample;let c=n[0].resolution||a,u=n[0].multisample??l,d=n[0].padding,h=n[0].autoFit,f=n[0].legacy??!0;for(let b=1;b<n.length;b++){const y=n[b];c=Math.min(c,y.resolution||a),u=Math.min(u,y.multisample??l),d=this.useMaxPadding?Math.max(d,y.padding):d+y.padding,h=h&&y.autoFit,f=f||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(d);const p=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(e2.copyFrom(r.projection.transform).invert(),p),h?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=i.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,l.renderTexture,Ra.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,n.resolution);u.filterFrame=c.filterFrame;let d=0;for(d=0;d<r.length-1;++d){d===1&&n.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,n.resolution),u.filterFrame=c.filterFrame),r[d].apply(this,c,u,Ra.CLEAR,n);const h=c;c=u,u=h}r[d].apply(this,c,l.renderTexture,Ra.BLEND,n),d>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Ra.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Ra.CLEAR||n===Ra.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Zo.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Zo.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(Lr.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=Fr.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||Fr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=F_[0],i=F_[1],s=F_[2],o=F_[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),u=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=u-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?e2.copyFrom(s):e2.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}oN.extension={type:rt.RendererSystem,name:"filter"};bt.add(oN);class IY{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Fr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const aIe=new Gt;class aN{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new _E(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Gt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;lt.PREFER_ENV===_d.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=hE.COLOR|hE.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new IY(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){n.bindRenderbuffer(n.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=n.DEPTH_STENCIL:e.depth&&e.stencil?o=n.DEPTH24_STENCIL8:e.depth?o=n.DEPTH_COMPONENT24:o=n.STENCIL_INDEX8,r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,o,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,n)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,c=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,c=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,c,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=Fr.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=Fr.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new _E(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=aIe,n.width=i.width,n.height=i.height),r||(r=n);const c=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=n.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Gt}destroy(){this.renderer=null}}aN.extension={type:rt.RendererSystem,name:"framebuffer"};bt.add(aN);const t2={5126:4,5123:2,5121:1};class lN{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;lt.PREFER_ENV===_d.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const d=e.buffers,h=e.attributes,f={},p={};for(const m in d)f[m]=0,p[m]=0;for(const m in h)!h[m].size&&a.attributeData[m]?h[m].size=a.attributeData[m].size:h[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[m].buffer]+=h[m].size*t2[h[m].type];for(const m in h){const b=h[m],y=b.size;b.stride===void 0&&(f[b.buffer]===y*t2[b.type]?b.stride=0:b.stride=f[b.buffer]),b.start===void 0&&(b.start=p[b.buffer],p[b.buffer]+=y*t2[b.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let m=0;m<d.length;m++){const b=d[m];o.bind(b),r&&b._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(ja.ARRAY_BUFFER),u}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!n&&o.dispose(s[l],n))}if(!n){for(const l in r)if(l[0]==="g"){const c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],d=o[u.buffer],h=d._glBuffers[i];if(n.attributeData[c]){l!==h&&(s.bind(d),l=h);const f=n.attributeData[c].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}lN.extension={type:rt.RendererSystem,name:"geometry"};bt.add(lN);const U6=new Lr;class DS{constructor(e,n){this._texture=e,this.mapCoord=new Lr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(U6.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(U6));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var lIe=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,cIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class MY extends es{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||cIe,n||lIe,r),this.maskSprite=i,this.maskMatrix=new Lr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new DS(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class LY{constructor(e=null){this.type=Hr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=es.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Hr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class cN{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new LY;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Hr.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Hr.SCISSOR:this.renderer.scissor.push(r);break;case Hr.STENCIL:this.renderer.stencil.push(r);break;case Hr.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Hr.COLOR:this.pushColorMask(r);break}r.type===Hr.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case Hr.SCISSOR:this.renderer.scissor.pop(n);break;case Hr.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Hr.SPRITE:this.popSpriteMask(n);break;case Hr.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Hr.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=Hr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Hr.SCISSOR:e.type=Hr.STENCIL:e.type=Hr.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new MY])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=n;const s=r.filterArea;r.filterArea=n.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}cN.extension={type:rt.RendererSystem,name:"mask"};bt.add(cN);class kY{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const $6=new Lr,j6=[],OY=class Hx extends kY{constructor(e){super(e),this.glConst=lt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const n=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,j6.pop()??new Gt);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),n&&o.fit(n),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:n,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:n}=e;if(!n.isFastRect||!n.isFastRect()||Hx.isMatrixRotated(n.worldTransform)||Hx.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,n,r,i,s){Hx.isMatrixRotated(s)||(s=s?$6.copyFrom(s):$6.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:n}=this.renderer;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:n}=this.renderer;e&&j6.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)}};OY.extension={type:rt.RendererSystem,name:"scissor"};let NY=OY;bt.add(NY);class uN extends kY{constructor(e){super(e),this.glConst=lt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}uN.extension={type:rt.RendererSystem,name:"stencil"};bt.add(uN);class dN{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}dN.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_plugin"};bt.add(dN);class hN{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Lr,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}hN.extension={type:rt.RendererSystem,name:"projection"};bt.add(hN);const uIe=new bb,G6=new Gt;class fN{constructor(e){this.renderer=e,this._tempMatrix=new Lr}generateTexture(e,n){const{region:r,...i}=n||{},s=(r==null?void 0:r.copyTo(G6))||e.getLocalBounds(G6,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=wd.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=uIe,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}fN.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"textureGenerator"};bt.add(fN);const Ud=new Gt,d0=new Gt;class pN{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Gt,this.destinationFrame=new Gt,this.viewportFrame=new Gt}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(Ud.width=e.frame.width,Ud.height=e.frame.height,n=Ud),r||(d0.x=e.frame.x,d0.y=e.frame.y,d0.width=n.width,d0.height=n.height,r=d0),o=s.framebuffer):(a=i.resolution,n||(Ud.width=i._view.screen.width,Ud.height=i._view.screen.height,n=Ud),r||(r=Ud,r.width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=wn.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:d}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,d)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}pN.extension={type:rt.RendererSystem,name:"renderTexture"};bt.add(pN);class dIe{}class DY{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function hIe(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=TY(e,s.type),a={type:o,name:s.name,size:EY(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function fIe(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=TY(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:_Y(l,s.size)}}return n}function BY(t,e){var a;const n=O6(t,t.VERTEX_SHADER,e.vertexSrc),r=O6(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||ZRe(t,i,n,r),e.attributeData=hIe(i,t),e.uniformData=fIe(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(i,c,l[c]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:_Y(c.type,c.size)}}return new DY(i,o)}function pIe(t,e,n,r,i){n.buffer.update(i)}const gIe={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},FY={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function zY(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=FY[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function UY(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function $Y(t,e){if(!t.autoManage)return{size:0,syncFunc:pIe};const n=UY(t.uniforms,e),{uboElements:r,size:i}=zY(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let d=0;d<Ph.length;d++){const h=Ph[d];if(h.codeUbo&&h.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Ph[d].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const d=EY(a.data.type),h=Math.max(FY[a.data.type]/16,1),f=d/h,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const d=gIe[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${d};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let mIe=0;const z_={textureCount:0,uboCount:0};class gN{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=mIe++}systemCheck(){if(!SY())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(z_.textureCount=0,z_.uboCount=0,this.syncUniformGroup(e.uniformGroup,z_)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=qRe(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,z_,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=$Y(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=BY(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}gN.extension={type:rt.RendererSystem,name:"shader"};bt.add(gN);class Ty{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.4.0 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}Ty.defaultOptions={hello:!1},Ty.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"startup"};bt.add(Ty);function vIe(t,e=[]){return e[kt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.ADD]=[t.ONE,t.ONE],e[kt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.NONE]=[0,0],e[kt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[kt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[kt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[kt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[kt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[kt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[kt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[kt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[kt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[kt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const yIe=0,bIe=1,_Ie=2,xIe=3,wIe=4,EIe=5,jY=class DM{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=kt.NONE,this._blendEq=!1,this.map=[],this.map[yIe]=this.setBlend,this.map[bIe]=this.setOffset,this.map[_Ie]=this.setCullFace,this.map[xIe]=this.setDepthTest,this.map[wIe]=this.setFrontFace,this.map[EIe]=this.setDepthMask,this.checks=[],this.defaultState=new qa,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=vIe(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let n=this.stateId^e.data,r=0;for(;n;)n&1&&this.map[r].call(this,!!(e.data&1<<r)),n=n>>1,r++;this.stateId=e.data}for(let n=0;n<this.checks.length;n++)this.checks[n](this,e)}forceState(e){e=e||this.defaultState;for(let n=0;n<this.map.length;n++)this.map[n].call(this,!!(e.data&1<<n));for(let n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(DM.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(DM.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const n=this.blendModes[e],r=this.gl;n.length===2?r.blendFunc(n[0],n[1]):r.blendFuncSeparate(n[0],n[1],n[2],n[3]),n.length===6?(this._blendEq=!0,r.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,n){this.gl.polygonOffset(e,n)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,n){const r=this.checks.indexOf(e);n&&r===-1?this.checks.push(e):!n&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,n){e.setBlendMode(n.blendMode)}static checkPolygonOffset(e,n){e.setPolygonOffset(1,n.polygonOffset)}destroy(){this.gl=null}};jY.extension={type:rt.RendererSystem,name:"state"};let GY=jY;bt.add(GY);class HY extends am{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new vo(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const B0=class Vx{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Vx.defaultMaxIdle,this.checkCountMax=Vx.defaultCheckCountMax,this.mode=Vx.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==LS.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let r=!1;for(let i=0;i<n.length;i++){const s=n[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<n.length;s++)n[s]!==null&&(n[i++]=n[s]);n.length=i}}unload(e){const n=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&n.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};B0.defaultMode=LS.AUTO,B0.defaultMaxIdle=60*60,B0.defaultCheckCountMax=60*10,B0.extension={type:rt.RendererSystem,name:"textureGC"};let Tu=B0;bt.add(Tu);class Wx{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Et.UNSIGNED_BYTE,this.internalFormat=Qe.RGBA,this.samplerType=0}}function TIe(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:at.FLOAT,[t.RGBA]:at.FLOAT,[t.ALPHA]:at.FLOAT,[t.LUMINANCE]:at.FLOAT,[t.LUMINANCE_ALPHA]:at.FLOAT,[t.R8]:at.FLOAT,[t.R8_SNORM]:at.FLOAT,[t.RG8]:at.FLOAT,[t.RG8_SNORM]:at.FLOAT,[t.RGB8]:at.FLOAT,[t.RGB8_SNORM]:at.FLOAT,[t.RGB565]:at.FLOAT,[t.RGBA4]:at.FLOAT,[t.RGB5_A1]:at.FLOAT,[t.RGBA8]:at.FLOAT,[t.RGBA8_SNORM]:at.FLOAT,[t.RGB10_A2]:at.FLOAT,[t.RGB10_A2UI]:at.FLOAT,[t.SRGB8]:at.FLOAT,[t.SRGB8_ALPHA8]:at.FLOAT,[t.R16F]:at.FLOAT,[t.RG16F]:at.FLOAT,[t.RGB16F]:at.FLOAT,[t.RGBA16F]:at.FLOAT,[t.R32F]:at.FLOAT,[t.RG32F]:at.FLOAT,[t.RGB32F]:at.FLOAT,[t.RGBA32F]:at.FLOAT,[t.R11F_G11F_B10F]:at.FLOAT,[t.RGB9_E5]:at.FLOAT,[t.R8I]:at.INT,[t.R8UI]:at.UINT,[t.R16I]:at.INT,[t.R16UI]:at.UINT,[t.R32I]:at.INT,[t.R32UI]:at.UINT,[t.RG8I]:at.INT,[t.RG8UI]:at.UINT,[t.RG16I]:at.INT,[t.RG16UI]:at.UINT,[t.RG32I]:at.INT,[t.RG32UI]:at.UINT,[t.RGB8I]:at.INT,[t.RGB8UI]:at.UINT,[t.RGB16I]:at.INT,[t.RGB16UI]:at.UINT,[t.RGB32I]:at.INT,[t.RGB32UI]:at.UINT,[t.RGBA8I]:at.INT,[t.RGBA8UI]:at.UINT,[t.RGBA16I]:at.INT,[t.RGBA16UI]:at.UINT,[t.RGBA32I]:at.INT,[t.RGBA32UI]:at.UINT,[t.DEPTH_COMPONENT16]:at.FLOAT,[t.DEPTH_COMPONENT24]:at.FLOAT,[t.DEPTH_COMPONENT32F]:at.FLOAT,[t.DEPTH_STENCIL]:at.FLOAT,[t.DEPTH24_STENCIL8]:at.FLOAT,[t.DEPTH32F_STENCIL8]:at.FLOAT}:e={[t.RGB]:at.FLOAT,[t.RGBA]:at.FLOAT,[t.ALPHA]:at.FLOAT,[t.LUMINANCE]:at.FLOAT,[t.LUMINANCE_ALPHA]:at.FLOAT,[t.DEPTH_STENCIL]:at.FLOAT},e}function SIe(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[Et.UNSIGNED_BYTE]:{[Qe.RGBA]:t.RGBA8,[Qe.RGB]:t.RGB8,[Qe.RG]:t.RG8,[Qe.RED]:t.R8,[Qe.RGBA_INTEGER]:t.RGBA8UI,[Qe.RGB_INTEGER]:t.RGB8UI,[Qe.RG_INTEGER]:t.RG8UI,[Qe.RED_INTEGER]:t.R8UI,[Qe.ALPHA]:t.ALPHA,[Qe.LUMINANCE]:t.LUMINANCE,[Qe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Et.BYTE]:{[Qe.RGBA]:t.RGBA8_SNORM,[Qe.RGB]:t.RGB8_SNORM,[Qe.RG]:t.RG8_SNORM,[Qe.RED]:t.R8_SNORM,[Qe.RGBA_INTEGER]:t.RGBA8I,[Qe.RGB_INTEGER]:t.RGB8I,[Qe.RG_INTEGER]:t.RG8I,[Qe.RED_INTEGER]:t.R8I},[Et.UNSIGNED_SHORT]:{[Qe.RGBA_INTEGER]:t.RGBA16UI,[Qe.RGB_INTEGER]:t.RGB16UI,[Qe.RG_INTEGER]:t.RG16UI,[Qe.RED_INTEGER]:t.R16UI,[Qe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[Et.SHORT]:{[Qe.RGBA_INTEGER]:t.RGBA16I,[Qe.RGB_INTEGER]:t.RGB16I,[Qe.RG_INTEGER]:t.RG16I,[Qe.RED_INTEGER]:t.R16I},[Et.UNSIGNED_INT]:{[Qe.RGBA_INTEGER]:t.RGBA32UI,[Qe.RGB_INTEGER]:t.RGB32UI,[Qe.RG_INTEGER]:t.RG32UI,[Qe.RED_INTEGER]:t.R32UI,[Qe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[Et.INT]:{[Qe.RGBA_INTEGER]:t.RGBA32I,[Qe.RGB_INTEGER]:t.RGB32I,[Qe.RG_INTEGER]:t.RG32I,[Qe.RED_INTEGER]:t.R32I},[Et.FLOAT]:{[Qe.RGBA]:t.RGBA32F,[Qe.RGB]:t.RGB32F,[Qe.RG]:t.RG32F,[Qe.RED]:t.R32F,[Qe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[Et.HALF_FLOAT]:{[Qe.RGBA]:t.RGBA16F,[Qe.RGB]:t.RGB16F,[Qe.RG]:t.RG16F,[Qe.RED]:t.R16F},[Et.UNSIGNED_SHORT_5_6_5]:{[Qe.RGB]:t.RGB565},[Et.UNSIGNED_SHORT_4_4_4_4]:{[Qe.RGBA]:t.RGBA4},[Et.UNSIGNED_SHORT_5_5_5_1]:{[Qe.RGBA]:t.RGB5_A1},[Et.UNSIGNED_INT_2_10_10_10_REV]:{[Qe.RGBA]:t.RGB10_A2,[Qe.RGBA_INTEGER]:t.RGB10_A2UI},[Et.UNSIGNED_INT_10F_11F_11F_REV]:{[Qe.RGB]:t.R11F_G11F_B10F},[Et.UNSIGNED_INT_5_9_9_9_REV]:{[Qe.RGB]:t.RGB9_E5},[Et.UNSIGNED_INT_24_8]:{[Qe.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[Et.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Qe.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[Et.UNSIGNED_BYTE]:{[Qe.RGBA]:t.RGBA,[Qe.RGB]:t.RGB,[Qe.ALPHA]:t.ALPHA,[Qe.LUMINANCE]:t.LUMINANCE,[Qe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Et.UNSIGNED_SHORT_5_6_5]:{[Qe.RGB]:t.RGB},[Et.UNSIGNED_SHORT_4_4_4_4]:{[Qe.RGBA]:t.RGBA},[Et.UNSIGNED_SHORT_5_5_5_1]:{[Qe.RGBA]:t.RGBA}},e}class mN{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new qt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=SIe(e),this.samplerTypes=TIe(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new Wx(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Wx(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==at.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new Wx(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,n.samplerType=this.samplerTypes[n.internalFormat]??at.FLOAT,this.webGLVersion===2&&e.type===Et.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)==null?void 0:i.upload(r,e,n))n.samplerType!==at.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&Ah(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===Xa.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=Ol.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==Xa.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Cl.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Cl.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Cl.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Cl.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}mN.extension={type:rt.RendererSystem,name:"texture"};bt.add(mN);class vN{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}vN.extension={type:rt.RendererSystem,name:"transformFeedback"};bt.add(vN);class Sy{constructor(e){this.renderer=e}init(e){this.screen=new Gt(0,0,e.width,e.height),this.element=e.view||lt.ADAPTER.createCanvas(),this.resolution=e.resolution||lt.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Sy.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Sy.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_view"};bt.add(Sy);lt.PREFER_ENV=_d.WEBGL2;lt.STRICT_TEXTURE_CACHE=!1;lt.RENDER_OPTIONS={...Ey.defaultOptions,...wy.defaultOptions,...Sy.defaultOptions,...Ty.defaultOptions};Object.defineProperties(lt,{WRAP_MODE:{get(){return qt.defaultOptions.wrapMode},set(t){$t("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),qt.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return qt.defaultOptions.scaleMode},set(t){$t("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),qt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return qt.defaultOptions.mipmap},set(t){$t("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),qt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return qt.defaultOptions.anisotropicLevel},set(t){$t("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),qt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return $t("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),es.defaultResolution},set(t){es.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return $t("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),es.defaultMultisample},set(t){es.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Eu.defaultMaxTextures},set(t){$t("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Eu.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Eu.defaultBatchSize},set(t){$t("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Eu.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Eu.canUploadSameBuffer},set(t){$t("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Eu.canUploadSameBuffer=t}},GC_MODE:{get(){return Tu.defaultMode},set(t){$t("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Tu.defaultMode=t}},GC_MAX_IDLE:{get(){return Tu.defaultMaxIdle},set(t){$t("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Tu.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Tu.defaultCheckCountMax},set(t){$t("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Tu.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Al.defaultVertexPrecision},set(t){$t("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Al.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Al.defaultFragmentPrecision},set(t){$t("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Al.defaultFragmentPrecision=t}}});var Lc=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Lc||{});class n2{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const VY=class to{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n2(null,null,1/0),this.deltaMS=1/to.targetFPMS,this.elapsedMS=1/to.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,r=Lc.NORMAL){return this._addListener(new n2(e,n,r))}addOnce(e,n,r=Lc.NORMAL){return this._addListener(new n2(e,n,r,!0))}_addListener(e){let n=this._head.next,r=this._head;if(!n)e.connect(r);else{for(;n;){if(e.priority>n.priority){e.connect(r);break}r=n,n=n.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,n){let r=this._head.next;for(;r;)r.match(e,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*to.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,n)/1e3,to.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!to._shared){const e=to._shared=new to;e.autoStart=!0,e._protected=!0}return to._shared}static get system(){if(!to._system){const e=to._system=new to;e.autoStart=!0,e._protected=!0}return to._system}};VY.targetFPMS=.06;let qr=VY;Object.defineProperties(lt,{TARGET_FPMS:{get(){return qr.targetFPMS},set(t){$t("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),qr.targetFPMS=t}}});class yN{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Lc.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?qr.shared:new qr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}yN.extension=rt.Application;bt.add(yN);const WY=[];bt.handleByList(rt.Renderer,WY);function XY(t){for(const e of WY)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var CIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,AIe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const YY=CIe,bN=AIe;class _N{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=Fr.HIGH?this.multisample=Fr.HIGH:n>=Fr.MEDIUM?this.multisample=Fr.MEDIUM:n>=Fr.LOW?this.multisample=Fr.LOW:this.multisample=Fr.NONE}destroy(){}}_N.extension={type:rt.RendererSystem,name:"_multisample"};bt.add(_N);class PIe{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class xN{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new PIe(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}xN.extension={type:rt.RendererSystem,name:"buffer"};bt.add(xN);class wN{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}wN.extension={type:rt.RendererSystem,name:"objectRenderer"};bt.add(wN);const Xx=class BM extends HY{constructor(e){super(),this.type=H3.WEBGL,e=Object.assign({},lt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ta({projectionMatrix:new Lr},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:BM.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in e&&($t("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=BM.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:nY()}render(e,n){this.objectRenderer.render(e,n)}resize(e,n){this._view.resizeView(e,n)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return $t("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return $t("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return $t("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return $t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){$t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return $t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){$t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return $t("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,n){return this.textureGenerator.generateTexture(e,n)}};Xx.extension={type:rt.Renderer,priority:1},Xx.__plugins={},Xx.__systems={};let BS=Xx;bt.handleByMap(rt.RendererPlugin,BS.__plugins);bt.handleByMap(rt.RendererSystem,BS.__systems);bt.add(BS);class EN extends Ig{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new qt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Ig?this.addResourceAt(e[r],r):this.addResourceAt(J3(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(e).then(()=>{const{realWidth:n,realHeight:r}=this.items[0];return this.resize(n,r),this.update(),Promise.resolve(this)}),this._load}}class qY extends EN{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Ch.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,r.type,c.resource.source))}return!0}}class KY extends Fl{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ZY=class F0 extends EN{constructor(e,n){const{width:r,height:i,autoLoad:s,linkBaseTexture:o}=n||{};if(e&&e.length!==F0.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<F0.SIDES;a++)this.items[a].target=Ch.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,n),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Ch.TEXTURE_CUBE_MAP}addBaseTextureAt(e,n,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[n])throw new Error(`Index ${n} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ch.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this}upload(e,n,r){const i=this.itemDirtyIds;for(let s=0;s<F0.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<n.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===F0.SIDES}};ZY.SIDES=6;let QY=ZY;class fh extends Fl{constructor(e,n){n=n||{};let r,i,s;typeof e=="string"?(r=fh.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.ownsImageBitmap=n.ownsImageBitmap??s,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await lt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===vs.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return fh._EMPTY=fh._EMPTY??lt.ADAPTER.createCanvas(0,0),fh._EMPTY}}const FM=class Yx extends Fl{constructor(e,n){n=n||{},super(lt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=n.scale||1,this._overrideWidth=n.width,this._overrideHeight=n.height,this._resolve=null,this._crossorigin=n.crossorigin,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Yx.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Fl.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=n=>{this._resolve&&(e.onerror=null,this.onError.emit(n))},e.onload=()=>{if(!this._resolve)return;const n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=n*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*n,s=this._overrideHeight||this._overrideWidth/n*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${cd()}`,o.getContext("2d").drawImage(e,0,0,n,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const n=Yx.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,n){return n==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Yx.SVG_XML.test(e)}};FM.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,FM.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let xE=FM;class RIe extends Fl{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const zM=class UM extends Fl{constructor(e,n){if(n=n||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");n.autoLoad!==!1&&r.setAttribute("preload","auto"),n.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),n.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),n.loop===!0&&r.setAttribute("loop",""),n.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Fl.crossOrigin(r,i,n.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||UM.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=n.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),n.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const n=qr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((n,r)=>{this.valid?n(this):(this._resolve=n,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const n=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!n&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(qr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||UM.TYPES.includes(n)}};zM.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],zM.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let TN=zM;vE.push(fh,rN,KY,TN,RIe,xE,gb,QY,qY);let IIe=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new vo("disposeTransformFeedback")}bindBuffer(e,n){this.buffers[e]=n}destroy(){this.disposeRunner.emit(this,!1)}};const MIe="7.4.0",LIe=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:vs,AbstractMultiResource:EN,ArrayResource:qY,Attribute:IM,BLEND_MODES:kt,BUFFER_BITS:hE,BUFFER_TYPE:ja,BackgroundSystem:wy,BaseImageResource:Fl,BaseRenderTexture:nN,BaseTexture:qt,BatchDrawCall:yE,BatchGeometry:eN,BatchRenderer:Eu,BatchShaderGenerator:AY,BatchSystem:tN,BatchTextureArray:bE,BrowserAdapter:jX,Buffer:Vr,BufferResource:gb,BufferSystem:xN,CLEAR_MODES:Ra,COLOR_MASK_BITS:$X,CanvasResource:KY,Circle:mb,Color:wn,ContextSystem:Ey,CubeResource:QY,DEG_TO_RAD:yY,DRAW_MODES:Zo,ENV:_d,Ellipse:vb,ExtensionType:rt,FORMATS:Qe,Filter:es,FilterState:RY,FilterSystem:oN,Framebuffer:_E,FramebufferSystem:aN,GC_MODES:LS,GLFramebuffer:IY,GLProgram:DY,GLTexture:Wx,GenerateTextureSystem:fN,Geometry:cm,GeometrySystem:lN,IGLUniformData:dIe,INSTALLED:vE,ImageBitmapResource:fh,ImageResource:rN,MASK_TYPES:Hr,MIPMAP_MODES:Xa,MSAA_QUALITY:Fr,MaskData:LY,MaskSystem:cN,Matrix:Lr,MultisampleSystem:_N,ObjectRenderer:_b,ObjectRendererSystem:wN,ObservablePoint:ka,PI_2:xy,PRECISION:uo,PluginSystem:dN,Point:It,Polygon:Ku,Program:Al,ProjectionSystem:hN,Quad:PY,QuadUv:sN,RAD_TO_DEG:vY,RENDERER_TYPE:H3,Rectangle:Gt,RenderTexture:wd,RenderTexturePool:iN,RenderTextureSystem:pN,Renderer:BS,Resource:Ig,RoundedRectangle:yb,Runner:vo,SAMPLER_TYPES:at,SCALE_MODES:Cl,SHAPES:_i,SVGResource:xE,ScissorSystem:NY,Shader:Tc,ShaderSystem:gN,SpriteMaskFilter:MY,StartupSystem:Ty,State:qa,StateSystem:GY,StencilSystem:uN,SystemManager:HY,TARGETS:Ch,TYPES:Et,Texture:Dt,TextureGCSystem:Tu,TextureMatrix:DS,TextureSystem:mN,TextureUvs:NS,Ticker:qr,TickerPlugin:yN,Transform:bb,TransformFeedback:IIe,TransformFeedbackSystem:vN,UPDATE_PRIORITY:Lc,UniformGroup:ta,VERSION:MIe,VideoResource:TN,ViewSystem:Sy,ViewableBuffer:mE,WRAP_MODES:Ol,autoDetectRenderer:XY,autoDetectResource:J3,checkMaxIfStatementsInShader:pY,createUBOElements:zY,defaultFilterVertex:bN,defaultVertex:YY,extensions:bt,generateProgram:BY,generateUniformBufferSync:$Y,getTestContext:wY,getUBOData:UY,groupD8:fr,isMobile:La,settings:lt,uniformParsers:Ph,unsafeEvalSupported:SY,utils:NRe},Symbol.toStringTag,{value:"Module"}));class Cy{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Gt.EMPTY:(e=e||new Gt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*n.x+s*n.y+a,u=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY,b=o*n+l*r+u,y=a*n+c*r+d;h=b<h?b:h,f=y<f?y:f,p=b>p?b:p,m=y>m?y:m,b=o*i+l*r+u,y=a*i+c*r+d,h=b<h?b:h,f=y<f?y:f,p=b>p?b:p,m=y>m?y:m,b=o*n+l*s+u,y=a*n+c*s+d,h=b<h?b:h,f=y<f?y:f,p=b>p?b:p,m=y>m?y:m,b=o*i+l*s+u,y=a*i+c*s+d,h=b<h?b:h,f=y<f?y:f,p=b>p?b:p,m=y>m?y:m,this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,h=e.ty;let f=this.minX,p=this.minY,m=this.maxX,b=this.maxY;for(let y=r;y<i;y+=2){const x=n[y],_=n[y+1],w=a*x+c*_+d,E=u*_+l*x+h;f=Math.min(f,w-s),m=Math.max(m,w+s),p=Math.min(p,E-o),b=Math.max(b,E+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=b}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class or extends am{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new bb,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Cy,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(or.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Gt),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Gt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Cy);const n=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new JY),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*vY}set angle(e){this.transform.rotation=e*yY}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class JY extends or{constructor(){super(...arguments),this.sortDirty=null}}or.prototype.displayObjectUpdateTransform=or.prototype.updateTransform;const kIe=new Lr;function OIe(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const eq=class $M extends or{constructor(){super(),this.children=[],this.sortableChildren=$M.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const r=this.getChildIndex(e),i=this.getChildIndex(n);this.children[r]=n,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Ah(this.children,r,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],r=this.children.indexOf(n);if(r===-1)return null;n.parent=null,n.transform._parentID=-1,Ah(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,Ah(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const r=e,i=n,s=i-r;let o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,r=this.children.length;n<r;++n){const i=this.children[n];i._lastSortedIndex=n,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(OIe),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){const r=n._mask.isMaskData?n._mask.maskObject:n._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(n._bounds,r._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const r=super.getLocalBounds(e);if(!n)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==$M.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=kIe.copyFrom(i),i.prepend(s)):i=s),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var n;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(n=this.filters)!=null&&n.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,o,a;const n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<n.length;l++)n[l].enabled&&this._enabledFilters.push(n[l])}const i=n&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Hr.NONE));if(i&&e.batch.flush(),n&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),n&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(n)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e}};eq.defaultSortableChildren=!1;let Fi=eq;Fi.prototype.containerUpdateTransform=Fi.prototype.updateTransform;Object.defineProperties(lt,{SORTABLE_CHILDREN:{get(){return Fi.defaultSortableChildren},set(t){$t("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Fi.defaultSortableChildren=t}}});const NIe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Cy,Container:Fi,DisplayObject:or,TemporaryDisplayObject:JY},Symbol.toStringTag,{value:"Module"}));var xb=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(xb||{});const h0=new It,DIe=new Uint16Array([0,1,2,0,2,3]);class Ka extends Fi{constructor(e){super(),this._anchor=new ka(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new wn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=kt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Dt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=DIe,this.pluginName="batch",this.isSprite=!0,this._roundPixels=lt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=yc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=yc(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,u=e.trim,d=e.orig,h=this._anchor;let f=0,p=0,m=0,b=0;if(u?(p=u.x-h._x*d.width,f=p+u.width,b=u.y-h._y*d.height,m=b+u.height):(p=-h._x*d.width,f=p+d.width,b=-h._y*d.height,m=b+d.height),c[0]=r*p+s*b+a,c[1]=o*b+i*p+l,c[2]=r*f+s*b+a,c[3]=o*b+i*f+l,c[4]=r*f+s*m+a,c[5]=o*m+i*f+l,c[6]=r*p+s*m+a,c[7]=o*m+i*p+l,this._roundPixels){const y=lt.RESOLUTION;for(let x=0;x<c.length;++x)c[x]=Math.round(c[x]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,d=s.ty,h=-i._x*r.width,f=h+r.width,p=-i._y*r.height,m=p+r.height;if(n[0]=o*h+l*p+u,n[1]=c*p+a*h+d,n[2]=o*f+l*p+u,n[3]=c*p+a*f+d,n[4]=o*f+l*m+u,n[5]=c*m+a*f+d,n[6]=o*h+l*m+u,n[7]=c*m+a*h+d,this._roundPixels){const b=lt.RESOLUTION;for(let y=0;y<n.length;++y)n[y]=Math.round(n[y]*b)/b}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Cy),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Gt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,h0);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return h0.x>=i&&h0.x<i+n&&(s=-r*this.anchor.y,h0.y>=s&&h0.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,n){const r=e instanceof Dt?e:Dt.from(e,n);return new Ka(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=yc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=yc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Dt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const BIe=Object.freeze(Object.defineProperty({__proto__:null,Sprite:Ka},Symbol.toStringTag,{value:"Module"})),U_={willReadFrequently:!0},gl=class wt{static get experimentalLetterSpacingSupported(){let e=wt._experimentalLetterSpacingSupported;if(e!==void 0){const n=lt.ADAPTER.getCanvasRenderingContext2D().prototype;e=wt._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,r,i,s,o,a,l,c){this.text=e,this.style=n,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,n,r,i=wt._canvas){r=r??n.wordWrap;const s=n.toFontString(),o=wt.measureFont(s);o.fontSize===0&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);const a=i.getContext("2d",U_);a.font=s;const l=(r?wt.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const m=wt._measureText(l[p],n.letterSpacing,a);c[p]=m,u=Math.max(u,m)}let d=u+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);const h=n.lineHeight||o.fontSize+n.strokeThickness;let f=Math.max(h,o.fontSize+n.strokeThickness*2)+n.leading+(l.length-1)*(h+n.leading);return n.dropShadow&&(f+=n.dropShadowDistance),new wt(e,n,d,f,l,c,h+n.leading,u,o)}static _measureText(e,n,r){let i=!1;wt.experimentalLetterSpacingSupported&&(wt.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=n:s+=(wt.graphemeSegmenter(e).length-1)*n),s}static wordWrap(e,n,r=wt._canvas){const i=r.getContext("2d",U_);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=n,d=wt.collapseSpaces(u),h=wt.collapseNewlines(u);let f=!d;const p=n.wordWrapWidth+c,m=wt.tokenize(e);for(let b=0;b<m.length;b++){let y=m[b];if(wt.isNewline(y)){if(!h){a+=wt.addLine(o),f=!d,o="",s=0;continue}y=" "}if(d){const _=wt.isBreakingSpace(y),w=wt.isBreakingSpace(o[o.length-1]);if(_&&w)continue}const x=wt.getFromCache(y,c,l,i);if(x>p)if(o!==""&&(a+=wt.addLine(o),o="",s=0),wt.canBreakWords(y,n.breakWords)){const _=wt.wordWrapSplit(y);for(let w=0;w<_.length;w++){let E=_[w],S=E,A=1;for(;_[w+A];){const M=_[w+A];if(!wt.canBreakChars(S,M,y,w,n.breakWords))E+=M;else break;S=M,A++}w+=A-1;const k=wt.getFromCache(E,c,l,i);k+s>p&&(a+=wt.addLine(o),f=!1,o="",s=0),o+=E,s+=k}}else{o.length>0&&(a+=wt.addLine(o),o="",s=0);const _=b===m.length-1;a+=wt.addLine(y,!_),f=!1,o="",s=0}else x+s>p&&(f=!1,a+=wt.addLine(o),o="",s=0),(o.length>0||!wt.isBreakingSpace(y)||f)&&(o+=y,s+=x)}return a+=wt.addLine(o,!1),a}static addLine(e,n=!0){return e=wt.trimRight(e),e=n?`${e}
`:e,e}static getFromCache(e,n,r,i){let s=r[e];return typeof s!="number"&&(s=wt._measureText(e,n,i)+n,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const r=e[n];if(!wt.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:wt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:wt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const n=[];let r="";if(typeof e!="string")return n;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(wt.isBreakingSpace(s,o)||wt.isNewline(s)){r!==""&&(n.push(r),r=""),n.push(s);continue}r+=s}return r!==""&&n.push(r),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,r,i,s){return!0}static wordWrapSplit(e){return wt.graphemeSegmenter(e)}static measureFont(e){if(wt._fonts[e])return wt._fonts[e];const n={ascent:0,descent:0,fontSize:0},r=wt._canvas,i=wt._context;i.font=e;const s=wt.METRICS_STRING+wt.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(wt.BASELINE_SYMBOL).width);const l=Math.ceil(wt.HEIGHT_MULTIPLIER*a);if(a=a*wt.BASELINE_MULTIPLIER|0,o===0||l===0)return wt._fonts[e]=n,n;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,d=o*4;let h=0,f=0,p=!1;for(h=0;h<a;++h){for(let m=0;m<d;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f+=d;else break}for(n.ascent=a-h,f=u-d,p=!1,h=l;h>a;--h){for(let m=0;m<d;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f-=d;else break}return n.descent=h-a,n.fontSize=n.ascent+n.descent,wt._fonts[e]=n,n}static clearMetrics(e=""){e?delete wt._fonts[e]:wt._fonts={}}static get _canvas(){var e;if(!wt.__canvas){let n;try{const r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",U_))!=null&&e.measureText)return wt.__canvas=r,r;n=lt.ADAPTER.createCanvas()}catch{n=lt.ADAPTER.createCanvas()}n.width=n.height=10,wt.__canvas=n}return wt.__canvas}static get _context(){return wt.__context||(wt.__context=wt._canvas.getContext("2d",U_)),wt.__context}};gl.METRICS_STRING="|q",gl.BASELINE_SYMBOL="M",gl.BASELINE_MULTIPLIER=1.4,gl.HEIGHT_MULTIPLIER=2,gl.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})(),gl.experimentalLetterSpacing=!1,gl._fonts={},gl._newlines=[10,13],gl._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let uc=gl;const FIe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],tq=class z0{constructor(e){this.styleID=0,this.reset(),i2(this,e,e)}clone(){const e={};return i2(e,this,z0.defaultStyle),new z0(e)}reset(){i2(this,z0.defaultStyle,z0.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=r2(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=r2(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){zIe(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=r2(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let r=n.length-1;r>=0;r--){let i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!FIe.includes(i)&&(i=`"${i}"`),n[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}};tq.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:xb.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let So=tq;function r2(t){const e=wn.shared,n=r=>{const i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(n):n(t)}function zIe(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function i2(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const UIe={texture:!0,children:!1,baseTexture:!0},nq=class jM extends Ka{constructor(e,n,r){let i=!1;r||(r=lt.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=Dt.from(r);s.orig=new Gt,s.trim=new Gt,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=jM.defaultResolution??lt.RESOLUTION,this._autoResolution=jM.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return uc.experimentalLetterSpacing}static set experimentalLetterSpacing(e){$t("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),uc.experimentalLetterSpacing=e}updateText(e){const n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=uc.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,d=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=n.strokeThickness,r.textBaseline=n.textBaseline,r.lineJoin=n.lineJoin,r.miterLimit=n.miterLimit;let h,f;const p=n.dropShadow?2:1;for(let m=0;m<p;++m){const b=n.dropShadow&&m===0,y=b?Math.ceil(Math.max(1,o)+n.padding*2):0,x=y*this._resolution;if(b){r.fillStyle="black",r.strokeStyle="black";const w=n.dropShadowColor,E=n.dropShadowBlur*this._resolution,S=n.dropShadowDistance*this._resolution;r.shadowColor=wn.shared.setValue(w).setAlpha(n.dropShadowAlpha).toRgbaString(),r.shadowBlur=E,r.shadowOffsetX=Math.cos(n.dropShadowAngle)*S,r.shadowOffsetY=Math.sin(n.dropShadowAngle)*S+x}else r.fillStyle=this._generateFillStyle(n,a,i),r.strokeStyle=n.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let _=(l-d.fontSize)/2;l-d.fontSize<0&&(_=0);for(let w=0;w<a.length;w++)h=n.strokeThickness/2,f=n.strokeThickness/2+w*l+d.ascent+_,n.align==="right"?h+=u-c[w]:n.align==="center"&&(h+=(u-c[w])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(a[w],h+n.padding,f+n.padding-y,!0),n.fill&&this.drawLetterSpacing(a[w],h+n.padding,f+n.padding-y)}this.updateTexture()}drawLetterSpacing(e,n,r,i=!1){const s=this._style.letterSpacing;let o=!1;if(uc.experimentalLetterSpacingSupported&&(uc.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r);return}let a=n;const l=uc.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let d=0;d<l.length;++d){const h=l[d];i?this.context.strokeText(h,a,r):this.context.fillText(h,a,r);let f="";for(let p=d+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=hY(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const n=this._texture,r=this._style,i=r.trim?0:r.padding,s=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-i*2,n.orig.height=n._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,n){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,n)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,n,r){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),d=e.fillGradientStops.slice();if(!d.length){const h=u.length+1;for(let f=1;f<h;++f)d.push(f/h)}if(u.unshift(i[0]),d.unshift(0),u.push(i[i.length-1]),d.push(1),e.fillGradientType===xb.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const h=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<n.length;f++){const p=r.lineHeight*(f-1)+h,m=r.lineHeight*f;let b=m;f>0&&p>m&&(b=(m+p)/2);const y=m+h,x=r.lineHeight*(f+1);let _=y;f+1<n.length&&x<y&&(_=(y+x)/2);const w=(_-b)/c;for(let E=0;E<u.length;E++){let S=0;typeof d[E]=="number"?S=d[E]:S=E/u.length;let A=Math.min(1,Math.max(0,b/c+S*w));A=Number(A.toFixed(5)),s.addColorStop(A,u[E])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const h=u.length+1;let f=1;for(let p=0;p<u.length;p++){let m;typeof d[p]=="number"?m=d[p]:m=f/h,s.addColorStop(m,u[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},UIe,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const n=yc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const n=yc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof So?this._style=e:this._style=new So(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};nq.defaultAutoResolution=!0;let FS=nq;const $Ie=Object.freeze(Object.defineProperty({__proto__:null,TEXT_GRADIENT:xb,Text:FS,TextMetrics:uc,TextStyle:So},Symbol.toStringTag,{value:"Module"}));class Ay{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Tv{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),d=u[0],h=u[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[d]=p}r[o].push(l)}const i=new Ay;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class wE{static test(e){const n=e;return typeof e!="string"&&"getElementsByTagName"in e&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new Ay,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)n.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)n.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];n.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class EE{static test(e){return typeof e=="string"&&e.includes("<font>")?wE.test(lt.ADAPTER.parseXML(e)):!1}static parse(e){return wE.parse(lt.ADAPTER.parseXML(e))}}const s2=[Tv,wE,EE];function rq(t){for(let e=0;e<s2.length;e++)if(s2[e].test(t))return s2[e];return null}function jIe(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=t.width/r-l-c*2,d=t.height/r-l-c*2,h=o.slice(),f=n.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),n.fillGradientType===xb.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,d+c);let p=0;const m=(s.fontProperties.fontSize+n.strokeThickness)/d;for(let b=0;b<i.length;b++){const y=s.lineHeight*b;for(let x=0;x<h.length;x++){let _=0;typeof f[x]=="number"?_=f[x]:_=x/h.length;const w=y/d+_*m;let E=Math.max(p,w);E=Math.min(E,1),a.addColorStop(E,h[x]),p=E}}}else{a=e.createLinearGradient(c,d/2,u+c,d/2);const p=h.length+1;let m=1;for(let b=0;b<h.length;b++){let y;typeof f[b]=="number"?y=f[b]:y=m/p,a.addColorStop(y,h[b]),m++}}return a}function GIe(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=jIe(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,h=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=wn.shared.setValue(d).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function qx(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function iq(t){return Array.from?Array.from(t):t.split("")}function HIe(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...iq(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const vu=class ml{constructor(e,n,r){var u;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Bl(o.file),c={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let d=0;d<e.page.length;d++){const{id:h,file:f}=e.page[d];c[h]=n instanceof Array?n[d]:n[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[h].baseTexture.alphaMode=vs.NO_PREMULTIPLIED_ALPHA,c[h].baseTexture.mipmap=Xa.OFF)}for(let d=0;d<e.char.length;d++){const{id:h,page:f}=e.char[d];let{x:p,y:m,width:b,height:y,xoffset:x,yoffset:_,xadvance:w}=e.char[d];p/=l,m/=l,b/=l,y/=l,x/=l,_/=l,w/=l;const E=new Gt(p+c[f].frame.x/l,m+c[f].frame.y/l,b,y);this.chars[h]={xOffset:x,yOffset:_,xAdvance:w,kerning:{},texture:new Dt(c[f].baseTexture,E),page:f}}for(let d=0;d<e.kerning.length;d++){let{first:h,second:f,amount:p}=e.kerning[d];h/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[h]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((u=a==null?void 0:a.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,n,r){let i;if(e instanceof Ay)i=e;else{const o=rq(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof Dt&&(n=[n]);const s=new ml(i,n,r);return ml.available[s.font]=s,s}static uninstall(e){const n=ml.available[e];if(!n)throw new Error(`No font found named '${e}'`);n.destroy(),delete ml.available[e]}static from(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},ml.defaultOptions,r),u=HIe(i),d=n instanceof So?n:new So(n),h=a,f=new Ay;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p=0,m=0,b,y,x,_=0;const w=[];for(let S=0;S<u.length;S++){b||(b=lt.ADAPTER.createCanvas(),b.width=a,b.height=l,y=b.getContext("2d"),x=new qt(b,{resolution:o,...c}),w.push(new Dt(x)),f.page.push({id:w.length-1,file:""}));const A=u[S],k=uc.measureText(A,d,!1,b),M=k.width,I=Math.ceil(k.height),B=Math.ceil((d.fontStyle==="italic"?2:1)*M);if(m>=l-I*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${A}')`);--S,b=null,y=null,x=null,m=0,p=0,_=0;continue}if(_=Math.max(I+k.fontProperties.descent,_),B*o+p>=h){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${A}')`);--S,m+=_*o,m=Math.ceil(m),p=0,_=0;continue}GIe(b,y,k,p,m,o,d);const R=qx(k.text);f.char.push({id:R,page:w.length-1,x:p/o,y:m/o,width:B,height:I,xoffset:0,yoffset:0,xadvance:M-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),p+=(B+2*s)*o,p=Math.ceil(p)}if(!(r!=null&&r.skipKerning))for(let S=0,A=u.length;S<A;S++){const k=u[S];for(let M=0;M<A;M++){const I=u[M],B=y.measureText(k).width,R=y.measureText(I).width,O=y.measureText(k+I).width-(B+R);O&&f.kerning.push({first:qx(k),second:qx(I),amount:O})}}const E=new ml(f,w,!0);return ml.available[e]!==void 0&&ml.uninstall(e),ml.available[e]=E,E}};vu.ALPHA=[["a","z"],["A","Z"]," "],vu.NUMERIC=[["0","9"]],vu.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],vu.ASCII=[[" ","~"]],vu.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:vu.ALPHANUMERIC},vu.available={};let sc=vu;class sq{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const o2=new It,H6=new Ku,oq=class aq extends Fi{constructor(e,n,r,i=Zo.TRIANGLES){super(),this.geometry=e,this.shader=n,this.state=r||qa.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=lt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Zo.TRIANGLES&&n.length<aq.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const n=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,d=this.vertexData;for(let h=0;h<d.length/2;h++){const f=n[h*2],p=n[h*2+1];d[h*2]=s*f+a*p+c,d[h*2+1]=o*f+l*p+u}if(this._roundPixels){const h=lt.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*h)/h}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new sq(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,o2);const n=this.geometry.getBuffer("aVertexPosition").data,r=H6.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(r[0]=n[l],r[1]=n[l+1],r[2]=n[c],r[3]=n[c+1],r[4]=n[u],r[5]=n[u+1],H6.contains(o2.x,o2.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};oq.BATCHABLE_SIZE=100;let Mg=oq;class wb extends cm{constructor(e,n,r){super();const i=new Vr(e),s=new Vr(n,!0),o=new Vr(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Et.FLOAT).addAttribute("aTextureCoord",s,2,!1,Et.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var VIe=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,WIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Lg extends Tc{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:Lr.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Al.from(WIe,VIe),r),this._colorDirty=!1,this.uvMatrix=new DS(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new wn(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;wn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}const XIe=Object.freeze(Object.defineProperty({__proto__:null,Mesh:Mg,MeshBatchUvs:sq,MeshGeometry:wb,MeshMaterial:Lg},Symbol.toStringTag,{value:"Module"}));var YIe=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,qIe=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const V6=[],W6=[],X6=[],lq=class cq extends Fi{constructor(e,n={}){super();const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},cq.styleDefaults,n);if(!sc.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new wn(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new ka(()=>{this.dirty=!0},this,0,0),this._roundPixels=lt.ROUND_PIXELS,this.dirty=!0,this._resolution=lt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var B;const e=sc.available[this._fontName],n=this.fontSize,r=n/e.size,i=new It,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=iq(l),u=this._maxWidth*e.size/n,d=e.distanceFieldType==="none"?V6:W6;let h=null,f=0,p=0,m=0,b=-1,y=0,x=0,_=0,w=0;for(let R=0;R<c.length;R++){const O=c[R],C=qx(O);if(/(?:\s)/.test(O)&&(b=R,y=f,w++),O==="\r"||O===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++x,i.x=0,i.y+=e.lineHeight,h=null,w=0;continue}const F=e.chars[C];if(!F)continue;h&&F.kerning[h]&&(i.x+=F.kerning[h]);const q=X6.pop()||{texture:Dt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new It};q.texture=F.texture,q.line=m,q.charCode=C,q.position.x=Math.round(i.x+F.xOffset+this._letterSpacing/2),q.position.y=Math.round(i.y+F.yOffset),q.prevSpaces=w,s.push(q),f=q.position.x+Math.max(F.xAdvance-F.xOffset,F.texture.orig.width),i.x+=F.xAdvance+this._letterSpacing,_=Math.max(_,F.yOffset+F.texture.height),h=C,b!==-1&&u>0&&i.x>u&&(++x,Ah(s,1+b-x,1+R-b),R=b,b=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),m++,i.x=0,i.y+=e.lineHeight,h=null,w=0)}const E=c[c.length-1];E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const S=[];for(let R=0;R<=m;R++){let O=0;this._align==="right"?O=p-o[R]:this._align==="center"?O=(p-o[R])/2:this._align==="justify"&&(O=a[R]<0?0:(p-o[R])/a[R]),S.push(O)}const A=s.length,k={},M=[],I=this._activePagesMeshData;d.push(...I);for(let R=0;R<A;R++){const O=s[R].texture,C=O.baseTexture.uid;if(!k[C]){let F=d.pop();if(!F){const G=new wb;let j,H;e.distanceFieldType==="none"?(j=new Lg(Dt.EMPTY),H=kt.NORMAL):(j=new Lg(Dt.EMPTY,{program:Al.from(qIe,YIe),uniforms:{uFWidth:0}}),H=kt.NORMAL_NPM);const Z=new Mg(G,j);Z.blendMode=H,F={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Z,vertices:null,uvs:null,indices:null}}F.index=0,F.indexCount=0,F.vertexCount=0,F.uvsCount=0,F.total=0;const{_textureCache:q}=this;q[C]=q[C]||new Dt(O.baseTexture),F.mesh.texture=q[C],F.mesh.tint=this._tintColor.value,M.push(F),k[C]=F}k[C].total++}for(let R=0;R<I.length;R++)M.includes(I[R])||this.removeChild(I[R].mesh);for(let R=0;R<M.length;R++)M[R].mesh.parent!==this&&this.addChild(M[R].mesh);this._activePagesMeshData=M;for(const R in k){const O=k[R],C=O.total;if(!(((B=O.indices)==null?void 0:B.length)>6*C)||O.vertices.length<Mg.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*C),O.uvs=new Float32Array(4*2*C),O.indices=new Uint16Array(6*C);else{const F=O.total,q=O.vertices;for(let G=F*4*2;G<q.length;G++)q[G]=0}O.mesh.size=6*C}for(let R=0;R<A;R++){const O=s[R];let C=O.position.x+S[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(C=Math.round(C));const F=C*r,q=O.position.y*r,G=O.texture,j=k[G.baseTexture.uid],H=G.frame,Z=G._uvs,X=j.index++;j.indices[X*6+0]=0+X*4,j.indices[X*6+1]=1+X*4,j.indices[X*6+2]=2+X*4,j.indices[X*6+3]=0+X*4,j.indices[X*6+4]=2+X*4,j.indices[X*6+5]=3+X*4,j.vertices[X*8+0]=F,j.vertices[X*8+1]=q,j.vertices[X*8+2]=F+H.width*r,j.vertices[X*8+3]=q,j.vertices[X*8+4]=F+H.width*r,j.vertices[X*8+5]=q+H.height*r,j.vertices[X*8+6]=F,j.vertices[X*8+7]=q+H.height*r,j.uvs[X*8+0]=Z.x0,j.uvs[X*8+1]=Z.y0,j.uvs[X*8+2]=Z.x1,j.uvs[X*8+3]=Z.y1,j.uvs[X*8+4]=Z.x2,j.uvs[X*8+5]=Z.y2,j.uvs[X*8+6]=Z.x3,j.uvs[X*8+7]=Z.y3}this._textWidth=p*r,this._textHeight=(i.y+e.lineHeight)*r;for(const R in k){const O=k[R];if(this.anchor.x!==0||this.anchor.y!==0){let G=0;const j=this._textWidth*this.anchor.x,H=this._textHeight*this.anchor.y;for(let Z=0;Z<O.total;Z++)O.vertices[G++]-=j,O.vertices[G++]-=H,O.vertices[G++]-=j,O.vertices[G++]-=H,O.vertices[G++]-=j,O.vertices[G++]-=H,O.vertices[G++]-=j,O.vertices[G++]-=H}this._maxLineHeight=_*r;const C=O.mesh.geometry.getBuffer("aVertexPosition"),F=O.mesh.geometry.getBuffer("aTextureCoord"),q=O.mesh.geometry.getIndex();C.data=O.vertices,F.data=O.uvs,q.data=O.indices,C.update(),F.update(),q.update()}for(let R=0;R<s.length;R++)X6.push(s[R]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:n,distanceFieldType:r,size:i}=sc.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),d=(Math.abs(c)+Math.abs(u))/2,h=this.fontSize/i,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=d*n*h*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=sc.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!sc.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??sc.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:n}=this,r=sc.available[this._fontName].distanceFieldType==="none"?V6:W6;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>n[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=Dt.EMPTY});for(const i in n)n[i].destroy(),delete n[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};lq.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let uq=lq;const Y6={loader:rt.LoadParser,resolver:rt.ResolveParser,cache:rt.CacheParser,detection:rt.DetectionParser};bt.handle(rt.Asset,t=>{const e=t.ref;Object.entries(Y6).filter(([n])=>!!e[n]).forEach(([n,r])=>bt.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(Y6).filter(n=>!!e[n]).forEach(n=>bt.remove(e[n]))});class KIe{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function uf(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Hc(t,e){const n=t.split("?")[0],r=Zr.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const qo=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||n?e(r):r):t),TE=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function dq(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?dq(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function hq(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),dq(t,i,0,n,r)}else r.push(t);return r}const Py=t=>!Array.isArray(t);class ZIe{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=qo(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof Dt){const a=n;r.forEach(l=>{a.baseTexture!==Dt.EMPTY.baseTexture&&qt.addToCache(a.baseTexture,l),Dt.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Iu=new ZIe;class QIe{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,n,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,i,n,this))&&(i=await c.parse(i,n,this)||i,r.parser=c)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=Py(e),o=qo(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=Zr.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,n&&n(++r/a)}catch(d){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${d}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const n=qo(e,r=>({alias:[r],src:r})).map(async r=>{var o,a;const i=Zr.toAbsolute(r.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var da=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(da||{});const JIe=".json",eMe="application/json",fq={extension:{type:rt.LoadParser,priority:da.Low},name:"loadJson",test(t){return uf(t,eMe)||Hc(t,JIe)},async load(t){return await(await lt.ADAPTER.fetch(t)).json()}};bt.add(fq);const tMe=".txt",nMe="text/plain",pq={name:"loadTxt",extension:{type:rt.LoadParser,priority:da.Low},test(t){return uf(t,nMe)||Hc(t,tMe)},async load(t){return await(await lt.ADAPTER.fetch(t)).text()}};bt.add(pq);const rMe=["normal","bold","100","200","300","400","500","600","700","800","900"],iMe=[".ttf",".otf",".woff",".woff2"],sMe=["font/ttf","font/otf","font/woff","font/woff2"],oMe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function gq(t){const e=Zr.extname(t),n=Zr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=n.length>0;for(const s of n)if(!s.match(oMe)){r=!1;break}let i=n.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const aMe=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function lMe(t){return aMe.test(t)?t:encodeURI(t)}const mq={extension:{type:rt.LoadParser,priority:da.Low},name:"loadWebFont",test(t){return uf(t,sMe)||Hc(t,iMe)},async load(t,e){var r,i,s;const n=lt.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??gq(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(u=>rMe.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const d=l[u],h=new FontFace(a,`url(${lMe(t)})`,{...c,weight:d});await h.load(),n.add(h),o.push(h)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>lt.ADAPTER.getFontFaceSet().delete(e))}};bt.add(mq);const cMe=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Jp=null,GM=class extends Worker{constructor(){Jp||(Jp=URL.createObjectURL(new Blob([cMe],{type:"application/javascript"}))),super(Jp)}};GM.revokeObjectURL=function(){Jp&&(URL.revokeObjectURL(Jp),Jp=null)};const uMe=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let eg=null;class vq extends Worker{constructor(){eg||(eg=URL.createObjectURL(new Blob([uMe],{type:"application/javascript"}))),super(eg)}}vq.revokeObjectURL=function(){eg&&(URL.revokeObjectURL(eg),eg=null)};let q6=0,a2;class dMe{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=new GM;n.addEventListener("message",r=>{n.terminate(),GM.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){a2===void 0&&(a2=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<a2&&(this._createdWorkers++,e=new vq,e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[q6]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:q6++,id:r})}}const K6=new dMe;function um(t,e,n){t.resource.internal=!0;const r=new Dt(t),i=()=>{delete e.promiseCache[n],Iu.has(n)&&Iu.remove(n)};return r.baseTexture.once("destroyed",()=>{n in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const hMe=[".jpeg",".jpg",".png",".webp",".avif"],fMe=["image/jpeg","image/png","image/webp","image/avif"];async function yq(t){const e=await lt.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const Eb={name:"loadTextures",extension:{type:rt.LoadParser,priority:da.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return uf(t,fMe)||Hc(t,hMe)},async load(t,e,n){var a;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;r?this.config.preferWorkers&&await K6.isImageBitmapSupported()?i=await K6.loadImageBitmap(t):i=await yq(t):i=await new Promise((l,c)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=t,u.complete?l(u):(u.onload=()=>l(u),u.onerror=d=>c(d))});const s={...e.data};s.resolution??(s.resolution=Bl(t)),r&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new qt(i,s);return o.resource.src=t,um(o,n,t)},unload(t){t.destroy(!0)}};bt.add(Eb);const pMe=".svg",gMe="image/svg+xml",bq={extension:{type:rt.LoadParser,priority:da.High},name:"loadSVG",test(t){return uf(t,gMe)||Hc(t,pMe)},async testParse(t){return xE.test(t)},async parse(t,e,n){var s;const r=new xE(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await r.load();const i=new qt(r,{resolution:Bl(t),...e==null?void 0:e.data});return i.resource.src=e.src,um(i,n,e.src)},async load(t,e){return(await lt.ADAPTER.fetch(t)).text()},unload:Eb.unload};bt.add(bq);const mMe=[".mp4",".m4v",".webm",".ogv"],vMe=["video/mp4","video/webm","video/ogg"],_q={name:"loadVideo",extension:{type:rt.LoadParser,priority:da.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return uf(t,vMe)||Hc(t,mMe)},async load(t,e,n){var o;let r;const i=await(await lt.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new TN(s,a);await l.load();const c=new qt(l,{alphaMode:await tY(),resolution:Bl(t),...e==null?void 0:e.data});c.resource.src=t,r=um(c,n,t),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return r},unload(t){t.destroy(!0)}};bt.add(_q);class yMe{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}getAlias(e){const{alias:n,name:r,src:i,srcs:s}=e;return qo(n||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));r.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(n).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof n[i]=="string")this.add({alias:s,src:n[i]});else if(Array.isArray(n[i]))this.add({alias:s,src:n[i]});else{const o=n[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}r.push(...s)}),this._bundles[e]=r}add(e,n,r,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?($t("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:n,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},qo(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:d,format:h,loadParser:f}=l;const p=qo(c||u).map(y=>typeof y=="string"?hq(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const b=[];p.forEach(y=>{y.forEach(x=>{let _={};if(typeof x!="object"){_.src=x;for(let w=0;w<this._parsers.length;w++){const E=this._parsers[w];if(E.test(x)){_=E.parse(x);break}}}else d=x.data??d,h=x.format??h,f=x.loadParser??f,_={..._,...x};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:m,data:d,format:h,loadParser:f}),b.push(_)})}),m.forEach(y=>{this._assetMap[y]=b})})}resolveBundle(e){const n=Py(e);e=qo(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=Py(e);e=qo(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(d=>d[l]?d[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}buildResolvedAsset(e,n){const{aliases:r,data:i,loadParser:s,format:o}=n;return(this._basePath||this._rootPath)&&(e.src=Zr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??Zr.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class xq{constructor(){this._detections=[],this._initialized=!1,this.resolver=new yMe,this.loader=new QIe,this.cache=Iu,this._backgroundLoader=new KIe(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r,i,s){this.resolver.add(e,n,r,i,s)}async load(e,n){this._initialized||await this.init();const r=Py(e),i=qo(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{n==null||n(++a/l)},u=o.map(d=>{const h=i[d];return l+=Object.keys(h).length,this._mapLoadToResolve(h,c).then(f=>{s[d]=f})});return await Promise.all(u),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Iu.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Iu.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Iu.set(u,c)}),o}async unload(e){this._initialized||await this.init();const n=qo(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=qo(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Iu.remove(r.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?n=await r.add(n):e.skipDetections||(n=await r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n}get detections(){return this._detections}get preferWorkers(){return Eb.config.preferWorkers}set preferWorkers(e){$t("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const U0=new xq;bt.handleByList(rt.LoadParser,U0.loader.parsers).handleByList(rt.ResolveParser,U0.resolver.parsers).handleByList(rt.CacheParser,U0.cache.parsers).handleByList(rt.DetectionParser,U0.detections);const wq={extension:rt.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof Dt),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};bt.add(wq);async function Eq(t){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Tq={extension:{type:rt.DetectionParser,priority:1},test:async()=>Eq("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};bt.add(Tq);const Sq={extension:{type:rt.DetectionParser,priority:0},test:async()=>Eq("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};bt.add(Sq);const Z6=["png","jpg","jpeg"],Cq={extension:{type:rt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Z6],remove:async t=>t.filter(e=>!Z6.includes(e))};bt.add(Cq);const bMe="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function SN(t){return bMe?!1:document.createElement("video").canPlayType(t)!==""}const Aq={extension:{type:rt.DetectionParser,priority:0},test:async()=>SN("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};bt.add(Aq);const Pq={extension:{type:rt.DetectionParser,priority:0},test:async()=>SN("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};bt.add(Pq);const Rq={extension:{type:rt.DetectionParser,priority:0},test:async()=>SN("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};bt.add(Rq);const Iq={extension:rt.ResolveParser,test:Eb.test,parse:t=>{var e;return{resolution:parseFloat(((e=lt.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Zr.extname(t).slice(1),src:t}}};bt.add(Iq);const _Me=Object.freeze(Object.defineProperty({__proto__:null,Assets:U0,AssetsClass:xq,Cache:Iu,LoaderParserPriority:da,cacheTextureArray:wq,checkDataUrl:uf,checkExtension:Hc,convertToList:qo,copySearchParams:TE,createStringVariations:hq,createTexture:um,detectAvif:Tq,detectDefaults:Cq,detectMp4:Pq,detectOgv:Rq,detectWebm:Aq,detectWebp:Sq,getFontFamilyName:gq,isSingleItem:Py,loadImageBitmap:yq,loadJson:fq,loadSVG:bq,loadTextures:Eb,loadTxt:pq,loadVideo:_q,loadWebFont:mq,resolveTextureUrl:Iq},Symbol.toStringTag,{value:"Module"})),xMe=[".xml",".fnt"],Mq={extension:{type:rt.LoadParser,priority:da.Normal},name:"loadBitmapFont",test(t){return xMe.includes(Zr.extname(t).toLowerCase())},async testParse(t){return Tv.test(t)||EE.test(t)},async parse(t,e,n){const r=Tv.test(t)?Tv.parse(t):EE.parse(t),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let d=Zr.join(Zr.dirname(i),u);d=TE(d,i),o.push(d)}const a=await n.load(o),l=o.map(c=>a[c]);return sc.install(r,l,!0)},async load(t,e){return(await lt.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};bt.add(Mq);const wMe=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:sc,BitmapFontData:Ay,BitmapText:uq,TextFormat:Tv,XMLFormat:wE,XMLStringFormat:EE,autoDetectFormat:rq,loadBitmapFont:Mq},Symbol.toStringTag,{value:"Module"})),Ry={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===_i.CIRC){const p=t.shape;n=p.x,r=p.y,o=a=p.radius,i=s=0}else if(t.type===_i.ELIP){const p=t.shape;n=p.x,r=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,m=p.width/2,b=p.height/2;n=p.x+m,r=p.y+b,o=a=Math.max(0,Math.min(p.radius,Math.min(m,b))),i=m-o,s=b-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let u=0,d=l*4+(i?2:0)+2,h=d,f=c;{const p=i+o,m=s,b=n+p,y=n-p,x=r+m;if(e[u++]=b,e[u++]=x,e[--d]=x,e[--d]=y,s){const _=r-m;e[h++]=y,e[h++]=_,e[--f]=_,e[--f]=b}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),b=i+Math.cos(m)*o,y=s+Math.sin(m)*a,x=n+b,_=n-b,w=r+y,E=r-y;e[u++]=x,e[u++]=w,e[--d]=w,e[--d]=_,e[h++]=_,e[h++]=E,e[--f]=E,e[--f]=x}{const p=i,m=s+a,b=n+p,y=n-p,x=r+m,_=r-m;e[u++]=b,e[u++]=x,e[--f]=_,e[--f]=b,i&&(e[u++]=y,e[u++]=x,e[--f]=_,e[--f]=y)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,l;if(t.type!==_i.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;r.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(n[0],n[1]);for(let u=2;u<n.length;u+=2)r.push(n[u],n[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function Q6(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const CN={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){Q6(n,!1);const o=[];for(let c=0;c<r.length;c++){const u=r[c];Q6(u.points,!0),o.push(n.length/2),n=n.concat(u.points)}const a=u3(n,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)i.push(n[c])}}},Lq={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},kq={build(t){Ry.build(t)},triangulate(t,e){Ry.triangulate(t,e)}};var fs=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(fs||{}),Oa=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(Oa||{});const ud={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},EMe=ud;class HM{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],l=o[o.length-1]-n,c=a-e,u=i-n,d=r-e,h=Math.abs(l*d-c*u);if(h<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const f=l*l+c*c,p=u*u+d*d,m=l*u+c*d,b=s*Math.sqrt(f)/h,y=s*Math.sqrt(p)/h,x=b*m/f,_=y*m/p,w=b*d+y*c,E=b*u+y*l,S=c*(y+x),A=l*(y+x),k=d*(b+_),M=u*(b+_),I=Math.atan2(A-E,S-w),B=Math.atan2(M-E,k-w);return{cx:w+e,cy:E+n,radius:s,startAngle:I,endAngle:B,anticlockwise:c*u>d*l}}static arc(e,n,r,i,s,o,a,l,c){const u=a-o,d=ud._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/xy)*40),h=u/(d*2),f=h*2,p=Math.cos(h),m=Math.sin(h),b=d-1,y=b%1/b;for(let x=0;x<=b;++x){const _=x+y*x,w=h+o+f*_,E=Math.cos(w),S=-Math.sin(w);c.push((p*E+m*S)*s+r,(p*-S+m*E)*s+i)}}}class Oq{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class zS{static curveLength(e,n,r,i,s,o,a,l){let c=0,u=0,d=0,h=0,f=0,p=0,m=0,b=0,y=0,x=0,_=0,w=e,E=n;for(let S=1;S<=10;++S)u=S/10,d=u*u,h=d*u,f=1-u,p=f*f,m=p*f,b=m*e+3*p*u*r+3*f*d*s+h*a,y=m*n+3*p*u*i+3*f*d*o+h*l,x=w-b,_=E-y,w=b,E=y,c+=Math.sqrt(x*x+_*_);return c}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=ud._segmentsCount(zS.curveLength(l,c,e,n,r,i,s,o));let d=0,h=0,f=0,p=0,m=0;a.push(l,c);for(let b=1,y=0;b<=u;++b)y=b/u,d=1-y,h=d*d,f=h*d,p=y*y,m=p*y,a.push(f*l+3*h*y*e+3*d*p*r+m*s,f*c+3*h*y*n+3*d*p*i+m*o)}}function J6(t,e,n,r,i,s,o,a){const l=t-n*i,c=e-r*i,u=t+n*s,d=e+r*s;let h,f;o?(h=r,f=-n):(h=-r,f=n);const p=l+h,m=c+f,b=u+h,y=d+f;return a.push(p,m,b,y),2}function $d(t,e,n,r,i,s,o,a){const l=n-t,c=r-e;let u=Math.atan2(l,c),d=Math.atan2(i-t,s-e);a&&u<d?u+=Math.PI*2:!a&&u>d&&(d+=Math.PI*2);let h=u;const f=d-u,p=Math.abs(f),m=Math.sqrt(l*l+c*c),b=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/b;if(h+=y,a){o.push(t,e,n,r);for(let x=1,_=h;x<b;x++,_+=y)o.push(t,e,t+Math.sin(_)*m,e+Math.cos(_)*m);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let x=1,_=h;x<b;x++,_+=y)o.push(t+Math.sin(_)*m,e+Math.cos(_)*m,t,e);o.push(i,s,t,e)}return b*2}function TMe(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new It(r[0],r[1]),a=new It(r[r.length-2],r[r.length-1]),l=n.type!==_i.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const G=(o.x+a.x)*.5,j=(a.y+o.y)*.5;r.unshift(G,j),r.push(G,j)}const u=e.points,d=r.length/2;let h=r.length;const f=u.length/2,p=s.width/2,m=p*p,b=s.miterLimit*s.miterLimit;let y=r[0],x=r[1],_=r[2],w=r[3],E=0,S=0,A=-(x-w),k=y-_,M=0,I=0,B=Math.sqrt(A*A+k*k);A/=B,k/=B,A*=p,k*=p;const R=s.alignment,O=(1-R)*2,C=R*2;l||(s.cap===Oa.ROUND?h+=$d(y-A*(O-C)*.5,x-k*(O-C)*.5,y-A*O,x-k*O,y+A*C,x+k*C,u,!0)+2:s.cap===Oa.SQUARE&&(h+=J6(y,x,A,k,O,C,!0,u))),u.push(y-A*O,x-k*O,y+A*C,x+k*C);for(let G=1;G<d-1;++G){y=r[(G-1)*2],x=r[(G-1)*2+1],_=r[G*2],w=r[G*2+1],E=r[(G+1)*2],S=r[(G+1)*2+1],A=-(x-w),k=y-_,B=Math.sqrt(A*A+k*k),A/=B,k/=B,A*=p,k*=p,M=-(w-S),I=_-E,B=Math.sqrt(M*M+I*I),M/=B,I/=B,M*=p,I*=p;const j=_-y,H=x-w,Z=_-E,X=S-w,ee=j*Z+H*X,ve=H*Z-X*j,oe=ve<0;if(Math.abs(ve)<.001*Math.abs(ee)){u.push(_-A*O,w-k*O,_+A*C,w+k*C),ee>=0&&(s.join===fs.ROUND?h+=$d(_,w,_-A*O,w-k*O,_-M*O,w-I*O,u,!1)+4:h+=2,u.push(_-M*C,w-I*C,_+M*O,w+I*O));continue}const fe=(-A+y)*(-k+w)-(-A+_)*(-k+x),be=(-M+E)*(-I+w)-(-M+_)*(-I+S),Le=(j*be-Z*fe)/ve,se=(X*fe-H*be)/ve,ue=(Le-_)*(Le-_)+(se-w)*(se-w),Te=_+(Le-_)*O,ge=w+(se-w)*O,Me=_-(Le-_)*C,Se=w-(se-w)*C,D=Math.min(j*j+H*H,Z*Z+X*X),ie=oe?O:C,ae=D+ie*ie*m,K=ue<=ae;let W=s.join;if(W===fs.MITER&&ue/m>b&&(W=fs.BEVEL),K)switch(W){case fs.MITER:{u.push(Te,ge,Me,Se);break}case fs.BEVEL:{oe?u.push(Te,ge,_+A*C,w+k*C,Te,ge,_+M*C,w+I*C):u.push(_-A*O,w-k*O,Me,Se,_-M*O,w-I*O,Me,Se),h+=2;break}case fs.ROUND:{oe?(u.push(Te,ge,_+A*C,w+k*C),h+=$d(_,w,_+A*C,w+k*C,_+M*C,w+I*C,u,!0)+4,u.push(Te,ge,_+M*C,w+I*C)):(u.push(_-A*O,w-k*O,Me,Se),h+=$d(_,w,_-A*O,w-k*O,_-M*O,w-I*O,u,!1)+4,u.push(_-M*O,w-I*O,Me,Se));break}}else{switch(u.push(_-A*O,w-k*O,_+A*C,w+k*C),W){case fs.MITER:{oe?u.push(Me,Se,Me,Se):u.push(Te,ge,Te,ge),h+=2;break}case fs.ROUND:{oe?h+=$d(_,w,_+A*C,w+k*C,_+M*C,w+I*C,u,!0)+2:h+=$d(_,w,_-A*O,w-k*O,_-M*O,w-I*O,u,!1)+2;break}}u.push(_-M*O,w-I*O,_+M*C,w+I*C),h+=2}}y=r[(d-2)*2],x=r[(d-2)*2+1],_=r[(d-1)*2],w=r[(d-1)*2+1],A=-(x-w),k=y-_,B=Math.sqrt(A*A+k*k),A/=B,k/=B,A*=p,k*=p,u.push(_-A*O,w-k*O,_+A*C,w+k*C),l||(s.cap===Oa.ROUND?h+=$d(_-A*(O-C)*.5,w-k*(O-C)*.5,_-A*O,w-k*O,_+A*C,w+k*C,u,!1)+2:s.cap===Oa.SQUARE&&(h+=J6(_,w,A,k,O,C,!1,u)));const F=e.indices,q=ud.epsilon*ud.epsilon;for(let G=f;G<h+f-2;++G)y=u[G*2],x=u[G*2+1],_=u[(G+1)*2],w=u[(G+1)*2+1],E=u[(G+2)*2],S=u[(G+2)*2+1],!(Math.abs(y*(w-S)+_*(S-x)+E*(x-w))<q)&&F.push(G,G+1,G+2)}function SMe(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==_i.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[n*2],i[n*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function VM(t,e){t.lineStyle.native?SMe(t,e):TMe(t,e)}class US{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,c=2*r-2*e,u=2*i-2*n,d=4*(a*a+l*l),h=4*(a*c+l*u),f=c*c+u*u,p=2*Math.sqrt(d+h+f),m=Math.sqrt(d),b=2*d*m,y=2*Math.sqrt(f),x=h/m;return(b*p+m*h*(p-y)+(4*f*d-h*h)*Math.log((2*m+x+p)/(x+y)))/(4*b)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=ud._segmentsCount(US.curveLength(o,a,e,n,r,i));let c=0,u=0;for(let d=1;d<=l;++d){const h=d/l;c=o+(e-o)*h,u=a+(n-a)*h,s.push(c+(e+(r-e)*h-c)*h,u+(n+(i-n)*h-u)*h)}}}const Kx={[_i.POLY]:CN,[_i.CIRC]:Ry,[_i.ELIP]:Ry,[_i.RECT]:Lq,[_i.RREC]:kq},WM=[],$0=[];class Iy{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new Iy(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const qf=new It,Nq=class Dq extends eN{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Cy,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),$0.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n.reset(),WM.push(n)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,n=null,r=null,i=null){const s=new Iy(e,n,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,n=null){if(!this.graphicsData.length)return null;const r=new Iy(e,null,null,n),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const n=this.graphicsData;for(let r=0;r<n.length;++r){const i=n[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,qf):qf.copyFrom(e),i.shape.contains(qf.x,qf.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(qf.x,qf.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,n=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;const c=n[l],u=c.fillStyle,d=c.lineStyle;Kx[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||d.visible)&&this.processHoles(c.holes);for(let h=0;h<2;h++){const f=h===0?u:d;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,b=this.points.length/2;p.wrapMode=Ol.REPEAT,h===0?this.processFill(c):this.processLine(c);const y=this.points.length/2-b;y!==0&&(r&&!this._compareStyles(i,f)&&(r.end(m,b),r=null),r||(r=WM.pop()||new Oq,r.begin(f,m,b),this.batches.push(r),i=f),this.addUvs(this.points,e,f.texture,b,y,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,n=this.graphicsData.length;e<n;e++){const r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let n=0,r=e.length;n<r;n++){const i=e[n];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<Dq.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++qt._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),$0.push(this.drawCalls[d]);this.drawCalls.length=0;const n=this.colors,r=this.textureIds;let i=$0.pop();i||(i=new yE,i.texArray=new bE),i.texArray.count=0,i.start=0,i.size=0,i.type=Zo.TRIANGLES;let s=0,o=null,a=0,l=!1,c=Zo.TRIANGLES,u=0;this.drawCalls.push(i);for(let d=0;d<this.batches.length;d++){const h=this.batches[d],f=8,p=h.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,c=l?Zo.LINES:Zo.TRIANGLES,o=null,s=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=$0.pop(),i||(i=new yE,i.texArray=new bE),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=Ol.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=h.size,u+=h.size,a=m._batchLocation,this.addColors(n,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,a,h.attribSize,h.attribStart)}qt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,n=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=n[c*2],o[l++]=n[c*2+1],a[l++]=r[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?CN.triangulate(e,this):Kx[e.type].triangulate(e,this)}processLine(e){VM(e,this);for(let n=0;n<e.holes.length;n++)VM(e.holes[n],this)}processHoles(e){for(let n=0;n<e.length;n++){const r=e[n];Kx[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,n){for(let r=0;r<e.length/2;r++){const i=e[r*2],s=e[r*2+1];e[r*2]=n.a*i+n.c*s+n.tx,e[r*2+1]=n.b*i+n.d*s+n.ty}}addColors(e,n,r,i,s=0){const o=wn.shared.setValue(n).toLittleEndianNumber(),a=wn.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,n,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=n}addUvs(e,n,r,i,s,o=null){let a=0;const l=n.length,c=r.frame;for(;a<s;){let d=e[(i+a)*2],h=e[(i+a)*2+1];if(o){const f=o.a*d+o.c*h+o.tx;h=o.b*d+o.d*h+o.ty,d=f}a++,n.push(d/c.width,h/c.height)}const u=r.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(n,r,l,s)}adjustUvs(e,n,r,i){const s=n.baseTexture,o=1e-6,a=r+i*2,l=n.frame,c=l.width/s.width,u=l.height/s.height;let d=l.x/l.width,h=l.y/l.height,f=Math.floor(e[r]+o),p=Math.floor(e[r+1]+o);for(let m=r+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));d-=f,h-=p;for(let m=r;m<a;m+=2)e[m]=(e[m]+d)*c,e[m+1]=(e[m+1]+h)*u}};Nq.BATCHABLE_SIZE=100;let Bq=Nq;class Tb{constructor(){this.color=16777215,this.alpha=1,this.texture=Dt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Tb;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Dt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class $S extends Tb{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Oa.BUTT,this.join=fs.MITER,this.miterLimit=10}clone(){const e=new $S;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Oa.BUTT,this.join=fs.MITER,this.miterLimit=10}}const l2={},XM=class Zx extends Fi{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Tb,this._lineStyle=new $S,this._matrix=null,this._holeMode=!1,this.state=qa.for2d(),this._geometry=e||new Bq,this._geometry.refCount++,this._transformID=-1,this._tintColor=new wn(16777215),this.blendMode=kt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Zx(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,n=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:n,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const n={width:0,texture:Dt.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Oa.BUTT,join:fs.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Ku,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new Ku,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this}lineTo(e,n){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==n)&&r.push(e,n),this}_initCurve(e=0,n=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)}quadraticCurveTo(e,n,r,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),US.curveTo(e,n,r,i,s),this}bezierCurveTo(e,n,r,i,s,o){return this._initCurve(),zS.curveTo(e,n,r,i,s,o,this.currentPath.points),this}arcTo(e,n,r,i,s){this._initCurve(e,n);const o=this.currentPath.points,a=HM.curveTo(e,n,r,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:d,endAngle:h,anticlockwise:f}=a;this.arc(l,c,u,d,h,f)}return this}arc(e,n,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=xy:o&&i<=s&&(i+=xy),s-i===0)return this;const a=e+Math.cos(i)*r,l=n+Math.sin(i)*r,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const d=Math.abs(u[u.length-2]-a),h=Math.abs(u[u.length-1]-l);d<c&&h<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return HM.arc(a,l,e,n,r,i,s,o,u),this}beginFill(e=0,n){return this.beginTextureFill({texture:Dt.WHITE,color:e,alpha:n})}normalizeColor(e){const n=wn.shared.setValue(e.color??0);e.color=n.toNumber(),e.alpha??(e.alpha=n.alpha)}beginTextureFill(e){const n={texture:Dt.WHITE,color:16777215,matrix:null};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,n,r,i){return this.drawShape(new Gt(e,n,r,i))}drawRoundedRect(e,n,r,i,s){return this.drawShape(new yb(e,n,r,i,s))}drawCircle(e,n,r){return this.drawShape(new mb(e,n,r))}drawEllipse(e,n,r,i){return this.drawShape(new vb(e,n,r,i))}drawPolygon(...e){let n,r=!0;const i=e[0];i.points?(r=i.closeStroke,n=i.points):Array.isArray(e[0])?n=e[0]:n=e;const s=new Ku(n);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===_i.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,n=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:n,indices:c,uvs:l,_batchRGB:wn.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let n=0,r=this.batches.length;n<r;n++){const i=this.batches[n];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const n=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=n.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,wn.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(n),e.geometry.bind(r,n),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,n){const{texArray:r,type:i,size:s,start:o}=n,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let n=this.shader;const r=this.pluginName;if(!n){if(!l2[r]){const{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lr,default:ta.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;l2[r]=new Tc(a,o)}n=l2[r]}return n}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:n,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,n,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Zx._TEMP_POINT),this._geometry.containsPoint(Zx._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n._tintRGB=wn.shared.setValue(this._tintColor).multiply(n._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this._geometry.points,u=this.vertexData;let d=0;for(let h=0;h<c.length;h+=2){const f=c[h],p=c[h+1];u[d++]=r*f+s*p+a,u[d++]=o*p+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};XM.curves=ud,XM._TEMP_POINT=new It;let tg=XM;const CMe={buildPoly:CN,buildCircle:Ry,buildRectangle:Lq,buildRoundedRectangle:kq,buildLine:VM,ArcUtils:HM,BezierUtils:zS,QuadraticUtils:US,BatchPart:Oq,FILL_COMMANDS:Kx,BATCH_POOL:WM,DRAW_CALL_POOL:$0},AMe=Object.freeze(Object.defineProperty({__proto__:null,FillStyle:Tb,GRAPHICS_CURVES:EMe,Graphics:tg,GraphicsData:Iy,GraphicsGeometry:Bq,LINE_CAP:Oa,LINE_JOIN:fs,LineStyle:$S,curves:ud,graphicsUtils:CMe},Symbol.toStringTag,{value:"Module"}));class Fq extends wb{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let u=0;u<e;u++){const d=u%this.segWidth,h=u/this.segWidth|0;n.push(d*a,h*l),r.push(d/s,h/o)}const c=s*o;for(let u=0;u<c;u++){const d=u%s,h=u/s|0,f=h*this.segWidth+d,p=h*this.segWidth+d+1,m=(h+1)*this.segWidth+d,b=(h+1)*this.segWidth+d+1;i.push(f,p,m,p,b,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class zq extends wb{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const c=this._width*this.textureScale,u=e.length;for(let h=0;h<u;h++){const f=h*4;if(this.textureScale>0){const p=l.x-e[h].x,m=l.y-e[h].y,b=Math.sqrt(p*p+m*m);l=e[h],a+=b/c}else a=h/(u-1);s[f]=a,s[f+1]=0,s[f+2]=a,s[f+3]=1}let d=0;for(let h=0;h<u-1;h++){const f=h*2;o[d++]=f,o[d++]=f+1,o[d++]=f+2,o[d++]=f+2,o[d++]=f+1,o[d++]=f+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<a;c++){const u=e[c],d=c*4;c<e.length-1?r=e[c+1]:r=u,s=-(r.x-n.x),i=r.y-n.y;const h=Math.sqrt(i*i+s*s);h<1e-6?(i=0,s=0):(i/=h,s/=h,i*=l,s*=l),o[d]=u.x+i,o[d+1]=u.y+s,o[d+2]=u.x-i,o[d+3]=u.y-s,n=u}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class Uq extends Mg{constructor(e,n,r){const i=new Fq(e.width,e.height,n,r),s=new Lg(Dt.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const $_=10;class $q extends Uq{constructor(e,n,r,i,s){var o,a,l,c;super(Dt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??$_,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??$_,this._topHeight=r??((l=e.defaultBorders)==null?void 0:l.top)??$_,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??$_,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class jq extends Mg{constructor(e=Dt.EMPTY,n,r,i,s){const o=new wb(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new Lg(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class Gq extends Mg{constructor(e,n,r=0){const i=new zq(e.height,n,r),s=new Lg(e);r>0&&(e.baseTexture.wrapMode=Ol.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}const PMe=Object.freeze(Object.defineProperty({__proto__:null,NineSlicePlane:$q,PlaneGeometry:Fq,RopeGeometry:zq,SimpleMesh:jq,SimplePlane:Uq,SimpleRope:Gq},Symbol.toStringTag,{value:"Module"}));class Hq extends Fi{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=kt.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new wn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class e${constructor(e,n,r){this.geometry=new cm,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Et.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new Vr(cY(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Vr(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Vr(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Et.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Et.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===Et.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===Et.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var RMe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,IMe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class AN extends _b{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Lr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Et.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Tc.from(IMe,RMe,{}),this.state=qa.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=Q3(e.blendMode,c),s.state.set(this.state);const u=s.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=wn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let m=o-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const b=a[p];b.uploadDynamic(n,f,m);const y=e._bufferUpdateIDs[p]||0;h=h||b._updateID<y,h&&(b._updateID=e._updateID,b.uploadStatic(n,f,m)),s.geometry.bind(b.geometry),u.drawElements(u.TRIANGLES,m*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new e$(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new e$(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,c=0,u=0;for(let d=0;d<r;++d){const h=e[n+d],f=h._texture,p=h.scale.x,m=h.scale.y,b=f.trim,y=f.orig;b?(l=b.x-h.anchor.x*y.width,a=l+b.width,u=b.y-h.anchor.y*y.height,c=u+b.height):(a=y.width*(1-h.anchor.x),l=y.width*-h.anchor.x,c=y.height*(1-h.anchor.y),u=y.height*-h.anchor.y),i[o]=l*p,i[o+1]=u*m,i[o+s]=a*p,i[o+s+1]=u*m,i[o+s*2]=a*p,i[o+s*2+1]=c*m,i[o+s*3]=l*p,i[o+s*3+1]=c*m,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],c=wn.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}AN.extension={name:"particle",type:rt.RendererPlugin};bt.add(AN);const MMe=Object.freeze(Object.defineProperty({__proto__:null,ParticleContainer:Hq,ParticleRenderer:AN},Symbol.toStringTag,{value:"Module"}));class kg extends Ka{constructor(e,n=!0){super(e[0]instanceof Dt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(qr.shared.add(this.update,this,Lc.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(Dt.from(e[r]));return new kg(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(Dt.from(e[r]));return new kg(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Dt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(qr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const LMe=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:kg},Symbol.toStringTag,{value:"Module"})),f0=new It;class jS extends Ka{constructor(e,n=100,r=100){super(e),this.tileTransform=new bb,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new DS(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Gt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,f0);const n=this._width,r=this._height,i=-n*this.anchor._x;if(f0.x>=i&&f0.x<i+n){const s=-r*this.anchor._y;if(f0.y>=s&&f0.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof Dt?e:Dt.from(e,n);return new jS(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var kMe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,OMe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,NMe=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,t$=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,DMe=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const j_=new Lr;class PN extends _b{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new sN,this.state=qa.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Tc.from(t$,DMe,n),this.shader=e.context.webGLVersion>1?Tc.from(OMe,kMe,n):Tc.from(t$,NMe,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,d=e.uvMatrix;let h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[n.CONTEXT_UID]?h=l.wrapMode!==Ol.CLAMP:l.wrapMode===Ol.CLAMP&&(l.wrapMode=Ol.REPEAT));const f=h?this.simpleShader:this.shader,p=a.width,m=a.height,b=e._width,y=e._height;j_.set(u.a*p/b,u.b*p/y,u.c*m/b,u.d*m/y,u.tx/b,u.ty/y),j_.invert(),h?j_.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=j_.toArray(!0),f.uniforms.uColor=wn.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,n.shader.bind(f),n.geometry.bind(r),this.state.blendMode=Q3(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}PN.extension={name:"tilingSprite",type:rt.RendererPlugin};bt.add(PN);const BMe=Object.freeze(Object.defineProperty({__proto__:null,TilingSprite:jS,TilingSpriteRenderer:PN},Symbol.toStringTag,{value:"Module"})),Vq=class YM{constructor(e){this.stage=new Fi,e=Object.assign({forceCanvas:!1},e),this.renderer=XY(e),YM._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,n){const r=YM._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Vq._plugins=[];let Sb=Vq;bt.handleByList(rt.Application,Sb._plugins);class RN{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}RN.extension=rt.Application;bt.add(RN);const FMe=Object.freeze(Object.defineProperty({__proto__:null,Application:Sb,ResizePlugin:RN},Symbol.toStringTag,{value:"Module"}));function yo(t){return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(t)}function Wq(t){var e=function(n,r){if(yo(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(yo(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return yo(e)==="symbol"?e:String(e)}function Br(t,e,n){return(e=Wq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kc(t){return function(e){if(Array.isArray(e))return c2(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return c2(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c2(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mr(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var zMe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UMe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $Me=function(t){return t==null};function j0(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=kc(t);else{if(t===null||yo(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!$Me(n)&&!isNaN(n)}).map(Number)}function n$(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function u2(t){return t instanceof It||t instanceof ka}var SE=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function d2(t,e,n){if(u2(t[e])&&u2(n))t[e].copyFrom(n);else if(u2(t[e])){var r=j0(n);Mr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),yo(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var Kf,Xq=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},Yq=function(t){return function(){return!t.apply(void 0,arguments)}},qM="children",jMe=(Br(Kf={},qM,!0),Br(Kf,"parent",!0),Br(Kf,"worldAlpha",!0),Br(Kf,"worldTransform",!0),Br(Kf,"worldVisible",!0),Kf),KM={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},zl=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var l,c;a==null||(l=a.__reactpixi)===null||l===void 0||(c=l.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(n.hasOwnProperty(a))return Mr(l.typeofs.some(function(c){return yo(n[a])===c})||l.instanceofs.some(function(c){return n[a]instanceof c}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return Mr(n.texture instanceof Dt,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Dt]});Mr(!!s,"".concat(t," could not get texture from props"));var o=Dt.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},GMe=Yq(Xq([].concat(kc(Object.keys(jMe)),kc(SE))));function Ul(t,e,n){var r=!1;if(Mr(or.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",yo(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<SE.length;o++){var a=SE[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var l=Object.keys(n||{});if(n.overwriteProps){for(var c=0;c<l.length;c++){var u=l[c];e[u]!==n[u]&&(r=!0,d2(t,u,n[u]))}return r}for(var d=l.filter(GMe),h=0;h<d.length;h++){var f=d[h],p=n[f];n[f]!==e[f]&&(r=!0),p!==void 0?d2(t,f,p):f in KM?(console.warn("setting default value: ".concat(f,", from: ").concat(t[f]," to: ").concat(p," for"),t),r=!0,d2(t,f,KM[f])):console.warn("ignoring prop: ".concat(f,", from ").concat(t[f]," to ").concat(p," for"),t)}return r}var HMe=function(t,e){var n=e.text,r=e.style;return new uq(n,r)},VMe=function(){return new Fi};function Ed(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var WMe=["draw","geometry"],XMe=function(t,e){var n=e.geometry;Mr(!n||n instanceof tg,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new tg(n.geometry):new tg;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=Ul(i,s,Ed(o,WMe));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(r,r)),l},r},YMe=["image","texture"],qMe=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,c=l===void 0?10:l,u=zl("NineSlicePlane",t,e),d=new $q(u,r,s,a,c);return d.applyProps=function(h,f,p){var m=p.image,b=p.texture,y=Ul(h,f,Ed(p,YMe));return(m||b)&&(b!==f.texture&&(y=!0),h.texture=zl("NineSlicePlane",t,p)),y},d};function r$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(n),!0).forEach(function(r){Br(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var KMe=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=G_(G_({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=G_(G_({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),u=new Hq(r,l,s,a);return u.willUnmount=function(d,h,f){d.destroy(c)},u},ZMe=["image","texture"],QMe=function(t,e){var n=new Ka(zl("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,l=Ul(r,i,Ed(s,ZMe));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),r.texture=zl("Sprite",t,s)),l},n},JMe=["textures","isPlaying","initialFrame","images"],eLe=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(c){return c.map(function(u){return Mr(u instanceof Dt||(u==null?void 0:u.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),u})},l=r?kg.fromImages(r):new kg(a(n));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(c,u,d){var h=d.textures,f=d.isPlaying,p=d.initialFrame,m=d.images,b=Ul(c,u,Ed(d,JMe));if(m&&u.images!==m){for(var y=[],x=0;x<m.length;++x)y.push(Dt.from(m[x]));c.textures=y,b=!0}if(h&&u.textures!==h&&(c.textures=a(h),b=!0),f!==u.isPlaying||p!==u.initialFrame){var _=typeof p=="number"?p:l.currentFrame||0;l[f?"gotoAndPlay":"gotoAndStop"](_),b=!0}return b},l},tLe=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new FS(r,s);return o?(a.updateText(),new Ka(a.texture)):a},nLe=["tileScale","tilePosition","image","texture"],rLe=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=zl("TilingSprite",t,e),a=new jS(o,r,s);return a.applyProps=function(l,c,u){var d=u.tileScale,h=u.tilePosition,f=u.image,p=u.texture,m=Ul(l,c,Ed(u,nLe));if(h){var b,y=j0(h);(b=l.tilePosition).set.apply(b,kc(y)),m=!n$(j0(c.tilePosition),y)||m}if(d){var x,_=j0(d);(x=l.tileScale).set.apply(x,kc(_)),m=!n$(j0(c.tileScale),_)||m}return(f||p)&&(p!==c.texture&&(m=!0),l.texture=zl("Sprite",t,u)),m},a},iLe=["image","texture"],sLe=function(t,e){var n=zl("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Zo.TRIANGLES:o,l=new jq(n,r,i,s,a);return l.applyProps=function(c,u,d){var h=d.image,f=d.texture,p=Ul(c,u,Ed(d,iLe));return(h||f)&&(f!==u.texture&&(p=!0),c.texture=zl("Mesh",t,d)),p},l},oLe=["image","texture"],aLe=function(t,e){var n=zl("SimpleRope",t,e),r=e.points,i=new Gq(n,r);return i.applyProps=function(s,o,a){var l=a.image,c=a.texture,u=Ed(a,oLe);Mr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var d=Ul(s,o,u);return(l||c)&&(c!==o.texture&&(d=!0),s.texture=zl("SimpleRope",t,a)),d},i},lLe=Object.freeze({__proto__:null,BitmapText:HMe,Container:VMe,Graphics:XMe,NineSlicePlane:qMe,ParticleContainer:KMe,Sprite:QMe,Text:tLe,TilingSprite:rLe,SimpleMesh:sLe,SimpleRope:aLe,AnimatedSprite:eLe});function i$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(n),!0).forEach(function(r){Br(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Gs={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},cLe=Object.keys(Gs).reduce(function(t,e){return s$(s$({},t),{},Br({},e,lLe[e]))},{}),qq={};function uLe(t,e){return Mr(!!t,"Expect type to be defined, got `%s`",t),Mr(!Gs[t],"Component `%s` could not be created, already exists in default components.",t),qq[t]=e,t}var o$,a$,l$,c$,ZM={},QM={},dLe={get exports(){return QM},set exports(t){QM=t}},u$={};function hLe(){return a$||(a$=1,dLe.exports=(o$||(o$=1,function(t){function e(j,H){var Z=j.length;j.push(H);e:for(;0<Z;){var X=Z-1>>>1,ee=j[X];if(!(0<i(ee,H)))break e;j[X]=H,j[Z]=ee,Z=X}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Z=j.pop();if(Z!==H){j[0]=Z;e:for(var X=0,ee=j.length,ve=ee>>>1;X<ve;){var oe=2*(X+1)-1,fe=j[oe],be=oe+1,Le=j[be];if(0>i(fe,Z))be<ee&&0>i(Le,fe)?(j[X]=Le,j[be]=Z,X=be):(j[X]=fe,j[oe]=Z,X=oe);else{if(!(be<ee&&0>i(Le,Z)))break e;j[X]=Le,j[be]=Z,X=be}}}return H}function i(j,H){var Z=j.sortIndex-H.sortIndex;return Z!==0?Z:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function _(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else{if(!(H.startTime<=j))break;r(c),H.sortIndex=H.expirationTime,e(l,H)}H=n(c)}}function w(j){if(m=!1,_(j),!p)if(n(l)!==null)p=!0,q(E);else{var H=n(c);H!==null&&G(w,H.startTime-j)}}function E(j,H){p=!1,m&&(m=!1,y(M),M=-1),f=!0;var Z=h;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||j&&!R());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var ee=X(d.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),_(H)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var oe=n(c);oe!==null&&G(w,oe.startTime-H),ve=!1}return ve}finally{d=null,h=Z,f=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,k=null,M=-1,I=5,B=-1;function R(){return!(t.unstable_now()-B<I)}function O(){if(k!==null){var j=t.unstable_now();B=j;var H=!0;try{H=k(!0,j)}finally{H?S():(A=!1,k=null)}}else A=!1}if(typeof x=="function")S=function(){x(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,F=C.port2;C.port1.onmessage=O,S=function(){F.postMessage(null)}}else S=function(){b(O,0)};function q(j){k=j,A||(A=!0,S())}function G(j,H){M=b(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(E))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Z=h;h=H;try{return j()}finally{h=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=h;h=j;try{return H()}finally{h=Z}},t.unstable_scheduleCallback=function(j,H,Z){var X=t.unstable_now();switch(Z=typeof Z=="object"&&Z!==null&&typeof(Z=Z.delay)=="number"&&0<Z?X+Z:X,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return j={id:u++,callback:H,priorityLevel:j,startTime:Z,expirationTime:ee=Z+ee,sortIndex:-1},Z>X?(j.sortIndex=Z,e(c,j),n(l)===null&&j===n(c)&&(m?(y(M),M=-1):m=!0,G(w,Z-X))):(j.sortIndex=ee,e(l,j),p||f||(p=!0,q(E))),j},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(j){var H=h;return function(){var Z=h;h=H;try{return j.apply(this,arguments)}finally{h=Z}}}}(u$)),u$)),QM}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function fLe(){return c$||(c$=1,l$=function(t){var e={},n=Rn,r=hLe(),i=Object.assign;function s(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,T=1;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),w=Symbol.iterator;function E(g){return g===null||typeof g!="object"?null:typeof(g=w&&g[w]||g["@@iterator"])=="function"?g:null}function S(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case u:return"StrictMode";case m:return"Suspense";case b:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case f:return(g.displayName||"Context")+".Consumer";case h:return(g._context.displayName||"Context")+".Provider";case p:var v=g.render;return(g=g.displayName)||(g=(g=v.displayName||v.name||"")!==""?"ForwardRef("+g+")":"ForwardRef"),g;case y:return(v=g.displayName||null)!==null?v:S(g.type)||"Memo";case x:v=g._payload,g=g._init;try{return S(g(v))}catch{}}return null}function A(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=(g=v.render).displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(v);case 8:return v===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function k(g){var v=g,T=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do 4098&(v=g).flags&&(T=v.return),g=v.return;while(g)}return v.tag===3?T:null}function M(g){if(k(g)!==g)throw Error(s(188))}function I(g){var v=g.alternate;if(!v){if((v=k(g))===null)throw Error(s(188));return v!==g?null:g}for(var T=g,L=v;;){var N=T.return;if(N===null)break;var U=N.alternate;if(U===null){if((L=N.return)!==null){T=L;continue}break}if(N.child===U.child){for(U=N.child;U;){if(U===T)return M(N),g;if(U===L)return M(N),v;U=U.sibling}throw Error(s(188))}if(T.return!==L.return)T=N,L=U;else{for(var te=!1,ce=N.child;ce;){if(ce===T){te=!0,T=N,L=U;break}if(ce===L){te=!0,L=N,T=U;break}ce=ce.sibling}if(!te){for(ce=U.child;ce;){if(ce===T){te=!0,T=U,L=N;break}if(ce===L){te=!0,L=U,T=N;break}ce=ce.sibling}if(!te)throw Error(s(189))}}if(T.alternate!==L)throw Error(s(190))}if(T.tag!==3)throw Error(s(188));return T.stateNode.current===T?g:v}function B(g){return(g=I(g))!==null?R(g):null}function R(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=R(g);if(v!==null)return v;g=g.sibling}return null}function O(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=O(g);if(v!==null)return v}g=g.sibling}return null}var C,F=Array.isArray,q=t.getPublicInstance,G=t.getRootHostContext,j=t.getChildHostContext,H=t.prepareForCommit,Z=t.resetAfterCommit,X=t.createInstance,ee=t.appendInitialChild,ve=t.finalizeInitialChildren,oe=t.prepareUpdate,fe=t.shouldSetTextContent,be=t.createTextInstance,Le=t.scheduleTimeout,se=t.cancelTimeout,ue=t.noTimeout,Te=t.isPrimaryRenderer,ge=t.supportsMutation,Me=t.supportsPersistence,Se=t.supportsHydration,D=t.getInstanceFromNode,ie=t.preparePortalMount,ae=t.getCurrentEventPriority,K=t.detachDeletedInstance,W=t.supportsMicrotasks,ne=t.scheduleMicrotask,pe=t.supportsTestSelectors,me=t.findFiberRoot,he=t.getBoundingRect,Pe=t.getTextContent,Oe=t.isHiddenSubtree,de=t.matchAccessibilityRole,Ce=t.setFocusIfFocusable,Ye=t.setupIntersectionObserver,Fe=t.appendChild,Ve=t.appendChildToContainer,Bt=t.commitTextUpdate,yt=t.commitMount,Ot=t.commitUpdate,Ge=t.insertBefore,Pt=t.insertInContainerBefore,Xe=t.removeChild,Ze=t.removeChildFromContainer,Nt=t.resetTextContent,zt=t.hideInstance,pn=t.hideTextInstance,Dn=t.unhideInstance,Wn=t.unhideTextInstance,Jn=t.clearContainer,le=t.cloneInstance,_e=t.createContainerChildSet,Re=t.appendChildToContainerChildSet,tt=t.finalizeContainerChildren,it=t.replaceContainerChildren,Ft=t.cloneHiddenInstance,St=t.cloneHiddenTextInstance,Ct=t.canHydrateInstance,ft=t.canHydrateTextInstance,Zt=t.canHydrateSuspenseInstance,Tn=t.isSuspenseInstancePending,Mt=t.isSuspenseInstanceFallback,Wt=t.getSuspenseInstanceFallbackErrorDetails,Sn=t.registerSuspenseInstanceRetry,ar=t.getNextHydratableSibling,yn=t.getFirstHydratableChild,Qr=t.getFirstHydratableChildWithinContainer,Hs=t.getFirstHydratableChildWithinSuspenseInstance,hn=t.hydrateInstance,gn=t.hydrateTextInstance,$r=t.hydrateSuspenseInstance,jr=t.getNextHydratableInstanceAfterSuspenseInstance,mr=t.commitHydratedContainer,Vs=t.commitHydratedSuspenseInstance,ss=t.clearSuspenseBoundary,Ht=t.clearSuspenseBoundaryFromContainer,Yt=t.shouldDeleteUnhydratedTailInstances,Bn=t.didNotMatchHydratedContainerTextInstance,Ti=t.didNotMatchHydratedTextInstance;function vr(g){if(C===void 0)try{throw Error()}catch(T){var v=T.stack.trim().match(/\n( *(at )?)/);C=v&&v[1]||""}return`
`+C+g}var Ro=!1;function Io(g,v){if(!g||Ro)return"";Ro=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(ke){var L=ke}Reflect.construct(g,[],v)}else{try{v.call()}catch(ke){L=ke}g.call(v.prototype)}else{try{throw Error()}catch(ke){L=ke}g()}}catch(ke){if(ke&&L&&typeof ke.stack=="string"){for(var N=ke.stack.split(`
`),U=L.stack.split(`
`),te=N.length-1,ce=U.length-1;1<=te&&0<=ce&&N[te]!==U[ce];)ce--;for(;1<=te&&0<=ce;te--,ce--)if(N[te]!==U[ce]){if(te!==1||ce!==1)do if(te--,0>--ce||N[te]!==U[ce]){var xe=`
`+N[te].replace(" at new "," at ");return g.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",g.displayName)),xe}while(1<=te&&0<=ce);break}}}finally{Ro=!1,Error.prepareStackTrace=T}return(g=g?g.displayName||g.name:"")?vr(g):""}var fa=Object.prototype.hasOwnProperty,Yl=[],Si=-1;function ci(g){return{current:g}}function Gn(g){0>Si||(g.current=Yl[Si],Yl[Si]=null,Si--)}function kn(g,v){Si++,Yl[Si]=g.current,g.current=v}var Ws={},Fn=ci(Ws),Jr=ci(!1),pa=Ws;function Za(g,v){var T=g.type.contextTypes;if(!T)return Ws;var L=g.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===v)return L.__reactInternalMemoizedMaskedChildContext;var N,U={};for(N in T)U[N]=v[N];return L&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=U),U}function Ci(g){return(g=g.childContextTypes)!=null}function Td(){Gn(Jr),Gn(Fn)}function Sd(g,v,T){if(Fn.current!==Ws)throw Error(s(168));kn(Fn,v),kn(Jr,T)}function Mo(g,v,T){var L=g.stateNode;if(v=v.childContextTypes,typeof L.getChildContext!="function")return T;for(var N in L=L.getChildContext())if(!(N in v))throw Error(s(108,A(g)||"Unknown",N));return i({},T,L)}function mf(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Ws,pa=Fn.current,kn(Fn,g),kn(Jr,Jr.current),!0}function fm(g,v,T){var L=g.stateNode;if(!L)throw Error(s(169));T?(g=Mo(g,v,pa),L.__reactInternalMemoizedMergedChildContext=g,Gn(Jr),Gn(Fn),kn(Fn,g)):Gn(Jr),kn(Jr,T)}var os=Math.clz32?Math.clz32:function(g){return(g>>>=0)===0?32:31-(Bb(g)/JS|0)|0},Bb=Math.log,JS=Math.LN2,pm=64,Y=4194304;function Q(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&g;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&g;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function re(g,v){var T=g.pendingLanes;if(T===0)return 0;var L=0,N=g.suspendedLanes,U=g.pingedLanes,te=268435455&T;if(te!==0){var ce=te&~N;ce!==0?L=Q(ce):(U&=te)!==0&&(L=Q(U))}else(te=T&~N)!==0?L=Q(te):U!==0&&(L=Q(U));if(L===0)return 0;if(v!==0&&v!==L&&!(v&N)&&((N=L&-L)>=(U=v&-v)||N===16&&4194240&U))return v;if(4&L&&(L|=16&T),(v=g.entangledLanes)!==0)for(g=g.entanglements,v&=L;0<v;)N=1<<(T=31-os(v)),L|=g[T],v&=~N;return L}function we(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;default:return-1}}function We(g){return(g=-1073741825&g.pendingLanes)!==0?g:1073741824&g?1073741824:0}function ot(){var g=pm;return!(4194240&(pm<<=1))&&(pm=64),g}function Qt(g){for(var v=[],T=0;31>T;T++)v.push(g);return v}function lr(g,v,T){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),(g=g.eventTimes)[v=31-os(v)]=T}function Or(g,v){var T=g.entangledLanes|=v;for(g=g.entanglements;T;){var L=31-os(T),N=1<<L;N&v|g[L]&v&&(g[L]|=v),T&=~N}}var Ut=0;function Xs(g){return 1<(g&=-g)?4<g?268435455&g?16:536870912:4:1}var eC=r.unstable_scheduleCallback,bD=r.unstable_cancelCallback,jQ=r.unstable_shouldYield,GQ=r.unstable_requestPaint,ui=r.unstable_now,tC=r.unstable_ImmediatePriority,HQ=r.unstable_UserBlockingPriority,_D=r.unstable_NormalPriority,VQ=r.unstable_IdlePriority,Fb=null,Qa=null,ga=typeof Object.is=="function"?Object.is:function(g,v){return g===v&&(g!==0||1/g==1/v)||g!=g&&v!=v},ql=null,zb=!1,nC=!1;function xD(g){ql===null?ql=[g]:ql.push(g)}function Ja(){if(!nC&&ql!==null){nC=!0;var g=0,v=Ut;try{var T=ql;for(Ut=1;g<T.length;g++){var L=T[g];do L=L(!0);while(L!==null)}ql=null,zb=!1}catch(N){throw ql!==null&&(ql=ql.slice(g+1)),eC(tC,Ja),N}finally{Ut=v,nC=!1}}return null}var vf=[],yf=0,Ub=null,$b=0,Lo=[],ko=0,Cd=null,el=1,Kl="";function Ad(g,v){vf[yf++]=$b,vf[yf++]=Ub,Ub=g,$b=v}function wD(g,v,T){Lo[ko++]=el,Lo[ko++]=Kl,Lo[ko++]=Cd,Cd=g;var L=el;g=Kl;var N=32-os(L)-1;L&=~(1<<N),T+=1;var U=32-os(v)+N;if(30<U){var te=N-N%5;U=(L&(1<<te)-1).toString(32),L>>=te,N-=te,el=1<<32-os(v)+N|T<<N|L,Kl=U+g}else el=1<<U|T<<N|L,Kl=g}function rC(g){g.return!==null&&(Ad(g,1),wD(g,1,0))}function iC(g){for(;g===Ub;)Ub=vf[--yf],vf[yf]=null,$b=vf[--yf],vf[yf]=null;for(;g===Cd;)Cd=Lo[--ko],Lo[ko]=null,Kl=Lo[--ko],Lo[ko]=null,el=Lo[--ko],Lo[ko]=null}var Ys=null,Oo=null,cr=!1,gm=!1,ma=null;function ED(g,v){var T=zo(5,null,null,0);T.elementType="DELETED",T.stateNode=v,T.return=g,(v=g.deletions)===null?(g.deletions=[T],g.flags|=16):v.push(T)}function TD(g,v){switch(g.tag){case 5:return(v=Ct(v,g.type,g.pendingProps))!==null&&(g.stateNode=v,Ys=g,Oo=yn(v),!0);case 6:return(v=ft(v,g.pendingProps))!==null&&(g.stateNode=v,Ys=g,Oo=null,!0);case 13:if((v=Zt(v))!==null){var T=Cd!==null?{id:el,overflow:Kl}:null;return g.memoizedState={dehydrated:v,treeContext:T,retryLane:1073741824},(T=zo(18,null,null,0)).stateNode=v,T.return=g,g.child=T,Ys=g,Oo=null,!0}return!1;default:return!1}}function sC(g){return(1&g.mode)!=0&&(128&g.flags)==0}function oC(g){if(cr){var v=Oo;if(v){var T=v;if(!TD(g,v)){if(sC(g))throw Error(s(418));v=ar(T);var L=Ys;v&&TD(g,v)?ED(L,T):(g.flags=-4097&g.flags|2,cr=!1,Ys=g)}}else{if(sC(g))throw Error(s(418));g.flags=-4097&g.flags|2,cr=!1,Ys=g}}}function SD(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Ys=g}function jb(g){if(!Se||g!==Ys)return!1;if(!cr)return SD(g),cr=!0,!1;if(g.tag!==3&&(g.tag!==5||Yt(g.type)&&!fe(g.type,g.memoizedProps))){var v=Oo;if(v){if(sC(g))throw CD(),Error(s(418));for(;v;)ED(g,v),v=ar(v)}}if(SD(g),g.tag===13){if(!Se)throw Error(s(316));if(!(g=(g=g.memoizedState)!==null?g.dehydrated:null))throw Error(s(317));Oo=jr(g)}else Oo=Ys?ar(g.stateNode):null;return!0}function CD(){for(var g=Oo;g;)g=ar(g)}function bf(){Se&&(Oo=Ys=null,gm=cr=!1)}function aC(g){ma===null?ma=[g]:ma.push(g)}var WQ=o.ReactCurrentBatchConfig;function Gb(g,v){if(ga(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var T=Object.keys(g),L=Object.keys(v);if(T.length!==L.length)return!1;for(L=0;L<T.length;L++){var N=T[L];if(!fa.call(v,N)||!ga(g[N],v[N]))return!1}return!0}function XQ(g){switch(g.tag){case 5:return vr(g.type);case 16:return vr("Lazy");case 13:return vr("Suspense");case 19:return vr("SuspenseList");case 0:case 2:case 15:return g=Io(g.type,!1);case 11:return g=Io(g.type.render,!1);case 1:return g=Io(g.type,!0);default:return""}}function va(g,v){if(g&&g.defaultProps){for(var T in v=i({},v),g=g.defaultProps)v[T]===void 0&&(v[T]=g[T]);return v}return v}var Hb=ci(null),Vb=null,_f=null,lC=null;function cC(){lC=_f=Vb=null}function AD(g,v,T){Te?(kn(Hb,v._currentValue),v._currentValue=T):(kn(Hb,v._currentValue2),v._currentValue2=T)}function uC(g){var v=Hb.current;Gn(Hb),Te?g._currentValue=v:g._currentValue2=v}function dC(g,v,T){for(;g!==null;){var L=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,L!==null&&(L.childLanes|=v)):L!==null&&(L.childLanes&v)!==v&&(L.childLanes|=v),g===T)break;g=g.return}}function xf(g,v){Vb=g,lC=_f=null,(g=g.dependencies)!==null&&g.firstContext!==null&&(g.lanes&v&&(Cs=!0),g.firstContext=null)}function No(g){var v=Te?g._currentValue:g._currentValue2;if(lC!==g)if(g={context:g,memoizedValue:v,next:null},_f===null){if(Vb===null)throw Error(s(308));_f=g,Vb.dependencies={lanes:0,firstContext:g}}else _f=_f.next=g;return v}var Pd=null;function hC(g){Pd===null?Pd=[g]:Pd.push(g)}function PD(g,v,T,L){var N=v.interleaved;return N===null?(T.next=T,hC(v)):(T.next=N.next,N.next=T),v.interleaved=T,tl(g,L)}function tl(g,v){g.lanes|=v;var T=g.alternate;for(T!==null&&(T.lanes|=v),T=g,g=g.return;g!==null;)g.childLanes|=v,(T=g.alternate)!==null&&(T.childLanes|=v),T=g,g=g.return;return T.tag===3?T.stateNode:null}var Xc=!1;function fC(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RD(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Zl(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function Yc(g,v,T){var L=g.updateQueue;if(L===null)return null;if(L=L.shared,(2&fn)!=0){var N=L.pending;return N===null?v.next=v:(v.next=N.next,N.next=v),L.pending=v,tl(g,T)}return(N=L.interleaved)===null?(v.next=v,hC(L)):(v.next=N.next,N.next=v),L.interleaved=v,tl(g,T)}function Wb(g,v,T){if((v=v.updateQueue)!==null&&(v=v.shared,(4194240&T)!=0)){var L=v.lanes;T|=L&=g.pendingLanes,v.lanes=T,Or(g,T)}}function ID(g,v){var T=g.updateQueue,L=g.alternate;if(L!==null&&T===(L=L.updateQueue)){var N=null,U=null;if((T=T.firstBaseUpdate)!==null){do{var te={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};U===null?N=U=te:U=U.next=te,T=T.next}while(T!==null);U===null?N=U=v:U=U.next=v}else N=U=v;return T={baseState:L.baseState,firstBaseUpdate:N,lastBaseUpdate:U,shared:L.shared,effects:L.effects},void(g.updateQueue=T)}(g=T.lastBaseUpdate)===null?T.firstBaseUpdate=v:g.next=v,T.lastBaseUpdate=v}function Xb(g,v,T,L){var N=g.updateQueue;Xc=!1;var U=N.firstBaseUpdate,te=N.lastBaseUpdate,ce=N.shared.pending;if(ce!==null){N.shared.pending=null;var xe=ce,ke=xe.next;xe.next=null,te===null?U=ke:te.next=ke,te=xe;var Ue=g.alternate;Ue!==null&&(ce=(Ue=Ue.updateQueue).lastBaseUpdate)!==te&&(ce===null?Ue.firstBaseUpdate=ke:ce.next=ke,Ue.lastBaseUpdate=xe)}if(U!==null){var nt=N.baseState;for(te=0,Ue=ke=xe=null,ce=U;;){var De=ce.lane,Je=ce.eventTime;if((L&De)===De){Ue!==null&&(Ue=Ue.next={eventTime:Je,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var _t=g,en=ce;switch(De=v,Je=T,en.tag){case 1:if(typeof(_t=en.payload)=="function"){nt=_t.call(Je,nt,De);break e}nt=_t;break e;case 3:_t.flags=-65537&_t.flags|128;case 0:if((De=typeof(_t=en.payload)=="function"?_t.call(Je,nt,De):_t)==null)break e;nt=i({},nt,De);break e;case 2:Xc=!0}}ce.callback!==null&&ce.lane!==0&&(g.flags|=64,(De=N.effects)===null?N.effects=[ce]:De.push(ce))}else Je={eventTime:Je,lane:De,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ue===null?(ke=Ue=Je,xe=nt):Ue=Ue.next=Je,te|=De;if((ce=ce.next)===null){if((ce=N.shared.pending)===null)break;ce=(De=ce).next,De.next=null,N.lastBaseUpdate=De,N.shared.pending=null}}if(Ue===null&&(xe=nt),N.baseState=xe,N.firstBaseUpdate=ke,N.lastBaseUpdate=Ue,(v=N.shared.interleaved)!==null){N=v;do te|=N.lane,N=N.next;while(N!==v)}else U===null&&(N.shared.lanes=0);Id|=te,g.lanes=te,g.memoizedState=nt}}function MD(g,v,T){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var L=g[v],N=L.callback;if(N!==null){if(L.callback=null,L=T,typeof N!="function")throw Error(s(191,N));N.call(L)}}}var LD=new n.Component().refs;function pC(g,v,T,L){T=(T=T(L,v=g.memoizedState))==null?v:i({},v,T),g.memoizedState=T,g.lanes===0&&(g.updateQueue.baseState=T)}var Yb={isMounted:function(g){return!!(g=g._reactInternals)&&k(g)===g},enqueueSetState:function(g,v,T){g=g._reactInternals;var L=$i(),N=Qc(g),U=Zl(L,N);U.payload=v,T!=null&&(U.callback=T),(v=Yc(g,U,N))!==null&&(Fo(v,g,N,L),Wb(v,g,N))},enqueueReplaceState:function(g,v,T){g=g._reactInternals;var L=$i(),N=Qc(g),U=Zl(L,N);U.tag=1,U.payload=v,T!=null&&(U.callback=T),(v=Yc(g,U,N))!==null&&(Fo(v,g,N,L),Wb(v,g,N))},enqueueForceUpdate:function(g,v){g=g._reactInternals;var T=$i(),L=Qc(g),N=Zl(T,L);N.tag=2,v!=null&&(N.callback=v),(v=Yc(g,N,L))!==null&&(Fo(v,g,L,T),Wb(v,g,L))}};function kD(g,v,T,L,N,U,te){return typeof(g=g.stateNode).shouldComponentUpdate=="function"?g.shouldComponentUpdate(L,U,te):!v.prototype||!v.prototype.isPureReactComponent||!Gb(T,L)||!Gb(N,U)}function OD(g,v,T){var L=!1,N=Ws,U=v.contextType;return typeof U=="object"&&U!==null?U=No(U):(N=Ci(v)?pa:Fn.current,U=(L=(L=v.contextTypes)!=null)?Za(g,N):Ws),v=new v(T,U),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Yb,g.stateNode=v,v._reactInternals=g,L&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=N,g.__reactInternalMemoizedMaskedChildContext=U),v}function ND(g,v,T,L){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(T,L),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(T,L),v.state!==g&&Yb.enqueueReplaceState(v,v.state,null)}function gC(g,v,T,L){var N=g.stateNode;N.props=T,N.state=g.memoizedState,N.refs=LD,fC(g);var U=v.contextType;typeof U=="object"&&U!==null?N.context=No(U):(U=Ci(v)?pa:Fn.current,N.context=Za(g,U)),N.state=g.memoizedState,typeof(U=v.getDerivedStateFromProps)=="function"&&(pC(g,v,U,T),N.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(v=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),v!==N.state&&Yb.enqueueReplaceState(N,N.state,null),Xb(g,T,N,L),N.state=g.memoizedState),typeof N.componentDidMount=="function"&&(g.flags|=4194308)}function mm(g,v,T){if((g=T.ref)!==null&&typeof g!="function"&&typeof g!="object"){if(T._owner){if(T=T._owner){if(T.tag!==1)throw Error(s(309));var L=T.stateNode}if(!L)throw Error(s(147,g));var N=L,U=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===U?v.ref:(v=function(te){var ce=N.refs;ce===LD&&(ce=N.refs={}),te===null?delete ce[U]:ce[U]=te},v._stringRef=U,v)}if(typeof g!="string")throw Error(s(284));if(!T._owner)throw Error(s(290,g))}return g}function qb(g,v){throw g=Object.prototype.toString.call(v),Error(s(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function DD(g){return(0,g._init)(g._payload)}function BD(g){function v($e,ye){if(g){var Ie=$e.deletions;Ie===null?($e.deletions=[ye],$e.flags|=16):Ie.push(ye)}}function T($e,ye){if(!g)return null;for(;ye!==null;)v($e,ye),ye=ye.sibling;return null}function L($e,ye){for($e=new Map;ye!==null;)ye.key!==null?$e.set(ye.key,ye):$e.set(ye.index,ye),ye=ye.sibling;return $e}function N($e,ye){return($e=eu($e,ye)).index=0,$e.sibling=null,$e}function U($e,ye,Ie){return $e.index=Ie,g?(Ie=$e.alternate)!==null?(Ie=Ie.index)<ye?($e.flags|=2,ye):Ie:($e.flags|=2,ye):($e.flags|=1048576,ye)}function te($e){return g&&$e.alternate===null&&($e.flags|=2),$e}function ce($e,ye,Ie,qe){return ye===null||ye.tag!==6?((ye=tA(Ie,$e.mode,qe)).return=$e,ye):((ye=N(ye,Ie)).return=$e,ye)}function xe($e,ye,Ie,qe){var Rt=Ie.type;return Rt===c?Ue($e,ye,Ie.props.children,qe,Ie.key):ye!==null&&(ye.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===x&&DD(Rt)===ye.type)?((qe=N(ye,Ie.props)).ref=mm($e,ye,Ie),qe.return=$e,qe):((qe=x1(Ie.type,Ie.key,Ie.props,null,$e.mode,qe)).ref=mm($e,ye,Ie),qe.return=$e,qe)}function ke($e,ye,Ie,qe){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?((ye=nA(Ie,$e.mode,qe)).return=$e,ye):((ye=N(ye,Ie.children||[])).return=$e,ye)}function Ue($e,ye,Ie,qe,Rt){return ye===null||ye.tag!==7?((ye=kd(Ie,$e.mode,qe,Rt)).return=$e,ye):((ye=N(ye,Ie)).return=$e,ye)}function nt($e,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return(ye=tA(""+ye,$e.mode,Ie)).return=$e,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case a:return(Ie=x1(ye.type,ye.key,ye.props,null,$e.mode,Ie)).ref=mm($e,null,ye),Ie.return=$e,Ie;case l:return(ye=nA(ye,$e.mode,Ie)).return=$e,ye;case x:return nt($e,(0,ye._init)(ye._payload),Ie)}if(F(ye)||E(ye))return(ye=kd(ye,$e.mode,Ie,null)).return=$e,ye;qb($e,ye)}return null}function De($e,ye,Ie,qe){var Rt=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Rt!==null?null:ce($e,ye,""+Ie,qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case a:return Ie.key===Rt?xe($e,ye,Ie,qe):null;case l:return Ie.key===Rt?ke($e,ye,Ie,qe):null;case x:return De($e,ye,(Rt=Ie._init)(Ie._payload),qe)}if(F(Ie)||E(Ie))return Rt!==null?null:Ue($e,ye,Ie,qe,null);qb($e,Ie)}return null}function Je($e,ye,Ie,qe,Rt){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return ce(ye,$e=$e.get(Ie)||null,""+qe,Rt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case a:return xe(ye,$e=$e.get(qe.key===null?Ie:qe.key)||null,qe,Rt);case l:return ke(ye,$e=$e.get(qe.key===null?Ie:qe.key)||null,qe,Rt);case x:return Je($e,ye,Ie,(0,qe._init)(qe._payload),Rt)}if(F(qe)||E(qe))return Ue(ye,$e=$e.get(Ie)||null,qe,Rt,null);qb(ye,qe)}return null}function _t($e,ye,Ie,qe){for(var Rt=null,Mn=null,xt=ye,bn=ye=0,Pi=null;xt!==null&&bn<Ie.length;bn++){xt.index>bn?(Pi=xt,xt=null):Pi=xt.sibling;var Ln=De($e,xt,Ie[bn],qe);if(Ln===null){xt===null&&(xt=Pi);break}g&&xt&&Ln.alternate===null&&v($e,xt),ye=U(Ln,ye,bn),Mn===null?Rt=Ln:Mn.sibling=Ln,Mn=Ln,xt=Pi}if(bn===Ie.length)return T($e,xt),cr&&Ad($e,bn),Rt;if(xt===null){for(;bn<Ie.length;bn++)(xt=nt($e,Ie[bn],qe))!==null&&(ye=U(xt,ye,bn),Mn===null?Rt=xt:Mn.sibling=xt,Mn=xt);return cr&&Ad($e,bn),Rt}for(xt=L($e,xt);bn<Ie.length;bn++)(Pi=Je(xt,$e,bn,Ie[bn],qe))!==null&&(g&&Pi.alternate!==null&&xt.delete(Pi.key===null?bn:Pi.key),ye=U(Pi,ye,bn),Mn===null?Rt=Pi:Mn.sibling=Pi,Mn=Pi);return g&&xt.forEach(function(tu){return v($e,tu)}),cr&&Ad($e,bn),Rt}function en($e,ye,Ie,qe){var Rt=E(Ie);if(typeof Rt!="function")throw Error(s(150));if((Ie=Rt.call(Ie))==null)throw Error(s(151));for(var Mn=Rt=null,xt=ye,bn=ye=0,Pi=null,Ln=Ie.next();xt!==null&&!Ln.done;bn++,Ln=Ie.next()){xt.index>bn?(Pi=xt,xt=null):Pi=xt.sibling;var tu=De($e,xt,Ln.value,qe);if(tu===null){xt===null&&(xt=Pi);break}g&&xt&&tu.alternate===null&&v($e,xt),ye=U(tu,ye,bn),Mn===null?Rt=tu:Mn.sibling=tu,Mn=tu,xt=Pi}if(Ln.done)return T($e,xt),cr&&Ad($e,bn),Rt;if(xt===null){for(;!Ln.done;bn++,Ln=Ie.next())(Ln=nt($e,Ln.value,qe))!==null&&(ye=U(Ln,ye,bn),Mn===null?Rt=Ln:Mn.sibling=Ln,Mn=Ln);return cr&&Ad($e,bn),Rt}for(xt=L($e,xt);!Ln.done;bn++,Ln=Ie.next())(Ln=Je(xt,$e,bn,Ln.value,qe))!==null&&(g&&Ln.alternate!==null&&xt.delete(Ln.key===null?bn:Ln.key),ye=U(Ln,ye,bn),Mn===null?Rt=Ln:Mn.sibling=Ln,Mn=Ln);return g&&xt.forEach(function(vJ){return v($e,vJ)}),cr&&Ad($e,bn),Rt}return function $e(ye,Ie,qe,Rt){if(typeof qe=="object"&&qe!==null&&qe.type===c&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case a:e:{for(var Mn=qe.key,xt=Ie;xt!==null;){if(xt.key===Mn){if((Mn=qe.type)===c){if(xt.tag===7){T(ye,xt.sibling),(Ie=N(xt,qe.props.children)).return=ye,ye=Ie;break e}}else if(xt.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===x&&DD(Mn)===xt.type){T(ye,xt.sibling),(Ie=N(xt,qe.props)).ref=mm(ye,xt,qe),Ie.return=ye,ye=Ie;break e}T(ye,xt);break}v(ye,xt),xt=xt.sibling}qe.type===c?((Ie=kd(qe.props.children,ye.mode,Rt,qe.key)).return=ye,ye=Ie):((Rt=x1(qe.type,qe.key,qe.props,null,ye.mode,Rt)).ref=mm(ye,Ie,qe),Rt.return=ye,ye=Rt)}return te(ye);case l:e:{for(xt=qe.key;Ie!==null;){if(Ie.key===xt){if(Ie.tag===4&&Ie.stateNode.containerInfo===qe.containerInfo&&Ie.stateNode.implementation===qe.implementation){T(ye,Ie.sibling),(Ie=N(Ie,qe.children||[])).return=ye,ye=Ie;break e}T(ye,Ie);break}v(ye,Ie),Ie=Ie.sibling}(Ie=nA(qe,ye.mode,Rt)).return=ye,ye=Ie}return te(ye);case x:return $e(ye,Ie,(xt=qe._init)(qe._payload),Rt)}if(F(qe))return _t(ye,Ie,qe,Rt);if(E(qe))return en(ye,Ie,qe,Rt);qb(ye,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,Ie!==null&&Ie.tag===6?(T(ye,Ie.sibling),(Ie=N(Ie,qe)).return=ye,ye=Ie):(T(ye,Ie),(Ie=tA(qe,ye.mode,Rt)).return=ye,ye=Ie),te(ye)):T(ye,Ie)}}var wf=BD(!0),FD=BD(!1),vm={},Do=ci(vm),ym=ci(vm),Ef=ci(vm);function nl(g){if(g===vm)throw Error(s(174));return g}function mC(g,v){kn(Ef,v),kn(ym,g),kn(Do,vm),g=G(v),Gn(Do),kn(Do,g)}function Tf(){Gn(Do),Gn(ym),Gn(Ef)}function zD(g){var v=nl(Ef.current),T=nl(Do.current);T!==(v=j(T,g.type,v))&&(kn(ym,g),kn(Do,v))}function vC(g){ym.current===g&&(Gn(Do),Gn(ym))}var Er=ci(0);function Kb(g){for(var v=g;v!==null;){if(v.tag===13){var T=v.memoizedState;if(T!==null&&((T=T.dehydrated)===null||Tn(T)||Mt(T)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(128&v.flags)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var yC=[];function bC(){for(var g=0;g<yC.length;g++){var v=yC[g];Te?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}yC.length=0}var Zb=o.ReactCurrentDispatcher,_C=o.ReactCurrentBatchConfig,Rd=0,yr=null,di=null,hi=null,Qb=!1,bm=!1,_m=0,YQ=0;function zi(){throw Error(s(321))}function xC(g,v){if(v===null)return!1;for(var T=0;T<v.length&&T<g.length;T++)if(!ga(g[T],v[T]))return!1;return!0}function wC(g,v,T,L,N,U){if(Rd=U,yr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,Zb.current=g===null||g.memoizedState===null?QQ:JQ,g=T(L,N),bm){U=0;do{if(bm=!1,_m=0,25<=U)throw Error(s(301));U+=1,hi=di=null,v.updateQueue=null,Zb.current=eJ,g=T(L,N)}while(bm)}if(Zb.current=t1,v=di!==null&&di.next!==null,Rd=0,hi=di=yr=null,Qb=!1,v)throw Error(s(300));return g}function EC(){var g=_m!==0;return _m=0,g}function rl(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?yr.memoizedState=hi=g:hi=hi.next=g,hi}function Bo(){if(di===null){var g=yr.alternate;g=g!==null?g.memoizedState:null}else g=di.next;var v=hi===null?yr.memoizedState:hi.next;if(v!==null)hi=v,di=g;else{if(g===null)throw Error(s(310));g={memoizedState:(di=g).memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},hi===null?yr.memoizedState=hi=g:hi=hi.next=g}return hi}function xm(g,v){return typeof v=="function"?v(g):v}function TC(g){var v=Bo(),T=v.queue;if(T===null)throw Error(s(311));T.lastRenderedReducer=g;var L=di,N=L.baseQueue,U=T.pending;if(U!==null){if(N!==null){var te=N.next;N.next=U.next,U.next=te}L.baseQueue=N=U,T.pending=null}if(N!==null){U=N.next,L=L.baseState;var ce=te=null,xe=null,ke=U;do{var Ue=ke.lane;if((Rd&Ue)===Ue)xe!==null&&(xe=xe.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),L=ke.hasEagerState?ke.eagerState:g(L,ke.action);else{var nt={lane:Ue,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};xe===null?(ce=xe=nt,te=L):xe=xe.next=nt,yr.lanes|=Ue,Id|=Ue}ke=ke.next}while(ke!==null&&ke!==U);xe===null?te=L:xe.next=ce,ga(L,v.memoizedState)||(Cs=!0),v.memoizedState=L,v.baseState=te,v.baseQueue=xe,T.lastRenderedState=L}if((g=T.interleaved)!==null){N=g;do U=N.lane,yr.lanes|=U,Id|=U,N=N.next;while(N!==g)}else N===null&&(T.lanes=0);return[v.memoizedState,T.dispatch]}function SC(g){var v=Bo(),T=v.queue;if(T===null)throw Error(s(311));T.lastRenderedReducer=g;var L=T.dispatch,N=T.pending,U=v.memoizedState;if(N!==null){T.pending=null;var te=N=N.next;do U=g(U,te.action),te=te.next;while(te!==N);ga(U,v.memoizedState)||(Cs=!0),v.memoizedState=U,v.baseQueue===null&&(v.baseState=U),T.lastRenderedState=U}return[U,L]}function UD(){}function $D(g,v){var T=yr,L=Bo(),N=v(),U=!ga(L.memoizedState,N);if(U&&(L.memoizedState=N,Cs=!0),L=L.queue,CC(HD.bind(null,T,L,g),[g]),L.getSnapshot!==v||U||hi!==null&&1&hi.memoizedState.tag){if(T.flags|=2048,wm(9,GD.bind(null,T,L,N,v),void 0,null),fi===null)throw Error(s(349));30&Rd||jD(T,v,N)}return N}function jD(g,v,T){g.flags|=16384,g={getSnapshot:v,value:T},(v=yr.updateQueue)===null?(v={lastEffect:null,stores:null},yr.updateQueue=v,v.stores=[g]):(T=v.stores)===null?v.stores=[g]:T.push(g)}function GD(g,v,T,L){v.value=T,v.getSnapshot=L,VD(v)&&WD(g)}function HD(g,v,T){return T(function(){VD(v)&&WD(g)})}function VD(g){var v=g.getSnapshot;g=g.value;try{var T=v();return!ga(g,T)}catch{return!0}}function WD(g){var v=tl(g,1);v!==null&&Fo(v,g,1,-1)}function XD(g){var v=rl();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xm,lastRenderedState:g},v.queue=g,g=g.dispatch=ZQ.bind(null,yr,g),[v.memoizedState,g]}function wm(g,v,T,L){return g={tag:g,create:v,destroy:T,deps:L,next:null},(v=yr.updateQueue)===null?(v={lastEffect:null,stores:null},yr.updateQueue=v,v.lastEffect=g.next=g):(T=v.lastEffect)===null?v.lastEffect=g.next=g:(L=T.next,T.next=g,g.next=L,v.lastEffect=g),g}function YD(){return Bo().memoizedState}function Jb(g,v,T,L){var N=rl();yr.flags|=g,N.memoizedState=wm(1|v,T,void 0,L===void 0?null:L)}function e1(g,v,T,L){var N=Bo();L=L===void 0?null:L;var U=void 0;if(di!==null){var te=di.memoizedState;if(U=te.destroy,L!==null&&xC(L,te.deps))return void(N.memoizedState=wm(v,T,U,L))}yr.flags|=g,N.memoizedState=wm(1|v,T,U,L)}function qD(g,v){return Jb(8390656,8,g,v)}function CC(g,v){return e1(2048,8,g,v)}function KD(g,v){return e1(4,2,g,v)}function ZD(g,v){return e1(4,4,g,v)}function QD(g,v){return typeof v=="function"?(g=g(),v(g),function(){v(null)}):v!=null?(g=g(),v.current=g,function(){v.current=null}):void 0}function JD(g,v,T){return T=T!=null?T.concat([g]):null,e1(4,4,QD.bind(null,v,g),T)}function AC(){}function eB(g,v){var T=Bo();v=v===void 0?null:v;var L=T.memoizedState;return L!==null&&v!==null&&xC(v,L[1])?L[0]:(T.memoizedState=[g,v],g)}function tB(g,v){var T=Bo();v=v===void 0?null:v;var L=T.memoizedState;return L!==null&&v!==null&&xC(v,L[1])?L[0]:(g=g(),T.memoizedState=[g,v],g)}function nB(g,v,T){return 21&Rd?(ga(T,v)||(T=ot(),yr.lanes|=T,Id|=T,g.baseState=!0),v):(g.baseState&&(g.baseState=!1,Cs=!0),g.memoizedState=T)}function qQ(g,v){var T=Ut;Ut=T!==0&&4>T?T:4,g(!0);var L=_C.transition;_C.transition={};try{g(!1),v()}finally{Ut=T,_C.transition=L}}function rB(){return Bo().memoizedState}function KQ(g,v,T){var L=Qc(g);T={lane:L,action:T,hasEagerState:!1,eagerState:null,next:null},iB(g)?sB(v,T):(T=PD(g,v,T,L))!==null&&(Fo(T,g,L,$i()),oB(T,v,L))}function ZQ(g,v,T){var L=Qc(g),N={lane:L,action:T,hasEagerState:!1,eagerState:null,next:null};if(iB(g))sB(v,N);else{var U=g.alternate;if(g.lanes===0&&(U===null||U.lanes===0)&&(U=v.lastRenderedReducer)!==null)try{var te=v.lastRenderedState,ce=U(te,T);if(N.hasEagerState=!0,N.eagerState=ce,ga(ce,te)){var xe=v.interleaved;return xe===null?(N.next=N,hC(v)):(N.next=xe.next,xe.next=N),void(v.interleaved=N)}}catch{}(T=PD(g,v,N,L))!==null&&(Fo(T,g,L,N=$i()),oB(T,v,L))}}function iB(g){var v=g.alternate;return g===yr||v!==null&&v===yr}function sB(g,v){bm=Qb=!0;var T=g.pending;T===null?v.next=v:(v.next=T.next,T.next=v),g.pending=v}function oB(g,v,T){if(4194240&T){var L=v.lanes;T|=L&=g.pendingLanes,v.lanes=T,Or(g,T)}}var t1={readContext:No,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},QQ={readContext:No,useCallback:function(g,v){return rl().memoizedState=[g,v===void 0?null:v],g},useContext:No,useEffect:qD,useImperativeHandle:function(g,v,T){return T=T!=null?T.concat([g]):null,Jb(4194308,4,QD.bind(null,v,g),T)},useLayoutEffect:function(g,v){return Jb(4194308,4,g,v)},useInsertionEffect:function(g,v){return Jb(4,2,g,v)},useMemo:function(g,v){var T=rl();return v=v===void 0?null:v,g=g(),T.memoizedState=[g,v],g},useReducer:function(g,v,T){var L=rl();return v=T!==void 0?T(v):v,L.memoizedState=L.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},L.queue=g,g=g.dispatch=KQ.bind(null,yr,g),[L.memoizedState,g]},useRef:function(g){return g={current:g},rl().memoizedState=g},useState:XD,useDebugValue:AC,useDeferredValue:function(g){return rl().memoizedState=g},useTransition:function(){var g=XD(!1),v=g[0];return g=qQ.bind(null,g[1]),rl().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,T){var L=yr,N=rl();if(cr){if(T===void 0)throw Error(s(407));T=T()}else{if(T=v(),fi===null)throw Error(s(349));30&Rd||jD(L,v,T)}N.memoizedState=T;var U={value:T,getSnapshot:v};return N.queue=U,qD(HD.bind(null,L,U,g),[g]),L.flags|=2048,wm(9,GD.bind(null,L,U,T,v),void 0,null),T},useId:function(){var g=rl(),v=fi.identifierPrefix;if(cr){var T=Kl;v=":"+v+"R"+(T=(el&~(1<<32-os(el)-1)).toString(32)+T),0<(T=_m++)&&(v+="H"+T.toString(32)),v+=":"}else v=":"+v+"r"+(T=YQ++).toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},JQ={readContext:No,useCallback:eB,useContext:No,useEffect:CC,useImperativeHandle:JD,useInsertionEffect:KD,useLayoutEffect:ZD,useMemo:tB,useReducer:TC,useRef:YD,useState:function(){return TC(xm)},useDebugValue:AC,useDeferredValue:function(g){return nB(Bo(),di.memoizedState,g)},useTransition:function(){return[TC(xm)[0],Bo().memoizedState]},useMutableSource:UD,useSyncExternalStore:$D,useId:rB,unstable_isNewReconciler:!1},eJ={readContext:No,useCallback:eB,useContext:No,useEffect:CC,useImperativeHandle:JD,useInsertionEffect:KD,useLayoutEffect:ZD,useMemo:tB,useReducer:SC,useRef:YD,useState:function(){return SC(xm)},useDebugValue:AC,useDeferredValue:function(g){var v=Bo();return di===null?v.memoizedState=g:nB(v,di.memoizedState,g)},useTransition:function(){return[SC(xm)[0],Bo().memoizedState]},useMutableSource:UD,useSyncExternalStore:$D,useId:rB,unstable_isNewReconciler:!1};function Sf(g,v){try{var T="",L=v;do T+=XQ(L),L=L.return;while(L);var N=T}catch(U){N=`
Error generating stack: `+U.message+`
`+U.stack}return{value:g,source:v,stack:N,digest:null}}function PC(g,v,T){return{value:g,source:null,stack:T??null,digest:v??null}}function RC(g,v){try{console.error(v.value)}catch(T){setTimeout(function(){throw T})}}var tJ=typeof WeakMap=="function"?WeakMap:Map;function aB(g,v,T){(T=Zl(-1,T)).tag=3,T.payload={element:null};var L=v.value;return T.callback=function(){g1||(g1=!0,YC=L),RC(0,v)},T}function lB(g,v,T){(T=Zl(-1,T)).tag=3;var L=g.type.getDerivedStateFromError;if(typeof L=="function"){var N=v.value;T.payload=function(){return L(N)},T.callback=function(){RC(0,v)}}var U=g.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(T.callback=function(){RC(0,v),typeof L!="function"&&(Kc===null?Kc=new Set([this]):Kc.add(this));var te=v.stack;this.componentDidCatch(v.value,{componentStack:te!==null?te:""})}),T}function cB(g,v,T){var L=g.pingCache;if(L===null){L=g.pingCache=new tJ;var N=new Set;L.set(v,N)}else(N=L.get(v))===void 0&&(N=new Set,L.set(v,N));N.has(T)||(N.add(T),g=uJ.bind(null,g,v,T),v.then(g,g))}function uB(g){do{var v;if((v=g.tag===13)&&(v=(v=g.memoizedState)===null||v.dehydrated!==null),v)return g;g=g.return}while(g!==null);return null}function dB(g,v,T,L,N){return 1&g.mode?(g.flags|=65536,g.lanes=N,g):(g===v?g.flags|=65536:(g.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:((v=Zl(-1,1)).tag=2,Yc(T,v,1))),T.lanes|=1),g)}var nJ=o.ReactCurrentOwner,Cs=!1;function As(g,v,T,L){v.child=g===null?FD(v,null,T,L):wf(v,g.child,T,L)}function hB(g,v,T,L,N){T=T.render;var U=v.ref;return xf(v,N),L=wC(g,v,T,L,U,N),T=EC(),g===null||Cs?(cr&&T&&rC(v),v.flags|=1,As(g,v,L,N),v.child):(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~N,Ql(g,v,N))}function fB(g,v,T,L,N){if(g===null){var U=T.type;return typeof U!="function"||eA(U)||U.defaultProps!==void 0||T.compare!==null||T.defaultProps!==void 0?((g=x1(T.type,null,L,v,v.mode,N)).ref=v.ref,g.return=v,v.child=g):(v.tag=15,v.type=U,pB(g,v,U,L,N))}if(U=g.child,(g.lanes&N)==0){var te=U.memoizedProps;if((T=(T=T.compare)!==null?T:Gb)(te,L)&&g.ref===v.ref)return Ql(g,v,N)}return v.flags|=1,(g=eu(U,L)).ref=v.ref,g.return=v,v.child=g}function pB(g,v,T,L,N){if(g!==null){var U=g.memoizedProps;if(Gb(U,L)&&g.ref===v.ref){if(Cs=!1,v.pendingProps=L=U,(g.lanes&N)==0)return v.lanes=g.lanes,Ql(g,v,N);131072&g.flags&&(Cs=!0)}}return IC(g,v,T,L,N)}function gB(g,v,T){var L=v.pendingProps,N=L.children,U=g!==null?g.memoizedState:null;if(L.mode==="hidden")if(!(1&v.mode))v.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Af,qs),qs|=T;else{if(!(1073741824&T))return g=U!==null?U.baseLanes|T:T,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null,transitions:null},v.updateQueue=null,kn(Af,qs),qs|=g,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=U!==null?U.baseLanes:T,kn(Af,qs),qs|=L}else U!==null?(L=U.baseLanes|T,v.memoizedState=null):L=T,kn(Af,qs),qs|=L;return As(g,v,N,T),v.child}function mB(g,v){var T=v.ref;(g===null&&T!==null||g!==null&&g.ref!==T)&&(v.flags|=512,v.flags|=2097152)}function IC(g,v,T,L,N){var U=Ci(T)?pa:Fn.current;return U=Za(v,U),xf(v,N),T=wC(g,v,T,L,U,N),L=EC(),g===null||Cs?(cr&&L&&rC(v),v.flags|=1,As(g,v,T,N),v.child):(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~N,Ql(g,v,N))}function vB(g,v,T,L,N){if(Ci(T)){var U=!0;mf(v)}else U=!1;if(xf(v,N),v.stateNode===null)s1(g,v),OD(v,T,L),gC(v,T,L,N),L=!0;else if(g===null){var te=v.stateNode,ce=v.memoizedProps;te.props=ce;var xe=te.context,ke=T.contextType;typeof ke=="object"&&ke!==null?ke=No(ke):ke=Za(v,ke=Ci(T)?pa:Fn.current);var Ue=T.getDerivedStateFromProps,nt=typeof Ue=="function"||typeof te.getSnapshotBeforeUpdate=="function";nt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ce!==L||xe!==ke)&&ND(v,te,L,ke),Xc=!1;var De=v.memoizedState;te.state=De,Xb(v,L,te,N),xe=v.memoizedState,ce!==L||De!==xe||Jr.current||Xc?(typeof Ue=="function"&&(pC(v,T,Ue,L),xe=v.memoizedState),(ce=Xc||kD(v,T,ce,L,De,xe,ke))?(nt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(v.flags|=4194308)):(typeof te.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=L,v.memoizedState=xe),te.props=L,te.state=xe,te.context=ke,L=ce):(typeof te.componentDidMount=="function"&&(v.flags|=4194308),L=!1)}else{te=v.stateNode,RD(g,v),ce=v.memoizedProps,ke=v.type===v.elementType?ce:va(v.type,ce),te.props=ke,nt=v.pendingProps,De=te.context,typeof(xe=T.contextType)=="object"&&xe!==null?xe=No(xe):xe=Za(v,xe=Ci(T)?pa:Fn.current);var Je=T.getDerivedStateFromProps;(Ue=typeof Je=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ce!==nt||De!==xe)&&ND(v,te,L,xe),Xc=!1,De=v.memoizedState,te.state=De,Xb(v,L,te,N);var _t=v.memoizedState;ce!==nt||De!==_t||Jr.current||Xc?(typeof Je=="function"&&(pC(v,T,Je,L),_t=v.memoizedState),(ke=Xc||kD(v,T,ke,L,De,_t,xe)||!1)?(Ue||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(L,_t,xe),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(L,_t,xe)),typeof te.componentDidUpdate=="function"&&(v.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof te.componentDidUpdate!="function"||ce===g.memoizedProps&&De===g.memoizedState||(v.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ce===g.memoizedProps&&De===g.memoizedState||(v.flags|=1024),v.memoizedProps=L,v.memoizedState=_t),te.props=L,te.state=_t,te.context=xe,L=ke):(typeof te.componentDidUpdate!="function"||ce===g.memoizedProps&&De===g.memoizedState||(v.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ce===g.memoizedProps&&De===g.memoizedState||(v.flags|=1024),L=!1)}return MC(g,v,T,L,U,N)}function MC(g,v,T,L,N,U){mB(g,v);var te=(128&v.flags)!=0;if(!L&&!te)return N&&fm(v,T,!1),Ql(g,v,U);L=v.stateNode,nJ.current=v;var ce=te&&typeof T.getDerivedStateFromError!="function"?null:L.render();return v.flags|=1,g!==null&&te?(v.child=wf(v,g.child,null,U),v.child=wf(v,null,ce,U)):As(g,v,ce,U),v.memoizedState=L.state,N&&fm(v,T,!0),v.child}function yB(g){var v=g.stateNode;v.pendingContext?Sd(0,v.pendingContext,v.pendingContext!==v.context):v.context&&Sd(0,v.context,!1),mC(g,v.containerInfo)}function bB(g,v,T,L,N){return bf(),aC(N),v.flags|=256,As(g,v,T,L),v.child}var Em,Tm,n1,r1,LC={dehydrated:null,treeContext:null,retryLane:0};function kC(g){return{baseLanes:g,cachePool:null,transitions:null}}function _B(g,v,T){var L,N=v.pendingProps,U=Er.current,te=!1,ce=(128&v.flags)!=0;if((L=ce)||(L=(g===null||g.memoizedState!==null)&&(2&U)!=0),L?(te=!0,v.flags&=-129):g!==null&&g.memoizedState===null||(U|=1),kn(Er,1&U),g===null)return oC(v),(g=v.memoizedState)!==null&&(g=g.dehydrated)!==null?(1&v.mode?Mt(g)?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(ce=N.children,g=N.fallback,te?(N=v.mode,te=v.child,ce={mode:"hidden",children:ce},!(1&N)&&te!==null?(te.childLanes=0,te.pendingProps=ce):te=w1(ce,N,0,null),g=kd(g,N,T,null),te.return=v,g.return=v,te.sibling=g,v.child=te,v.child.memoizedState=kC(T),v.memoizedState=LC,g):OC(v,ce));if((U=g.memoizedState)!==null&&(L=U.dehydrated)!==null)return function(ke,Ue,nt,De,Je,_t,en){if(nt)return 256&Ue.flags?(Ue.flags&=-257,i1(ke,Ue,en,De=PC(Error(s(422))))):Ue.memoizedState!==null?(Ue.child=ke.child,Ue.flags|=128,null):(_t=De.fallback,Je=Ue.mode,De=w1({mode:"visible",children:De.children},Je,0,null),(_t=kd(_t,Je,en,null)).flags|=2,De.return=Ue,_t.return=Ue,De.sibling=_t,Ue.child=De,1&Ue.mode&&wf(Ue,ke.child,null,en),Ue.child.memoizedState=kC(en),Ue.memoizedState=LC,_t);if(!(1&Ue.mode))return i1(ke,Ue,en,null);if(Mt(Je))return De=Wt(Je).digest,_t=Error(s(419)),De=PC(_t,De,void 0),i1(ke,Ue,en,De);if(nt=(en&ke.childLanes)!=0,Cs||nt){if((De=fi)!==null){switch(en&-en){case 4:Je=2;break;case 16:Je=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Je=32;break;case 536870912:Je=268435456;break;default:Je=0}(Je=Je&(De.suspendedLanes|en)?0:Je)!==0&&Je!==_t.retryLane&&(_t.retryLane=Je,tl(ke,Je),Fo(De,ke,Je,-1))}return JC(),i1(ke,Ue,en,De=PC(Error(s(421))))}return Tn(Je)?(Ue.flags|=128,Ue.child=ke.child,Ue=dJ.bind(null,ke),Sn(Je,Ue),null):(ke=_t.treeContext,Se&&(Oo=Hs(Je),Ys=Ue,cr=!0,ma=null,gm=!1,ke!==null&&(Lo[ko++]=el,Lo[ko++]=Kl,Lo[ko++]=Cd,el=ke.id,Kl=ke.overflow,Cd=Ue)),Ue=OC(Ue,De.children),Ue.flags|=4096,Ue)}(g,v,ce,N,L,U,T);if(te){te=N.fallback,ce=v.mode,L=(U=g.child).sibling;var xe={mode:"hidden",children:N.children};return!(1&ce)&&v.child!==U?((N=v.child).childLanes=0,N.pendingProps=xe,v.deletions=null):(N=eu(U,xe)).subtreeFlags=14680064&U.subtreeFlags,L!==null?te=eu(L,te):(te=kd(te,ce,T,null)).flags|=2,te.return=v,N.return=v,N.sibling=te,v.child=N,N=te,te=v.child,ce=(ce=g.child.memoizedState)===null?kC(T):{baseLanes:ce.baseLanes|T,cachePool:null,transitions:ce.transitions},te.memoizedState=ce,te.childLanes=g.childLanes&~T,v.memoizedState=LC,N}return g=(te=g.child).sibling,N=eu(te,{mode:"visible",children:N.children}),!(1&v.mode)&&(N.lanes=T),N.return=v,N.sibling=null,g!==null&&((T=v.deletions)===null?(v.deletions=[g],v.flags|=16):T.push(g)),v.child=N,v.memoizedState=null,N}function OC(g,v){return(v=w1({mode:"visible",children:v},g.mode,0,null)).return=g,g.child=v}function i1(g,v,T,L){return L!==null&&aC(L),wf(v,g.child,null,T),(g=OC(v,v.pendingProps.children)).flags|=2,v.memoizedState=null,g}function xB(g,v,T){g.lanes|=v;var L=g.alternate;L!==null&&(L.lanes|=v),dC(g.return,v,T)}function NC(g,v,T,L,N){var U=g.memoizedState;U===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:L,tail:T,tailMode:N}:(U.isBackwards=v,U.rendering=null,U.renderingStartTime=0,U.last=L,U.tail=T,U.tailMode=N)}function wB(g,v,T){var L=v.pendingProps,N=L.revealOrder,U=L.tail;if(As(g,v,L.children,T),(2&(L=Er.current))!=0)L=1&L|2,v.flags|=128;else{if(g!==null&&128&g.flags)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&xB(g,T,v);else if(g.tag===19)xB(g,T,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}L&=1}if(kn(Er,L),(1&v.mode)==0)v.memoizedState=null;else switch(N){case"forwards":for(T=v.child,N=null;T!==null;)(g=T.alternate)!==null&&Kb(g)===null&&(N=T),T=T.sibling;(T=N)===null?(N=v.child,v.child=null):(N=T.sibling,T.sibling=null),NC(v,!1,N,T,U);break;case"backwards":for(T=null,N=v.child,v.child=null;N!==null;){if((g=N.alternate)!==null&&Kb(g)===null){v.child=N;break}g=N.sibling,N.sibling=T,T=N,N=g}NC(v,!0,T,null,U);break;case"together":NC(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function s1(g,v){!(1&v.mode)&&g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2)}function Ql(g,v,T){if(g!==null&&(v.dependencies=g.dependencies),Id|=v.lanes,(T&v.childLanes)==0)return null;if(g!==null&&v.child!==g.child)throw Error(s(153));if(v.child!==null){for(T=eu(g=v.child,g.pendingProps),v.child=T,T.return=v;g.sibling!==null;)g=g.sibling,(T=T.sibling=eu(g,g.pendingProps)).return=v;T.sibling=null}return v.child}function il(g){g.flags|=4}function EB(g,v){if(g!==null&&g.child===v.child)return!0;if(16&v.flags)return!1;for(g=v.child;g!==null;){if(12854&g.flags||12854&g.subtreeFlags)return!1;g=g.sibling}return!0}if(ge)Em=function(g,v){for(var T=v.child;T!==null;){if(T.tag===5||T.tag===6)ee(g,T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===v)break;for(;T.sibling===null;){if(T.return===null||T.return===v)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},Tm=function(){},n1=function(g,v,T,L,N){if((g=g.memoizedProps)!==L){var U=v.stateNode,te=nl(Do.current);T=oe(U,T,g,L,N,te),(v.updateQueue=T)&&il(v)}},r1=function(g,v,T,L){T!==L&&il(v)};else if(Me){Em=function(g,v,T,L){for(var N=v.child;N!==null;){if(N.tag===5){var U=N.stateNode;T&&L&&(U=Ft(U,N.type,N.memoizedProps,N)),ee(g,U)}else if(N.tag===6)U=N.stateNode,T&&L&&(U=St(U,N.memoizedProps,N)),ee(g,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)(U=N.child)!==null&&(U.return=N),Em(g,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===v)break;for(;N.sibling===null;){if(N.return===null||N.return===v)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var TB=function(g,v,T,L){for(var N=v.child;N!==null;){if(N.tag===5){var U=N.stateNode;T&&L&&(U=Ft(U,N.type,N.memoizedProps,N)),Re(g,U)}else if(N.tag===6)U=N.stateNode,T&&L&&(U=St(U,N.memoizedProps,N)),Re(g,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)(U=N.child)!==null&&(U.return=N),TB(g,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===v)break;for(;N.sibling===null;){if(N.return===null||N.return===v)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Tm=function(g,v){var T=v.stateNode;if(!EB(g,v)){g=T.containerInfo;var L=_e(g);TB(L,v,!1,!1),T.pendingChildren=L,il(v),tt(g,L)}},n1=function(g,v,T,L,N){var U=g.stateNode,te=g.memoizedProps;if((g=EB(g,v))&&te===L)v.stateNode=U;else{var ce=v.stateNode,xe=nl(Do.current),ke=null;te!==L&&(ke=oe(ce,T,te,L,N,xe)),g&&ke===null?v.stateNode=U:(U=le(U,ke,T,te,L,v,g,ce),ve(U,T,L,N,xe)&&il(v),v.stateNode=U,g?il(v):Em(U,v,!1,!1))}},r1=function(g,v,T,L){T!==L?(g=nl(Ef.current),T=nl(Do.current),v.stateNode=be(L,g,T,v),il(v)):v.stateNode=g.stateNode}}else Tm=function(){},n1=function(){},r1=function(){};function Sm(g,v){if(!cr)switch(g.tailMode){case"hidden":v=g.tail;for(var T=null;v!==null;)v.alternate!==null&&(T=v),v=v.sibling;T===null?g.tail=null:T.sibling=null;break;case"collapsed":T=g.tail;for(var L=null;T!==null;)T.alternate!==null&&(L=T),T=T.sibling;L===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:L.sibling=null}}function as(g){var v=g.alternate!==null&&g.alternate.child===g.child,T=0,L=0;if(v)for(var N=g.child;N!==null;)T|=N.lanes|N.childLanes,L|=14680064&N.subtreeFlags,L|=14680064&N.flags,N.return=g,N=N.sibling;else for(N=g.child;N!==null;)T|=N.lanes|N.childLanes,L|=N.subtreeFlags,L|=N.flags,N.return=g,N=N.sibling;return g.subtreeFlags|=L,g.childLanes=T,v}function rJ(g,v,T){var L=v.pendingProps;switch(iC(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(v),null;case 1:case 17:return Ci(v.type)&&Td(),as(v),null;case 3:return T=v.stateNode,Tf(),Gn(Jr),Gn(Fn),bC(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),g!==null&&g.child!==null||(jb(v)?il(v):g===null||g.memoizedState.isDehydrated&&!(256&v.flags)||(v.flags|=1024,ma!==null&&(ZC(ma),ma=null))),Tm(g,v),as(v),null;case 5:vC(v),T=nl(Ef.current);var N=v.type;if(g!==null&&v.stateNode!=null)n1(g,v,N,L,T),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!L){if(v.stateNode===null)throw Error(s(166));return as(v),null}if(g=nl(Do.current),jb(v)){if(!Se)throw Error(s(175));g=hn(v.stateNode,v.type,v.memoizedProps,T,g,v,!gm),v.updateQueue=g,g!==null&&il(v)}else{var U=X(N,L,T,g,v);Em(U,v,!1,!1),v.stateNode=U,ve(U,N,L,T,g)&&il(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return as(v),null;case 6:if(g&&v.stateNode!=null)r1(g,v,g.memoizedProps,L);else{if(typeof L!="string"&&v.stateNode===null)throw Error(s(166));if(g=nl(Ef.current),T=nl(Do.current),jb(v)){if(!Se)throw Error(s(176));if(g=v.stateNode,T=v.memoizedProps,(L=gn(g,T,v,!gm))&&(N=Ys)!==null)switch(N.tag){case 3:Bn(N.stateNode.containerInfo,g,T,(1&N.mode)!=0);break;case 5:Ti(N.type,N.memoizedProps,N.stateNode,g,T,(1&N.mode)!=0)}L&&il(v)}else v.stateNode=be(L,g,T,v)}return as(v),null;case 13:if(Gn(Er),L=v.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(cr&&Oo!==null&&1&v.mode&&!(128&v.flags))CD(),bf(),v.flags|=98560,N=!1;else if(N=jb(v),L!==null&&L.dehydrated!==null){if(g===null){if(!N)throw Error(s(318));if(!Se)throw Error(s(344));if(!(N=(N=v.memoizedState)!==null?N.dehydrated:null))throw Error(s(317));$r(N,v)}else bf(),!(128&v.flags)&&(v.memoizedState=null),v.flags|=4;as(v),N=!1}else ma!==null&&(ZC(ma),ma=null),N=!0;if(!N)return 65536&v.flags?v:null}return 128&v.flags?(v.lanes=T,v):((T=L!==null)!=(g!==null&&g.memoizedState!==null)&&T&&(v.child.flags|=8192,1&v.mode&&(g===null||1&Er.current?ei===0&&(ei=3):JC())),v.updateQueue!==null&&(v.flags|=4),as(v),null);case 4:return Tf(),Tm(g,v),g===null&&ie(v.stateNode.containerInfo),as(v),null;case 10:return uC(v.type._context),as(v),null;case 19:if(Gn(Er),(N=v.memoizedState)===null)return as(v),null;if(L=(128&v.flags)!=0,(U=N.rendering)===null)if(L)Sm(N,!1);else{if(ei!==0||g!==null&&128&g.flags)for(g=v.child;g!==null;){if((U=Kb(g))!==null){for(v.flags|=128,Sm(N,!1),(g=U.updateQueue)!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=T,T=v.child;T!==null;)N=g,(L=T).flags&=14680066,(U=L.alternate)===null?(L.childLanes=0,L.lanes=N,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=U.childLanes,L.lanes=U.lanes,L.child=U.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=U.memoizedProps,L.memoizedState=U.memoizedState,L.updateQueue=U.updateQueue,L.type=U.type,N=U.dependencies,L.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),T=T.sibling;return kn(Er,1&Er.current|2),v.child}g=g.sibling}N.tail!==null&&ui()>XC&&(v.flags|=128,L=!0,Sm(N,!1),v.lanes=4194304)}else{if(!L)if((g=Kb(U))!==null){if(v.flags|=128,L=!0,(g=g.updateQueue)!==null&&(v.updateQueue=g,v.flags|=4),Sm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!U.alternate&&!cr)return as(v),null}else 2*ui()-N.renderingStartTime>XC&&T!==1073741824&&(v.flags|=128,L=!0,Sm(N,!1),v.lanes=4194304);N.isBackwards?(U.sibling=v.child,v.child=U):((g=N.last)!==null?g.sibling=U:v.child=U,N.last=U)}return N.tail!==null?(v=N.tail,N.rendering=v,N.tail=v.sibling,N.renderingStartTime=ui(),v.sibling=null,g=Er.current,kn(Er,L?1&g|2:1&g),v):(as(v),null);case 22:case 23:return QC(),T=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==T&&(v.flags|=8192),T&&1&v.mode?1073741824&qs&&(as(v),ge&&6&v.subtreeFlags&&(v.flags|=8192)):as(v),null;case 24:case 25:return null}throw Error(s(156,v.tag))}function iJ(g,v){switch(iC(v),v.tag){case 1:return Ci(v.type)&&Td(),65536&(g=v.flags)?(v.flags=-65537&g|128,v):null;case 3:return Tf(),Gn(Jr),Gn(Fn),bC(),65536&(g=v.flags)&&!(128&g)?(v.flags=-65537&g|128,v):null;case 5:return vC(v),null;case 13:if(Gn(Er),(g=v.memoizedState)!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(s(340));bf()}return 65536&(g=v.flags)?(v.flags=-65537&g|128,v):null;case 19:return Gn(Er),null;case 4:return Tf(),null;case 10:return uC(v.type._context),null;case 22:case 23:return QC(),null;default:return null}}var o1=!1,Ui=!1,sJ=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Cf(g,v){var T=g.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(L){ur(g,v,L)}else T.current=null}function SB(g,v,T){try{T()}catch(L){ur(g,v,L)}}var CB=!1;function Cm(g,v,T){var L=v.updateQueue;if((L=L!==null?L.lastEffect:null)!==null){var N=L=L.next;do{if((N.tag&g)===g){var U=N.destroy;N.destroy=void 0,U!==void 0&&SB(v,T,U)}N=N.next}while(N!==L)}}function a1(g,v){if((v=(v=v.updateQueue)!==null?v.lastEffect:null)!==null){var T=v=v.next;do{if((T.tag&g)===g){var L=T.create;T.destroy=L()}T=T.next}while(T!==v)}}function DC(g){var v=g.ref;if(v!==null){var T=g.stateNode;g.tag===5?g=q(T):g=T,typeof v=="function"?v(g):v.current=g}}function AB(g){var v=g.alternate;v!==null&&(g.alternate=null,AB(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode)!==null&&K(v),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function PB(g){return g.tag===5||g.tag===3||g.tag===4}function RB(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||PB(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(2&g.flags||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(2&g.flags))return g.stateNode}}function BC(g,v,T){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?Pt(T,g,v):Ve(T,g);else if(L!==4&&(g=g.child)!==null)for(BC(g,v,T),g=g.sibling;g!==null;)BC(g,v,T),g=g.sibling}function FC(g,v,T){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?Ge(T,g,v):Fe(T,g);else if(L!==4&&(g=g.child)!==null)for(FC(g,v,T),g=g.sibling;g!==null;)FC(g,v,T),g=g.sibling}var ls=null,sl=!1;function ol(g,v,T){for(T=T.child;T!==null;)zC(g,v,T),T=T.sibling}function zC(g,v,T){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Fb,T)}catch{}switch(T.tag){case 5:Ui||Cf(T,v);case 6:if(ge){var L=ls,N=sl;ls=null,ol(g,v,T),sl=N,(ls=L)!==null&&(sl?Ze(ls,T.stateNode):Xe(ls,T.stateNode))}else ol(g,v,T);break;case 18:ge&&ls!==null&&(sl?Ht(ls,T.stateNode):ss(ls,T.stateNode));break;case 4:ge?(L=ls,N=sl,ls=T.stateNode.containerInfo,sl=!0,ol(g,v,T),ls=L,sl=N):(Me&&(L=T.stateNode.containerInfo,N=_e(L),it(L,N)),ol(g,v,T));break;case 0:case 11:case 14:case 15:if(!Ui&&(L=T.updateQueue)!==null&&(L=L.lastEffect)!==null){N=L=L.next;do{var U=N,te=U.destroy;U=U.tag,te!==void 0&&(2&U||4&U)&&SB(T,v,te),N=N.next}while(N!==L)}ol(g,v,T);break;case 1:if(!Ui&&(Cf(T,v),typeof(L=T.stateNode).componentWillUnmount=="function"))try{L.props=T.memoizedProps,L.state=T.memoizedState,L.componentWillUnmount()}catch(ce){ur(T,v,ce)}ol(g,v,T);break;case 21:ol(g,v,T);break;case 22:1&T.mode?(Ui=(L=Ui)||T.memoizedState!==null,ol(g,v,T),Ui=L):ol(g,v,T);break;default:ol(g,v,T)}}function IB(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var T=g.stateNode;T===null&&(T=g.stateNode=new sJ),v.forEach(function(L){var N=hJ.bind(null,g,L);T.has(L)||(T.add(L),L.then(N,N))})}}function ya(g,v){var T=v.deletions;if(T!==null)for(var L=0;L<T.length;L++){var N=T[L];try{var U=g,te=v;if(ge){var ce=te;e:for(;ce!==null;){switch(ce.tag){case 5:ls=ce.stateNode,sl=!1;break e;case 3:case 4:ls=ce.stateNode.containerInfo,sl=!0;break e}ce=ce.return}if(ls===null)throw Error(s(160));zC(U,te,N),ls=null,sl=!1}else zC(U,te,N);var xe=N.alternate;xe!==null&&(xe.return=null),N.return=null}catch(ke){ur(N,v,ke)}}if(12854&v.subtreeFlags)for(v=v.child;v!==null;)MB(v,g),v=v.sibling}function MB(g,v){var T=g.alternate,L=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(ya(v,g),al(g),4&L){try{Cm(3,g,g.return),a1(3,g)}catch(De){ur(g,g.return,De)}try{Cm(5,g,g.return)}catch(De){ur(g,g.return,De)}}break;case 1:ya(v,g),al(g),512&L&&T!==null&&Cf(T,T.return);break;case 5:if(ya(v,g),al(g),512&L&&T!==null&&Cf(T,T.return),ge){if(32&g.flags){var N=g.stateNode;try{Nt(N)}catch(De){ur(g,g.return,De)}}if(4&L&&(N=g.stateNode)!=null){var U=g.memoizedProps;if(T=T!==null?T.memoizedProps:U,L=g.type,v=g.updateQueue,g.updateQueue=null,v!==null)try{Ot(N,v,L,T,U,g)}catch(De){ur(g,g.return,De)}}}break;case 6:if(ya(v,g),al(g),4&L&&ge){if(g.stateNode===null)throw Error(s(162));N=g.stateNode,U=g.memoizedProps,T=T!==null?T.memoizedProps:U;try{Bt(N,T,U)}catch(De){ur(g,g.return,De)}}break;case 3:if(ya(v,g),al(g),4&L){if(ge&&Se&&T!==null&&T.memoizedState.isDehydrated)try{mr(v.containerInfo)}catch(De){ur(g,g.return,De)}if(Me){N=v.containerInfo,U=v.pendingChildren;try{it(N,U)}catch(De){ur(g,g.return,De)}}}break;case 4:if(ya(v,g),al(g),4&L&&Me){N=(U=g.stateNode).containerInfo,U=U.pendingChildren;try{it(N,U)}catch(De){ur(g,g.return,De)}}break;case 13:ya(v,g),al(g),8192&(N=g.child).flags&&(U=N.memoizedState!==null,N.stateNode.isHidden=U,!U||N.alternate!==null&&N.alternate.memoizedState!==null||(WC=ui())),4&L&&IB(g);break;case 22:var te=T!==null&&T.memoizedState!==null;if(1&g.mode?(Ui=(T=Ui)||te,ya(v,g),Ui=T):ya(v,g),al(g),8192&L){if(T=g.memoizedState!==null,(g.stateNode.isHidden=T)&&!te&&(1&g.mode)!=0)for(pt=g,L=g.child;L!==null;){for(v=pt=L;pt!==null;){var ce=(te=pt).child;switch(te.tag){case 0:case 11:case 14:case 15:Cm(4,te,te.return);break;case 1:Cf(te,te.return);var xe=te.stateNode;if(typeof xe.componentWillUnmount=="function"){var ke=te,Ue=te.return;try{var nt=ke;xe.props=nt.memoizedProps,xe.state=nt.memoizedState,xe.componentWillUnmount()}catch(De){ur(ke,Ue,De)}}break;case 5:Cf(te,te.return);break;case 22:if(te.memoizedState!==null){OB(v);continue}}ce!==null?(ce.return=te,pt=ce):OB(v)}L=L.sibling}if(ge){e:if(L=null,ge)for(v=g;;){if(v.tag===5){if(L===null){L=v;try{N=v.stateNode,T?zt(N):Dn(v.stateNode,v.memoizedProps)}catch(De){ur(g,g.return,De)}}}else if(v.tag===6){if(L===null)try{U=v.stateNode,T?pn(U):Wn(U,v.memoizedProps)}catch(De){ur(g,g.return,De)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===g)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break e;for(;v.sibling===null;){if(v.return===null||v.return===g)break e;L===v&&(L=null),v=v.return}L===v&&(L=null),v.sibling.return=v.return,v=v.sibling}}}break;case 19:ya(v,g),al(g),4&L&&IB(g);break;case 21:break;default:ya(v,g),al(g)}}function al(g){var v=g.flags;if(2&v){try{if(ge){e:{for(var T=g.return;T!==null;){if(PB(T)){var L=T;break e}T=T.return}throw Error(s(160))}switch(L.tag){case 5:var N=L.stateNode;32&L.flags&&(Nt(N),L.flags&=-33),FC(g,RB(g),N);break;case 3:case 4:var U=L.stateNode.containerInfo;BC(g,RB(g),U);break;default:throw Error(s(161))}}}catch(te){ur(g,g.return,te)}g.flags&=-3}4096&v&&(g.flags&=-4097)}function oJ(g,v,T){pt=g,LB(g)}function LB(g,v,T){for(var L=(1&g.mode)!=0;pt!==null;){var N=pt,U=N.child;if(N.tag===22&&L){var te=N.memoizedState!==null||o1;if(!te){var ce=N.alternate,xe=ce!==null&&ce.memoizedState!==null||Ui;ce=o1;var ke=Ui;if(o1=te,(Ui=xe)&&!ke)for(pt=N;pt!==null;)xe=(te=pt).child,te.tag===22&&te.memoizedState!==null?NB(N):xe!==null?(xe.return=te,pt=xe):NB(N);for(;U!==null;)pt=U,LB(U),U=U.sibling;pt=N,o1=ce,Ui=ke}kB(g)}else 8772&N.subtreeFlags&&U!==null?(U.return=N,pt=U):kB(g)}}function kB(g){for(;pt!==null;){var v=pt;if(8772&v.flags){var T=v.alternate;try{if(8772&v.flags)switch(v.tag){case 0:case 11:case 15:Ui||a1(5,v);break;case 1:var L=v.stateNode;if(4&v.flags&&!Ui)if(T===null)L.componentDidMount();else{var N=v.elementType===v.type?T.memoizedProps:va(v.type,T.memoizedProps);L.componentDidUpdate(N,T.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var U=v.updateQueue;U!==null&&MD(v,U,L);break;case 3:var te=v.updateQueue;if(te!==null){if(T=null,v.child!==null)switch(v.child.tag){case 5:T=q(v.child.stateNode);break;case 1:T=v.child.stateNode}MD(v,te,T)}break;case 5:var ce=v.stateNode;T===null&&4&v.flags&&yt(ce,v.type,v.memoizedProps,v);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Se&&v.memoizedState===null){var xe=v.alternate;if(xe!==null){var ke=xe.memoizedState;if(ke!==null){var Ue=ke.dehydrated;Ue!==null&&Vs(Ue)}}}break;default:throw Error(s(163))}Ui||512&v.flags&&DC(v)}catch(nt){ur(v,v.return,nt)}}if(v===g){pt=null;break}if((T=v.sibling)!==null){T.return=v.return,pt=T;break}pt=v.return}}function OB(g){for(;pt!==null;){var v=pt;if(v===g){pt=null;break}var T=v.sibling;if(T!==null){T.return=v.return,pt=T;break}pt=v.return}}function NB(g){for(;pt!==null;){var v=pt;try{switch(v.tag){case 0:case 11:case 15:var T=v.return;try{a1(4,v)}catch(xe){ur(v,T,xe)}break;case 1:var L=v.stateNode;if(typeof L.componentDidMount=="function"){var N=v.return;try{L.componentDidMount()}catch(xe){ur(v,N,xe)}}var U=v.return;try{DC(v)}catch(xe){ur(v,U,xe)}break;case 5:var te=v.return;try{DC(v)}catch(xe){ur(v,te,xe)}}}catch(xe){ur(v,v.return,xe)}if(v===g){pt=null;break}var ce=v.sibling;if(ce!==null){ce.return=v.return,pt=ce;break}pt=v.return}}var l1=0,c1=1,u1=2,d1=3,h1=4;if(typeof Symbol=="function"&&Symbol.for){var Am=Symbol.for;l1=Am("selector.component"),c1=Am("selector.has_pseudo_class"),u1=Am("selector.role"),d1=Am("selector.test_id"),h1=Am("selector.text")}function UC(g){var v=D(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(s(364));return v}if((g=me(g))===null)throw Error(s(362));return g.stateNode.current}function $C(g,v){switch(v.$$typeof){case l1:if(g.type===v.value)return!0;break;case c1:e:{v=v.value,g=[g,0];for(var T=0;T<g.length;){var L=g[T++],N=g[T++],U=v[N];if(L.tag!==5||!Oe(L)){for(;U!=null&&$C(L,U);)U=v[++N];if(N===v.length){v=!0;break e}for(L=L.child;L!==null;)g.push(L,N),L=L.sibling}}v=!1}return v;case u1:if(g.tag===5&&de(g.stateNode,v.value))return!0;break;case h1:if((g.tag===5||g.tag===6)&&(g=Pe(g))!==null&&0<=g.indexOf(v.value))return!0;break;case d1:if(g.tag===5&&typeof(g=g.memoizedProps["data-testname"])=="string"&&g.toLowerCase()===v.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function jC(g){switch(g.$$typeof){case l1:return"<"+(S(g.value)||"Unknown")+">";case c1:return":has("+(jC(g)||"")+")";case u1:return'[role="'+g.value+'"]';case h1:return'"'+g.value+'"';case d1:return'[data-testname="'+g.value+'"]';default:throw Error(s(365))}}function DB(g,v){var T=[];g=[g,0];for(var L=0;L<g.length;){var N=g[L++],U=g[L++],te=v[U];if(N.tag!==5||!Oe(N)){for(;te!=null&&$C(N,te);)te=v[++U];if(U===v.length)T.push(N);else for(N=N.child;N!==null;)g.push(N,U),N=N.sibling}}return T}function GC(g,v){if(!pe)throw Error(s(363));g=DB(g=UC(g),v),v=[],g=Array.from(g);for(var T=0;T<g.length;){var L=g[T++];if(L.tag===5)Oe(L)||v.push(L.stateNode);else for(L=L.child;L!==null;)g.push(L),L=L.sibling}return v}var aJ=Math.ceil,f1=o.ReactCurrentDispatcher,HC=o.ReactCurrentOwner,Nr=o.ReactCurrentBatchConfig,fn=0,fi=null,Gr=null,Ai=0,qs=0,Af=ci(0),ei=0,Pm=null,Id=0,p1=0,VC=0,Rm=null,Ks=null,WC=0,XC=1/0,qc=null;function Pf(){XC=ui()+500}var BB,g1=!1,YC=null,Kc=null,m1=!1,Zc=null,v1=0,Im=0,qC=null,y1=-1,b1=0;function $i(){return 6&fn?ui():y1!==-1?y1:y1=ui()}function Qc(g){return 1&g.mode?2&fn&&Ai!==0?Ai&-Ai:WQ.transition!==null?(b1===0&&(b1=ot()),b1):(g=Ut)!==0?g:ae():1}function Fo(g,v,T,L){if(50<Im)throw Im=0,qC=null,Error(s(185));lr(g,T,L),2&fn&&g===fi||(g===fi&&(!(2&fn)&&(p1|=T),ei===4&&Jc(g,Ai)),Ps(g,L),T===1&&fn===0&&!(1&v.mode)&&(Pf(),zb&&Ja()))}function Ps(g,v){var T=g.callbackNode;(function(N,U){for(var te=N.suspendedLanes,ce=N.pingedLanes,xe=N.expirationTimes,ke=N.pendingLanes;0<ke;){var Ue=31-os(ke),nt=1<<Ue,De=xe[Ue];De===-1?nt&te&&!(nt&ce)||(xe[Ue]=we(nt,U)):De<=U&&(N.expiredLanes|=nt),ke&=~nt}})(g,v);var L=re(g,g===fi?Ai:0);if(L===0)T!==null&&bD(T),g.callbackNode=null,g.callbackPriority=0;else if(v=L&-L,g.callbackPriority!==v){if(T!=null&&bD(T),v===1)g.tag===0?function(N){zb=!0,xD(N)}(zB.bind(null,g)):xD(zB.bind(null,g)),W?ne(function(){!(6&fn)&&Ja()}):eC(tC,Ja),T=null;else{switch(Xs(L)){case 1:T=tC;break;case 4:T=HQ;break;case 16:default:T=_D;break;case 536870912:T=VQ}T=XB(T,FB.bind(null,g))}g.callbackPriority=v,g.callbackNode=T}}function FB(g,v){if(y1=-1,b1=0,(6&fn)!=0)throw Error(s(327));var T=g.callbackNode;if(Ld()&&g.callbackNode!==T)return null;var L=re(g,g===fi?Ai:0);if(L===0)return null;if(30&L||L&g.expiredLanes||v)v=_1(g,L);else{v=L;var N=fn;fn|=2;var U=jB();for(fi===g&&Ai===v||(qc=null,Pf(),Md(g,v));;)try{cJ();break}catch(ce){$B(g,ce)}cC(),f1.current=U,fn=N,Gr!==null?v=0:(fi=null,Ai=0,v=ei)}if(v!==0){if(v===2&&(N=We(g))!==0&&(L=N,v=KC(g,N)),v===1)throw T=Pm,Md(g,0),Jc(g,L),Ps(g,ui()),T;if(v===6)Jc(g,L);else{if(N=g.current.alternate,(30&L)==0&&!function(ce){for(var xe=ce;;){if(16384&xe.flags){var ke=xe.updateQueue;if(ke!==null&&(ke=ke.stores)!==null)for(var Ue=0;Ue<ke.length;Ue++){var nt=ke[Ue],De=nt.getSnapshot;nt=nt.value;try{if(!ga(De(),nt))return!1}catch{return!1}}}if(ke=xe.child,16384&xe.subtreeFlags&&ke!==null)ke.return=xe,xe=ke;else{if(xe===ce)break;for(;xe.sibling===null;){if(xe.return===null||xe.return===ce)return!0;xe=xe.return}xe.sibling.return=xe.return,xe=xe.sibling}}return!0}(N)&&((v=_1(g,L))===2&&(U=We(g))!==0&&(L=U,v=KC(g,U)),v===1))throw T=Pm,Md(g,0),Jc(g,L),Ps(g,ui()),T;switch(g.finishedWork=N,g.finishedLanes=L,v){case 0:case 1:throw Error(s(345));case 2:case 5:Rf(g,Ks,qc);break;case 3:if(Jc(g,L),(130023424&L)===L&&10<(v=WC+500-ui())){if(re(g,0)!==0)break;if(((N=g.suspendedLanes)&L)!==L){$i(),g.pingedLanes|=g.suspendedLanes&N;break}g.timeoutHandle=Le(Rf.bind(null,g,Ks,qc),v);break}Rf(g,Ks,qc);break;case 4:if(Jc(g,L),(4194240&L)===L)break;for(v=g.eventTimes,N=-1;0<L;){var te=31-os(L);U=1<<te,(te=v[te])>N&&(N=te),L&=~U}if(L=N,10<(L=(120>(L=ui()-L)?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*aJ(L/1960))-L)){g.timeoutHandle=Le(Rf.bind(null,g,Ks,qc),L);break}Rf(g,Ks,qc);break;default:throw Error(s(329))}}}return Ps(g,ui()),g.callbackNode===T?FB.bind(null,g):null}function KC(g,v){var T=Rm;return g.current.memoizedState.isDehydrated&&(Md(g,v).flags|=256),(g=_1(g,v))!==2&&(v=Ks,Ks=T,v!==null&&ZC(v)),g}function ZC(g){Ks===null?Ks=g:Ks.push.apply(Ks,g)}function Jc(g,v){for(v&=~VC,v&=~p1,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var T=31-os(v),L=1<<T;g[T]=-1,v&=~L}}function zB(g){if(6&fn)throw Error(s(327));Ld();var v=re(g,0);if(!(1&v))return Ps(g,ui()),null;var T=_1(g,v);if(g.tag!==0&&T===2){var L=We(g);L!==0&&(v=L,T=KC(g,L))}if(T===1)throw T=Pm,Md(g,0),Jc(g,v),Ps(g,ui()),T;if(T===6)throw Error(s(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,Rf(g,Ks,qc),Ps(g,ui()),null}function UB(g){Zc!==null&&Zc.tag===0&&!(6&fn)&&Ld();var v=fn;fn|=1;var T=Nr.transition,L=Ut;try{if(Nr.transition=null,Ut=1,g)return g()}finally{Ut=L,Nr.transition=T,!(6&(fn=v))&&Ja()}}function QC(){qs=Af.current,Gn(Af)}function Md(g,v){g.finishedWork=null,g.finishedLanes=0;var T=g.timeoutHandle;if(T!==ue&&(g.timeoutHandle=ue,se(T)),Gr!==null)for(T=Gr.return;T!==null;){var L=T;switch(iC(L),L.tag){case 1:(L=L.type.childContextTypes)!=null&&Td();break;case 3:Tf(),Gn(Jr),Gn(Fn),bC();break;case 5:vC(L);break;case 4:Tf();break;case 13:case 19:Gn(Er);break;case 10:uC(L.type._context);break;case 22:case 23:QC()}T=T.return}if(fi=g,Gr=g=eu(g.current,null),Ai=qs=v,ei=0,Pm=null,VC=p1=Id=0,Ks=Rm=null,Pd!==null){for(v=0;v<Pd.length;v++)if((L=(T=Pd[v]).interleaved)!==null){T.interleaved=null;var N=L.next,U=T.pending;if(U!==null){var te=U.next;U.next=N,L.next=te}T.pending=L}Pd=null}return g}function $B(g,v){for(;;){var T=Gr;try{if(cC(),Zb.current=t1,Qb){for(var L=yr.memoizedState;L!==null;){var N=L.queue;N!==null&&(N.pending=null),L=L.next}Qb=!1}if(Rd=0,hi=di=yr=null,bm=!1,_m=0,HC.current=null,T===null||T.return===null){ei=1,Pm=v,Gr=null;break}e:{var U=g,te=T.return,ce=T,xe=v;if(v=Ai,ce.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var ke=xe,Ue=ce,nt=Ue.tag;if(!(1&Ue.mode)&&(nt===0||nt===11||nt===15)){var De=Ue.alternate;De?(Ue.updateQueue=De.updateQueue,Ue.memoizedState=De.memoizedState,Ue.lanes=De.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var Je=uB(te);if(Je!==null){Je.flags&=-257,dB(Je,te,ce,0,v),1&Je.mode&&cB(U,ke,v),xe=ke;var _t=(v=Je).updateQueue;if(_t===null){var en=new Set;en.add(xe),v.updateQueue=en}else _t.add(xe);break e}if(!(1&v)){cB(U,ke,v),JC();break e}xe=Error(s(426))}else if(cr&&1&ce.mode){var $e=uB(te);if($e!==null){!(65536&$e.flags)&&($e.flags|=256),dB($e,te,ce,0,v),aC(Sf(xe,ce));break e}}U=xe=Sf(xe,ce),ei!==4&&(ei=2),Rm===null?Rm=[U]:Rm.push(U),U=te;do{switch(U.tag){case 3:U.flags|=65536,v&=-v,U.lanes|=v,ID(U,aB(0,xe,v));break e;case 1:ce=xe;var ye=U.type,Ie=U.stateNode;if(!(128&U.flags)&&(typeof ye.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(Kc===null||!Kc.has(Ie)))){U.flags|=65536,v&=-v,U.lanes|=v,ID(U,lB(U,ce,v));break e}}U=U.return}while(U!==null)}HB(T)}catch(qe){v=qe,Gr===T&&T!==null&&(Gr=T=T.return);continue}break}}function jB(){var g=f1.current;return f1.current=t1,g===null?t1:g}function JC(){ei!==0&&ei!==3&&ei!==2||(ei=4),fi===null||!(268435455&Id)&&!(268435455&p1)||Jc(fi,Ai)}function _1(g,v){var T=fn;fn|=2;var L=jB();for(fi===g&&Ai===v||(qc=null,Md(g,v));;)try{lJ();break}catch(N){$B(g,N)}if(cC(),fn=T,f1.current=L,Gr!==null)throw Error(s(261));return fi=null,Ai=0,ei}function lJ(){for(;Gr!==null;)GB(Gr)}function cJ(){for(;Gr!==null&&!jQ();)GB(Gr)}function GB(g){var v=BB(g.alternate,g,qs);g.memoizedProps=g.pendingProps,v===null?HB(g):Gr=v,HC.current=null}function HB(g){var v=g;do{var T=v.alternate;if(g=v.return,(32768&v.flags)==0){if((T=rJ(T,v,qs))!==null)return void(Gr=T)}else{if((T=iJ(T,v))!==null)return T.flags&=32767,void(Gr=T);if(g===null)return ei=6,void(Gr=null);g.flags|=32768,g.subtreeFlags=0,g.deletions=null}if((v=v.sibling)!==null)return void(Gr=v);Gr=v=g}while(v!==null);ei===0&&(ei=5)}function Rf(g,v,T){var L=Ut,N=Nr.transition;try{Nr.transition=null,Ut=1,function(U,te,ce,xe){do Ld();while(Zc!==null);if(6&fn)throw Error(s(327));ce=U.finishedWork;var ke=U.finishedLanes;if(ce===null)return null;if(U.finishedWork=null,U.finishedLanes=0,ce===U.current)throw Error(s(177));U.callbackNode=null,U.callbackPriority=0;var Ue=ce.lanes|ce.childLanes;if(function(Je,_t){var en=Je.pendingLanes&~_t;Je.pendingLanes=_t,Je.suspendedLanes=0,Je.pingedLanes=0,Je.expiredLanes&=_t,Je.mutableReadLanes&=_t,Je.entangledLanes&=_t,_t=Je.entanglements;var $e=Je.eventTimes;for(Je=Je.expirationTimes;0<en;){var ye=31-os(en),Ie=1<<ye;_t[ye]=0,$e[ye]=-1,Je[ye]=-1,en&=~Ie}}(U,Ue),U===fi&&(Gr=fi=null,Ai=0),!(2064&ce.subtreeFlags)&&!(2064&ce.flags)||m1||(m1=!0,XB(_D,function(){return Ld(),null})),Ue=(15990&ce.flags)!=0,(15990&ce.subtreeFlags)!=0||Ue){Ue=Nr.transition,Nr.transition=null;var nt=Ut;Ut=1;var De=fn;fn|=4,HC.current=null,function(Je,_t){for(H(Je.containerInfo),pt=_t;pt!==null;)if(_t=(Je=pt).child,(1028&Je.subtreeFlags)!=0&&_t!==null)_t.return=Je,pt=_t;else for(;pt!==null;){Je=pt;try{var en=Je.alternate;if(1024&Je.flags)switch(Je.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(en!==null){var $e=en.memoizedProps,ye=en.memoizedState,Ie=Je.stateNode,qe=Ie.getSnapshotBeforeUpdate(Je.elementType===Je.type?$e:va(Je.type,$e),ye);Ie.__reactInternalSnapshotBeforeUpdate=qe}break;case 3:ge&&Jn(Je.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Rt){ur(Je,Je.return,Rt)}if((_t=Je.sibling)!==null){_t.return=Je.return,pt=_t;break}pt=Je.return}en=CB,CB=!1}(U,ce),MB(ce,U),Z(U.containerInfo),U.current=ce,oJ(ce),GQ(),fn=De,Ut=nt,Nr.transition=Ue}else U.current=ce;if(m1&&(m1=!1,Zc=U,v1=ke),Ue=U.pendingLanes,Ue===0&&(Kc=null),function(Je){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Fb,Je,void 0,(128&Je.current.flags)==128)}catch{}}(ce.stateNode),Ps(U,ui()),te!==null)for(xe=U.onRecoverableError,ce=0;ce<te.length;ce++)ke=te[ce],xe(ke.value,{componentStack:ke.stack,digest:ke.digest});if(g1)throw g1=!1,U=YC,YC=null,U;1&v1&&U.tag!==0&&Ld(),Ue=U.pendingLanes,1&Ue?U===qC?Im++:(Im=0,qC=U):Im=0,Ja()}(g,v,T,L)}finally{Nr.transition=N,Ut=L}return null}function Ld(){if(Zc!==null){var g=Xs(v1),v=Nr.transition,T=Ut;try{if(Nr.transition=null,Ut=16>g?16:g,Zc===null)var L=!1;else{if(g=Zc,Zc=null,v1=0,(6&fn)!=0)throw Error(s(331));var N=fn;for(fn|=4,pt=g.current;pt!==null;){var U=pt,te=U.child;if(16&pt.flags){var ce=U.deletions;if(ce!==null){for(var xe=0;xe<ce.length;xe++){var ke=ce[xe];for(pt=ke;pt!==null;){var Ue=pt;switch(Ue.tag){case 0:case 11:case 15:Cm(8,Ue,U)}var nt=Ue.child;if(nt!==null)nt.return=Ue,pt=nt;else for(;pt!==null;){var De=(Ue=pt).sibling,Je=Ue.return;if(AB(Ue),Ue===ke){pt=null;break}if(De!==null){De.return=Je,pt=De;break}pt=Je}}}var _t=U.alternate;if(_t!==null){var en=_t.child;if(en!==null){_t.child=null;do{var $e=en.sibling;en.sibling=null,en=$e}while(en!==null)}}pt=U}}if(2064&U.subtreeFlags&&te!==null)te.return=U,pt=te;else e:for(;pt!==null;){if(2048&(U=pt).flags)switch(U.tag){case 0:case 11:case 15:Cm(9,U,U.return)}var ye=U.sibling;if(ye!==null){ye.return=U.return,pt=ye;break e}pt=U.return}}var Ie=g.current;for(pt=Ie;pt!==null;){var qe=(te=pt).child;if(2064&te.subtreeFlags&&qe!==null)qe.return=te,pt=qe;else e:for(te=Ie;pt!==null;){if(2048&(ce=pt).flags)try{switch(ce.tag){case 0:case 11:case 15:a1(9,ce)}}catch(Mn){ur(ce,ce.return,Mn)}if(ce===te){pt=null;break e}var Rt=ce.sibling;if(Rt!==null){Rt.return=ce.return,pt=Rt;break e}pt=ce.return}}if(fn=N,Ja(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Fb,g)}catch{}L=!0}return L}finally{Ut=T,Nr.transition=v}}return!1}function VB(g,v,T){g=Yc(g,v=aB(0,v=Sf(T,v),1),1),v=$i(),g!==null&&(lr(g,1,v),Ps(g,v))}function ur(g,v,T){if(g.tag===3)VB(g,g,T);else for(;v!==null;){if(v.tag===3){VB(v,g,T);break}if(v.tag===1){var L=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Kc===null||!Kc.has(L))){v=Yc(v,g=lB(v,g=Sf(T,g),1),1),g=$i(),v!==null&&(lr(v,1,g),Ps(v,g));break}}v=v.return}}function uJ(g,v,T){var L=g.pingCache;L!==null&&L.delete(v),v=$i(),g.pingedLanes|=g.suspendedLanes&T,fi===g&&(Ai&T)===T&&(ei===4||ei===3&&(130023424&Ai)===Ai&&500>ui()-WC?Md(g,0):VC|=T),Ps(g,v)}function WB(g,v){v===0&&(1&g.mode?(v=Y,!(130023424&(Y<<=1))&&(Y=4194304)):v=1);var T=$i();(g=tl(g,v))!==null&&(lr(g,v,T),Ps(g,T))}function dJ(g){var v=g.memoizedState,T=0;v!==null&&(T=v.retryLane),WB(g,T)}function hJ(g,v){var T=0;switch(g.tag){case 13:var L=g.stateNode,N=g.memoizedState;N!==null&&(T=N.retryLane);break;case 19:L=g.stateNode;break;default:throw Error(s(314))}L!==null&&L.delete(v),WB(g,T)}function XB(g,v){return eC(g,v)}function fJ(g,v,T,L){this.tag=g,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zo(g,v,T,L){return new fJ(g,v,T,L)}function eA(g){return!(!(g=g.prototype)||!g.isReactComponent)}function eu(g,v){var T=g.alternate;return T===null?((T=zo(g.tag,v,g.key,g.mode)).elementType=g.elementType,T.type=g.type,T.stateNode=g.stateNode,T.alternate=g,g.alternate=T):(T.pendingProps=v,T.type=g.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=14680064&g.flags,T.childLanes=g.childLanes,T.lanes=g.lanes,T.child=g.child,T.memoizedProps=g.memoizedProps,T.memoizedState=g.memoizedState,T.updateQueue=g.updateQueue,v=g.dependencies,T.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},T.sibling=g.sibling,T.index=g.index,T.ref=g.ref,T}function x1(g,v,T,L,N,U){var te=2;if(L=g,typeof g=="function")eA(g)&&(te=1);else if(typeof g=="string")te=5;else e:switch(g){case c:return kd(T.children,N,U,v);case u:te=8,N|=8;break;case d:return(g=zo(12,T,v,2|N)).elementType=d,g.lanes=U,g;case m:return(g=zo(13,T,v,N)).elementType=m,g.lanes=U,g;case b:return(g=zo(19,T,v,N)).elementType=b,g.lanes=U,g;case _:return w1(T,N,U,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case h:te=10;break e;case f:te=9;break e;case p:te=11;break e;case y:te=14;break e;case x:te=16,L=null;break e}throw Error(s(130,g==null?g:typeof g,""))}return(v=zo(te,T,v,N)).elementType=g,v.type=L,v.lanes=U,v}function kd(g,v,T,L){return(g=zo(7,g,L,v)).lanes=T,g}function w1(g,v,T,L){return(g=zo(22,g,L,v)).elementType=_,g.lanes=T,g.stateNode={isHidden:!1},g}function tA(g,v,T){return(g=zo(6,g,null,v)).lanes=T,g}function nA(g,v,T){return(v=zo(4,g.children!==null?g.children:[],g.key,v)).lanes=T,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function pJ(g,v,T,L,N){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qt(0),this.expirationTimes=Qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.identifierPrefix=L,this.onRecoverableError=N,Se&&(this.mutableSourceEagerHydrationData=null)}function YB(g,v,T,L,N,U,te,ce,xe){return g=new pJ(g,v,T,ce,xe),v===1?(v=1,U===!0&&(v|=8)):v=0,U=zo(3,null,null,v),g.current=U,U.stateNode=g,U.memoizedState={element:L,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},fC(U),g}function qB(g){if(!g)return Ws;e:{if(k(g=g._reactInternals)!==g||g.tag!==1)throw Error(s(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(Ci(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(s(171))}if(g.tag===1){var T=g.type;if(Ci(T))return Mo(g,T,v)}return v}function KB(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(s(188)):(g=Object.keys(g).join(","),Error(s(268,g)));return(g=B(v))===null?null:g.stateNode}function ZB(g,v){if((g=g.memoizedState)!==null&&g.dehydrated!==null){var T=g.retryLane;g.retryLane=T!==0&&T<v?T:v}}function E1(g,v){ZB(g,v),(g=g.alternate)&&ZB(g,v)}function gJ(g){return(g=B(g))===null?null:g.stateNode}function mJ(){return null}return BB=function(g,v,T){if(g!==null)if(g.memoizedProps!==v.pendingProps||Jr.current)Cs=!0;else{if(!(g.lanes&T)&&!(128&v.flags))return Cs=!1,function(nt,De,Je){switch(De.tag){case 3:yB(De),bf();break;case 5:zD(De);break;case 1:Ci(De.type)&&mf(De);break;case 4:mC(De,De.stateNode.containerInfo);break;case 10:AD(0,De.type._context,De.memoizedProps.value);break;case 13:var _t=De.memoizedState;if(_t!==null)return _t.dehydrated!==null?(kn(Er,1&Er.current),De.flags|=128,null):Je&De.child.childLanes?_B(nt,De,Je):(kn(Er,1&Er.current),(nt=Ql(nt,De,Je))!==null?nt.sibling:null);kn(Er,1&Er.current);break;case 19:if(_t=(Je&De.childLanes)!=0,(128&nt.flags)!=0){if(_t)return wB(nt,De,Je);De.flags|=128}var en=De.memoizedState;if(en!==null&&(en.rendering=null,en.tail=null,en.lastEffect=null),kn(Er,Er.current),_t)break;return null;case 22:case 23:return De.lanes=0,gB(nt,De,Je)}return Ql(nt,De,Je)}(g,v,T);Cs=(131072&g.flags)!=0}else Cs=!1,cr&&1048576&v.flags&&wD(v,$b,v.index);switch(v.lanes=0,v.tag){case 2:var L=v.type;s1(g,v),g=v.pendingProps;var N=Za(v,Fn.current);xf(v,T),N=wC(null,v,L,g,N,T);var U=EC();return v.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,Ci(L)?(U=!0,mf(v)):U=!1,v.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,fC(v),N.updater=Yb,v.stateNode=N,N._reactInternals=v,gC(v,L,g,T),v=MC(null,v,L,!0,U,T)):(v.tag=0,cr&&U&&rC(v),As(null,v,N,T),v=v.child),v;case 16:L=v.elementType;e:{switch(s1(g,v),g=v.pendingProps,L=(N=L._init)(L._payload),v.type=L,N=v.tag=function(nt){if(typeof nt=="function")return eA(nt)?1:0;if(nt!=null){if((nt=nt.$$typeof)===p)return 11;if(nt===y)return 14}return 2}(L),g=va(L,g),N){case 0:v=IC(null,v,L,g,T);break e;case 1:v=vB(null,v,L,g,T);break e;case 11:v=hB(null,v,L,g,T);break e;case 14:v=fB(null,v,L,va(L.type,g),T);break e}throw Error(s(306,L,""))}return v;case 0:return L=v.type,N=v.pendingProps,IC(g,v,L,N=v.elementType===L?N:va(L,N),T);case 1:return L=v.type,N=v.pendingProps,vB(g,v,L,N=v.elementType===L?N:va(L,N),T);case 3:e:{if(yB(v),g===null)throw Error(s(387));L=v.pendingProps,N=(U=v.memoizedState).element,RD(g,v),Xb(v,L,null,T);var te=v.memoizedState;if(L=te.element,Se&&U.isDehydrated){if(U={element:L,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},v.updateQueue.baseState=U,v.memoizedState=U,256&v.flags){v=bB(g,v,L,T,N=Sf(Error(s(423)),v));break e}if(L!==N){v=bB(g,v,L,T,N=Sf(Error(s(424)),v));break e}for(Se&&(Oo=Qr(v.stateNode.containerInfo),Ys=v,cr=!0,ma=null,gm=!1),T=FD(v,null,L,T),v.child=T;T;)T.flags=-3&T.flags|4096,T=T.sibling}else{if(bf(),L===N){v=Ql(g,v,T);break e}As(g,v,L,T)}v=v.child}return v;case 5:return zD(v),g===null&&oC(v),L=v.type,N=v.pendingProps,U=g!==null?g.memoizedProps:null,te=N.children,fe(L,N)?te=null:U!==null&&fe(L,U)&&(v.flags|=32),mB(g,v),As(g,v,te,T),v.child;case 6:return g===null&&oC(v),null;case 13:return _B(g,v,T);case 4:return mC(v,v.stateNode.containerInfo),L=v.pendingProps,g===null?v.child=wf(v,null,L,T):As(g,v,L,T),v.child;case 11:return L=v.type,N=v.pendingProps,hB(g,v,L,N=v.elementType===L?N:va(L,N),T);case 7:return As(g,v,v.pendingProps,T),v.child;case 8:case 12:return As(g,v,v.pendingProps.children,T),v.child;case 10:e:{if(L=v.type._context,N=v.pendingProps,U=v.memoizedProps,AD(0,L,te=N.value),U!==null)if(ga(U.value,te)){if(U.children===N.children&&!Jr.current){v=Ql(g,v,T);break e}}else for((U=v.child)!==null&&(U.return=v);U!==null;){var ce=U.dependencies;if(ce!==null){te=U.child;for(var xe=ce.firstContext;xe!==null;){if(xe.context===L){if(U.tag===1){(xe=Zl(-1,T&-T)).tag=2;var ke=U.updateQueue;if(ke!==null){var Ue=(ke=ke.shared).pending;Ue===null?xe.next=xe:(xe.next=Ue.next,Ue.next=xe),ke.pending=xe}}U.lanes|=T,(xe=U.alternate)!==null&&(xe.lanes|=T),dC(U.return,T,v),ce.lanes|=T;break}xe=xe.next}}else if(U.tag===10)te=U.type===v.type?null:U.child;else if(U.tag===18){if((te=U.return)===null)throw Error(s(341));te.lanes|=T,(ce=te.alternate)!==null&&(ce.lanes|=T),dC(te,T,v),te=U.sibling}else te=U.child;if(te!==null)te.return=U;else for(te=U;te!==null;){if(te===v){te=null;break}if((U=te.sibling)!==null){U.return=te.return,te=U;break}te=te.return}U=te}As(g,v,N.children,T),v=v.child}return v;case 9:return N=v.type,L=v.pendingProps.children,xf(v,T),L=L(N=No(N)),v.flags|=1,As(g,v,L,T),v.child;case 14:return N=va(L=v.type,v.pendingProps),fB(g,v,L,N=va(L.type,N),T);case 15:return pB(g,v,v.type,v.pendingProps,T);case 17:return L=v.type,N=v.pendingProps,N=v.elementType===L?N:va(L,N),s1(g,v),v.tag=1,Ci(L)?(g=!0,mf(v)):g=!1,xf(v,T),OD(v,L,N),gC(v,L,N,T),MC(null,v,L,!0,g,T);case 19:return wB(g,v,T);case 22:return gB(g,v,T)}throw Error(s(156,v.tag))},e.attemptContinuousHydration=function(g){if(g.tag===13){var v=tl(g,134217728);v!==null&&Fo(v,g,134217728,$i()),E1(g,134217728)}},e.attemptDiscreteHydration=function(g){if(g.tag===13){var v=tl(g,1);v!==null&&Fo(v,g,1,$i()),E1(g,1)}},e.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=Qc(g),T=tl(g,v);T!==null&&Fo(T,g,v,$i()),E1(g,v)}},e.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var T=Q(v.pendingLanes);T!==0&&(Or(v,1|T),Ps(v,ui()),!(6&fn)&&(Pf(),Ja()))}break;case 13:UB(function(){var L=tl(g,1);if(L!==null){var N=$i();Fo(L,g,1,N)}}),E1(g,1)}},e.batchedUpdates=function(g,v){var T=fn;fn|=1;try{return g(v)}finally{(fn=T)===0&&(Pf(),zb&&Ja())}},e.createComponentSelector=function(g){return{$$typeof:l1,value:g}},e.createContainer=function(g,v,T,L,N,U,te){return YB(g,v,!1,null,0,L,0,U,te)},e.createHasPseudoClassSelector=function(g){return{$$typeof:c1,value:g}},e.createHydrationContainer=function(g,v,T,L,N,U,te,ce,xe){return(g=YB(T,L,!0,g,0,U,0,ce,xe)).context=qB(null),T=g.current,(U=Zl(L=$i(),N=Qc(T))).callback=v??null,Yc(T,U,N),g.current.lanes=N,lr(g,N,L),Ps(g,L),g},e.createPortal=function(g,v,T){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:L==null?null:""+L,children:g,containerInfo:v,implementation:T}},e.createRoleSelector=function(g){return{$$typeof:u1,value:g}},e.createTestNameSelector=function(g){return{$$typeof:d1,value:g}},e.createTextSelector=function(g){return{$$typeof:h1,value:g}},e.deferredUpdates=function(g){var v=Ut,T=Nr.transition;try{return Nr.transition=null,Ut=16,g()}finally{Ut=v,Nr.transition=T}},e.discreteUpdates=function(g,v,T,L,N){var U=Ut,te=Nr.transition;try{return Nr.transition=null,Ut=1,g(v,T,L,N)}finally{Ut=U,Nr.transition=te,fn===0&&Pf()}},e.findAllNodes=GC,e.findBoundingRects=function(g,v){if(!pe)throw Error(s(363));v=GC(g,v),g=[];for(var T=0;T<v.length;T++)g.push(he(v[T]));for(v=g.length-1;0<v;v--)for(var L=(T=g[v]).x,N=L+T.width,U=T.y,te=U+T.height,ce=v-1;0<=ce;ce--)if(v!==ce){var xe=g[ce],ke=xe.x,Ue=ke+xe.width,nt=xe.y,De=nt+xe.height;if(L>=ke&&U>=nt&&N<=Ue&&te<=De){g.splice(v,1);break}if(!(L!==ke||T.width!==xe.width||De<U||nt>te)){nt>U&&(xe.height+=nt-U,xe.y=U),De<te&&(xe.height=te-nt),g.splice(v,1);break}if(!(U!==nt||T.height!==xe.height||Ue<L||ke>N)){ke>L&&(xe.width+=ke-L,xe.x=L),Ue<N&&(xe.width=N-ke),g.splice(v,1);break}}return g},e.findHostInstance=KB,e.findHostInstanceWithNoPortals=function(g){return(g=(g=I(g))!==null?O(g):null)===null?null:g.stateNode},e.findHostInstanceWithWarning=function(g){return KB(g)},e.flushControlled=function(g){var v=fn;fn|=1;var T=Nr.transition,L=Ut;try{Nr.transition=null,Ut=1,g()}finally{Ut=L,Nr.transition=T,(fn=v)===0&&(Pf(),Ja())}},e.flushPassiveEffects=Ld,e.flushSync=UB,e.focusWithin=function(g,v){if(!pe)throw Error(s(363));for(v=DB(g=UC(g),v),v=Array.from(v),g=0;g<v.length;){var T=v[g++];if(!Oe(T)){if(T.tag===5&&Ce(T.stateNode))return!0;for(T=T.child;T!==null;)v.push(T),T=T.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ut},e.getFindAllNodesFailureDescription=function(g,v){if(!pe)throw Error(s(363));var T=0,L=[];g=[UC(g),0];for(var N=0;N<g.length;){var U=g[N++],te=g[N++],ce=v[te];if((U.tag!==5||!Oe(U))&&($C(U,ce)&&(L.push(jC(ce)),++te>T&&(T=te)),te<v.length))for(U=U.child;U!==null;)g.push(U,te),U=U.sibling}if(T<v.length){for(g=[];T<v.length;T++)g.push(jC(v[T]));return`findAllNodes was able to match part of the selector:
  `+L.join(" > ")+`

No matching component was found for:
  `+g.join(" > ")}return null},e.getPublicRootInstance=function(g){return(g=g.current).child?g.child.tag===5?q(g.child.stateNode):g.child.stateNode:null},e.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:gJ,findFiberByHostInstance:g.findFiberByHostInstance||mJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{Fb=v.inject(g),Qa=v}catch{}g=!!v.checkDCE}}return g},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(g,v,T,L){if(!pe)throw Error(s(363));g=GC(g,v);var N=Ye(g,T,L).disconnect;return{disconnect:function(){N()}}},e.registerMutableSourceForHydration=function(g,v){var T=v._getVersion;T=T(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,T]:g.mutableSourceEagerHydrationData.push(v,T)},e.runWithPriority=function(g,v){var T=Ut;try{return Ut=g,v()}finally{Ut=T}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(g,v,T,L){var N=v.current,U=$i(),te=Qc(N);return T=qB(T),v.context===null?v.context=T:v.pendingContext=T,(v=Zl(U,te)).payload={element:g},(L=L===void 0?null:L)!==null&&(v.callback=L),(g=Yc(N,v,te))!==null&&(Fo(g,N,te,U),Wb(g,N,te)),te},e}),l$}({get exports(){return ZM},set exports(t){ZM=t}}).exports=fLe();var pLe=UMe(ZM),Kq={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},JM={},H_={get exports(){return JM},set exports(t){JM=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?H_.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(H_.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(H_.exports=function(){return Date.now()-n},n=Date.now()):(H_.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(zMe);var d$,kp={},jd={};({get exports(){return kp},set exports(t){kp=t}}).exports=(d$||(d$=1,jd.ConcurrentRoot=1,jd.ContinuousEventPriority=4,jd.DefaultEventPriority=16,jd.DiscreteEventPriority=1,jd.IdleEventPriority=536870912,jd.LegacyRoot=0),jd);var gLe={};function h2(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function Zq(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&kc(t.children).forEach(function(s){Zq(s,t)})}function h$(t,e){var n;Zq(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,l=r.destroyTexture,c=l!==void 0&&l,u=r.destroyBaseTexture,d=u!==void 0&&u;s&&e.destroy({children:a,texture:c,baseTexture:d})}function f$(t,e,n){Mr(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var p$=null,Na=pLe({getRootHostContext:function(){return gLe},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return kp.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return kp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return kp.ContinuousEventPriority;default:return kp.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=cLe[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=qq[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:Ul)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return p$=function(o,a,l,c){var u=null;for(var d in l)!c.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!==null&&(d===qM||(u||(u=[]),u.push(d,null)));for(var h in c){var f=c[h],p=l!==null?l[h]:void 0;!c.hasOwnProperty(h)||f===p||f===null&&p===null||h===qM||(u||(u=[]),u.push(h,f))}return u}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){Mr(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:JM,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=h2.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=h2.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=h2.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=h$.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=h$.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:f$,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=f$.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=Ul),(a(t,r,i)||p$)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),mLe=Kq.dependencies["react-dom"].replace(/[^0-9.]/g,""),vLe=Kq.name;Na.injectIntoDevTools({bundleType:0,version:mLe,rendererPackageName:vLe,findHostInstanceByFiber:Na.findHostInstance});var Zu=new Map;function Qq(t){if(Mr(Fi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),Zu.has(t)){var e=Zu.get(t).pixiFiberContainer;Na.updateContainer(null,e,void 0,function(){Zu.delete(t)})}}function Jq(t){Mr(Fi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=Zu.get(t);if(Mr(!e,"Pixi React: createRoot should only be called once"),!e){var n=Na.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return Na.updateContainer(r,n,void 0),Na.getPublicRootInstance(n)},unmount:function(){Qq(t),Zu.delete(t)}}},Zu.set(t,e)}return e.reactRoot}function yLe(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Zu.has(e)?r=Zu.get(e).reactRoot:r=Jq(e),r.render(t)}function bLe(t){Qq(t)}function My(){return My=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},My.apply(this,arguments)}function _Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wq(r.key),r)}}function rc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CE(t,e){return CE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CE(t,e)}function wLe(t,e){if(e&&(yo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rc(t)}function AE(t){return AE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AE(t)}var GS=Rn.createContext(null),eK=GS.Provider,tK=GS.Consumer,ELe=function(t){var e=Rn.forwardRef(function(n,r){return Rn.createElement(tK,null,function(i){return Rn.createElement(t,My({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function TLe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=AE(t);if(e){var i=AE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wLe(this,n)}}function g$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(n),!0).forEach(function(r){Br(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var m$=function(){},nK={width:nr.number,height:nr.number,onMount:nr.func,onUnmount:nr.func,raf:nr.bool,renderOnComponentChange:nr.bool,children:nr.node,options:nr.shape({autoStart:nr.bool,width:nr.number,height:nr.number,useContextAlpha:nr.bool,backgroundAlpha:nr.number,autoDensity:nr.bool,antialias:nr.bool,preserveDrawingBuffer:nr.bool,resolution:nr.number,forceCanvas:nr.bool,backgroundColor:nr.number,clearBeforeRender:nr.bool,powerPreference:nr.string,sharedTicker:nr.bool,sharedLoader:nr.bool,resizeTo:function(t,e){var n=t[e];n&&Mr(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(yo(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&Mr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(yo(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},SLe={width:800,height:600,onMount:m$,onUnmount:m$,raf:!0,renderOnComponentChange:!0},eL=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&CE(s,o)})(i,Rn.Component);var e,n,r=TLe(i);function i(){var s;_Le(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Br(rc(s=r.call.apply(r,[this].concat(a))),"_canvas",null),Br(rc(s),"_mediaQuery",null),Br(rc(s),"_ticker",null),Br(rc(s),"_needsUpdate",!0),Br(rc(s),"app",null),Br(rc(s),"updateSize",function(){var c=s.props,u=c.width,d=c.height,h=c.options;h!=null&&h.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(u,d)}),Br(rc(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Br(rc(s),"renderStage",function(){var c=s.props,u=c.renderOnComponentChange;!c.raf&&u&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,c=s.options,u=s.raf,d=s.renderOnComponentChange;this.app=new Sb(V_(V_({width:a,height:l,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[u?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Na.createContainer(this.app.stage),Na.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),d&&!u&&(this._ticker=new qr,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,c=this.props,u=c.width,d=c.height,h=c.raf,f=c.renderOnComponentChange,p=c.options;(p==null?void 0:p.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(p==null?void 0:p.resolution)&&(this.app.renderer.resolution=p.resolution,this.resetInteractionManager()),s.height===d&&s.width===u&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(p==null?void 0:p.resolution)||this.updateSize(),s.raf!==h&&this.app.ticker[h?"start":"stop"](),Na.updateContainer(this.getChildren(),this.mountNode,this),s.width===u&&s.height===d&&s.raf===h&&s.renderOnComponentChange===f&&s.options===p||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return Rn.createElement(eK,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Na.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(Mr(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Rn.createElement("canvas",My({},(s=this.props,o=[].concat(kc(Object.keys(nK)),kc(Object.keys(KM))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,u){return V_(V_({},c),{},Br({},u,s[u]))},{})),{ref:function(c){return a._canvas=c}}))}}])&&xLe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();eL.propTypes=nK,eL.defaultProps=SLe;var CLe=eL;function rK(){var t=P.useContext(GS);return Mr(t instanceof Sb,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function ALe(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=rK();Mr(typeof t=="function","`useTick` needs a callback function."),Mr(n instanceof Sb,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=P.useRef(null);P.useEffect(function(){r.current=t},[t]),P.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function PLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tL(t,e,n){return tL=PLe()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&CE(a,s.prototype),a},tL.apply(null,arguments)}var RLe=["children","apply"];function v$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(n),!0).forEach(function(r){Br(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ILe=function(t,e){Mr(yo(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=Ed(i,RLe),l=P.useRef(P.useMemo(function(){return n.map(function(d){var h,f=(a==null||(h=a[d])===null||h===void 0?void 0:h.construct)||[];return tL(e[d],kc(f))})},[n])),c=P.useMemo(function(){return n.reduce(function(d,h,f){return W_(W_({},d),{},Br({},h,l.current[f]))},{})},[n]),u=P.useMemo(function(){return Object.keys(a).filter(Yq(Xq(n))).reduce(function(d,h){return W_(W_({},d),{},Br({},h,a[h]))},{})},[a,n]);return n.forEach(function(d,h){return Object.assign(l.current[h],a[d])}),o&&function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return h.every(function(p){return typeof p=="function"})}(o)&&o.call(t,c),Rn.createElement(t,My({},u,{filters:l.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:nr.node,apply:nr.func},r},MLe=Gs.BitmapText,LLe=Gs.Container,kLe=Gs.Graphics,OLe=Gs.NineSlicePlane,NLe=Gs.ParticleContainer,DLe=Gs.Sprite,BLe=Gs.AnimatedSprite,FLe=Gs.Text,zLe=Gs.TilingSprite,ULe=Gs.SimpleMesh,$Le=Gs.SimpleRope;const jLe=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:BLe,AppConsumer:tK,AppContext:GS,AppProvider:eK,BitmapText:MLe,Container:LLe,Graphics:kLe,NineSlicePlane:OLe,ParticleContainer:NLe,PixiComponent:uLe,PixiFiber:Na,SimpleMesh:ULe,SimpleRope:$Le,Sprite:DLe,Stage:CLe,TYPES:Gs,Text:FLe,TilingSprite:zLe,applyDefaultProps:Ul,createRoot:Jq,eventHandlers:SE,render:yLe,unmountComponentAtNode:bLe,useApp:rK,useTick:ALe,withFilters:ILe,withPixiApp:ELe},Symbol.toStringTag,{value:"Module"})),GLe=In(jLe);UX.exports=GLe;var cn=UX.exports,HLe=Object.defineProperty,VLe=(t,e,n)=>e in t?HLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ne=(t,e,n)=>(VLe(t,typeof e!="symbol"?e+"":e,n),n);class ha{constructor(e){Ne(this,"parent"),Ne(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var WLe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iK={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s},easeOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-u)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=n.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=n.easeInBounce(i*2,0,o,a),l*.5+s):(l=n.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(n)}).call(WLe)})(iK);const y$=iK.exports;function HS(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return y$[t]}else return y$[e]}const XLe={removeOnInterrupt:!1,ease:"linear",time:1e3};class YLe extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"startX"),Ne(this,"startY"),Ne(this,"deltaX"),Ne(this,"deltaY"),Ne(this,"keepCenter"),Ne(this,"startWidth",null),Ne(this,"startHeight",null),Ne(this,"deltaWidth",null),Ne(this,"deltaHeight",null),Ne(this,"width",null),Ne(this,"height",null),Ne(this,"time",0),this.options=Object.assign({},XLe,n),this.options.ease=HS(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new It(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new It(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const qLe={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class KLe extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"left"),Ne(this,"top"),Ne(this,"right"),Ne(this,"bottom"),Ne(this,"underflowX"),Ne(this,"underflowY"),Ne(this,"ease"),Ne(this,"toX"),Ne(this,"toY"),this.options=Object.assign({},qLe,n),this.ease=HS(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new It(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new It(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new It(0,0),bottomRight:new It(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,l=r.bottomRight;if(!this.toX&&!i.x){let c=null;r.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let c=null;r.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const ZLe={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class QLe extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"last"),Ne(this,"noUnderflow"),Ne(this,"underflowX"),Ne(this,"underflowY"),this.options=Object.assign({},ZLe,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new It(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const JLe={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class eke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),this.options=Object.assign({},JLe,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const tke={friction:.98,bounce:.8,minSpeed:.01},cu=16;class nke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"x"),Ne(this,"y"),Ne(this,"percentChangeX"),Ne(this,"percentChangeY"),Ne(this,"saved"),Ne(this,"timeSinceRelease"),this.options=Object.assign({},tke,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*cu/o*(Math.pow(s,i/cu)-Math.pow(s,r/cu)),this.x*=Math.pow(this.percentChangeX,e/cu)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*cu/o*(Math.pow(s,i/cu)-Math.pow(s,r/cu)),this.y*=Math.pow(this.percentChangeY,e/cu)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const rke={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class ike extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"moved"),Ne(this,"reverse"),Ne(this,"xDirection"),Ne(this,"yDirection"),Ne(this,"keyIsPressed"),Ne(this,"mouse"),Ne(this,"underflowX"),Ne(this,"underflowY"),Ne(this,"last"),Ne(this,"current"),Ne(this,"windowEventHandlers",[]),this.options=Object.assign({},rke,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new It(this.last.x,this.last.y),world:this.parent.toWorld(new It(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new It(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const ske={speed:0,acceleration:null,radius:null};class oke extends ha{constructor(e,n,r={}){super(e),Ne(this,"options"),Ne(this,"target"),Ne(this,"velocity"),this.target=n,this.options=Object.assign({},ske,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,d=Math.sin(a)*this.velocity.y,h=Math.abs(u)>Math.abs(s)?r:n.x+u,f=Math.abs(d)>Math.abs(o)?i:n.y+d;this.parent.moveCenter(h,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?r:n.x+l,d=Math.abs(c)>Math.abs(o)?i:n.y+c;this.parent.moveCenter(u,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const ake={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class lke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"reverse"),Ne(this,"radiusSquared"),Ne(this,"left"),Ne(this,"top"),Ne(this,"right"),Ne(this,"bottom"),Ne(this,"horizontal"),Ne(this,"vertical"),this.options=Object.assign({},ake,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const cke={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class uke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"active",!1),Ne(this,"pinching",!1),Ne(this,"moved",!1),Ne(this,"lastCenter"),this.options=Object.assign({},cke,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let l;const c=new It(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const d=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=d),this.isAxisY()&&(this.parent.scale.y+=d),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const h=this.parent.plugins.get("clamp-zoom",!0);if(h&&h.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(c.x-f.x)*this.options.factor,this.parent.y+=(c.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const dke={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class hke extends ha{constructor(e,n,r,i={}){super(e),Ne(this,"options"),Ne(this,"ease"),Ne(this,"x"),Ne(this,"y"),Ne(this,"percent"),Ne(this,"snapping"),Ne(this,"deltaX"),Ne(this,"deltaY"),Ne(this,"startX"),Ne(this,"startY"),this.options=Object.assign({},dke,i),this.ease=HS(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(n.time>this.options.time)r=!0,i=o+l,s=a+c;else{const u=this.ease(n.time,0,1,this.options.time);i=o+l*u,s=a+c*u}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const fke={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class pke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"ease"),Ne(this,"xScale"),Ne(this,"yScale"),Ne(this,"xIndependent"),Ne(this,"yIndependent"),Ne(this,"snapping"),this.options=Object.assign({},fke,n),this.ease=HS(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const gke={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class mke extends ha{constructor(e,n={}){super(e),Ne(this,"options"),Ne(this,"smoothing"),Ne(this,"smoothingCenter"),Ne(this,"smoothingCount"),Ne(this,"keyIsPressed"),this.options=Object.assign({},gke,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class vke{constructor(e){Ne(this,"viewport"),Ne(this,"clickedAvailable"),Ne(this,"isMouseDown"),Ne(this,"last"),Ne(this,"wheelFunction"),Ne(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Gt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new It;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const p0=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class yke{constructor(e){Ne(this,"plugins"),Ne(this,"list"),Ne(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=p0.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=p0.indexOf(e);s!==-1&&p0.splice(s,1),p0.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of p0)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const bke={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:qr.shared,allowPreserveDragOutside:!1};class _ke extends Fi{constructor(e){super(),Ne(this,"moving"),Ne(this,"screenWidth"),Ne(this,"screenHeight"),Ne(this,"threshold"),Ne(this,"input"),Ne(this,"plugins"),Ne(this,"zooming"),Ne(this,"lastViewport"),Ne(this,"options"),Ne(this,"_dirty"),Ne(this,"_forceHitArea"),Ne(this,"_hitAreaDefault"),Ne(this,"_pause"),Ne(this,"tickerFunction"),Ne(this,"_worldWidth"),Ne(this,"_worldHeight"),Ne(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...bke,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new vke(this),this.plugins=new yke(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Gt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Gt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new It(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new It(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new It(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new It(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new pke(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new It(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Gt(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new ike(this,e)),this}clamp(e){return this.plugins.add("clamp",new QLe(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new nke(this,e)),this}bounce(e){return this.plugins.add("bounce",new KLe(this,e)),this}pinch(e){return this.plugins.add("pinch",new uke(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new hke(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new oke(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new mke(this,e)),this}animate(e){return this.plugins.add("animate",new YLe(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new eke(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new lke(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const xke=t=>{const e=new _ke({passiveWheel:!1,events:t.app.renderer.events,stopPropagation:!0,screenWidth:t.screenWidth,screenHeight:t.screenHeight,worldWidth:1e3,worldHeight:1e3});return e.moveCenter(t.viewportCenter[2]||0,t.viewportCenter[1]||0),e.setZoom(t.viewportCenter[0]||1,!0),e.drag({wheel:!1}).wheel({wheelZoom:!0}).pinch().clampZoom({maxScale:5,minScale:.1}),t.onDragStart&&e.on("drag-start",t.onDragStart),t.onDragEnd&&e.on("drag-end",t.onDragEnd),t.onPinchStart&&e.on("pinch-start",t.onPinchStart),t.onPinchEnd&&e.on("pinch-end",t.onPinchEnd),t.onSnapStart&&e.on("snap-start",t.onSnapStart),t.onSnapEnd&&e.on("snap-end",t.onSnapEnd),t.onSnapZoomStart&&e.on("snap-zoom-start",t.onSnapZoomStart),t.onSnapZoomEnd&&e.on("snap-zoom-end",t.onSnapZoomEnd),t.onZoomed&&e.on("zoomed",t.onZoomed),t.onZoomedEnd&&e.on("zoomed-end",t.onZoomedEnd),t.onMouseUp&&e.on("mouseup",t.onMouseUp),t.onMoved&&e.on("moved",t.onMoved),t.onMovedEnd&&e.on("moved-end",n=>{t.onMovedEnd&&t.onMovedEnd({x:n.center.x,y:n.center.y,zoom:n.lastViewport.scaleX})}),e},wke=t=>{const e=cn.useApp(),n=({left:i,top:s,right:o,bottom:a,paddingMarginRatio:l})=>{if(t.screenWidth===0)return;const c=e.stage.getChildAt(0),u=PX({left:i,top:s,right:o,bottom:a,width:t.screenWidth,height:t.screenHeight,paddingMarginRatio:l});c.moveCenter(u[2],u[1]),c.setZoom(u[0],!0),requestAnimationFrame(()=>{t.onSetViewportCenter(u)})};P.useEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);t.screenWidth>0&&t.screenHeight>0&&(t.viewportCenter?(i.moveCenter(t.viewportCenter[2],t.viewportCenter[1]),i.setZoom(t.viewportCenter[0],!0)):n(t.boundingBox))})},[t.viewportCenter]),P.useLayoutEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);i.pause=t.pause})},[t.pause]);const r=cn.PixiComponent("Viewport",{create:i=>{const s=xke(i);return s.options.events.domElement=i.app.renderer.view,s},didMount(i,s){},willUnmount:i=>{i.destroy({children:!0})}});return $(r,{app:e,...t})},Eke='<svg xmlns="http://www.w3.org/2000/svg" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-kaxv2e" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DomainIcon"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></svg>',Tke=new Blob([Eke],{type:"image/svg+xml"}),sK=URL.createObjectURL(Tke),oK=new Lr;or.prototype._cacheAsBitmap=!1;or.prototype._cacheData=null;or.prototype._cacheAsBitmapResolution=null;or.prototype._cacheAsBitmapMultisample=null;class Ske{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(or.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new Ske),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});or.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};or.prototype._initCachedDisplayObject=function(t){var h,f;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(new Gt,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;n.pad(p)}const r=this.cacheAsBitmapResolution||t.resolution;n.ceil(r),n.width=Math.max(n.width,1/r),n.height=Math.max(n.height,1/r);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=wd.create({width:n.width,height:n.height,resolution:r,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${cd()}`;this._cacheData.textureCacheId=c,qt.addToCache(l.baseTexture,c),Dt.addToCache(l,c);const u=this.transform.localTransform.copyTo(oK).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new Ka(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};or.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};or.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const e=this.getLocalBounds(new Gt,!0),n=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=wd.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${cd()}`;this._cacheData.textureCacheId=a,qt.addToCache(o.baseTexture,a),Dt.addToCache(o,a);const l=oK;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new Ka(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};or.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};or.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};or.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,qt.removeFromCache(this._cacheData.textureCacheId),Dt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};or.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};or.prototype.name=null;Fi.prototype.getChildByName=function(t,e){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(let n=0,r=this.children.length;n<r;n++){const i=this.children[n];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};or.prototype.getGlobalPosition=function(t=new It,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Cke=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class aK extends es{constructor(e=1){super(YY,Cke,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const Ake=Object.freeze(Object.defineProperty({__proto__:null,AlphaFilter:aK},Symbol.toStringTag,{value:"Module"})),Pke={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Rke=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Ike(t){const e=Pke[t],n=e.length;let r=Rke,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const Mke=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Lke(t,e){const n=Math.ceil(t/2);let r=Mke,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class PE extends es{constructor(e,n=8,r=4,i=es.defaultResolution,s=5){const o=Lke(s,e),a=Ike(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Ra.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Ra.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class lK extends es{constructor(e=8,n=4,r=es.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new PE(!0,e,n,r,i),this.blurYFilter=new PE(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Ra.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}const kke=Object.freeze(Object.defineProperty({__proto__:null,BlurFilter:lK,BlurFilterPass:PE},Symbol.toStringTag,{value:"Module"}));var Oke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class RE extends es{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(bN,Oke,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=wn.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,u=o*(1-r)+a*i,d=o*(1-r)+a*i,h=r+o*(1-r),f=o*(1-r)-a*i,p=o*(1-r)-a*i,m=o*(1-r)+a*i,b=r+o*(1-r),y=[l,c,u,0,0,d,h,f,0,0,p,m,b,0,0,0,0,0,1,0];this._loadMatrix(y,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=wn.shared,[a,l,c]=o.setValue(r).toArray(),[u,d,h]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,u,d,h,n,0,a-u,l-d,c-h,0,0];this._loadMatrix(f,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}RE.prototype.grayscale=RE.prototype.greyscale;const Nke=Object.freeze(Object.defineProperty({__proto__:null,ColorMatrixFilter:RE},Symbol.toStringTag,{value:"Module"}));var Dke=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Bke=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class cK extends es{constructor(e,n){const r=new Lr;e.renderable=!1,super(Bke,Dke,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new It(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}const Fke=Object.freeze(Object.defineProperty({__proto__:null,DisplacementFilter:cK},Symbol.toStringTag,{value:"Module"}));var zke=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Uke=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class uK extends es{constructor(){super(Uke,zke)}}const $ke=Object.freeze(Object.defineProperty({__proto__:null,FXAAFilter:uK},Symbol.toStringTag,{value:"Module"}));var jke=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class dK extends es{constructor(e=.5,n=Math.random()){super(bN,jke,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Gke=Object.freeze(Object.defineProperty({__proto__:null,NoiseFilter:dK},Symbol.toStringTag,{value:"Module"})),b$={AlphaFilter:aK,BlurFilter:lK,BlurFilterPass:PE,ColorMatrixFilter:RE,DisplacementFilter:cK,FXAAFilter:uK,NoiseFilter:dK};Object.entries(b$).forEach(([t,e])=>{Object.defineProperty(b$,t,{get(){return $t("7.1.0",`filters.${t} has moved to ${t}`),e}})});class Hke{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(qr.system.add(this.tickerUpdate,this,Lc.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(qr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Mu=new Hke;class dm{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=dm.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new It,this.page=new It,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ly extends dm{constructor(){super(...arguments),this.client=new It,this.movement=new It,this.offset=new It,this.global=new It,this.screen=new It}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m){throw new Error("Method not implemented.")}}class Uo extends Ly{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Rh extends Ly{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Rh.DOM_DELTA_PIXEL=0,Rh.DOM_DELTA_LINE=1,Rh.DOM_DELTA_PAGE=2;const Vke=2048,Wke=new It,f2=new It;class hK{constructor(e){this.dispatch=new am,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Mu.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,Wke.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<Vke&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Mu.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let d=u.length-1;d>=0;d--){const h=u[d],f=this.hitTestMoveRecursive(h,this._isInteractive(n)?n:h.eventMode,r,i,s,o||s(e,r));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(n),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Mu.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],d=this.hitTestRecursive(u,this._isInteractive(n)?n:u.eventMode,r,i,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,f2),!e.hitArea.contains(f2.x,f2.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var l,c;if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==n.target){const u=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,u,s);if(this.dispatchEvent(d,"pointerout"),r&&this.dispatchEvent(d,"mouseout"),!n.composedPath().includes(s)){const h=this.createPointerEvent(e,"pointerleave",s);for(h.eventPhase=h.AT_TARGET;h.target&&!n.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),r&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(d)}if(s!==n.target){const u=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(n,u);this.dispatchEvent(d,"pointerover"),r&&this.dispatchEvent(d,"mouseover");let h=s==null?void 0:s.parent;for(;h&&h!==this.rootTarget.parent&&h!==n.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const f=this.clonePointerEvent(n,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=n.target)==null?void 0:c.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Uo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Rh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(Uo);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(Rh);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(Uo);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof Uo&&n instanceof Uo&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof Ly&&n instanceof Ly&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const Xke=1,Yke={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},nL=class rL{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new hK(null),Mu.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Uo(null),this.rootWheelEvent=new Rh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...rL.defaultEventFeatures},{set:(n,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),n[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:n,resolution:r}=this.renderer;this.setTargetElement(n),this.resolution=r,rL._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":n&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":n&&Object.assign(this.domElement.style,r);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=n.length;r<i;r++){const s=n[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Mu.pointerMoved();const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const r=n!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,Mu.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Mu.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Mu.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(n-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Xke),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,n.push(r)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,n.deltaMode=e.deltaMode,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Yke[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}};nL.extension={name:"events",type:[rt.RendererSystem,rt.CanvasRendererSystem]},nL.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let IE=nL;bt.add(IE);function _$(t){return t==="dynamic"||t==="static"}const fK={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??_$(IE.defaultEventMode)},set interactive(t){$t("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??IE.defaultEventMode},set eventMode(t){this._internalInteractive=_$(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof n=="object"?n.signal:void 0,s=typeof n=="object"?n.once===!0:!1,o=typeof e=="function"?void 0:e;t=r?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof dm))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};or.mixin(fK);const qke=Object.freeze(Object.defineProperty({__proto__:null,EventBoundary:hK,EventSystem:IE,FederatedDisplayObject:fK,FederatedEvent:dm,FederatedMouseEvent:Ly,FederatedPointerEvent:Uo,FederatedWheelEvent:Rh},Symbol.toStringTag,{value:"Module"})),pK={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};or.mixin(pK);const Kke=9,X_=100,Zke=0,Qke=0,x$=2,w$=1,Jke=-1e3,eOe=-1e3,tOe=2;class IN{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(La.tablet||La.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${X_}px`,n.style.height=`${X_}px`,n.style.position="absolute",n.style.top=`${Zke}px`,n.style.left=`${Qke}px`,n.style.zIndex=x$.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${w$}px`,e.style.height=`${w$}px`,e.style.position="absolute",e.style.top=`${Jke}px`,e.style.left=`${eOe}px`,e.style.zIndex=tOe.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(La.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let d=this.div;d.style.left=`${n}px`,d.style.top=`${r}px`,d.style.width=`${o}px`,d.style.height=`${a}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,Ah(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{d=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(d.style.left=`${(m.tx+p.x*m.a)*c}px`,d.style.top=`${(m.ty+p.y*m.d)*u}px`,d.style.width=`${p.width*m.a*c}px`,d.style.height=`${p.height*m.d*u}px`):(p=f.getBounds(),this.capHitArea(p),d.style.left=`${p.x*c}px`,d.style.top=`${p.y*u}px`,d.style.width=`${p.width*c}px`,d.style.height=`${p.height*u}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${X_}px`,n.style.height=`${X_}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=x$.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new dm(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===Kke&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}IN.extension={name:"accessibility",type:[rt.RendererPlugin,rt.CanvasRendererPlugin]};bt.add(IN);const nOe=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityManager:IN,accessibleTarget:pK},Symbol.toStringTag,{value:"Module"}));var gi=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(gi||{});const ky={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let vl,dp;function E$(){dp={s3tc:vl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:vl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:vl.getExtension("WEBGL_compressed_texture_etc"),etc1:vl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:vl.getExtension("WEBGL_compressed_texture_pvrtc")||vl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:vl.getExtension("WEBGL_compressed_texture_atc"),astc:vl.getExtension("WEBGL_compressed_texture_astc"),bptc:vl.getExtension("EXT_texture_compression_bptc")}}const gK={extension:{type:rt.DetectionParser,priority:2},test:async()=>{const t=lt.ADAPTER.createCanvas().getContext("webgl");return t?(vl=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{dp||E$();const e=[];for(const n in dp)dp[n]&&e.push(n);return[...e,...t]},remove:async t=>(dp||E$(),t.filter(e=>!(e in dp)))};bt.add(gK);class mK extends gb{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new mE(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new mE(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Qu extends mK{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=Qu._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||Qu._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Qu._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let c=e.byteOffset,u=o,d=a,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*ky[n];for(let m=0;m<r;m++)l[m]={levelID:m,levelWidth:r>1?u:h,levelHeight:r>1?d:f,levelBuffer:new Uint8Array(e.buffer,c,p)},c+=p,u=u>>1||1,d=d>>1||1,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*ky[n];return l}}const p2=4,Y_=124,rOe=32,T$=20,iOe=542327876,q_={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},sOe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},K_={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},oOe=1,aOe=2,lOe=4,cOe=64,uOe=512,dOe=131072,hOe=827611204,fOe=861165636,pOe=894720068,gOe=808540228,mOe=4,vOe={[hOe]:gi.COMPRESSED_RGBA_S3TC_DXT1_EXT,[fOe]:gi.COMPRESSED_RGBA_S3TC_DXT3_EXT,[pOe]:gi.COMPRESSED_RGBA_S3TC_DXT5_EXT},yOe={70:gi.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:gi.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:gi.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:gi.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:gi.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:gi.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:gi.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:gi.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:gi.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:gi.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:gi.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:gi.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:gi.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function vK(t){const e=new Uint32Array(t);if(e[0]!==iOe)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,Y_/Uint32Array.BYTES_PER_ELEMENT),r=n[q_.HEIGHT],i=n[q_.WIDTH],s=n[q_.MIPMAP_COUNT],o=new Uint32Array(t,q_.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,rOe/Uint32Array.BYTES_PER_ELEMENT),a=o[oOe];if(a&lOe){const l=o[sOe.FOURCC];if(l!==gOe){const x=vOe[l],_=p2+Y_,w=new Uint8Array(t,_);return[new Qu(w,{format:x,width:i,height:r,levels:s})]}const c=p2+Y_,u=new Uint32Array(e.buffer,c,T$/Uint32Array.BYTES_PER_ELEMENT),d=u[K_.DXGI_FORMAT],h=u[K_.RESOURCE_DIMENSION],f=u[K_.MISC_FLAG],p=u[K_.ARRAY_SIZE],m=yOe[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===mOe)throw new Error("DDSParser does not support cubemap textures");if(h===6)throw new Error("DDSParser does not supported 3D texture data");const b=new Array,y=p2+Y_+T$;if(p===1)b.push(new Uint8Array(t,y));else{const x=ky[m];let _=0,w=i,E=r;for(let A=0;A<s;A++){const k=Math.max(1,w+3&-4),M=Math.max(1,E+3&-4),I=k*M*x;_+=I,w=w>>>1,E=E>>>1}let S=y;for(let A=0;A<p;A++)b.push(new Uint8Array(t,S,_)),S+=_}return b.map(x=>new Qu(x,{format:m,width:i,height:r,levels:s}))}throw a&cOe?new Error("DDSParser does not support uncompressed texture data."):a&uOe?new Error("DDSParser does not supported YUV uncompressed texture data."):a&dOe?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&aOe?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const S$=[171,75,84,88,32,49,49,187,13,10,26,10],bOe=67305985,xa={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},iL=64,sL={[Et.UNSIGNED_BYTE]:1,[Et.UNSIGNED_SHORT]:2,[Et.INT]:4,[Et.UNSIGNED_INT]:4,[Et.FLOAT]:4,[Et.HALF_FLOAT]:8},yK={[Qe.RGBA]:4,[Qe.RGB]:3,[Qe.RG]:2,[Qe.RED]:1,[Qe.LUMINANCE]:1,[Qe.LUMINANCE_ALPHA]:2,[Qe.ALPHA]:1},bK={[Et.UNSIGNED_SHORT_4_4_4_4]:2,[Et.UNSIGNED_SHORT_5_5_5_1]:2,[Et.UNSIGNED_SHORT_5_6_5]:2};function _K(t,e,n=!1){const r=new DataView(e);if(!_Oe(t,r))return null;const i=r.getUint32(xa.ENDIANNESS,!0)===bOe,s=r.getUint32(xa.GL_TYPE,i),o=r.getUint32(xa.GL_FORMAT,i),a=r.getUint32(xa.GL_INTERNAL_FORMAT,i),l=r.getUint32(xa.PIXEL_WIDTH,i),c=r.getUint32(xa.PIXEL_HEIGHT,i)||1,u=r.getUint32(xa.PIXEL_DEPTH,i)||1,d=r.getUint32(xa.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=r.getUint32(xa.NUMBER_OF_FACES,i),f=r.getUint32(xa.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(xa.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const m=4,b=4,y=l+3&-4,x=c+3&-4,_=new Array(d);let w=l*c;s===0&&(w=y*x);let E;if(s!==0?sL[s]?E=sL[s]*yK[o]:E=bK[s]:E=ky[a],E===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=n?wOe(r,p,i):null;let A=w*E,k=l,M=c,I=y,B=x,R=iL+p;for(let O=0;O<f;O++){const C=r.getUint32(R,i);let F=R+4;for(let q=0;q<d;q++){let G=_[q];G||(G=_[q]=new Array(f)),G[O]={levelID:O,levelWidth:f>1||s!==0?k:I,levelHeight:f>1||s!==0?M:B,levelBuffer:new Uint8Array(e,F,A)},F+=A}R+=C+4,R=R%4!==0?R+4-R%4:R,k=k>>1||1,M=M>>1||1,I=k+m-1&~(m-1),B=M+b-1&~(b-1),A=I*B*E}return s!==0?{uncompressed:_.map(O=>{let C=O[0].levelBuffer,F=!1;return s===Et.FLOAT?C=new Float32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4):s===Et.UNSIGNED_INT?(F=!0,C=new Uint32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)):s===Et.INT&&(F=!0,C=new Int32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)),{resource:new gb(C,{width:O[0].levelWidth,height:O[0].levelHeight}),type:s,format:F?xOe(o):o}}),kvData:S}:{compressed:_.map(O=>new Qu(null,{format:a,width:l,height:c,levels:f,levelBuffers:O})),kvData:S}}function _Oe(t,e){for(let n=0;n<S$.length;n++)if(e.getUint8(n)!==S$[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function xOe(t){switch(t){case Qe.RGBA:return Qe.RGBA_INTEGER;case Qe.RGB:return Qe.RGB_INTEGER;case Qe.RG:return Qe.RG_INTEGER;case Qe.RED:return Qe.RED_INTEGER;default:return t}}function wOe(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(iL+i,n),o=iL+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);r.set(c,u),i+=4+s+a}return r}const xK={extension:{type:rt.LoadParser,priority:da.High},name:"loadDDS",test(t){return Hc(t,".dds")},async load(t,e,n){const r=await(await lt.ADAPTER.fetch(t)).arrayBuffer(),i=vK(r).map(s=>{const o=new qt(s,{mipmap:Xa.OFF,alphaMode:vs.NO_PREMULTIPLIED_ALPHA,resolution:Bl(t),...e.data});return um(o,n,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};bt.add(xK);const wK={extension:{type:rt.LoadParser,priority:da.High},name:"loadKTX",test(t){return Hc(t,".ktx")},async load(t,e,n){const r=await(await lt.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=_K(t,r),a=i??s,l={mipmap:Xa.OFF,alphaMode:vs.NO_PREMULTIPLIED_ALPHA,resolution:Bl(t),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const d=u.resource??u,h=new qt(d,l);return h.ktxKeyValueData=o,um(h,n,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};bt.add(wK);const EK={extension:rt.ResolveParser,test:t=>{const e=Zr.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,r;const e=Zr.extname(t).slice(1);if(e==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(i.some(s=>t.endsWith(s)))return{resolution:parseFloat(((n=lt.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:i.find(s=>t.endsWith(s)),src:t}}return{resolution:parseFloat(((r=lt.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e,src:t}}};bt.add(EK);const EOe=Object.freeze(Object.defineProperty({__proto__:null,BlobResource:mK,CompressedTextureResource:Qu,FORMATS_TO_COMPONENTS:yK,INTERNAL_FORMATS:gi,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:ky,TYPES_TO_BYTES_PER_COMPONENT:sL,TYPES_TO_BYTES_PER_PIXEL:bK,detectCompressedTextures:gK,loadDDS:xK,loadKTX:wK,parseDDS:vK,parseKTX:_K,resolveCompressedTextureUrl:EK},Symbol.toStringTag,{value:"Module"})),Z_=new Gt,TOe=4,TK=class G0{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,n,r,i){const s=new Image;return s.src=await this.base64(e,n,r,i),s}async base64(e,n,r,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},n,r)});if(s.toDataURL!==void 0)return s.toDataURL(n,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:n,quality:r});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);o&&G0._flipY(r,i,s),a&&G0._unpremultiplyAlpha(r);const l=new uY(i,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);return o&&G0._flipY(r,i,s),a&&G0._unpremultiplyAlpha(r),r}_rawPixels(e,n){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof wd?a=e:(a=r.generateTexture(e,{region:n,resolution:r.resolution,multisample:r.multisample}),l=!0,n&&(Z_.width=n.width,Z_.height=n.height,n=Z_)));const c=r.gl;if(a){if(i=a.baseTexture.resolution,n=n??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===Qe.RGBA,!l){r.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[r.CONTEXT_UID];f.blitFramebuffer&&r.framebuffer.bind(f.blitFramebuffer)}}else i=r.resolution,n||(n=Z_,n.width=r.width/i,n.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(n.width*i),1),d=Math.max(Math.round(n.height*i),1),h=new Uint8Array(TOe*u*d);return c.readPixels(Math.round(n.x*i),Math.round(n.y*i),u,d,c.RGBA,c.UNSIGNED_BYTE,h),l&&(a==null||a.destroy(!0)),{pixels:h,width:u,height:d,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,n,r){const i=n<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==0){const s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};TK.extension={name:"extract",type:rt.RendererSystem};let SK=TK;bt.add(SK);const SOe=Object.freeze(Object.defineProperty({__proto__:null,Extract:SK},Symbol.toStringTag,{value:"Module"}));class CK{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function COe(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Dt){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function AOe(t,e){if(t.baseTexture instanceof qt){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function POe(t,e){if(t._texture&&t._texture instanceof Dt){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function ROe(t,e){return e instanceof FS?(e.updateText(!0),!0):!1}function IOe(t,e){if(e instanceof So){const n=e.toFontString();return uc.measureFont(n),!0}return!1}function MOe(t,e){if(t instanceof FS){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function LOe(t,e){return t instanceof So?(e.includes(t)||e.push(t),!0):!1}const AK=class PK{constructor(e){this.limiter=new CK(PK.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(MOe),this.registerFindHook(LOe),this.registerFindHook(COe),this.registerFindHook(AOe),this.registerFindHook(POe),this.registerUploadHook(ROe),this.registerUploadHook(IOe)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,qr.system.addOnce(this.tick,this,Lc.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)qr.system.addOnce(this.tick,this,Lc.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,r=e.length;n<r;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,r=this.addHooks.length;n<r&&!this.addHooks[n](e,this.queue);n++);if(e instanceof Fi)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&qr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};AK.uploadsPerFrame=4;let ME=AK;Object.defineProperties(lt,{UPLOADS_PER_FRAME:{get(){return ME.uploadsPerFrame},set(t){$t("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ME.uploadsPerFrame=t}}});function RK(t,e){return e instanceof qt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function kOe(t,e){if(!(e instanceof tg))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&RK(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function OOe(t,e){return t instanceof tg?(e.push(t),!0):!1}class MN extends ME{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(OOe),this.registerUploadHook(RK),this.registerUploadHook(kOe)}}MN.extension={name:"prepare",type:rt.RendererSystem};bt.add(MN);class NOe{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const DOe=Object.freeze(Object.defineProperty({__proto__:null,BasePrepare:ME,CountLimiter:CK,Prepare:MN,TimeLimiter:NOe},Symbol.toStringTag,{value:"Module"})),IK=class H0{constructor(e,n,r){this.linkedSheets=[],(e instanceof qt||e instanceof Dt)&&(e={texture:e,data:n,resolutionFilename:r});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof Dt?i:null,this.baseTexture=i instanceof qt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:n}=this.data.meta;let r=Bl(e,null);return r===null&&(r=typeof n=="number"?n:parseFloat(n??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=H0.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const r=H0.BATCH_SIZE;for(;n-e<r&&n<this._frameKeys.length;){const i=this._frameKeys[n],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Gt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new Gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Gt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Dt(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),Dt.addToCache(this.textures[i],this.cachePrefix+i.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let r=0;r<e[n].length;r++){const i=e[n][r];this.animations[n].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*H0.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*H0.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var n;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)==null||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};IK.BATCH_SIZE=1e3;let oL=IK;const BOe=["jpg","png","jpeg","avif","webp"];function MK(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!n){const i=Zr.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(r,MK([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const LK={extension:rt.Asset,cache:{test:t=>t instanceof oL,getCacheableAssets:(t,e)=>MK(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),n=e.pop(),r=e.pop();return n==="json"&&BOe.includes(r)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=lt.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:rt.LoadParser,priority:da.Normal},async testParse(t,e){return Zr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var u,d;const{texture:r,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Zr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(r&&r.baseTexture)a=r;else{const h=TE(o+(i??t.meta.image),e.src);a=(await n.load([h]))[h]}const l=new oL({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(c)){const h=[];for(const p of c){if(typeof p!="string")continue;let m=o+p;(d=e.data)!=null&&d.ignoreMultiPack||(m=TE(m,e.src),h.push(n.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(h);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(m=>m!==p))})}return l},unload(t){t.destroy(!0)}}};bt.add(LK);const FOe=Object.freeze(Object.defineProperty({__proto__:null,Spritesheet:oL,spritesheetAsset:LK},Symbol.toStringTag,{value:"Module"})),aL=class hp extends So{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new hp(Object.keys(hp.defaultOptions).reduce((n,r)=>({...n,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete hp.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,n={}){const{availableFonts:r}=hp;if(r[e]){const i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return lt.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Zr.basename(e,Zr.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},n);r[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const n=e.filter(r=>!this._overrides.includes(r));n.length>0&&(this._overrides.push(...n),this.styleID++)}removeOverride(...e){const n=e.filter(r=>this._overrides.includes(r));n.length>0&&(this._overrides=this._overrides.filter(r=>!n.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,n)=>`${e}
            @font-face {
                font-family: "${n.family}";
                src: url('${n.dataSrc}');
                font-weight: ${n.weight};
                font-style: ${n.style};
                font-display: ${n.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=aY(e)),typeof e=="number"?oY(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const n=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&n<1&&(e+=(n*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,hp.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(n=>setTimeout(n,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=lt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};aL.availableFonts={},aL.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Qx=aL;const V0=class fp extends Ka{constructor(e="",n={}){super(Dt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,i=Dt.from(r,{scaleMode:lt.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Gt,i.trim=new Gt,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=fp.defaultMaxWidth,this.maxHeight=fp.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=r,this._loadImage=new Image,this._autoResolution=fp.defaultAutoResolution,this._resolution=fp.defaultResolution??lt.RESOLUTION,this.text=e,this.style=n}measureText(e){var u,d;const{text:n,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(i)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:l+r.padding*2,height:c+r.padding*2}}async updateText(e=!0){const{style:n,_image:r,_loadImage:i}=this;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await n.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:n,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=n;n.trim.width=n._frame.width=r.width/i,n.trim.height=n._frame.height=r.height/i,n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var r,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},fp.defaultDestroyOptions,e),super.destroy(e);const n=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=n,(i=this._svgRoot)==null||i.remove(),this._svgRoot=n,(s=this._domElement)==null||s.remove(),this._domElement=n,(o=this._foreignObject)==null||o.remove(),this._foreignObject=n,(a=this._styleElement)==null||a.remove(),this._styleElement=n,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=n,this._image.src="",this._image=n}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const n=yc(this.scale.x)||1;this.scale.x=n*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const n=yc(this.scale.y)||1;this.scale.y=n*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Qx?(this.ownsStyle=!1,this._style=e):e instanceof So?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Qx.from(e)):(this.ownsStyle=!0,this._style=new Qx(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};V0.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},V0.defaultMaxWidth=2024,V0.defaultMaxHeight=2024,V0.defaultAutoResolution=!0;let zOe=V0;const UOe=Object.freeze(Object.defineProperty({__proto__:null,HTMLText:zOe,HTMLTextStyle:Qx},Symbol.toStringTag,{value:"Module"})),$Oe=new So({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center"}),jOe=new So({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#dd0000",align:"center"}),GOe=new So({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',align:"center",fill:"#333333"}),Ta=t=>new So({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center",...t}),HOe=t=>{if(!t.city)return null;const e=n=>{n.clear(),n.beginFill(RX,.7),n.lineStyle(2,170,1),n.drawRoundedRect(-90,-50,170,195,20),n.endFill()};return Be(cn.Container,{position:{x:t.x,y:t.y},children:[$(cn.Graphics,{draw:e}),$(cn.Text,{x:0,y:-30,anchor:{x:.5,y:.5},style:Ta({fontSize:14,fill:170}),text:`(${t.city.point[0].toFixed(2)}, ${t.city.point[1].toFixed(2)})`}),$(cn.Sprite,{image:sK,x:0,y:0,scale:{x:.3,y:.3},anchor:{x:.5,y:.5}}),$(cn.Text,{x:0,y:28,anchor:{x:.5,y:.5},style:Ta({fontSize:18,fill:170}),text:`#${t.index}`}),$(cn.Text,{x:0,y:45,anchor:{x:.5,y:.5},style:Ta({fontSize:10,fill:170}),text:t.city.label.length<28?t.city.label:t.city.label.substring(0,28)+"..."}),$(cn.Text,{x:0,y:60,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`share of manufacturing = ${t.city.manufactureShare.toFixed(3)} `}),$(cn.Text,{x:0,y:75,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`      share of agriculture = ${t.city.agricultureShare.toFixed(3)} `}),$(cn.Text,{x:0,y:90,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`        price index = ${t.city.priceIndex.toFixed(3)} `}),$(cn.Text,{x:0,y:105,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`    nominal wage = ${t.city.nominalWage.toFixed(3)} `}),$(cn.Text,{x:0,y:120,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`          real wage = ${t.city.realWage.toFixed(3)} `}),$(cn.Text,{x:0,y:135,anchor:{x:.5,y:.5},style:Ta({fontSize:11,fill:136}),text:`    GDP = ${t.city.priceIndex.toFixed(3)} `})]})},VOe=t=>$(cn.Container,{children:$(cn.Graphics,{draw:e=>{e.clear(),t.focusedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),WOe=t=>$(cn.Container,{children:$(cn.Graphics,{draw:e=>{e.clear(),t.selectedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.8),t.focusedIndices.includes(n)?e.lineStyle(2,16711680,.6):e.lineStyle(2,16711680,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),XOe=t=>$(cn.Container,{children:t.edges.map((e,n)=>$(YOe,{edge:e,index:n,...t},n))}),YOe=t=>{const e=kI(t.locations,t.edge.source),n=kI(t.locations,t.edge.target),r=t.locations[e],i=t.locations[n];if(!r||!i)return;const{x:s,y:o}={x:(r.point[0]+i.point[0])/2,y:(r.point[1]+i.point[1])/2},a=Rn.useCallback(l=>{l.clear(),l.lineStyle({width:1,color:0,alpha:.1,alignment:.5}),l.moveTo(r.point[0],r.point[1]),l.lineTo(i.point[0],i.point[1])},[r.point[0],i.point[0],r.point[1],i.point[1]]);return Be(cn.Container,{children:[$(cn.Graphics,{draw:a}),!(t.focusedIndices.length==2&&e==t.focusedIndices[0]&&n==t.focusedIndices[1])&&!(t.selectedIndices.length==2&&e==t.selectedIndices[0]&&n==t.selectedIndices[1])&&$(cn.Text,{text:t.edge.distance.toFixed(2),position:{x:s,y:o},anchor:{x:.5,y:.5},style:GOe})]},t.index)},qOe=t=>$(cn.Container,{children:t.locations.map((e,n)=>$(KOe,{index:n,...t},e.id))}),KOe=t=>{const[e,n]=Rn.useState(null),r=t.locations[t.index],i=P.useCallback(c=>{c.preventDefault(),t.onDragStart(c.clientX,c.clientY,t.index)},[t.index]),s=P.useCallback(c=>{if(c.preventDefault(),t.draggingIndex==t.index){c.currentTarget.cursor="grabbing";const u=c.currentTarget.parent.parent,d=c.getLocalPosition(u),h=t.locations[t.index],f=d.x-h.point[0],p=d.y-h.point[1];t.onDrag(f,p,t.index)}},[t.draggingIndex,t.locations,t.onDrag,t.index]),o=P.useCallback(c=>{c.preventDefault(),c.currentTarget.cursor="pointer",t.onPointerUp(c,t.index),t.onDragEnd(c.clientX,c.clientY,t.index)},[t.onPointerUp,t.onDragEnd,t.index,e]),a=P.useCallback(c=>{c.preventDefault(),t.onPointerEnter(c,t.index),n(t.index)},[t.onPointerEnter,t.index]),l=P.useCallback(c=>{c.preventDefault(),t.onPointerLeave(c,t.index),n(null)},[t.onPointerLeave,t.index]);return Be(cn.Container,{position:{x:r.point[0],y:r.point[1]},interactive:!0,eventMode:"static",children:[$(cn.Graphics,{draw:c=>{const u=t.locations[t.index];c.clear(),u.manufactureShare0<u.manufactureShare?c.lineStyle(1,255,.5):c.lineStyle(0,0,.1),c.beginFill(1668818,.25),c.drawCircle(0,0,100*u.manufactureShare),c.endFill()}}),$(cn.Sprite,{texture:t.cityTexture,width:20,height:20,anchor:{x:.5,y:.5},alpha:t.draggingIndex==t.index?.3:1,interactive:!0,eventMode:"static",onpointerdown:i,onpointerupoutside:o,onmouseup:o,onpointerenter:a,onpointerleave:l,onglobalpointermove:s}),$(cn.Text,{text:`#${t.index}`,position:{x:0,y:20},anchor:{x:.5,y:.5},style:$Oe}),e==t.index&&$(cn.Text,{text:r.label,position:{x:-10,y:45},anchor:{x:0,y:.5},style:jOe})]},t.index)};var kK={},OK={};const NK=In(LIe),DK=In(Ake),BK=In(kke),FK=In(Nke),zK=In(Fke),UK=In($ke),$K=In(Gke);var ZOe=NK,QOe=DK,C$=BK,JOe=FK,e3e=zK,t3e=UK,n3e=$K;const lL={AlphaFilter:QOe.AlphaFilter,BlurFilter:C$.BlurFilter,BlurFilterPass:C$.BlurFilterPass,ColorMatrixFilter:JOe.ColorMatrixFilter,DisplacementFilter:e3e.DisplacementFilter,FXAAFilter:t3e.FXAAFilter,NoiseFilter:n3e.NoiseFilter};Object.entries(lL).forEach(([t,e])=>{Object.defineProperty(lL,t,{get(){return ZOe.utils.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e}})});OK.filters=lL;const r3e=In(nOe),i3e=In(FMe),s3e=In(_Me),o3e=In(EOe),a3e=In(NIe),l3e=In(qke),c3e=In(SOe),u3e=In(AMe),d3e=In(XIe),h3e=In(PMe),f3e=In(MMe),p3e=In(DOe),g3e=In(BIe),m3e=In(LMe),v3e=In(BMe),y3e=In(FOe),b3e=In($Ie),_3e=In(wMe),x3e=In(UOe);(function(t){var e=OK,n=r3e,r=i3e,i=s3e,s=o3e,o=NK,a=a3e,l=l3e,c=c3e,u=DK,d=BK,h=FK,f=zK,p=UK,m=$K,b=u3e,y=d3e,x=h3e,_=f3e,w=p3e,E=g3e,S=m3e,A=v3e,k=y3e,M=b3e,I=_3e,B=x3e;t.filters=e.filters,Object.keys(n).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return n[R]}})}),Object.keys(r).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return r[R]}})}),Object.keys(i).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return i[R]}})}),Object.keys(s).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return s[R]}})}),Object.keys(o).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return o[R]}})}),Object.keys(a).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return a[R]}})}),Object.keys(l).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return l[R]}})}),Object.keys(c).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return c[R]}})}),Object.keys(u).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return u[R]}})}),Object.keys(d).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return d[R]}})}),Object.keys(h).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return h[R]}})}),Object.keys(f).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return f[R]}})}),Object.keys(p).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return p[R]}})}),Object.keys(m).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return m[R]}})}),Object.keys(b).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return b[R]}})}),Object.keys(y).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return y[R]}})}),Object.keys(x).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return x[R]}})}),Object.keys(_).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return _[R]}})}),Object.keys(w).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return w[R]}})}),Object.keys(E).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return E[R]}})}),Object.keys(S).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return S[R]}})}),Object.keys(A).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return A[R]}})}),Object.keys(k).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return k[R]}})}),Object.keys(M).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return M[R]}})}),Object.keys(I).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return I[R]}})}),Object.keys(B).forEach(function(R){R!=="default"&&!Object.prototype.hasOwnProperty.call(t,R)&&Object.defineProperty(t,R,{enumerable:!0,get:function(){return B[R]}})})})(kK);var LE=xi&&xi.__assign||function(){return LE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},LE.apply(this,arguments)},jK=void 0,ul=kK,w3e={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},E3e=function(){function t(e,n){n===void 0&&(n={}),this.cursor=new ul.Point,this.scale=1,this.graphics=e,n=LE(LE({},w3e),n),this.dash=n.dash,this.dashSize=this.dash.reduce(function(r,i){return r+i}),this.useTexture=n.useTexture,this.options=n,this.setLineStyle()}return t.prototype.setLineStyle=function(){var e=this.options;if(this.useTexture){var n=t.getTexture(e,this.dashSize);this.graphics.lineTextureStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,texture:n,alignment:e.alignment}),this.activeTexture=n}else this.graphics.lineStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,cap:e.cap,join:e.join,alignment:e.alignment});this.scale=e.scale},t.distance=function(e,n,r,i){return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-n,2))},t.prototype.moveTo=function(e,n){return this.lineLength=0,this.cursor.set(e,n),this.start=new ul.Point(e,n),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},t.prototype.lineTo=function(e,n,r){typeof this.lineLength===void 0&&this.moveTo(0,0);var i=t.distance(this.cursor.x,this.cursor.y,e,n),s=Math.atan2(n-this.cursor.y,e-this.cursor.x),o=r&&e===this.start.x&&n===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(s),o&&this.dash.length%2===0){var a=Math.min(this.dash[this.dash.length-1],i);this.graphics.lineTo(e-Math.cos(s)*a,n-Math.sin(s)*a),this.graphics.closePath()}else this.graphics.lineTo(e,n);else{for(var l=Math.cos(s),c=Math.sin(s),u=this.cursor.x,d=this.cursor.y,h=this.lineLength%(this.dashSize*this.scale),f=0,p=0,m=0,b=0;b<this.dash.length;b++){var y=this.dash[b]*this.scale;if(h<m+y){f=b,p=h-m;break}else m+=y}for(var x=i;x>0;){var y=this.dash[f]*this.scale-p,_=x>y?y:x;if(o){var w=t.distance(u+l*_,d+c*_,this.start.x,this.start.y);if(w<=_){if(f%2===0){var E=t.distance(u,d,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;u+=l*E,d+=c*E,this.graphics.lineTo(u,d)}break}}u+=l*_,d+=c*_,f%2?this.graphics.moveTo(u,d):this.graphics.lineTo(u,d),x-=_,f++,f=f===this.dash.length?0:f,p=0}}return this.lineLength+=i,this.cursor.set(e,n),this},t.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},t.prototype.drawCircle=function(e,n,r,i,s){i===void 0&&(i=80);var o=Math.PI*2/i,a=0,l;s?(l=new ul.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),s.apply(l,l),this.moveTo(l[0],l[1])):(l=new ul.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),this.moveTo(l.x,l.y)),a+=o;for(var c=1;c<i+1;c++){var u=c===i?l:[e+Math.cos(a)*r,n+Math.sin(a)*r];this.lineTo(u[0],u[1]),a+=o}return this},t.prototype.drawEllipse=function(e,n,r,i,s,o){s===void 0&&(s=80);for(var a=Math.PI*2/s,l,c=new ul.Point,u=0;u<Math.PI*2;u+=a){var d=e-r*Math.sin(u),h=n-i*Math.cos(u);o&&(c.set(d,h),o.apply(c,c),d=c.x,h=c.y),u===0?(this.moveTo(d,h),l={x:d,y:h}):this.lineTo(d,h)}return this.lineTo(l.x,l.y,!0),this},t.prototype.drawPolygon=function(e,n){var r=new ul.Point;if(typeof e[0]=="number")if(n){r.set(e[0],e[1]),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=2;i<e.length;i+=2)r.set(e[i],e[i+1]),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-2)}else{this.moveTo(e[0],e[1]);for(var i=2;i<e.length;i+=2)this.lineTo(e[i],e[i+1],i===e.length-2)}else if(n){var s=e[0];r.copyFrom(s),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=1;i<e.length;i++){var o=e[i];r.copyFrom(o),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-1)}}else{var s=e[0];this.moveTo(s.x,s.y);for(var i=1;i<e.length;i++){var a=e[i];this.lineTo(a.x,a.y,i===e.length-1)}}return this},t.prototype.drawRect=function(e,n,r,i,s){if(s){var o=new ul.Point;o.set(e,n),s.apply(o,o),this.moveTo(o.x,o.y),o.set(e+r,n),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e+r,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n),s.apply(o,o),this.lineTo(o.x,o.y,!0)}else this.moveTo(e,n).lineTo(e+r,n).lineTo(e+r,n+i).lineTo(e,n+i).lineTo(e,n,!0);return this},t.prototype.adjustLineStyle=function(e){var n=this.graphics.line;n.matrix=new ul.Matrix,e&&n.matrix.rotate(e),this.scale!==1&&n.matrix.scale(this.scale,this.scale);var r=-this.lineLength;n.matrix.translate(this.cursor.x+r*Math.cos(e),this.cursor.y+r*Math.sin(e)),this.graphics.lineStyle(n)},t.getTexture=function(e,n){var r=e.dash.toString();if(t.dashTextureCache[r])return t.dashTextureCache[r];var i=document.createElement("canvas");i.width=n,i.height=Math.ceil(e.width);var s=i.getContext("2d");if(!s){console.warn("Did not get context from canvas");return}s.strokeStyle="white",s.globalAlpha=e.alpha,s.lineWidth=e.width;var o=0,a=e.width/2;s.moveTo(o,a);for(var l=0;l<e.dash.length;l+=2)o+=e.dash[l],s.lineTo(o,a),e.dash.length!==l+1&&(o+=e.dash[l+1],s.moveTo(o,a));s.stroke();var c=t.dashTextureCache[r]=ul.Texture.from(i);return c.baseTexture.scaleMode=ul.SCALE_MODES.NEAREST,c},t.dashTextureCache={},t}();jK=E3e;const A$=t=>{if(t.focusedIndices.length<=1||!t.adjacencyMatrix||!t.distanceMatrix||!t.predecessorMatrix)return;let e=t.focusedIndices[0];const n=t.focusedIndices[1];let r=e,i=Eg(t.locations,e);if(!i)return;const s=[i],o=[];for(let c=0;r!=n&&c<t.locations.length;c++){const u=t.predecessorMatrix[r][n];if(u==-1)break;const d=t.locations[u];d&&(s.push(d),Mc(t.distanceMatrix[e][n])||o.push({text:t.adjacencyMatrix[r][u].toFixed(2),x:(i.point[0]+d.point[0])/2,y:(i.point[1]+d.point[1])/2}),r=u,i=d)}const a=c=>{const u=t.focusedIndices[0],d=t.focusedIndices[1];let h=Eg(t.locations,u);if(c.clear(),h&&t.distanceMatrix&&t.predecessorMatrix&&t.predecessorMatrix[u][d]!=-1&&u<t.locations.length&&d<t.locations.length){c.lineStyle({width:2,color:t.color||16755200,alpha:.25,alignment:.5,cap:Oa.ROUND,join:fs.ROUND}),c.moveTo(h.point[0],h.point[1]),s.forEach(p=>c.lineTo(p.point[0],p.point[1]));const f=new jK(c,{dash:[1,15],width:10,color:t.color||16711680,alpha:.25,alignment:.5,cap:Oa.ROUND,join:fs.ROUND});f.moveTo(t.locations[u].point[0],t.locations[u].point[1]),f.lineTo(t.locations[d].point[0],t.locations[d].point[1])}},l=t.distanceMatrix[e][n];return Be(cn.Container,{children:[$(cn.Graphics,{draw:a}),Be(cn.Container,{children:[o.map((c,u)=>$(cn.Text,{text:c.text,position:{x:c.x,y:c.y},anchor:{x:.5,y:.5},style:Ta({fontSize:11,alpha:1,dropShadow:!0,dropShadowAlpha:.5,dropShadowColor:16776960,fill:16776960})},u)),!Mc(l)&&l>0&&e<t.locations.length&&n<t.locations.length&&$(cn.Text,{text:t.distanceMatrix[e][n].toFixed(2),position:{x:(t.locations[e].point[0]+t.locations[n].point[0])/2,y:(t.locations[e].point[1]+t.locations[n].point[1])/2},anchor:{x:.5,y:.5},style:Ta({fontSize:15,fill:16711680,dropShadow:!1,dropShadowAlpha:.1,dropShadowBlur:1,dropShadowColor:0})})]})]})},T3e=t=>{const[e,n]=P.useState(null);return $(cn.Container,{children:$(cn.Graphics,{draw:r=>{r.clear();const i=100,s=Math.ceil(2e3/i)+1,o=Math.ceil(2e3/i)+1;for(let a=-s;a<s;a++)for(let l=-o;l<o;l++)(a+l)%2===0?r.beginFill(16777215,.001+t.backgroundAlpha):r.beginFill(255,.001+.05*t.backgroundAlpha),r.drawRect(a*i,l*i,i,i),r.endFill()},eventMode:"static",onmousedown:r=>{n([r.clientX,r.clientY])},onmouseup:r=>{e&&r.clientX==e[0]&&r.clientY==e[1]&&(n(null),t.clearSelection())}})})},S3e=Dt.from(sK),C3e=Rn.memo(t=>{const e=P.useRef(null),[n,r]=P.useState(0),i=t.sessionState,s=i.locations,o=i.edges,a=t.focusedIndices,l=t.selectedIndices,c=t.draggingIndex!=null?i.locations[t.draggingIndex]:null,u=t.focusedIndices.length>0?Eg(i.locations,t.focusedIndices[0]):null,d=t.selectedIndices.length>0?Eg(i.locations,t.selectedIndices[0]):null,h=P.useCallback(()=>{r(.5)},[]),f=P.useCallback(()=>{r(0)},[]),p=P.useCallback((O,C)=>{e.current.style.cursor="pointer",c||t.onFocus([C])},[t.onFocus]),m=P.useCallback((O,C)=>{e.current.style.cursor="default",c||t.onUnfocus([C])},[t.onUnfocus]),b=P.useCallback((O,C)=>{},[]),y=P.useCallback((O,C)=>{O.preventDefault(),e.current.style.cursor="default",t.onPointerUp(O.clientX,O.clientY,C)},[t.onPointerUp]),x=P.useCallback(O=>{},[]),_=P.useCallback(()=>{t.onClearSelection()},[t.onClearSelection]),w=u??c??d,E=a.length>0?a[0]:t.draggingIndex&&t.draggingIndex>=0?t.draggingIndex:l.length>0?l[0]:-1,S=P.useCallback(O=>{t.overrideViewportCenter(O)},[t.overrideViewportCenter]),A=P.useCallback(()=>{h(),e.current.style.cursor="grabbing"},[]),k=P.useCallback(()=>{f(),e.current.style.cursor="default"},[t.viewportCenter]),M=P.useCallback(()=>{e.current.style.cursor="default"},[]),I=P.useCallback(O=>{h()},[]),B=P.useCallback(O=>{t.onMoved({x:O.viewport.center.x,y:O.viewport.center.y,zoom:O.viewport.scale.x})},[]),R=P.useCallback(({x:O,y:C,zoom:F})=>{t.onMovedEnd({x:O,y:C,zoom:F})},[]);return $("div",{ref:e,style:{zIndex:100},children:Be(cn.Stage,{width:t.width,height:t.height,options:{backgroundColor:RX,backgroundAlpha:.1},children:[Be(wke,{pause:t.draggingIndex!==null,boundingBox:t.boundingBox,screenWidth:t.width,screenHeight:t.height,viewportCenter:t.viewportCenter,onSetViewportCenter:S,onDragStart:A,onDragEnd:k,onPinchStart:h,onPinchEnd:f,onSnapStart:h,onSnapEnd:f,onSnapZoomStart:h,onSnapZoomEnd:f,onZoomed:I,onZoomedEnd:f,onMouseUp:M,onMoved:B,onMovedEnd:R,children:[$(T3e,{backgroundAlpha:n,clearSelection:_}),$(VOe,{focusedIndices:a,locations:s,width:t.width,height:t.height}),$(WOe,{selectedIndices:l,focusedIndices:a,locations:s,width:t.width,height:t.height}),a.length==2&&t.matrices.distanceMatrix&&a[0]<t.matrices.distanceMatrix.length&&a[1]<t.matrices.distanceMatrix[a[0]].length&&!Mc(t.matrices.distanceMatrix[a[0]][a[1]])&&$(A$,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:a,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix}),l.length==2&&!Mc(t.matrices.distanceMatrix[l[0]][l[1]])&&$(A$,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:l,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix,color:16724787}),$(XOe,{edges:o,locations:s,focusedIndices:a,selectedIndices:l}),$(qOe,{locations:s,selectedIndices:l,draggingIndex:t.draggingIndex,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDrag:t.onDrag,width:t.width,height:t.height,cityTexture:S3e,onPointerEnter:p,onPointerLeave:m,onPointerDown:b,onPointerUp:y,onPointerMove:x})]}),w&&$(HOe,{index:E,city:w,x:140,y:t.height-155})]})})});function GK({width:t,height:e,sessionState:n,uiState:r,matrices:i,overrideViewportCenter:s,onDragStart:o,onDragEnd:a,onDrag:l,onFocus:c,onUnfocus:u,onPointerUp:d,onClearSelection:h,onMovedEnd:f,onMoved:p}){return $(C3e,{width:t,height:e,boundingBox:{...AX(n.locations),paddingMarginRatio:IX},onDragStart:o,onDrag:l,onMoved:p,onMovedEnd:f,onDragEnd:a,onFocus:c,onUnfocus:u,onPointerUp:d,onClearSelection:h,draggingIndex:r.draggingIndex,sessionState:n,viewportCenter:r.viewportCenter,overrideViewportCenter:s,selectedIndices:r.selectedIndices,focusedIndices:r.focusedIndices,matrices:i})}const A3e=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=Uc(),[s,o]=qu(Th);return P.useEffect(()=>{o(a=>{const l=Cg[sn.Graph][0],c=f3({parameterSet:l,locations:[],edges:[],locationSerialNumber:0},[],4);return console.log(c),{...a,...c}})},[]),$(G3,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(230,255,230,0.6)",backgroundPanel:a=>$(GK,{...a})})};function kE(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const LN=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),P$=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);P$&&parseFloat(P$[1]);const P3e="3.4.14";function Oc(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Jx=typeof process!="object"||String(process)!=="[object process]"||process.browser,R3e=typeof window<"u"&&typeof window.orientation<"u",R$=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);R$&&parseFloat(R$[1]);function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function I3e(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M3e(t){var e=I3e(t,"string");return Oy(e)=="symbol"?e:String(e)}function V(t,e,n){return e=M3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class L3e{constructor(e,n){V(this,"name",void 0),V(this,"workerThread",void 0),V(this,"isRunning",!0),V(this,"result",void 0),V(this,"_resolve",()=>{}),V(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Oc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Oc(this.isRunning),this.isRunning=!1,this._reject(e)}}let g2=class{terminate(){}};const m2=new Map;function k3e(t){Oc(t.source&&!t.url||!t.source&&t.url);let e=m2.get(t.source||t.url);return e||(t.url&&(e=O3e(t.url),m2.set(t.url,e)),t.source&&(e=HK(t.source),m2.set(t.source,e))),Oc(e),e}function O3e(t){if(!t.startsWith("http"))return t;const e=N3e(t);return HK(e)}function HK(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function N3e(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function VK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(I$(t))r.add(t);else if(I$(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)VK(t[i],e,r)}}return n===void 0?Array.from(r):[]}function I$(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const v2=()=>{};class cL{static isSupported(){return typeof Worker<"u"&&Jx||typeof g2<"u"&&!Jx}constructor(e){V(this,"name",void 0),V(this,"source",void 0),V(this,"url",void 0),V(this,"terminated",!1),V(this,"worker",void 0),V(this,"onMessage",void 0),V(this,"onError",void 0),V(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Oc(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=v2,this.onError=s=>console.log(s),this.worker=Jx?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=v2,this.onError=v2,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||VK(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=k3e({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new g2(r,{eval:!1})}else if(this.source)e=new g2(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}let D3e=class{static isSupported(){return cL.isSupported()}constructor(e){V(this,"name","unnamed"),V(this,"source",void 0),V(this,"url",void 0),V(this,"maxConcurrency",1),V(this,"maxMobileConcurrency",1),V(this,"onDebug",()=>{}),V(this,"reuseWorkers",!0),V(this,"props",{}),V(this,"jobQueue",[]),V(this,"idleQueue",[]),V(this,"count",0),V(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new L3e(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new cL({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return R3e?this.maxMobileConcurrency:this.maxConcurrency}};const B3e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class fc{static isSupported(){return cL.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return fc._workerFarm=fc._workerFarm||new fc({}),fc._workerFarm.setProps(e),fc._workerFarm}constructor(e){V(this,"props",void 0),V(this,"workerPools",new Map),this.props={...B3e},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new D3e({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}V(fc,"_workerFarm",void 0);const F3e="latest";function z3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=F3e);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return Oc(i),i}function U3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P3e;Oc(t,"no worker provided");const n=t.version;return!(!e||!n)}function $3e(t,e){return!fc.isSupported()||!Jx&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function j3e(t,e,n,r,i){const s=t.id,o=z3e(t,n),l=fc.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",G3e.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function G3e(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function H3e(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function V3e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function W3e(t){const e=[];for await(const n of t)e.push(n);return V3e(...e)}let X3e="";const M$={};function Y3e(t){for(const e in M$)if(t.startsWith(e)){const n=M$[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(X3e).concat(t)),t}function q3e(t){return t&&typeof t=="object"&&t.isBuffer}function WK(t){if(q3e(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function XK(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function K3e(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const Z3e=t=>typeof t=="boolean",Sv=t=>typeof t=="function",Cb=t=>t!==null&&typeof t=="object",L$=t=>Cb(t)&&t.constructor==={}.constructor,Q3e=t=>t&&typeof t[Symbol.iterator]=="function",J3e=t=>t&&typeof t[Symbol.asyncIterator]=="function",df=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,hf=t=>typeof Blob<"u"&&t instanceof Blob,eNe=t=>t&&typeof t=="object"&&t.isBuffer,tNe=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Cb(t)&&Sv(t.tee)&&Sv(t.cancel)&&Sv(t.getReader),nNe=t=>Cb(t)&&Sv(t.read)&&Sv(t.pipe)&&Z3e(t.readable),YK=t=>tNe(t)||nNe(t),rNe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,iNe=/^([-\w.]+\/[-\w.+]+)/;function sNe(t){const e=iNe.exec(t);return e?e[1]:t}function k$(t){const e=rNe.exec(t);return e?e[1]:""}const qK=/\?.*/;function oNe(t){const e=t.match(qK);return e&&e[0]}function kN(t){return t.replace(qK,"")}function VS(t){return df(t)?t.url:hf(t)?t.name||"":typeof t=="string"?t:""}function ON(t){if(df(t)){const e=t,n=e.headers.get("content-type")||"",r=kN(e.url);return sNe(n)||k$(r)}return hf(t)?t.type||"":typeof t=="string"?k$(t):""}function aNe(t){return df(t)?t.headers["content-length"]||-1:hf(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function KK(t){if(df(t))return t;const e={},n=aNe(t);n>=0&&(e["content-length"]=String(n));const r=VS(t),i=ON(t);i&&(e["content-type"]=i);const s=await uNe(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function lNe(t){if(!t.ok){const e=await cNe(t);throw new Error(e)}}async function cNe(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function uNe(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=dNe(n);return"data:base64,".concat(r)}return null}function dNe(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function O$(t,e){if(typeof t=="string"){t=Y3e(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await KK(t)}function hNe(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Ab(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||hNe()}const Q_=globalThis.window||globalThis.self||globalThis.global,g0=globalThis.process||{},ZK=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ab();function fNe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let pNe=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=fNe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function gNe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function mNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function y2(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let OE;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(OE||(OE={}));const vNe=10;function N$(t){return typeof t!="string"?t:(t=t.toUpperCase(),OE[t]||OE.WHITE)}function yNe(t,e,n){if(!Ab&&typeof t=="string"){if(e){const r=N$(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=N$(n);t="\x1B[".concat(r+vNe,"m").concat(t,"\x1B[49m")}}return t}function bNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function NE(t,e){if(!t)throw new Error(e||"Assertion failed")}function Zf(){let t;if(Ab()&&Q_.performance){var e,n;t=Q_==null||(e=Q_.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in g0){var r;const i=g0==null||(r=g0.hrtime)===null||r===void 0?void 0:r.call(g0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Qf={debug:Ab()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},_Ne={enabled:!0,level:0};function Ho(){}const D$={},B$={once:!0};let NN=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=ZK,this._startTs=Zf(),this._deltaTs=Zf(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new pNe("__probe-".concat(this.id,"__"),_Ne),this.timeStamp("".concat(this.id," started")),bNe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Zf()-this._startTs).toPrecision(10))}getDelta(){return Number((Zf()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){NE(e,n)}warn(e){return this._getLogFunction(0,e,Qf.warn,arguments,B$)}error(e){return this._getLogFunction(0,e,Qf.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Qf.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Qf.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Qf.debug||Qf.info,arguments,B$)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Ho,r&&[r],{tag:TNe(n)}):Ho}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Ab()?ENe({image:i,message:s,scale:o}):wNe():Ho}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Ho)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=F$({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ho)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=QK(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=F$({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,NE(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Zf();const o=s.tag||s.message;if(s.once&&o)if(!D$[o])D$[o]=Zf();else return Ho;return n=xNe(this.id,s.message,s),r.bind(console,n,...s.args)}return Ho}};NN.VERSION=ZK;function QK(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return NE(Number.isFinite(e)&&e>=0),e}function F$(t){const{logLevel:e,message:n}=t;t.logLevel=QK(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return NE(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function xNe(t,e,n){if(typeof e=="string"){const r=n.time?mNe(gNe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=yNe(e,n.color,n.background)}return e}function wNe(t){return console.warn("removed"),Ho}function ENe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=y2(s,n,r);console.log(...o)},s.src=e,Ho}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...y2(e,n,r)),Ho;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...y2(s,n,r)),s.src=e.toDataURL(),Ho}return Ho}function TNe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const z$=new NN({id:"loaders.gl"});class SNe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class CNe{constructor(){V(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const JK={fetch:null,mimeType:void 0,nothrow:!1,log:new CNe,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:LN,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},ANe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function eZ(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const tZ=()=>{const t=eZ();return t.globalOptions=t.globalOptions||{...JK},t.globalOptions};function PNe(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],RNe(t,n),MNe(e,t,r)}function RNe(t,e){U$(t,null,JK,ANe,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};U$(r,n.id,i,s,e)}}function U$(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Cb(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)z$.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const d=INe(a,i);z$.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(d))()}}}}function INe(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function MNe(t,e,n){const i={...t.options||{}};return LNe(i,n),i.log===null&&(i.log=new SNe),$$(i,tZ()),$$(i,e),i}function $$(t,e){for(const n in e)if(n in e){const r=e[n];L$(r)&&L$(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function LNe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function DN(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function BN(t){var e,n;kE(t,"null loader"),kE(DN(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const nZ=()=>{const t=eZ();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function kNe(t){const e=nZ();t=Array.isArray(t)?t:[t];for(const n of t){const r=BN(n);e.find(i=>r===i)||e.unshift(r)}}function ONe(){return nZ()}const NNe=new NN({id:"loaders.gl"}),DNe=/\.([^.]+)$/;async function BNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!rZ(t))return null;let i=j$(t,e,{...n,nothrow:!0},r);if(i)return i;if(hf(t)&&(t=await t.slice(0,10).arrayBuffer(),i=j$(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(iZ(t));return i}function j$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!rZ(t))return null;if(e&&!Array.isArray(e))return BN(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...ONe()),zNe(i);const s=FNe(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(iZ(t));return s}function FNe(t,e,n,r){const i=VS(t),s=ON(t),o=kN(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=b2(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||UNe(e,o),l=l||(a?"matched url ".concat(o):""),a=a||b2(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||jNe(e,t),l=l||(a?"matched initial data ".concat(sZ(t)):""),a=a||b2(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;NNe.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function rZ(t){return!(t instanceof Response&&t.status===204)}function iZ(t){const e=VS(t),n=ON(t);let r="No valid loader found (";r+=e?"".concat(XK(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?sZ(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function zNe(t){for(const e of t)BN(e)}function UNe(t,e){const n=e&&DNe.exec(e),r=n&&n[1];return r?$Ne(t,r):null}function $Ne(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function b2(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function jNe(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(GNe(e,n))return n}else if(ArrayBuffer.isView(e)){if(G$(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&G$(e,0,n))return n;return null}function GNe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function G$(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>HNe(t,e,n,i))}function HNe(t,e,n,r){if(r instanceof ArrayBuffer)return H3e(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=uL(t,e,r.length);return r===i;default:return!1}}function sZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?uL(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?uL(t,0,e):""}function uL(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const VNe=256*1024;function*WNe(t,e){const n=(e==null?void 0:e.chunkSize)||VNe;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const XNe=256*1024;function YNe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=XNe}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const qNe=1024*1024;async function*KNe(t,e){const n=(e==null?void 0:e.chunkSize)||qNe;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function H$(t,e){return LN?ZNe(t,e):QNe(t)}async function*ZNe(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield WK(o)}}catch{n.releaseLock()}}async function*QNe(t,e){for await(const n of t)yield WK(n)}function JNe(t,e){if(typeof t=="string")return WNe(t,e);if(t instanceof ArrayBuffer)return YNe(t,e);if(hf(t))return KNe(t,e);if(YK(t))return H$(t,e);if(df(t))return H$(t.body,e);throw new Error("makeIterator")}const oZ="Cannot convert supplied data type";function eDe(t,e,n){if(e.text&&typeof t=="string")return t;if(eNe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(oZ)}async function tDe(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return eDe(t,e);if(hf(t)&&(t=await KK(t)),df(t)){const i=t;return await lNe(i),e.binary?await i.arrayBuffer():await i.text()}if(YK(t)&&(t=JNe(t,n)),Q3e(t)||J3e(t))return W3e(t);throw new Error(oZ)}function aZ(t,e){const n=tZ(),r=t||n;return typeof r.fetch=="function"?r.fetch:Cb(r.fetch)?i=>O$(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:O$}function nDe(t,e,n){if(n)return n;const r={fetch:aZ(e,t),...t};if(r.url){const i=kN(r.url);r.baseUrl=i,r.queryString=oNe(r.url),r.filename=XK(i),r.baseUrl=K3e(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function rDe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function FN(t,e,n,r){Oc(!r||typeof r=="object"),e&&!Array.isArray(e)&&!DN(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=VS(t),o=rDe(e,r),a=await BNe(t,o,n);return a?(n=PNe(n,a,o,i),r=nDe({url:i,parse:FN,loaders:o},n,r||null),await iDe(a,t,n,r)):null}async function iDe(t,e,n,r){if(U3e(t),df(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,d=Object.fromEntries(i.headers.entries());r.response={headers:d,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await tDe(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if($3e(t,n))return await j3e(t,e,n,r,FN);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Oc(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function dL(t,e,n,r){!Array.isArray(e)&&!DN(e)&&(n=e,e=void 0);const i=aZ(n);let s=t;return typeof t=="string"&&(s=await i(t)),hf(t)&&(s=await i(t)),await FN(s,e,n)}const sDe="3.4.14",{_parseImageNode:oDe}=globalThis,hL=typeof Image<"u",fL=typeof ImageBitmap<"u",aDe=!!oDe,pL=LN?!0:aDe;function lDe(t){switch(t){case"auto":return fL||hL||pL;case"imagebitmap":return fL;case"image":return hL;case"data":return pL;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function cDe(){if(fL)return"imagebitmap";if(hL)return"image";if(pL)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function uDe(t){const e=hDe(t);if(!e)throw new Error("Not an image");return e}function dDe(t){switch(uDe(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function hDe(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const fDe=/^data:image\/svg\+xml/,pDe=/\.svg((\?|#).*)?$/;function zN(t){return t&&(fDe.test(t)||pDe.test(t))}function gDe(t,e){if(zN(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return lZ(t,e)}function lZ(t,e){if(zN(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function cZ(t,e,n){const r=gDe(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await mDe(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function mDe(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const vDe={};let V$=!0;async function yDe(t,e,n){let r;zN(n)?r=await cZ(t,e,n):r=lZ(t,n);const i=e&&e.imagebitmap;return await bDe(r,i)}async function bDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((_De(e)||!V$)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),V$=!1}return await createImageBitmap(t)}function _De(t){for(const e in t||vDe)return!1;return!0}function xDe(t){return!SDe(t,"ftyp",4)||!(t[8]&96)?null:wDe(t)}function wDe(t){switch(EDe(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function EDe(t,e,n){return String.fromCharCode(...t.slice(e,n))}function TDe(t){return[...t].map(e=>e.charCodeAt(0))}function SDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=TDe(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const Sl=!1,Cv=!0;function uZ(t){const e=Pb(t);return ADe(e)||IDe(e)||PDe(e)||RDe(e)||CDe(e)}function CDe(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=xDe(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function ADe(t){const e=Pb(t);return e.byteLength>=24&&e.getUint32(0,Sl)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Sl),height:e.getUint32(20,Sl)}:null}function PDe(t){const e=Pb(t);return e.byteLength>=10&&e.getUint32(0,Sl)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Cv),height:e.getUint16(8,Cv)}:null}function RDe(t){const e=Pb(t);return e.byteLength>=14&&e.getUint16(0,Sl)===16973&&e.getUint32(2,Cv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Cv),height:e.getUint32(22,Cv)}:null}function IDe(t){const e=Pb(t);if(!(e.byteLength>=3&&e.getUint16(0,Sl)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=MDe();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Sl);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Sl),width:e.getUint16(s+7,Sl)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,Sl)}return null}function MDe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Pb(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function LDe(t,e){const{mimeType:n}=uZ(t)||{},r=globalThis._parseImageNode;return kE(r),await r(t,n)}async function kDe(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=ODe(i);let a;switch(o){case"imagebitmap":a=await yDe(t,e,s);break;case"image":a=await cZ(t,e,s);break;case"data":a=await LDe(t);break;default:kE(!1)}return i==="data"&&(a=dDe(a)),a}function ODe(t){switch(t){case"auto":case"data":return cDe();default:return lDe(t),t}}const NDe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],DDe=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],BDe={image:{type:"auto",decode:!0}},FDe={id:"image",module:"images",name:"Images",version:sDe,mimeTypes:DDe,extensions:NDe,parse:kDe,tests:[t=>!!uZ(new DataView(t))],options:BDe};function dZ(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Vc(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||dZ()}const ew={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},J_=ew.window||ew.self||ew.global,m0=ew.process||{},hZ=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Vc();const _2=globalThis;function fZ(t){if(!t&&!Vc())return"Node";if(dZ(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":_2.chrome?"Chrome":_2.safari?"Safari":_2.mozInnerScreenX?"Firefox":"Unknown"}function zDe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class UDe{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";V(this,"storage",void 0),V(this,"id",void 0),V(this,"config",void 0),this.storage=zDe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function $De(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function jDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function x2(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let DE;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(DE||(DE={}));function W$(t){return typeof t=="string"?DE[t.toUpperCase()]||DE.WHITE:t}function GDe(t,e,n){return!Vc&&typeof t=="string"&&(e&&(e=W$(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=W$(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function HDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function BE(t,e){if(!t)throw new Error(e||"Assertion failed")}function Jf(){let t;if(Vc&&"performance"in J_){var e,n;t=J_==null||(e=J_.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in m0){var r;const i=m0==null||(r=m0.hrtime)===null||r===void 0?void 0:r.call(m0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const ep={debug:Vc&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},VDe={enabled:!0,level:0};function Vo(){}const X$={},Y$={once:!0};class UN{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};V(this,"id",void 0),V(this,"VERSION",hZ),V(this,"_startTs",Jf()),V(this,"_deltaTs",Jf()),V(this,"_storage",void 0),V(this,"userData",{}),V(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new UDe("__probe-".concat(this.id,"__"),VDe),this.timeStamp("".concat(this.id," started")),HDe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Jf()-this._startTs).toPrecision(10))}getDelta(){return Number((Jf()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){BE(e,n)}warn(e){return this._getLogFunction(0,e,ep.warn,arguments,Y$)}error(e){return this._getLogFunction(0,e,ep.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,ep.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,ep.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,ep.debug||ep.info,arguments,Y$)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Vo,r&&[r],{tag:qDe(n)}):Vo}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Vc?YDe({image:i,message:s,scale:o}):XDe():Vo}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Vo)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=q$({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Vo)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=pZ(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=q$({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,BE(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Jf();const o=s.tag||s.message;if(s.once)if(!X$[o])X$[o]=Jf();else return Vo;return n=WDe(this.id,s.message,s),r.bind(console,n,...s.args)}return Vo}}V(UN,"VERSION",hZ);function pZ(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return BE(Number.isFinite(e)&&e>=0),e}function q$(t){const{logLevel:e,message:n}=t;t.logLevel=pZ(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return BE(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function WDe(t,e,n){if(typeof e=="string"){const r=n.time?jDe($De(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=GDe(e,n.color,n.background)}return e}function XDe(t){return console.warn("removed"),Vo}function YDe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=x2(s,n,r);console.log(...o)},s.src=e,Vo}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...x2(e,n,r)),Vo;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...x2(s,n,r)),s.src=e.toDataURL(),Vo}return Vo}function qDe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Un=new UN({id:"deck"});let gL={};function KDe(t){gL=t}function qi(t,e,n,r){Un.level>0&&gL[t]&&gL[t].call(null,e,n,r)}function ZDe(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const QDe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:ZDe,parseTextSync:JSON.parse};function JDe(){const t="8.9.34",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Un.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Un,_registerLoggers:KDe},kNe([QDe,[FDe,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const eBe=JDe(),xn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(xn,"IDENTITY",{get:()=>(Un.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Pl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ny={common:0,meters:1,pixels:2},K$={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Tt=new UN({id:"luma.gl"});function ps(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const tBe="Invalid WebGLRenderingContext",nBe="Requires WebGL2";function WS(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function un(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function rBe(t){return un(t)?t:null}function XS(t){return ps(WS(t),tBe),t}function ms(t){return ps(un(t),nBe),t}const W0={};function iBe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function sBe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function oBe(t,e){W0[t]=!0,e!==void 0&&iBe(e)}function aBe(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(W0[r]=!0);while(r!==0);for(r in W0)if(W0[r])return delete W0[r],parseInt(r,10);return 0}}const Rb=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Rb.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Rb.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const ff=function(e){const n=this;this.gl=e,aBe(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const d=n.currentVertexArrayObject;d.maxAttrib=Math.max(d.maxAttrib,s);const h=d.attribs[s];return h.buffer=n.currentArrayBuffer,h.size=o,h.type=a,h.normalized=l,h.stride=c,h.offset=u,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{sBe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};ff.prototype.VERTEX_ARRAY_BINDING_OES=34229;ff.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Rb(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};ff.prototype.createVertexArrayOES=function(){const e=new Rb(this);return this.vertexArrayObjects.push(e),e};ff.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};ff.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Rb&&e.hasBeenBound&&e.ext===this)};ff.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){oBe(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let d=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),d=!0),(d||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function lBe(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ff(this)),this.__OESVertexArrayObject))}}const Z$="OES_element_index",Q$="WEBGL_draw_buffers",cBe="EXT_disjoint_timer_query",uBe="EXT_disjoint_timer_query_webgl2",dBe="EXT_texture_filter_anisotropic",J$="WEBGL_debug_renderer_info",hBe=35723,fBe=4352,pBe=36795,gBe=34047,mBe=37445,vBe=37446,Xn=t=>un(t)?void 0:0,yBe={3074:t=>un(t)?void 0:36064,[hBe]:t=>un(t)?void 0:fBe,35977:Xn,32937:Xn,[pBe]:(t,e)=>{const n=un(t)?t.getExtension(uBe):t.getExtension(cBe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[mBe]:(t,e)=>{const n=t.getExtension(J$);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[vBe]:(t,e)=>{const n=t.getExtension(J$);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[gBe]:(t,e)=>{const n=t.luma.extensions[dBe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Xn,35071:Xn,37447:Xn,36063:(t,e)=>{if(!un(t)){const n=t.getExtension(Q$);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Xn,35374:Xn,35377:Xn,34852:t=>{if(!un(t)){const e=t.getExtension(Q$);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Z$)?2147483647:65535,33001:t=>t.getExtension(Z$)?16777216:65535,33e3:t=>16777216,37157:Xn,35373:Xn,35657:Xn,36183:Xn,37137:Xn,34045:Xn,35978:Xn,35979:Xn,35968:Xn,35376:Xn,35375:Xn,35659:Xn,37154:Xn,35371:Xn,35658:Xn,35076:Xn,35077:Xn,35380:Xn};function bBe(t,e,n){const r=yBe[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const _Be="OES_vertex_array_object",gZ="ANGLE_instanced_arrays",xBe="WEBGL_draw_buffers",wBe="EXT_disjoint_timer_query",EBe="EXT_texture_filter_anisotropic",TBe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function SBe(t,e){return{webgl2:un(t),ext:t.getExtension(e)}}const mZ={[_Be]:{meta:{suffix:"OES"},createVertexArray:()=>{ps(!1,TBe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[gZ]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){ps(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[xBe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{ps(!1)}},[wBe]:{meta:{suffix:"EXT"},createQuery:()=>{ps(!1)},deleteQuery:()=>{ps(!1)},beginQuery:()=>{ps(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},w2={readBuffer:(t,e,n)=>{un(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=SBe(t,gZ);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!un(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!un(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[EBe];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:bBe,hint(t,e,n,r){return e(n,r)}};function CBe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(lBe(t),ABe(t),RBe(t,mZ),PBe(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=CBe;function ABe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function PBe(t,e){let{target:n,target2:r}=e;Object.keys(w2).forEach(i=>{if(typeof w2[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=w2[i].bind(null,t,s);n[i]=o,r[i]=o}})}function RBe(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&IBe(t,{extension:n,target:t.luma,target2:t})}function IBe(t,e){let{extension:n,target:r,target2:i}=e;const s=mZ[n];ps(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let d=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?d=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(d=s[c].bind(r))),d&&(r[c]=d,i[c]=d)}}const $N={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},uu=(t,e,n)=>e?t.enable(n):t.disable(n),ej=(t,e,n)=>t.hint(n,e),Zs=(t,e,n)=>t.pixelStorei(n,e),MBe=(t,e)=>{const n=un(t)?36009:36160;return t.bindFramebuffer(n,e)},LBe=(t,e)=>t.bindFramebuffer(36008,e);function v0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const kBe={3042:uu,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:uu,2885:(t,e)=>t.cullFace(e),2929:uu,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:uu,35723:ej,36006:MBe,2886:(t,e)=>t.frontFace(e),33170:ej,2849:(t,e)=>t.lineWidth(e),32823:uu,32824:"polygonOffset",10752:"polygonOffset",35977:uu,32938:"sampleCoverage",32939:"sampleCoverage",3089:uu,3088:(t,e)=>t.scissor(...e),2960:uu,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Zs,3317:Zs,37440:Zs,37441:Zs,37443:Zs,3330:Zs,3332:Zs,3331:Zs,36010:LBe,3314:Zs,32878:Zs,3316:Zs,3315:Zs,32877:Zs,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=v0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=v0(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=v0(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=v0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=v0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Tr(t,e,n){return e[t]!==void 0?e[t]:n[t]}const OBe={blendEquation:(t,e,n)=>t.blendEquationSeparate(Tr(32777,e,n),Tr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Tr(32969,e,n),Tr(32968,e,n),Tr(32971,e,n),Tr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Tr(32824,e,n),Tr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Tr(32938,e,n),Tr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Tr(2962,e,n),Tr(2967,e,n),Tr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Tr(34816,e,n),Tr(36003,e,n),Tr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Tr(2964,e,n),Tr(2965,e,n),Tr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Tr(34817,e,n),Tr(34818,e,n),Tr(34819,e,n))},tj={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},dl=(t,e)=>t.isEnabled(e),nj={3042:dl,2884:dl,2929:dl,3024:dl,32823:dl,32926:dl,32928:dl,3089:dl,2960:dl,35977:dl};function vZ(t){for(const e in t)return!1;return!0}function NBe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function rj(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function DBe(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function BBe(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class FBe{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?UBe(e):Object.assign({},$N),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){ps(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Nc(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){ps(s!==void 0);const o=e[s],a=this.cache[s];NBe(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function yZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(ps(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new FBe(t,{copyState:r}),BBe(t);for(const s in tj){const o=tj[s];DBe(t,s,o)}rj(t,"getParameter"),rj(t,"isEnabled")}return t.state.enable=n,t}function zBe(t){t.state||yZ(t,{copyState:!1}),t.state.push()}function ij(t){ps(t.state),t.state.pop()}function Nc(t,e){if(ps(WS(t),"setParameters requires a WebGL context"),vZ(e))return;const n={};for(const i in e){const s=Number(i),o=kBe[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=OBe[i];s(t,e,r)}}function UBe(t,e){if(e=e||$N,typeof e=="number"){const i=e,s=nj[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=nj[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function $Be(t){Nc(t,$N)}function Ha(t,e,n){if(vZ(e))return n(t);const{nocatch:r=!0}=e;zBe(t),Nc(t,e);let i;if(r)i=n(t),ij(t);else try{i=n(t)}finally{ij(t)}return i}function Og(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function E2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Og(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return GBe(e,r,i,s,n)}function jBe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function GBe(t,e,n,r,i){const s=sj(t[0],e,n);let o=oj(t[1],e,r,i),a=sj(t[0]+1,e,n);const l=a===n-1?a:a-1;a=oj(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function sj(t,e,n){return Math.min(Math.round(t*e),n-1)}function oj(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const jN=Vc(),HBe=jN&&typeof document<"u",bZ={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function _Z(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ps(jN,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},bZ,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=YBe({canvas:s,width:e,height:n,onError:r});return i=XBe(o,t),i?(i=GN(i,t),qBe(i),i):null}function GN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||KBe(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},bZ,e);const{manageState:n,debug:r}=e;return n&&yZ(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return Tt.log(1,...s)()}}),jN&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Tt.level=Math.max(Tt.level,1)):Tt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function VBe(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function WBe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=jBe(e.useDevicePixels);ZBe(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function XBe(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function YBe(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(HBe&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function qBe(t){const e=un(t)?"WebGL2":"WebGL1",n=VBe(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Tt.info(1,"".concat(e).concat(i," context ").concat(r))()}function KBe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function ZBe(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Tt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(Tt.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function aj(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class lj{constructor(e,n){V(this,"name",void 0),V(this,"type",void 0),V(this,"sampleSize",1),V(this,"time",void 0),V(this,"count",void 0),V(this,"samples",void 0),V(this,"lastTiming",void 0),V(this,"lastSampleTime",void 0),V(this,"lastSampleCount",void 0),V(this,"_count",0),V(this,"_time",0),V(this,"_samples",0),V(this,"_startTime",0),V(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=aj(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(aj()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class HN{constructor(e){V(this,"id",void 0),V(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof lj?this.stats[n]=e:this.stats[n]=new lj(n,r)),this.stats[n]}}const Av="8.5.21",QBe="set luma.log.level=1 (or higher) to trace rendering";class JBe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new HN({id:e})),this.stats.get(e)}}const ph=new JBe;if(globalThis.luma&&globalThis.luma.VERSION!==Av)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Av));globalThis.luma||(Vc()&&Tt.log(1,"luma.gl ".concat(Av," - ").concat(QBe))(),globalThis.luma=globalThis.luma||{VERSION:Av,version:Av,log:Tt,stats:ph,globals:{modules:{},nodeIO:{}}});function eFe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function tFe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function dt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function T2(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return dt(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Ju(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const S2={};function dd(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";S2[t]=S2[t]||1;const e=S2[t]++;return"".concat(t,"-").concat(e)}function cj(t){return dt(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Ng(t){let e=!0;for(const n in t){e=!1;break}return e}function xZ(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw Tt.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const tp="Resource subclass must define virtual methods";let Wc=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};XS(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||dd(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=T2(this.gl,e),dt(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=un(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=un(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const d=r?Ju(this.gl,l):l;o[d]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[d]=Ju(this.gl,o[d]))}}return o}setParameter(e,n){e=T2(this.gl,e),dt(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=un(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=T2(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return xZ(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(tp)}_deleteHandle(){throw new Error(tp)}_bindHandle(e){throw new Error(tp)}_getOptsFromHandle(){throw new Error(tp)}_getParameter(e,n){throw new Error(tp)}_setParameter(e,n){throw new Error(tp)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=ph.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];ph.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=ph.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=ph.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const nFe="Failed to deduce GL constant from typed array";function mL(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(nFe)}}function Dy(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function rFe(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function iFe(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function vL(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";Tt.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];Tt.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];Tt.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const sFe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},oFe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class oo{static getBytesPerElement(e){return Dy(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return dt(e.size),Dy(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new oo(sFe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return oo.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return oo.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=vL("Accessor",e,oFe),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const uj=10,wZ={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},aFe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:wZ},lFe={removedProps:wZ};let zn=class extends Wc{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/oo.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/oo.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=vL("Buffer",e,aFe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=vL("Buffer",e,lFe),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new oo(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;dt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(ms(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return ms(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ms(this.gl);const s=Dy(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,dt(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(dt(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(uj,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;dt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,uj),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=mL(e);return dt(s),this.setAccessor(new oo(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;dt(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Dy(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new oo(this.accessor,{type:mL(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Tt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Tt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Tt.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Tt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new oo(this.accessor,e),this}};const VN={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},EZ={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},TZ={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function cFe(t,e){const n=VN[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=un(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function uFe(t,e){const n=VN[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const dFe=[9729,9728],dj=globalThis.WebGLBuffer||function(){};class Dg extends Wc{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&cFe(e,r),s=s&&(!i||uFe(e,r))),s}constructor(e,n){const{id:r=dd("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(x=>this.initialize(Object.assign({},e,{pixels:x,data:x}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:d,height:h,dataFormat:f,type:p,compressed:m=!1,mipmaps:b=!0}=e;const{depth:y=0}=e;return{width:d,height:h,compressed:m,dataFormat:f,type:p}=this._deduceParameters({format:s,type:p,dataFormat:f,compressed:m,data:n,width:d,height:h}),this.width=d,this.height=h,this.depth=y,this.format=s,this.type=p,this.dataFormat=f,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),b&&this._isNPOT()&&(Tt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),b=!1,this._updateForNPOT(l)),this.mipmaps=b,this.setImageData({data:n,width:d,height:h,depth:y,format:s,type:p,dataFormat:f,border:o,mipmaps:b,parameters:c,compressed:m}),b&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Tt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ha(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:d=this.width,height:h=this.height,dataFormat:f=this.dataFormat,compressed:p=!1}=e;c||(c=r),{type:u,dataFormat:f,compressed:p,width:d,height:h}=this._deduceParameters({format:s,type:u,dataFormat:f,compressed:p,data:c,width:d,height:h});const{gl:m}=this;m.bindTexture(this.target,this.handle);let b=null;({data:c,dataType:b}=this._getDataType({data:c,compressed:p}));let y,x=0;if(Ha(this.gl,l,()=>{switch(b){case"null":m.texImage2D(n,i,s,d,h,o,f,u,c);break;case"typed-array":m.texImage2D(n,i,s,d,h,o,f,u,c,a);break;case"buffer":y=ms(m),y.bindBuffer(35052,c.handle||c),y.texImage2D(n,i,s,d,h,o,f,u,a),y.bindBuffer(35052,null);break;case"browser-object":un(m)?m.texImage2D(n,i,s,d,h,o,f,u,c):m.texImage2D(n,i,s,f,u,c);break;case"compressed":for(const[_,w]of c.entries())m.compressedTexImage2D(n,_,w.format,w.width,w.height,o,w.data),x+=w.levelSize;break;default:dt(!1,"Unknown image data type")}}),b==="compressed")this._trackAllocatedMemory(x,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const _=EZ[this.dataFormat]||4,w=TZ[this.type]||1;this._trackAllocatedMemory(this.width*this.height*_*w,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:d=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:p=0,border:m=this.border,parameters:b={}}=e;if({type:d,dataFormat:h,compressed:f,width:a,height:l}=this._deduceParameters({format:u,type:d,dataFormat:h,compressed:f,data:i,width:a,height:l}),dt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const y=i;i=y.data,a=y.shape[0],l=y.shape[1]}i instanceof zn&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Ha(this.gl,b,()=>{if(f)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,h,d,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,h,d,i,p);else if(i instanceof dj){const y=ms(this.gl);y.bindBuffer(35052,i),y.texSubImage2D(n,c,s,o,a,l,h,d,p),y.bindBuffer(35052,null)}else un(this.gl)?ms(this.gl).texSubImage2D(n,c,s,o,a,l,h,d,i):this.gl.texSubImage2D(n,c,s,o,h,d,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Tt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof zn?{data:n.handle,dataType:"buffer"}:n instanceof dj?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=VN[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},dt(i,"Could not deduced texture size"),dt(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),dt(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:dt(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return un(this.gl)||!this.width||!this.height?!1:!cj(this.width)||!cj(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:dFe.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let hFe="";function fFe(t,e){return dt(typeof t=="string"),t=hFe+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class Ya extends Dg{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Dg.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};XS(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:fFe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const yL=[34069,34070,34071,34072,34073,34074];class SZ extends Dg{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};XS(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,d=await Promise.all(yL.map(h=>{const f=u[h];return Promise.all(Array.isArray(f)?f:[f])}));this.bind(),yL.forEach((h,f)=>{d[f].length>1&&this.opts.mipmaps!==!1&&Tt.warn("".concat(this.id," has mipmap and multiple LODs."))(),d[f].forEach((p,m)=>{n&&r?c.texImage2D(h,m,a,n,r,o,a,l,p):c.texImage2D(h,m,a,a,l,p)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,d=s||o;return this.bind(),d instanceof Promise?d.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,d):u.texImage2D(n,0,l,l,c,d),this}}SZ.FACES=yL;class pFe extends Dg{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return un(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ms(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:d,parameters:h={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ha(this.gl,h,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,d),d instanceof zn&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{const f=EZ[this.dataFormat]||4,p=TZ[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*f*p,"Texture")}return this.loaded=!0,this}}const Gd="EXT_color_buffer_float",hj={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Gd,bpp:2},33327:{gl2:Gd,bpp:4},34842:{gl2:Gd,bpp:8},33326:{gl2:Gd,bpp:4},33328:{gl2:Gd,bpp:8},34836:{gl2:Gd,bpp:16},35898:{gl2:Gd,bpp:4}};function gFe(t,e,n){const r=n[e];if(!r)return!1;const i=un(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class Op extends Wc{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||gFe(e,n,hj)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return dt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&un(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*hj[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const mFe=256,vFe=1024,yFe=16384,fj=6144,pj=6145,gj=6146,mj=34041,CZ="clear: bad arguments";function WN(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=yFe,n!==!0&&(s.clearColor=n)),r&&(o|=mFe,r!==!0&&(s.clearDepth=r)),i&&(o|=vFe,r!==!0&&(s.clearStencil=r)),dt(o!==0,CZ),Ha(t,s,()=>{t.clear(o)})}function bFe(t){let{framebuffer:e=null,buffer:n=fj,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ms(t),Ha(t,{framebuffer:e},()=>{switch(n){case fj:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case pj:t.clearBufferfv(pj,0,[i]);break;case gj:t.clearBufferiv(gj,0,[i]);break;case mj:const[s,o]=i;t.clearBufferfi(mj,0,s,o);break;default:dt(!1,CZ)}})}function _Fe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return dt(!1),0}}function YS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=xFe(t);dt(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,s===36064&&f===null&&(s=1028),dt(p[s]),c=c||p[s].type,o=wFe(o,c,i,a,l),c=c||mL(o);const m=h.bindFramebuffer(36160,f);return h.readPixels(n,r,a,l,i,c,o),h.bindFramebuffer(36160,m||null),d&&u.delete(),o}function vj(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=YS(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=iFe({data:r,width:i,height:s}));rFe({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function xFe(t){return t instanceof li?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:LFe(t),deleteFramebuffer:!0}}function wFe(t,e,n,r,i){if(t)return t;e=e||5121;const s=Dy(e,{clamped:!1}),o=_Fe(n);return new s(r*i*o)}const rr={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function EFe(t){const e=new Ya(t,{format:6408,type:5126,dataFormat:6408}),n=new li(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const AZ={[rr.WEBGL2]:[!1,!0],[rr.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[rr.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[rr.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[rr.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[rr.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[rr.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[rr.FLOAT_BLEND]:["EXT_float_blend"],[rr.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[rr.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[rr.TEXTURE_FLOAT]:["OES_texture_float",!0],[rr.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[rr.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[rr.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[rr.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[rr.COLOR_ATTACHMENT_RGBA32F]:[EFe,"EXT_color_buffer_float"],[rr.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[rr.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[rr.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[rr.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[rr.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[rr.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},TFe=2;function SFe(t,e){return XN(t,e)}function XN(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>PZ(t,n))}function CFe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in AZ)t.luma.caps[e]===void 0&&(t.luma.caps[e]=PZ(t,e));return t.luma.caps}function PZ(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=AFe(t,e)),t.luma.caps[e]||Tt.log(TFe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function AFe(t,e){const n=AZ[e];dt(n,e);let r;const i=un(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:dt(!1);return r}const yj="Multiple render targets not supported";class li extends Wc{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new li(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ms(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ms(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if(dt(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const d in i){const h=i[d];(Array.isArray(h)?h[0]:h).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return dt(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Tt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){dt(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof Op)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,d=0,h=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:d,level:h})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(RFe(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&WN(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{bFe(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Tt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Tt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Tt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Tt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Tt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Tt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=ms(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Ju(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?Ju(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?Ju(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(vj(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Tt.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=vj(this,{targetMaxHeight:100});return Tt.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new Ya(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new Op(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new Op(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&dt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof Op?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:ms(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=PFe(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:dt(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=rBe(this.gl);n?n.readBuffer(e):dt(e===36064||e===1029,yj),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=ms(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):dt(e.length===1&&(e[0]===36064||e[0]===1029),yj)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=CFe(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function PFe(t){return t<34069?t+34069:t}function RFe(t){return(li.STATUS||{})[t]||"Framebuffer error ".concat(t)}const IFe=[36049,36048,33296,33298,33299,33300,33301,33302,33303];li.ATTACHMENT_PARAMETERS=IFe;function MFe(t,e){dt(t instanceof Ya||t instanceof SZ||t instanceof pFe);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,d=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,d)}function LFe(t,e){const{gl:n,width:r,height:i,id:s}=t;return new li(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function tw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const kFe=35632,OFe=35633;function NFe(t){switch(t){case kFe:return"fragment";case OFe:return"vertex";default:return"unknown type"}}function DFe(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||tw(e)||"(unnamed)",l="".concat(NFe(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const d=i[u];if(d.length<=1)continue;const h=d.split(":"),f=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));f!=="WARNING"?s[p]=d:o[p]=d}const c=BFe(e);return{shaderName:l,errors:bj(s,c),warnings:bj(o,c)}}function bj(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=RZ("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function BFe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return RZ(a,i-l)+n+s})}function RZ(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function IZ(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const FFe="Shader: GLSL source code must be a JavaScript string";class By extends Wc{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return dt(!1),"unknown"}}constructor(e,n){XS(e),dt(typeof n.source=="string",FFe);const r=tw(n.source,null)||n.id||dd("unnamed ".concat(By.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=tw(n,null);r&&(this.id=dd(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(By.getTypeName(this.shaderType),":").concat(this.id)}getName(){return tw(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=DFe(r,this.source,this.shaderType,this.id);throw Tt.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),Tt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class C2 extends By{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class A2 extends By{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const zFe={5126:er.bind(null,"uniform1fv",Qs,1,Vi),35664:er.bind(null,"uniform2fv",Qs,2,Vi),35665:er.bind(null,"uniform3fv",Qs,3,Vi),35666:er.bind(null,"uniform4fv",Qs,4,Vi),5124:er.bind(null,"uniform1iv",du,1,Vi),35667:er.bind(null,"uniform2iv",du,2,Vi),35668:er.bind(null,"uniform3iv",du,3,Vi),35669:er.bind(null,"uniform4iv",du,4,Vi),35670:er.bind(null,"uniform1iv",du,1,Vi),35671:er.bind(null,"uniform2iv",du,2,Vi),35672:er.bind(null,"uniform3iv",du,3,Vi),35673:er.bind(null,"uniform4iv",du,4,Vi),35674:er.bind(null,"uniformMatrix2fv",Qs,4,nc),35675:er.bind(null,"uniformMatrix3fv",Qs,9,nc),35676:er.bind(null,"uniformMatrix4fv",Qs,16,nc),35678:Mi,35680:Mi,5125:er.bind(null,"uniform1uiv",ex,1,Vi),36294:er.bind(null,"uniform2uiv",ex,2,Vi),36295:er.bind(null,"uniform3uiv",ex,3,Vi),36296:er.bind(null,"uniform4uiv",ex,4,Vi),35685:er.bind(null,"uniformMatrix2x3fv",Qs,6,nc),35686:er.bind(null,"uniformMatrix2x4fv",Qs,8,nc),35687:er.bind(null,"uniformMatrix3x2fv",Qs,6,nc),35688:er.bind(null,"uniformMatrix3x4fv",Qs,12,nc),35689:er.bind(null,"uniformMatrix4x2fv",Qs,8,nc),35690:er.bind(null,"uniformMatrix4x3fv",Qs,12,nc),35678:Mi,35680:Mi,35679:Mi,35682:Mi,36289:Mi,36292:Mi,36293:Mi,36298:Mi,36299:Mi,36300:Mi,36303:Mi,36306:Mi,36307:Mi,36308:Mi,36311:Mi},UFe={},$Fe={},jFe={},_j=[0];function YN(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(_j[0]=t,t=_j);const i=t.length;if(i%e&&Tt.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function Qs(t,e){return YN(t,e,Float32Array,UFe)}function du(t,e){return YN(t,e,Int32Array,$Fe)}function ex(t,e){return YN(t,e,Uint32Array,jFe)}function xj(t,e,n){const r=zFe[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function GFe(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function HFe(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!VFe(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function VFe(t){return Array.isArray(t)||ArrayBuffer.isView(t)?XFe(t):isFinite(t)||t===!0||t===!1||t instanceof Dg||t instanceof Op?!0:t instanceof li?!!t.texture:!1}function WFe(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function XFe(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Mi(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function er(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let d=!1;if(i===null)i=new Float32Array(u),s=u,d=!0;else{dt(s===u,"Uniform length cannot change.");for(let h=0;h<u;++h)if(c[h]!==i[h]){d=!0;break}}return d&&(r(o,t,a,c),i.set(c)),d}}function Vi(t,e,n,r){t[e](n,r)}function nc(t,e,n,r){t[e](n,!1,r)}const YFe=5120,qFe=5121,KFe=5122,ZFe=5123,wj=0,tx=1,QFe=2,JFe=3,nx=4,e4e=5,t4e=6,ni=5126,n4e=35664,r4e=35665,i4e=35666,y0=5124,s4e=35667,o4e=35668,a4e=35669,b0=5125,l4e=36294,c4e=36295,u4e=36296,d4e=35670,h4e=35671,f4e=35672,p4e=35673,g4e=35674,m4e=35675,v4e=35676,y4e=35685,b4e=35686,_4e=35687,x4e=35688,w4e=35689,E4e=35690,bL={[ni]:[ni,1,"float"],[n4e]:[ni,2,"vec2"],[r4e]:[ni,3,"vec3"],[i4e]:[ni,4,"vec4"],[y0]:[y0,1,"int"],[s4e]:[y0,2,"ivec2"],[o4e]:[y0,3,"ivec3"],[a4e]:[y0,4,"ivec4"],[b0]:[b0,1,"uint"],[l4e]:[b0,2,"uvec2"],[c4e]:[b0,3,"uvec3"],[u4e]:[b0,4,"uvec4"],[d4e]:[ni,1,"bool"],[h4e]:[ni,2,"bvec2"],[f4e]:[ni,3,"bvec3"],[p4e]:[ni,4,"bvec4"],[g4e]:[ni,8,"mat2"],[y4e]:[ni,8,"mat2x3"],[b4e]:[ni,8,"mat2x4"],[m4e]:[ni,12,"mat3"],[_4e]:[ni,12,"mat3x2"],[x4e]:[ni,12,"mat3x4"],[v4e]:[ni,16,"mat4"],[w4e]:[ni,16,"mat4x2"],[E4e]:[ni,16,"mat4x3"]};function T4e(t){switch(t){case wj:return wj;case tx:return tx;case JFe:return tx;case QFe:return tx;case nx:return nx;case e4e:return nx;case t4e:return nx;default:return dt(!1),0}}function Ej(t){const e=bL[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function MZ(t,e){switch(t){case YFe:case qFe:case KFe:case ZFe:t=ni;break}for(const n in bL){const[r,i,s]=bL[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class S4e{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!un(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=Ej(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new oo(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=Ej(r),a=new oo({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Tj=4,C4e=35981,A4e=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class LZ extends Wc{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",A4e),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=C4e}=e;return this.hash=n||"",this.vs=typeof r=="string"?new C2(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new A2(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,dt(this.vs instanceof C2),dt(this.fs instanceof A2),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ms(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new S4e(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:d=u>0,vertexArray:h=null,transformFeedback:f,framebuffer:p,parameters:m={},uniforms:b,samplers:y}=e;if((b||y)&&(Tt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(b||{})),Tt.priority>=n){const x=p?p.id:"default",_="mode=".concat(Ju(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(Ju(this.gl,c)," ")+"isInstanced=".concat(d," isIndexed=").concat(l," ")+"Framebuffer=".concat(x);Tt.log(n,_)()}return dt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||d&&u===0?!1:(h.bindForDraw(i,u,()=>{if(p!==void 0&&(m=Object.assign({},m,{framebuffer:p})),f){const x=T4e(r);f.begin(x)}this._bindTextures(),Ha(this.gl,m,()=>{l&&d?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&un(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):d?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),f&&f.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Tt.priority>=2&&HFe(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof li&&(s=s.texture),s instanceof Dg)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&WFe(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new C2({handle:i});break;case 35632:r.fs=new A2({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=dd(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Tt.time(Tj,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Tt.timeEnd(Tj,"linkProgram for ".concat(this._getName()))(),e.debug||Tt.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=GFe(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=xj(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=xj(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const P4e=34918,R4e=34919,I4e=35007,M4e=36795,L4e=35976,k4e=35887,O4e=36202;class FE extends Wc{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=un(e),i=XN(e,rr.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:dt(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(I4e)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?O4e:k4e)}beginTransformFeedbackQuery(){return this.begin(L4e)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,R4e);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(M4e)}getResult(){return this.gl2.getQueryParameter(this.handle,P4e)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return FE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class kZ extends Wc{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return un(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ms(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Ng(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Tt.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof zn?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let rx=null;function N4e(t){return(!rx||rx.byteLength<t)&&(rx=new ArrayBuffer(t)),rx}function D4e(t,e){const n=N4e(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function B4e(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const F4e="elements must be GL.ELEMENT_ARRAY_BUFFER";class no extends Wc{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?un(e)||fZ()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new no(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return no.MAX_ATTRIBUTES=no.MAX_ATTRIBUTES||e.getParameter(34921),no.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:no._setConstantFloatArray(e,n,r);break;case Int32Array:no._setConstantIntArray(e,n,r);break;case Uint32Array:no._setConstantUintArray(e,n,r);break;default:dt(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return no.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return dt(!e||e.target===34963,F4e),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:d,gl2:h}=this;return e=Number(e),this.bind(()=>{d.bindBuffer(34962,n.handle),c?(dt(un(d)),h.vertexAttribIPointer(e,i,s,o,a)):d.vertexAttribPointer(e,i,s,l,o,a),d.enableVertexAttribArray(e),h.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!no.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new zn(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=D4e(n.constructor,s);B4e({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:dt(!1)}}static _setConstantIntArray(e,n,r){switch(dt(un(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:dt(!1)}}static _setConstantUintArray(e,n,r){switch(dt(un(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:dt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return dt(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const z4e="VertexArray: attributes must be Buffers or constants (i.e. typed array)",U4e=/^(.+)__LOCATION_([0-9]+)$/,$4e=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class j4e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new no(e),xZ(this,"VertexArray","v6.0",$4e),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new zn(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof zn&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof zn&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,Tt.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=oo.resolve(l.accessor,c,r,i),{size:d,type:h}=u;return dt(Number.isFinite(d)&&Number.isFinite(h)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=U4e.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof zn)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof zn){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof zn){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(z4e)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(no.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){no.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof zn){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Tt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function G4e(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=Fy(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function Fy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return G4e(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Sj(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;dt(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const f of c)!f.match(s)&&!f.match(o)&&P2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;for(const f of c)f.match(o)&&P2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;for(const f of c)l[f]||P2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;let d=0;const h={};if(!i)for(const f in r){const p=r[f];l[f]||(d++,h[f]={Type:"NOT USED: ".concat(p),[e]:Fy(p)})}return{table:l,count:u,unusedTable:h,unusedCount:d}}function P2(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=H4e(o);return!s||!a?(e[i]={[n]:a?Fy(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function H4e(t){return t!=null}function V4e(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Cj(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(W4e(o.name,l))),r[a]=Cj(e,i[s],l,n)}}return r}function Cj(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,d;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof zn){const h=e,{data:f,changed:p}=h.getDebugData();u=p?"*":"",d=f,l=h.byteLength,a=l/f.BYTES_PER_ELEMENT/o;let m;if(n){const b=n.divisor>0;m="".concat(b?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(Ju(i,s),")")}else c=!0,m="".concat(l," bytes");return{[r]:"".concat(u).concat(Fy(d,{size:o,isInteger:c})),"Format ":m}}return d=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(Fy(d,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function W4e(t,e){const{type:n,size:r}=e,i=MZ(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function X4e(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=Aj(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=Aj(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function Aj(t){const{type:e,size:n}=t.accessor,r=MZ(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Pj=Vc()&&typeof document<"u";let Y4e=0;class q4e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=b=>_Z(b),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:d=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:f=!0,stats:p=ph.get("animation-loop-".concat(Y4e++))}=e;let{useDevicePixels:m=!0}=e;"useDevicePixelRatio"in e&&(Tt.deprecated("useDevicePixelRatio","useDevicePixels")(),m=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:d},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:f,useDevicePixels:m}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return dt(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=FE.isSupported(this.gl,["timers"])?new FE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Tt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Pj?new Promise((e,n)=>{if(Pj&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):tFe(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):eFe(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?GN(this.props.gl,e):this.onCreateContext(e),!WS(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");$Be(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&WBe(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new li(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Ib="vs",qN="fs";function bo(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const R2={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function K4e(t){const e={};for(const n in t){const r=t[n],i=Z4e(r);e[n]=i}return e}function Z4e(t){let e=Rj(t);return e==="object"?t?"type"in t?Object.assign({},t,R2[t.type]):"value"in t?(e=Rj(t.value),Object.assign({type:e},t,R2[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},R2[e])}function Rj(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const Q4e="vs",J4e="fs";class Ij{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:d,fragmentShader:h}=e;bo(typeof n=="string"),this.name=n,this.vs=r||d,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=e5e(u),o&&(this.uniforms=K4e(o))}getModuleSource(e){let n;switch(e){case Q4e:n=this.vs||"";break;case J4e:n=this.fs||"";break;default:bo(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&bo(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function e5e(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function t5e(t){return n5e(NZ(t))}function n5e(t){const e={},n={};return OZ({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function OZ(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&OZ({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function NZ(t,e){return t.map(n=>(n instanceof Ij||(bo(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),bo(n.name,"shader module has no name"),n=new Ij(n),n.dependencies=NZ(n.dependencies)),n))}function r5e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const i5e=7936,s5e=7937,o5e=7938,a5e=35724,KN={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},th={};Object.keys(KN).forEach(t=>{th[t]=t});function l5e(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function c5e(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||i5e),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||s5e);return{gpuVendor:u5e(n,r),vendor:n,renderer:r,version:t.getParameter(o5e),shadingLanguageVersion:t.getParameter(a5e)}}function u5e(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const I2={};function Mj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=KN[e];if(bo(r,e),!r5e(n))return!0;if(e in I2)return I2[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),I2[e]=l,l}function d5e(t,e){const n=KN[e];bo(n,e);const r=l5e(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return bo(i===!1||i===!0),i}function ix(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>d5e(t,n))}function h5e(t){switch(c5e(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function f5e(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return ix(t,th.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),ix(t,th.GLSL_DERIVATIVES)&&Mj(t,th.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),ix(t,th.GLSL_FRAG_DATA)&&Mj(t,th.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),ix(t,th.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const p5e=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,g5e=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,m5e={[Ib]:p5e,[qN]:g5e},nw="__LUMA_INJECT_DECLARATIONS__",Lj=/void\s+main\s*\([^)]*\)\s*\{\n?/,kj=/}\n?[^{}]*$/,M2=[];function Oj(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===Ib;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),M2.length=o.length;for(let l=0,c=o.length;l<c;++l)M2[l]=o[l].injection;const a="".concat(M2.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(nw,a));break;case"vs:#main-start":i&&(t=t.replace(Lj,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(kj,l=>a+l));break;case"fs:#decl":i||(t=t.replace(nw,a));break;case"fs:#main-start":i||(t=t.replace(Lj,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(kj,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(nw,""),r&&(t=t.replace(/\}\s*$/,s=>s+m5e[e])),t}function _L(t){const e={};return bo(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Bg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const DZ=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],v5e=[...DZ,[Bg("attribute"),"in $1"],[Bg("varying"),"out $1"]],y5e=[...DZ,[Bg("varying"),"in $1"]],BZ=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],b5e=[...BZ,[Bg("in"),"attribute $1"],[Bg("out"),"varying $1"]],_5e=[...BZ,[Bg("in"),"varying $1"]],xL="gl_FragColor",wL=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,x5e=/void\s+main\s*\([^)]*\)\s*\{\n?/;function w5e(t,e,n){switch(e){case 300:return n?zE(t,v5e):E5e(t);case 100:return n?zE(t,b5e):T5e(t);default:throw new Error("unknown GLSL version ".concat(e))}}function zE(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function E5e(t){t=zE(t,y5e);const e=t.match(wL);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(xL,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(x5e,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(xL,"\\b"),"g"),n)}return t}function T5e(t){t=zE(t,_5e);const e=t.match(wL);if(e){const n=e[1];t=t.replace(wL,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),xL)}return t}const S5e=`

`.concat(nw,`

`),FZ={[Ib]:"vertex",[qN]:"fragment"},C5e=`precision highp float;

`;function A5e(t,e){const{vs:n,fs:r}=e,i=t5e(e.modules||[]);return{gl:t,vs:Nj(t,Object.assign({},e,{source:n,type:Ib,modules:i})),fs:Nj(t,Object.assign({},e,{source:r,type:qN,modules:i})),getUniforms:P5e(i)}}function Nj(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=e;bo(typeof r=="string","shader source must be a string");const h=i===Ib,f=r.split(`
`);let p=100,m="",b=r;f[0].indexOf("#version ")===0?(p=300,m=f[0],b=f.slice(1).join(`
`)):m="#version ".concat(p);const y={};s.forEach(A=>{Object.assign(y,A.getDefines())}),Object.assign(y,o);let x=u?"".concat(m,`
`).concat(I5e({id:n,source:r,type:i}),`
`).concat(R5e({type:i}),`
`).concat(h5e(t),`
`).concat(f5e(t),`
`).concat(M5e(y),`
`).concat(h?"":C5e,`
`):"".concat(m,`
`);const _=k5e(a),w={},E={},S={};for(const A in l){const k=typeof l[A]=="string"?{injection:l[A],order:0}:l[A],M=A.match(/^(v|f)s:(#)?([\w-]+)$/);if(M){const I=M[2],B=M[3];I?B==="decl"?E[A]=[k]:S[A]=[k]:w[A]=[k]}else S[A]=[k]}for(const A of s){d&&A.checkDeprecations(b,d);const k=A.getModuleSource(i,p);x+=k;const M=A.injections[i];for(const I in M){const B=I.match(/^(v|f)s:#([\w-]+)$/);if(B){const O=B[2]==="decl"?E:S;O[I]=O[I]||[],O[I].push(M[I])}else w[I]=w[I]||[],w[I].push(M[I])}}return x+=S5e,x=Oj(x,i,E),x+=L5e(_[i],w),x+=b,x=Oj(x,i,S),x=w5e(x,c?100:p,h),x}function P5e(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function R5e(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(FZ[e].toUpperCase(),`
`)}function I5e(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(FZ[r],`

`):""}function M5e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function L5e(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function k5e(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const O5e="void main() {gl_FragColor = vec4(0);}",zZ=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,N5e=`#version 300 es
`.concat(zZ);function UZ(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function $Z(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?N5e:e>300?"#version ".concat(e,`
`).concat(zZ):O5e;const s=F5e(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function D5e(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return bo(!1),null}}function B5e(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return bo(!1),null}}function F5e(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return bo(!1),null}}const z5e=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,U5e={name:"fp32",vs:z5e,fs:null};function Dj(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const ho={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function $5e(t,{precision:e=ho.precision}={}){return t=j5e(t),"".concat(parseFloat(t.toPrecision(e)))}function Fg(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bu(t,e,n){return H5e(t,r=>Math.max(e,Math.min(n,r)))}function UE(t,e,n){return Fg(t)?t.map((r,i)=>UE(r,e[i],n)):n*e+(1-n)*t}function zy(t,e,n){const r=ho.EPSILON;n&&(ho.EPSILON=n);try{if(t===e)return!0;if(Fg(t)&&Fg(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!zy(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=ho.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{ho.EPSILON=r}}function j5e(t){return Math.round(t/ho.EPSILON)*ho.EPSILON}function G5e(t){return t.clone?t.clone():new Array(t.length)}function H5e(t,e,n){if(Fg(t)){const r=t;n=n||G5e(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function V5e(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class jZ extends V5e(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Fg(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(ho)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+$5e(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!zy(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(ho.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function W5e(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function so(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function L2(t,e,n=""){if(ho.debug&&!W5e(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class X5e extends jZ{get x(){return this[0]}set x(e){this[0]=so(e)}get y(){return this[1]}set y(e){this[1]=so(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return so(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return so(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Dj(e>=0&&e<this.ELEMENTS,"index is out of range"),so(this[e])}setComponent(e,n){return Dj(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var rw=1e-6,zg=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Y5e(){var t=new zg(2);return zg!=Float32Array&&(t[0]=0,t[1]=0),t}function Bj(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function q5e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function GZ(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function K5e(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=Y5e();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function Z5e(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function HZ(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function Q5e(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function J5e(){var t=new zg(3);return zg!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function eze(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function tze(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function nze(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function rze(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ize(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function VZ(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function sze(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function oze(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,d=s*a-r*c,h=r*l-i*a,f=i*h-s*d,p=s*u-r*h,m=r*d-i*u,b=o*2;return u*=b,d*=b,h*=b,f*=2,p*=2,m*=2,t[0]=a+u+f,t[1]=l+d+p,t[2]=c+h+m,t}function aze(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function lze(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function cze(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function uze(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,d=u&&rze(t,e)/u;return Math.acos(Math.min(Math.max(d,-1),1))}var dze=eze,hze=tze;(function(){var t=J5e();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const k2=[0,0,0];let sx;class $l extends X5e{static get ZERO(){return sx||(sx=new $l(0,0,0),Object.freeze(sx)),sx}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Fg(e)?this.copy(e):(ho.debug&&(so(e),so(n),so(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return ho.debug&&(so(e.x),so(e.y),so(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=so(e)}angle(e){return uze(this,e)}cross(e){return ize(this,this,e),this.check()}rotateX({radians:e,origin:n=k2}){return aze(this,this,n,e),this.check()}rotateY({radians:e,origin:n=k2}){return lze(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=k2}){return cze(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return VZ(this,this,e),this.check()}transformAsVector(e){return HZ(this,this,e),this.check()}transformByMatrix3(e){return sze(this,this,e),this.check()}transformByMatrix2(e){return Q5e(this,this,e),this.check()}transformByQuaternion(e){return oze(this,this,e),this.check()}}class fze extends jZ{toString(){let e="[";if(ho.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=so(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function pze(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gze(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function EL(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],b=e[14],y=e[15],x=n*a-r*o,_=n*l-i*o,w=n*c-s*o,E=r*l-i*a,S=r*c-s*a,A=i*c-s*l,k=u*m-d*p,M=u*b-h*p,I=u*y-f*p,B=d*b-h*m,R=d*y-f*m,O=h*y-f*b,C=x*O-_*R+w*B+E*I-S*M+A*k;return C?(C=1/C,t[0]=(a*O-l*R+c*B)*C,t[1]=(i*R-r*O-s*B)*C,t[2]=(m*A-b*S+y*E)*C,t[3]=(h*S-d*A-f*E)*C,t[4]=(l*I-o*O-c*M)*C,t[5]=(n*O-i*I+s*M)*C,t[6]=(b*w-p*A-y*_)*C,t[7]=(u*A-h*w+f*_)*C,t[8]=(o*R-a*I+c*k)*C,t[9]=(r*I-n*R-s*k)*C,t[10]=(p*S-m*w+y*x)*C,t[11]=(d*w-u*S-f*x)*C,t[12]=(a*M-o*B-l*k)*C,t[13]=(n*B-r*M+i*k)*C,t[14]=(m*_-p*E-b*x)*C,t[15]=(u*E-d*_+h*x)*C,t):null}function mze(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],b=t[15],y=e*o-n*s,x=e*a-r*s,_=e*l-i*s,w=n*a-r*o,E=n*l-i*o,S=r*l-i*a,A=c*p-u*f,k=c*m-d*f,M=c*b-h*f,I=u*m-d*p,B=u*b-h*p,R=d*b-h*m;return y*R-x*B+_*I+w*M-E*k+S*A}function Ih(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],b=e[13],y=e[14],x=e[15],_=n[0],w=n[1],E=n[2],S=n[3];return t[0]=_*r+w*a+E*d+S*m,t[1]=_*i+w*l+E*h+S*b,t[2]=_*s+w*c+E*f+S*y,t[3]=_*o+w*u+E*p+S*x,_=n[4],w=n[5],E=n[6],S=n[7],t[4]=_*r+w*a+E*d+S*m,t[5]=_*i+w*l+E*h+S*b,t[6]=_*s+w*c+E*f+S*y,t[7]=_*o+w*u+E*p+S*x,_=n[8],w=n[9],E=n[10],S=n[11],t[8]=_*r+w*a+E*d+S*m,t[9]=_*i+w*l+E*h+S*b,t[10]=_*s+w*c+E*f+S*y,t[11]=_*o+w*u+E*p+S*x,_=n[12],w=n[13],E=n[14],S=n[15],t[12]=_*r+w*a+E*d+S*m,t[13]=_*i+w*l+E*h+S*b,t[14]=_*s+w*c+E*f+S*y,t[15]=_*o+w*u+E*p+S*x,t}function $E(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,d,h,f,p,m,b,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],d=e[5],h=e[6],f=e[7],p=e[8],m=e[9],b=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=h,t[7]=f,t[8]=p,t[9]=m,t[10]=b,t[11]=y,t[12]=o*r+u*i+p*s+e[12],t[13]=a*r+d*i+m*s+e[13],t[14]=l*r+h*i+b*s+e[14],t[15]=c*r+f*i+y*s+e[15]),t}function ZN(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vze(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,d,h,f,p,m,b,y,x,_,w,E,S,A,k,M,I,B,R,O,C,F;return a<rw?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,d=e[0],h=e[1],f=e[2],p=e[3],m=e[4],b=e[5],y=e[6],x=e[7],_=e[8],w=e[9],E=e[10],S=e[11],A=i*i*u+c,k=s*i*u+o*l,M=o*i*u-s*l,I=i*s*u-o*l,B=s*s*u+c,R=o*s*u+i*l,O=i*o*u+s*l,C=s*o*u-i*l,F=o*o*u+c,t[0]=d*A+m*k+_*M,t[1]=h*A+b*k+w*M,t[2]=f*A+y*k+E*M,t[3]=p*A+x*k+S*M,t[4]=d*I+m*B+_*R,t[5]=h*I+b*B+w*R,t[6]=f*I+y*B+E*R,t[7]=p*I+x*B+S*R,t[8]=d*O+m*C+_*F,t[9]=h*O+b*C+w*F,t[10]=f*O+y*C+E*F,t[11]=p*O+x*C+S*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function WZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+d*r,t[7]=l*i+h*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=d*i-a*r,t[11]=h*i-l*r,t}function yze(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-d*r,t[3]=l*i-h*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+d*i,t[11]=l*r+h*i,t}function XZ(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+d*r,t[3]=l*i+h*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=d*i-a*r,t[7]=h*i-l*r,t}function bze(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,d=r*a,h=i*o,f=i*a,p=i*l,m=s*o,b=s*a,y=s*l;return t[0]=1-d-p,t[1]=u+y,t[2]=h-b,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=h+b,t[9]=f-m,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _ze(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function xze(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var wze=xze;function Eze(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var Tze=Eze;function Sze(t,e,n,r){var i,s,o,a,l,c,u,d,h,f,p=e[0],m=e[1],b=e[2],y=r[0],x=r[1],_=r[2],w=n[0],E=n[1],S=n[2];return Math.abs(p-w)<rw&&Math.abs(m-E)<rw&&Math.abs(b-S)<rw?pze(t):(u=p-w,d=m-E,h=b-S,f=1/Math.hypot(u,d,h),u*=f,d*=f,h*=f,i=x*h-_*d,s=_*u-y*h,o=y*d-x*u,f=Math.hypot(i,s,o),f?(f=1/f,i*=f,s*=f,o*=f):(i=0,s=0,o=0),a=d*o-h*s,l=h*i-u*o,c=u*s-d*i,f=Math.hypot(a,l,c),f?(f=1/f,a*=f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=d,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+s*m+o*b),t[13]=-(a*p+l*m+c*b),t[14]=-(u*p+d*m+h*b),t[15]=1,t)}function Cze(){var t=new zg(4);return zg!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Aze(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Mb(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=Cze();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var TL;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(TL||(TL={}));const Pze=45*Math.PI/180,Rze=1,O2=.1,N2=500,Ize=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class jl extends fze{static get IDENTITY(){return Lze()}static get ZERO(){return Mze()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return TL}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,b){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=d,this[11]=h,this[12]=f,this[13]=p,this[14]=m,this[15]=b,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,b){return this[0]=e,this[1]=s,this[2]=c,this[3]=f,this[4]=n,this[5]=o,this[6]=u,this[7]=p,this[8]=r,this[9]=a,this[10]=d,this[11]=m,this[12]=i,this[13]=l,this[14]=h,this[15]=b,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Ize)}fromObject(e){return this.check()}fromQuaternion(e){return bze(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=O2,far:a=N2}=e;return a===1/0?kze(this,n,r,i,s,o):_ze(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return Sze(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=O2,far:a=N2}=e;return Tze(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=Pze,aspect:r=Rze,focalDistance:i=1,near:s=O2,far:o=N2}=e;Fj(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return Fj(n),wze(this,n,r,i,s),this.check()}determinant(){return mze(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return gze(this,this),this.check()}invert(){return EL(this,this),this.check()}multiplyLeft(e){return Ih(this,e,this),this.check()}multiplyRight(e){return Ih(this,this,e),this.check()}rotateX(e){return WZ(this,this,e),this.check()}rotateY(e){return yze(this,this,e),this.check()}rotateZ(e){return XZ(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return vze(this,this,e,n),this.check()}scale(e){return ZN(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return $E(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Mb(n||[-0,-0,-0,-0],e,this),L2(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=K5e(n||[-0,-0],e,this);break;case 3:i=VZ(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return L2(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=Z5e(n||[-0,-0],e,this);break;case 3:r=HZ(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return L2(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let ox,ax;function Mze(){return ox||(ox=new jl([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ox)),ox}function Lze(){return ax||(ax=new jl,Object.freeze(ax)),ax}function Fj(t){if(t>Math.PI*2)throw Error("expected radians")}function kze(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,d=-1,h=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}const zj=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,Oze={lightSources:{}};function D2(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function Nze(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=D2(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=D2(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=D2(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function YZ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oze;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},Nze({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return YZ({lightSources:e})}return{}}const Dze={name:"lights",vs:zj,fs:zj,getUniforms:YZ,defines:{MAX_LIGHTS:3}},Bze=new Uint8Array([0,255,255,255]),Fze={pickingSelectedColor:null,pickingHighlightColor:Bze,pickingActive:!1,pickingAttribute:!1};function zze(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fze;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const Uze=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,$ze=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,jze={name:"picking",vs:Uze,fs:$ze,getUniforms:zze},Gze=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,Hze={};function Vze(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function Wze(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hze;if(!("material"in t))return{};const{material:e}=t;return e?Vze(e):{lighting_uEnabled:!1}}const Xze={name:"gouraud-lighting",dependencies:[Dze],vs:Gze,defines:{LIGHTING_VERTEX:1},getUniforms:Wze},Yze=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,qze={name:"transform",vs:Yze,fs:null};class Lb{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Lb(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),d=this._getHash(r),h=c.map(_=>this._getHash(_.name)).sort(),f=o.map(_=>this._getHash(_)),p=Object.keys(i).sort(),m=Object.keys(s).sort(),b=[],y=[];for(const _ of p)b.push(this._getHash(_)),b.push(this._getHash(i[_]));for(const _ of m)y.push(this._getHash(_)),y.push(this._getHash(s[_]));const x="".concat(u,"/").concat(d,"D").concat(b.join("/"),"M").concat(h.join("/"),"I").concat(y.join("/"),"V").concat(f.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[x]){const _=A5e(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[x]=new LZ(this.gl,{hash:x,vs:_.vs,fs:_.fs,varyings:o,bufferMode:a}),this._getUniforms[x]=_.getUniforms||(w=>{}),this._useCounts[x]=0}return this._useCounts[x]++,this._programCache[x]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const Kze={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Zze(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Qze(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new zn(t,l),c],Jze(s,c)}}if(i){const s=i.value||i;dt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new zn(t,{data:s,target:34963}),o]}return r}function Qze(t,e){const{attributeMap:n=Kze}=e||{};return n&&n[t]||t}function Jze(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}dt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const np=2,eUe=1e4,tUe="Model needs drawMode and vertexCount",Uj=()=>{},nUe={};class Uy{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=dd("model")}=n;dt(WS(e)),this.id=r,this.gl=e,this.id=n.id||dd("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Lb.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},dt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),tUe)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return dt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return dt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=Zze(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ng(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return WN(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;Tt.priority>=np&&(c=this._logDrawCallStart(np));const u=this.vertexArray.getDrawParams(),{isIndexed:d=u.isIndexed,indexType:h=u.indexType,indexOffset:f=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&Tt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:b}=this,{onBeforeRender:y=Uj,onAfterRender:x=Uj}=this.props;y(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(nUe,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:d,indexType:h,isInstanced:m,instanceCount:b,offset:d?f:0}));return x(),Tt.priority>=np&&this._logDrawCallEnd(c,l,r),_}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Tt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}dt(n instanceof LZ,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new j4e(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof zn&&n.delete()}}_setAnimationProps(e){this.animated&&dt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ng(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new kZ(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:eUe;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Tt.group(np,">>> DRAWING MODEL ".concat(this.id),{collapsed:Tt.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=V4e({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Sj({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=Sj({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&Tt.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&Tt.log("UNUSED UNIFORMS",Object.keys(a))();const d=X4e(this.vertexArray.configuration);Tt.table(e,s)(),Tt.table(e,o)(),Tt.table(e+1,d)(),i&&i.log({logLevel:np,message:"Rendered to ".concat(i.id)}),Tt.groupEnd(np)()}}class rUe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof zn?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&dt(un(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new kZ(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],dt(r[s]instanceof zn)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new zn(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const iUe="transform_uSampler_",jE="transform_uSize_",$j="transform_position";function sUe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const d=c.split(`
`),h=d.slice();if(d.forEach((f,p,m)=>{if(o>0){const b=uUe(f,n);if(b){const{updatedLine:y,inject:x}=b;h[p]=y,u=_L([u,x]),Object.assign(l,b.samplerTextureMap),o--}}r&&!a&&(a=cUe(f,r))}),r){dt(i);const f="".concat(jE).concat(r),p="uniform vec2 ".concat(f,`;
`),m="     vec2 ".concat($j," = transform_getPos(").concat(f,`);
     gl_Position = vec4(`).concat($j,`, 0, 1.);
`);u=_L([u,{"vs:#decl":p,"vs:#main-start":m}])}c=h.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function oUe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(jE).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(jE).concat(a)]=[s,o];return i}function aUe(t){return UZ(t,["attribute","in"])}function lUe(t){const e="".concat(iUe).concat(t),n="".concat(jE).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function cUe(t,e){const n=UZ(t,["varying","out"]);return n&&n.name===e?n.type:null}function uUe(t,e){const n={},r=aUe(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=lUe(s),u=D5e(i),d="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":d},samplerTextureMap:n}}return null}const dUe={10241:9728,10240:9728,10242:33071,10243:33071},hUe="transform_output";class fUe{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const d in this.samplerTextureMap){const h=this.samplerTextureMap[d];a[d]=r[h]}this._setSourceTextureParameters();const u=oUe({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=YS(n);if(!e)return r;const i=r.constructor,s=B5e(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof Ya)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new zn(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new li(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(dUe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=MFe(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=sUe({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=_L([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||$Z({version:IZ(i),input:this.targetTextureVarying,inputType:o,output:hUe}),d=this.hasSourceTextures||this.targetTextureVarying?[qze].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:d,uniforms:s,inject:c}}}class QN{static isSupported(e){return un(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();dt(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Uy(n,Object.assign({},e,{fs:e.fs||$Z({version:IZ(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){pUe(n)&&(this.bufferTransform=new rUe(e,n)),gUe(n)&&(this.textureTransform=new fUe(e,n)),dt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function pUe(t){return!!(!Ng(t.feedbackBuffers)||!Ng(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function gUe(t){return!!(!Ng(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const jj={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class JN{static get DRAW_MODE(){return jj}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=dd("geometry"),drawMode:r=jj.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,dt(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(dt(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return dt(Number.isFinite(r)),r}}let mUe=1,vUe=1;class qZ{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=mUe++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=vUe++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const yUe=[255,255,255],bUe=1;let _Ue=0;class xUe{constructor(e={}){V(this,"id",void 0),V(this,"color",void 0),V(this,"intensity",void 0),V(this,"type","ambient");const{color:n=yUe}=e,{intensity:r=bUe}=e;this.id=e.id||"ambient-".concat(_Ue++),this.color=n,this.intensity=r}}const wUe=[255,255,255],EUe=1,TUe=[0,0,-1];let SUe=0;class Gj{constructor(e={}){V(this,"id",void 0),V(this,"color",void 0),V(this,"intensity",void 0),V(this,"type","directional"),V(this,"direction",void 0),V(this,"shadow",void 0);const{color:n=wUe}=e,{intensity:r=EUe}=e,{direction:i=TUe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(SUe++),this.color=n,this.intensity=r,this.type="directional",this.direction=new $l(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class CUe{constructor(e,n={id:"pass"}){V(this,"id",void 0),V(this,"gl",void 0),V(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class eD extends CUe{constructor(...e){super(...e),V(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return Nc(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&PUe(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const d of i){const h=s&&s[d.id];o==null||o(d);const f=this._getDrawLayerParams(d,e),p=d.subViewports||[d];for(const m of p){const b=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:m,view:h,pass:e.pass,layers:e.layers},f);u.push(b)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],d=KZ(this._lastRenderIndex+1),h={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},f={};for(let p=0;p<n.length;p++){const m=n[p],b=this._shouldDrawLayer(m,h,s,f),y={shouldDrawLayer:b};b&&!c&&(y.layerRenderIndex=d(m,b),y.moduleParameters=this._getModuleParameters(m,a,r,l),y.layerParameters=this.getLayerParameters(m,p,e)),u[p]=y}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=AUe(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const d=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Ha(e,{scissorTest:!0,scissor:c},()=>WN(e,d))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Nc(e,{viewport:c});for(let d=0;d<n.length;d++){const h=n[d],{shouldDrawLayer:f,layerRenderIndex:p,moduleParameters:m,layerParameters:b}=l[d];if(f&&h.props.pickable&&u.pickableCount++,h.isComposite)u.compositeCount++;else if(f){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),m.viewport=o;try{h._drawLayer({moduleParameters:m,uniforms:{layerIndex:p},parameters:b})}catch(y){h.raiseError(y,"drawing ".concat(h," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Og(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function KZ(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||KZ(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function AUe(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Og(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function PUe(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;Nc(t,{viewport:[0,0,n,r]}),t.clear(16640)}class RUe extends eD{constructor(e,n){super(e,n),V(this,"shadowMap",void 0),V(this,"depthBuffer",void 0),V(this,"fbo",void 0),this.shadowMap=new Ya(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Op(e,{format:33189,width:1,height:1}),this.fbo=new li(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Ha(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Og(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const ZZ="#define SMOOTH_EDGE_RADIUS 0.5",IUe=`
`.concat(ZZ,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),MUe=`
`.concat(ZZ,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),LUe={name:"geometry",vs:IUe,fs:MUe},kUe=Object.keys(xn).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(xn[t],";")).join(""),OUe=Object.keys(Pl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Pl[t],";")).join(""),NUe=Object.keys(Ny).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ny[t],";")).join(""),DUe="".concat(kUe,`
`).concat(OUe,`
`).concat(NUe,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function BUe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function kb(t){let e={},n;return r=>{for(const i in r)if(!BUe(r[i],e[i])){n=t(r),e=r;break}return n}}const Hj=[0,0,0,0],FUe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],QZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],zUe=[0,0,0],JZ=[0,0,0],UUe=kb(GUe);function eQ(t,e,n=JZ){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===xn.LNGLAT_OFFSETS||e===xn.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Pl.WEB_MERCATOR:(e===xn.LNGLAT||e===xn.CARTESIAN)&&(i=[0,0,0],s=!1);break;case Pl.WEB_MERCATOR_AUTO_OFFSET:e===xn.LNGLAT?r=i:e===xn.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Pl.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Pl.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function $Ue(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=Hj,l=Hj,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=eQ(t,e,n);return h&&(l=t.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Mb([],l,o),s=r||s,o=Ih([],i,s),o=Ih([],o,FUe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}function jUe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=xn.DEFAULT,coordinateOrigin:i=JZ,autoWrapLongitude:s=!1}){r===xn.DEFAULT&&(r=t.isGeospatial?xn.LNGLAT:xn.CARTESIAN);const o=UUe({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||QZ,o}function GUe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=$Ue(t,n,r),u=t.getDistanceScales(),d=[t.width*e,t.height*e],h=Mb([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:d,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:zUe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:QZ,project_uCameraPosition:a};if(c){const p=t.getDistanceScales(c);switch(n){case xn.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case xn.LNGLAT:case xn.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=p.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case xn.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return f}const HUe={};function VUe(t=HUe){return"viewport"in t?jUe(t):{}}const tD={name:"project",dependencies:[U5e,LUe],vs:DUe,getUniforms:VUe};function WUe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ng(t,e){const n=Mb([],e,t);return Aze(n,n,1/n[3]),n}function Vj(t,e){const n=t%e;return n<0?e+n:n}function SL(t,e,n){return t<e?e:t>n?n:t}function XUe(t){return Math.log(t)*Math.LOG2E}const nD=Math.log2||XUe;function Dc(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Da=Math.PI,tQ=Da/4,na=Da/180,CL=180/Da,Ug=512,GE=4003e4,lx=85.051129,YUe=1.5;function qUe(t){return nD(t)}function HE(t){const[e,n]=t;Dc(Number.isFinite(e)),Dc(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*na,i=n*na,s=Ug*(r+Da)/(2*Da),o=Ug*(Da+Math.log(Math.tan(tQ+i*.5)))/(2*Da);return[s,o]}function $g(t){const[e,n]=t,r=e/Ug*(2*Da)-Da,i=2*(Math.atan(Math.exp(n/Ug*(2*Da)-Da))-tQ);return[r*CL,i*CL]}function KUe(t){const{latitude:e}=t;Dc(Number.isFinite(e));const n=Math.cos(e*na);return qUe(GE*n)-9}function B2(t){const e=Math.cos(t*na);return Ug/GE/e}function AL(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Dc(Number.isFinite(e)&&Number.isFinite(n));const i=Ug,s=Math.cos(e*na),o=i/360,a=o/s,l=i/GE/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=na*Math.tan(e*na)/s,d=o*u/2,h=i/GE*u,f=h/a*l;c.unitsPerDegree2=[0,d,h],c.unitsPerMeter2=[f,0,f]}return c}function nQ(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=AL({longitude:n,latitude:r,highPrecision:!0}),u=HE(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const d=$g(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],h]:d}function ZUe(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=WUe();$E(a,a,[0,0,-i]),WZ(a,a,-n*na),XZ(a,a,r*na);const l=s/e;return ZN(a,a,[l,l,l]),o&&$E(a,a,nze([],o)),a}function QUe(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=VE(YUe)}=t;r!==void 0&&(u=VE(r));const d=u*na,h=i*na,f=rQ(u);let p=f;o&&(p+=o[2]*a/Math.cos(h)/n);const m=d*(.5+(s?s[1]:0)/n),b=Math.sin(m)*p/Math.sin(SL(Math.PI/2-h-m,.01,Math.PI-.01)),y=Math.sin(h)*b+p,x=p*10,_=Math.min(y*c,x);return{fov:d,aspect:e/n,focalDistance:f,near:l,far:_}}function VE(t){return 2*Math.atan(.5/t)*CL}function rQ(t){return .5/Math.tan(.5*t*na)}function iQ(t,e){const[n,r,i=0]=t;return Dc(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),ng(e,[n,r,i,1])}function rD(t,e,n=0){const[r,i,s]=t;if(Dc(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return ng(e,[r,i,s,1]);const o=ng(e,[r,i,0,1]),a=ng(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return GZ([],o,a,u)}function JUe(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,d=e6e(t.padding),h=HE([a,SL(u,-lx,lx)]),f=HE([c,SL(l,-lx,lx)]),p=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],m=[e-d.left-d.right-Math.abs(o[0])*2,n-d.top-d.bottom-Math.abs(o[1])*2];Dc(m[0]>0&&m[1]>0);const b=m[0]/p[0],y=m[1]/p[1],x=(d.right-d.left)/2/b,_=(d.top-d.bottom)/2/y,w=[(f[0]+h[0])/2+x,(f[1]+h[1])/2+_],E=$g(w),S=Math.min(s,nD(Math.abs(Math.min(b,y))));return Dc(Number.isFinite(S)),{longitude:E[0],latitude:E[1],zoom:S}}function e6e(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Dc(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Wj=Math.PI/180;function t6e(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*Wj:Math.atan(.5/t.altitude),d=(90-t.pitch)*Wj;return u>d-.01?(l=Xj(t,0,e),c=Xj(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function Xj(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=ng(r,[e,0,1,1]),s=ng(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=GZ([],i,s,a),c=$g(l);return c.push(n),c}const Yj=512;function n6e(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=Vj(i+180,360)-180),(a<-180||a>180)&&(a=Vj(a+180,360)-180);const l=nD(n/Yj);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=$g([0,c])[1];if(s<u)s=u;else{const d=$g([0,Yj-c])[1];s>d&&(s=d)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const r6e=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,i6e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,s6e=kb(u6e),o6e=kb(d6e),a6e=[0,0,0,1],l6e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function c6e(t,e){const[n,r,i]=t,s=rD([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function u6e({viewport:t,center:e}){return new jl(t.viewProjectionMatrix).invert().transform(e)}function d6e({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>c6e(o,r));for(const o of e){const a=o.clone().translate(new $l(t.center).negate()),l=s.map(u=>a.transform(u)),c=new jl().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function h6e(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||a6e,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=s6e({viewport:t.viewport,center:e.project_uCenter}),s=[],o=o6e({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new $l(t.viewport.center).negate());e.project_uCoordinateSystem===xn.LNGLAT&&e.project_uProjectionMode===Pl.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(l6e),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const F2={name:"shadow",dependencies:[tD],vs:r6e,fs:i6e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?h6e(t,e):{}},f6e={color:[255,255,255],intensity:1},qj=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],p6e=[0,0,0,200/255];class sQ{constructor(e={}){V(this,"id","lighting-effect"),V(this,"props",void 0),V(this,"shadowColor",p6e),V(this,"shadow",void 0),V(this,"ambientLight",void 0),V(this,"directionalLights",void 0),V(this,"pointLights",void 0),V(this,"shadowPasses",[]),V(this,"shadowMaps",[]),V(this,"dummyShadowMap",null),V(this,"programManager",void 0),V(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Lb.getDefaultProgramManager(e),F2&&this.programManager.addDefaultModule(F2)),this.dummyShadowMap||(this.dummyShadowMap=new Ya(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(F2),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new jl().lookAt({eye:new $l(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new RUe(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new xUe(f6e),this.directionalLights.push(new Gj(qj[0]),new Gj(qj[1])))}}class g6e{constructor(e={}){V(this,"_pool",[]),V(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let d=1/0;l&&(d=l*r+s);const h=this._allocate(c,u,a,d);return e&&o?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const jg=new g6e;function X0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function m6e(t){return[t[12],t[13],t[14]]}function v6e(t){return{left:rp(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:rp(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:rp(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:rp(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:rp(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:rp(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Kj=new $l;function rp(t,e,n,r){Kj.set(t,e,n);const i=Kj.len();return{distance:r/i,normal:new $l(-t/i,-e/i,-n/i)}}function y6e(t){return t-Math.fround(t)}let _0;function z2(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;_0=jg.allocate(_0,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];_0[a+l]=c,_0[a+l+n]=y6e(c)}a+=n*2}return _0.subarray(0,s*n*2)}function b6e(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const _6e=Math.PI/180,x6e=X0(),Zj=[0,0,0],w6e={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function E6e({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new jl().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new jl().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:d=0,top:h=0,bottom:f=0}=s,p=Bu((u+t-d)/2,0,t)-t/2,m=Bu((h+e-f)/2,0,e)-e/2;c[8]-=p*2/t,c[9]+=m*2/e}return c}class hm{constructor(e={}){V(this,"id",void 0),V(this,"x",void 0),V(this,"y",void 0),V(this,"width",void 0),V(this,"height",void 0),V(this,"padding",void 0),V(this,"isGeospatial",void 0),V(this,"zoom",void 0),V(this,"focalDistance",void 0),V(this,"position",void 0),V(this,"modelMatrix",void 0),V(this,"distanceScales",void 0),V(this,"scale",void 0),V(this,"center",void 0),V(this,"cameraPosition",void 0),V(this,"projectionMatrix",void 0),V(this,"viewMatrix",void 0),V(this,"viewMatrixUncentered",void 0),V(this,"viewMatrixInverse",void 0),V(this,"viewProjectionMatrix",void 0),V(this,"pixelProjectionMatrix",void 0),V(this,"pixelUnprojectionMatrix",void 0),V(this,"resolution",void 0),V(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||w6e,this.focalDistance=e.focalDistance||1,this.position=e.position||Zj,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Pl.WEB_MERCATOR:Pl.WEB_MERCATOR_AUTO_OFFSET:Pl.IDENTITY}equals(e){return e instanceof hm?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&zy(e.projectionMatrix,this.projectionMatrix)&&zy(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=iQ(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=rD([i,a,o],this.pixelUnprojectionMatrix,l),[u,d,h]=this.unprojectPosition(c);return Number.isFinite(o)?[u,d,h]:Number.isFinite(r)?[u,d,r]:[u,d]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=HE(e);return n[1]=Bu(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?$g(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?AL({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,v6e(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=KUe({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||AL({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=Zj;if(s&&(a=o?new jl(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new $l(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=x6e,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new jl().multiplyRight(n).translate(new $l(this.center).negate()),this.projectionMatrix=r||E6e({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*_6e,focalDistance:u,padding:c,near:a,far:l});const d=X0();Ih(d,d,this.projectionMatrix),Ih(d,d,this.viewMatrix),this.viewProjectionMatrix=d,this.viewMatrixInverse=EL([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=m6e(this.viewMatrixInverse);const h=X0(),f=X0();ZN(h,h,[this.width/2,-this.height/2,1]),$E(h,h,[1,-1,0]),Ih(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=EL(X0(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Un.warn("Pixel project matrix not invertible")()}}V(hm,"displayName","Viewport");class Gg extends hm{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:d=!1,projectionMatrix:h,repeat:f=!1,worldOffset:p=0,position:m,padding:b,legacyMeterSizes:y=!1}=e;let{width:x,height:_,altitude:w=1.5}=e;const E=Math.pow(2,i);x=x||1,_=_||1;let S,A=null;if(h)w=h[5]/2,S=VE(w);else{e.fovy?(S=e.fovy,w=rQ(S)):S=VE(w);let M;if(b){const{top:I=0,bottom:B=0}=b;M=[0,Bu((I+_-B)/2,0,_)-_/2]}A=QUe({width:x,height:_,scale:E,center:m&&[0,0,m[2]*B2(n)],offset:M,pitch:s,fovy:S,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(A.near=c),Number.isFinite(u)&&(A.far=u)}let k=ZUe({height:_,pitch:s,bearing:o,scale:E,altitude:w});p&&(k=new jl().translate([512*p,0,0]).multiplyLeft(k)),super({...e,width:x,height:_,viewMatrix:k,longitude:r,latitude:n,zoom:i,...A,fovy:S,focalDistance:w}),V(this,"longitude",void 0),V(this,"latitude",void 0),V(this,"pitch",void 0),V(this,"bearing",void 0),V(this,"altitude",void 0),V(this,"fovy",void 0),V(this,"orthographic",void 0),V(this,"_subViewports",void 0),V(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=w,this.fovy=S,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new Gg({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*B2(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/B2(r);return[n,r,i]}addMetersToLngLat(e,n){return nQ(e,n)}panByPosition(e,n){const r=rD(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Bj([],i,q5e([],r)),o=Bj([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=t6e(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=JUe({width:r,height:i,bounds:e,...n});return new Gg({width:r,height:i,longitude:s,latitude:o,zoom:a})}}V(Gg,"displayName","WebMercatorViewport");const Qj=[0,0,0];function U2(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Gg){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function T6e(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===xn.DEFAULT&&(i=e.isGeospatial?xn.LNGLAT:xn.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function oQ(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Mb([],[o,a,l,1],n)),r){case xn.LNGLAT:return U2([o,a,l],e,s);case xn.LNGLAT_OFFSETS:return U2([o+i[0],a+i[1],l+(i[2]||0)],e,s);case xn.METER_OFFSETS:return U2(nQ(i,[o,a,l]),e,s);case xn.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function S6e(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=T6e(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=Qj,shaderCoordinateOrigin:u=Qj,offsetMode:d=!1}=l?eQ(n,r,i):{},h=oQ(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});if(d){const f=n.projectPosition(c||u);dze(h,h,f)}return h}const Jj={blendFunc:[1,0,32771,0],blendEquation:32774};class aQ extends eD{constructor(...e){super(...e),V(this,"pickZ",void 0),V(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:m}){const b=this.gl;this.pickZ=p;const y=this._resetColorEncoder(p),x=Ha(b,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Jj,blend:!p},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:d,effects:h==null?void 0:h.filter(w=>w.useInPicking),pass:f,isPicking:!0,moduleParameters:m}));return this._colorEncoderState=null,{decodePickingColor:y&&A6e.bind(null,y),stats:x}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,Jj),i.blend=!0,i.blendColor=C6e(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function C6e(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(Un.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function A6e(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const pp={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},WE=Symbol.for("component"),ed=Symbol.for("propTypes"),$2=Symbol.for("deprecatedProps"),rg=Symbol.for("asyncPropDefaults"),Zh=Symbol.for("asyncPropOriginal"),Fu=Symbol.for("asyncPropResolved");function iD(t,e=()=>!0){return Array.isArray(t)?lQ(t,e,[]):e(t)?[t]:[]}function lQ(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?lQ(i,e,n):e(i)&&n.push(i)}return n}function P6e({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class R6e{constructor(e,n,r){V(this,"id",void 0),V(this,"context",void 0),V(this,"isLoaded",void 0),V(this,"persistent",void 0),V(this,"_loadCount",0),V(this,"_subscribers",new Set),V(this,"_data",void 0),V(this,"_loader",void 0),V(this,"_error",void 0),V(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=dL(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class I6e{constructor({gl:e,protocol:n}){V(this,"protocol",void 0),V(this,"_context",void 0),V(this,"_resources",void 0),V(this,"_consumers",void 0),V(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new R6e(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const M6e=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,sD={name:"project32",dependencies:[tD],vs:M6e},oD={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...jze},L6e=[tD],k6e=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function O6e(t){const e=Lb.getDefaultProgramManager(t);for(const n of L6e)e.addDefaultModule(n);for(const n of k6e)e.addShaderHook(n);return e}const N6e="layerManager.setLayers",D6e="layerManager.activateViewport";class B6e{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){V(this,"layers",void 0),V(this,"context",void 0),V(this,"resourceManager",void 0),V(this,"_lastRenderedLayers",[]),V(this,"_needsRedraw",!1),V(this,"_needsUpdate",!1),V(this,"_nextLayers",null),V(this,"_debug",!1),V(this,"activateViewport",o=>{qi(D6e,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new I6e({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&O6e(e),stats:r||new HN({id:"deck.gl"}),viewport:i||new hm({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new qZ,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){qi(N6e,this,n,e),this._lastRenderedLayers=e;const r=iD(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?Un.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&Un.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=pp.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=pp.MATCHED,n!==e&&(e.lifecycle=pp.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=pp.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=pp.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Ba(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Ba(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!Ba(t[s],e[s],n-1))return!1;return!0}return!1}class F6e{constructor(e){V(this,"width",void 0),V(this,"height",void 0),V(this,"views",void 0),V(this,"viewState",void 0),V(this,"controllers",void 0),V(this,"timeline",void 0),V(this,"_viewports",void 0),V(this,"_viewportMap",void 0),V(this,"_isUpdating",void 0),V(this,"_needsRedraw",void 0),V(this,"_needsUpdate",void 0),V(this,"_eventManager",void 0),V(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=iD(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Ba(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Un.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const z6e=/([0-9]+\.?[0-9]*)(%|px)/;function hu(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=z6e.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function fu(t,e){return t.relative?Math.round(t.position*e):t.position}function bi(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Hg{constructor(e){V(this,"id",void 0),V(this,"viewportInstance",void 0),V(this,"_x",void 0),V(this,"_y",void 0),V(this,"_width",void 0),V(this,"_height",void 0),V(this,"_padding",void 0),V(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};bi(!l||l instanceof hm),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=hu(r),this._y=hu(i),this._width=hu(s),this._height=hu(o),this._padding=a&&{left:hu(a.left||0),right:hu(a.right||0),top:hu(a.top||0),bottom:hu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Ba(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:fu(this._x,e),y:fu(this._y,n),width:fu(this._width,e),height:fu(this._height,n)};return this._padding&&(r.padding={left:fu(this._padding.left,e),top:fu(this._padding.top,n),right:fu(this._padding.right,e),bottom:fu(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Ob{constructor(e){V(this,"_inProgress",void 0),V(this,"_handle",void 0),V(this,"_timeline",void 0),V(this,"time",void 0),V(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const e8=()=>{},PL={BREAK:1,SNAP_TO_END:2,IGNORE:3},U6e=t=>t,$6e=PL.BREAK;class j6e{constructor(e){V(this,"getControllerState",void 0),V(this,"props",void 0),V(this,"propsInTransition",void 0),V(this,"transition",void 0),V(this,"onViewStateChange",void 0),V(this,"onStateChange",void 0),V(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Ob(e.timeline),this.onViewStateChange=e.onViewStateChange||e8,this.onStateChange=e.onStateChange||e8}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===PL.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===PL.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||U6e,interpolator:s,interruption:n.transitionInterruption||$6e,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class G6e{constructor(e){V(this,"_propsToCompare",void 0),V(this,"_propsToExtract",void 0),V(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!zy(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];bi(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const H6e=["longitude","latitude","zoom","bearing","pitch"],V6e=["longitude","latitude","zoom"];class cQ extends G6e{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:H6e,required:V6e},super(r.transitionProps),V(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=UE(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,UE(e.around,n.around,r)))}return i}}const pu={transitionDuration:0},W6e=300,cx=t=>1-(1-t)*(1-t),ip={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Hd={};class X6e{constructor(e){V(this,"props",void 0),V(this,"state",{}),V(this,"transitionManager",void 0),V(this,"eventManager",void 0),V(this,"onViewStateChange",void 0),V(this,"onStateChange",void 0),V(this,"makeViewport",void 0),V(this,"_controllerState",void 0),V(this,"_events",{}),V(this,"_interactionState",{isDragging:!1}),V(this,"_customEvents",[]),V(this,"_eventStartBlocked",null),V(this,"_panMove",!1),V(this,"invertPan",!1),V(this,"dragMode","rotate"),V(this,"inertia",0),V(this,"scrollZoom",!0),V(this,"dragPan",!0),V(this,"dragRotate",!0),V(this,"doubleClickZoom",!0),V(this,"touchZoom",!0),V(this,"touchRotate",!1),V(this,"keyboard",!0),this.transitionManager=new j6e({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?W6e:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(ip.WHEEL,u&&r),this.toggleEvents(ip.PAN,u),this.toggleEvents(ip.PINCH,u&&(a||l)),this.toggleEvents(ip.TRIPLE_PAN,u&&l),this.toggleEvents(ip.DOUBLE_TAP,u&&o),this.toggleEvents(ip.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,pu,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,pu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:cx},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,pu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:cx},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,pu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,pu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:cx},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Hd._startPinchRotation=e.rotation,Hd._lastPinchEvent=e,this.updateViewport(r,pu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Hd._startPinchRotation-r})}return this.updateViewport(n,pu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Hd._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Hd;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:cx},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Hd._startPinchRotation=null,Hd._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?pu:e?{...n,transitionInterpolator:new cQ({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class Y6e{constructor(e,n){V(this,"_viewportProps",void 0),V(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const t8=5,q6e=1.2;class K6e extends Y6e{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:h=0,maxPitch:f=60,minPitch:p=0,startPanLngLat:m,startZoomLngLat:b,startRotatePos:y,startBearing:x,startPitch:_,startZoom:w,normalize:E=!0}=e;bi(Number.isFinite(s)),bi(Number.isFinite(i)),bi(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:h,maxPitch:f,minPitch:p,normalize:E,position:u},{startPanLngLat:m,startZoomLngLat:b,startRotatePos:y,startBearing:x,startPitch:_,startZoom:w}),V(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Bu(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Bu(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Bu(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,n6e(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),d=s/c;let h=0;o>0?Math.abs(u-l)>t8&&(h=o/(l-u)*q6e):o<0&&l>t8&&(h=1-a/l),h=Bu(h,-1,1);const{minPitch:f,maxPitch:p}=this.getViewportProps(),m=i+180*d;let b=r;return h>0?b=r+h*(p-r):h<0&&(b=r-h*(f-r)),{pitch:b,bearing:m}}}class Z6e extends X6e{constructor(...e){super(...e),V(this,"ControllerState",K6e),V(this,"transition",{transitionDuration:300,transitionInterpolator:new cQ({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),V(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class aD extends Hg{get ViewportType(){return Gg}get ControllerType(){return Z6e}}V(aD,"displayName","MapView");const Q6e=new sQ;function J6e(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class e$e{constructor(){V(this,"effects",void 0),V(this,"_resolvedEffects",[]),V(this,"_defaultEffects",[]),V(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>J6e(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Ba(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof sQ)||this._resolvedEffects.push(Q6e),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class t$e extends eD{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const n$e="deckRenderer.renderLayers";class r$e{constructor(e){V(this,"gl",void 0),V(this,"layerFilter",void 0),V(this,"drawPickingColors",void 0),V(this,"drawLayersPass",void 0),V(this,"pickLayersPass",void 0),V(this,"renderCount",void 0),V(this,"_needsRedraw",void 0),V(this,"renderBuffers",void 0),V(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new t$e(e),this.pickLayersPass=new aQ(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||li.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,qi(n$e,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new li(this.gl),new li(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const i$e={pickedColor:null,pickedObjectIndex:-1};function s$e({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,d=-1,h=0;for(let f=0;f<c;f++){const p=f+a-r,m=p*p;if(m>u)h+=4*l;else for(let b=0;b<l;b++){if(t[h+3]-1>=0){const x=b+o-n,_=x*x+m;_<=u&&(u=_,d=h)}h+=4}}if(d>=0){const f=t.slice(d,d+4),p=e(f);if(p){const m=Math.floor(d/4/l),b=d/4-m*l;return{...p,pickedColor:f,pickedX:o+b,pickedY:a+m}}Un.error("Picked non-existent layer. Is picking buffer corrupt?")()}return i$e}function o$e({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):Un.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function uQ({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=l$e((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function a$e(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const d=n.index,h=n.layerId,f=o?o.props.id:null;if(f!==h||a!==d){if(f!==h){const p=i.find(m=>m.props.id===h);p&&l.unshift(p)}n.layerId=f,n.index=a,n.info=null}}const c=uQ(t),u=new Map;return u.set(null,c),l.forEach(d=>{let h={...c};d===o&&(h.color=s,h.index=a,h.picked=!0),h=dQ({layer:d,info:h,mode:r});const f=h.layer;d===o&&r==="hover"&&(n.info=h),u.set(f.id,h),r==="hover"&&f.updateAutoHighlight(h)}),u}function dQ({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function l$e(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class c$e{constructor(e){V(this,"gl",void 0),V(this,"pickingFBO",void 0),V(this,"depthFBO",void 0),V(this,"pickLayersPass",void 0),V(this,"layerFilter",void 0),V(this,"lastPickedInfo",void 0),V(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new aQ(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(h=>h.id===o):null,c=a&&i.find(h=>h.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new li(r),li.isSupported(r,{colorBufferFloat:!0}))){const i=new li(r);i.attach({36064:new Ya(r,{format:un(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}){const h=this._getPickable(e),f=Og(this.gl);if(!h)return{result:[],emptyInfo:uQ({viewports:r,x:i,y:s,pixelRatio:f})};this._resizeBuffer();const p=E2(this.gl,[i,s],!0),m=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],b=Math.round(o*f),{width:y,height:x}=this.pickingFBO,_=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:b,deviceWidth:y,deviceHeight:x}),w={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let E;const S=[],A=new Set;for(let k=0;k<a;k++){let M;if(_){const B=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:w,effects:d,pass:"picking:".concat(l)});M=s$e({...B,deviceX:m[0],deviceY:m[1],deviceRadius:b,deviceRect:_})}else M={pickedColor:null,pickedObjectIndex:-1};let I;if(M.pickedLayer&&c&&this.depthFBO){const{pickedColors:B}=this._drawAndSample({layers:[M.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:M.pickedX,y:M.pickedY,width:1,height:1},cullRect:w,effects:d,pass:"picking:".concat(l,":z")},!0);B[3]&&(I=B[0])}M.pickedLayer&&k+1<a&&(A.add(M.pickedLayer),M.pickedLayer.disablePickingIndex(M.pickedObjectIndex)),E=a$e({pickInfo:M,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:r,x:i,y:s,z:I,pixelRatio:f});for(const B of E.values())B.layer&&S.push(B);if(!M.pickedColor)break}for(const k of A)k.restorePickingColors();return{result:S,emptyInfo:E.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=Og(this.gl),p=E2(this.gl,[i,s],!0),m=p.x,b=p.y+p.height,y=E2(this.gl,[i+o,s+a],!0),x=y.x+y.width,_=y.y,w={x:m,y:_,width:x-m,height:b-_},E=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:w,cullRect:{x:i,y:s,width:o,height:a},effects:d,pass:"picking:".concat(l)}),S=o$e(E),A=new Map,k=Number.isFinite(c);for(let I=0;I<S.length;I++){var M;if(k&&c&&A.size>=c)break;const B=S[I];let R={color:B.pickedColor,layer:null,index:B.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:f};R=dQ({layer:B.pickedLayer,info:R,mode:l});const O=(M=R.object)!==null&&M!==void 0?M:"".concat(R.layer.id,"[").concat(R.index,"]");A.has(O)||A.set(O,R)}return Array.from(A.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,d={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const x of a)x.useInPicking&&(d.preRenderStats[x.id]=x.preRender(this.gl,d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:m,height:b}=s,y=new(c?Float32Array:Uint8Array)(m*b*4);return YS(u,{sourceX:f,sourceY:p,sourceWidth:m,sourceHeight:b,target:y}),{pickedColors:y,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const u$e={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class d$e{constructor(e){V(this,"el",null),V(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,u$e),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var hQ={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function d(Y,Q,re){return setTimeout(_(Y,re),Q)}function h(Y,Q,re){return Array.isArray(Y)?(f(Y,re[Q],re),!0):!1}function f(Y,Q,re){var we;if(Y)if(Y.forEach)Y.forEach(Q,re);else if(Y.length!==i)for(we=0;we<Y.length;)Q.call(re,Y[we],we,Y),we++;else for(we in Y)Y.hasOwnProperty(we)&&Q.call(re,Y[we],we,Y)}function p(Y,Q,re){var we="DEPRECATED METHOD: "+Q+`
`+re+` AT 
`;return function(){var We=new Error("get-stack-trace"),ot=We&&We.stack?We.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Qt=e.console&&(e.console.warn||e.console.log);return Qt&&Qt.call(e.console,we,ot),Y.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(Q){if(Q===i||Q===null)throw new TypeError("Cannot convert undefined or null to object");for(var re=Object(Q),we=1;we<arguments.length;we++){var We=arguments[we];if(We!==i&&We!==null)for(var ot in We)We.hasOwnProperty(ot)&&(re[ot]=We[ot])}return re}:m=Object.assign;var b=p(function(Q,re,we){for(var We=Object.keys(re),ot=0;ot<We.length;)(!we||we&&Q[We[ot]]===i)&&(Q[We[ot]]=re[We[ot]]),ot++;return Q},"extend","Use `assign`."),y=p(function(Q,re){return b(Q,re,!0)},"merge","Use `assign`.");function x(Y,Q,re){var we=Q.prototype,We;We=Y.prototype=Object.create(we),We.constructor=Y,We._super=we,re&&m(We,re)}function _(Y,Q){return function(){return Y.apply(Q,arguments)}}function w(Y,Q){return typeof Y==a?Y.apply(Q&&Q[0]||i,Q):Y}function E(Y,Q){return Y===i?Q:Y}function S(Y,Q,re){f(I(Q),function(we){Y.addEventListener(we,re,!1)})}function A(Y,Q,re){f(I(Q),function(we){Y.removeEventListener(we,re,!1)})}function k(Y,Q){for(;Y;){if(Y==Q)return!0;Y=Y.parentNode}return!1}function M(Y,Q){return Y.indexOf(Q)>-1}function I(Y){return Y.trim().split(/\s+/g)}function B(Y,Q,re){if(Y.indexOf&&!re)return Y.indexOf(Q);for(var we=0;we<Y.length;){if(re&&Y[we][re]==Q||!re&&Y[we]===Q)return we;we++}return-1}function R(Y){return Array.prototype.slice.call(Y,0)}function O(Y,Q,re){for(var we=[],We=[],ot=0;ot<Y.length;){var Qt=Q?Y[ot][Q]:Y[ot];B(We,Qt)<0&&we.push(Y[ot]),We[ot]=Qt,ot++}return re&&(Q?we=we.sort(function(Or,Ut){return Or[Q]>Ut[Q]}):we=we.sort()),we}function C(Y,Q){for(var re,we,We=Q[0].toUpperCase()+Q.slice(1),ot=0;ot<s.length;){if(re=s[ot],we=re?re+We:Q,we in Y)return we;ot++}return i}var F=1;function q(){return F++}function G(Y){var Q=Y.ownerDocument||Y;return Q.defaultView||Q.parentWindow||e}var j=/mobile|tablet|ip(ad|hone|od)|android/i,H="ontouchstart"in e,Z=C(e,"PointerEvent")!==i,X=H&&j.test(navigator.userAgent),ee="touch",ve="pen",oe="mouse",fe="kinect",be=25,Le=1,se=2,ue=4,Te=8,ge=1,Me=2,Se=4,D=8,ie=16,ae=Me|Se,K=D|ie,W=ae|K,ne=["x","y"],pe=["clientX","clientY"];function me(Y,Q){var re=this;this.manager=Y,this.callback=Q,this.element=Y.element,this.target=Y.options.inputTarget,this.domHandler=function(we){w(Y.options.enable,[Y])&&re.handler(we)},this.init()}me.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(G(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(G(this.element),this.evWin,this.domHandler)}};function he(Y){var Q,re=Y.options.inputClass;return re?Q=re:Z?Q=le:X?Q=ft:H?Q=Wt:Q=zt,new Q(Y,Pe)}function Pe(Y,Q,re){var we=re.pointers.length,We=re.changedPointers.length,ot=Q&Le&&we-We===0,Qt=Q&(ue|Te)&&we-We===0;re.isFirst=!!ot,re.isFinal=!!Qt,ot&&(Y.session={}),re.eventType=Q,Oe(Y,re),Y.emit("hammer.input",re),Y.recognize(re),Y.session.prevInput=re}function Oe(Y,Q){var re=Y.session,we=Q.pointers,We=we.length;re.firstInput||(re.firstInput=Ye(Q)),We>1&&!re.firstMultiple?re.firstMultiple=Ye(Q):We===1&&(re.firstMultiple=!1);var ot=re.firstInput,Qt=re.firstMultiple,lr=Qt?Qt.center:ot.center,Or=Q.center=Fe(we);Q.timeStamp=u(),Q.deltaTime=Q.timeStamp-ot.timeStamp,Q.angle=Ot(lr,Or),Q.distance=yt(lr,Or),de(re,Q),Q.offsetDirection=Bt(Q.deltaX,Q.deltaY);var Ut=Ve(Q.deltaTime,Q.deltaX,Q.deltaY);Q.overallVelocityX=Ut.x,Q.overallVelocityY=Ut.y,Q.overallVelocity=c(Ut.x)>c(Ut.y)?Ut.x:Ut.y,Q.scale=Qt?Pt(Qt.pointers,we):1,Q.rotation=Qt?Ge(Qt.pointers,we):0,Q.maxPointers=re.prevInput?Q.pointers.length>re.prevInput.maxPointers?Q.pointers.length:re.prevInput.maxPointers:Q.pointers.length,Ce(re,Q);var Xs=Y.element;k(Q.srcEvent.target,Xs)&&(Xs=Q.srcEvent.target),Q.target=Xs}function de(Y,Q){var re=Q.center,we=Y.offsetDelta||{},We=Y.prevDelta||{},ot=Y.prevInput||{};(Q.eventType===Le||ot.eventType===ue)&&(We=Y.prevDelta={x:ot.deltaX||0,y:ot.deltaY||0},we=Y.offsetDelta={x:re.x,y:re.y}),Q.deltaX=We.x+(re.x-we.x),Q.deltaY=We.y+(re.y-we.y)}function Ce(Y,Q){var re=Y.lastInterval||Q,we=Q.timeStamp-re.timeStamp,We,ot,Qt,lr;if(Q.eventType!=Te&&(we>be||re.velocity===i)){var Or=Q.deltaX-re.deltaX,Ut=Q.deltaY-re.deltaY,Xs=Ve(we,Or,Ut);ot=Xs.x,Qt=Xs.y,We=c(Xs.x)>c(Xs.y)?Xs.x:Xs.y,lr=Bt(Or,Ut),Y.lastInterval=Q}else We=re.velocity,ot=re.velocityX,Qt=re.velocityY,lr=re.direction;Q.velocity=We,Q.velocityX=ot,Q.velocityY=Qt,Q.direction=lr}function Ye(Y){for(var Q=[],re=0;re<Y.pointers.length;)Q[re]={clientX:l(Y.pointers[re].clientX),clientY:l(Y.pointers[re].clientY)},re++;return{timeStamp:u(),pointers:Q,center:Fe(Q),deltaX:Y.deltaX,deltaY:Y.deltaY}}function Fe(Y){var Q=Y.length;if(Q===1)return{x:l(Y[0].clientX),y:l(Y[0].clientY)};for(var re=0,we=0,We=0;We<Q;)re+=Y[We].clientX,we+=Y[We].clientY,We++;return{x:l(re/Q),y:l(we/Q)}}function Ve(Y,Q,re){return{x:Q/Y||0,y:re/Y||0}}function Bt(Y,Q){return Y===Q?ge:c(Y)>=c(Q)?Y<0?Me:Se:Q<0?D:ie}function yt(Y,Q,re){re||(re=ne);var we=Q[re[0]]-Y[re[0]],We=Q[re[1]]-Y[re[1]];return Math.sqrt(we*we+We*We)}function Ot(Y,Q,re){re||(re=ne);var we=Q[re[0]]-Y[re[0]],We=Q[re[1]]-Y[re[1]];return Math.atan2(We,we)*180/Math.PI}function Ge(Y,Q){return Ot(Q[1],Q[0],pe)+Ot(Y[1],Y[0],pe)}function Pt(Y,Q){return yt(Q[0],Q[1],pe)/yt(Y[0],Y[1],pe)}var Xe={mousedown:Le,mousemove:se,mouseup:ue},Ze="mousedown",Nt="mousemove mouseup";function zt(){this.evEl=Ze,this.evWin=Nt,this.pressed=!1,me.apply(this,arguments)}x(zt,me,{handler:function(Q){var re=Xe[Q.type];re&Le&&Q.button===0&&(this.pressed=!0),re&se&&Q.which!==1&&(re=ue),this.pressed&&(re&ue&&(this.pressed=!1),this.callback(this.manager,re,{pointers:[Q],changedPointers:[Q],pointerType:oe,srcEvent:Q}))}});var pn={pointerdown:Le,pointermove:se,pointerup:ue,pointercancel:Te,pointerout:Te},Dn={2:ee,3:ve,4:oe,5:fe},Wn="pointerdown",Jn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Wn="MSPointerDown",Jn="MSPointerMove MSPointerUp MSPointerCancel");function le(){this.evEl=Wn,this.evWin=Jn,me.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x(le,me,{handler:function(Q){var re=this.store,we=!1,We=Q.type.toLowerCase().replace("ms",""),ot=pn[We],Qt=Dn[Q.pointerType]||Q.pointerType,lr=Qt==ee,Or=B(re,Q.pointerId,"pointerId");ot&Le&&(Q.button===0||lr)?Or<0&&(re.push(Q),Or=re.length-1):ot&(ue|Te)&&(we=!0),!(Or<0)&&(re[Or]=Q,this.callback(this.manager,ot,{pointers:re,changedPointers:[Q],pointerType:Qt,srcEvent:Q}),we&&re.splice(Or,1))}});var _e={touchstart:Le,touchmove:se,touchend:ue,touchcancel:Te},Re="touchstart",tt="touchstart touchmove touchend touchcancel";function it(){this.evTarget=Re,this.evWin=tt,this.started=!1,me.apply(this,arguments)}x(it,me,{handler:function(Q){var re=_e[Q.type];if(re===Le&&(this.started=!0),!!this.started){var we=Ft.call(this,Q,re);re&(ue|Te)&&we[0].length-we[1].length===0&&(this.started=!1),this.callback(this.manager,re,{pointers:we[0],changedPointers:we[1],pointerType:ee,srcEvent:Q})}}});function Ft(Y,Q){var re=R(Y.touches),we=R(Y.changedTouches);return Q&(ue|Te)&&(re=O(re.concat(we),"identifier",!0)),[re,we]}var St={touchstart:Le,touchmove:se,touchend:ue,touchcancel:Te},Ct="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=Ct,this.targetIds={},me.apply(this,arguments)}x(ft,me,{handler:function(Q){var re=St[Q.type],we=Zt.call(this,Q,re);we&&this.callback(this.manager,re,{pointers:we[0],changedPointers:we[1],pointerType:ee,srcEvent:Q})}});function Zt(Y,Q){var re=R(Y.touches),we=this.targetIds;if(Q&(Le|se)&&re.length===1)return we[re[0].identifier]=!0,[re,re];var We,ot,Qt=R(Y.changedTouches),lr=[],Or=this.target;if(ot=re.filter(function(Ut){return k(Ut.target,Or)}),Q===Le)for(We=0;We<ot.length;)we[ot[We].identifier]=!0,We++;for(We=0;We<Qt.length;)we[Qt[We].identifier]&&lr.push(Qt[We]),Q&(ue|Te)&&delete we[Qt[We].identifier],We++;if(lr.length)return[O(ot.concat(lr),"identifier",!0),lr]}var Tn=2500,Mt=25;function Wt(){me.apply(this,arguments);var Y=_(this.handler,this);this.touch=new ft(this.manager,Y),this.mouse=new zt(this.manager,Y),this.primaryTouch=null,this.lastTouches=[]}x(Wt,me,{handler:function(Q,re,we){var We=we.pointerType==ee,ot=we.pointerType==oe;if(!(ot&&we.sourceCapabilities&&we.sourceCapabilities.firesTouchEvents)){if(We)Sn.call(this,re,we);else if(ot&&yn.call(this,we))return;this.callback(Q,re,we)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Sn(Y,Q){Y&Le?(this.primaryTouch=Q.changedPointers[0].identifier,ar.call(this,Q)):Y&(ue|Te)&&ar.call(this,Q)}function ar(Y){var Q=Y.changedPointers[0];if(Q.identifier===this.primaryTouch){var re={x:Q.clientX,y:Q.clientY};this.lastTouches.push(re);var we=this.lastTouches,We=function(){var ot=we.indexOf(re);ot>-1&&we.splice(ot,1)};setTimeout(We,Tn)}}function yn(Y){for(var Q=Y.srcEvent.clientX,re=Y.srcEvent.clientY,we=0;we<this.lastTouches.length;we++){var We=this.lastTouches[we],ot=Math.abs(Q-We.x),Qt=Math.abs(re-We.y);if(ot<=Mt&&Qt<=Mt)return!0}return!1}var Qr=C(o.style,"touchAction"),Hs=Qr!==i,hn="compute",gn="auto",$r="manipulation",jr="none",mr="pan-x",Vs="pan-y",ss=Bn();function Ht(Y,Q){this.manager=Y,this.set(Q)}Ht.prototype={set:function(Y){Y==hn&&(Y=this.compute()),Hs&&this.manager.element.style&&ss[Y]&&(this.manager.element.style[Qr]=Y),this.actions=Y.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Y=[];return f(this.manager.recognizers,function(Q){w(Q.options.enable,[Q])&&(Y=Y.concat(Q.getTouchAction()))}),Yt(Y.join(" "))},preventDefaults:function(Y){var Q=Y.srcEvent,re=Y.offsetDirection;if(this.manager.session.prevented){Q.preventDefault();return}var we=this.actions,We=M(we,jr)&&!ss[jr],ot=M(we,Vs)&&!ss[Vs],Qt=M(we,mr)&&!ss[mr];if(We){var lr=Y.pointers.length===1,Or=Y.distance<2,Ut=Y.deltaTime<250;if(lr&&Or&&Ut)return}if(!(Qt&&ot)&&(We||ot&&re&ae||Qt&&re&K))return this.preventSrc(Q)},preventSrc:function(Y){this.manager.session.prevented=!0,Y.preventDefault()}};function Yt(Y){if(M(Y,jr))return jr;var Q=M(Y,mr),re=M(Y,Vs);return Q&&re?jr:Q||re?Q?mr:Vs:M(Y,$r)?$r:gn}function Bn(){if(!Hs)return!1;var Y={},Q=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(re){Y[re]=Q?e.CSS.supports("touch-action",re):!0}),Y}var Ti=1,vr=2,Ro=4,Io=8,fa=Io,Yl=16,Si=32;function ci(Y){this.options=m({},this.defaults,Y||{}),this.id=q(),this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Ti,this.simultaneous={},this.requireFail=[]}ci.prototype={defaults:{},set:function(Y){return m(this.options,Y),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Y){if(h(Y,"recognizeWith",this))return this;var Q=this.simultaneous;return Y=Ws(Y,this),Q[Y.id]||(Q[Y.id]=Y,Y.recognizeWith(this)),this},dropRecognizeWith:function(Y){return h(Y,"dropRecognizeWith",this)?this:(Y=Ws(Y,this),delete this.simultaneous[Y.id],this)},requireFailure:function(Y){if(h(Y,"requireFailure",this))return this;var Q=this.requireFail;return Y=Ws(Y,this),B(Q,Y)===-1&&(Q.push(Y),Y.requireFailure(this)),this},dropRequireFailure:function(Y){if(h(Y,"dropRequireFailure",this))return this;Y=Ws(Y,this);var Q=B(this.requireFail,Y);return Q>-1&&this.requireFail.splice(Q,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Y){return!!this.simultaneous[Y.id]},emit:function(Y){var Q=this,re=this.state;function we(We){Q.manager.emit(We,Y)}re<Io&&we(Q.options.event+Gn(re)),we(Q.options.event),Y.additionalEvent&&we(Y.additionalEvent),re>=Io&&we(Q.options.event+Gn(re))},tryEmit:function(Y){if(this.canEmit())return this.emit(Y);this.state=Si},canEmit:function(){for(var Y=0;Y<this.requireFail.length;){if(!(this.requireFail[Y].state&(Si|Ti)))return!1;Y++}return!0},recognize:function(Y){var Q=m({},Y);if(!w(this.options.enable,[this,Q])){this.reset(),this.state=Si;return}this.state&(fa|Yl|Si)&&(this.state=Ti),this.state=this.process(Q),this.state&(vr|Ro|Io|Yl)&&this.tryEmit(Q)},process:function(Y){},getTouchAction:function(){},reset:function(){}};function Gn(Y){return Y&Yl?"cancel":Y&Io?"end":Y&Ro?"move":Y&vr?"start":""}function kn(Y){return Y==ie?"down":Y==D?"up":Y==Me?"left":Y==Se?"right":""}function Ws(Y,Q){var re=Q.manager;return re?re.get(Y):Y}function Fn(){ci.apply(this,arguments)}x(Fn,ci,{defaults:{pointers:1},attrTest:function(Y){var Q=this.options.pointers;return Q===0||Y.pointers.length===Q},process:function(Y){var Q=this.state,re=Y.eventType,we=Q&(vr|Ro),We=this.attrTest(Y);return we&&(re&Te||!We)?Q|Yl:we||We?re&ue?Q|Io:Q&vr?Q|Ro:vr:Si}});function Jr(){Fn.apply(this,arguments),this.pX=null,this.pY=null}x(Jr,Fn,{defaults:{event:"pan",threshold:10,pointers:1,direction:W},getTouchAction:function(){var Y=this.options.direction,Q=[];return Y&ae&&Q.push(Vs),Y&K&&Q.push(mr),Q},directionTest:function(Y){var Q=this.options,re=!0,we=Y.distance,We=Y.direction,ot=Y.deltaX,Qt=Y.deltaY;return We&Q.direction||(Q.direction&ae?(We=ot===0?ge:ot<0?Me:Se,re=ot!=this.pX,we=Math.abs(Y.deltaX)):(We=Qt===0?ge:Qt<0?D:ie,re=Qt!=this.pY,we=Math.abs(Y.deltaY))),Y.direction=We,re&&we>Q.threshold&&We&Q.direction},attrTest:function(Y){return Fn.prototype.attrTest.call(this,Y)&&(this.state&vr||!(this.state&vr)&&this.directionTest(Y))},emit:function(Y){this.pX=Y.deltaX,this.pY=Y.deltaY;var Q=kn(Y.direction);Q&&(Y.additionalEvent=this.options.event+Q),this._super.emit.call(this,Y)}});function pa(){Fn.apply(this,arguments)}x(pa,Fn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jr]},attrTest:function(Y){return this._super.attrTest.call(this,Y)&&(Math.abs(Y.scale-1)>this.options.threshold||this.state&vr)},emit:function(Y){if(Y.scale!==1){var Q=Y.scale<1?"in":"out";Y.additionalEvent=this.options.event+Q}this._super.emit.call(this,Y)}});function Za(){ci.apply(this,arguments),this._timer=null,this._input=null}x(Za,ci,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[gn]},process:function(Y){var Q=this.options,re=Y.pointers.length===Q.pointers,we=Y.distance<Q.threshold,We=Y.deltaTime>Q.time;if(this._input=Y,!we||!re||Y.eventType&(ue|Te)&&!We)this.reset();else if(Y.eventType&Le)this.reset(),this._timer=d(function(){this.state=fa,this.tryEmit()},Q.time,this);else if(Y.eventType&ue)return fa;return Si},reset:function(){clearTimeout(this._timer)},emit:function(Y){this.state===fa&&(Y&&Y.eventType&ue?this.manager.emit(this.options.event+"up",Y):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Ci(){Fn.apply(this,arguments)}x(Ci,Fn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jr]},attrTest:function(Y){return this._super.attrTest.call(this,Y)&&(Math.abs(Y.rotation)>this.options.threshold||this.state&vr)}});function Td(){Fn.apply(this,arguments)}x(Td,Fn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ae|K,pointers:1},getTouchAction:function(){return Jr.prototype.getTouchAction.call(this)},attrTest:function(Y){var Q=this.options.direction,re;return Q&(ae|K)?re=Y.overallVelocity:Q&ae?re=Y.overallVelocityX:Q&K&&(re=Y.overallVelocityY),this._super.attrTest.call(this,Y)&&Q&Y.offsetDirection&&Y.distance>this.options.threshold&&Y.maxPointers==this.options.pointers&&c(re)>this.options.velocity&&Y.eventType&ue},emit:function(Y){var Q=kn(Y.offsetDirection);Q&&this.manager.emit(this.options.event+Q,Y),this.manager.emit(this.options.event,Y)}});function Sd(){ci.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}x(Sd,ci,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$r]},process:function(Y){var Q=this.options,re=Y.pointers.length===Q.pointers,we=Y.distance<Q.threshold,We=Y.deltaTime<Q.time;if(this.reset(),Y.eventType&Le&&this.count===0)return this.failTimeout();if(we&&We&&re){if(Y.eventType!=ue)return this.failTimeout();var ot=this.pTime?Y.timeStamp-this.pTime<Q.interval:!0,Qt=!this.pCenter||yt(this.pCenter,Y.center)<Q.posThreshold;this.pTime=Y.timeStamp,this.pCenter=Y.center,!Qt||!ot?this.count=1:this.count+=1,this._input=Y;var lr=this.count%Q.taps;if(lr===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=fa,this.tryEmit()},Q.interval,this),vr):fa}return Si},failTimeout:function(){return this._timer=d(function(){this.state=Si},this.options.interval,this),Si},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==fa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Mo(Y,Q){return Q=Q||{},Q.recognizers=E(Q.recognizers,Mo.defaults.preset),new os(Y,Q)}Mo.VERSION="2.0.7",Mo.defaults={domEvents:!1,touchAction:hn,enable:!0,inputTarget:null,inputClass:null,preset:[[Ci,{enable:!1}],[pa,{enable:!1},["rotate"]],[Td,{direction:ae}],[Jr,{direction:ae},["swipe"]],[Sd],[Sd,{event:"doubletap",taps:2},["tap"]],[Za]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var mf=1,fm=2;function os(Y,Q){this.options=m({},Mo.defaults,Q||{}),this.options.inputTarget=this.options.inputTarget||Y,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Y,this.input=he(this),this.touchAction=new Ht(this,this.options.touchAction),Bb(this,!0),f(this.options.recognizers,function(re){var we=this.add(new re[0](re[1]));re[2]&&we.recognizeWith(re[2]),re[3]&&we.requireFailure(re[3])},this)}os.prototype={set:function(Y){return m(this.options,Y),Y.touchAction&&this.touchAction.update(),Y.inputTarget&&(this.input.destroy(),this.input.target=Y.inputTarget,this.input.init()),this},stop:function(Y){this.session.stopped=Y?fm:mf},recognize:function(Y){var Q=this.session;if(!Q.stopped){this.touchAction.preventDefaults(Y);var re,we=this.recognizers,We=Q.curRecognizer;(!We||We&&We.state&fa)&&(We=Q.curRecognizer=null);for(var ot=0;ot<we.length;)re=we[ot],Q.stopped!==fm&&(!We||re==We||re.canRecognizeWith(We))?re.recognize(Y):re.reset(),!We&&re.state&(vr|Ro|Io)&&(We=Q.curRecognizer=re),ot++}},get:function(Y){if(Y instanceof ci)return Y;for(var Q=this.recognizers,re=0;re<Q.length;re++)if(Q[re].options.event==Y)return Q[re];return null},add:function(Y){if(h(Y,"add",this))return this;var Q=this.get(Y.options.event);return Q&&this.remove(Q),this.recognizers.push(Y),Y.manager=this,this.touchAction.update(),Y},remove:function(Y){if(h(Y,"remove",this))return this;if(Y=this.get(Y),Y){var Q=this.recognizers,re=B(Q,Y);re!==-1&&(Q.splice(re,1),this.touchAction.update())}return this},on:function(Y,Q){if(Y!==i&&Q!==i){var re=this.handlers;return f(I(Y),function(we){re[we]=re[we]||[],re[we].push(Q)}),this}},off:function(Y,Q){if(Y!==i){var re=this.handlers;return f(I(Y),function(we){Q?re[we]&&re[we].splice(B(re[we],Q),1):delete re[we]}),this}},emit:function(Y,Q){this.options.domEvents&&JS(Y,Q);var re=this.handlers[Y]&&this.handlers[Y].slice();if(!(!re||!re.length)){Q.type=Y,Q.preventDefault=function(){Q.srcEvent.preventDefault()};for(var we=0;we<re.length;)re[we](Q),we++}},destroy:function(){this.element&&Bb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Bb(Y,Q){var re=Y.element;if(re.style){var we;f(Y.options.cssProps,function(We,ot){we=C(re.style,ot),Q?(Y.oldCssProps[we]=re.style[we],re.style[we]=We):re.style[we]=Y.oldCssProps[we]||""}),Q||(Y.oldCssProps={})}}function JS(Y,Q){var re=n.createEvent("Event");re.initEvent(Y,!0,!0),re.gesture=Q,Q.target.dispatchEvent(re)}m(Mo,{INPUT_START:Le,INPUT_MOVE:se,INPUT_END:ue,INPUT_CANCEL:Te,STATE_POSSIBLE:Ti,STATE_BEGAN:vr,STATE_CHANGED:Ro,STATE_ENDED:Io,STATE_RECOGNIZED:fa,STATE_CANCELLED:Yl,STATE_FAILED:Si,DIRECTION_NONE:ge,DIRECTION_LEFT:Me,DIRECTION_RIGHT:Se,DIRECTION_UP:D,DIRECTION_DOWN:ie,DIRECTION_HORIZONTAL:ae,DIRECTION_VERTICAL:K,DIRECTION_ALL:W,Manager:os,Input:me,TouchAction:Ht,TouchInput:ft,MouseInput:zt,PointerEventInput:le,TouchMouseInput:Wt,SingleTouchInput:it,Recognizer:ci,AttrRecognizer:Fn,Tap:Sd,Pan:Jr,Swipe:Td,Pinch:pa,Rotate:Ci,Press:Za,on:S,off:A,each:f,merge:y,extend:b,assign:m,inherit:x,bindFn:_,prefixed:C});var pm=typeof e<"u"?e:typeof self<"u"?self:{};pm.Hammer=Mo,typeof i=="function"&&i.amd?i(function(){return Mo}):t.exports?t.exports=Mo:e[r]=Mo})(window,document,"Hammer")})(hQ);var Nb=hQ.exports;const h$e=hd(Nb),hl=jL({__proto__:null,default:h$e},[Nb]),fQ=1,pQ=2,RL=4,f$e={mousedown:fQ,mousemove:pQ,mouseup:RL};function p$e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function g$e(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(p$e(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function m$e(t){t.prototype.handler=function(n){let r=f$e[n.type];r&fQ&&n.button>=0&&(this.pressed=!0),r&pQ&&n.which===0&&(r=RL),this.pressed&&(r&RL&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}g$e(Nb.PointerEventInput);m$e(Nb.MouseInput);const v$e=Nb.Manager;class qS{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const y$e=hl?[[hl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[hl.Rotate,{enable:!1}],[hl.Pinch,{enable:!1}],[hl.Swipe,{enable:!1}],[hl.Pan,{threshold:0,enable:!1}],[hl.Press,{enable:!1}],[hl.Tap,{event:"doubletap",taps:2,enable:!1}],[hl.Tap,{event:"anytap",enable:!1}],[hl.Tap,{enable:!1}]]:null,n8={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},b$e={doubletap:["tap"]},_$e={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},lD={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},x$e={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},r8={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},w$e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Np=typeof window<"u"?window:global;let IL=!1;try{const t={get passive(){return IL=!0,!0}};Np.addEventListener("test",null,t),Np.removeEventListener("test",null)}catch{IL=!1}const E$e=w$e.indexOf("firefox")!==-1,{WHEEL_EVENTS:T$e}=lD,i8="wheel",s8=4.000244140625,S$e=40,C$e=.25;class A$e extends qS{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;Np.WheelEvent&&(E$e&&i.deltaMode===Np.WheelEvent.DOM_DELTA_PIXEL&&(s/=Np.devicePixelRatio),i.deltaMode===Np.WheelEvent.DOM_DELTA_LINE&&(s*=S$e)),s!==0&&s%s8===0&&(s=Math.floor(s/s8)),i.shiftKey&&s&&(s=s*C$e),this.callback({type:i8,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(T$e),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,IL?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===i8&&(this.options.enable=n)}}const{MOUSE_EVENTS:P$e}=lD,o8="pointermove",a8="pointerover",l8="pointerout",c8="pointerenter",u8="pointerleave";class R$e extends qS{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(P$e),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===o8&&(this.enableMoveEvent=n),e===a8&&(this.enableOverEvent=n),e===l8&&(this.enableOutEvent=n),e===c8&&(this.enableEnterEvent=n),e===u8&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(a8,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(l8,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(c8,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(u8,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(o8,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:I$e}=lD,d8="keydown",h8="keyup";class M$e extends qS{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:d8,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:h8,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(I$e),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===d8&&(this.enableDownEvent=n),e===h8&&(this.enableUpEvent=n)}}const f8="contextmenu";class L$e extends qS{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:f8,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===f8&&(this.options.enable=n)}}const ML=1,XE=2,LL=4,k$e={pointerdown:ML,pointermove:XE,pointerup:LL,mousedown:ML,mousemove:XE,mouseup:LL},O$e=1,N$e=2,D$e=3,B$e=0,F$e=1,z$e=2,U$e=1,$$e=2,j$e=4;function G$e(t){const e=k$e[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===LL||e===XE&&!Number.isFinite(n)?(s=i===O$e,o=i===N$e,a=i===D$e):e===XE?(s=!!(n&U$e),o=!!(n&j$e),a=!!(n&$$e)):e===ML&&(s=r===B$e,o=r===F$e,a=r===z$e),{leftButton:s,middleButton:o,rightButton:a}}function H$e(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const j2={srcElement:"root",priority:0};class V$e{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=j2;typeof r=="string"||r&&r.addEventListener?l={...j2,srcElement:r}:r&&(l={...j2,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let d=c.length-1;for(;d>=0&&!(c[d].priority>=u.priority);)d--;c.splice(d+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:d}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),d&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...G$e(e),...H$e(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const W$e={events:null,recognizers:null,recognizerOptions:{},Manager:v$e,touchAction:"none",tabIndex:0};class X$e{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=_$e[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...W$e,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||y$e}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(n8).forEach(i=>{const s=this.manager.get(i);s&&n8[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new A$e(e,this._onOtherEvent,{enable:!1}),this.moveInput=new R$e(e,this._onOtherEvent,{enable:!1}),this.keyInput=new M$e(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new L$e(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=b$e[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=r8[e]||e;let c=a.get(l);c||(c=new V$e(this),a.set(l,c),c.recognizerName=x$e[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=r8[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Vd(){}const Y$e=({isDragging:t})=>t?"grabbing":"grab",gQ={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Vd,onResize:Vd,onViewStateChange:Vd,onInteractionStateChange:Vd,onBeforeRender:Vd,onAfterRender:Vd,onLoad:Vd,onError:t=>Un.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:Y$e,getTooltip:null,debug:!1,drawPickingColors:!1};class KS{constructor(e){V(this,"props",void 0),V(this,"width",0),V(this,"height",0),V(this,"userData",{}),V(this,"canvas",null),V(this,"viewManager",null),V(this,"layerManager",null),V(this,"effectManager",null),V(this,"deckRenderer",null),V(this,"deckPicker",null),V(this,"eventManager",null),V(this,"tooltip",null),V(this,"metrics",void 0),V(this,"animationLoop",void 0),V(this,"stats",void 0),V(this,"viewState",void 0),V(this,"cursorState",void 0),V(this,"_needsRedraw",void 0),V(this,"_pickRequest",void 0),V(this,"_lastPointerDownInfo",null),V(this,"_metricsCounter",void 0),V(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),V(this,"_onEvent",n=>{const r=K$[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),V(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...gQ,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Un.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),fZ()==="IE"&&Un.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new HN({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&jg.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Un.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Un.removed("onLayerClick","onClick")(),e.initialViewState&&!Ba(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return bi(this.viewManager),this.viewManager.views}getViewports(e){return bi(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){bi(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),bi(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new q4e({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:d=>_Z({...s,...d,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:d=>this._setGLContext(d.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new aD({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,GN(e,{enable:!0,copyState:!0})),this.tooltip=new d$e(this.canvas),Nc(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new qZ;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new X$e(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in K$)this.eventManager.on(i,this._onEvent);this.viewManager=new F6e({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new B6e(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new e$e,this.deckRenderer=new r$e(e),this.deckPicker=new c$e(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Nc(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Un.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=ph.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}V(KS,"defaultProps",gQ);V(KS,"VERSION",eBe);class G2{constructor(e,n){V(this,"opts",void 0),V(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function q$e(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function iw(t){return t.stride||t.size*t.bytesPerElement}function mQ(t,e){e.offset&&Un.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=iw(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function K$e(t,e){const n=mQ(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class Z$e{constructor(e,n,r){V(this,"gl",void 0),V(this,"id",void 0),V(this,"size",void 0),V(this,"settings",void 0),V(this,"value",void 0),V(this,"doublePrecision",void 0),V(this,"_buffer",void 0),V(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&SFe(e,rr.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=q$e(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new zn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*iw(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),jg.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=K$e(this.getAccessor(),n||{});return r[e]=new G2(this,s.high),r["".concat(e,"64Low")]=i?new G2(this,s.low):new Float32Array(this.size),r}if(n){const r=mQ(this.getAccessor(),n);return{[e]:new G2(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof zn?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=iw(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=iw(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=z2(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?z2(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=jg.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?z2(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&Un.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const p8=[],g8=[];function cD(t,e=0,n=1/0){let r=p8;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(g8.length=t.length,r=g8):r=p8,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function vQ(t){return t&&t[Symbol.asyncIterator]}function yQ(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(d,{index:h,target:f})=>{if(!s){const y=h*l+c;for(let x=0;x<n;x++)f[x]=t[y+x];return f}const p=s[h],m=s[h+1]||u;let b;if(o){b=new Array(m-p);for(let y=p;y<m;y++){const x=y*l+c;f=new Array(n);for(let _=0;_<n;_++)f[_]=t[x+_];b[y-p]=f}}else if(l===n)b=t.subarray(p*n+c,m*n+c);else{b=new t.constructor((m-p)*n);let y=0;for(let x=p;x<m;x++){const _=x*l+c;for(let w=0;w<n;w++)b[y++]=t[_+w]}}return b}}const Q$e=[],sw=[[0,1/0]];function J$e(t,e){if(t===sw||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function H2(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let d=0;d<i;d++)n[r+c]=u[d]||0,c++}}function eje({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return H2({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,d)=>r(u+a,d)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const d=i[u]*n,h=s[u]*n;H2({source:t.subarray(o,d),target:e,start:a,end:h,size:n,getData:l}),o=d,a=h}return a<e.length&&H2({source:[],target:e,start:a,size:n,getData:l}),e}const tje={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function bQ(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...tje[n],...e,...t,type:n}}function _Q(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function xQ(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function wQ(t){t.push(t.shift())}function uD(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function EQ({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,d=uD(n,e),h=n.isConstant;if(!u&&r>=d)return;const f=h?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!h){const y=s;s=(x,_)=>n.normalizeConstant(y(x,_))}const p=h?(y,x)=>s(f,x):(y,x)=>s(f.subarray(y,y+a),x),m=t.getData({length:r}),b=new Float32Array(d);eje({source:m,target:b,sourceStartIndices:i,targetStartIndices:c,size:a,getData:p}),t.byteLength<b.byteLength+l&&t.reallocate(b.byteLength+l),t.subData({data:b,offset:l})}class dD extends Z$e{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:sw}),V(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return bQ(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=J$e(this.state.updateRanges,[r,i])}else this.state.updateRanges=sw}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Q$e}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==sw),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const d=Number.isFinite(c)?this.getVertexOffset(c):0,h=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:d,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;bi(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=yQ(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=e,{accessor:h,transform:f}=a,p=l.binaryAccessor||(typeof h=="function"?h:s[h]);bi(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let m=e.getVertexOffset(r);const{iterable:b,objectInfo:y}=cD(n,r,i);for(const x of b){y.index++;let _=p(x,y);if(f&&(_=f.call(this,_)),d){const w=(y.index<d.length-1?d[y.index+1]:o)-d[y.index];if(_&&Array.isArray(_[0])){let E=m;for(const S of _)e._normalizeValue(S,c,E),E+=u}else _&&_.length>u?c.set(_,m):(e._normalizeValue(_,y.target,0),P6e({target:c,source:y.target,start:m,count:w}));m+=w*u}else e._normalizeValue(_,c,m),m+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class nje{constructor({gl:e,attribute:n,timeline:r}){V(this,"gl",void 0),V(this,"type","interpolation"),V(this,"attributeInTransition",void 0),V(this,"settings",void 0),V(this,"attribute",void 0),V(this,"transition",void 0),V(this,"currentStartIndices",void 0),V(this,"currentLength",void 0),V(this,"transform",void 0),V(this,"buffers",void 0),this.gl=e,this.transition=new Ob(r),this.attribute=n,this.attributeInTransition=new dD(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=ije(e,n);const i={byteLength:0,usage:35050};this.buffers=[new zn(e,i),new zn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;wQ(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)EQ({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=uD(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:_Q(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const rje=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function ije(t,e){const n=xQ(e.size);return new QN(t,{vs:rje,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class sje{constructor({gl:e,attribute:n,timeline:r}){V(this,"gl",void 0),V(this,"type","spring"),V(this,"attributeInTransition",void 0),V(this,"settings",void 0),V(this,"attribute",void 0),V(this,"transition",void 0),V(this,"currentStartIndices",void 0),V(this,"currentLength",void 0),V(this,"texture",void 0),V(this,"framebuffer",void 0),V(this,"transform",void 0),V(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Ob(r),this.attribute=n,this.attributeInTransition=new dD(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=aje(e),this.framebuffer=lje(e,this.texture),this.transform=oje(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new zn(e,i),new zn(e,i),new zn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)EQ({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=uD(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:_Q(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),wQ(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),YS(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function oje(t,e,n){const r=xQ(e.size);return new QN(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function aje(t){return new Ya(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function lje(t,e){return new li(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const cje={interpolation:nje,spring:sje};class uje{constructor(e,{id:n,timeline:r}){V(this,"id",void 0),V(this,"isSupported",void 0),V(this,"gl",void 0),V(this,"timeline",void 0),V(this,"transitions",void 0),V(this,"needsRedraw",void 0),V(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=QN.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){Un.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=cje[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(Un.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const m8="attributeManager.invalidate",dje="attributeManager.updateStart",hje="attributeManager.updateEnd",fje="attribute.updateStart",pje="attribute.allocate",gje="attribute.updateEnd";class mje{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){V(this,"id",void 0),V(this,"gl",void 0),V(this,"attributes",void 0),V(this,"updateTriggers",void 0),V(this,"needsRedraw",void 0),V(this,"userData",void 0),V(this,"stats",void 0),V(this,"attributeTransitionManager",void 0),V(this,"mergeBoundsMemoized",kb(b6e)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new uje(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);qi(m8,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);qi(m8,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;qi(dje,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],d=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&Un.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof d=="string"?o[d]:void 0,e.startIndices)||typeof d=="string"&&!o[d]&&u.setConstantValue(s[d])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&qi(hje,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new dD(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(qi(fje,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&qi(pje,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,qi(gje,n,r))}}class vje extends Ob{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=UE(n,r,o)}}const v8=1e-5;function y8(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function yje(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=y8(t[o],e[o],n[o],r,i);return s}return y8(t,e,n,r,i)}function b8(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class bje extends Ob{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=yje(s,o,n,r,i);const l=b8(a,n),c=b8(a,o);l<v8&&c<v8&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const _je={interpolation:vje,spring:bje};class xje{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=bQ(i),!i)return;const o=_je[i.type];if(!o){Un.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function wje(t){const e=t[ed];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function Eje(t,e){const n=TQ({newProps:t,oldProps:e,propTypes:t[ed],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=Sje(t,e);let i=!1;return r||(i=Cje(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Aje(t,e),transitionsChanged:Tje(t,e)}}function Tje(t,e){if(!t.transitions)return!1;const n={},r=t[ed];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&kL(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function TQ({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=kL(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=kL(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function kL(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function Sje(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function Cje(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&_8(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&_8(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function Aje(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function _8(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},TQ({oldProps:i,newProps:r,triggerName:n})}const Pje="count(): argument not an object",Rje="count(): argument not a container";function Ije(t){if(!Lje(t))throw new Error(Pje);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Mje(t))return Object.keys(t).length;throw new Error(Rje)}function Mje(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Lje(t){return t!==null&&typeof t=="object"}function OL(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const kje={10241:9987,10240:9729,10242:33071,10243:33071},NL={};function Oje(t,e,n,r){if(n instanceof Ya)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new Ya(e,{...n,parameters:{...kje,...i,...r}});return NL[s.id]=t,s}function Nje(t,e){!e||!(e instanceof Ya)||NL[e.id]===t&&(e.delete(),delete NL[e.id])}const Dje={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||DL(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Ba(t,e,1)}},accessor:{validate(t,e){const n=YE(t);return n==="function"||n===YE(e.value)},equal(t,e,n){return typeof e=="function"?!0:Ba(t,e,1)}},array:{validate(t,e){return e.optional&&!t||DL(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ba(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ba(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:Oje(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{Nje(n.id,t)}}};function Bje(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=Fje(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function Fje(t,e){switch(YE(e)){case"object":return x0(t,e);case"array":return x0(t,{type:"array",value:e,compare:!1});case"boolean":return x0(t,{type:"boolean",value:e});case"number":return x0(t,{type:"number",value:e});case"function":return x0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function x0(t,e){return"type"in e?{name:t,...Dje[e.type],...e}:"value"in e?{name:t,type:YE(e.value),...e}:{name:t,type:"object",value:e}}function DL(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function YE(t){return DL(t)?"array":t===null?"null":typeof t}function zje(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=BL(t.constructor,n),i=Object.create(r);i[WE]=t,i[Zh]={},i[Fu]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const Uje="_mergedDefaultProps";function BL(t,e){let n=Uje;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=SQ(t,n);return r||(t[n]=$je(t,e||[]))}function $je(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=BL(r),s=SQ(t,"defaultProps")||{},o=Bje(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[ed],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[$2],o.deprecatedProps);for(const u of e){const d=BL(u.constructor);d&&(Object.assign(a,d),Object.assign(l,d[ed]),Object.assign(c,d[$2]))}return jje(a,t),Hje(a,l),Gje(a,c),a[ed]=l,a[$2]=c,e.length===0&&!hD(t,"_propTypes")&&(t._propTypes=l),a}function jje(t,e){const n=Wje(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function Gje(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])hD(this,s)||(this[s]=r);Un.deprecated(i,e[n].join("/"))()}})}function Hje(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=Vje(o))}t[rg]=n,t[Zh]={},Object.defineProperties(t,r)}function Vje(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||vQ(e)?this[Zh][t]=e:this[Fu][t]=e},get(){if(this[Fu]){if(t in this[Fu])return this[Fu][t]||this[rg][t];if(t in this[Zh]){const e=this[WE]&&this[WE].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[rg][t]}}return this[rg][t]}}}function hD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function SQ(t,e){return hD(t,e)&&t[e]}function Wje(t){const e=t.componentName;return e||Un.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let Xje=0;class fD{constructor(...e){V(this,"id",void 0),V(this,"props",void 0),V(this,"count",void 0),this.props=zje(this,e),this.id=this.props.id,this.count=Xje++}clone(e){const{props:n}=this,r={};for(const i in n[rg])i in n[Fu]?r[i]=n[Fu][i]:i in n[Zh]&&(r[i]=n[Zh][i]);return new this.constructor({...n,...r,...e})}}V(fD,"componentName","Component");V(fD,"defaultProps",{});const Yje=Object.freeze({});class qje{constructor(e){V(this,"component",void 0),V(this,"onAsyncPropUpdated",void 0),V(this,"asyncProps",void 0),V(this,"oldProps",void 0),V(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Yje}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[WE]||this.component;const n=e[Fu]||{},r=e[Zh]||e,i=e[rg]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(vQ(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[ed];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class Kje extends qje{constructor({attributeManager:e,layer:n}){super(n),V(this,"attributeManager",void 0),V(this,"needsRedraw",void 0),V(this,"needsUpdate",void 0),V(this,"subLayers",void 0),V(this,"usesPickingColorCache",void 0),V(this,"hasPickingBuffer",void 0),V(this,"changeFlags",void 0),V(this,"viewport",void 0),V(this,"uniformTransitions",void 0),V(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Zje="layer.changeFlag",Qje="layer.initialize",Jje="layer.update",e8e="layer.finalize",t8e="layer.matched",x8=2**24-1,n8e=Object.freeze([]),r8e=kb(({oldViewport:t,viewport:e})=>t.equals(e));let fl=new Uint8ClampedArray(0);const i8e={data:{type:"data",value:n8e,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:dL(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):dL(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:xn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class pf extends fD{constructor(...e){super(...e),V(this,"internalState",null),V(this,"lifecycle",pp.NO_STATE),V(this,"context",void 0),V(this,"state",void 0),V(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){bi(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=oQ(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=iQ(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return bi(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){bi(this.internalState);const r=this.internalState.viewport||this.context.viewport;return S6e(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===xn.DEFAULT||e===xn.LNGLAT||e===xn.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){bi(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Ije(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=OL(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!r8e({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(fl.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>x8&&Un.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),fl=jg.allocate(fl,n,{size:3,copy:!0,maxCount:Math.max(n,x8)});const i=Math.floor(fl.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),fl[o*3+0]=s[0],fl[o*3+1]=s[1],fl[o*3+2]=s[2]}e.value=fl.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==fl.buffer&&(r.value=fl.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){bi(!this.internalState),bi(Number.isFinite(this.props.coordinateSystem)),qi(Qje,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Kje({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Un.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new xje(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){qi(t8e,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(qi(Jje,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){qi(e8e,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];Nc(s.gl,{polygonOffset:l}),Ha(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&qi(Zje,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=Eje(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){wje(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new mje(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}V(pf,"defaultProps",i8e);V(pf,"layerName","Layer");const s8e="compositeLayer.renderLayers";class CQ extends pf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:m,extensions:b,fetch:y,operation:x,_subLayerProps:_}=this.props,w={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:m,extensions:b,fetch:y,operation:x},E=_&&e.id&&_[e.id],S=E&&E.updateTriggers,A=e.id||"sublayer";if(E){const k=this.props[ed],M=e.type?e.type._propTypes:{};for(const I in E){const B=M[I]||k[I];B&&B.type==="accessor"&&(E[I]=this.getSubLayerAccessor(E[I]))}}Object.assign(w,e,E),w.id="".concat(this.props.id,"-").concat(A),w.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...S};for(const k of b){const M=k.getSubLayerProps.call(this,k);M&&Object.assign(w,M,{updateTriggers:Object.assign(w.updateTriggers,M.updateTriggers)})}return w}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=iD(s,Boolean),this.internalState.subLayers=r}qi(s8e,this,i,r);for(const s of r)s.parent=this}}V(CQ,"layerName","CompositeLayer");class pD{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){V(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&Ba(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}}V(pD,"defaultProps",{});V(pD,"extensionName","LayerExtension");class AQ{constructor(e){V(this,"opts",void 0),V(this,"typedArrayManager",void 0),V(this,"indexStarts",[0]),V(this,"vertexStarts",[0]),V(this,"vertexCount",0),V(this,"instanceCount",0),V(this,"attributes",void 0),V(this,"_attributeDefs",void 0),V(this,"data",void 0),V(this,"getGeometry",void 0),V(this,"geometryBuffer",void 0),V(this,"buffers",void 0),V(this,"positionSize",void 0),V(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=jg,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(bi(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?yQ(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=cD(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((d,h)=>{const f=d&&this.normalizeGeometry(d);c[h]=f,r[h+1]=r[h]+(f?this.getGeometrySize(f):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof zn){const d=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/d}else if(o.buffer){const d=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/d}else if(o.value){const d=o.value,h=o.stride/d.BYTES_PER_ELEMENT||this.positionSize;i=i||d.length/h}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((d,h)=>{const f=c[h]||d;u.vertexStart=r[h],u.indexStart=n[h];const p=h<r.length-1?r[h+1]:i;u.geometrySize=p-r[h],u.geometryIndex=h,this.updateGeometryAttributes(f,u)},a,l),this.vertexCount=n[n.length-1]}}const o8e=typeof window<"u"?P.useLayoutEffect:P.useEffect;function qE(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const a8e={position:"absolute",zIndex:-1};function PQ(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>PQ(n,e));if(ZS(t)){if(l8e(t))return e.style=a8e,P.cloneElement(t,e);if(c8e(t))return P.cloneElement(t,e)}return t}function ZS(t){return t&&typeof t=="object"&&"type"in t||!1}function l8e(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function c8e(t){const e=t.type;return e&&e.deckGLViewProps}function FL(t){if(typeof t=="function")return P.createElement(Hg,{},t);if(Array.isArray(t))return t.map(FL);if(ZS(t)){if(t.type===P.Fragment)return FL(t.props.children);if(qE(t.type,Hg))return t}return t}function u8e({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return P.Children.forEach(FL(t),o=>{if(ZS(o)){const a=o.type;if(qE(a,pf)){const l=d8e(a,o.props);i.push(l)}else r.push(o);if(qE(a,Hg)&&a!==Hg&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function d8e(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function h8e({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;ZS(o)&&qE(o.type,Hg)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:d,y:h,width:f,height:p}=c;l=PQ(l,{x:d,y:h,width:f,height:p,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:d,height:h}=a,f={position:"absolute",left:c,top:u,width:d,height:h},p="view-".concat(o),m=P.createElement("div",{key:p,id:p,style:f},...l);if(n){const b={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:y=>{y.viewId=o,e._onViewStateChange(y)}};return P.createElement(n,{key:p,value:b},m)}return m})}const f8e={mixBlendMode:null};function p8e({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in f8e?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function g8e(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function RQ(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function m8e(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():RQ(t)}});return r}const IQ=P.forwardRef((t,e)=>{const[n,r]=P.useState(0),s=P.useRef({control:null,version:n,forceUpdate:()=>r(E=>E+1)}).current,o=P.useRef(null),a=P.useRef(null),l=P.useMemo(()=>u8e(t),[t.layers,t.views,t.children]);let c=!0;const u=E=>{var S;return c&&t.viewState?(s.viewStateUpdateRequested=E,null):(s.viewStateUpdateRequested=null,(S=t.onViewStateChange)===null||S===void 0?void 0:S.call(t,E))},d=E=>{if(c)s.interactionStateUpdateRequested=E;else{var S;s.interactionStateUpdateRequested=null,(S=t.onInteractionStateChange)===null||S===void 0||S.call(t,E)}},h=P.useMemo(()=>{const E={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete E._customRender,s.deck&&s.deck.setProps(E),E},[t]);P.useEffect(()=>{const E=t.Deck||KS;return s.deck=m8e(s,E,{...h,parent:o.current,canvas:a.current}),()=>{var S;return(S=s.deck)===null||S===void 0?void 0:S.finalize()}},[]),o8e(()=>{RQ(s);const{viewStateUpdateRequested:E,interactionStateUpdateRequested:S}=s;E&&u(E),S&&d(S)}),P.useImperativeHandle(e,()=>g8e(s),[]);const f=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:p,width:m,height:b,id:y,style:x}=t,{containerStyle:_,canvasStyle:w}=P.useMemo(()=>p8e({width:m,height:b,style:x}),[m,b,x]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===f||s.version!==n){s.lastRenderedViewports=f,s.version=n;const E=h8e({children:l.children,deck:s.deck,ContextProvider:p}),S=P.createElement("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:a,style:w});s.control=P.createElement("div",{id:"".concat(y||"deckgl","-wrapper"),ref:o,style:_},[S,E])}return c=!1,s.control});IQ.defaultProps=KS.defaultProps;const v8e=IQ,y8e="modulepreload",b8e=function(t){return"/"+t},w8={},_8e=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=b8e(o),o in w8)return;w8[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":y8e,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},x8e=P.createContext(null);function w8e(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function pc(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!pc(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!pc(t[i],e[i]))return!1;return!0}return!1}function E8e(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function E8(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();pc(n,r)||e.setProjection(n)}function T8(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function S8(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const T8e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function C8(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of T8e)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}var A8={};const P8={version:8,sources:{},layers:[]},R8={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},V2={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},I8={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},S8e=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],C8e=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Vg{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[I8[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[R8[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[V2[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Vg.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=P8}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||A8e()||null,container:e,style:C8(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),E8(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in R8)o.on(u,this._onPointerEvent);for(const u in V2)o.on(u,this._onCameraEvent);for(const u in I8)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Vg.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=E8e(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=S8(i,{...T8(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||S8(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of S8e)if(s in e&&!pc(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=P8,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(C8(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!pc(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!pc(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!pc(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of C8e){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;pc(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in V2&&(typeof n=="object"&&(n.viewState=T8(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{E8(this._renderTransform,n),e.transform=n}}}Vg.savedMaps=[];function A8e(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||A8.MapboxAccessToken}catch{}try{t=t||A8.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const P8e=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function R8e(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of I8e(e))!(r in n)&&!P8e.includes(r)&&(n[r]=e[r].bind(e));return n}function I8e(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const M8e=typeof document<"u"?P.useLayoutEffect:P.useEffect,L8e=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function k8e(t,e){for(const r of L8e)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const QS=P.createContext(null);function O8e(t,e,n){const r=P.useContext(x8e),[i,s]=P.useState(null),o=P.useRef(),{current:a}=P.useRef({mapLib:null,map:null});P.useEffect(()=>{const u=t.mapLib;let d=!0,h;return Promise.resolve(u||n).then(f=>{if(!d)return;if(!f)throw new Error("Invalid mapLib");const p="Map"in f?f:f.default;if(!p.Map)throw new Error("Invalid mapLib");if(k8e(p,t),!p.supported||p.supported(t))t.reuseMaps&&(h=Vg.reuse(t,o.current)),h||(h=new Vg(p.Map,t,o.current)),a.map=R8e(h),a.mapLib=p,s(h),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(f=>{const{onError:p}=t;p?p({type:"error",target:null,originalEvent:null,error:f}):console.error(f)}),()=>{d=!1,h&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?h.recycle():h.destroy())}},[]),M8e(()=>{i&&i.setProps(t)}),P.useImperativeHandle(e,()=>a.map,[i]);const l=P.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return P.createElement("div",{id:t.id,ref:o,style:l},i&&P.createElement(QS.Provider,{value:a},P.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const N8e=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function gf(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!N8e.test(r)?n[r]=`${i}px`:n[r]=i}}function D8e(t,e){const{map:n,mapLib:r}=P.useContext(QS),i=P.useRef({props:t});i.current.props=t;const s=P.useMemo(()=>{let m=!1;P.Children.forEach(t.children,x=>{x&&(m=!0)});const b={...t,element:m?document.createElement("div"):null},y=new r.Marker(b);return y.setLngLat([t.longitude,t.latitude]),y.getElement().addEventListener("click",x=>{var _,w;(w=(_=i.current.props).onClick)===null||w===void 0||w.call(_,{type:"click",target:y,originalEvent:x})}),y.on("dragstart",x=>{var _,w;const E=x;E.lngLat=s.getLngLat(),(w=(_=i.current.props).onDragStart)===null||w===void 0||w.call(_,E)}),y.on("drag",x=>{var _,w;const E=x;E.lngLat=s.getLngLat(),(w=(_=i.current.props).onDrag)===null||w===void 0||w.call(_,E)}),y.on("dragend",x=>{var _,w;const E=x;E.lngLat=s.getLngLat(),(w=(_=i.current.props).onDragEnd)===null||w===void 0||w.call(_,E)}),y},[]);P.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:d=null,rotation:h=0,rotationAlignment:f="auto",pitchAlignment:p="auto"}=t;return P.useEffect(()=>{gf(s.getElement(),c)},[c]),P.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!w8e(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==h&&s.setRotation(h),s.getRotationAlignment()!==f&&s.setRotationAlignment(f),s.getPitchAlignment()!==p&&s.setPitchAlignment(p),s.getPopup()!==d&&s.setPopup(d),Fc.createPortal(t.children,s.getElement())}P.memo(P.forwardRef(D8e));function M8(t){return new Set(t?t.trim().split(/\s+/):[])}function B8e(t,e){const{map:n,mapLib:r}=P.useContext(QS),i=P.useMemo(()=>document.createElement("div"),[]),s=P.useRef({props:t});s.current.props=t;const o=P.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,d;(d=(u=s.current.props).onOpen)===null||d===void 0||d.call(u,c)}),l},[]);if(P.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),P.useEffect(()=>{gf(o.getElement(),t.style)},[t.style]),P.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!pc(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=M8(o.options.className),l=M8(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return Fc.createPortal(t.children,i)}P.memo(P.forwardRef(B8e));function Db(t,e,n,r){const i=P.useContext(QS),s=P.useMemo(()=>t(i),[]);return P.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function F8e(t){const e=Db(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return P.useEffect(()=>{gf(e._container,t.style)},[t.style]),null}P.memo(F8e);function z8e(t){const e=Db(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return P.useEffect(()=>{gf(e._controlContainer,t.style)},[t.style]),null}P.memo(z8e);function U8e(t,e){const n=P.useRef({props:t}),r=Db(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,P.useImperativeHandle(e,()=>r,[]),P.useEffect(()=>{gf(r._container,t.style)},[t.style]),null}P.memo(P.forwardRef(U8e));function $8e(t){const e=Db(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return P.useEffect(()=>{gf(e._container,t.style)},[t.style]),null}P.memo($8e);function j8e(t){const e=Db(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=P.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),P.useEffect(()=>{gf(e._container,i)},[i]),null}P.memo(j8e);const G8e=_8e(()=>import("./maplibre-gl-WL9tJjqe.js").then(t=>t.m),__vite__mapDeps([])),H8e=P.forwardRef(function(e,n){return O8e(e,n,G8e)}),V8e=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,W8e=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,L8=[0,0,0,255],X8e={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:L8},getLineColor:{type:"accessor",value:L8},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class gD extends pf{getShaders(){return super.getShaders({vs:V8e,fs:W8e,modules:[sD,oD]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:Ny[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Ny[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Uy(e,{...this.getShaders(),id:this.props.id,geometry:new JN({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}V(gD,"defaultProps",X8e);V(gD,"layerName","ScatterplotLayer");const MQ={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function LQ(t,e,n={}){return Y8e(t,n)!==e?(K8e(t,n),!0):!1}function Y8e(t,e={}){return Math.sign(q8e(t,e))}function q8e(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function K8e(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const d=t[l+u];t[l+u]=t[c+u],t[c+u]=d}}}function Fa(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function zL(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function $y(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function UL(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function ow(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function kQ(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],d=$y(t,0,n,o);let h,f;const p=NQ(d,i,s,[]),m=[];Fa(c,d);for(let b=1;b<l;b++){for(h=$y(t,b,n,o,h),f=ow(h,p);f;){UL(d,h,f,p,m);const y=ow(m,p);y&&(UL(d,m,y,p,m),f=y),Fa(c,m),zL(d,m),Q8e(p,i,f),r&&c.length>n&&(c=[],u.push(c),Fa(c,d)),f=ow(h,p)}Fa(c,h),zL(d,h)}return r?u:u[0]}const k8=0,Z8e=1;function ux(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function OQ(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(Z8e):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:d,types:h,holes:f}=l.shift();J8e(d,r,f[0]||d.length,c),u=NQ(c[0],i,s,u);const p=ow(c[1],u);if(p){let m=O8(d,h,r,0,f[0]||d.length,u,p);const b={pos:m[0].pos,types:m[0].types,holes:[]},y={pos:m[1].pos,types:m[1].types,holes:[]};l.push(b,y);for(let x=0;x<f.length;x++)m=O8(d,h,r,f[x],f[x+1]||d.length,u,p),m[0]&&(b.holes.push(b.pos.length),b.pos=ux(b.pos,m[0].pos),o&&(b.types=ux(b.types,m[0].types))),m[1]&&(y.holes.push(y.pos.length),y.pos=ux(y.pos,m[1].pos),o&&(y.types=ux(y.types,m[1].types)))}else{const m={positions:d};o&&(m.edgeTypes=h),f.length&&(m.holeIndices=f),a.push(m)}}return a}function O8(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],d=[],h=[];let f,p,m;const b=$y(t,a-1,n,r);let y=Math.sign(o&8?b[1]-s[3]:b[0]-s[2]),x=e&&e[a-1],_=0,w=0;for(let E=0;E<a;E++)f=$y(t,E,n,r,f),p=Math.sign(o&8?f[1]-s[3]:f[0]-s[2]),m=e&&e[r/n+E],p&&y&&y!==p&&(UL(b,f,o,s,h),Fa(l,h)&&u.push(x),Fa(c,h)&&d.push(x)),p<=0?(Fa(l,f)&&u.push(m),_-=p):u.length&&(u[u.length-1]=k8),p>=0?(Fa(c,f)&&d.push(m),w+=p):d.length&&(d[d.length-1]=k8),zL(b,f),y=p,x=m;return[_?{pos:l,types:e&&u}:null,w?{pos:c,types:e&&d}:null]}function NQ(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function Q8e(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function J8e(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const eGe=85.051129;function tGe(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);DQ(o,n,0,i-r);const a=kQ(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)BQ(l,n);return a}function nGe(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let d=0;d<=e.length;d++){const h=e[d]||t.length,f=c,p=rGe(t,r,l,h);for(let m=p;m<h;m++)o[c++]=t[m];for(let m=l;m<p;m++)o[c++]=t[m];DQ(o,r,f,c),iGe(o,r,f,c,n==null?void 0:n.maxLatitude),l=h,a[d]=c}a.pop();const u=OQ(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const d of u)BQ(d.positions,r);return u}function rGe(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function iGe(t,e,n,r,i=eGe){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=$y(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,Fa(t,a),a[1]=Math.sign(a[1])*i,Fa(t,a),a[0]=s,Fa(t,a)}}function DQ(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function BQ(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function sGe(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?kQ(i,{size:e,gridResolution:n}):r?tGe(i,{size:e}):i}const oGe=1,aGe=2,W2=4;class lGe extends AQ{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?sGe(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(N8(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&N8(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=W2,r[s+o-2]=W2):(r[s]+=oGe,r[s+o-2]+=aGe),r[s+o-1]=W2}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function N8(t){return Array.isArray(t[0])}const cGe=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,uGe=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,FQ=[0,0,0,255],dGe={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:FQ},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},X2={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class mD extends pf{constructor(...e){super(...e),V(this,"state",void 0)}getShaders(){return super.getShaders({vs:cGe,fs:uGe,modules:[sD,oD]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:X2,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:X2,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:X2,defaultValue:FQ},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new lGe({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:Ny[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Uy(e,{...this.getShaders(),id:this.props.id,geometry:new JN({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}V(mD,"defaultProps",dGe);V(mD,"layerName","PathLayer");const dx=MQ.CLOCKWISE,D8=MQ.COUNTER_CLOCKWISE,zu={isClosed:!0};function hGe(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function Y0(t){return"positions"in t?t.positions:t}function aw(t){return"holeIndices"in t?t.holeIndices:null}function fGe(t){return Array.isArray(t[0])}function pGe(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function gGe(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function mGe(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function B8(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!gGe(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return zu.start=e,zu.end=s,zu.size=r,LQ(t,i,zu),s}function F8(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!mGe(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return zu.start=e,zu.end=l,zu.size=r,LQ(t,o,zu),l}function zQ(t,e){hGe(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=F8(n,o,i,e,s[a-1],s[a],a===0?dx:D8),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!fGe(t))return F8(n,0,t,e,0,n.length,dx),n;if(!pGe(t)){let i=0;for(const[s,o]of t.entries())i=B8(n,i,o,e,s===0?dx:D8),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return B8(n,0,t,e,dx),n}function Y2(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function z8(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function vGe(t,e,n,r){let i=aw(t);i&&(i=i.map(a=>a/e));let s=Y0(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=Y2(s,0,1),l=Y2(s,0,2),c=Y2(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),z8(s,0,2,1)):(n||(s=s.slice()),z8(s,2,0,1)))}return u3(s,i,e)}class yGe extends AQ{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=zQ(e,this.positionSize);return this.opts.resolution?OQ(Y0(n),aw(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?nGe(Y0(n),aw(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(U8(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return Y0(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&U8(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=vGe(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=Y0(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],d=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=d}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&aw(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function U8(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const UQ=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,bGe=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(UQ,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),_Ge=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(UQ,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),xGe=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,KE=[0,0,0,255],wGe={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:KE},getLineColor:{type:"accessor",value:KE},material:!0},hx={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class vD extends pf{constructor(...e){super(...e),V(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?bGe:_Ge,fs:xGe,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[sD,Xze,oD]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===xn.DEFAULT&&(r=xn.LNGLAT);let s;r===xn.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new yGe({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||XN(e,rr.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:hx,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:hx,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:hx,accessor:"getFillColor",defaultValue:KE,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:hx,accessor:"getLineColor",defaultValue:KE,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new Uy(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Uy(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new JN({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}V(vD,"defaultProps",wGe);V(vD,"layerName","SolidPolygonLayer");function EGe({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let h=0;h<o;h++){const f=e(t[h]);if(a>h&&f>=i&&(a=h),f>=s){l=h;break}}let c=a;const d=l-a!==r.length?t.slice(l):void 0;for(let h=0;h<r.length;h++)t[c++]=r[h];if(d){for(let h=0;h<d.length;h++)t[c++]=d[h];t.length=c}return{startRow:a,endRow:a+r.length}}const $Q=[0,0,0,255],TGe=[0,0,0,255],SGe={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:TGe},getLineColor:{type:"accessor",value:$Q},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Pv extends CQ{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&Un.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>EGe({data:r,getIndex:o=>o.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:u,objectInfo:d}=cD(n,l,c);for(const h of u){d.index++;let f=r(h,d);s&&(f=zQ(f,a));const{holeIndices:p}=f,m=f.positions||f;if(p)for(let b=0;b<=p.length;b++){const y=m.slice(p[b-1]||0,p[b]||m.length);o.push(this.getSubLayerRow({path:y},h,d.index))}else o.push(this.getSubLayerRow({path:m},h,d.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:c,transitions:u,positionFormat:d}=this.props,{lineWidthUnits:h,lineWidthScale:f,lineWidthMinPixels:p,lineWidthMaxPixels:m,lineJointRounded:b,lineMiterLimit:y,lineDashJustified:x}=this.props,{getFillColor:_,getLineColor:w,getLineWidth:E,getLineDashArray:S,getElevation:A,getPolygon:k,updateTriggers:M,material:I}=this.props,{paths:B,pathsDiff:R}=this.state,O=this.getSubLayerClass("fill",vD),C=this.getSubLayerClass("stroke",mD),F=this.shouldRenderSubLayer("fill",B)&&new O({_dataDiff:n,extruded:s,elevationScale:c,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:A,getFillColor:_,getLineColor:s&&o?w:$Q,material:I,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:M&&{getPolygon:M.getPolygon,getElevation:M.getElevation,getFillColor:M.getFillColor,lineColors:s&&o,getLineColor:M.getLineColor}}),{data:e,positionFormat:d,getPolygon:k}),q=!s&&r&&this.shouldRenderSubLayer("stroke",B)&&new C({_dataDiff:R&&(()=>R),widthUnits:h,widthScale:f,widthMinPixels:p,widthMaxPixels:m,jointRounded:b,miterLimit:y,dashJustified:x,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(w),getWidth:this.getSubLayerAccessor(E),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:M&&{getWidth:M.getLineWidth,getColor:M.getLineColor,getDashArray:M.getLineDashArray}}),{data:B,positionFormat:d,getPath:G=>G.path});return[!s&&F,q,s&&F]}}V(Pv,"layerName","PolygonLayer");V(Pv,"defaultProps",SGe);function $L(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!$L(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!$L(t[s],e[s],n-1))return!1;return!0}return!1}class CGe{constructor(e,n,r){this.pool=[],this.taskQueue=[],this.onResult=r;for(let i=0;i<n;i++)this.addWorkerToPool(e)}addWorkerToPool(e){const n=new e;n.onerror=r=>{console.log(r)},n.onmessage=r=>{const i=this.pool.findIndex(s=>s.worker===n);if(i!==-1){this.pool[i].currentTaskId=null;const s=JSON.parse(r.data);this.onResult(s),this.executeNextTask()}},this.pool.push({worker:n,workerConstructor:e,currentTaskId:null})}executeTask(e){this.taskQueue.push(e),this.executeNextTask()}executeNextTask(){const e=this.pool.find(n=>n.currentTaskId===null);if(e&&this.taskQueue.length>0){const n=this.taskQueue.shift();e.currentTaskId=n.id,e.worker.postMessage({...n,payload:JSON.stringify(n.payload)})}}terminateTask(e){const n=this.pool.findIndex(r=>r.currentTaskId===e);if(n!==-1){const r=this.pool[n];r.worker.terminate(),this.pool.splice(n,1),this.addWorkerToPool(r.workerConstructor)}}terminateAllTasks(){this.pool.forEach(e=>e.worker.terminate()),this.pool=[]}}function AGe(t){return new Worker("/assets/DexieQueryWorker-hh0_Twka.js",{name:t==null?void 0:t.name})}const PGe={inject:{"vs:#decl":`
attribute vec2 instanceDashArrays;
attribute float instanceDashOffsets;
varying vec2 vDashArray;
varying float vDashOffset;
`,"vs:#main-end":`
vDashArray = instanceDashArrays;
vDashOffset = instanceDashOffsets / width.x;
`,"fs:#decl":`
uniform float dashAlignMode;
uniform float capType;
uniform bool dashGapPickable;
varying vec2 vDashArray;
varying float vDashOffset;

float round(float x) {
  return floor(x + 0.5);
}
`,"fs:#main-start":`
  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float offset;

  if (unitLength > 0.0) {
    if (dashAlignMode == 0.0) {
      offset = vDashOffset;
    } else {
      unitLength = vPathLength / round(vPathLength / unitLength);
      offset = solidLength / 2.0;
    }

    float unitOffset = mod(vPathPosition.y + offset, unitLength);

    if (gapLength > 0.0 && unitOffset > solidLength) {
      if (capType <= 0.5) {
        if (!(dashGapPickable && picking_uActive)) {
          discard;
        }
      } else {
        float distToEnd = length(vec2(
          min(unitOffset - solidLength, unitLength - unitOffset),
          vPathPosition.x
        ));
        if (distToEnd > 1.0) {
          if (!(dashGapPickable && picking_uActive)) {
            discard;
          }
        }
      }
    }
  }
`}},RGe={inject:{"vs:#decl":`
attribute float instanceOffsets;
`,"vs:DECKGL_FILTER_SIZE":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  size *= offsetWidth;
`,"vs:#main-end":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  float offsetDir = sign(instanceOffsets);
  vPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;
  vPathPosition.y *= offsetWidth;
  vPathLength *= offsetWidth;
`,"fs:#main-start":`
  float isInside;
  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);
  if (isInside == 0.0) {
    discard;
  }
`}},IGe={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class yD extends pD{constructor({dash:e=!1,offset:n=!1,highPrecisionDash:r=!1}={}){super({dash:e||r,offset:n,highPrecisionDash:r})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let n={};return e.opts.dash&&(n=OL(n,PGe)),e.opts.offset&&(n=OL(n,RGe)),n}initializeState(e,n){const r=this.getAttributeManager();!r||!n.isEnabled(this)||(n.opts.dash&&r.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),n.opts.highPrecisionDash&&r.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:n.getDashOffsets.bind(this)}}),n.opts.offset&&r.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,n){if(!n.isEnabled(this))return;const r={};n.opts.dash&&(r.dashAlignMode=this.props.dashJustified?1:0,r.dashGapPickable=!!this.props.dashGapPickable),this.state.model.setUniforms(r)}getDashOffsets(e){const n=[0],r=this.props.positionFormat==="XY"?2:3,i=Array.isArray(e[0]),s=i?e.length:e.length/r;let o,a;for(let l=0;l<s-1;l++)o=i?e[l]:e.slice(l*r,l*r+r),o=this.projectPosition(o),l>0&&(n[l]=n[l-1]+hze(a,o)),a=o;return n}}V(yD,"defaultProps",IGe);V(yD,"extensionName","PathStyleExtension");const MGe="lMsL1JaJvv3fuJWczgIa";function LGe(t,e=[0]){let n=[];return e.forEach(r=>{r===0?n=t:t.forEach(i=>n.push([i[0]+r,i[1]]))}),n}function kGe(t,e=[0]){const n=[];return t.forEach(r=>{r.forEach(i=>{const s=`${i.country}/${i.name_1||""}/${i.name_2||""}`;i.coordinates.forEach(o=>{n.push({polygon:LGe(o,e),name:s})})})}),n}const OGe=t=>{const e=Uc(),[n,r]=P.useState({longitude:e.x,latitude:e.y,zoom:e.zoom}),[i,s]=P.useState(-1),[o,a]=P.useState([]),[l,c]=P.useState(null),[u,d]=P.useState([[],[],[]]),[h,f]=P.useState([]),[p,m]=P.useState(null);Ts(),P.useEffect(()=>{const _=new CGe(AGe,10,w=>{try{const E=w.payload.polygons.map(A=>kGe(A));d(E);const S=w.payload.points.flat(1).map(A=>({name:A.name,coordinates:[A.lng,A.lat]}));f(S)}catch(E){console.log(E,w)}});return m(_),()=>{_&&_.terminateAllTasks()}},[]),P.useEffect(()=>{if(p==null||t.width===0||t.height===0)return;const{topLeft:_,bottomRight:w}=k1e(t.width,t.height,{lng:n.longitude,lat:n.latitude},n.zoom),E=Math.ceil(n.zoom),S=Dbe(_,w,E);if($L(o,S[kl-1],2))return;a(S[kl-1]),i!==-1&&p.terminateTask(i);const A=i+1;s(A),p.executeTask({dbName:t.uuid,type:"dexie",id:A,payload:{mortonNumbers:Fbe(S),zoom:Math.floor(n.zoom)}})},[p,n.longitude,n.latitude,n.zoom,t.width,t.height]);const b=[new Pv({id:"region1-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:_=>_.polygon,getFillColor:_=>[10,80,10,5],getLineColor:_=>[40,100,40],getLineWidth:1,getDashArray:[3,2],dashJustified:!0,dashGapPickable:!0,extensions:[new yD({dash:!0})],onHover:_=>c(_)}),new Pv({id:"region2-layer",pickable:!0,data:u[1],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:_=>_.polygon,getFillColor:_=>[80,10,10,5],getLineColor:_=>[80,80,100],getLineWidth:1,onHover:_=>c(_)}),new Pv({id:"country-layer",pickable:!0,data:u[0],stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,lineWidthScale:10,getPolygon:_=>_.polygon,getFillColor:_=>[10,10,80,5],getLineColor:_=>[200,200,40],getLineWidth:1,onHover:_=>c(_)}),new gD({id:"scatter-plot-layer",data:h,getPosition:_=>_.coordinates,getRadius:2e3,getFillColor:[255,0,0],pickable:!0,onHover:_=>c(_)})],y=()=>{if(!l)return;const{object:_,x:w,y:E}=l;if(!_)return null;const S=_.polygon?`Region: ${_.name}`:_.name?`Location: ${_.name}`:`Route: ${_.source} - ${_.target}`;return $("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:w,top:E,color:"white",backgroundColor:"black",padding:"5px"},children:S})},x=P.useCallback(_=>{const w=_.viewState;r(w)},[]);return!p||i===-1?$(yg,{variant:"indeterminate"}):Be(v8e,{views:[new aD({repeat:!0})],width:t.width,height:t.height,controller:!0,layers:b,viewState:n,onViewStateChange:x,children:[$(H8e,{mapStyle:`https://api.maptiler.com/maps/${t.map}/style.json?key=${MGe}`}),y(),t.children]})},NGe=()=>Be("div",{style:{fontSize:"12px",position:"absolute",bottom:0,right:"7px",background:"rgba(255,255,255,0.1)"},children:[$("a",{href:"https://www.maptiler.com/copyright/",target:"_blank",children:" MapTiler"})," ",$("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",children:" OpenStreetMap contributors"})]}),DGe=()=>{const{uuid:t,zoom:e,y:n,x:r,type:i}=Uc(),{width:s,height:o}=B3();return $(G3,{uuid:t,type:i,viewportCenter:[e,n,r],backgroundColor:"rgba(230,230,230,0.6)",backgroundPanel:a=>$(OGe,{uuid:t,map:"openstreetmap",width:s,height:o,children:$(NGe,{})})})},BGe=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=Uc();return console.log(i),$(G3,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(255,230,230,0.6)",backgroundPanel:s=>$(GK,{...s})})},FGe=()=>{const{type:t}=Uc();switch(t){case sn.Racetrack:return $(BGe,{});case sn.Graph:return $(A3e,{});case sn.RealWorld:return $(DGe,{});default:throw new Error(t)}};async function zGe(t){return{projects:await si.getSingleton().databases.where("type").anyOf([sn.Racetrack,sn.Graph,sn.RealWorld]).toArray()}}async function UGe(t){return{resources:await si.getSingleton().databases.where("type").anyOf([go.gadmShapes,go.idegsmCities,go.idegsmRoutes]).toArray()}}const $Ge=Xre([{path:"/",element:$(Qbe,{}),children:[{path:"/resources",element:$(u_,{type:_u.resources,items:[$(Gz,{}),$(Uz,{})]}),loader:UGe,children:[{path:"/resources/gadm",element:$(d_e,{})},{path:"/resources/cities",element:$(h_e,{})},{path:"/resources/routes",element:$(f_e,{})}]},{path:"/resources/new",element:$(Vz,{acceptableSuffixes:[".json",".csv",".csv.zip"],children:$(u_,{type:_u.resources,items:[$(nz,{type:_u.resources,items:[{icon:$(Hw,{fontSize:"large"}),name:"GADM GeoJSON",url:"/resources/gadm",tooltip:"GADM Country(Level 0),Region and Subregion shape files"},{icon:$(Vw,{fontSize:"large"}),name:"IDE-GSM Cities",url:"/resources/cities",tooltip:"IDE-GSM data file includes city information, GDP, population, etc."},{icon:$(iy,{fontSize:"large"}),name:"IDE-GSM Routes",url:"/resources/routes",tooltip:"IDE-GSM data file includes route information, start, end, distance, etc."}]}),$(lo,{children:"dummy"})]})})},{path:"/projects",element:$(u_,{type:_u.projects,items:[$(Gz,{}),$(Uz,{})]}),loader:zGe},{path:"/projects/new",element:$(Vz,{acceptableSuffixes:[".json",".csv",".csv.zip"],children:$(u_,{type:_u.projects,items:[$(lo,{children:"dummy"}),$(nz,{type:_u.projects,items:[{icon:$(u9,{fontSize:"large"}),name:"Racetrack Model",url:`/create/${sn.Racetrack}`,tooltip:"Paul Krugman's spatial economy model"},{icon:$(kO,{fontSize:"large"}),name:"Graph Structured Model",url:`/create/${sn.Racetrack}`,tooltip:"Graph structured spatial economy model"},{icon:$(d9,{fontSize:"large"}),name:"Real-World Model",url:`/create/${sn.RealWorld}`,tooltip:"Full-set simulation model"}]})]})})}]},{path:"/delete/:type/:uuid",element:$(zbe,{}),loader:oP()},{path:"/create/:type",element:$(Wz,{}),loader:oP()},{path:"/update/:type/:uuid",element:$(Wz,{}),loader:oP()},{path:"/:projectType/:uuid/:zoom/:y/:x/",element:$(FGe,{}),loader:kwe}]),jGe=document.getElementById("root"),GGe=w7(jGe);GGe.render($(P.StrictMode,{children:$(nie,{router:$Ge})}));export{xi as c,hd as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
